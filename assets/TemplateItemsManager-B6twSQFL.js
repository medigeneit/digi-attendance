import{P as W,r as C,Q as K,m as V,A as P,e as G,K as X,f as Z,o as h,i as ee,c as x,g as M,w as te,a as e,t as b,h as O,j as N,S as z,v as j,x as q,F as U,y as A,ad as J,a5 as ae,J as Q,b as se,p as re,B as Y,k as T}from"./index-CKoKWZwY.js";import{_ as le}from"./_plugin-vue_export-helper-DlAUqK2U.js";const oe=W("templateItems",()=>{const u=C([]),L=C(!1),c=C(!1),i=C("");function $(){u.value.sort((v,n)=>(v.order_no??0)-(n.order_no??0)||v.id-n.id)}async function I(v){var n,r,d,y;L.value=!0,i.value="";try{const{data:p}=await K.get(`/checklist-templates/${v}/items`);u.value=((p==null?void 0:p.data)||[]).map(f=>({...f})),$()}catch(p){i.value=((r=(n=p==null?void 0:p.response)==null?void 0:n.data)==null?void 0:r.message)||"Failed to load items",(y=(d=window==null?void 0:window.notify)==null?void 0:d.error)==null||y.call(d,i.value)}finally{L.value=!1}}async function o(v,n){var r,d,y,p,f,_;c.value=!0,i.value="";try{const{data:m}=await K.post(`/checklist-templates/${v}/items`,n),l=(m==null?void 0:m.data)||{};return u.value.push(l),$(),(d=(r=window==null?void 0:window.notify)==null?void 0:r.success)==null||d.call(r,"Item added"),l}catch(m){throw i.value=((p=(y=m==null?void 0:m.response)==null?void 0:y.data)==null?void 0:p.message)||"Failed to add item",(_=(f=window==null?void 0:window.notify)==null?void 0:f.error)==null||_.call(f,i.value),m}finally{c.value=!1}}async function g(v,n){var y,p,f,_;c.value=!0,i.value="";const r=u.value.findIndex(m=>m.id===v),d=r>=0?{...u.value[r]}:null;r>=0&&(u.value[r]={...u.value[r],...n});try{const{data:m}=await K.patch(`/checklist-template-items/${v}`,n),l=(m==null?void 0:m.data)||{};return r>=0&&(u.value[r]={...l}),$(),l}catch(m){throw r>=0&&d&&(u.value[r]=d),i.value=((p=(y=m==null?void 0:m.response)==null?void 0:y.data)==null?void 0:p.message)||"Failed to update item",(_=(f=window==null?void 0:window.notify)==null?void 0:f.error)==null||_.call(f,i.value),m}finally{c.value=!1}}async function k(v){var d,y,p,f,_,m;c.value=!0,i.value="";const n=u.value.findIndex(l=>l.id===v),r=n>=0?{...u.value[n]}:null;n>=0&&u.value.splice(n,1);try{await K.delete(`/checklist-template-items/${v}`),(y=(d=window==null?void 0:window.notify)==null?void 0:d.success)==null||y.call(d,"Item deleted")}catch(l){throw n>=0&&r&&u.value.splice(n,0,r),i.value=((f=(p=l==null?void 0:l.response)==null?void 0:p.data)==null?void 0:f.message)||"Failed to delete item",(m=(_=window==null?void 0:window.notify)==null?void 0:_.error)==null||m.call(_,i.value),l}finally{c.value=!1}}function w(v){const n=u.value.findIndex(r=>r.id===v);if(n>0){const r=u.value[n-1],d=u.value[n],y=r.order_no;r.order_no=d.order_no,d.order_no=y,u.value[n-1]=d,u.value[n]=r}}function D(v){const n=u.value.findIndex(r=>r.id===v);if(n>=0&&n<u.value.length-1){const r=u.value[n+1],d=u.value[n],y=r.order_no;r.order_no=d.order_no,d.order_no=y,u.value[n+1]=d,u.value[n]=r}}async function S(){var v,n,r,d;c.value=!0;try{const y=u.value.map((p,f)=>{const _=f;return(p.order_no??0)!==_?(p.order_no=_,K.patch(`/checklist-template-items/${p.id}`,_)):Promise.resolve()});await Promise.allSettled(y),(n=(v=window==null?void 0:window.notify)==null?void 0:v.success)==null||n.call(v,"Order saved")}catch{throw(d=(r=window==null?void 0:window.notify)==null?void 0:r.error)==null||d.call(r,"Failed to save order"),new Error("Failed to save order")}finally{c.value=!1,$()}}return{items:u,loading:L,saving:c,error:i,fetch:I,add:o,update:g,remove:k,moveUp:w,moveDown:D,saveOrder:S}}),ne=["aria-label"],ie={class:"w-full max-w-2xl rounded-2xl bg-white shadow-2xl ring-1 ring-black/5 dark:bg-gray-900 dark:text-gray-100 transform transition-all duration-150 ease-out scale-100"},de={class:"sticky top-0 z-10 flex items-center justify-between gap-3 border-b border-gray-100 px-5 py-4 bg-white/80 backdrop-blur dark:border-gray-800 dark:bg-gray-900/80"},ue={class:"text-lg font-semibold tracking-tight"},ce={class:"px-5 py-4 space-y-6"},ve={class:"rounded-xl border border-gray-100 dark:border-gray-800"},pe={class:"p-4 grid grid-cols-1 gap-4 sm:grid-cols-2"},me={key:0},ge={class:"flex items-center justify-between"},ye={class:"flex items-center gap-2 text-xs text-gray-600"},fe={class:"relative"},be=["readonly"],he={class:"pointer-events-none absolute right-2 top-2 text-[11px] text-gray-400"},_e={class:"mt-1 flex items-start justify-between"},xe={class:"text-xs text-gray-500"},ke={class:"text-gray-800 dark:text-gray-200"},we={key:0,class:"text-xs text-rose-600"},Ce={key:0,class:"mt-1 text-xs text-rose-600"},$e={class:"rounded-xl border border-gray-100 dark:border-gray-800"},Me={class:"p-4"},Oe={class:"grid grid-cols-1 sm:grid-cols-2 gap-2"},Ie={class:"flex items-center gap-2"},Ee=["innerHTML"],Le=["value"],Te={key:0,class:"mt-2 text-xs text-rose-600"},De={class:"rounded-xl border border-gray-100 dark:border-gray-800"},Se={class:"p-4 grid grid-cols-1 gap-4 sm:grid-cols-2"},Be={class:"flex h-full items-end"},qe={class:"inline-flex items-center gap-2"},Ve={key:0,class:"mt-1 text-xs text-rose-600"},Ke={class:"rounded-xl border border-gray-100 dark:border-gray-800"},Ne={class:"p-4"},Ue={class:"flex flex-wrap gap-2"},Ae=["value"],Re={class:"inline-flex items-center gap-1"},je={key:0,class:"mt-2 text-xs text-rose-600"},Pe={class:"sticky bottom-0 flex items-center justify-end gap-2 border-t border-gray-100 px-5 py-4 bg-white/80 backdrop-blur dark:border-gray-800 dark:bg-gray-900/80"},Fe=["disabled"],He=["disabled"],ze={key:0,class:"h-4 w-4 animate-spin",viewBox:"0 0 24 24",fill:"none"},R=80,Je={__name:"AddEditItemModal",props:{open:{type:Boolean,default:!1},mode:{type:String,default:"add"},model:{type:Object,default:()=>({})},nextOrder:{type:Number,default:0}},emits:["close","submit"],setup(u,{emit:L}){const c=u,i=L,$=[{value:"BLOCKED",label:"Blocked"},{value:"COMPLETED",label:"Completed"}],I=[{value:"departmental_incharge",label:"Departmental In-charge",icon:"building"},{value:"technical_support_team",label:"Technical Support Team",icon:"wrench"},{value:"it_incharge",label:"IT In-charge",icon:"chip"},{value:"hr_department",label:"HR Department",icon:"users"}],o=C({item_key:"",label:"",required:!1,order_no:0,status:"BLOCKED",handover_to:"departmental_incharge"}),g=C({}),k=C(!1),w=C(!0),D=C(null),S=C(null);function v(l){return(l??"").toLowerCase().trim().replace(/[^a-z0-9]+/g,"_").replace(/^_+|_+$/g,"").slice(0,R)}const n=V(()=>c.mode==="edit"?"Edit Checklist Item":"Add Checklist Item"),r=V(()=>c.mode==="edit"),d=V(()=>k.value);P(()=>c.open,async l=>{var t,s,a,E,B,F,H;l&&(r.value?(o.value={item_key:((t=c.model)==null?void 0:t.item_key)??"",label:((s=c.model)==null?void 0:s.label)??"",required:!!((a=c.model)!=null&&a.required),order_no:Number(((E=c.model)==null?void 0:E.order_no)??0),status:((B=c.model)==null?void 0:B.status)??"BLOCKED",handover_to:((F=c.model)==null?void 0:F.handover_to)??"departmental_incharge"},w.value=!1):(o.value={item_key:"",label:"",required:!1,order_no:Number(c.nextOrder??0),status:"BLOCKED",handover_to:"departmental_incharge"},w.value=!0),g.value={},k.value=!1,await Q(),(H=D.value)==null||H.focus())},{immediate:!0}),P(()=>o.value.label,l=>{!r.value&&w.value&&(o.value.item_key=v(l))});function y(){const l={};return r.value||(o.value.item_key.trim()?o.value.item_key.length>R?l.item_key=`Max ${R} characters`:/^[a-z0-9_]+$/.test(o.value.item_key)||(l.item_key="Use lowercase letters, numbers, underscores only"):l.item_key="Item key is required"),o.value.label.trim()||(l.label="Label is required"),(o.value.order_no==null||isNaN(o.value.order_no)||o.value.order_no<0)&&(l.order_no="Order must be 0 or a positive number"),$.some(t=>t.value===o.value.status)||(l.status="Invalid status"),I.some(t=>t.value===o.value.handover_to)||(l.handover_to="Select a valid handover target"),g.value=l,Object.keys(l).length===0}function p(){k.value||i("close")}function f(l){c.open&&(l.key==="Escape"&&(l.stopPropagation(),p()),(l.ctrlKey||l.metaKey)&&l.key.toLowerCase()==="enter"&&(l.preventDefault(),_()))}G(()=>window.addEventListener("keydown",f)),X(()=>window.removeEventListener("keydown",f));async function _(){var l,t;if(!y()){await Q();const s=Object.keys(g.value)[0];if(s){const a=document.querySelector(`[data-field="${s}"]`);(l=a==null?void 0:a.focus)==null||l.call(a),(t=S.value)==null||t.scrollIntoView({behavior:"smooth",block:"center"})}return}k.value=!0;try{i("submit",{...o.value})}finally{k.value=!1}}function m({name:l}){switch(l){case"building":return`
      <svg viewBox="0 0 24 24" class="h-4 w-4" fill="none" stroke="currentColor" stroke-width="1.8">
        <path d="M3 21h18M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16M9 8h6M9 12h6M9 16h6"/>
      </svg>`;case"wrench":return`
      <svg viewBox="0 0 24 24" class="h-4 w-4" fill="none" stroke="currentColor" stroke-width="1.8">
        <path d="M14.7 6.3a4 4 0 1 0-5.66 5.66l7.07 7.07a2 2 0 0 0 2.83-2.83L11.87 9.13"/>
      </svg>`;case"chip":return`
      <svg viewBox="0 0 24 24" class="h-4 w-4" fill="none" stroke="currentColor" stroke-width="1.8">
        <rect x="7" y="7" width="10" height="10" rx="2"/>
        <path d="M7 2v3M12 2v3M17 2v3M7 19v3M12 19v3M17 19v3M2 7h3M2 12h3M2 17h3M19 7h3M19 12h3M19 17h3"/>
      </svg>`;case"users":return`
      <svg viewBox="0 0 24 24" class="h-4 w-4" fill="none" stroke="currentColor" stroke-width="1.8">
        <path d="M16 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
        <circle cx="9" cy="7" r="3"/>
        <path d="M22 21v-2a4 4 0 0 0-3-3.87M16 3.13a3 3 0 0 1 0 5.74"/>
      </svg>`;default:return""}}return(l,t)=>(h(),Z(ae,{"enter-active-class":"transition ease-out duration-150","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition ease-in duration-100","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:ee(()=>[u.open?(h(),x("div",{key:0,class:"fixed inset-0 top-10 z-50 flex items-start md:items-center justify-center bg-black/40 backdrop-blur-[2px] p-4",onClick:te(p,["self"]),"aria-modal":"true",role:"dialog","aria-label":n.value},[e("div",ie,[e("div",de,[e("div",null,[e("h3",ue,b(n.value),1),t[7]||(t[7]=e("p",{class:"text-xs text-gray-500"},"Create structured, grouped checklist items for smoother handover.",-1))]),e("button",{class:"inline-flex h-8 w-8 items-center justify-center rounded-full text-gray-500 hover:bg-gray-100 hover:text-gray-800 focus:outline-none focus:ring-2 focus:ring-gray-300 dark:hover:bg-gray-800",onClick:p,title:"Close (Esc)"},"✕")]),Object.keys(g.value).length?(h(),x("div",{key:0,ref_key:"errorSummaryRef",ref:S,class:"mx-5 mt-4 rounded-lg border border-rose-200 bg-rose-50 px-4 py-3 text-rose-700 text-sm dark:bg-rose-950/30 dark:border-rose-900"}," Please fix the highlighted fields. ",512)):M("",!0),e("div",ce,[e("div",ve,[t[12]||(t[12]=e("div",{class:"border-b px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-200 dark:border-gray-800"},"Basics",-1)),e("div",pe,[r.value?M("",!0):(h(),x("div",me,[e("div",ge,[t[9]||(t[9]=e("label",{for:"item_key",class:"block text-sm font-medium"},"Item Key",-1)),e("label",ye,[O(e("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=s=>w.value=s),class:"h-4 w-4"},null,512),[[z,w.value]]),t[8]||(t[8]=N(" Auto from Label "))])]),e("div",fe,[O(e("input",{ref_key:"firstInputRef",ref:D,id:"item_key","onUpdate:modelValue":t[1]||(t[1]=s=>o.value.item_key=s),readonly:w.value,maxlength:"80",type:"text","data-field":"item_key",class:"mt-1 w-full rounded-lg border px-3 py-2 outline-none transition focus:ring-2 focus:ring-gray-900/20 disabled:opacity-60 dark:bg-gray-900 dark:border-gray-700",placeholder:"e.g., nid_copy","aria-invalid":"true"},null,8,be),[[j,o.value.item_key,void 0,{trim:!0}]]),e("div",he,b(o.value.item_key.length)+"/"+b(R),1)]),e("div",_e,[e("p",xe,[t[10]||(t[10]=N("Lowercase, numbers, underscores. Preview: ")),e("code",ke,"checklist."+b(o.value.item_key||"..."),1)]),g.value.item_key?(h(),x("p",we,b(g.value.item_key),1)):M("",!0)])])),e("div",{class:q(r.value?"sm:col-span-2":"")},[t[11]||(t[11]=e("label",{for:"label",class:"block text-sm font-medium"},"Label",-1)),O(e("input",{id:"label","onUpdate:modelValue":t[2]||(t[2]=s=>o.value.label=s),type:"text","data-field":"label",class:"mt-1 w-full rounded-lg border px-3 py-2 outline-none transition focus:ring-2 focus:ring-gray-900/20 dark:bg-gray-900 dark:border-gray-700",placeholder:"e.g., National ID Copy"},null,512),[[j,o.value.label,void 0,{trim:!0}]]),g.value.label?(h(),x("p",Ce,b(g.value.label),1)):M("",!0)],2)])]),e("div",$e,[t[13]||(t[13]=e("div",{class:"border-b px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-200 dark:border-gray-800"},"Handover To",-1)),e("div",Me,[e("div",Oe,[(h(),x(U,null,A(I,s=>e("label",{key:s.value,class:q(["group inline-flex items-center justify-between gap-3 rounded-xl border px-3 py-2 text-sm cursor-pointer transition hover:bg-gray-50 dark:border-gray-700 dark:hover:bg-gray-800",o.value.handover_to===s.value?"ring-2 ring-gray-900/20 bg-gray-50 dark:bg-gray-800":""])},[e("div",Ie,[e("span",{class:"inline-flex h-6 w-6 items-center justify-center rounded-lg bg-gray-100 text-gray-700 group-hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-200",innerHTML:m({name:s.icon})},null,8,Ee),e("span",null,b(s.label),1)]),O(e("input",{"onUpdate:modelValue":t[3]||(t[3]=a=>o.value.handover_to=a),type:"radio",value:s.value,class:"h-4 w-4","data-field":"handover_to"},null,8,Le),[[J,o.value.handover_to]])],2)),64))]),g.value.handover_to?(h(),x("p",Te,b(g.value.handover_to),1)):M("",!0)])]),e("div",De,[t[16]||(t[16]=e("div",{class:"border-b px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-200 dark:border-gray-800"},"Display & Order",-1)),e("div",Se,[e("div",Be,[e("label",qe,[O(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>o.value.required=s),type:"checkbox",class:"h-4 w-4","data-field":"required"},null,512),[[z,o.value.required]]),t[14]||(t[14]=e("span",{class:"text-sm"},"Required",-1))])]),e("div",null,[t[15]||(t[15]=e("label",{for:"order_no",class:"block text-sm font-medium"},"Order",-1)),O(e("input",{id:"order_no","onUpdate:modelValue":t[5]||(t[5]=s=>o.value.order_no=s),type:"number",min:"0","data-field":"order_no",class:"mt-1 w-full rounded-lg border px-3 py-2 outline-none transition focus:ring-2 focus:ring-gray-900/20 dark:bg-gray-900 dark:border-gray-700",placeholder:"0"},null,512),[[j,o.value.order_no,void 0,{number:!0}]]),g.value.order_no?(h(),x("p",Ve,b(g.value.order_no),1)):M("",!0)])])]),e("div",Ke,[t[17]||(t[17]=e("div",{class:"border-b px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-200 dark:border-gray-800"},"Status",-1)),e("div",Ne,[e("div",Ue,[(h(),x(U,null,A($,s=>e("label",{key:s.value,class:q(["inline-flex items-center gap-2 rounded-full border px-3 py-1.5 text-sm cursor-pointer transition hover:bg-gray-50 dark:border-gray-700 dark:hover:bg-gray-800",o.value.status===s.value?"ring-2 ring-gray-900/20":""])},[O(e("input",{"onUpdate:modelValue":t[6]||(t[6]=a=>o.value.status=a),type:"radio",value:s.value,class:"h-4 w-4","data-field":"status"},null,8,Ae),[[J,o.value.status]]),e("span",Re,[e("span",{class:q(["inline-block h-2.5 w-2.5 rounded-full",{"bg-amber-500":s.value==="BLOCKED","bg-emerald-500":s.value==="COMPLETED"}])},null,2),N(" "+b(s.label),1)])],2)),64))]),g.value.status?(h(),x("p",je,b(g.value.status),1)):M("",!0)])])]),e("div",Pe,[e("button",{class:"rounded-lg border px-3 py-2 text-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-300 dark:border-gray-700 dark:hover:bg-gray-800",onClick:p,disabled:d.value}," Cancel ",8,Fe),e("button",{class:"inline-flex items-center gap-2 rounded-lg bg-gray-900 px-3 py-2 text-sm text-white transition hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-gray-300 disabled:opacity-60",onClick:_,disabled:d.value,title:"Submit (Ctrl+Enter)"},[k.value?(h(),x("svg",ze,t[18]||(t[18]=[e("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4",opacity:"0.25"},null,-1),e("path",{d:"M22 12a10 10 0 0 1-10 10",stroke:"currentColor","stroke-width":"4","stroke-linecap":"round"},null,-1)]))):M("",!0),N(" "+b(r.value?"Update":"Create"),1)],8,He)])])],8,ne)):M("",!0)]),_:1}))}},Qe=le(Je,[["__scopeId","data-v-d9c7ce1f"]]),Ye={class:"mx-auto max-w-7xl p-4"},Ge={class:"mb-4 flex items-center gap-2"},We={class:"flex-1"},Xe={class:"text-sm text-gray-500"},Ze={class:"font-medium"},et={class:"mb-3 flex flex-wrap items-center gap-2"},tt=["value"],at=["value"],st={class:"ml-auto flex items-center gap-2"},rt=["disabled"],lt={class:"overflow-hidden rounded-xl border bg-white"},ot={class:"min-w-full text-sm"},nt={key:0},it={class:"px-3 py-2"},dt={class:"flex items-center gap-1"},ut=["disabled","onClick"],ct=["disabled","onClick"],vt={class:"ml-2 tabular-nums text-gray-500"},pt={class:"px-3 py-2 font-mono text-xs text-gray-700"},mt={class:"px-3 py-2"},gt={class:"truncate"},yt={class:"px-3 py-2"},ft=["title"],bt={class:"px-3 py-2"},ht={class:"inline-flex cursor-pointer items-center gap-2"},_t=["checked","disabled","onChange"],xt={class:"text-xs"},kt={class:"px-3 py-2"},wt={class:"px-3 py-2"},Ct={class:"flex items-center gap-2"},$t=["onClick"],Mt={key:1},Ot={key:0,class:"mt-3 text-sm text-gray-500"},Lt={__name:"TemplateItemsManager",setup(u){const L=se(),c=V(()=>Number(L.params.id||L.query.template_id)),i=oe(),$=C(!1),I=C("add"),o=C(null),g=C(""),k=C({handover_to:"",status:""}),w={departmental_incharge:"Departmental In-charge",technical_support_team:"Technical Support Team",it_incharge:"IT In-charge",hr_department:"HR Department"},D=[{value:"",label:"All handovers"},{value:"departmental_incharge",label:w.departmental_incharge},{value:"technical_support_team",label:w.technical_support_team},{value:"it_incharge",label:w.it_incharge},{value:"hr_department",label:w.hr_department}],S=[{value:"",label:"All status"},{value:"BLOCKED",label:"Blocked"},{value:"COMPLETED",label:"Completed"}],v=V(()=>{const t=(g.value||"").toLowerCase().trim();return(Array.isArray(i.items)?i.items:[]).filter(a=>!(t&&!((a.item_key||"")+" "+(a.label||"")+" "+(w[a.handover_to]||"")+" "+(a.status||"")).toLowerCase().includes(t)||k.value.handover_to&&a.handover_to!==k.value.handover_to||k.value.status&&a.status!==k.value.status)).sort((a,E)=>(a.order_no??0)-(E.order_no??0))}),n=V(()=>{var t;return((t=i.items)==null?void 0:t.length)||0});G(async()=>{c.value&&await i.fetch(c.value)}),P(c,async(t,s)=>{t&&t!==s&&await i.fetch(t)});function r(){I.value="add",o.value=null,$.value=!0}function d(t){I.value="edit",o.value={...t},$.value=!0}async function y(t){var s;try{if(I.value==="add")await i.add(c.value,t);else if((s=o.value)!=null&&s.id){const a={label:t.label,status:t.status,required:!!t.required,order_no:t.order_no??o.value.order_no,handover_to:t.handover_to};await i.update(o.value.id,a)}$.value=!1}catch{}}async function p(t){var s,a;try{await i.update(t.id,{required:!t.required}),(a=(s=window==null?void 0:window.notify)==null?void 0:s.success)==null||a.call(s,"Required updated")}catch{}}function f(t){i.moveUp(t.id)}function _(t){i.moveDown(t.id)}async function m(){await i.saveOrder()}function l(){g.value="",k.value={handover_to:"",status:""}}return(t,s)=>(h(),x("div",Ye,[e("div",Ge,[e("div",We,[s[5]||(s[5]=e("h2",{class:"text-xl font-semibold"},"Checklist Template Items",-1)),e("p",Xe,[s[4]||(s[4]=N(" Template: ")),e("span",Ze,b(c.value==1?"Joining Checklist Items":"Exit Checklist Items"),1)])]),e("button",{class:"rounded-lg bg-gray-900 px-3 py-2 text-white shadow hover:bg-gray-800",onClick:r}," + Add Item ")]),e("div",et,[O(e("input",{"onUpdate:modelValue":s[0]||(s[0]=a=>g.value=a),type:"text",placeholder:"Search key/label/hand-over/status…",class:"w-64 rounded-lg border px-3 py-2 focus:outline-none focus:ring-2 focus:ring-gray-900/20"},null,512),[[j,g.value]]),O(e("select",{"onUpdate:modelValue":s[1]||(s[1]=a=>k.value.handover_to=a),class:"rounded-lg border px-3 py-2 focus:outline-none focus:ring-2 focus:ring-gray-900/20",title:"Filter by Handover target"},[(h(),x(U,null,A(D,a=>e("option",{key:a.value,value:a.value},b(a.label),9,tt)),64))],512),[[Y,k.value.handover_to]]),O(e("select",{"onUpdate:modelValue":s[2]||(s[2]=a=>k.value.status=a),class:"rounded-lg border px-3 py-2 focus:outline-none focus:ring-2 focus:ring-gray-900/20",title:"Filter by Status"},[(h(),x(U,null,A(S,a=>e("option",{key:a.value,value:a.value},b(a.label),9,at)),64))],512),[[Y,k.value.status]]),e("button",{class:"rounded-lg border px-3 py-2 hover:bg-gray-50",onClick:l,title:"Reset filters"}," Reset "),e("div",st,[e("button",{class:"rounded-lg border px-3 py-2 hover:bg-gray-50",disabled:T(i).saving,onClick:m,title:"Persist current order"}," Save Order ",8,rt)])]),e("div",lt,[e("table",ot,[s[8]||(s[8]=e("thead",{class:"bg-gray-50 text-left"},[e("tr",null,[e("th",{class:"px-3 py-2 w-20"},"Order"),e("th",{class:"px-3 py-2"},"Item Key"),e("th",{class:"px-3 py-2"},"Label"),e("th",{class:"px-3 py-2"},"Handover To"),e("th",{class:"px-3 py-2 w-28"},"Required"),e("th",{class:"px-3 py-2 w-28"},"Status"),e("th",{class:"px-3 py-2 w-40"},"Actions")])],-1)),e("tbody",null,[T(i).loading?(h(),x("tr",nt,s[6]||(s[6]=[e("td",{colspan:"7",class:"px-3 py-4"},[e("div",{class:"h-4 w-full animate-pulse rounded bg-gray-100"})],-1)]))):M("",!0),(h(!0),x(U,null,A(v.value,(a,E)=>(h(),x("tr",{key:a.id,class:"border-t hover:bg-gray-50"},[e("td",it,[e("div",dt,[e("button",{class:"rounded border px-2 py-1 text-xs hover:bg-gray-50 disabled:opacity-50",disabled:E===0||T(i).saving,onClick:B=>f(a),title:"Move up"},"↑",8,ut),e("button",{class:"rounded border px-2 py-1 text-xs hover:bg-gray-50 disabled:opacity-50",disabled:E===v.value.length-1||T(i).saving,onClick:B=>_(a),title:"Move down"},"↓",8,ct),e("span",vt,b(a.order_no??E),1)])]),e("td",pt,b(a.item_key),1),e("td",mt,[e("div",gt,b(a.label),1)]),e("td",yt,[e("span",{class:q(["inline-flex items-center rounded-full px-2 py-0.5 text-xs font-medium",{"bg-gray-100 text-gray-700":!a.handover_to,"bg-sky-100 text-sky-700":a.handover_to==="departmental_incharge","bg-amber-100 text-amber-800":a.handover_to==="technical_support_team","bg-indigo-100 text-indigo-700":a.handover_to==="it_incharge","bg-emerald-100 text-emerald-700":a.handover_to==="hr_department"}]),title:w[a.handover_to]||"—"},b(w[a.handover_to]||"—"),11,ft)]),e("td",bt,[e("label",ht,[e("input",{type:"checkbox",class:"h-4 w-4",checked:!!a.required,disabled:T(i).saving,onChange:B=>p(a)},null,40,_t),e("span",xt,b(a.required?"Yes":"No"),1)])]),e("td",kt,[e("span",{class:q(["inline-flex items-center rounded-full px-2 py-0.5 text-xs font-medium",{"bg-amber-100 text-amber-800":a.status==="BLOCKED","bg-emerald-100 text-emerald-700":a.status==="COMPLETED","bg-gray-100 text-gray-700":!a.status}])},b(a.status||"—"),3)]),e("td",wt,[e("div",Ct,[e("button",{class:"rounded-lg border px-2.5 py-1 text-sm hover:bg-gray-50",onClick:B=>d(a)}," Edit ",8,$t)])])]))),128)),!T(i).loading&&v.value.length===0?(h(),x("tr",Mt,s[7]||(s[7]=[e("td",{colspan:"7",class:"px-3 py-10 text-center text-gray-500"}," No items found. Try adjusting filters or add a new item. ",-1)]))):M("",!0)])])]),T(i).saving?(h(),x("div",Ot,"Saving…")):M("",!0),re(Qe,{open:$.value,mode:I.value,model:o.value,"next-order":n.value,onClose:s[3]||(s[3]=a=>$.value=!1),onSubmit:y},null,8,["open","mode","model","next-order"])]))}};export{Lt as default};
