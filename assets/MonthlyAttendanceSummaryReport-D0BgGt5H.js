import{_ as vt}from"./EmployeeFilter-TipOTMJL.js";import{_ as ft}from"./FlexibleDatePicker-WzJ540JI.js";import{L as bt}from"./LoaderView-D1w7BJu1.js";import{U as nt}from"./UpdateOrCreate-BoUNCx7w.js";import{x as C,c as u,o as l,t as a,_ as xt,u as wt,f as kt,g as Ht,D as Ct,r as h,q as j,h as rt,y as Dt,p as St,k as A,a as e,j as J,s as o,b as v,n as M,F as $,e as R,d as q,m as Y,P as Lt,A as zt}from"./index-KWsY3reh.js";import{u as Tt}from"./attendance--IQMEy6C.js";import"./company-BSkI1UMm.js";import"./department-CQf6G-31.js";import"./EmployeeDropdownInput-DMleXip3.js";import"./SelectDropdown-CN7yEpmK.js";import"./UserChip-BAEAJA1r.js";import"./user-BVKDuWKo.js";import"./TimePickerAsFloatHour-C6Gclmjc.js";const lt={__name:"DisplayFormattedWorkingHours",props:["workingHours"],setup(G){const T=G,p=C(()=>{if(!T.workingHours)return"-";const S=Math.floor(T.workingHours),m=Math.round((T.workingHours-S)*60);return m?`${S}h ${m}m`:`${S}h`});return(S,m)=>(l(),u("span",null,a(p.value),1))}},Ft={class:"px-4 space-y-4"},At={class:"glass-panel px-4 py-3 bg-white/90 backdrop-blur border border-slate-100"},Mt={class:"flex items-start justify-between gap-3"},$t={class:"flex items-start gap-3 min-w-0"},Rt={class:"min-w-0"},qt={class:"flex flex-wrap items-center gap-2"},It={key:0,class:"ml-1 text-[10px] font-normal"},Et={class:"mt-1 text-xs text-slate-500"},Pt={class:"font-semibold"},Ut={class:"mt-1 text-sm text-red-500 font-bold"},Bt={class:"font-semibold text-slate-500"},Nt={class:"flex flex-wrap items-center justify-end gap-2"},Vt={class:"hidden lg:flex items-center gap-2"},Wt={class:"segmented-control"},Ot=["onClick"],jt={class:"hidden lg:flex items-center gap-2"},Jt={class:"segmented-control segmented-control--ghost"},Yt=["onClick"],Gt=["disabled"],Kt={class:"hidden sm:inline"},Xt={class:"sm:hidden"},Zt=["disabled","title"],Qt={class:"hidden sm:inline"},gt=["disabled"],te=["disabled"],ee={class:"mt-3 flex flex-wrap items-center gap-2 lg:hidden"},se={class:"segmented-control"},ae=["onClick"],ne={class:"segmented-control segmented-control--ghost"},re=["onClick"],le={class:"glass-panel p-3 bg-white/90 backdrop-blur"},de={class:"flex items-center justify-start gap-4"},ie={class:"flex gap-2"},oe={key:3},ce={key:0,class:"empty-state"},ue={key:1,class:"empty-state glass-panel"},_e={key:2,class:"space-y-4"},pe={key:0,class:"grid gap-3 md:grid-cols-2 xl:grid-cols-3"},me={class:"report-card__header"},ye={class:"report-card__title"},he={class:"report-card__subtitle"},ve={class:"report-card__body"},fe={class:"report-card__row"},be={class:"text-gray-500 text-xs"},xe={class:"report-card__grid"},we={class:"report-card__metric"},ke={class:"report-card__metric"},He={class:"report-card__metric"},Ce={class:"report-card__metric"},De={class:"report-card__metric"},Se={class:"report-card__metric"},Le={class:"report-card__metric"},ze={class:"report-card__metric"},Te={class:"report-card__footer"},Fe={class:"flex items-center gap-3 text-xs text-gray-500"},Ae={class:"min-w-full table-auto border-collapse"},Me={class:"text-center text-xs"},$e={class:"td"},Re={class:"td text-left"},qe={class:"td text-left"},Ie={class:"td"},Ee={class:"td"},Pe={class:"td"},Ue={class:"td"},Be={class:"td"},Ne={class:"td"},Ve={class:"td"},We={class:"td"},Oe={class:"td"},je={class:"td"},Je={class:"td"},Ye={class:"td"},Ge={class:"td"},Ke={class:"td"},Xe={class:"td text-xs"},Ze={class:"text-[11px] text-gray-500"},Qe={class:"td"},ge={class:"td"},ts={class:"td"},es={class:"td"},ss={class:"td"},as={class:"w-10 text-xs text-gray-600"},ns={class:"td"},rs={class:"w-10 text-xs text-gray-600"},ls={class:"td"},ds={class:"td"},is={class:"td"},os={class:"td"},cs={class:"flex items-center justify-center gap-2"},us={class:"td"},_s={class:"td"},ps={class:"bg-gray-100 text-center text-sm font-semibold"},ms={class:"td"},ys={class:"td"},hs={class:"td"},vs={class:"td"},fs={class:"td"},bs={class:"td"},xs={class:"td"},ws={class:"td"},ks={class:"td"},Hs={__name:"MonthlyAttendanceSummaryReport",setup(G){const T=wt(),p=kt(),S=Ht(),m=Tt(),{monthly_company_summary:K,reportMeta:dt}=Ct(m),_=n=>{const s=Number(n);return Number.isFinite(s)?s:0},w=(n,s)=>n.reduce((d,i)=>{try{const t=s.split(".").reduce((y,z)=>y?y[z]:void 0,i);return d+_(t)}catch{return d}},0),it=n=>String(n||"").padStart(2,"0"),c=h(p.query.date&&String(p.query.date)||m.selectedMonth||""),X=n=>{const s={year:new Date().getFullYear(),month:new Date().getMonth()+1};if(!n)return s;const[d="",i=""]=String(n).split("-");return!d||!i?s:{year:Number(d)||s.year,month:Number(i)||s.month}},L=h(X(c.value)),r=h({company_id:p.query.company_id||"",department_id:p.query.department_id||"all",line_type:p.query.line_type||"all",employee_id:p.query.employee_id||""}),f=C(()=>Array.isArray(K.value)?K.value:[]),b=C(()=>!!(f.value[0]&&f.value[0].is_final)),Z=C(()=>{const n=f.value[0];if(!n||!n.finalized_at)return"";try{const s=new Date(n.finalized_at);return new Intl.DateTimeFormat("en",{year:"numeric",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit"}).format(s)}catch{return String(n.finalized_at)}}),B=h(null);C(()=>{if(!B.value)return"Not refreshed yet";try{return new Intl.DateTimeFormat("en",{month:"short",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(B.value)}catch{return String(B.value)}});const k=C(()=>{const n=f.value;return{cl:w(n,"total_cl_leave"),ml:w(n,"total_ml_leave"),sl:w(n,"total_sl_leave"),wplDays:w(n,"total_wpl_leave"),otHour:w(n,"total_overtime_hours"),absentDays:w(n,"total_absent"),wplHour:w(n,"total_wpl_hour"),paycutHour:w(n,"approved_paycut"),payableHour:w(n,"payable_hour")}}),I=h("table"),E=h("compact"),Q=[{label:"Table",value:"table",icon:"fal fa-table"},{label:"Cards",value:"cards",icon:"fal fa-th-large"}],g=[{label:"Cozy",value:"cozy"},{label:"Compact",value:"compact"}],tt=C(()=>{const n=c.value;if(!n)return"Month not selected";const[s,d]=n.split("-").map(i=>Number(i));return!s||!d?n:new Intl.DateTimeFormat("en",{month:"long",year:"numeric"}).format(new Date(s,d-1))}),N=(n,s="0:00")=>n&&String(n).trim()!==""?n:s,x=h({toast:null,banner:null}),ot=C(()=>{var s;const n=(s=x.value.toast)==null?void 0:s.type;return n==="success"?"border-emerald-200 bg-emerald-50 text-emerald-800":n==="error"?"border-rose-200 bg-rose-50 text-rose-800":"border-slate-200 bg-slate-50 text-slate-800"});function D(n,s){x.value.toast={type:n,text:s},window.clearTimeout(D._t),D._t=window.setTimeout(()=>x.value.toast=null,2500)}function F(n,s,d=4e3){x.value.banner={type:n,text:s},window.clearTimeout(F._b),F._b=window.setTimeout(()=>x.value.banner=null,d)}const P=async()=>{const n=r.value.company_id,s=r.value.department_id,d=r.value.employee_id||"",i=r.value.line_type!=="all"?r.value.line_type:"";if(!n){D("info","Select a company first.");return}try{await m.getMonthlyAttendanceSummaryReport(n,s,i,d,c.value),B.value=new Date}catch(t){console.error("Failed:",t),D("error","Failed to load attendance data.")}},et=n=>{const s=p.query;Object.keys(n).some(i=>String(s[i]??"")!==String(n[i]??""))&&T.replace({query:n})},ct=()=>{et({...p.query,company_id:r.value.company_id||"",department_id:r.value.department_id||"all",line_type:r.value.line_type||"all",employee_id:r.value.employee_id||"",date:c.value||""})};j(c,n=>et({...p.query,date:n||""})),j(L,n=>{if(!n)return;const s=`${n.year}-${it(n.month)}`;c.value!==s&&(c.value=s)},{deep:!0}),j(c,n=>{const s=X(n);(!L.value||s.year!==L.value.year||s.month!==L.value.month)&&(L.value=s)}),rt(()=>{r.value.company_id&&P()});const ut=async()=>{if(!r.value.company_id)return;const n=r.value.line_type!=="all"?r.value.line_type:"";await m.downloadExcel(r.value.company_id,n,c.value)},_t=async()=>{if(!r.value.company_id)return;const n=r.value.line_type!=="all"?r.value.line_type:"";await m.downloadPDF(r.value.company_id,n,c.value)},pt=()=>T.go(-1),st=async()=>P(),H=h(!1),mt=async()=>{if(!r.value.company_id||!c.value){D("info","Select company & month first.");return}const n=r.value.line_type!=="all"?r.value.line_type:"",s=r.value.employee_id||"",d=r.value.department_id||"";try{H.value=!0,F("info",`Recalculating snapshot for ${tt.value}…`,6e3),await m.recalculateMonthlySnapshot(r.value.company_id,d,n,s,c.value),await P(),F("success","✅ Snapshot refreshed — numbers updated on this page.")}catch(i){console.error("Failed recalc:",i),D("error","Failed to recalculate snapshot.")}finally{H.value=!1}},yt=async()=>{if(!r.value.company_id||!c.value){D("info","Select company & month first.");return}const n=b.value?"unfinalize":"finalize",s=n==="finalize"?"Finalize":"Unfinalize",d=r.value.line_type!=="all"?r.value.line_type:"",i=r.value.employee_id||"";try{H.value=!0,F("info",`${s} in progress…`,6e3),await m.finalizeMonthlySnapshot(r.value.company_id,d,i,c.value,n),await P(),F("success",`✅ Month ${s.toLowerCase()}d successfully.`)}catch(t){console.error("Finalize failed:",t),D("error","Failed to change final status.")}finally{H.value=!1}},V=h(null),W=h(null),at=h(260);let U=null;const O=async()=>{var i,t;await zt();const n=((i=V.value)==null?void 0:i.offsetHeight)||0,s=((t=W.value)==null?void 0:t.offsetHeight)||0,d=24;at.value=n+s+d},ht=C(()=>`max(320px, calc(100vh - ${at.value}px))`);return rt(async()=>{await O(),typeof ResizeObserver<"u"?(U=new ResizeObserver(O),V.value&&U.observe(V.value),W.value&&U.observe(W.value)):window.addEventListener("resize",O)}),Dt(()=>{U&&U.disconnect(),window.removeEventListener("resize",O)}),(n,s)=>{var i;const d=St("router-link");return l(),u("div",Ft,[x.value.toast?(l(),u("div",{key:0,class:o(["fixed right-4 top-4 z-[90] rounded-xl border px-4 py-2 text-sm shadow-sm",ot.value])},a(x.value.toast.text),3)):A("",!0),x.value.banner?(l(),u("div",{key:1,class:o(["sticky top-2 z-[80] rounded-2xl border px-4 py-2 text-sm shadow-sm",x.value.banner.type==="success"?"border-emerald-200 bg-emerald-50 text-emerald-800":"border-slate-200 bg-slate-50 text-slate-800"])},a(x.value.banner.text),3)):A("",!0),e("div",{ref_key:"topBarRef",ref:V,class:"sticky top-0 z-50"},[e("div",At,[e("div",Mt,[e("div",$t,[e("button",{class:"btn-3 !h-10 !w-10 rounded-full shadow-sm",onClick:pt},s[6]||(s[6]=[e("i",{class:"far fa-arrow-left text-sm"},null,-1)])),e("div",Rt,[s[15]||(s[15]=e("div",{class:"flex flex-wrap items-center gap-2"},[e("p",{class:"text-[11px] font-semibold uppercase tracking-[0.2em] text-slate-400"}," Monthly overview ")],-1)),e("div",qt,[s[7]||(s[7]=e("h1",{class:"truncate text-base font-semibold text-slate-900"}," Monthly Attendance Summary ",-1)),f.value.length?(l(),u("span",{key:0,class:o(["inline-flex items-center gap-1 rounded-full px-2 py-0.5 text-[11px] font-semibold",b.value?"bg-emerald-50 text-emerald-700":"bg-amber-50 text-amber-700"])},[e("span",{class:o(["inline-block h-2 w-2 rounded-full",b.value?"bg-emerald-500":"bg-amber-500"])},null,2),v(" "+a(b.value?"Finalized":"Draft")+" ",1),b.value&&Z.value?(l(),u("span",It," ("+a(Z.value)+") ",1)):A("",!0)],2)):A("",!0)]),e("p",Et,[s[8]||(s[8]=v(" This page shows a ")),s[9]||(s[9]=e("span",{class:"font-semibold text-slate-700"},"snapshot",-1)),s[10]||(s[10]=v(" for ")),e("span",Pt,a(tt.value),1),s[11]||(s[11]=v(". ")),s[12]||(s[12]=e("span",{class:"ml-1 inline-flex items-center rounded-full bg-amber-50 px-2 py-0.5 text-[11px] font-semibold text-amber-700"}," Click Recalculate to refresh all numbers on this report. ",-1))]),e("p",Ut,[s[13]||(s[13]=v(" Last calculate: ")),e("span",Bt,a((i=M(dt))==null?void 0:i.last_update_human),1),s[14]||(s[14]=e("span",{class:"mx-2"},"•",-1)),v(" "+a(f.value.length)+" employees ",1)])])]),e("div",Nt,[e("div",Vt,[s[16]||(s[16]=e("span",{class:"toolbar-label"},"View",-1)),e("div",Wt,[(l(),u($,null,R(Q,t=>e("button",{key:t.value,type:"button",class:o(["segmented-control__btn",{"is-active":I.value===t.value}]),onClick:y=>I.value=t.value},[e("i",{class:o(t.icon)},null,2),e("span",null,a(t.label),1)],10,Ot)),64))])]),e("div",jt,[s[17]||(s[17]=e("span",{class:"toolbar-label"},"Density",-1)),e("div",Jt,[(l(),u($,null,R(g,t=>e("button",{key:t.value,type:"button",class:o(["segmented-control__btn",{"is-active":E.value===t.value}]),onClick:y=>E.value=t.value},a(t.label),11,Yt)),64))])]),e("button",{type:"button",class:"btn-2 inline-flex items-center gap-2 rounded-full px-4 py-2 text-xs font-semibold shadow-sm disabled:opacity-50 disabled:cursor-not-allowed",disabled:!r.value.company_id||!c.value||H.value||b.value,onClick:mt,title:"Rebuild snapshot for this month (updates all numbers on this page)"},[e("i",{class:o(["fal fa-rotate text-base",H.value?"animate-spin":""])},null,2),e("span",Kt,a(H.value?"Recalculating…":"Recalculate"),1),e("span",Xt,a(H.value?"…":"Recalc"),1)],8,Gt),e("button",{type:"button",class:o(["inline-flex items-center gap-2 rounded-full px-4 py-2 text-xs font-semibold shadow-sm disabled:opacity-50 disabled:cursor-not-allowed",b.value?"bg-slate-200 text-slate-800":"bg-emerald-500 text-white"]),disabled:!r.value.company_id||!c.value||H.value||f.value.length===0,onClick:yt,title:b.value?"Unlock month for edits":"Lock month as final"},[e("i",{class:o(b.value?"fal fa-lock-open":"fal fa-lock")},null,2),e("span",Qt,a(b.value?"Unfinalize":"Finalize"),1)],10,Zt),e("button",{type:"button",onClick:ut,class:"btn-1 inline-flex items-center gap-2 rounded-full px-4 py-2 text-sm font-semibold shadow-sm disabled:opacity-50",disabled:!r.value.company_id},s[18]||(s[18]=[e("i",{class:"far fa-file-excel text-base text-green-500"},null,-1),e("span",{class:"hidden sm:inline"},"Excel",-1)]),8,gt),e("button",{type:"button",onClick:_t,class:"btn-1 inline-flex items-center gap-2 rounded-full px-4 py-2 text-sm font-semibold shadow-sm disabled:opacity-50",disabled:!r.value.company_id},s[19]||(s[19]=[e("i",{class:"fal fa-file-pdf text-base text-red-500"},null,-1),e("span",{class:"hidden sm:inline"},"PDF",-1)]),8,te)])]),e("div",ee,[s[20]||(s[20]=e("span",{class:"toolbar-label"},"View",-1)),e("div",se,[(l(),u($,null,R(Q,t=>e("button",{key:t.value,type:"button",class:o(["segmented-control__btn",{"is-active":I.value===t.value}]),onClick:y=>I.value=t.value},[e("i",{class:o(t.icon)},null,2),e("span",null,a(t.label),1)],10,ae)),64))]),s[21]||(s[21]=e("span",{class:"toolbar-label ml-2"},"Density",-1)),e("div",ne,[(l(),u($,null,R(g,t=>e("button",{key:t.value,type:"button",class:o(["segmented-control__btn",{"is-active":E.value===t.value}]),onClick:y=>E.value=t.value},a(t.label),11,re)),64))])])])],512),e("div",{ref_key:"filterBarRef",ref:W,class:"sticky top-[92px] z-40"},[e("div",le,[e("div",de,[q(vt,{company_id:r.value.company_id,"onUpdate:company_id":s[2]||(s[2]=t=>r.value.company_id=t),department_id:r.value.department_id,"onUpdate:department_id":s[3]||(s[3]=t=>r.value.department_id=t),employee_id:r.value.employee_id,"onUpdate:employee_id":s[4]||(s[4]=t=>r.value.employee_id=t),line_type:r.value.line_type,"onUpdate:line_type":s[5]||(s[5]=t=>r.value.line_type=t),"with-type":!0,"initial-value":n.$route.query,onFilterChange:ct,class:"w-full"},{default:Y(()=>[e("div",ie,[q(ft,{modelValue:L.value,"onUpdate:modelValue":s[0]||(s[0]=t=>L.value=t),"show-year":!1,"show-month":!0,"show-date":!1,label:"Month"},null,8,["modelValue"]),e("button",{type:"button",onClick:s[1]||(s[1]=t=>P()),class:"btn-2 rounded"}," Search ")])]),_:1},8,["company_id","department_id","employee_id","line_type","initial-value"])])])],512),M(m).isLoading?(l(),J(bt,{key:2})):(l(),u("div",oe,[r.value.company_id?f.value.length===0?(l(),u("div",ue,s[23]||(s[23]=[e("p",{class:"text-base font-semibold text-gray-700"},"No attendance found",-1),e("p",{class:"text-sm text-gray-500"},"Try a different set of filters or a different month.",-1)]))):(l(),u("div",_e,[I.value==="cards"?(l(),u("div",pe,[(l(!0),u($,null,R(f.value,(t,y)=>{var z;return l(),u("article",{key:`${(t==null?void 0:t.user_id)||"card"}-${y}`,class:o(["report-card",{"report-card--alert":t==null?void 0:t.under_target}])},[e("header",me,[e("div",null,[e("p",ye,a(t==null?void 0:t.user),1),e("p",he,a(t==null?void 0:t.designation),1)]),e("span",{class:o(["report-card__tag",t!=null&&t.under_target?"report-card__tag--alert":"report-card__tag--ok"])},a(t!=null&&t.under_target?"Under target":"On track"),3)]),e("div",ve,[e("div",fe,[s[24]||(s[24]=e("p",{class:"report-card__body-label"},"Working Hour",-1)),e("p",{class:o(["report-card__primary",t!=null&&t.under_target?"text-red-600":"text-emerald-600"])},[v(a(N(t==null?void 0:t.total_working_hours))+" ",1),e("span",be,"/ "+a(N(t==null?void 0:t.total_shift_hours)),1)],2)]),e("div",xe,[e("div",null,[s[25]||(s[25]=e("p",{class:"report-card__body-label"},"Attendance",-1)),e("p",we," P "+a(_(t==null?void 0:t.total_present))+" | L "+a(_(t==null?void 0:t.total_leave))+" | A "+a(_(t==null?void 0:t.total_absent)),1)]),e("div",null,[s[26]||(s[26]=e("p",{class:"report-card__body-label"},"Weekend",-1)),e("p",ke,a(_(t==null?void 0:t.total_weekend))+" days",1)]),e("div",null,[s[27]||(s[27]=e("p",{class:"report-card__body-label"},"Actual Late",-1)),e("p",He,a(_(t==null?void 0:t.actual_late_day))+"d / "+a(N(t==null?void 0:t.actual_late_hour)),1)]),e("div",null,[s[28]||(s[28]=e("p",{class:"report-card__body-label"},"Actual Early",-1)),e("p",Ce,a(_(t==null?void 0:t.actual_early_day))+"d / "+a(N(t==null?void 0:t.actual_early_hour)),1)]),e("div",null,[s[29]||(s[29]=e("p",{class:"report-card__body-label"},"Short Leave",-1)),e("p",De," First "+a(_(t==null?void 0:t.total_first_short_leave))+" | Last "+a(_(t==null?void 0:t.total_last_short_leave)),1)]),e("div",null,[s[30]||(s[30]=e("p",{class:"report-card__body-label"},"Leave Types",-1)),e("p",Se," CL "+a(_(t==null?void 0:t.total_cl_leave))+" | ML "+a(_(t==null?void 0:t.total_ml_leave))+" | SL "+a(_(t==null?void 0:t.total_sl_leave))+" | WPL "+a(_(t==null?void 0:t.total_wpl_leave)),1)]),e("div",null,[s[31]||(s[31]=e("p",{class:"report-card__body-label"},"Hours Impact",-1)),e("p",Le," OT "+a(_(t==null?void 0:t.total_overtime_hours))+"h | Payable "+a(_(t==null?void 0:t.payable_hour))+"h ",1)]),e("div",null,[s[32]||(s[32]=e("p",{class:"report-card__body-label"},"Deduction",-1)),e("p",ze,a(_(t==null?void 0:t.total_absent)*9)+"h + "+a(_(t==null?void 0:t.total_wpl_hour))+"h ",1)])])]),e("footer",Te,[e("div",Fe,[q(lt,{workingHours:t==null?void 0:t.approved_paycut},null,8,["workingHours"]),((z=M(S).user)==null?void 0:z.id)===8?(l(),J(nt,{key:0,class:"rounded-full bg-slate-100 px-2 py-1 text-[11px] font-semibold text-slate-600",userId:t==null?void 0:t.user_id,month:c.value,onUpdated:st},null,8,["userId","month"])):A("",!0)]),q(d,{to:{name:"EmployeeAttendance",query:{...M(p).query,employee_id:t==null?void 0:t.user_id,date:c.value}},target:"_blank",class:"report-card__cta"},{default:Y(()=>s[33]||(s[33]=[v(" Job Card "),e("i",{class:"far fa-arrow-up-right-from-square text-xs"},null,-1)])),_:2,__:[33]},1032,["to"])])],2)}),128))])):(l(),u("div",{key:1,class:o(["table-shell",[E.value==="compact"?"table-density-compact":"table-density-cozy"]])},[e("div",{class:"table-scroll",style:Lt({maxHeight:ht.value})},[e("table",Ae,[s[39]||(s[39]=e("thead",{class:"sticky top-0 bg-white shadow-sm z-10"},[e("tr",{class:"bg-gray-50 text-sm"},[e("th",{rowspan:"2",class:"th"},"#"),e("th",{rowspan:"2",class:"th text-left"},"Employee Name"),e("th",{rowspan:"2",class:"th text-left"},"Designation"),e("th",{colspan:"6",class:"th"},"Attendance Summary"),e("th",{colspan:"2",class:"th"},"Actual Late"),e("th",{colspan:"2",class:"th"},"Remaining Late"),e("th",{colspan:"2",class:"th"},"Actual Early"),e("th",{colspan:"2",class:"th"},"Remaining Early"),e("th",{rowspan:"2",class:"th"},"Working Hour"),e("th",{colspan:"4",class:"th"},"Leave Day"),e("th",{colspan:"2",class:"th"},"Short Leave"),e("th",{rowspan:"2",class:"th"},"OT Hour"),e("th",{colspan:"4",class:"th"},"Deduction"),e("th",{rowspan:"2",class:"th"},"Action")]),e("tr",{class:"bg-gray-50 text-xs"},[e("th",{class:"th"},"TD"),e("th",{class:"th"},"TP"),e("th",{class:"th"},"TW"),e("th",{class:"th"},"TL"),e("th",{class:"th"},"TA"),e("th",{class:"th"},"THD"),e("th",{class:"th"},"Day"),e("th",{class:"th"},"Hour"),e("th",{class:"th"},"Day"),e("th",{class:"th"},"Hour"),e("th",{class:"th"},"Day"),e("th",{class:"th"},"Hour"),e("th",{class:"th"},"Day"),e("th",{class:"th"},"Hour"),e("th",{class:"th"},"CL"),e("th",{class:"th"},"ML"),e("th",{class:"th"},"SL"),e("th",{class:"th"},"WPL"),e("th",{class:"th"},"Delay"),e("th",{class:"th"},"Early"),e("th",{class:"th"},"Absent Hour"),e("th",{class:"th"},"WPL(Hour)"),e("th",{class:"th"},"Pay Cut"),e("th",{class:"th"},"Payable Hour")])],-1)),e("tbody",Me,[(l(!0),u($,null,R(f.value,(t,y)=>{var z;return l(),u("tr",{key:`${(t==null?void 0:t.user_id)||"u"}-${y}`,class:o(["border-b hover:bg-blue-50",{"table-row--alert":t==null?void 0:t.under_target}])},[e("td",$e,a(y+1),1),e("td",Re,a(t==null?void 0:t.user),1),e("td",qe,a(t==null?void 0:t.designation),1),e("td",Ie,a(t==null?void 0:t.total_monthly_days),1),e("td",Ee,a(t==null?void 0:t.total_present),1),e("td",Pe,a(t==null?void 0:t.total_weekend),1),e("td",Ue,a(t==null?void 0:t.total_leave),1),e("td",Be,a(t==null?void 0:t.total_absent),1),e("td",Ne,a(t==null?void 0:t.total_holiday),1),e("td",Ve,a(t==null?void 0:t.actual_late_day),1),e("td",We,a(t==null?void 0:t.actual_late_hour),1),e("td",Oe,a(t==null?void 0:t.total_remain_late_day),1),e("td",je,a(t==null?void 0:t.total_remain_late_hour),1),e("td",Je,a(t==null?void 0:t.actual_early_day),1),e("td",Ye,a(t==null?void 0:t.actual_early_hour),1),e("td",Ge,a(t==null?void 0:t.total_remain_early_day),1),e("td",Ke,a(t==null?void 0:t.total_remain_early_hour),1),e("td",Xe,[e("p",{class:o(["font-semibold",t!=null&&t.under_target?"text-red-600":"text-emerald-600"])},a(t==null?void 0:t.total_working_hours),3),e("p",Ze,"of "+a(t==null?void 0:t.total_shift_hours),1)]),e("td",Qe,a(t==null?void 0:t.total_cl_leave),1),e("td",ge,a(t==null?void 0:t.total_ml_leave),1),e("td",ts,a(t==null?void 0:t.total_sl_leave),1),e("td",es,a(t==null?void 0:t.total_wpl_leave),1),e("td",ss,[e("p",as,[v(a((t==null?void 0:t.total_first_short_leave)||0)+" of ",1),e("span",{class:o({"text-red-600 font-bold":(t==null?void 0:t.actual_late_day)>=4})},a((t==null?void 0:t.actual_late_day)||0),3)])]),e("td",ns,[e("p",rs,[v(a((t==null?void 0:t.total_last_short_leave)||0)+" of ",1),e("span",{class:o({"text-red-600 font-bold":(t==null?void 0:t.actual_early_day)>=4})},a((t==null?void 0:t.actual_early_day)||0),3)])]),e("td",ls,a(t!=null&&t.total_overtime_hours?`${t==null?void 0:t.total_overtime_hours} H`:""),1),e("td",ds,a(_(t==null?void 0:t.total_absent)*9)+"H",1),e("td",is,a(t==null?void 0:t.total_wpl_hour)+"H",1),e("td",os,[e("div",cs,[q(lt,{workingHours:t==null?void 0:t.approved_paycut},null,8,["workingHours"]),((z=M(S).user)==null?void 0:z.id)===8?(l(),J(nt,{key:0,class:"mr-2",userId:t==null?void 0:t.user_id,month:c.value,onUpdated:st},null,8,["userId","month"])):A("",!0)])]),e("td",us,a(t==null?void 0:t.payable_hour)+"H",1),e("td",_s,[q(d,{to:{name:"EmployeeAttendance",query:{...M(p).query,employee_id:t==null?void 0:t.user_id,date:c.value}},target:"_blank",class:"inline-flex w-20 items-center gap-1 rounded-md bg-blue-50 px-1 py-1 font-medium text-blue-700 hover:bg-blue-100"},{default:Y(()=>s[34]||(s[34]=[v(" Job Card "),e("i",{class:"far fa-arrow-up-right-from-square text-xs"},null,-1)])),_:2,__:[34]},1032,["to"])])],2)}),128))]),e("tfoot",null,[e("tr",ps,[s[35]||(s[35]=e("td",{colspan:"18",class:"td"},"Total",-1)),e("td",ms,a(k.value.cl),1),e("td",ys,a(k.value.ml),1),e("td",hs,a(k.value.sl),1),e("td",vs,a(k.value.wplDays),1),s[36]||(s[36]=e("td",{class:"td"},null,-1)),s[37]||(s[37]=e("td",{class:"td"},null,-1)),e("td",fs,a(k.value.otHour),1),e("td",bs,a(k.value.absentDays)+" day",1),e("td",xs,a(k.value.wplHour),1),e("td",ws,a(k.value.paycutHour),1),e("td",ks,a(k.value.payableHour),1),s[38]||(s[38]=e("td",{class:"td"},null,-1))])])])],4)],2))])):(l(),u("div",ce,s[22]||(s[22]=[e("p",{class:"text-base font-semibold text-red-500"},"Select a company to start the report.",-1),e("p",{class:"text-sm text-gray-500"},"Choose a company & filters above to preview this month.",-1)])))]))])}}},Es=xt(Hs,[["__scopeId","data-v-81e98b2d"]]);export{Es as default};
