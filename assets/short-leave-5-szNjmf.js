import{E as L,r as u,p as d,G as v}from"./index-B8yiLsc3.js";const S=L("shortLeave",()=>{const n=u([]),i=u(null),l=u(!1),r=u(null),p=async(a={})=>{var o,t;l.value=!0,r.value=null;try{const e=await v.get("/short-leaves",{params:a});n.value=e.data.data}catch(e){r.value=((t=(o=e.response)==null?void 0:o.data)==null?void 0:t.message)||"Failed to fetch short leaves",console.error("Error fetching short leaves:",e)}finally{l.value=!1}},f=async a=>{var o,t;l.value=!0,r.value=null;try{const e=await v.get(`/short-leaves/${a}`);i.value=e.data}catch(e){r.value=((t=(o=e.response)==null?void 0:o.data)==null?void 0:t.message)||`Failed to fetch short leave (ID: ${a})`,console.error(`Error fetching short leave with id ${a}:`,e)}finally{l.value=!1}},y=async a=>{var o,t;l.value=!0,r.value=null;try{const e=await v.post("/short-leaves/store",a);return n.value.push(e.data.data),e.data.data}catch(e){throw r.value=((t=(o=e.response)==null?void 0:o.data)==null?void 0:t.message)||"Failed to create short leave",console.error("Error creating short leave:",e),new Error(r.value)}finally{l.value=!1}},w=async(a,o)=>{var t,e;l.value=!0,r.value=null;try{const s=await v.put(`/short-leaves/${a}`,o),c=n.value.findIndex(h=>h.id===a);return c!==-1&&(n.value[c]=s.data.data),s.data.data}catch(s){throw r.value=((e=(t=s.response)==null?void 0:t.data)==null?void 0:e.message)||`Failed to update short leave (ID: ${a})`,console.error(`Error updating short leave with id ${a}:`,s),new Error(r.value)}finally{l.value=!1}},g=async a=>{var o,t;l.value=!0,r.value=null;try{await v.delete(`/short-leaves/${a}`),n.value=n.value.filter(e=>e.id!==a)}catch(e){throw r.value=((t=(o=e.response)==null?void 0:o.data)==null?void 0:t.message)||`Failed to delete short leave (ID: ${a})`,console.error(`Error deleting short leave with id ${a}:`,e),new Error(r.value)}finally{l.value=!1}},$=async a=>{var o,t;l.value=!0,r.value=null;try{const e=await v.post(`/short-leaves/${a}/handover-accept`),s=n.value.findIndex(c=>c.id===a);return s!==-1&&(n.value[s]=e.data.data),e.data.data}catch(e){throw r.value=((t=(o=e.response)==null?void 0:o.data)==null?void 0:t.message)||`Failed to accept handover for short leave (ID: ${a})`,console.error(`Error accepting handover for short leave with id ${a}:`,e),new Error(r.value)}finally{l.value=!1}},m=async a=>{var o,t;l.value=!0,r.value=null;try{const e=await v.post(`/short-leaves/${a}/in-charge-accept`),s=n.value.findIndex(c=>c.id===a);return s!==-1&&(n.value[s]=e.data.data),e.data.data}catch(e){throw r.value=((t=(o=e.response)==null?void 0:o.data)==null?void 0:t.message)||`Failed to accept In-Charge for short leave (ID: ${a})`,console.error(`Error accepting In-Charge for short leave with id ${a}:`,e),new Error(r.value)}finally{l.value=!1}},E=async a=>{var o,t;l.value=!0,r.value=null;try{const e=await v.post(`/short-leaves/${a}/recommend-by-accept`),s=n.value.findIndex(c=>c.id===a);return s!==-1&&(n.value[s]=e.data.data),e.data.data}catch(e){throw r.value=((t=(o=e.response)==null?void 0:o.data)==null?void 0:t.message)||`Failed to accept recommend by for short leave (ID: ${a})`,console.error(`Error accepting recommend by for short leave with id ${a}:`,e),new Error(r.value)}finally{l.value=!1}},I=async a=>{var o,t;l.value=!0,r.value=null;try{const e=await v.post(`/short-leaves/${a}/approved-by-accept`),s=n.value.findIndex(c=>c.id===a);return s!==-1&&(n.value[s]=e.data.data),e.data.data}catch(e){throw r.value=((t=(o=e.response)==null?void 0:o.data)==null?void 0:t.message)||`Failed to accept approval for short leave (ID: ${a})`,console.error(`Error accepting approval for short leave with id ${a}:`,e),new Error(r.value)}finally{l.value=!1}},x=async(a,o)=>{var t,e;l.value=!0,r.value=null;try{const s=await v.post(`/short-leaves/${a}/reject`,{rejection_reason:o}),c=n.value.findIndex(h=>h.id===a);return c!==-1&&(n.value[c]=s.data.data),s.data.data}catch(s){throw r.value=((e=(t=s.response)==null?void 0:t.data)==null?void 0:e.message)||`Failed to reject short leave (ID: ${a})`,console.error(`Error rejecting short leave with id ${a}:`,s),new Error(r.value)}finally{l.value=!1}};return{shortLeaves:d(()=>n.value),shortLeave:d(()=>i.value),loading:d(()=>l.value),error:d(()=>r.value),fetchShortLeaves:p,fetchShortLeaveById:f,createShortLeave:y,updateShortLeave:w,deleteShortLeave:g,handoverAccept:$,inChargeAccept:m,recommendByAccept:E,approvedByAccept:I,rejectShortLeave:x}});export{S as u};
