import{r as d,c as i,o as b,a as t,j as f,k as r,H as c,v as m,t as v,w as g,u as x,d as y,m as S}from"./index-DcjL1Qpg.js";import{u as k}from"./useCommentStore-Dq0AMbm_.js";const w={key:0,class:"text-red-500"},C=["disabled"],V={__name:"CommentForm",props:{formData:Object,loading:Boolean,error:String,onSubmit:Function},setup(a){const s=a,o=d({...s.formData}),u=()=>{s.onSubmit({...o.value})};return(n,e)=>(b(),i("form",{onSubmit:g(u,["prevent"]),class:"space-y-4"},[t("div",null,[e[5]||(e[5]=t("label",{class:"block font-medium"},"Commentable Type",-1)),r(t("select",{"onUpdate:modelValue":e[0]||(e[0]=l=>o.value.commentable_type=l),required:"",class:"w-full border px-3 py-2 rounded"},e[4]||(e[4]=[t("option",{value:"",disabled:""},"Select type",-1),t("option",{value:"task"},"Task",-1),t("option",{value:"bug"},"Bug",-1),t("option",{value:"meeting"},"Meeting",-1)]),512),[[c,o.value.commentable_type]])]),t("div",null,[e[6]||(e[6]=t("label",{class:"block font-medium"},"Commentable ID",-1)),r(t("input",{type:"number","onUpdate:modelValue":e[1]||(e[1]=l=>o.value.commentable_id=l),required:"",class:"w-full border px-3 py-2 rounded"},null,512),[[m,o.value.commentable_id]])]),t("div",null,[e[7]||(e[7]=t("label",{class:"block font-medium"},"User ID",-1)),r(t("input",{type:"number","onUpdate:modelValue":e[2]||(e[2]=l=>o.value.user_id=l),required:"",class:"w-full border px-3 py-2 rounded"},null,512),[[m,o.value.user_id]])]),t("div",null,[e[8]||(e[8]=t("label",{class:"block font-medium"},"Message",-1)),r(t("textarea",{"onUpdate:modelValue":e[3]||(e[3]=l=>o.value.message=l),required:"",class:"w-full border px-3 py-2 rounded"},null,512),[[m,o.value.message]])]),a.error?(b(),i("div",w,v(a.error),1)):f("",!0),t("button",{disabled:a.loading,type:"submit",class:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded"},v(a.loading?"Saving...":"Submit Comment"),9,C)],32))}},D={class:"max-w-xl mx-auto p-6"},U={__name:"CommentAdd",setup(a){const s=k(),o=x(),u=d({commentable_type:"task",commentable_id:"",user_id:1,message:""}),n=d(!1),e=async l=>{n.value=!0,await s.createComment(l),n.value=!1,s.error||o.push({name:"CommentList"})};return(l,p)=>(b(),i("div",D,[p[0]||(p[0]=t("h2",{class:"text-xl font-semibold mb-4"},"Add Comment",-1)),y(V,{"form-data":u.value,"on-submit":e,loading:n.value,error:S(s).error},null,8,["form-data","loading","error"])]))}};export{U as default};
