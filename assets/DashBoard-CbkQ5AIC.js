const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LeaveApplicationModal-BO1j2c7N.js","assets/index-B00qadZM.js","assets/index-CnLSQfyr.css","assets/ApprovalItem-R7OAVf7r.js","assets/AcceptAndRejectHandler-Br_R5qfY.js","assets/LoaderView-BUlRoAah.js","assets/_plugin-vue_export-helper-DlAUqK2U.js","assets/ShareComponent-maUkWBIT.js","assets/leave-application-CxCtmczN.js","assets/LeaveApplicationModal-B7WJltA7.css","assets/ShortLeaveDetailsModal-BDw9XD-F.js","assets/ScreenshotCapture-Belw_1uP.js","assets/short-leave-YojJmCWB.js","assets/ShortLeaveDetailsModal-D4avNQ1k.css","assets/ManualAttendanceDetailsModal-C4uPagEz.js","assets/manual-attendance-BIN09jAq.js","assets/ManualAttendanceDetailsModal-MS8n2gFL.css","assets/ShiftExchangeDetailsModal-B3pDbp36.js","assets/exchange-CQnKOJ9o.js","assets/ShiftExchangeDetailsModal-BlZsJzAI.css","assets/OffdayExchangeDetailsModal-38RDg7L3.js","assets/OffdayExchangeDetailsModal-CanJZDqu.css"])))=>i.map(i=>d[i]);
import{u as I}from"./user-DdcHm0tp.js";import{s as V,m as Z,c as a,o as n,n as _,i as w,a as e,j as g,t as x,k as b,p as ee,w as S,q as N,x as A,g as $,F as P,y as E,f as M,R as re,z as te,r as R,d as se,e as ne,A as Y,h as de,B as ue,C as z,D as ce,_ as F,u as pe,l as ye}from"./index-B00qadZM.js";import{L as me}from"./LoaderView-BUlRoAah.js";import{m as xe,_ as ve}from"./task-tree-DTIxqxMG.js";import{o as J,g as H,a as K,b as fe,c as be}from"./datetime-l2Vm98rT.js";import{u as _e}from"./useTaskStore-hV-PPwNQ.js";import{_ as ge}from"./CalenderView-I0EzXPzk.js";import{_ as he}from"./TaskTreeViewWithSubTable-BuIFE7Xx.js";import{O as ke}from"./OverlyModal-CbSxK-l0.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./TaskSupervisorAndEmployee-BOkXPkXm.js";import"./UserChip-upuhc_W1.js";import"./TaskStatus-xmhNrBZL.js";import"./url-CePbr-gY.js";const we={class:"grid gap-4 md:grid-cols-3 mt-4 container mx-auto"},$e={class:"text-3xl"},De={class:"text-3xl"},Ce={class:"text-3xl"},Me={class:"text-3xl"},Le={class:"text-3xl"},Se={class:"text-3xl"},Te={class:"text-3xl"},Ae={class:"text-3xl"},Re={class:"text-3xl"},Ne={__name:"DashboardAdminView",setup(f){const d=I(),{dashboardInfo:r,selectedDate:y}=V(d);return(l,i)=>{const c=Z("RouterLink");return n(),a("div",we,[_(c,{to:{name:"TodayAttendanceReport",query:{status:"all"}},class:"main-button"},{default:w(()=>{var t;return[e("span",$e,x((t=b(r))==null?void 0:t.totalUsers),1),i[0]||(i[0]=g(" Total Employees "))]}),_:1,__:[0]}),_(c,{to:{name:"TodayAttendanceReport",query:{status:"Present"}},class:"main-button"},{default:w(()=>{var t;return[e("span",De,x((t=b(r))==null?void 0:t.todayPresents),1),i[1]||(i[1]=g(" Today Present "))]}),_:1,__:[1]}),_(c,{to:{name:"TodayAttendanceReport",query:{status:"Absent"}},class:"main-button"},{default:w(()=>{var t;return[e("span",Ce,x((t=b(r))==null?void 0:t.todayAbsents),1),i[2]||(i[2]=g(" Today Absent "))]}),_:1,__:[2]}),_(c,{to:{name:"LeaveApplicationsForDay",query:{applicationType:"today"}},class:"main-button"},{default:w(()=>{var t;return[e("span",Me,x((t=b(r))==null?void 0:t.todayLeaves),1),i[3]||(i[3]=g(" Today Leave "))]}),_:1,__:[3]}),_(c,{to:{name:"LeaveApplicationsForDay",query:{applicationType:"tomorrow"}},class:"main-button"},{default:w(()=>{var t;return[e("span",Le,x((t=b(r))==null?void 0:t.tomorrowLeaves),1),i[4]||(i[4]=g(" Tomorrow Leave "))]}),_:1,__:[4]}),_(c,{to:{name:"DateWiseShortLeaveList",query:{date:b(y)}},class:"main-button"},{default:w(()=>{var t;return[e("span",Se,x((t=b(r))==null?void 0:t.todayShortLeaves),1),i[5]||(i[5]=g(" Today Short Leaves "))]}),_:1,__:[5]},8,["to"]),_(c,{to:{name:"DailyLateAttendanceReport",query:{date:b(y)}},class:"main-button"},{default:w(()=>{var t;return[e("span",Te,x((t=b(r))==null?void 0:t.todayLateEntries),1),i[6]||(i[6]=g(" Today Late Report "))]}),_:1,__:[6]},8,["to"]),_(c,{to:{name:"PreviousAfterApplicationList",query:{applicationType:"prev",date:b(y)}},class:"main-button"},{default:w(()=>{var t;return[e("span",Ae,x((t=b(r))==null?void 0:t.prevWeekLeaves),1),i[7]||(i[7]=g(" Leave history of previousÂ week "))]}),_:1,__:[7]},8,["to"]),_(c,{to:{name:"PreviousAfterApplicationList",query:{applicationType:"after",date:b(y)}},class:"main-button"},{default:w(()=>{var t;return[e("span",Re,x((t=b(r))==null?void 0:t.nextWeekLeaves),1),i[8]||(i[8]=g(" Upcoming leaves "))]}),_:1,__:[8]},8,["to"])])}}},Q=(f,d,r,y)=>{const l=new Date(y,r-1,d);return f.filter(i=>{const c=i.deadline?new Date(i.deadline):null,t=J(new Date);if(i.assigned_at){const s=J(new Date(i.assigned_at));if(l<s)return!1;let o=null;return i.completed_at&&(o=J(new Date(i.completed_at))),!(o&&o<l||c&&c<l&&l>t)}return!1}).map(i=>{let c=!1;return i.deadline&&(c=new Date(i.deadline)<l),{...i,deadline_crossed:c}})},Pe={class:"px-4 py-2 flex items-center bg-gray-50 group"},Ee=["disabled"],Oe={class:"ml-4 md:ml-auto flex items-center gap-2"},Be=["value"],je=ee({__name:"DailyTaskHeading",props:{selectedDay:{type:String,required:!0},loading:{type:Boolean,default:!1}},emits:["change",,"reloadClick","monthWiseButtonClick"],setup(f,{emit:d}){const r=f,y=d;function l(){y("change",H(new Date))}function i(){const t=new Date(r.selectedDay);t.setDate(t.getDate()+1),y("change",H(t))}function c(){const t=new Date(r.selectedDay);t.setDate(t.getDate()-1),y("change",H(t))}return(t,s)=>(n(),a("div",Pe,[s[4]||(s[4]=e("h2",{class:"leading-none font-semibold text-lg"},"Daily Task",-1)),e("button",{class:"btn-3 mx-4 h-7",onClick:s[0]||(s[0]=S(o=>y("monthWiseButtonClick"),["prevent"]))},"Month Wise"),e("button",{class:"btn-3 mx-4 h-7",onClick:S(l,["prevent"])},"Today"),e("button",{class:N(["btn-3 px-2 py-2 mx-4 size-7 disabled:text-gray-300 disabled:border-gray-300",{"animate-spin text-gray-300 border-gray-300 !bg-opacity-0":f.loading}]),onClick:s[1]||(s[1]=S(o=>y("reloadClick"),["prevent"])),disabled:f.loading},s[3]||(s[3]=[e("i",{class:"fas fa-redo-alt"},null,-1)]),10,Ee),e("div",Oe,[e("button",{class:"btn-2 h-7",onClick:S(c,["prevent"])},"Previous Day"),e("button",{class:"btn-2 h-7",onClick:S(i,["prevent"])},"Next Day"),e("input",{type:"date",value:f.selectedDay,onInput:s[2]||(s[2]=o=>{var p;return y("change",(p=o.target)==null?void 0:p.value)}),class:"border px-2 rounded"},null,40,Be)])]))}}),Ue={class:"px-4 py-2 flex items-center bg-gray-50 group"},Ve=["disabled"],qe={class:"ml-4 md:ml-auto flex items-center gap-2"},We=["value"],ze=ee({__name:"MonthlyTaskHeading",props:{selectedMonth:{type:String,required:!0},loading:{type:Boolean,default:!1}},emits:["reloadClick","dayWiseButtonClick","change"],setup(f,{emit:d}){const r=f,y=d;function l(){y("change",K(new Date))}function i(){var p;const[t,s]=(p=r.selectedMonth)==null?void 0:p.split("-").map(Number),o=new Date(t,s,1);o.setMonth(o.getMonth()),y("change",K(o))}function c(){var p;const[t,s]=(p=r.selectedMonth)==null?void 0:p.split("-").map(Number),o=new Date(t,s,1);o.setMonth(o.getMonth()-2),y("change",K(o))}return(t,s)=>(n(),a("div",Ue,[s[4]||(s[4]=e("h2",{class:"leading-none font-semibold text-lg"},"Monthly Task",-1)),e("button",{class:"btn-3 mx-4 h-7",onClick:s[0]||(s[0]=S(o=>y("dayWiseButtonClick"),["prevent"]))},"Day Wise"),e("button",{class:"btn-3 mx-4 h-7",onClick:S(l,["prevent"])},"Current Month"),e("button",{class:N(["btn-3 px-2 py-2 mx-4 size-7 disabled:text-gray-300 disabled:border-gray-300",{"animate-spin text-gray-300 border-gray-300 !bg-opacity-0":f.loading}]),onClick:s[1]||(s[1]=S(o=>y("reloadClick"),["prevent"])),disabled:f.loading},s[3]||(s[3]=[e("i",{class:"fas fa-redo-alt"},null,-1)]),10,Ve),e("div",qe,[e("button",{class:"btn-2 h-7",onClick:S(c,["prevent"])},"Previous Month"),e("button",{class:"btn-2 h-7",onClick:S(i,["prevent"])},"Next Month"),e("input",{type:"month",value:f.selectedMonth,onInput:s[2]||(s[2]=o=>{var p;return y("change",(p=o.target)==null?void 0:p.value)}),class:"border px-2 rounded"},null,40,We)])]))}}),Fe={key:0,class:"space-y-6 py-2"},Ie={key:0,class:"fad fa-folder text-xs mr-2"},Ye={key:1,class:"fad fa-file-alt text-xs mr-2"},He={key:2,class:"text-center w-full mt-4 text-xs text-gray-600"},X={__name:"TaskListOnDay",props:{isCurrentMonth:{type:Boolean,default:!1},tasks:{type:Array,default:()=>[]},limit:{type:Number,default:null},tree:{type:Boolean,default:!1}},emits:["clickOnMore"],setup(f,{emit:d}){const r=f,y=d,l=A(()=>{var i;return r.limit?((i=r==null?void 0:r.tasks)==null?void 0:i.slice(0,r.limit))||[]:[...r.tasks]});return(i,c)=>(n(),a("div",null,[f.tree?(n(),a("div",Fe,[(n(!0),a(P,null,E(l.value,(t,s)=>(n(),M(he,{"hide-buttons":"","hide-assigned-users":"",task:t,key:t.id,index:s,class:"shadow hover:shadow-md border border-blue-300 rounded-md *:border-none"},null,8,["task","index"]))),128))])):(n(),a("ul",{key:1,class:N({"text-gray-500 group-hover:text-gray-900":!f.isCurrentMonth})},[(n(!0),a(P,null,E(l.value,t=>(n(),a("li",{class:"mb-2",key:t.id},[_(b(re),{to:`/tasks/${t.id}`,target:"_blank",class:"flex items-center hover:underline hover:text-blue-600"},{default:w(()=>[t.children_task_count>0?(n(),a("i",Ie)):$("",!0),t.children_task_count==0?(n(),a("i",Ye)):$("",!0),e("span",{class:N(["line-clamp-1",{"text-red-800":t.deadline_crossed}])},x(t.title),3)]),_:2},1032,["to"])]))),128))],2)),f.tasks.length-l.value.length>0?(n(),a("div",He,[e("button",{onClick:c[0]||(c[0]=S(t=>y("clickOnMore",t),["prevent"])),class:"text-blue-600 hover:underline"}," +"+x(f.tasks.length-l.value.length)+" More Tasks ",1)])):$("",!0)]))}},Ke={class:"relative"},Ge={class:"ml-auto"},Je=["onClick"],Qe={key:0,class:"absolute inset-0 bg-gray-300 bg-opacity-90"},Xe={class:"absolute inset-16 bg-white border border-blue-500 rounded-md z-20 overflow-y-auto"},Ze={class:"text-lg font-semibold mb-4 sticky top-0 border-b border-blue-200 px-4 z-30 py-3 bg-white flex items-center"},et={__name:"TaskInMonth",props:{month:{type:String,required:!0,validator:f=>/^\d{4}-(0[1-9]|1[0-2])$/.test(f)},tasks:{type:Array,required:!0,default:()=>[]}},setup(f){const d=te({day:null,month:null,year:null});function r(t){t.stopPropagation(),d.day=null,d.month=null,d.year=null}function y(t,s,o,p){t.stopPropagation(),d.day=s,d.month=o,d.year=p}const l=(t,s,o)=>{const p=new Date;return t===p.getDate()&&s===p.getMonth()+1&&o===p.getFullYear()},i=(t,s,o)=>t===d.day&&s===d.month&&o===d.year,c=(t,s,o,p)=>{const D=l(t,s,o);return{"bg-green-100 text-green-900 border-blue-500 border-2 scale-105 z-10":D,"border-r border-t hover:border border-blue-200  hover:scale-105 hover:z-20 hover:bg-blue-50":!D,"bg-gray-50":!p}};return(t,s)=>(n(),a("div",Ke,[f.month?(n(),M(ge,{key:0,month:f.month,class:"border-t border-blue-200/50 relative"},{date:w(({day:o,month:p,year:D,isCurrentMonth:B})=>[e("div",{tabindex:"0",class:N(["transition origin-center p-2 outline-blue-600 outline-1 cursor-pointer",c(o,p,D,B)])},[e("div",{class:N(["font-bold w-full flex items-center",{"text-gray-300":!B}])},[e("div",null,x(o),1),e("div",Ge,[i(o,p,D)?$("",!0):(n(),a("button",{key:0,class:"btn-icon",onClick:S(C=>y(C,o,p,D),["prevent"])},s[0]||(s[0]=[e("i",{class:"fas fa-expand-arrows text-gray-400 hover:text-gray-600"},null,-1)]),8,Je))])],2),_(X,{"is-current-month":B,tasks:b(Q)(f.tasks,o,p,D),limit:3,class:"text-xs mt-4",onClickOnMore:C=>y(C,o,p,D)},null,8,["is-current-month","tasks","onClickOnMore"])],2)]),"calender-bottom":w(()=>[d.day?(n(),a("div",Qe,[e("div",Xe,[e("div",Ze,[g(" Tasks for "+x(d.day)+"/"+x(d.month)+"/"+x(d.year)+" ",1),e("button",{class:"ml-auto",type:"button",onClick:S(r,["prevent"])},s[1]||(s[1]=[e("i",{class:"fas fa-times"},null,-1)]))]),_(X,{class:"p-4","is-current-month":t.isCurrentMonth,tasks:b(Q)(f.tasks,d.day,d.month,d.year),tree:!0},null,8,["is-current-month","tasks"])])])):$("",!0)]),_:1},8,["month"])):$("",!0)]))}},tt={class:"bg-opacity-90 relative"},st={class:"rounded-md z-20"},nt={class:"text-md sticky top-0 border-b px-4 z-30 py-3 bg-white flex items-center shadow"},ot={class:"flex justify-between items-center gap-6 w-full"},at={key:0,class:"text-blue-800 bg-blue-100 rounded-full border px-4 py-0.5 text-sm"},lt={key:1,class:"text-blue-800 bg-blue-100 rounded-full border px-4 py-0.5 text-sm"},it={class:"ml-auto flex items-center gap-2"},rt={key:0,class:"w-32 relative h-8"},dt={__name:"DailyTask",setup(f){const d=te({day:null,month:null,year:null}),r=R(),y=R(),l=R("loading"),i=_e(),c=se(),t=R(""),s=R("day-wise"),o=R("not-completed");ne(()=>{r.value=H(new Date),y.value=K(new Date)}),Y(r,C=>{const[v,h,O]=C.split("-").map(Number);d.day=O,d.month=h,d.year=v}),Y(y,C=>{const[v,h]=C.split("-").map(Number);d.day=1,d.month=h,d.year=v}),Y(()=>d.month,async()=>{l.value="loading",await p(),l.value=""}),Y(s,C=>{if(C=="month-wise"){const[v,h]=r.value.split("-");y.value=`${v}-${h}`}});async function p(){await i.fetchMyTasks()}const D=async()=>{l.value="loading",await p(),l.value=""},B=A(()=>{var h,O;const C=T=>{var L,j;return t.value?(j=T==null?void 0:T.toUpperCase())==null?void 0:j.includes((L=t.value)==null?void 0:L.toUpperCase()):!0},v=s.value=="day-wise"?{"user-ids":(h=c==null?void 0:c.user)==null?void 0:h.id,status:o.value}:{"user-ids":(O=c==null?void 0:c.user)==null?void 0:O.id};return xe(Q(i.tasks,d.day,d.month,d.year),v).filter(T=>{var L;return C(T.title)||((L=T.children_tasks)==null?void 0:L.some(j=>C(j==null?void 0:j.title)))}).map(T=>({...T,children_tasks:T.children_tasks.filter(L=>C(L.title))}))});return(C,v)=>(n(),a("div",null,[s.value=="day-wise"?(n(),M(je,{key:0,loading:l.value=="loading","selected-day":r.value,onChange:v[0]||(v[0]=h=>r.value=h),onReloadClick:D,onMonthWiseButtonClick:v[1]||(v[1]=h=>s.value="month-wise")},null,8,["loading","selected-day"])):$("",!0),s.value=="month-wise"?(n(),M(ze,{key:1,loading:l.value=="loading","selected-month":y.value,onChange:v[2]||(v[2]=h=>y.value=h),onDayWiseButtonClick:v[3]||(v[3]=h=>s.value="day-wise"),onReloadClick:D},null,8,["loading","selected-month"])):$("",!0),e("div",tt,[e("div",st,[e("div",nt,[e("div",ot,[s.value=="day-wise"?(n(),a("div",at,x(b(fe)(r.value)),1)):$("",!0),s.value=="month-wise"?(n(),a("div",lt,x(b(be)(y.value)),1)):$("",!0),e("div",it,[s.value=="day-wise"?(n(),a("div",rt,[v[7]||(v[7]=e("label",{class:"absolute text-xs left-3 -top-1.5 bg-slate-100 text-blue-500"},"Status",-1)),de(e("select",{"onUpdate:modelValue":v[4]||(v[4]=h=>o.value=h),class:"h-8 text-xs px-2 text-gray-600 border-2 border-gray-400 rounded-md w-full"},v[6]||(v[6]=[e("option",{value:""},"--ALL TASKS--",-1),e("option",{value:"not-completed"},"Not Completed",-1)]),512),[[ue,o.value]])])):$("",!0),_(ve,{modelValue:t.value,"onUpdate:modelValue":v[5]||(v[5]=h=>t.value=h),class:"w-full md:w-48 md:ml-auto h-8","debounce-time":0},null,8,["modelValue"])])])]),s.value=="day-wise"?(n(),M(X,{key:0,class:"p-4 overflow-y-auto",tasks:B.value,tree:!0},null,8,["tasks"])):s.value=="month-wise"?(n(),M(et,{key:1,tasks:B.value||[],month:y.value,class:"bg-gray-50"},null,8,["tasks","month"])):$("",!0)]),l.value==="loading"?(n(),M(me,{key:0,class:"absolute inset-0 flex items-center justify-center z-20 bg-opacity-70"})):$("",!0)])]))}},ut={class:"bg-white shadow-md rounded-lg"},ct={class:"overflow-x-auto shadow-md min-h-max"},pt={class:"min-w-full text-sm text-left text-gray-500 table-fixed"},yt={class:"text-xs"},mt={class:"text-sm font-semibold text-blue-800"},xt={__name:"DashboardLeaveBalance",setup(f){const d=I(),{userDashboard:r}=V(d);return(y,l)=>{var i,c,t,s;return n(),a("div",ut,[l[4]||(l[4]=e("h2",{class:"text-xl font-semibold py-2 px-4"},"Leave Balance",-1)),e("div",ct,[e("table",pt,[e("thead",null,[e("tr",yt,[l[0]||(l[0]=e("th",{class:"px-2 py-1 font-semibold text-gray-900 border bg-gray-50"},null,-1)),(n(!0),a(P,null,E((i=b(r))==null?void 0:i.leave_balance,o=>(n(),a("th",{class:"px-4 text-center py-1 font-semibold text-gray-900 border bg-gray-50 w-40",key:o.id},x(o.name),1))),128))])]),e("tbody",null,[e("tr",null,[l[1]||(l[1]=e("td",{class:"px-4 py-4 font-medium text-gray-900 border text-xs"},"Total",-1)),(n(!0),a(P,null,E((c=b(r))==null?void 0:c.leave_balance,o=>(n(),a("td",{class:"px-4 text-center py-3 font-medium text-gray-900 border",key:o.id},x(o.annual_quota),1))),128))]),e("tr",null,[l[2]||(l[2]=e("td",{class:"px-4 py-3 font-medium text-gray-900 border text-xs"},"Used",-1)),(n(!0),a(P,null,E((t=b(r))==null?void 0:t.leave_balance,o=>(n(),a("td",{class:"px-4 text-center py-4 font-medium text-gray-900 border",key:o.id},x(o.used_days),1))),128))]),e("tr",mt,[l[3]||(l[3]=e("td",{class:"px-4 py-3 border text-xs"},"Balance",-1)),(n(!0),a(P,null,E((s=b(r))==null?void 0:s.leave_balance,o=>(n(),a("td",{class:"px-4 text-center py-4 border",key:o.id},x(o.remaining_days),1))),128))])])])])])}}},vt={class:"bg-white shadow-md rounded-lg p-4"},ft={class:"flex items-center justify-between mb-1"},bt={key:0,class:"text-xs italic text-center py-4 text-gray-500 mt-2"},_t={key:1,class:"py-3 divide-y"},gt=["onClick"],ht={class:"flex justify-between items-center py-2 rounded hover:bg-sky-50 transition-colors"},kt={class:"text-sm text-gray-800"},wt={key:0,class:"fas fa-clock mr-2"},$t={key:1,class:"fas fa-hourglass-half mr-2"},Dt={key:2,class:"fas fa-check-circle mr-2"},Ct={key:3,class:"fas fa-times-circle mr-2"},Mt={class:"mt-6"},Lt={class:"flex items-center justify-between mb-1"},St={key:0,class:"text-xs italic text-center py-4 text-gray-500 mt-2"},Tt={key:1,class:"py-3 divide-y"},At=["onClick"],Rt={class:"flex justify-between items-center py-2 rounded hover:bg-sky-50 transition-colors"},Nt={class:"text-sm text-gray-800"},Pt={class:"mt-6"},Et={class:"flex items-center justify-between mb-1"},Ot={class:"flex items-center gap-3"},Bt={key:0,class:"text-xs italic text-center py-4 text-gray-500 mt-2"},jt={key:1,class:"py-3 divide-y"},Ut=["onClick"],Vt={class:"flex justify-between items-center py-2 rounded hover:bg-sky-50 transition-colors"},qt={class:"text-sm text-gray-800"},Wt={key:0,class:"opacity-70"},zt={class:"mt-6"},Ft={class:"flex items-center justify-between mb-1"},It={key:0,class:"text-xs italic text-center py-4 text-gray-500 mt-2"},Yt={key:1,class:"py-3 divide-y"},Ht=["onClick"],Kt={class:"flex justify-between items-center py-2 rounded hover:bg-sky-50 transition-colors"},Gt={class:"text-sm text-gray-800"},Jt={__name:"DashboardRecentApplications",setup(f){const d=z(()=>F(()=>import("./LeaveApplicationModal-BO1j2c7N.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]))),r=z(()=>F(()=>import("./ShortLeaveDetailsModal-BDw9XD-F.js"),__vite__mapDeps([10,1,2,3,4,5,6,11,7,12,13]))),y=z(()=>F(()=>import("./ManualAttendanceDetailsModal-C4uPagEz.js"),__vite__mapDeps([14,1,2,3,4,5,6,7,15,16]))),l=z(()=>F(()=>import("./ShiftExchangeDetailsModal-B3pDbp36.js"),__vite__mapDeps([17,1,2,3,4,5,6,11,7,18,19]))),i=z(()=>F(()=>import("./OffdayExchangeDetailsModal-38RDg7L3.js"),__vite__mapDeps([20,1,2,3,4,5,6,11,7,18,21]))),c=I(),{userDashboard:t}=V(c),s=A(()=>{var k;return((k=t.value)==null?void 0:k.lists)??{}}),o=A(()=>s.value.current_month_leave??[]),p=A(()=>s.value.short_leave??[]),D=A(()=>s.value.exchange??[]),B=A(()=>s.value.manual_attendance??[]),C={null:{title:"Handover Waiting",cls:"bg-gray-500 text-white"},Pending:{title:"Pending",cls:"bg-yellow-500 text-white"},Approved:{title:"Approved",cls:"bg-green-500 text-white"},Rejected:{title:"Rejected",cls:"bg-red-500 text-white"}},v=k=>C[k??"null"]??{title:String(k||"Unknown"),cls:"bg-gray-400 text-white"},h=k=>Array.isArray(k)?k.filter(u=>u==null?void 0:u.name).map(u=>`${u.name} (${(u==null?void 0:u.days)??0})`).join(", "):"",O=R({open:!1,id:null}),T=k=>{O.value={open:!0,id:k}},L=R({open:!1,id:null}),j=k=>{L.value={open:!0,id:k}},q=R({open:!1,id:null}),oe=k=>{q.value={open:!0,id:k}},U=R({open:!1,id:null,type:null}),ae=k=>{const u=(k==null?void 0:k.exchange_type)==="offday"?"offday":"shift";U.value={open:!0,id:k.id,type:u}},le=A(()=>U.value.type==="offday"?i:l),ie=A(()=>`${U.value.type||"x"}-${U.value.id||"x"}`);return(k,u)=>{const W=Z("RouterLink");return n(),a("div",vt,[e("div",null,[e("div",ft,[u[5]||(u[5]=e("div",{class:"flex items-center"},[e("i",{class:"fas fa-file mr-2 h-5 w-5"}),e("h2",{class:"text-xl font-semibold"},[g(" Applications "),e("span",{class:"text-xs ml-2 text-green-600"},"Latest")])],-1)),_(W,{to:{name:"MyLeaveApplications"},class:"text-xs text-blue-600 hover:underline"},{default:w(()=>u[4]||(u[4]=[g(" See more ")])),_:1,__:[4]})]),u[6]||(u[6]=e("hr",null,null,-1)),o.value.length===0?(n(),a("div",bt," No applications ")):(n(),a("div",_t,[(n(!0),a(P,null,E(o.value,m=>(n(),a("button",{key:m.id,class:"block w-full text-left",onClick:G=>T(m.id)},[e("div",ht,[e("h3",kt,"#"+x(m.id)+" ("+x(h(m.leave_type_counts))+")",1),e("span",{class:N(["font-medium flex items-center whitespace-nowrap text-xs px-2 py-1 rounded-full",v(m.status).cls])},[m.status===null?(n(),a("i",wt)):m.status==="Pending"?(n(),a("i",$t)):m.status==="Approved"?(n(),a("i",Dt)):(n(),a("i",Ct)),g(" "+x(v(m.status).title),1)],2)])],8,gt))),128))]))]),e("div",Mt,[e("div",Lt,[u[8]||(u[8]=e("div",{class:"flex items-center"},[e("i",{class:"fas fa-walking mr-2 h-5 w-5"}),e("h2",{class:"text-base font-semibold"},"Short Leave")],-1)),_(W,{to:{name:"MyShortLeaves"},class:"text-xs text-blue-600 hover:underline"},{default:w(()=>u[7]||(u[7]=[g(" See more ")])),_:1,__:[7]})]),u[9]||(u[9]=e("hr",null,null,-1)),p.value.length===0?(n(),a("div",St," No short leave ")):(n(),a("div",Tt,[(n(!0),a(P,null,E(p.value,m=>(n(),a("button",{key:m.id,class:"w-full text-left",onClick:G=>j(m.id)},[e("div",Rt,[e("h3",Nt,"# "+x(m.id)+" ("+x(m.type)+")",1),e("span",{class:N(["text-xs px-2 py-1 rounded-full",v(m.status).cls])},x(v(m.status).title),3)])],8,At))),128))]))]),e("div",Pt,[e("div",Et,[u[12]||(u[12]=e("div",{class:"flex items-center"},[e("i",{class:"fas fa-exchange-alt mr-2 h-5 w-5"}),e("h2",{class:"text-base font-semibold"},"Exchange")],-1)),e("div",Ot,[_(W,{to:{name:"MyShiftExchangeList"},class:"text-xs text-blue-600 hover:underline"},{default:w(()=>u[10]||(u[10]=[g("Shift")])),_:1,__:[10]}),_(W,{to:{name:"MyOffdayExchangeList"},class:"text-xs text-blue-600 hover:underline"},{default:w(()=>u[11]||(u[11]=[g("Offday")])),_:1,__:[11]})])]),u[13]||(u[13]=e("hr",null,null,-1)),D.value.length===0?(n(),a("div",Bt," No exchange ")):(n(),a("div",jt,[(n(!0),a(P,null,E(D.value,m=>(n(),a("button",{key:m.id,class:"block w-full text-left",onClick:G=>ae(m)},[e("div",Vt,[e("h3",qt,[g("# "+x(m.id)+" ",1),m.exchange_type?(n(),a("span",Wt," ("+x(m.exchange_type)+")",1)):$("",!0)]),e("span",{class:N(["text-xs px-2 py-1 rounded-full",v(m.status).cls])},x(v(m.status).title),3)])],8,Ut))),128))]))]),e("div",zt,[e("div",Ft,[u[15]||(u[15]=e("div",{class:"flex items-center"},[e("i",{class:"fas fa-user-check mr-2 h-5 w-5"}),e("h2",{class:"text-base font-semibold"},"Manual Attendance")],-1)),_(W,{to:{name:"MyManualAttendanceList"},class:"text-xs text-blue-600 hover:underline"},{default:w(()=>u[14]||(u[14]=[g(" See more ")])),_:1,__:[14]})]),u[16]||(u[16]=e("hr",null,null,-1)),B.value.length===0?(n(),a("div",It," No manual application ")):(n(),a("div",Yt,[(n(!0),a(P,null,E(B.value,m=>(n(),a("button",{key:m.id,class:"block w-full text-left",onClick:G=>oe(m.id)},[e("div",Kt,[e("h3",Gt,"# "+x(m.id)+" ("+x(m.type)+")",1),e("span",{class:N(["text-xs px-2 py-1 rounded-full",v(m.status).cls])},x(v(m.status).title),3)])],8,Ht))),128))]))]),O.value.open?(n(),M(b(d),{key:0,open:O.value.open,"onUpdate:open":u[0]||(u[0]=m=>O.value.open=m),id:O.value.id},null,8,["open","id"])):$("",!0),L.value.open?(n(),M(b(r),{key:1,open:L.value.open,"onUpdate:open":u[1]||(u[1]=m=>L.value.open=m),id:L.value.id},null,8,["open","id"])):$("",!0),q.value.open?(n(),M(b(y),{key:2,open:q.value.open,"onUpdate:open":u[2]||(u[2]=m=>q.value.open=m),id:q.value.id},null,8,["open","id"])):$("",!0),U.value.open?(n(),M(ce(le.value),{key:ie.value,open:U.value.open,"onUpdate:open":u[3]||(u[3]=m=>U.value.open=m),id:U.value.id},null,40,["open","id"])):$("",!0)])}}},Qt={class:"bg-white shadow-md rounded-lg p-4"},Xt={class:"space-y-3"},Zt={key:0,class:"text-xs italic text-center py-4 text-gray-500"},es={class:"flex items-center space-x-4"},ts={key:0,class:"h-3 w-3 bg-red-600 rounded-full inline-block"},ss={key:1,class:"inline-block"},ns={class:"absolute top-10 left-1/2 -translate-x-1/2 bg-gray-800 text-white text-xs rounded py-1 px-2 opacity-0 group-hover:opacity-100 transition pointer-events-none z-10 whitespace-nowrap"},os={class:"text-sm font-medium text-gray-900"},as={class:"text-xs text-gray-500 mt-0.5"},ls={class:"text-xl font-bold text-gray-800 flex items-center gap-2 p-4"},is={class:"space-y-5 px-4 md:px-6 py-4"},rs={class:"text-sm text-gray-500 flex items-center gap-2"},ds={class:"flex justify-end gap-3 mt-6"},us={__name:"DashboardRecentNotices",setup(f){const d=I(),{userDashboard:r}=V(d),y=pe(),l=A(()=>{var c,t;if(r.value&&r.value.notices){const s=(t=(c=r.value)==null?void 0:c.notices)==null?void 0:t.find(o=>!o.user_feedback);if(s)return s}return null}),i=()=>{if(!l.value)return;const c=l.value.type===1?`/notice-details/${l.value.id}`:`/policy-details/${l.value.id}`;y.push(c)};return(c,t)=>{var o;const s=Z("RouterLink");return n(),a("div",Qt,[t[7]||(t[7]=ye('<div class="flex justify-between items-start mb-1"><div class="flex items-center"><i class="fas fa-file mr-2 h-5 w-5"></i><h2 class="text-xl font-semibold">Notices</h2></div></div><hr class="mb-3">',2)),e("div",Xt,[((o=b(r).notices)==null?void 0:o.length)===0?(n(),a("div",Zt," No pending notice found ")):(n(!0),a(P,{key:1},E(b(r).notices,(p,D)=>(n(),a("div",{key:D,class:"flex items-center justify-between p-4 border rounded-lg shadow-sm hover:shadow transition-all bg-white"},[e("div",es,[e("div",{class:N([["rounded-full",p.user_feedback?"bg-green-100":"bg-red-100"],"h-8 w-8 flex items-center justify-center rounded-full flex-shrink-0"])},[p.user_feedback?(n(),a("span",ss,t[2]||(t[2]=[e("i",{class:"far fa-check text-green-600"},null,-1)]))):(n(),a("span",ts)),e("div",ns,x(p.user_feedback?"Feedback Submitted":"Feedback Pending"),1)],2),e("div",null,[e("p",os,x(p.title),1),e("p",as,x(p.published_at),1)])]),_(s,{to:p.type===1?`/notice-details/${p.id}`:`/policy-details/${p.id}`,class:"text-blue-600 hover:text-blue-800 font-semibold text-sm"},{default:w(()=>t[3]||(t[3]=[g(" View ")])),_:2,__:[3]},1032,["to"])]))),128)),l.value?(n(),M(ke,{key:2,show:!0,onClose:t[1]||(t[1]=p=>l.value=null)},{default:w(()=>[e("div",ls,[t[4]||(t[4]=e("i",{class:"fas fa-bell text-blue-500"},null,-1)),g(" "+x(l.value.title),1)]),e("div",is,[e("p",rs,[t[5]||(t[5]=e("i",{class:"fas fa-calendar-alt text-gray-400"},null,-1)),g(" Published: "+x(l.value.published_at),1)]),t[6]||(t[6]=e("p",{class:"text-base text-gray-700 leading-relaxed"}," You must read this notice before proceeding. ",-1)),e("div",ds,[e("button",{onClick:t[0]||(t[0]=p=>l.value=null),class:"bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium px-5 py-2 rounded-lg transition"}," Cancel "),e("button",{onClick:i,class:"bg-blue-600 hover:bg-blue-700 text-white font-semibold px-6 py-2.5 rounded-lg shadow transition"}," Read Details ")])])]),_:1})):$("",!0)])])}}},cs={class:"w-full px-6 py-4"},ps={class:"grid lg:grid-cols-4 gap-6"},ys={class:"card-bg gap-0 shadow-md border border-gray-300 col-span-full lg:col-span-3 lg:row-span-2"},ms={class:"col-span-full lg:col-span-1 grid sm:grid-cols-2 lg:grid-cols-1 gap-6 sticky top-[80px]"},xs={class:"card-bg gap-0 shadow-md border border-gray-300"},vs={class:"card-bg gap-0 shadow-md border border-gray-300"},fs={class:"card-bg gap-0 shadow-md border border-gray-300"},bs={__name:"DashboardEmployeeView",setup(f){return(d,r)=>(n(),a("div",cs,[e("div",ps,[e("div",ys,[_(dt)]),e("div",ms,[e("div",xs,[_(Jt)]),e("div",vs,[_(us)]),e("div",fs,[_(xt)])])])]))}},Ns={__name:"DashBoard",setup(f){const d=se(),r=I(),{userDashboard:y}=V(r),{user:l}=V(d),i=A(()=>{var t;return["admin","super_admin","developer"].includes((t=l==null?void 0:l.value)==null?void 0:t.role)}),c=R(null);return ne(async()=>{var s,o;l.value||await d.fetchUser(),await r.fetchUserDashboardData(),i.value&&await r.fetchAdminDashboardData();const t=(o=(s=y.value)==null?void 0:s.notices)==null?void 0:o.find(p=>!p.user_feedback);t&&(c.value=t)}),(t,s)=>i.value&&b(d).isAdminMood?(n(),M(Ne,{key:0})):(n(),M(bs,{key:1}))}};export{Ns as default};
