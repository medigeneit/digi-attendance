import{N as le,r as k,e as O,c as u,o as n,a as e,f as N,g as v,w as R,F as U,h as j,j as A,p as C,v as V,i as T,B as $e,t as w,k as ee,d as Ce,m as te,n as Re,y as ne,x as P,O as Ae,K as Se,J as Ee,b as Ue,u as je,z as X}from"./index-DYOZxE9l.js";import{L as se}from"./LoaderView-B3Q7XYKC.js";import{O as Z}from"./OverlyModal-CWWiDeEv.js";import{_ as Le}from"./ShareComponent-BVMQIcLf.js";import{_ as ie}from"./DescriptionView-CjMxFFbj.js";import{R as Te}from"./RequiredIcon-B3tnUave.js";import{f as oe,b as Ve,s as Fe}from"./requirement-D4ltHAan.js";import{o as Pe}from"./url-CePbr-gY.js";import{u as Oe}from"./department-CMEYNKpA.js";import{S as Ie}from"./SelectDropdown-CbpUp7va.js";import{_ as re}from"./UserChip-C1e7yndl.js";import{u as De}from"./user-CCQ2DSaT.js";import{_ as Me}from"./TaskUserChip-BUBS2JU_.js";import{u as Be}from"./useTaskStore-Cx0MEOUL.js";import{_ as ze}from"./TaskSelectionInput-Do5eE5DG.js";import{_ as Ge}from"./TaskAddForm-DQ9PYNPU.js";import{_ as He}from"./ApproveAndReject-DQ441IgW.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./TaskTitle-B1O3foCe.js";import"./company-BvfNOXFI.js";import"./CompanyDepartmentSelectInput-DxCC2w8-.js";import"./SectionLoading-l3rZlM8N.js";import"./TextWithHr-DA_OiAW6.js";import"./TaskUrgencyInput-CFFSUaoF.js";async function We(b,h){return le.post(`/requirements/${b}/details`,h)}async function Ne(b,h,{params:a={}}={}){return le.get(`/requirements/${b}/details/${h}`,{params:a})}async function Qe(b,h,a){return le.put(`/requirements/${b}/details/${h}`,a)}async function Ke(b,h,{params:a={}}={}){const y=Pe(a);return le.delete(`/requirements/${b}/details/${h}${y?"?"+y:""}`)}const Je={class:"sticky top-0 pt-4 bg-white z-10"},Ye={class:"mb-4"},Xe={class:"block text-gray-600 text-sm mb-1 font-medium"},Ze={class:"mb-4"},et={class:"mb-4"},tt={class:"mb-4"},rt={class:"mb-4"},st={class:"sticky bottom-0 bg-white py-4 border-t -mx-6 px-6"},nt={key:0,class:"mb-4 text-red-500 font-medium"},it={key:1,class:"mb-4"},ot={class:"flex items-center justify-between gap-4"},lt=["disabled"],at={__name:"RequirementDetailAddForm",props:{requirementId:{type:[Number,String],required:!0}},emits:["create","closeClick","error"],setup(b,{emit:h}){const a=b,y=h,l=Oe(),g=k(),d=k(""),m=k(),c=k({title:"",description:"",priority:"",better_to_complete_on:"",supervisor_id:null}),p=k([]);async function o(){var t,r;d.value="submitting";const s={...c.value};console.log({payload:s});try{const _=await We(a.requirementId,s);y("create",_),d.value="create"}catch(_){d.value="error",m.value=((r=(t=_.response)==null?void 0:t.data)==null?void 0:r.message)||"Failed to create requirement detail",y("error",m.value)}}return O(async()=>{var t;const s=((t=(await oe(a.requirementId)).data)==null?void 0:t.requirement)||{};p.value=await l.fetchDepartmentEmployee([s.from_department_id])}),(s,t)=>(n(),u("div",{class:"max-h-[90vh] overflow-auto w-full mx-auto bg-white shadow-lg rounded-lg p-6 pb-0 pt-0 relative",ref_key:"formContainerRef",ref:g},[e("div",Je,[t[7]||(t[7]=e("h2",{class:"text-2xl font-semibold text-gray-800"},"Add Requirement",-1)),t[8]||(t[8]=e("hr",{class:"mb-4"},null,-1)),e("div",{class:"text-purple-600/80 mb-4 text-xs border-b border-dashed",onClick:t[0]||(t[0]=R(r=>y("ok"),["prevent"]))}," Fields that must be filled in will be marked with an asterisk. ")]),e("form",{onSubmit:R(o,["prevent"]),class:"z-0"},[d.value!=="loading"?(n(),u(U,{key:0},[e("div",Ye,[e("label",Xe,[t[9]||(t[9]=A("Title ")),C(Te)]),j(e("input",{"onUpdate:modelValue":t[1]||(t[1]=r=>c.value.title=r),required:"",placeholder:"EnderRequirement detail title",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[V,c.value.title]])]),e("div",Ze,[t[10]||(t[10]=e("label",{class:"block text-gray-600 text-sm mb-1 font-medium"},"Details",-1)),j(e("textarea",{rows:"10","onUpdate:modelValue":t[2]||(t[2]=r=>c.value.description=r),placeholder:"Enter requirement description",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[V,c.value.description]])]),e("div",et,[t[12]||(t[12]=e("label",{class:"block text-gray-600 text-sm mb-1 font-medium"},"Supervisor",-1)),C(Ie,{modelValue:c.value.supervisor_id,"onUpdate:modelValue":t[3]||(t[3]=r=>c.value.supervisor_id=r),options:p.value,placeholder:"--NO SUPERVISOR--",containment:g.value,clearable:"",class:"h-10"},{"list-header":T(()=>t[11]||(t[11]=[e("div",{class:"px-3 pt-2 pb-1 shadow-md text-xs uppercase bg-gray-50 text-gray-500"}," Employees ",-1)])),option:T(({option:r})=>[C(re,{user:r||{},class:"pr-5 -mx-1"},null,8,["user"])]),"selected-option":T(({option:r})=>[r?(n(),N(re,{key:0,user:r||{},class:"pr-4"},null,8,["user"])):v("",!0)]),_:1},8,["modelValue","options","containment"])]),e("div",tt,[t[14]||(t[14]=e("label",{class:"block text-gray-600 text-sm mb-1 font-medium"},"Priority ",-1)),j(e("select",{class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500","onUpdate:modelValue":t[4]||(t[4]=r=>c.value.priority=r)},t[13]||(t[13]=[e("option",{value:""},"NORMAL",-1),e("option",null,"IMPORTANT",-1),e("option",null,"URGENT",-1)]),512),[[$e,c.value.priority]])]),e("div",rt,[t[15]||(t[15]=e("label",{class:"block text-gray-600 text-sm mb-1 font-medium"},"Better to Complete ",-1)),j(e("input",{type:"date","onUpdate:modelValue":t[5]||(t[5]=r=>c.value.better_to_complete_on=r),placeholder:"EnderRequirement detail title",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[V,c.value.better_to_complete_on]])])],64)):v("",!0),e("div",st,[m.value?(n(),u("div",nt,w(m.value),1)):v("",!0),m.value?(n(),u("hr",it)):v("",!0),e("div",ot,[e("button",{type:"button",onClick:t[6]||(t[6]=R(r=>y("closeClick"),["prevent"])),class:"bg-gray-200 hover:bg-gray-300 text-gray-700 font-semibold px-5 py-2 rounded transition"}," Cancel "),e("button",{disabled:d.value=="loading"||d.value=="submitting",type:"submit",class:"bg-blue-500 hover:bg-blue-600 text-white font-semibold px-5 py-2 rounded transition"},w(d.value=="submitting"?"Saving...":"Add Requirement"),9,lt)])])],32),d.value==="loading"||d.value==="submitting"?(n(),N(se,{key:0,class:"z-20 absolute inset-0 flex items-center justify-center bg-opacity-30"})):v("",!0)],512))}},ut={class:"max-h-[90vh] overflow-auto w-full mx-auto bg-white shadow-lg rounded-lg p-6 pb-0 pt-0 relative"},dt={class:"mb-4"},mt={class:"font-semibold"},pt={class:"mb-4"},ct={class:"line-clamp-2"},vt={key:1,class:"min-h-40"},bt={class:"sticky bottom-0 bg-white py-4 border-t -mx-6 px-6"},ft={key:0,class:"mb-4 text-red-500 font-medium"},yt={key:1,class:"mb-4"},gt={class:"flex items-center justify-between gap-4"},xt=["disabled"],kt={__name:"RequirementDetailDeleteForm",props:{requirementId:{type:[Number,String],required:!0},detailId:{type:[Number,String],required:!0}},emits:["delete","closeClick","error"],setup(b,{emit:h}){const a=b,y=h,l=De(),g=k(null),d=k(""),m=k(),c=k([]);async function p(){var o,s;d.value="submitting";try{const t=await Ke(a.requirementId,a.detailId);y("delete",t),d.value="create"}catch(t){d.value="error",m.value=((s=(o=t.response)==null?void 0:o.data)==null?void 0:s.message)||"Failed to update requirement detail: "+t,y("error",m.value)}}return O(async()=>{var o,s,t;d.value="loading";try{c.value=await l.fetchDepartmentWiseEmployees(),g.value=(o=(await Ne(a.requirementId,a.detailId)).data)==null?void 0:o.detail}catch(r){m.value=((t=(s=r.response)==null?void 0:s.data)==null?void 0:t.message)||"Failed to fetch requirement detail"}finally{d.value=""}}),(o,s)=>{var t,r;return n(),u("div",ut,[s[4]||(s[4]=e("div",{class:"sticky top-0 -mx-6 px-6 z-10 bg-gray-50"},[e("h2",{class:"text-xl font-semibold text-gray-800 py-2"},"Delete Requirement Details"),e("hr",{class:"mb-4 -mx-6"})],-1)),e("form",{onSubmit:R(p,["prevent"]),class:"z-0"},[d.value!=="loading"?(n(),u(U,{key:0},[e("div",dt,[s[1]||(s[1]=e("div",{class:"block text-gray-600 text-sm mb-1 font-medium"},"Title",-1)),e("div",mt,w((t=g.value)==null?void 0:t.title),1)]),e("div",pt,[s[2]||(s[2]=e("div",{class:"block text-gray-600 text-sm mb-1 font-medium"},"Description",-1)),e("div",ct,w((r=g.value)==null?void 0:r.description),1)]),s[3]||(s[3]=e("div",{class:"my-8 text-center text-xl text-red-600"},"Are you sure want to delete?",-1))],64)):(n(),u("div",vt)),e("div",bt,[m.value?(n(),u("div",ft,w(m.value),1)):v("",!0),m.value?(n(),u("hr",yt)):v("",!0),e("div",gt,[e("button",{type:"button",onClick:s[0]||(s[0]=R(_=>y("closeClick"),["prevent"])),class:"bg-gray-200 hover:bg-gray-300 text-gray-700 font-semibold px-5 py-2 rounded transition"}," Cancel "),e("button",{disabled:d.value=="loading"||d.value=="submitting",type:"submit",class:"bg-red-700 hover:bg-red-500 text-white font-semibold px-5 py-2 rounded transition"},w(d.value=="submitting"?"Deleting...":"Delete"),9,xt)])])],32),d.value==="loading"||d.value==="submitting"?(n(),N(se,{key:0,class:"z-20 absolute inset-0 flex items-center justify-center bg-opacity-30"})):v("",!0)])}}},_t={class:"sticky top-0 pt-4 bg-white z-10"},wt={class:"mb-4"},qt={class:"block text-gray-600 text-sm mb-1 font-medium"},ht={class:"mb-4"},$t={class:"mb-4"},Ct={key:0,class:"relative w-full"},Rt={key:0,class:"absolute right-1 text-xl top-0 bottom-0 flex items-center"},St={class:"mb-4"},Tt={class:"mb-4"},It={class:"sticky bottom-0 bg-white py-4 border-t -mx-6 px-6"},Dt={key:0,class:"mb-4 text-red-500 font-medium"},Nt={key:1,class:"mb-4"},At={class:"flex items-center justify-between gap-4"},Et=["disabled"],Ut={__name:"RequirementDetailEditForm",props:{requirementId:{type:[Number,String],required:!0},detailId:{type:[Number,String],required:!0}},emits:["update","closeClick","error"],setup(b,{emit:h}){const a=b,y=h,l=k(),g=De(),d=k(null),m=k(""),c=k(),p=k({title:"",description:"",priority:"",better_to_complete_on:"",supervisor_id:null}),o=k([]);async function s(){var r,_;m.value="submitting";const t={...p.value};try{const x=await Qe(a.requirementId,a.detailId,t);y("update",x),m.value="create"}catch(x){m.value="error",c.value=((_=(r=x.response)==null?void 0:r.data)==null?void 0:_.message)||"Failed to update requirement detail",y("error",c.value)}}return O(async()=>{var t,r,_,x,S,D,f;m.value="loading";try{o.value=await g.fetchDepartmentWiseEmployees(),await g.fetchTypeWiseEmployees({type:"academy_body,doctor,executive"}),d.value=(t=(await Ne(a.requirementId,a.detailId)).data)==null?void 0:t.detail,p.value={title:(r=d.value)==null?void 0:r.title,description:(_=d.value)==null?void 0:_.description,priority:(x=d.value)==null?void 0:x.priority,supervisor_id:(S=d.value)==null?void 0:S.supervisor_id};const q=new Date(d.value.better_to_complete_on);p.value.better_to_complete_on=q.toISOString().split("T")[0]}catch(q){c.value=((f=(D=q.response)==null?void 0:D.data)==null?void 0:f.message)||"Failed to fetch requirement detail"}finally{m.value=""}}),(t,r)=>{var _;return n(),u("div",{ref_key:"formContainerRef",ref:l,class:"max-h-[90vh] w-full mx-auto overflow-auto bg-white shadow-lg rounded-lg p-6 pb-0 pt-0 relative"},[e("div",_t,[r[8]||(r[8]=e("h2",{class:"text-2xl font-semibold text-gray-800"},"Edit Requirement",-1)),r[9]||(r[9]=e("hr",{class:"mb-4"},null,-1)),e("div",{class:"text-purple-600/80 mb-4 text-xs border-b border-dashed",onClick:r[0]||(r[0]=R(x=>y("ok"),["prevent"]))}," Fields that must be filled in will be marked with an asterisk. ")]),e("form",{onSubmit:R(s,["prevent"]),class:"z-0"},[m.value!=="loading"?(n(),u(U,{key:0},[e("div",wt,[e("label",qt,[r[10]||(r[10]=A("Title ")),C(Te)]),j(e("input",{"onUpdate:modelValue":r[1]||(r[1]=x=>p.value.title=x),required:"",placeholder:"EnderRequirement detail title",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[V,p.value.title]])]),e("div",ht,[r[11]||(r[11]=e("label",{class:"block text-gray-600 text-sm mb-1 font-medium"},"Description",-1)),j(e("textarea",{rows:"10","onUpdate:modelValue":r[2]||(r[2]=x=>p.value.description=x),placeholder:"Enter requirement description",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[V,p.value.description]])]),e("div",$t,[r[12]||(r[12]=e("label",{class:"block text-gray-600 text-sm mb-1 font-medium"},"Supervisor",-1)),C(Ie,{modelValue:p.value.supervisor_id,"onUpdate:modelValue":r[4]||(r[4]=x=>p.value.supervisor_id=x),options:[...ee(g).users||[],...(ee(g).users||[]).find(x=>{var S,D;return x.id==((D=(S=d.value)==null?void 0:S.supervisor)==null?void 0:D.id)})?[]:[(_=d.value)==null?void 0:_.supervisor]],containment:l.value,placeholder:"--NO SUPERVISOR--",class:"h-10"},{option:T(({option:x})=>[C(re,{user:x||{}},null,8,["user"])]),"selected-option":T(({option:x})=>[x?(n(),u("div",Ct,[C(re,{user:x||{}},null,8,["user"]),p.value.supervisor_id?(n(),u("div",Rt,[e("button",{onClick:r[3]||(r[3]=R(S=>p.value.supervisor_id=null,["prevent"])),class:"text-gray-6 font-semibold 00 hover:text-red-700"}," × ")])):v("",!0)])):v("",!0)]),_:1},8,["modelValue","options","containment"])]),e("div",St,[r[14]||(r[14]=e("label",{class:"block text-gray-600 text-sm mb-1 font-medium"},"Priority ",-1)),j(e("select",{class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500","onUpdate:modelValue":r[5]||(r[5]=x=>p.value.priority=x)},r[13]||(r[13]=[e("option",{value:null},"NORMAL",-1),e("option",null,"IMPORTANT",-1),e("option",null,"URGENT",-1)]),512),[[$e,p.value.priority]])]),e("div",Tt,[r[15]||(r[15]=e("label",{class:"block text-gray-600 text-sm mb-1 font-medium"},"Better to Complete ",-1)),j(e("input",{type:"date","onUpdate:modelValue":r[6]||(r[6]=x=>p.value.better_to_complete_on=x),placeholder:"EnderRequirement detail title",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[V,p.value.better_to_complete_on]])])],64)):v("",!0),e("div",It,[c.value?(n(),u("div",Dt,w(c.value),1)):v("",!0),c.value?(n(),u("hr",Nt)):v("",!0),e("div",At,[e("button",{type:"button",onClick:r[7]||(r[7]=R(x=>y("closeClick"),["prevent"])),class:"btn-3"},"Cancel"),e("button",{disabled:m.value=="loading"||m.value=="submitting",type:"submit",class:"btn-2"},w(m.value=="submitting"?"Saving...":"Edit"),9,Et)])])],32),m.value==="loading"||m.value==="submitting"?(n(),N(se,{key:0,class:"z-20 absolute inset-0 flex items-center justify-center bg-opacity-30"})):v("",!0)],512)}}},jt=["rowspan"],Lt={class:"text-lg font-semibold mb-2 flex items-start gap-3"},Vt={key:0},Ft={key:0,class:"mb-5"},Pt=["innerHTML"],Ot={class:"flex items-end"},Mt={key:0,class:"mt-4 flex justify-between items-end print:pb-0"},Bt={class:""},zt={key:1,class:"ml-auto flex gap-6 items-center"},Gt=["rowspan"],Ht={class:"text-center print:text-xs"},Wt={class:"border-2 border-gray-700 p-3 text-center"},Qt=["title"],Kt={class:"border-2 border-gray-700 p-3"},Jt={class:"whitespace-nowrap text-center print:whitespace-break-spaces"},Yt={key:0,class:"print:text-xs"},Xt={key:1,class:"text-gray-500"},Zt={key:0,colspan:"2",class:"border-2 border-gray-700 p-3 text-center"},er={key:1,class:"text-red-400"},tr={key:2,class:"text-blue-400"},rr={key:0},sr={colspan:"2",class:"border-2 border-gray-700 p-3 text-center"},nr={key:1,class:"text-red-400"},ir={key:2,class:"text-blue-400"},or={__name:"RequirementDetailTableRow",props:{requirement:{type:Object},serial:{type:Number},isPrinting:{type:Boolean}},emits:["editClick","deleteClick","taskCreateClick"],setup(b,{emit:h}){const a=b,y=h,l=Ce(),g=k(""),d=te(()=>{var p,o,s;return((o=(p=a.requirement)==null?void 0:p.tasks)==null?void 0:o.length)>0?(s=a.requirement)==null?void 0:s.tasks:[{id:0}]});function m(){var p,o,s,t,r;if(l.user.role!=="super_admin"&&((p=l.user)==null?void 0:p.id)!==((s=(o=a.requirement)==null?void 0:o.to_department)==null?void 0:s.incharge_id))return alert(`You can't create or assign task for this requirement. 
Only ${(r=(t=a.requirement)==null?void 0:t.to_department)==null?void 0:r.name}'s In charge can create or assign.`);y("taskCreateClick",a.requirement)}const c=te(()=>{var p,o;return(((o=(p=a.requirement)==null?void 0:p.tasks)==null?void 0:o.length)||1)+(a.isPrinting?0:1)});return(p,o)=>{const s=Re("RouterLink");return n(),u(U,null,[(n(!0),u(U,null,ne(d.value,(t,r)=>{var _,x,S;return n(),u("tr",{key:t.id,class:"group/item border text-gray-800 py-4 shadow-sm mb-4 px-4 rounded-md hover:bg-blue-50"},[r===0?(n(),u(U,{key:0},[e("td",{class:"border-2 border-gray-700 p-3 align-baseline",rowspan:c.value},[e("div",null,[e("div",Lt,[C(ie,{"line-clamp":"3",class:"grow"},{default:T(()=>[A(w(b.requirement.title),1)]),btnText:T(({lineClampClass:D})=>[A(w(D?"More":"Less"),1)]),_:1}),b.requirement.priority?(n(),u("div",Vt,[e("span",{class:P(["font-semibold text-sm",{"text-yellow-600 ":b.requirement.priority=="IMPORTANT","text-red-700 ":b.requirement.priority=="URGENT"}])},w(b.requirement.priority),3)])):v("",!0)]),o[2]||(o[2]=e("hr",{class:"mb-4 -mx-4"},null,-1)),b.requirement.description?(n(),u("div",Ft,[o[1]||(o[1]=e("div",{class:"text-gray-400 mr-2 text-xs uppercase font-semibold"},"Description",-1)),C(ie,{"line-clamp":4,"class-name":{button:"group-hover/item:underline"}},{default:T(()=>[e("p",{innerHTML:b.requirement.description,class:"text-justify"},null,8,Pt)]),_:1})])):v("",!0)]),e("div",Ot,[b.requirement.supervisor?(n(),u("div",Mt,[e("div",Bt,[o[3]||(o[3]=e("div",{class:"text-gray-400 mr-2 text-xs uppercase font-semibold"},"Supervisor:",-1)),C(Me,{user:b.requirement.supervisor},null,8,["user"])])])):v("",!0),g.value!="loading"&&!((_=b.requirement)!=null&&_.status)||((S=(x=ee(l))==null?void 0:x.user)==null?void 0:S.role)=="super_admin"?(n(),u("div",zt,[e("button",{class:"btn-2",onClick:o[0]||(o[0]=R(D=>y("editClick",b.requirement),["prevent"]))},o[4]||(o[4]=[e("i",{class:"fas fa-edit"},null,-1),A("Edit ")]))])):v("",!0)])],8,jt),e("td",{class:"border-2 border-gray-700 p-3 whitespace-nowrap print:whitespace-break-spaces print:px-0",rowspan:c.value},[e("div",Ht,w(b.requirement.better_to_complete_on?new Date(b.requirement.better_to_complete_on).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",weekday:"short"}):""),1)],8,Gt)],64)):v("",!0),t.id?(n(),u(U,{key:1},[e("td",Wt,[C(s,{title:t.title,to:{name:"RequirementTaskShow",params:{id:t.id}},class:"hover:underline text-gray-900 hover:text-blue-600 whitespace-nowrap block",target:"_blank"},{default:T(()=>[A(w(t.id)+" ",1),e("i",{title:t.status,class:P(["ml-1",{"fad fa-exclamation-circle text-red-600":t.status=="PENDING","fad fa-exclamation-square text-yellow-600":t.status=="IN_PROGRESS","fad fa-check-circle text-green-600":t.status=="COMPLETED"}])},null,10,Qt)]),_:2},1032,["title","to"])]),e("td",Kt,[e("div",Jt,[t.deadline?(n(),u("div",Yt,w(new Date(t.deadline).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",weekday:"short"})),1)):(n(),u("div",Xt,"-"))])])],64)):(n(),u(U,{key:2},[b.isPrinting?(n(),u("td",Zt,[b.requirement.status=="approved"?(n(),u("button",{key:0,onClick:R(m,["prevent"]),class:"print:hidden border-2 border-transparent group-hover/item:bg-blue-200 hover:border-blue-700 text-blue-500 hover:text-white hover:!bg-blue-500 rounded-md px-4 py-1 whitespace-nowrap"},o[5]||(o[5]=[e("i",{class:"fas fa-plus-circle"},null,-1),A(" Create / Assign Task ")]))):b.requirement.status=="rejected"?(n(),u("div",er,"Task Rejected")):(n(),u("div",tr,"Approval Pending"))])):v("",!0)],64))])}),128)),b.isPrinting?v("",!0):(n(),u("tr",rr,[e("td",sr,[b.requirement.status=="approved"?(n(),u("button",{key:0,onClick:R(m,["prevent"]),class:"print:hidden border-2 border-transparent group-hover/item:bg-blue-200 hover:border-blue-700 text-blue-500 hover:text-white hover:!bg-blue-500 rounded-md px-4 py-1 whitespace-nowrap"},o[6]||(o[6]=[e("i",{class:"fas fa-plus-circle"},null,-1),A(" Create / Assign Task ")]))):b.requirement.status=="rejected"?(n(),u("div",nr,"Task Rejected")):(n(),u("div",ir,"Approval Pending"))])]))],64)}}},lr={class:"sticky top-0 pt-4 bg-white z-10"},ar={class:"mb-4"},ur={class:"mb-4"},dr={class:"sticky bottom-0 bg-white py-4 border-t -mx-6 px-6"},mr={key:0,class:"mb-4 text-red-500 font-medium"},pr={key:1,class:"mb-4"},cr={class:"flex items-center justify-between gap-4"},vr=["disabled"],br={__name:"RequirementFeedbackEditForm",props:{requirementId:{type:[Number,String],required:!0},requirementId:{type:[Number,String],required:!0}},emits:["update","closeClick","error"],setup(b,{emit:h}){const a=b,y=h,l=k(),g=k(null),d=k(""),m=k(),c=k({feedback:""});async function p(){var o,s;d.value="submitting";try{const t=await Ve(a.requirementId,c.value.feedback);y("update",t),d.value="create"}catch(t){d.value="error",m.value=((s=(o=t.response)==null?void 0:o.data)==null?void 0:s.message)||"Failed to update requirement requirement",y("error",m.value)}}return O(async()=>{var o,s,t,r;d.value="loading";try{await oe(a.requirementId),g.value=(o=(await oe(a.requirementId)).data)==null?void 0:o.requirement,c.value={feedback:(s=g.value)==null?void 0:s.feedback}}catch(_){m.value=((r=(t=_.response)==null?void 0:t.data)==null?void 0:r.message)||"Failed to fetch requirement requirement"}finally{d.value=""}}),(o,s)=>{var t;return n(),u("div",{ref_key:"formContainerRef",ref:l,class:"max-h-[90vh] w-full mx-auto overflow-auto bg-white shadow-lg rounded-lg p-6 pb-0 pt-0 relative"},[e("div",lr,[s[3]||(s[3]=e("h2",{class:"text-2xl font-semibold text-gray-800"},"Requirement Feedback",-1)),s[4]||(s[4]=e("hr",{class:"mb-4"},null,-1)),e("div",{class:"text-purple-600/80 mb-4 text-xs border-b border-dashed",onClick:s[0]||(s[0]=R(r=>y("ok"),["prevent"]))}," Fields that must be filled in will be marked with an asterisk. ")]),e("form",{onSubmit:R(p,["prevent"]),class:"z-0"},[d.value!=="loading"?(n(),u(U,{key:0},[e("div",ar,[s[5]||(s[5]=e("label",{class:"block text-gray-600 text-sm font-medium"},"Title ",-1)),C(ie,{"line-clamp":"1",className:{paragraph:"whitespace-pre-wrap text-justify ",button:"mt-0"}},{default:T(()=>{var r;return[A(w((r=g.value)==null?void 0:r.title),1)]}),_:1})]),e("div",ur,[s[6]||(s[6]=e("label",{class:"block text-gray-600 text-sm mb-1 font-medium"},"Feedback",-1)),j(e("textarea",{rows:"5","onUpdate:modelValue":s[1]||(s[1]=r=>c.value.feedback=r),placeholder:"Enter requirement feedback",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[V,c.value.feedback]])])],64)):v("",!0),e("div",dr,[m.value?(n(),u("div",mr,w(m.value),1)):v("",!0),m.value?(n(),u("hr",pr)):v("",!0),e("div",cr,[e("button",{type:"button",onClick:s[2]||(s[2]=R(r=>y("closeClick"),["prevent"])),class:"btn-3"},"Cancel"),e("button",{disabled:d.value=="loading"||d.value=="submitting",type:"submit",class:"btn-2"},w(d.value=="submitting"?"Saving...":(t=g.value)!=null&&t.feedback?"Update Feedback":"Add Feedback"),9,vr)])])],32),d.value==="loading"||d.value==="submitting"?(n(),N(se,{key:0,class:"z-20 absolute inset-0 flex items-center justify-center bg-opacity-30"})):v("",!0)],512)}}},fr={class:"flex justify-center items-center"},yr={class:"modal-card"},gr=["required"],xr={class:"flex"},kr={class:"flex justify-between gap-2 mt-4"},_r=["disabled"],wr=["disabled"],qr={__name:"RequirementSubmissionHandler",props:{requirementId:{type:[String,Number],required:!0}},emits:["loading","success","error"],setup(b,{emit:h}){const a=b,y=h,l=k(255),g=te(()=>l.value-o.value.length),d=Ae(),m=k(null),c=k(null),p=k(null),o=k(""),s=k(!1),t=te(()=>p.value!==null);function r(f){p.value=f,o.value="",D()}function _(){p.value=null,o.value=""}async function x(){var f,q;if(p.value==="reject"&&!o.value)return d.error("Rejection Reason is required!");if(typeof a.onSubmit=="function")return a.onSubmit({note:o.value,action:p.value});y("loading",!0),s.value=!0;try{await Fe(a.requirementId,{note:o.value}),y("success"),_()}catch(I){return y("error",I),d.error(((q=(f=I==null?void 0:I.response)==null?void 0:f.data)==null?void 0:q.message)||"Submission failed!")}finally{y("loading",!1),s.value=!1}}function S(f){var q,I;t.value&&(f.key==="ArrowLeft"?(q=c.value)==null||q.focus():f.key==="ArrowRight"&&((I=m.value)==null||I.focus()))}function D(){Ee(()=>{var f;(f=m.value)==null||f.focus()})}return O(()=>{window.addEventListener("keydown",S)}),Se(()=>{window.removeEventListener("keydown",S)}),(f,q)=>(n(),u("div",null,[e("div",fr,[e("button",{onClick:q[0]||(q[0]=I=>r("accept"))},q[3]||(q[3]=[e("span",{class:"btn-2"},[e("span",{class:"fas fa-paper-plane"}),e("span",{class:"hidden md:inline"},"Submit Requirement")],-1)]))]),t.value?(n(),u("div",{key:0,class:"fixed inset-0 z-50 flex justify-center items-center bg-black/50",onClick:R(_,["self"])},[e("div",yr,[q[4]||(q[4]=e("h3",{class:"title-lg"},"Requirement Submission",-1)),e("div",null,[j(e("textarea",{"onUpdate:modelValue":q[1]||(q[1]=I=>o.value=I),rows:"4",placeholder:"Note...",class:"w-full border rounded-lg p-2 text-gray-700",required:p.value==="reject",onInput:q[2]||(q[2]=I=>o.value.length>l.value?o.value=o.value.slice(0,l.value):null)},null,40,gr),[[V,o.value]]),e("div",xr,[e("div",{class:P(["ml-auto inline-block text-sm text-gray-500",o.value.length>=l.value?"text-red-500":""])}," left "+w(g.value)+"/"+w(l.value)+" words ",3)])]),e("div",kr,[e("button",{ref_key:"cancelBtnRef",ref:c,class:"btn-3 focus:ring-2 ring-offset-2 disabled:opacity-30",onClick:_,disabled:s.value}," Cancel ",8,_r),e("button",{ref_key:"confirmBtnRef",ref:m,class:P(["focus:ring-2 ring-offset-2 disabled:opacity-30",p.value==="reject"?"btn-2-red":"btn-2-green"]),onClick:x,disabled:s.value}," Confirm Submission ",10,wr)])])])):v("",!0)]))}},hr={class:"flex items-center gap-6 justify-center my-16"},$r={key:0,class:"border rounded-md"},Cr={__name:"RequirementTaskCreateOrAssign",props:{fromDepartmentId:{type:Number},requirement:{type:Object}},emits:["addNewTaskClick","cancelClick","assignTask"],setup(b,{emit:h}){const a=b,y=h,l=Be(),g=k(""),d=k(null),m=k(""),c=k(!1);async function p(){await l.setTaskRequirement(m.value,a.requirement.id),y("assignTask")}return(o,s)=>(n(),u("div",{class:P(["text-left p-4",[g.value&&!d.value?"min-h-[400px]":""]])},[e("div",hr,[e("button",{onClick:s[0]||(s[0]=R(t=>y("addNewTaskClick"),["prevent"])),class:"btn-3"},"Add New Task"),s[5]||(s[5]=e("span",null,"or",-1)),e("button",{class:P({"btn-3":g.value!=="direct-assign","btn-2":g.value=="direct-assign"}),onClick:s[1]||(s[1]=R(()=>g.value="direct-assign",["prevent"]))}," Assign Task ",2)]),g.value&&!d.value?(n(),u("div",$r,[e("form",{onSubmit:R(p,["prevent"]),class:"p-4 flex items-end"},[C(ze,{class:"flex-grow mr-4 h-12",taskId:m.value,"onUpdate:taskId":s[2]||(s[2]=t=>m.value=t),show:c.value,"onUpdate:show":s[3]||(s[3]=t=>c.value=t),isOnlyMyTask:!1,taskQueryParams:{"from-department-id":b.fromDepartmentId},filterTasks:t=>!t.requirement_id,onAddNewTaskClick:s[4]||(s[4]=t=>y("addNewTaskClick")),showAddBtnIfNotFound:!0},null,8,["taskId","show","taskQueryParams","filterTasks"]),s[6]||(s[6]=e("div",{class:"flex justify-center"},[e("button",{class:"btn-2 h-12 rounded-md"},"Save")],-1))],32)])):v("",!0)],2))}},Rr={class:"flex flex-col items-center gax-x-1 justify-between pt-16"},Sr={key:0},Tr={key:1},Ir={class:"text-base text-gray-900 font-semibold"},Dr={class:"ml-2"},Nr={key:0,class:"text-green-600 ml-2"},Ar={key:1,class:"ml-2 text-yellow-700"},he={__name:"RequirementApprovalItem",props:{requirement:{type:Object,required:!0},approvalType:{type:String,required:!0}},emits:["updateApproval"],setup(b,{emit:h}){const a=b,y=h,l=Ce(),g=te(()=>{var t,r,_,x,S,D,f,q,I,E,i,F,L,M,B,z,G,H,W,Q,K,J;let m=null,c=null,p=null,o="",s=!1;return a.approvalType==="from_in_charge"&&(m=(t=a.requirement)==null?void 0:t.from_department,c=(_=(r=a.requirement)==null?void 0:r.from_department)==null?void 0:_.in_charge,p=(S=(x=a.requirement)==null?void 0:x.from_department)==null?void 0:S.in_charge,o="In Charge",s=!!((D=a.requirement)!=null&&D.status&&((f=a.requirement)!=null&&f.submission_date))),a.approvalType==="from_coordinator"&&(m=(q=a.requirement)==null?void 0:q.from_department,c=(E=(I=a.requirement)==null?void 0:I.from_department)==null?void 0:E.coordinator,p=(i=a.requirement)==null?void 0:i.from_coordinator,s=!!((F=a.requirement)!=null&&F.from_coordinator),o="Coordinator"),a.approvalType==="to_in_charge"&&(m=(L=a.requirement)==null?void 0:L.to_department,c=(B=(M=a.requirement)==null?void 0:M.to_department)==null?void 0:B.in_charge,p=(z=a.requirement)==null?void 0:z.to_in_charge,s=!!((G=a.requirement)!=null&&G.to_incharge),o="In Charge"),a.approvalType==="to_coordinator"&&(m=(H=a.requirement)==null?void 0:H.to_department,c=(Q=(W=a.requirement)==null?void 0:W.to_department)==null?void 0:Q.coordinator,p=(K=a.requirement)==null?void 0:K.to_coordinator,s=!!((J=a.requirement)!=null&&J.to_coordinator),o="Coordinator"),{department:m,department_user:c,approval_user:p,userType:o,approved:s}});function d(){y("updateApproval")}return(m,c)=>{var p,o,s,t,r,_,x,S;return n(),u("div",Rr,[g.value.department_user?(n(),u("div",Sr,[C(re,{user:g.value.department_user,"avatar-size":"xsmall"},null,8,["user"])])):(n(),u("div",Tr,c[0]||(c[0]=[e("span",{class:"italic text-xs text-gray-400"},"N/A",-1)]))),c[2]||(c[2]=e("hr",{class:"my-2 border-gray-600 w-64"},null,-1)),e("div",Ir,[e("span",null,w(((p=g.value.department)==null?void 0:p.short_name)||((o=g.value.department)==null?void 0:o.name)),1),e("span",Dr,w(g.value.userType),1),g.value.department_user?(n(),u(U,{key:0},[g.value.approved||((s=a.requirement)==null?void 0:s.status)==="approved"?(n(),u("span",Nr,"(✔)")):(n(),u("span",Ar,c[1]||(c[1]=[e("i",{class:"fad fa-spinner"},null,-1)])))],64)):v("",!0),((t=a.requirement)==null?void 0:t.status)!=="approved"&&g.value.department_user&&!g.value.approved&&((r=ee(l).user)==null?void 0:r.id)==((x=(_=g.value)==null?void 0:_.department_user)==null?void 0:x.id)?(n(),N(He,{key:1,class:"ml-auto z-[5000000]",notificationType:"pending-requirements",applicationId:(S=a.requirement)==null?void 0:S.id,onSuccess:d,variant:1},null,8,["applicationId"])):v("",!0)])])}}},Er={class:"container mx-auto p-6 print:p-0 w-full print:max-w-full"},Ur={class:"bg-white rounded shadow print:shadow-none p-4 print:p-0 relative mb-6 print:mb-0"},jr={class:"flex items-start"},Lr={class:"mb-4 text-lg print:black print:font-bold"},Vr={class:"ml-auto print:hidden flex gap-2 items-center"},Fr={class:"mb-4 flex items-center gap-1 print:mb-1"},Pr={class:"font-bold print:text-gray-900"},Or={class:"mb-3 flex items-center gap-3 print:mb-1"},Mr={class:"print:text-gray-900"},Br={key:0,class:"mb-3 flex items-center gap-3 print:mb-1"},zr={class:"flex items-center gap-2 print:text-gray-900 flex-wrap"},Gr={key:1,class:"mb-3 flex items-center gap-3 print:mb-1"},Hr={class:"print:text-gray-900"},Wr={key:0,class:"overflow-x-auto print:overflow-visible"},Qr={class:"w-full table-auto print:table-fixed"},Kr={colspan:"2",class:"w-[30%] border-2 border-gray-800 text-center text-gray-800 print:text-black text-base font-semibold whitespace-nowrap px-3 py-1 print:whitespace-normal"},Jr={class:""},Yr={class:"p-3 border-2 border-gray-800",colspan:"5"},Xr={class:"font-semibold text-gray-500 print:text-gray-800 text-sm mb-1"},Zr={key:0},es=["innerHTML"],ts={key:1,class:"mt-8 border rounded-md p-8 flex items-start justify-between bg-gray-50 print:hidden"},rs={class:"flex flex-col items-end"},ss={key:2,class:"mt-4 mb-8 break-before-avoid-page"},ns={class:"whitespace-nowrap border-gray-200 grid grid-cols-2 items-center"},is={key:0,class:"whitespace-nowrap border-gray-200 grid grid-cols-2 gap-2 items-center"},Is={__name:"RequirementShow",setup(b){const h=Ue(),a=je(),y=k(""),l=k(null),g=X({open:!1}),d=X({detail:null,open:!1}),m=X({detail:null,open:!1}),c=X({detail:null,open:!1}),p=k(!1),o=()=>p.value=!0,s=()=>p.value=!1;O(async()=>{await t(),window.addEventListener("beforeprint",o),window.addEventListener("afterprint",s)}),Se(()=>{window.removeEventListener("beforeprint",o),window.removeEventListener("afterprint",s)});async function t(){var E;y.value="loading",l.value=(E=(await oe(h.params.id)).data)==null?void 0:E.requirement,y.value=""}function r(){var E,i,F,L;console.log({requirement:l}),f.modalShown=!0,f.from_department_id=l.value.from_department_id,f.to_department_id=l.value.to_department_id,f.taskDefaultValues={title:"",description:"",from_department_id:l.value.from_department_id,to_department_id:l.value.to_department_id,is_important:((E=l.value)==null?void 0:E.priority)=="IMPORTANT",is_urgent:((i=l.value)==null?void 0:i.priority)=="URGENT",supervisor_ids:(F=l.value)!=null&&F.supervisor_id?[(L=l.value)==null?void 0:L.supervisor_id]:[]},f.requirement=l.value}function _(){g.open=!0}function x(E){d.open=!0,d.detail=E}function S(E){c.open=!0,c.detail=E}function D(){setTimeout(()=>window.print()),p.value=!0}const f=X({modalShown:!1,requirementId:0,taskDefaultValues:{},requirement:null,creating:!1});async function q(){f.modalShown=!1,f.requirement=null,y.value="loading",I(),await t()}async function I(){f.modalShown=!1,f.requirement=null,f.creating=!1}return(E,i)=>{var L,M,B,z,G,H,W,Q,K,J,ae,ue,de,me,pe,ce,ve,be,fe,ye,ge,xe,ke,_e,we,qe;const F=Re("RouterLink");return n(),u("div",Er,[g.open?(n(),N(Z,{key:0,class:"*:max-w-4xl"},{default:T(()=>[C(at,{requirementId:l.value.id,onCloseClick:i[0]||(i[0]=$=>g.open=!1),onCreate:i[1]||(i[1]=async()=>{g.open=!1,await t()})},null,8,["requirementId"])]),_:1})):v("",!0),d.open?(n(),N(Z,{key:1},{default:T(()=>{var $;return[C(Ut,{requirementId:l.value.id,detailId:($=d.requirement.value)==null?void 0:$.id,onCloseClick:i[2]||(i[2]=Y=>d.open=!1),onUpdate:i[3]||(i[3]=async()=>{d.open=!1,await t()})},null,8,["requirementId","detailId"])]}),_:1})):v("",!0),m.open?(n(),N(Z,{key:2},{default:T(()=>{var $;return[C(br,{requirementId:l.value.id,detailId:($=m.requirement.value)==null?void 0:$.id,onCloseClick:i[4]||(i[4]=Y=>m.open=!1),onUpdate:i[5]||(i[5]=async()=>{m.open=!1,await t()})},null,8,["requirementId","detailId"])]}),_:1})):v("",!0),c.open?(n(),N(Z,{key:3},{default:T(()=>{var $;return[C(kt,{requirementId:l.value.id,detailId:($=c.requirement.value)==null?void 0:$.id,onCloseClick:i[6]||(i[6]=Y=>c.open=!1),onDelete:i[7]||(i[7]=async()=>{c.open=!1,await t()})},null,8,["requirementId","detailId"])]}),_:1})):v("",!0),f.modalShown?(n(),N(Z,{key:4,class:"*:relative"},{default:T(()=>{var $,Y;return[e("button",{onClick:R(I,["prevent"]),class:"absolute right-3 top-2 text-xl text-red-500 hover:text-red-400"},i[13]||(i[13]=[e("i",{class:"fas fa-times-circle"},null,-1)])),f!=null&&f.creating?v("",!0):(n(),N(Cr,{key:0,"from-department-id":($=l.value)==null?void 0:$.from_department_id,requirement:f==null?void 0:f.requirement,onCancelClick:I,onAddNewTaskClick:i[8]||(i[8]=()=>{f.modalShown=!0,f.creating=!0}),onAssignTask:q},null,8,["from-department-id","requirement"])),f!=null&&f.creating?(n(),N(Ge,{key:1,requirementDetailId:(Y=f==null?void 0:f.requirement.value)==null?void 0:Y.id,requirementId:l.value.id,onClose:I,onTaskCreated:q,defaultValues:f.taskDefaultValues,readonlyFields:{from_department_id:!0,to_department_id:!0}},null,8,["requirementDetailId","requirementId","defaultValues"])):v("",!0)]}),_:1})):v("",!0),e("div",Ur,[e("div",jr,[e("div",Lr,[i[14]||(i[14]=e("div",{class:"text-gray-800 leading-none"},"To",-1)),e("div",null,w((M=(L=l.value)==null?void 0:L.to_department)==null?void 0:M.name),1)]),e("div",Vr,[e("button",{class:"btn-3 font-semibold !pl-2 !pr-4",onClick:R(D,["prevent"])},i[15]||(i[15]=[e("i",{class:"fad fa-print text-xl"},null,-1),A("Print ")])),e("button",{class:"btn-3",onClick:i[9]||(i[9]=R(()=>ee(a).back(),["prevent"]))},"Back"),C(F,{class:"btn-2",to:`/requirements/edit/${(B=l.value)==null?void 0:B.id}`},{default:T(()=>i[16]||(i[16]=[A("Edit")])),_:1,__:[16]},8,["to"])])]),i[29]||(i[29]=e("div",{class:"text-center text-xl font-bold mb-2 underline"},"Requirement Form",-1)),e("div",Fr,[i[17]||(i[17]=e("div",{class:"text-gray-500 text-sm"},"Requirement ID:",-1)),e("div",Pr,w((z=l.value)==null?void 0:z.id),1)]),e("div",Or,[i[18]||(i[18]=e("div",{class:"text-gray-500 text-sm"},"From",-1)),e("div",Mr,w((H=(G=l.value)==null?void 0:G.from_department)==null?void 0:H.name),1)]),((Q=(W=l.value)==null?void 0:W.website_tags)==null?void 0:Q.length)>0?(n(),u("div",Br,[i[19]||(i[19]=e("div",{class:"text-gray-500 text-sm"},"Website",-1)),e("div",zr,[(n(!0),u(U,null,ne(((K=l.value)==null?void 0:K.website_tags)||[],$=>(n(),u("div",{key:$.id,class:"border px-2 rounded-md bg-gray-50 shadow-sm whitespace-nowrap"},w($.name),1))),128))])])):v("",!0),(J=l.value)!=null&&J.submission_date?(n(),u("div",Gr,[i[20]||(i[20]=e("div",{class:"text-gray-500 text-sm"},"Submission Date",-1)),e("div",Hr,w(new Date((ae=l.value)==null?void 0:ae.submission_date).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})),1)])):v("",!0),i[30]||(i[30]=e("hr",{class:"mb-4"},null,-1)),e("div",null,[i[28]||(i[28]=e("div",{class:"flex items-end mb-3"},[e("h2",{class:"text-xl font-semibold"},"Requirements"),e("div",{class:"ml-auto print:hidden flex gap-2 text-sm"})],-1)),l.value?(n(),u("div",Wr,[e("table",Qr,[e("thead",null,[e("tr",null,[i[21]||(i[21]=e("th",{rowspan:"2",class:"border-2 border-gray-800 text-center text-gray-800 print:text-black text-base font-semibold whitespace-nowrap print:whitespace-normal w-[65%]"}," Requirement Details ",-1)),i[22]||(i[22]=e("th",{rowspan:"2",class:"border-2 border-gray-800 text-center text-gray-800 print:text-black text-base px-3 font-semibold whitespace-nowrap print:whitespace-normal print:p-0 w-[15%]"}," Better To Complete ",-1)),e("th",Kr," For '"+w(((de=(ue=l.value)==null?void 0:ue.to_department)==null?void 0:de.short_name)||((pe=(me=l.value)==null?void 0:me.to_department)==null?void 0:pe.name))+"' Use ",1)]),i[23]||(i[23]=e("tr",null,[e("td",{class:"whitespace-nowrap border-2 border-gray-800 text-center text-gray-800 print:text-black text-sm font-semibold print:text-xs"}," Task No "),e("td",{class:"border-2 border-gray-800 text-center text-gray-800 print:text-black text-sm font-semibold whitespace-nowrap p-3 print:text-xs print:p-0"}," Expected Date ")],-1))]),e("tbody",null,[C(or,{requirement:l.value,serial:E.index+1,onEditClick:x,onDeleteClick:S,onTaskCreateClick:r,isPrinting:p.value},null,8,["requirement","serial","isPrinting"]),e("tr",Jr,[e("td",Yr,[e("div",Xr," '"+w(((ve=(ce=l.value)==null?void 0:ce.to_department)==null?void 0:ve.short_name)||((fe=(be=l.value)==null?void 0:be.to_department)==null?void 0:fe.name))+"' Feedback ",1),y.value!="loading"&&((ye=l.value)!=null&&ye.status)?(n(),u("div",Zr,[(ge=l.value)!=null&&ge.feedback?(n(),N(ie,{key:0,lineClamp:"2",className:{button:"  underline"},class:"mb-4 print:mb-0"},{default:T(()=>{var $;return[e("p",{class:"text-sky-800 text-sm text-justify",innerHTML:($=l.value)==null?void 0:$.feedback},null,8,es)]}),_:1})):v("",!0),e("div",null,[e("button",{class:"btn-3 print:hidden",onClick:i[10]||(i[10]=R(()=>{m.open=!0,m.requirement=l.value},["prevent"]))},w(l.value.feedback?"Update Feedback":"Add feedback"),1)])])):v("",!0)])])])])])):v("",!0),y.value!="loading"&&!((xe=l.value)!=null&&xe.status)?(n(),u("div",ts,[e("button",{class:"btn-2 pl-2 text-base",onClick:R(_,["prevent"])},i[24]||(i[24]=[e("i",{class:"fad fa-plus-circle text-2xl mr-2"},null,-1),A("Add Requirement ")])),e("div",rs,[C(qr,{"requirement-id":(ke=l.value)==null?void 0:ke.id,onSuccess:t},{heading:T(()=>i[25]||(i[25]=[A(" Requirement Submission ")])),acceptButtonLabel:T(()=>i[26]||(i[26]=[e("span",{class:"btn-2 pl-2 text-base"},[e("i",{class:"fad fa-paper-plane text-lg mr-2"}),A("Submit Requirement ")],-1)])),submitButtonLabel:T(()=>i[27]||(i[27]=[A(" Submit Requirement ")])),_:1},8,["requirement-id"])])])):v("",!0),(_e=l.value)!=null&&_e.status?(n(),u("div",ss,[e("div",ns,[(n(),u(U,null,ne(["from_in_charge","from_coordinator"],$=>C(he,{key:$,requirement:l.value,"approval-type":$,onUpdateApproval:i[11]||(i[11]=()=>t())},null,8,["requirement","approval-type"])),64))]),((we=l.value)==null?void 0:we.from_department_id)!==((qe=l.value)==null?void 0:qe.to_department_id)?(n(),u("div",is,[(n(),u(U,null,ne(["to_in_charge","to_coordinator"],$=>C(he,{key:$,requirement:l.value,"approval-type":$,onUpdateApproval:i[12]||(i[12]=()=>t())},null,8,["requirement","approval-type"])),64))])):v("",!0)])):v("",!0)]),y.value==="loading"?(n(),N(se,{key:2,class:"absolute inset-0 bg-opacity-90"})):v("",!0)]),C(Le)])}}};export{Is as default};
