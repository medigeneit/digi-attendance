import{L as c}from"./LoaderView-Acn8-skR.js";import{_ as R}from"./FlexibleDatePicker-CyhzinSz.js";import{u as B}from"./leave-application-ByI3XDUn.js";import{u as T,r as M,x as D,q as Y,p as F,c as d,o as l,a as s,d as n,l as g,m as $,j as v,b as h,t as r,F as V,e as j,s as w}from"./index-DlLm7Q3j.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const H={class:"px-4 py-4 max-w-full mx-auto space-y-4"},W={class:"flex flex-wrap items-center justify-between gap-3"},q={class:"flex gap-3"},z={key:0,class:"flex justify-center py-10"},E={key:1},G={key:0,class:"flex justify-center"},U={class:"max-w-md w-full bg-white rounded-lg border border-dashed border-gray-300 p-6 text-center space-y-3 shadow-sm"},I={key:1,class:"hidden md:block"},J={class:"overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm"},K={class:"flex items-center justify-between px-4 py-3 border-b border-gray-100 text-sm text-gray-600"},O={key:0,class:"text-xs text-gray-400"},Q={class:"overflow-x-auto"},X={class:"min-w-full table-auto text-sm"},Z={class:"px-3 py-2 align-top"},i={class:"px-3 py-2 align-top"},p={class:"px-3 py-2 align-top"},ee={class:"px-3 py-2 align-top"},se={class:"px-3 py-2 align-top"},te={class:"font-medium"},re={class:"text-xs text-gray-500 ml-1"},de={class:"px-3 py-2 align-top"},le={class:"px-3 py-2 align-top"},oe={class:"px-3 py-2 text-center align-top"},ne=["href"],ue={key:1,class:"text-xs text-gray-400"},xe={class:"px-3 py-2 align-top"},ye={class:"flex gap-2"},me=["onClick"],fe={class:"space-y-3 md:hidden"},ge={class:"flex items-start justify-between gap-2"},_e={class:"text-xs text-gray-400"},ae={class:"text-sm font-semibold text-gray-800"},be={class:"grid grid-cols-2 gap-2 text-xs text-gray-600"},ve={class:"font-medium"},he={class:"font-medium"},we={class:"font-medium"},ke={class:"font-medium"},Ae={class:"flex items-center justify-between pt-2 border-t border-gray-100"},Le=["href"],Ce={key:1,class:"text-[11px] text-gray-400"},De={class:"flex gap-2"},Ve=["onClick"],Be={__name:"MyLeaveApplications",setup(je){const S=T(),y=B(),k=new Date,_=M({year:k.getFullYear(),month:1,day:1}),a=D(()=>{var o;return((o=_.value)==null?void 0:o.year)??k.getFullYear()});Y(a,o=>{y.fetchMyLeaveApplications({year:o?String(o):null})},{immediate:!0});const N=()=>{S.go(-1)},m=D(()=>y.leaveApplications||[]),u=o=>o?new Date(o).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):"—",A=o=>{switch(o){case"Approved":return"bg-green-100 text-green-700 border border-green-200";case"Rejected":return"bg-red-100 text-red-700 border border-red-200";case"Pending":default:return"bg-yellow-100 text-yellow-700 border border-yellow-200"}};function L(o){confirm("Are you sure you want to delete this leave application?")&&y.deleteLeaveApplication(o)}return(o,t)=>{var C;const f=F("RouterLink");return l(),d("div",H,[s("div",W,[s("button",{class:"btn-3 flex items-center gap-2",onClick:N},t[1]||(t[1]=[s("i",{class:"far fa-arrow-left"},null,-1),s("span",{class:"hidden md:inline"},"Back",-1)])),t[3]||(t[3]=s("div",{class:"flex-1 text-center"},[s("h1",{class:"title-md md:title-lg"},"My Leave Applications")],-1)),s("div",q,[n(R,{modelValue:_.value,"onUpdate:modelValue":t[0]||(t[0]=e=>_.value=e),"show-year":!0,"show-month":!1,"show-date":!1},null,8,["modelValue"]),n(f,{to:{name:"LeaveApplicationAdd"},class:"btn-2 flex items-center gap-2"},{default:g(()=>t[2]||(t[2]=[s("i",{class:"far fa-paper-plane"},null,-1),s("span",null,"Apply for Leave",-1)])),_:1,__:[2]})])]),(C=$(y))!=null&&C.loading?(l(),d("div",z,[n(c)])):(l(),d("div",E,[m.value.length===0?(l(),d("div",G,[s("div",U,[t[5]||(t[5]=s("div",{class:"text-3xl mb-2"},"РY~п",-1)),t[6]||(t[6]=s("h2",{class:"font-semibold text-gray-700"},"No leave applications yet",-1)),t[7]||(t[7]=s("p",{class:"text-sm text-gray-500"}," You havenѓ?Tt submitted any leave application. Click below to apply for leave. ",-1)),n(f,{to:{name:"LeaveApplicationAdd"},class:"btn-2 inline-flex items-center gap-2 mt-2"},{default:g(()=>t[4]||(t[4]=[s("i",{class:"far fa-paper-plane"},null,-1),s("span",null,"Apply for Leave",-1)])),_:1,__:[4]})])])):(l(),d("div",I,[s("div",J,[s("div",K,[s("span",null,[t[8]||(t[8]=h("Total Applications: ")),s("strong",null,r(m.value.length),1)]),a.value?(l(),d("span",O,[t[9]||(t[9]=h(" Showing for year: ")),s("strong",null,r(a.value),1)])):v("",!0)]),s("div",Q,[s("table",X,[t[13]||(t[13]=s("thead",{class:"bg-gray-50"},[s("tr",null,[s("th",{class:"px-3 py-2 text-left font-semibold text-gray-600"},"#"),s("th",{class:"px-3 py-2 text-left font-semibold text-gray-600"},"Created Date"),s("th",{class:"px-3 py-2 text-left font-semibold text-gray-600"},"Last Working Date"),s("th",{class:"px-3 py-2 text-left font-semibold text-gray-600"},"Resumption Date"),s("th",{class:"px-3 py-2 text-left font-semibold text-gray-600"},"Total Days"),s("th",{class:"px-3 py-2 text-left font-semibold text-gray-600"},"Leave Types"),s("th",{class:"px-3 py-2 text-left font-semibold text-gray-600"},"Handover"),s("th",{class:"px-3 py-2 text-center font-semibold text-gray-600"},"Attachment"),s("th",{class:"px-3 py-2 text-left font-semibold text-gray-600"},"Status"),s("th",{class:"px-3 py-2 text-left font-semibold text-gray-600"},"Action")])],-1)),s("tbody",null,[(l(!0),d(V,null,j(m.value,(e,b)=>{var x;return l(),d("tr",{key:e==null?void 0:e.id,class:"border-t border-gray-100 hover:bg-blue-50 transition-colors"},[s("td",Z,r(b+1),1),s("td",i,r(u(e==null?void 0:e.created_at)),1),s("td",p,r(u(e==null?void 0:e.last_working_date)),1),s("td",ee,r(u(e==null?void 0:e.resumption_date)),1),s("td",se,[s("span",te,r(e==null?void 0:e.total_leave_days),1),s("span",re,"("+r(e==null?void 0:e.leave_period)+")",1)]),s("td",de,r(e.application_types),1),s("td",le,r(((x=e==null?void 0:e.handover_user)==null?void 0:x.name)||"N/A"),1),s("td",oe,[e.attachment?(l(),d("a",{key:0,href:e==null?void 0:e.attachment,target:"_blank",class:"inline-flex items-center justify-center text-blue-600 hover:text-blue-800 underline"},t[10]||(t[10]=[s("i",{class:"fad fa-link mr-1"},null,-1),s("span",{class:"text-xs"},"View",-1)]),8,ne)):(l(),d("span",ue,"—"))]),s("td",xe,[s("span",{class:w(["inline-flex items-center px-2 py-1 rounded-full text-xs font-medium",A((e==null?void 0:e.status)||"Pending")])},[s("span",{class:w(["w-1.5 h-1.5 rounded-full mr-1.5",{"bg-green-500":(e==null?void 0:e.status)==="Approved","bg-red-500":(e==null?void 0:e.status)==="Rejected","bg-yellow-400":!(e!=null&&e.status)||(e==null?void 0:e.status)==="Pending"}])},null,2),h(" "+r((e==null?void 0:e.status)||"Pending"),1)],2)]),s("td",null,[s("div",ye,[n(f,{to:{name:"MyLeaveApplicationShow",params:{id:e==null?void 0:e.id}},class:"btn-icon",title:"View details"},{default:g(()=>t[11]||(t[11]=[s("i",{class:"far fa-eye"},null,-1)])),_:2,__:[11]},1032,["to"]),e.status=="Pending"||!e.status?(l(),d("button",{key:0,type:"button",onClick:P=>L(e==null?void 0:e.id),class:"btn-icon",title:"Delete application"},t[12]||(t[12]=[s("i",{class:"far fa-trash text-red-600"},null,-1)]),8,me)):v("",!0)])])])}),128))])])])])])),s("div",fe,[(l(!0),d(V,null,j(m.value,(e,b)=>{var x;return l(),d("div",{key:e==null?void 0:e.id,class:"bg-white border border-gray-200 rounded-lg p-3 shadow-sm space-y-2"},[s("div",ge,[s("div",null,[s("p",_e,"Application #"+r(b+1),1),s("p",ae,r(e.application_types||"Leave Application"),1)]),s("span",{class:w(["inline-flex items-center px-2 py-1 rounded-full text-[10px] font-medium",A((e==null?void 0:e.status)||"Pending")])},r((e==null?void 0:e.status)||"Pending"),3)]),s("div",be,[s("div",null,[t[14]||(t[14]=s("p",{class:"text-gray-400"},"Last Working",-1)),s("p",ve,r(u(e==null?void 0:e.last_working_date)),1)]),s("div",null,[t[15]||(t[15]=s("p",{class:"text-gray-400"},"Resumption",-1)),s("p",he,r(u(e==null?void 0:e.resumption_date)),1)]),s("div",null,[t[16]||(t[16]=s("p",{class:"text-gray-400"},"Total Days",-1)),s("p",we,r(e==null?void 0:e.total_leave_days)+" "+r(e==null?void 0:e.leave_period),1)]),s("div",null,[t[17]||(t[17]=s("p",{class:"text-gray-400"},"Handover",-1)),s("p",ke,r(((x=e==null?void 0:e.handover_user)==null?void 0:x.name)||"N/A"),1)])]),s("div",Ae,[s("div",null,[e.attachment?(l(),d("a",{key:0,href:e==null?void 0:e.attachment,target:"_blank",class:"inline-flex items-center text-xs text-blue-600 hover:text-blue-800 underline"},t[18]||(t[18]=[s("i",{class:"fad fa-link mr-1"},null,-1),s("span",null,"View Attachment",-1)]),8,Le)):(l(),d("span",Ce,"No attachment"))]),s("div",De,[n(f,{to:{name:"MyLeaveApplicationShow",params:{id:e==null?void 0:e.id}},class:"btn-icon"},{default:g(()=>t[19]||(t[19]=[s("i",{class:"far fa-eye"},null,-1)])),_:2,__:[19]},1032,["to"]),e.status=="Pending"||!e.status?(l(),d("button",{key:0,type:"button",onClick:P=>L(e==null?void 0:e.id),class:"btn-icon"},t[20]||(t[20]=[s("i",{class:"far fa-trash text-red-600"},null,-1)]),8,Ve)):v("",!0)])])])}),128))])]))])}}};export{Be as default};
