import{u as U,b as N,r as p,s as h,e as M,A as m,c as o,o as d,a as t,g,C as k,F as w,x as S,t as n,h as b,i as P,l as C,v as T,Q as E,y as F}from"./index-CYZ0Clfd.js";import{L as W}from"./LoaderView-CscxvrqU.js";import{_ as j}from"./MultiselectDropdown-CX3LRzUo.js";import{u as z}from"./attendance-Puf2Gb6z.js";import{u as K}from"./company-CVCEd1Pi.js";import{S as O}from"./sweetalert2.esm.all-BKGx94Is.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vue-multiselect.esm-DzUg0G5O.js";const Q={class:"space-y-2 px-4"},$={class:"flex flex-wrap items-center gap-2"},G=["value"],H={key:0,class:"text-center py-4"},I={key:1,class:"space-y-4"},J={key:0,class:"overflow-x-auto"},X={class:"min-w-full table-auto border-collapse border border-gray-200 bg-white rounded-md text-sm"},Y={class:"border border-gray-300 px-2"},Z={class:"border border-gray-300 px-2"},ee={class:"border border-gray-300 px-2"},te={class:"border border-gray-300 px-2"},ae={class:"border border-gray-300 px-2"},se={class:"border border-gray-300 px-2"},le={class:"border border-gray-300 px-2"},oe={class:"border border-gray-300 px-2"},de={class:"border border-gray-300 px-2"},ne={key:0},ie={key:1,class:"text-gray-500 italic text-xs"},re={class:"border border-gray-300 px-2"},ce={key:1,class:"text-center text-red-500 text-xl italic mt-10"},_e={__name:"DailyLateAttendanceReport",setup(ue){const y=U(),r=N(),c=p("all"),v=z(),f=K(),{dailyLateLogs:q,isLoading:A,selectedDate:i}=h(v),{companies:D,employees:L}=h(f),l=p(r.query.company_id||""),u=p("");r.query.date&&(i.value=r.query.date),M(async()=>{await f.fetchCompanies(),l.value&&(await f.fetchEmployee(l.value),await x())}),m(l,async s=>{s&&(await f.fetchEmployee(s),u.value="",await x()),y.replace({query:{...r.query,company_id:s||"",employee_id:""}})}),m(u,async s=>{s!=null&&s.id&&await x(),y.replace({query:{...r.query,employee_id:(s==null?void 0:s.id)||""}})}),m(i,s=>{y.replace({query:{...r.query,date:s}})}),m(l,s=>{y.replace({query:{...r.query,date:s}})});const x=async()=>{!l.value||!i.value||l.value&&await v.getAttendanceLateReport(l.value,c.value,u.value.id,i.value,"daily")},V=async()=>{l.value?await v.lateReportDownloadExcel(l.value,c==null?void 0:c.value,u.value.id,i.value,"daily"):O.fire({icon:"warning",title:"Missing Selection!",text:"Please select Company and Employee first!",confirmButtonText:"OK"})},B=()=>{y.go(-1)},R=s=>s==="Pending"?"text-yellow-700":s==="Approved"?"text-green-700":"text-red-500";return(s,a)=>(d(),o("div",Q,[t("div",{class:"flex items-center justify-between gap-2"},[t("button",{class:"btn-3",onClick:B},a[4]||(a[4]=[t("i",{class:"far fa-arrow-left"},null,-1),t("span",{class:"hidden md:flex"},"Back",-1)])),a[6]||(a[6]=t("h1",{class:"title-md md:title-lg flex-wrap text-center"},"Daily Late Reports",-1)),t("div",{class:"flex gap-4"},[t("button",{type:"button",onClick:V,class:"btn-3"},a[5]||(a[5]=[t("i",{class:"far fa-file-excel text-2xl text-green-500"},null,-1)]))])]),t("div",$,[t("div",null,[g(t("select",{id:"user-filter","onUpdate:modelValue":a[0]||(a[0]=e=>l.value=e),class:"input-1"},[a[7]||(a[7]=t("option",{value:""},"Select Company",-1)),(d(!0),o(w,null,S(b(D),e=>(d(),o("option",{key:e.id,value:e.id},n(e.name),9,G))),128))],512),[[k,l.value]])]),t("div",null,[g(t("select",{id:"userSelect","onUpdate:modelValue":a[1]||(a[1]=e=>c.value=e),onChange:x,class:"input-1"},a[8]||(a[8]=[P('<option value="all">All Category</option><option value="executive">Executive</option><option value="support_staff">Support Staff</option><option value="doctor">Doctor</option><option value="academy_body">Academy Body</option>',5)]),544),[[k,c.value]])]),t("div",null,[C(j,{modelValue:u.value,"onUpdate:modelValue":a[2]||(a[2]=e=>u.value=e),options:b(L),multiple:!1,label:"label",placeholder:"Please select employee..."},null,8,["modelValue","options"])]),t("div",null,[g(t("input",{id:"user-filter","onUpdate:modelValue":a[3]||(a[3]=e=>E(i)?i.value=e:null),onChange:x,type:"date",class:"input-1"},null,544),[[T,b(i)]])])]),b(A)?(d(),o("div",H,[C(W)])):(d(),o("div",I,[l.value?(d(),o("div",J,[t("table",X,[a[9]||(a[9]=t("thead",null,[t("tr",{class:"bg-gray-200"},[t("th",{class:"border border-gray-300 px-2 text-left"},"#"),t("th",{class:"border border-gray-300 px-2 text-left"},"Date"),t("th",{class:"border border-gray-300 px-2 text-left"},"Weekday"),t("th",{class:"border border-gray-300 px-2 text-left"},"Employee Name"),t("th",{class:"border border-gray-300 px-2 text-left"},"Company"),t("th",{class:"border border-gray-300 px-2 text-left"},"Department"),t("th",{class:"border border-gray-300 px-2 text-left"},"Entry Time"),t("th",{class:"border border-gray-300 px-2 text-left"},"Late Duration"),t("th",{class:"border border-gray-300 px-2 text-left"},"Action"),t("th",{class:"border border-gray-300 px-2 text-left"},"Shift")])],-1)),t("tbody",null,[(d(!0),o(w,null,S(b(q),(e,_)=>(d(),o("tr",{key:e.id||_,class:"border-b border-gray-200 hover:bg-blue-200"},[t("td",Y,n(_+1),1),t("td",Z,n(e==null?void 0:e.date),1),t("td",ee,n(e==null?void 0:e.weekday),1),t("td",te,n((e==null?void 0:e.user_name)||"Unknown"),1),t("td",ae,n((e==null?void 0:e.company_name)||"Unknown"),1),t("td",se,n((e==null?void 0:e.department_name)||"Unknown"),1),t("td",le,n(e==null?void 0:e.entry_time),1),t("td",oe,n(e==null?void 0:e.late_duration),1),t("td",de,[e!=null&&e.short_leave?(d(),o("div",ne,[t("span",{class:F(R(e.short_leave.status))},n(e.short_leave.status||"Waiting"),3)])):(d(),o("div",ie,"No Application"))]),t("td",re,n(e==null?void 0:e.shift_name),1)]))),128))])])])):(d(),o("div",ce,"Please select company"))]))]))}};export{_e as default};
