import{H as M,r as d,y as i,I as o,N as D}from"./index-G-dFwCVu.js";const j=M("manualAttendance",()=>{const s=d([]),v=d(null),l=d(!1),n=d(null),f=d(new Date().toISOString().substring(0,7)),h=d(""),w=async(a={})=>{var r,t;l.value=!0,n.value=null;try{const e=await o.get("/manual-attendances",{params:a});s.value=e==null?void 0:e.data}catch(e){n.value=((t=(r=e.response)==null?void 0:r.data)==null?void 0:t.message)||"Failed to fetch manual attendances",console.error("Error fetching manual attendances:",e)}finally{l.value=!1}},g=async(a={})=>{var r,t;l.value=!0,n.value=null;try{const e=await o.get("/user-manual-attendances",{params:a});s.value=e.data.data}catch(e){n.value=((t=(r=e.response)==null?void 0:r.data)==null?void 0:t.message)||"Failed to fetch manual attendances",console.error("Error fetching manual attendances:",e)}finally{l.value=!1}},p=async a=>{var r,t;l.value=!0,n.value=null;try{const e=await o.get(`/manual-attendances/${a}`);v.value=e.data,await D().fetchApprovalPermissions("manual_attendance_applications",v.value.id)}catch(e){n.value=((t=(r=e.response)==null?void 0:r.data)==null?void 0:t.message)||`Failed to fetch manual attendance (ID: ${a})`,console.error(`Error fetching manual attendance with id ${a}:`,e)}finally{l.value=!1}},$=async a=>{var r,t;l.value=!0,n.value=null;try{const e=await o.post("/manual-attendances",a);return s.value.push(e.data.data),e.data.data}catch(e){throw n.value=((t=(r=e.response)==null?void 0:r.data)==null?void 0:t.message)||"Failed to create manual attendance",console.error("Error creating manual attendance:",e),new Error(n.value)}finally{l.value=!1}},A=async(a,r)=>{var t,e;l.value=!0,n.value=null;try{const c=await o.put(`/manual-attendances/${a}`,r),u=s.value.findIndex(m=>m.id===a);return u!==-1&&(s.value[u]=c.data.data),c.data.data}catch(c){throw n.value=((e=(t=c.response)==null?void 0:t.data)==null?void 0:e.message)||`Failed to update manual attendance (ID: ${a})`,console.error(`Error updating manual attendance with id ${a}:`,c),new Error(n.value)}finally{l.value=!1}},E=async a=>{var r,t;l.value=!0,n.value=null;try{await o.delete(`/manual-attendances/${a}`),s.value=s.value.filter(e=>e.id!==a)}catch(e){throw n.value=((t=(r=e.response)==null?void 0:r.data)==null?void 0:t.message)||`Failed to delete manual attendance (ID: ${a})`,console.error(`Error deleting manual attendance with id ${a}:`,e),new Error(n.value)}finally{l.value=!1}},I=async a=>{var r,t;l.value=!0,n.value=null;try{const e=await o.post(`/manual-attendances/${a==null?void 0:a.id}/in-charge-accept`,a),c=s.value.findIndex(u=>u.id===id);return c!==-1&&(s.value[c]=e.data.data),e.data.data}catch(e){throw n.value=((t=(r=e.response)==null?void 0:r.data)==null?void 0:t.message)||`Failed to accept in-charge for manual attendance (ID: ${id})`,console.error(`Error accepting in-charge for manual attendance with id ${id}:`,e),new Error(n.value)}finally{l.value=!1}},x=async a=>{var r,t;l.value=!0,n.value=null;try{const e=await o.post(`/manual-attendances/${a==null?void 0:a.id}/recommend-by-accept`,a),c=s.value.findIndex(u=>u.id===id);return c!==-1&&(s.value[c]=e.data.data),e.data.data}catch(e){throw n.value=((t=(r=e.response)==null?void 0:r.data)==null?void 0:t.message)||`Failed to accept recommendation for manual attendance (ID: ${id})`,console.error(`Error accepting recommendation for manual attendance with id ${id}:`,e),new Error(n.value)}finally{l.value=!1}},y=async a=>{var r,t;l.value=!0,n.value=null;try{const e=await o.post(`/manual-attendances/${a==null?void 0:a.id}/approved-by-accept`,a),c=s.value.findIndex(u=>u.id===id);return c!==-1&&(s.value[c]=e.data.data),e.data.data}catch(e){throw n.value=((t=(r=e.response)==null?void 0:r.data)==null?void 0:t.message)||`Failed to approve manual attendance (ID: ${a==null?void 0:a.id})`,console.error(`Error approving manual attendance with id ${a==null?void 0:a.id}:`,e),new Error(n.value)}finally{l.value=!1}},F=async(a,r)=>{var t,e;l.value=!0,n.value=null;try{const c=await o.post(`/manual-attendances/${a}/reject`,{rejection_reason:r}),u=s.value.findIndex(m=>m.id===a);return u!==-1&&(s.value[u]=c.data.data),c.data.data}catch(c){throw n.value=((e=(t=c.response)==null?void 0:t.data)==null?void 0:e.message)||`Failed to reject manual attendance (ID: ${a})`,console.error(`Error rejecting manual attendance with id ${a}:`,c),new Error(n.value)}finally{l.value=!1}};return{manualAttendances:i(()=>s.value),manualAttendance:i(()=>v.value),loading:i(()=>l.value),error:i(()=>n.value),selectedMonth:f,selectedStatus:h,fetchManualAttendances:w,fetchManualAttendanceById:p,createManualAttendance:$,updateManualAttendance:A,deleteManualAttendance:E,inChargeAccept:I,recommendByAccept:x,approvedByAccept:y,rejectManualAttendance:F,fetchUserManualAttendances:g}});export{j as u};
