import{u as S,b as U,a2 as B,r as d,e as O,q as V,A as f,c as _,o as n,a as l,f as w,g,p as C,k as x,h as L,v as M}from"./index-Nb0dutxh.js";import{_ as b}from"./EmployeeFilter-DW3SM5av.js";import{L as N}from"./LoaderView-CJgm30I9.js";import{_ as A}from"./OvertimeDataList-Bd6Z4Zeb.js";import{u as D}from"./overtime-BVrz5TOP.js";import{u as F}from"./user-BWzmXkE-.js";import"./MultiselectDropdown-DalD3ocJ.js";import"./company-DtjPLgtk.js";import"./department-C1RiiyJz.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./AcceptAndRejectHandler-BN038pZb.js";const I={class:"px-4 space-y-4"},R={class:"w-full flex flex-wrap gap-4 items-center md:w-auto"},$={key:2},Y={__name:"OvertimeList",setup(j){const u=S(),o=U(),h=B(),m=D(),c=F(),i=d(null),s=d(o.query.month||new Date().toISOString().slice(0,7)),a=d({company_id:o.query.company_id||"",department_id:o.query.department_id||"all",type:o.query.type||"all",employee_id:o.query.employee_id||"",category:""});O(async()=>{a.value.employee_id&&(await y(a.value.employee_id),await r())});const y=async t=>{t?(await c.fetchUser(t),i.value=c.user):i.value=null},v=V(()=>{var t;return((t=m.overtimes)==null?void 0:t.map(e=>e.id))||[]}),r=async()=>{var t;a.value.employee_id&&s.value&&(await m.fetchUserMonthlyOvertimes(a.value.employee_id,s.value),(t=v.value)!=null&&t.length&&await h.fetchApprovalPermissionsByUserApplicationIds("overtime_applications",v.value))};f(s,t=>{u.replace({query:{...o.query,date:t}}),r()}),f(()=>a.value.employee_id,async(t,e)=>{t&&t!==e&&(await y(t),await r())});const q=()=>u.go(-1),k=()=>{u.replace({query:{...o.query,company_id:a.value.company_id,department_id:a.value.department_id,type:a.value.type,employee_id:a.value.employee_id||o.query.employee_id}})};return(t,e)=>(n(),_("div",I,[l("div",{class:"flex items-center justify-between gap-2"},[l("button",{class:"btn-3",onClick:q},e[2]||(e[2]=[l("i",{class:"far fa-arrow-left"},null,-1),l("span",{class:"hidden md:flex"},"Back",-1)])),e[3]||(e[3]=l("h1",{class:"title-md md:title-lg flex-wrap text-center"},"Monthly Overtime",-1)),e[4]||(e[4]=l("div",null,null,-1))]),l("div",R,[C(b,{modelValue:a.value,"onUpdate:modelValue":e[0]||(e[0]=p=>a.value=p),"initial-value":x(o).query,onFilterChange:k},null,8,["modelValue","initial-value"]),l("div",null,[L(l("input",{id:"monthSelect",type:"month","onUpdate:modelValue":e[1]||(e[1]=p=>s.value=p),onChange:r,class:"input-1"},null,544),[[M,s.value]])])]),x(m).isLoading?(n(),w(N,{key:0})):i.value?(n(),w(A,{key:1,user:i.value},null,8,["user"])):g("",!0),i.value?g("",!0):(n(),_("div",$,e[5]||(e[5]=[l("p",{class:"text-gray-400 text-center text-2xl italic"},"Select an employee, please.",-1)])))]))}};export{Y as default};
