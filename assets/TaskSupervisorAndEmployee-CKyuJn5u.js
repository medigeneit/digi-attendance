import{p as A,x as y,c as r,g,o as a,q as m,a as s,K as E,j as b,t as x,R as M,F as j,y as L,f as B,i as k,n as p,Q as P,S as U,D as I,m as q}from"./index-CtyYLalG.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as R}from"./UserChip-C_fwtTpn.js";const de=A({__name:"SubTaskProgress",props:{task:{}},setup(e,{expose:t}){const c=e,n=y(function(){return c.task.completed_count}),l=y(()=>c.task.children_task_count===0?c.task.status==="COMPLETED"?100:0:n.value/c.task.children_task_count*100),f=y(()=>{const i=l.value;let d,o,u;return i===100?(d="bg-green-50 ",o="bg-green-200",u="text-green-600 "):i<100&&(d="bg-red-50 border-red-400",o="bg-red-200",u="text-red-600 "),{container:d,bar:o,text:u}});return t({completedPercentage:l,completedSubTaskCount:n}),(i,d)=>i.task.children_task_count>0?(a(),r("div",{key:0,class:m(["rounded-full py-0.5 relative overflow-hidden h-6 min-w-40 border-2",f.value.container])},[s("div",{class:m(["z-10 absolute top-0 bottom-0",f.value.bar]),style:E(`width: ${l.value}%`)},null,6),s("span",{class:m(["z-20 absolute inset-0 gap-1 text-center h-full flex justify-center items-center",f.value.text])},[s("span",null,[s("span",null,x(n.value),1),d[0]||(d[0]=b(" / ")),s("span",null,x(i.task.children_task_count),1)])],2)],2)):g("",!0)}}),D={class:"relative"},F={key:0,class:"text-gray-400 text-xs whitespace-nowrap border py-1.5 rounded-full px-3 italic border-dashed"},V={class:"border rounded-full size-6 inline-flex justify-center items-center border-blue-300 bg-blue-100 flex-shrink-0"},G={key:0,class:"fas fa-user-cowboy text-blue-500"},K={key:1,class:"fas fa-user-crown text-blue-300"},Q={key:2,class:"text-sm text-gray-500 group/users"},H={class:"cursor-pointer hover:underline text-blue-600 whitespace-nowrap"},J={class:"hidden absolute group-hover/users:block right-0 p-3 bg-white rounded shadow-lg z-30"},O={__name:"TaskAssignedUsers",props:{users:{type:Array,required:!0,default:()=>[]},maxItems:{type:Number,default:2},routeTo:{type:Function,default:null},isTargetTask:{Boolean,default:!1},listType:{String,default:"employee"},maxItem:{Number,default:2}},setup(e){const t=e,c=y(()=>t.users.slice(0,t.maxItem)),n=y(()=>t.users.slice(t.maxItem));function l(i){return typeof t.routeTo=="function"?t.routeTo(i):{}}const f=y(()=>typeof t.routeTo=="function"?M:"div");return(i,d)=>(a(),r("div",D,[t.users.length===0?(a(),r("div",F,x(e.listType=="supervisors"?"No Supervisor assigned":"Not Assigned To Anyone"),1)):(a(!0),r(j,{key:1},L(c.value,(o,u)=>(a(),B(I(f.value),U({key:u},{ref_for:!0},{...typeof t.routeTo=="function"?{to:l(o)}:{}}),{default:k(()=>[p(R,{class:m(["flex items-center border rounded-full border-gray-300 shadow-sm",{"!bg-yellow-400":e.isTargetTask," !bg-blue-100":!e.isTargetTask&&e.listType=="employee"&&u===0}]),user:o,"hide-employee-id":!0},P({_:2},[u===0||e.listType=="supervisors"?{name:"after",fn:k(()=>[s("div",V,[e.listType=="supervisors"?(a(),r("i",G)):(a(),r("i",K))])]),key:"0"}:void 0]),1032,["class","user"])]),_:2},1040))),128)),n.value.length>0?(a(),r("div",Q,[s("div",H," + "+x(n.value.length),1),s("div",J,[(a(!0),r(j,null,L(n.value,(o,u)=>(a(),B(I(f.value),{key:u,to:l(o),class:"w-full block mb-2"},{default:k(()=>[p(R,{class:m(["flex items-center gap-2 border rounded-full border-gray-300 shadow-sm w-full",{"!bg-yellow-400":e.isTargetTask}]),user:o},null,8,["class","user"])]),_:2},1032,["to"]))),128))])])):g("",!0)]))}},W={},X={class:"text-xs px-2 py-0.5 rounded-full border bg-yellow-800 text-white min-w-max"};function Y(e,t){return a(),r("span",X,t[0]||(t[0]=[s("i",{class:"far fa-exclamation-circle"},null,-1),b(" IMPORTANT ")]))}const fe=z(W,[["render",Y]]),Z={class:"flex items-center gap-2"},me={__name:"TaskTitleRouterLink",props:{task:Object,subTasksOpen:{type:Boolean,default:!1},isMyTask:{type:Boolean,default:!1},titleClass:{type:String,default:""}},setup(e){return(t,c)=>{var l;const n=q("RouterLink");return a(),r("div",Z,[s("i",{class:m(["fad",((l=e.task)==null?void 0:l.children_task_count)>0?{"fa-folder text-blue-800/70":!e.subTasksOpen,"fa-folder-open text-blue-400":e.subTasksOpen}:"fa-file-alt text-gray-400"])},null,2),p(n,{to:{name:e.isMyTask?"MyTaskShow":"TaskShow",params:{id:e.task.id}},title:e.task.title,class:m(["font-medium text-gray-700 cursor-pointer hover:text-blue-700 whitespace-normal line-clamp-1 w-full",e.titleClass])},{default:k(()=>[s("div",null,x(e.task.title),1)]),_:1},8,["to","title","class"])])}}},ee={},te={class:"text-xs px-2 py-0.5 rounded-full border bg-red-500 text-white min-w-max"};function se(e,t){return a(),r("span",te,t[0]||(t[0]=[s("i",{class:"far fa-exclamation-triangle"},null,-1),b(" URGENT ")]))}const xe=z(ee,[["render",se]]),ae={class:"flex flex-col md:flex-row items-stretched justify-start gap-x-5 gap-y-4"},re={class:"flex items-center justify-start gap-2 border-gray-200 py-1"},ne=["title"],le={class:"flex items-center justify-start gap-2 py-1"},oe=["title"],ye={__name:"TaskSupervisorAndEmployee",props:{treeLevel:{type:Number,required:!0},task:{type:Object,required:!0},employeeRouteTo:{type:Function,default:null}},setup(e){return(t,c)=>{var n,l,f,i,d,o,u,h,T,v,_,w,$,C,S,N;return a(),r("div",ae,[s("div",re,[p(O,{class:"flex items-center gap-x-3 gap-y-2",users:e.task.supervisors||[],listType:"supervisors",maxItem:1},null,8,["users"]),e.treeLevel===0?(a(),r("div",{key:0,class:m(["text-xs px-2 py-0.5 rounded-full border bg-sky-500/80 text-white line-clamp-1 text-center",{"":(l=(n=e.task)==null?void 0:n.from_department)==null?void 0:l.name}]),title:((i=(f=e.task)==null?void 0:f.from_department)==null?void 0:i.name)||"--"},x(((o=(d=e.task)==null?void 0:d.from_department)==null?void 0:o.short_name)||((h=(u=e.task)==null?void 0:u.from_department)==null?void 0:h.name)||"--"),11,ne)):g("",!0)]),c[0]||(c[0]=s("div",null,[s("span",{class:"flex md:hidden text-2xl text-gray-200 items-center justify-center h-full"},[s("i",{class:"fad fa-arrow-down"})]),s("span",{class:"hidden md:flex text-2xl text-gray-200 items-center justify-center h-full"},[s("i",{class:"fad fa-arrow-right"})])],-1)),s("div",le,[e.treeLevel===0?(a(),r("div",{key:0,class:m(["text-xs px-2 py-0.5 rounded-full border bg-sky-500/80 text-white line-clamp-1 text-center",{"":(v=(T=e.task)==null?void 0:T.to_department)==null?void 0:v.name}]),title:((w=(_=e.task)==null?void 0:_.to_department)==null?void 0:w.name)||"--"},x(((C=($=e.task)==null?void 0:$.to_department)==null?void 0:C.short_name)||((N=(S=e.task)==null?void 0:S.to_department)==null?void 0:N.name)||"--"),11,oe)):g("",!0),p(O,{class:"flex items-center gap-x-3 gap-y-2",users:e.task.users||[],isTargetTask:e.task.is_target,routeTo:e.employeeRouteTo,maxItem:1},null,8,["users","isTargetTask","routeTo"])])])}}};export{fe as T,me as _,O as a,xe as b,de as c,ye as d};
