import{L as R}from"./LoaderView-CQ5h07ZU.js";import{_ as V}from"./FlexibleDatePicker-pA7IOudf.js";import{_ as c}from"./DisplayFormattedWorkingHours-BOxL996V.js";import{u as j}from"./overtime-BcET_o47.js";import{u as q,r as B,x as p,q as $,p as P,c as r,o as i,a as t,s as k,n as v,d as a,m as H,t as o,k as b,F,e as T,b as C}from"./index-DmUmJ6hT.js";const U={class:"space-y-6 px-4 py-5"},z={class:"rounded-2xl border border-slate-200 bg-white px-4 py-4 shadow-sm md:px-6"},E={class:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between"},G={class:"flex flex-col gap-2"},I={class:"flex flex-wrap items-center gap-2"},W={class:"flex flex-wrap items-center gap-2"},Y={class:"mt-4 grid grid-cols-2 md:grid-cols-6 gap-2 text-xs md:text-sm"},J={class:"rounded-2xl border border-slate-100 bg-slate-50 px-3 py-2"},K={class:"text-lg font-semibold text-slate-800"},Q={class:"rounded-2xl border border-slate-100 bg-slate-50 px-3 py-2"},X={class:"text-lg font-semibold text-slate-800"},Z={class:"rounded-2xl border border-slate-100 bg-slate-50 px-3 py-2"},tt={class:"text-lg font-semibold text-slate-800"},et={class:"rounded-2xl border border-slate-100 bg-slate-50 px-3 py-2"},st={class:"text-lg font-semibold text-slate-800"},nt={class:"rounded-2xl border border-slate-100 bg-slate-50 px-3 py-2"},lt={class:"text-lg font-semibold text-slate-800"},ot={class:"rounded-2xl border border-slate-100 bg-slate-50 px-3 py-2"},at={class:"text-lg font-semibold text-slate-800"},dt={key:0,class:"text-center py-10"},rt={key:1,class:"space-y-4"},it={class:"rounded-2xl border border-slate-200 bg-white shadow-sm"},ct={class:"overflow-x-auto"},pt={class:"min-w-full divide-y divide-slate-100 text-sm"},xt={class:"divide-y divide-slate-100"},ut={class:"px-4 py-3 font-semibold text-slate-600 text-center"},ft={class:"px-4 py-3 text-slate-700 text-center"},_t={class:"px-4 py-3 text-slate-700 text-center"},yt={class:"px-4 py-3 text-slate-700 text-center"},gt={class:"px-4 py-3 text-slate-700 text-center"},bt={class:"px-4 py-3 text-slate-700 text-center"},ht={class:"px-4 py-3 text-slate-700 text-center"},wt={class:"px-4 py-3 text-slate-700 text-center"},mt={class:"px-4 py-3 text-slate-700 text-center"},kt={class:"px-4 py-3 text-center"},vt={class:"px-4 py-3 text-slate-700 text-center"},Ht={class:"px-4 py-3"},Ct={class:"flex items-center justify-center gap-2"},St=["onClick"],Ot={key:0},Dt={key:0,class:"bg-slate-50"},Lt={class:"font-semibold"},At={class:"px-4 py-3 text-center"},Mt={class:"px-4 py-3 text-center"},Pt={__name:"MyOvertimeList",setup(Nt){const S=q(),d=j(),f=new Date,_=B({year:f.getFullYear(),month:f.getMonth()+1,day:f.getDate()}),O=n=>n.toString().padStart(2,"0"),y=p(()=>{const n=_.value||{};return!n.year||!n.month?"":`${n.year}-${O(n.month)}`}),h=n=>{d.fetchUserOvertimes({month:n})};$(y,n=>{n&&(d.selectedMonth=n,h(n))},{immediate:!0});const D=()=>{S.go(-1)},x=p(()=>d.overtimes||[]),w=p(()=>(d.overtimes||[]).reduce((e,l)=>e+(Number(l==null?void 0:l.request_overtime_hours)||0),0)),m=p(()=>(d.overtimes||[]).reduce((e,l)=>e+(Number(l==null?void 0:l.approval_overtime_hours)||0),0)),u=p(()=>{const n={pending:0,approved:0,rejected:0,other:0,total:x.value.length};for(const e of x.value){const l=String(e.status||"Pending").toLowerCase();l==="approved"?n.approved++:l==="rejected"?n.rejected++:l==="pending"||l==="applied"?n.pending++:n.other++}return n});p(()=>{const n=y.value,[e,l]=(n||"").split("-");return!e||!l?"Month":new Date(Number(e),Number(l)-1).toLocaleString("en-US",{month:"long",year:"numeric"})});const L=n=>n?new Date(n).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):"N/A",A=n=>{const e=(n||"").toLowerCase();return["approved","accepted"].includes(e)?"border border-emerald-200 bg-emerald-50 text-emerald-700":["rejected","declined","cancelled"].includes(e)?"border border-red-200 bg-red-50 text-red-700":e==="pending"||!e?"border border-amber-200 bg-amber-50 text-amber-800":"border border-slate-200 bg-slate-50 text-slate-800"};function M(n){confirm("Are you sure you want to delete this application?")&&d.deleteOvertime(n)}return(n,e)=>{var g;const l=P("RouterLink");return i(),r("div",U,[t("div",z,[t("div",E,[t("div",G,[t("div",I,[t("button",{class:"btn-3",onClick:D},e[2]||(e[2]=[t("i",{class:"far fa-arrow-left"},null,-1),t("span",{class:"hidden md:inline-flex"},"Back",-1)])),t("button",{type:"button",class:"btn-3 space-x-1",onClick:e[0]||(e[0]=s=>h(y.value))},[t("i",{class:k(["fas fa-sync text-lg",{"animate-spin":v(d).loading}])},null,2),e[3]||(e[3]=t("span",{class:"hidden md:inline"},"Reload",-1))])])]),e[5]||(e[5]=t("div",{class:"space-y-1"},[t("p",{class:"text-2xl font-semibold text-slate-900"},"Overtime Requests Records")],-1)),t("div",W,[a(l,{to:{name:"MyOvertimeAdd"},class:"btn-2"},{default:H(()=>e[4]||(e[4]=[t("i",{class:"far fa-plus"},null,-1),t("span",{class:"hidden md:inline-flex"},"Overtime",-1)])),_:1,__:[4]}),a(V,{modelValue:_.value,"onUpdate:modelValue":e[1]||(e[1]=s=>_.value=s),"show-year":!1,"show-month":!0,"show-date":!1,label:"Month"},null,8,["modelValue"])])]),t("div",Y,[t("div",J,[e[6]||(e[6]=t("div",{class:"text-slate-500"},"Applications",-1)),t("div",K,o(u.value.total),1)]),t("div",Q,[e[7]||(e[7]=t("div",{class:"text-slate-500"},"Requested",-1)),t("div",X,[a(c,{workingHours:w.value},null,8,["workingHours"])])]),t("div",Z,[e[8]||(e[8]=t("div",{class:"text-slate-500"},"Approved",-1)),t("div",tt,[a(c,{workingHours:m.value},null,8,["workingHours"])])]),t("div",et,[e[9]||(e[9]=t("div",{class:"text-slate-500"},"Pending",-1)),t("div",st,o(u.value.pending),1)]),t("div",nt,[e[10]||(e[10]=t("div",{class:"text-slate-500"},"Approved / Rejected",-1)),t("div",lt,o(u.value.approved)+" / "+o(u.value.rejected),1)]),t("div",ot,[e[11]||(e[11]=t("div",{class:"text-slate-500"},"Other",-1)),t("div",at,o(u.value.other),1)])])]),(g=v(d))!=null&&g.loading?(i(),r("div",dt,[a(R)])):(i(),r("div",rt,[t("div",it,[t("div",ct,[t("table",pt,[e[19]||(e[19]=t("thead",{class:"bg-slate-50 text-[11px] uppercase tracking-wider text-slate-500"},[t("tr",null,[t("th",{class:"px-4 py-3 text-center"},"#"),t("th",{class:"px-4 py-3 text-center"},"Date"),t("th",{class:"px-4 py-3 text-center"},"Type"),t("th",{class:"px-4 py-3 text-center"},"Shift"),t("th",{class:"px-4 py-3 text-center"},"Check-In"),t("th",{class:"px-4 py-3 text-center"},"Check-Out"),t("th",{class:"px-4 py-3 text-center"},"Working"),t("th",{class:"px-4 py-3 text-center"},"Request"),t("th",{class:"px-4 py-3 text-center"},"Approved"),t("th",{class:"px-4 py-3 text-center"},"Status"),t("th",{class:"px-4 py-3 text-center"},"Details"),t("th",{class:"px-4 py-3 text-center"},"Actions")])],-1)),t("tbody",xt,[(i(!0),r(F,null,T(x.value,(s,N)=>(i(),r("tr",{key:s==null?void 0:s.id,class:"hover:bg-slate-50 transition"},[t("td",ut,o(N+1),1),t("td",ft,o(L(s==null?void 0:s.date)),1),t("td",_t,o(s==null?void 0:s.duty_type),1),t("td",yt,o(s==null?void 0:s.shift),1),t("td",gt,o((s==null?void 0:s.check_in)||"- : -"),1),t("td",bt,o((s==null?void 0:s.check_out)||"- : -"),1),t("td",ht,[a(c,{workingHours:s==null?void 0:s.working_hours},null,8,["workingHours"])]),t("td",wt,[a(c,{workingHours:s==null?void 0:s.request_overtime_hours},null,8,["workingHours"])]),t("td",mt,[a(c,{workingHours:s==null?void 0:s.approval_overtime_hours},null,8,["workingHours"])]),t("td",kt,[t("span",{class:k(["inline-flex items-center rounded-full px-3 py-1 text-[11px] font-semibold tracking-wide",A(s==null?void 0:s.status)])},o((s==null?void 0:s.status)||"Pending"),3)]),t("td",vt,o(s==null?void 0:s.work_details),1),t("td",Ht,[t("div",Ct,[a(l,{to:{name:"MyOvertimeShow",params:{id:s==null?void 0:s.id}},class:"inline-flex items-center rounded-full border border-slate-200 px-3 py-1.5 text-xs font-semibold text-slate-600 transition hover:border-indigo-200 hover:text-indigo-700"},{default:H(()=>e[12]||(e[12]=[t("i",{class:"far fa-eye mr-1"},null,-1),C(" View ")])),_:2,__:[12]},1032,["to"]),s.status=="Pending"||!s.status?(i(),r("button",{key:0,type:"button",onClick:Rt=>M(s==null?void 0:s.id),class:"inline-flex items-center rounded-full border border-red-200 px-3 py-1.5 text-xs font-semibold text-red-600 transition hover:border-red-300 hover:text-red-700"},e[13]||(e[13]=[t("i",{class:"far fa-trash mr-1"},null,-1),C(" Delete ")]),8,St)):b("",!0)])])]))),128)),x.value.length===0?(i(),r("tr",Ot,e[14]||(e[14]=[t("td",{colspan:12,class:"px-4 py-3 text-center text-red-500"},"No overtimes found",-1)]))):b("",!0)]),x.value.length?(i(),r("tfoot",Dt,[t("tr",Lt,[e[15]||(e[15]=t("td",{class:"px-4 py-3 text-right",colspan:"7"},"Totals",-1)),t("td",At,[a(c,{workingHours:w.value},null,8,["workingHours"])]),t("td",Mt,[a(c,{workingHours:m.value},null,8,["workingHours"])]),e[16]||(e[16]=t("td",{class:"px-4 py-3 text-center"},"—",-1)),e[17]||(e[17]=t("td",{class:"px-4 py-3 text-center"},"—",-1)),e[18]||(e[18]=t("td",{class:"px-4 py-3 text-center"},"—",-1))])])):b("",!0)])])])]))])}}};export{Pt as default};
