import{_ as B}from"./CommentModal-DUYB2ji1.js";import{u as w,r as f,h as C,p as A,c as n,o as l,a as t,d as m,m as a,t as r,F as T,e as L,l as x,b as S}from"./index-Ab5Ru0L-.js";import{u as j}from"./useBugStore-_kcl9X5I.js";import"./useCommentStore-B66arDRe.js";const E={class:"container mx-auto p-6"},N={key:0,class:"text-center py-4 text-gray-500"},R={key:1,class:"text-center py-4 text-red-500"},V={key:2,class:"overflow-auto"},$={class:"min-w-full bg-white shadow rounded-lg overflow-hidden"},F={class:"px-4 py-2"},I={class:"px-4 py-2 font-medium"},M={class:"px-4 py-2 font-medium"},U={class:"px-4 py-2"},q={class:"px-4 py-2 flex gap-4"},D=["onClick"],P=["onClick"],z=1,Q={__name:"BugList",setup(G){const o=j(),p=w(),i=f(!1),c=f(null);C(()=>{o.fetchBugs()});const y=()=>{p.push({name:"BugAdd"})},h=d=>{p.push({name:"BugEdit",params:{id:d}})},v=d=>{c.value=d,i.value=!0},g=()=>{i.value=!1,c.value=null};return(d,s)=>{const u=A("RouterLink");return l(),n("div",E,[t("div",{class:"flex justify-between items-center mb-6"},[s[0]||(s[0]=t("h2",{class:"text-2xl font-bold text-gray-800"},"Bugs",-1)),t("button",{onClick:y,class:"bg-red-500 hover:bg-red-600 text-white font-semibold px-4 py-2 rounded-full transition"}," Add Bug ")]),a(o).loading?(l(),n("div",N,"Loading bugs...")):a(o).error?(l(),n("div",R,r(a(o).error),1)):(l(),n("div",V,[t("table",$,[s[4]||(s[4]=t("thead",{class:"bg-gray-100"},[t("tr",null,[t("th",{class:"px-4 py-2 text-left"},"#"),t("th",{class:"px-4 py-2 text-left"},"Title"),t("th",{class:"px-4 py-2 text-left"},"Project"),t("th",{class:"px-4 py-2 text-left"},"Todo"),t("th",{class:"px-4 py-2 text-left"},"Actions")])],-1)),t("tbody",null,[(l(!0),n(T,null,L(a(o).bugs,(e,b)=>{var _;return l(),n("tr",{key:e.id,class:"border-t hover:bg-gray-50"},[t("td",F,r(b+1),1),t("td",I,r(e.title),1),t("td",M,r((_=e==null?void 0:e.project)==null?void 0:_.name),1),t("td",U,[m(u,{to:{name:"TodoAdd",params:{todoable_id:e==null?void 0:e.id},query:{todoable_type:"bug"}},class:"btn-3"},{default:x(()=>s[1]||(s[1]=[t("i",{class:"fas fa-plus-circle"},null,-1)])),_:2,__:[1]},1032,["to"])]),t("td",q,[t("button",{onClick:k=>h(e.id),class:"btn-1"},s[2]||(s[2]=[t("i",{class:"far fa-edit"},null,-1)]),8,D),m(u,{to:{name:"BugUserAssign",params:{id:e==null?void 0:e.id}},class:"btn-3 md:text-base text-xs"},{default:x(()=>s[3]||(s[3]=[S(" Assign Users ")])),_:2,__:[3]},1032,["to"]),t("button",{onClick:k=>v(e.id),class:"btn-4"},"+ Comment",8,P)])])}),128))])])])),m(B,{show:i.value,"commentable-id":c.value,"commentable-type":"bug","user-id":z,"on-close":g,onSubmitted:a(o).fetchBugs},null,8,["show","commentable-id","onSubmitted"])])}}};export{Q as default};
