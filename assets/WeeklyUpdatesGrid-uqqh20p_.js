import{B as He,r as C,G as Ye,x as S,C as Ce,D as Ge,f as Qe,u as Je,h as Xe,y as Ze,c as r,o as d,k as h,a as s,s as Y,t as p,d as et,b as se,l as G,v as Q,n as g,i as tt,P as J,F as L,e as X,A as st}from"./index-Nld-XKoH.js";import{_ as nt}from"./EmployeeFilter-DZrpPaB_.js";import"./company-BBjeF2el.js";import"./department-C9vF9d6r.js";import"./EmployeeDropdownInput-DGJe0VzL.js";import"./SelectDropdown-GwxMCdoq.js";import"./UserChip-DV0T2auP.js";import"./user-D_hUnSSQ.js";const at=He("weeklyUpdates",()=>{const W=C(!1),T=C(null),B=C(null),A=C([]),D=C([]),N=Ye({anchor_date:"",past_days:5,future_days:5,window:null,start_date:"",end_date:"",company_id:"",department_id:"",line_type:"",user_id:"",status:""});let v=null,o=0;const y=x=>{const b={};return Object.entries(x||{}).forEach(([w,_])=>{_==null||_===""||_!=="all"&&(b[w]=_)}),b},M=async(x={})=>{var w,_,q,k,P;const b=++o;W.value=!0,T.value=null,Object.assign(N,x),v&&v.abort(),v=new AbortController;try{const u=await Ce.get("/weekly-updates",{params:y(N),signal:v.signal});return b!==o?void 0:(B.value=((w=u.data)==null?void 0:w.meta)??null,A.value=((_=u.data)==null?void 0:_.dates)??[],D.value=((q=u.data)==null?void 0:q.rows)??[],u.data)}catch(u){if((u==null?void 0:u.name)==="CanceledError"||(u==null?void 0:u.code)==="ERR_CANCELED"||b!==o)return;throw T.value=((P=(k=u==null?void 0:u.response)==null?void 0:k.data)==null?void 0:P.message)||(u==null?void 0:u.message)||"Failed to load weekly updates.",u}finally{b===o&&(W.value=!1)}},n=async x=>{const{kind:b,ref_id:w,status:_,message:q}=x||{};if(!b||!w)throw new Error("Invalid item");const k={kind:b,ref_id:w};return _!=null&&_!==""&&(k.status=_),q&&(k.message=q),await Ce.post("/weekly-updates/send-message",k)},R=()=>M({window:"prev"}),U=()=>M({window:"next"}),K=(x,b)=>M({past_days:x,future_days:b,window:null}),j=(x={})=>M(x),z=S(()=>A.value),O=S(()=>D.value),i=S(()=>B.value);return{loading:W,error:T,params:N,dates:z,rows:O,meta:i,fetchWeekly:M,prevWeek:R,nextWeek:U,applyRange:K,setFilters:j,sendWeeklyMessage:n}}),lt={class:"space-y-3 px-4"},ot={class:"rounded-2xl border border-slate-200 bg-white/95 backdrop-blur p-3 shadow-sm"},rt={class:"rounded-2xl border border-slate-200 bg-white/95 backdrop-blur p-3 shadow-sm"},dt={class:"flex flex-col gap-3 lg:flex-row lg:items-center lg:justify-between"},it={class:"flex flex-wrap items-center gap-2"},ut={class:"rounded-xl border border-slate-200 bg-slate-50/70 px-2 py-1"},ct={class:"flex items-center gap-2"},pt={class:"flex items-center gap-2 text-xs font-semibold text-slate-600"},ft={class:"flex items-center gap-2 text-xs font-semibold text-slate-600"},xt={class:"flex items-center gap-2 text-xs font-semibold text-slate-600"},yt={class:"flex items-center justify-between gap-3 text-xs text-slate-500 lg:justify-end"},bt={class:"text-right bg-gray-100 rounded-full px-2 py-1"},_t={key:0,class:"font-semibold text-slate-800"},gt={class:"flex justify-center items-center gap-3"},mt={class:"text-[11px] text-slate-400 bg-gray-100 rounded-full px-2 py-1"},vt={class:"font-semibold text-slate-600"},ht={key:1,class:"rounded-xl border border-rose-200 bg-rose-50 px-3 py-2 text-sm text-rose-700"},wt={key:2,class:"rounded-2xl border border-slate-200 bg-white px-4 py-3 text-sm text-slate-500"},kt={key:3,class:"rounded-2xl border border-slate-200 bg-white shadow-sm"},St={class:"min-w-max w-full text-sm"},Ct={class:"text-slate-600"},$t={class:"text-[11px] font-semibold text-slate-400"},Tt={class:"text-xs font-semibold text-slate-800"},Dt={key:0,class:"mt-1 text-[10px] font-semibold text-amber-700"},Mt={class:"sticky left-0 z-20 w-10 border-r border-slate-200 bg-white p-2 text-xs font-semibold text-slate-600"},jt={class:"sticky left-12 z-20 border-r border-slate-200 bg-white p-2"},qt={class:"min-w-0"},It=["href","title"],Nt={class:"truncate group-hover:underline decoration-slate-400 underline-offset-4"},Rt={class:"mt-0.5 text-[11px] text-slate-500"},Ut={key:0,class:"flex flex-col items-center justify-center"},zt=["title","onClick"],Ot={key:1,class:"text-slate-300 text-sm"},Ft={class:"p-2 text-right"},At=["disabled","onClick"],Et={key:0},Lt={key:1},Wt={key:0,class:"border-t border-slate-100"},Bt=["colspan"],Kt={key:4,class:"fixed inset-0 z-[75] flex items-center justify-center bg-slate-900/50 p-4"},Pt={class:"w-full max-w-lg rounded-2xl bg-white p-4 shadow-xl"},Vt={class:"flex items-start justify-between gap-3"},Ht={class:"text-xs text-slate-500"},Yt={class:"mt-3 rounded-xl border border-slate-200 bg-slate-50 px-3 py-2 text-xs text-slate-600"},Gt={class:"flex items-center justify-between"},Qt=["href"],Jt={class:"mt-2 flex flex-wrap items-center gap-2"},Xt={class:"rounded-full bg-white px-2 py-0.5 text-[11px] font-semibold text-slate-700 ring-1 ring-slate-200"},Zt={class:"text-[11px] text-slate-500"},es={class:"text-[11px] text-slate-500"},ts={key:0,class:"mt-1 text-[11px] text-slate-500"},ss={class:"mt-4"},ns={class:"mt-1 flex items-center justify-between text-[11px] text-slate-400"},as={class:"mt-4 flex items-center justify-end gap-2"},ls=["disabled"],os={key:0},rs={key:1},ds={key:5,class:"fixed inset-0 z-[70] flex items-center justify-center bg-slate-900/50 p-4"},is={class:"w-full max-w-sm rounded-2xl bg-white p-4 shadow-xl"},us={class:"flex items-start justify-between gap-3"},cs={class:"flex items-center gap-2"},ps=["href"],fs={class:"mt-4 space-y-2 text-sm text-slate-700"},xs={class:"flex items-center justify-between"},ys={class:"font-semibold"},bs={class:"flex items-center justify-between"},_s={class:"font-semibold"},gs={class:"flex items-center justify-between"},ms={class:"font-semibold"},vs={class:"flex items-center justify-between"},hs={class:"font-semibold"},ws={class:"flex items-center justify-between"},ks={class:"font-semibold"},Ss={class:"mt-4 flex items-center justify-end gap-2"},Rs={__name:"WeeklyUpdatesGrid",setup(W){const T=at(),{loading:B,error:A,dates:D,rows:N,meta:v,params:o}=Ge(T),y=Qe(),M=Je(),n=C({detailsOpen:!1,selectedItem:null,smsOpen:!1,smsMessage:"",smsTarget:null,busyKey:null,toast:null}),R=C(null),U=C(null),K=C(0);let j=null;const z=async()=>{var c,f;await st();const e=((c=R.value)==null?void 0:c.offsetHeight)||0,t=((f=U.value)==null?void 0:f.offsetHeight)||0,a=12;K.value=e+t+a},O=S(()=>({top:`${K.value}px`})),i=C({company_id:y.query.company_id||"",department_id:y.query.department_id||"all",line_type:y.query.line_type||"all",employee_id:y.query.employee_id||y.query.user_id||""}),x=(e,t,a)=>Math.min(Math.max(Number(e)||0,t),a),b=(e,t)=>{const a=Number(e);return Number.isFinite(a)?x(a,0,60):t};y.query.anchor_date&&(o.value.anchor_date=String(y.query.anchor_date)),y.query.past_days!=null&&(o.value.past_days=b(y.query.past_days,o.value.past_days)),y.query.future_days!=null&&(o.value.future_days=b(y.query.future_days,o.value.future_days));const w=e=>{if(e){const[t,a,c]=String(e).split("-").map(Number);if(t&&a&&c)return new Date(t,a-1,c)}return new Date},_=(e,t)=>{const a=new Date(e);return a.setDate(a.getDate()+t),a},q=e=>{const t=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),c=String(e.getDate()).padStart(2,"0");return`${t}-${a}-${c}`},k=e=>{if(!e)return"";const t=new Date(`${e}T00:00:00`);return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric"}).format(t)},P=e=>{if(!e)return"";const t=new Date(`${e}T00:00:00`);return new Intl.DateTimeFormat("en-US",{weekday:"short"}).format(t)},u=(e,t)=>{var a;return((a=e==null?void 0:e.days)==null?void 0:a[t])??[]},$e=e=>{const t=String((e==null?void 0:e.status)??"").toLowerCase();return t.includes("pending")?"bg-amber-50 text-amber-700 ring-amber-200":t.includes("approved")?"bg-emerald-50 text-emerald-700 ring-emerald-200":t.includes("rejected")?"bg-rose-50 text-rose-700 ring-rose-200":"bg-slate-50 text-slate-700 ring-slate-200"},Te=e=>{const t=String((e==null?void 0:e.kind)||"").toLowerCase();return t==="weekend"||t==="holiday"||t==="present"},ne=e=>{const t=String((e==null?void 0:e.kind)||"").toLowerCase();return t==="weekend"?"WK":t==="holiday"?"HD":t==="present"?"P":t==="worked"?"W":e==null?void 0:e.code},De=e=>{const t=String((e==null?void 0:e.kind)||"").toLowerCase();return t==="weekend"?"bg-slate-50 text-slate-700 ring-slate-200":t==="holiday"?"bg-sky-50 text-sky-700 ring-sky-200":t==="present"?"bg-emerald-50 text-emerald-700 ring-emerald-200":t==="worked"?"bg-indigo-50 text-indigo-700 ring-indigo-200":$e(e)},Me=e=>{const t=[],a=(e==null?void 0:e.label)||(e==null?void 0:e.kind)||ne(e);return a&&t.push(a),e!=null&&e.status&&t.push(e.status),e!=null&&e.ref_id&&t.push(`#${e.ref_id}`),t.join(" - ")},je=e=>String((e==null?void 0:e.kind)||"").toLowerCase()==="exchange",qe=S(()=>{var t;const e=(t=n.value.toast)==null?void 0:t.type;return e==="success"?"border-emerald-200 bg-emerald-50 text-emerald-800":e==="error"?"border-rose-200 bg-rose-50 text-rose-800":"border-slate-200 bg-slate-50 text-slate-800"});function F(e,t){n.value.toast={type:e,text:t},window.clearTimeout(F._t),F._t=window.setTimeout(()=>n.value.toast=null,2500)}const Ie=S(()=>{var t;return!!String(n.value.smsMessage||"").trim()&&!!((t=n.value.smsTarget)!=null&&t.item)&&!n.value.busyKey}),Ne=e=>!(e!=null&&e.kind)||!(e!=null&&e.ref_id)?!1:!Te(e),ae=e=>{const t=D.value||[];for(let a=t.length-1;a>=0;a--){const c=t[a],f=u(e,c);if(f!=null&&f.length)for(let m=f.length-1;m>=0;m--){const $=f[m];if(Ne($))return $}}return null},Re=e=>{const t=ae(e);if(!t)return F("info","No application found in this range.");n.value.smsTarget={item:t,user:(e==null?void 0:e.user)||null},n.value.smsMessage="",n.value.smsOpen=!0},Z=()=>{n.value.smsOpen=!1,n.value.smsMessage="",n.value.smsTarget=null},Ue=async(e,t="")=>{var c,f;if(!(e!=null&&e.kind)||!(e!=null&&e.ref_id))return!1;const a=`${e.kind}:${e.ref_id}`;n.value.busyKey=a;try{return await T.sendWeeklyMessage({kind:e.kind,ref_id:e.ref_id,status:e.status,message:t}),F("success",`SMS sent (${e.code||e.kind} #${e.ref_id})`),!0}catch(m){return F("error",((f=(c=m==null?void 0:m.response)==null?void 0:c.data)==null?void 0:f.message)||"Failed to send SMS."),!1}finally{n.value.busyKey=null}},ze=async()=>{var c;const e=(c=n.value.smsTarget)==null?void 0:c.item,t=String(n.value.smsMessage||"").trim();if(!e)return;if(!t)return F("error","Please write a message before sending.");await Ue(e,t)&&Z()},le=S(()=>{var e,t;return!((e=v.value)!=null&&e.start_date)||!((t=v.value)!=null&&t.end_date)?"":`${k(v.value.start_date)} - ${k(v.value.end_date)}`}),Oe=S(()=>{var t;const e=o.value.anchor_date||((t=v.value)==null?void 0:t.anchor_date);return e?w(e):new Date}),ee=S(()=>{const e=Oe.value,t=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0");return`${t}-${a}`}),Fe=e=>e?`/hrd/em-attendance?${new URLSearchParams({department_id:String(e.department_id??i.value.department_id??""),line_type:String(i.value.line_type??""),date:String(ee.value),company_id:String(e.company_id??i.value.company_id??""),employee_id:String(e.id??"")}).toString()}`:"#",V=e=>{if(!(e!=null&&e.kind)||!(e!=null&&e.ref_id))return null;const t=String(e.kind).toLowerCase();return t==="leave"?`/leave-application-show/${e.ref_id}`:t==="exchange"?`/exchange-offday-show/${e.ref_id}`:null},Ae=S(()=>{const e=new Date,t=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),c=String(e.getDate()).padStart(2,"0");return`${t}-${a}-${c}`}),te=e=>String(e)===String(Ae.value),Ee=e=>te(e)?"bg-amber-50":"bg-slate-50",Le=e=>te(e)?"bg-amber-50":"",We=()=>{M.replace({query:{...y.query,company_id:i.value.company_id||void 0,department_id:i.value.department_id&&i.value.department_id!=="all"?i.value.department_id:void 0,line_type:i.value.line_type&&i.value.line_type!=="all"?i.value.line_type:void 0,employee_id:i.value.employee_id||void 0,anchor_date:o.value.anchor_date||void 0,past_days:o.value.past_days!=null?String(o.value.past_days):void 0,future_days:o.value.future_days!=null?String(o.value.future_days):void 0}}).catch(()=>{})},H=()=>{T.fetchWeekly({company_id:i.value.company_id||"",department_id:i.value.department_id||"all",line_type:i.value.line_type||"all",user_id:i.value.employee_id||"",anchor_date:o.value.anchor_date,past_days:o.value.past_days,future_days:o.value.future_days,window:null}),We()},Be=()=>{o.value.past_days=x(o.value.past_days,0,60),o.value.future_days=x(o.value.future_days,0,60),H()},Ke=()=>H(),oe=e=>{var $;const t=x(o.value.past_days,0,60),a=x(o.value.future_days,0,60),c=t+a+1,f=w(o.value.anchor_date||(($=v.value)==null?void 0:$.anchor_date)),m=_(f,e*c);o.value.anchor_date=q(m),H()},Pe=e=>{n.value.selectedItem=e,n.value.detailsOpen=!0};return Xe(async()=>{H(),await z(),typeof ResizeObserver<"u"?(j=new ResizeObserver(z),R.value&&j.observe(R.value),U.value&&j.observe(U.value)):window.addEventListener("resize",z)}),Ze(()=>{j&&j.disconnect(),window.removeEventListener("resize",z)}),(e,t)=>{var a,c,f,m,$,re,de,ie,ue,ce,pe,fe,xe,ye,be,_e,ge,me,ve,he,we;return d(),r("section",lt,[n.value.toast?(d(),r("div",{key:0,class:Y(["fixed right-4 top-4 z-[80] rounded-xl border px-4 py-2 text-sm shadow-sm",qe.value])},p(n.value.toast.text),3)):h("",!0),s("div",{ref_key:"stickyBarRef",ref:R,class:"sticky top-14 z-50"},[s("div",ot,[et(nt,{company_id:i.value.company_id,"onUpdate:company_id":t[0]||(t[0]=l=>i.value.company_id=l),department_id:i.value.department_id,"onUpdate:department_id":t[1]||(t[1]=l=>i.value.department_id=l),employee_id:i.value.employee_id,"onUpdate:employee_id":t[2]||(t[2]=l=>i.value.employee_id=l),line_type:i.value.line_type,"onUpdate:line_type":t[3]||(t[3]=l=>i.value.line_type=l),"with-type":!0,"initial-value":{...e.$route.query,employee_id:e.$route.query.employee_id||e.$route.query.user_id},onFilterChange:Ke,class:"w-full"},null,8,["company_id","department_id","employee_id","line_type","initial-value"])])],512),s("div",{ref_key:"controlsRef",ref:U},[s("div",rt,[s("div",dt,[s("div",it,[s("button",{type:"button",class:"rounded-lg border border-slate-200 bg-white px-3 py-2 text-xs font-semibold text-slate-700 hover:bg-slate-50",onClick:t[4]||(t[4]=l=>oe(-1)),title:"Previous range"}," Prev "),s("div",ut,[s("div",ct,[s("label",pt,[t[12]||(t[12]=se(" Past ")),G(s("input",{"onUpdate:modelValue":t[5]||(t[5]=l=>g(o).past_days=l),type:"number",min:"0",max:"60",class:"w-14 rounded-lg border border-slate-200 bg-white px-2 py-2 text-xs focus:border-slate-400 focus:outline-none"},null,512),[[Q,g(o).past_days,void 0,{number:!0}]])]),s("label",ft,[t[13]||(t[13]=se(" Future ")),G(s("input",{"onUpdate:modelValue":t[6]||(t[6]=l=>g(o).future_days=l),type:"number",min:"0",max:"60",class:"w-14 rounded-lg border border-slate-200 bg-white px-2 py-2 text-xs focus:border-slate-400 focus:outline-none"},null,512),[[Q,g(o).future_days,void 0,{number:!0}]])])])]),s("button",{type:"button",class:"rounded-lg border border-slate-200 bg-white px-3 py-2 text-xs font-semibold text-slate-700 hover:bg-slate-50",onClick:t[7]||(t[7]=l=>oe(1)),title:"Next range"}," Next "),s("label",xt,[G(s("input",{"onUpdate:modelValue":t[8]||(t[8]=l=>g(o).anchor_date=l),type:"date",class:"rounded-lg border border-slate-200 px-2 py-2 text-xs focus:border-slate-400 focus:outline-none"},null,512),[[Q,g(o).anchor_date]])]),s("button",{type:"button",class:"rounded-lg bg-slate-900 px-3 py-2 text-xs font-semibold text-white hover:bg-slate-800",onClick:Be}," Apply ")]),s("div",yt,[s("div",bt,[le.value?(d(),r("div",_t,p(le.value),1)):h("",!0)]),s("div",gt,[s("div",mt,[t[14]||(t[14]=se(" Attendance month: ")),s("span",vt,p(ee.value),1)])]),t[15]||(t[15]=tt('<div class="hidden sm:flex items-center gap-2"><span class="inline-flex items-center gap-1 text-[11px] text-slate-500"><span class="h-2.5 w-2.5 rounded-full bg-amber-300"></span> Pending </span><span class="inline-flex items-center gap-1 text-[11px] text-slate-500"><span class="h-2.5 w-2.5 rounded-full bg-emerald-300"></span> Approved </span><span class="inline-flex items-center gap-1 text-[11px] text-slate-500"><span class="h-2.5 w-2.5 rounded-full bg-rose-300"></span> Rejected </span></div>',1))])])])],512),g(A)?(d(),r("div",ht,p(g(A)),1)):h("",!0),g(B)?(d(),r("div",wt," Loading weekly updates... ")):(d(),r("div",kt,[s("div",null,[s("table",St,[s("thead",Ct,[s("tr",null,[s("th",{class:"sticky left-0 z-30 w-10 border-r border-slate-200 bg-slate-50 p-2 text-left text-xs font-semibold uppercase tracking-wide",style:J(O.value)}," # ",4),s("th",{class:"sticky left-12 z-30 border-r border-slate-200 bg-slate-50 px-4 py-3 text-left text-xs font-semibold uppercase tracking-wide",style:J(O.value)}," Employee ",4),(d(!0),r(L,null,X(g(D),l=>(d(),r("th",{key:l,class:Y(["sticky z-20 min-w-[40px] p-2 text-center hover:bg-slate-100",Ee(l)]),style:J(O.value)},[s("div",$t,p(P(l)),1),s("div",Tt,p(k(l)),1),te(l)?(d(),r("div",Dt,"Today")):h("",!0)],6))),128)),s("th",{class:"sticky z-20 bg-slate-50 px-4 py-3 text-right text-xs font-semibold uppercase tracking-wide",style:J(O.value)}," SMS ",4)])]),s("tbody",null,[(d(!0),r(L,null,X(g(N),(l,Ve)=>{var ke,Se;return d(),r("tr",{key:l.user.id,class:"border-t border-slate-200 hover:bg-sky-50/70"},[s("td",Mt,p(Ve+1),1),s("td",jt,[s("div",qt,[s("a",{href:Fe(l.user),target:"_blank",rel:"noopener",class:"group inline-flex items-center gap-2 truncate font-semibold text-slate-900 hover:text-slate-900",title:`Open Attendance (${ee.value})`},[s("span",Nt,p(l.user.name),1)],8,It),s("div",Rt,p(((ke=l.user.company)==null?void 0:ke.name)||"—")+" · "+p(((Se=l.user.department)==null?void 0:Se.name)||"—"),1)])]),(d(!0),r(L,null,X(g(D),E=>(d(),r("td",{key:`${l.user.id}-${E}`,class:Y(["p-2 border-r border-slate-200 text-center",Le(E)])},[u(l,E).length?(d(),r("div",Ut,[(d(!0),r(L,null,X(u(l,E),I=>(d(),r("button",{key:`${I.kind}-${I.ref_id}-${I.code}`,type:"button",class:Y(["rounded-full px-2 py-0.5 text-[11px] font-semibold ring-1 ring-inset transition hover:scale-[1.02] active:scale-[0.99]",De(I)]),title:Me(I),onClick:Cs=>Pe(I)},p(ne(I)),11,zt))),128))])):(d(),r("span",Ot,"—"))],2))),128)),s("td",Ft,[s("button",{type:"button",class:"rounded-lg bg-slate-900 px-3 py-2 text-xs font-semibold text-white hover:bg-slate-800 disabled:cursor-not-allowed disabled:opacity-50",disabled:!ae(l)||!!n.value.busyKey,onClick:E=>Re(l)},[n.value.busyKey?(d(),r("span",Et,"Sending...")):(d(),r("span",Lt,"Send SMS"))],8,At)])])}),128)),g(N).length?h("",!0):(d(),r("tr",Wt,[s("td",{class:"bg-white px-4 py-10 text-slate-500 text-center",colspan:g(D).length+3}," No updates found. ",8,Bt)]))])])])])),n.value.smsOpen?(d(),r("div",Kt,[s("div",Pt,[s("div",Vt,[s("div",null,[t[16]||(t[16]=s("h3",{class:"text-sm font-semibold text-slate-900"},"Send SMS",-1)),s("p",Ht,p(((c=(a=n.value.smsTarget)==null?void 0:a.user)==null?void 0:c.name)||"Employee"),1)]),s("button",{type:"button",class:"rounded-lg border border-slate-200 bg-white px-2 py-1 text-xs font-semibold text-slate-700 hover:bg-slate-50",onClick:Z}," Close ")]),s("div",Yt,[s("div",Gt,[t[17]||(t[17]=s("div",{class:"font-semibold text-slate-700"},"Application",-1)),V((f=n.value.smsTarget)==null?void 0:f.item)?(d(),r("a",{key:0,href:V((m=n.value.smsTarget)==null?void 0:m.item),target:"_blank",rel:"noopener",class:"inline-flex items-center gap-2 rounded-lg border border-slate-200 bg-white px-3 py-1.5 text-[11px] font-semibold text-slate-700 hover:bg-slate-50",title:"Open application details"}," Open ",8,Qt)):h("",!0)]),s("div",Jt,[s("span",Xt,p(((re=($=n.value.smsTarget)==null?void 0:$.item)==null?void 0:re.code)||((ie=(de=n.value.smsTarget)==null?void 0:de.item)==null?void 0:ie.kind)||"N/A"),1),s("span",Zt,"#"+p(((ce=(ue=n.value.smsTarget)==null?void 0:ue.item)==null?void 0:ce.ref_id)||"N/A"),1),s("span",es,p(((fe=(pe=n.value.smsTarget)==null?void 0:pe.item)==null?void 0:fe.status)||"Unknown"),1)]),(ye=(xe=n.value.smsTarget)==null?void 0:xe.item)!=null&&ye.label?(d(),r("div",ts,p((_e=(be=n.value.smsTarget)==null?void 0:be.item)==null?void 0:_e.label),1)):h("",!0)]),s("div",ss,[t[19]||(t[19]=s("label",{class:"text-xs font-semibold text-slate-600"},"Message",-1)),G(s("textarea",{"onUpdate:modelValue":t[9]||(t[9]=l=>n.value.smsMessage=l),rows:"4",class:"mt-2 w-full rounded-xl border border-slate-200 px-3 py-2 text-sm text-slate-700 focus:border-slate-400 focus:outline-none",placeholder:"Write your SMS message..."},null,512),[[Q,n.value.smsMessage]]),s("div",ns,[s("span",null,p((n.value.smsMessage||"").length)+" characters",1),t[18]||(t[18]=s("span",null,"Message will be sent to the employee.",-1))])]),s("div",as,[s("button",{type:"button",class:"rounded-lg border border-slate-200 bg-white px-3 py-2 text-xs font-semibold text-slate-700 hover:bg-slate-50",onClick:Z}," Cancel "),s("button",{type:"button",class:"rounded-lg bg-slate-900 px-4 py-2 text-xs font-semibold text-white hover:bg-slate-800 disabled:cursor-not-allowed disabled:opacity-60",disabled:!Ie.value,onClick:ze},[n.value.busyKey?(d(),r("span",os,"Sending...")):(d(),r("span",rs,"Send SMS"))],8,ls)])])])):h("",!0),n.value.detailsOpen?(d(),r("div",ds,[s("div",is,[s("div",us,[t[20]||(t[20]=s("div",null,[s("h3",{class:"text-sm font-semibold text-slate-900"},"Update Details"),s("p",{class:"text-xs text-slate-500"},"Quick view")],-1)),s("div",cs,[V(n.value.selectedItem)?(d(),r("a",{key:0,href:V(n.value.selectedItem),target:"_blank",rel:"noopener",class:"btn-1 py-1 px-2 text-xs font-semibold",title:"Open application details"}," Application ",8,ps)):h("",!0),s("button",{type:"button",class:"rounded-lg border border-slate-200 bg-white px-2 py-1 text-xs font-semibold text-slate-700 hover:bg-slate-50",onClick:t[10]||(t[10]=l=>n.value.detailsOpen=!1)}," Close ")])]),s("div",fs,[s("div",xs,[t[21]||(t[21]=s("span",{class:"text-xs font-semibold text-slate-500"},"Label",-1)),s("span",ys,p((ge=n.value.selectedItem)==null?void 0:ge.label),1)]),s("div",bs,[t[22]||(t[22]=s("span",{class:"text-xs font-semibold text-slate-500"},"Status",-1)),s("span",_s,p((me=n.value.selectedItem)==null?void 0:me.status),1)]),s("div",gs,[t[23]||(t[23]=s("span",{class:"text-xs font-semibold text-slate-500"},"Kind",-1)),s("span",ms,p((ve=n.value.selectedItem)==null?void 0:ve.kind),1)]),je(n.value.selectedItem)?(d(),r(L,{key:0},[s("div",vs,[t[24]||(t[24]=s("span",{class:"text-xs font-semibold text-slate-500"},"Current Date",-1)),s("span",hs,p(((he=n.value.selectedItem)==null?void 0:he.current_date)||"N/A"),1)]),s("div",ws,[t[25]||(t[25]=s("span",{class:"text-xs font-semibold text-slate-500"},"Exchange Date",-1)),s("span",ks,p(((we=n.value.selectedItem)==null?void 0:we.exchange_date)||"N/A"),1)])],64)):h("",!0)]),s("div",Ss,[s("button",{type:"button",class:"rounded-lg border border-slate-200 bg-white px-3 py-2 text-xs font-semibold text-slate-700 hover:bg-slate-50",onClick:t[11]||(t[11]=l=>n.value.detailsOpen=!1)}," Done ")])])])):h("",!0)])}}};export{Rs as default};
