import{_ as O}from"./CommentModal-BMupDTEy.js";import{u as G}from"./useTaskStore-CGSVsRaJ.js";import{r as I,b as U,c as n,a as o,h as e,F as R,t as l,x as V,q as L,m as d,n as P,f as F,p as S,o as i,l as u,g as H}from"./index-CF2vbTeX.js";import"./useCommentStore-S9sgMPa2.js";const $={class:"container mx-auto p-6"},j={class:"max-w-3xl mx-auto bg-white shadow-lg rounded-lg p-6"},q={key:0,class:"text-center py-4 text-gray-500"},z={class:"hover:bg-gray-50 grid grid-cols-2"},K={class:"py-2 font-medium col-span-full text-xl"},W={class:"py-2 font-medium mb-4 col-span-full"},J={class:"flex gap-2 flex-wrap"},Q={class:"py-2"},X={class:"py-2"},Y={class:"px-4 py-2 flex justify-center items-center gap-2 col-span-full"},Z={key:2,class:"text-center py-4 text-red-500"},ns={__name:"TaskShow",setup(ss){const t=G(),h=F(),N=H(),m=I(null),c=I(!1),D=h.params.id;U(async()=>{await t.fetchTask(D)});const M=p=>{event.stopPropagation(),N.push({name:"TaskEdit",params:{id:p}})},A=()=>{c.value=!1,m.value=null};return(p,s)=>{var f,g,x,y,b,v,_,w,C,T,E;const k=S("RouterLink"),B=S("router-view");return i(),n("div",$,[o("div",j,[e(t).loading?(i(),n("div",q,"Loading task details...")):e(t).task?(i(),n(R,{key:1},[o("section",z,[o("div",K,l(e(t).task.title),1),o("div",W,[s[5]||(s[5]=o("div",{class:"text-xs mb-0.5 text-gray-600 uppercase"},"Assigns",-1)),o("div",J,[(i(!0),n(R,null,V(e(t).task.users,a=>(i(),n("span",{onClick:s[0]||(s[0]=r=>r.stopPropagation()),key:a.id,class:"btn-1 !inline-flex flex-shrink-0"},[s[4]||(s[4]=o("i",{class:"fad fa-user"},null,-1)),u(" "+l(a==null?void 0:a.name),1)]))),128))])]),o("div",Q,[s[6]||(s[6]=o("div",{class:"text-xs mb-0.5 text-gray-600 uppercase"},"Priority",-1)),o("span",{class:L([{"text-green-600":((f=e(t).task)==null?void 0:f.priority)==="LOW","text-yellow-600":((g=e(t).task)==null?void 0:g.priority)==="MEDIUM","text-orange-600":((x=e(t).task)==null?void 0:x.priority)==="HIGH","text-red-600":((y=e(t).task)==null?void 0:y.priority)==="CRITICAL"},"font-semibold"])},l(e(t).task.priority),3)]),o("div",X,[s[7]||(s[7]=o("div",{class:"text-xs mb-0.5 text-gray-600 uppercase"},"Status",-1)),o("span",{class:L([{"bg-gray-200":((b=e(t).task)==null?void 0:b.status)==="PENDING","bg-blue-200":((v=e(t).task)==null?void 0:v.status)==="IN_PROGRESS","bg-green-200":((_=e(t).task)==null?void 0:_.status)==="COMPLETED","bg-red-200":((w=e(t).task)==null?void 0:w.status)==="BLOCKED"},"px-3 py-0.5 rounded-full"])},l((C=e(t).task)==null?void 0:C.status),3)]),s[10]||(s[10]=o("hr",{class:"my-3 col-span-full"},null,-1)),o("div",Y,[o("button",{onClick:s[1]||(s[1]=a=>{var r;return M((r=e(t).task)==null?void 0:r.id)}),class:"btn-2"},"Edit"),d(k,{to:{name:"TaskUserAssign",params:{id:(T=e(t).task)==null?void 0:T.id}},class:"bg-indigo-500 hover:bg-indigo-600 text-white font-semibold px-3 py-1 rounded-full transition",onClick:s[2]||(s[2]=a=>a.stopPropagation())},{default:P(()=>s[8]||(s[8]=[o("i",{class:"fas fa-user-plus"},null,-1),u(" Assign Users ")])),_:1},8,["to"]),d(k,{to:{name:"TaskReports",params:{id:(E=e(t).task)==null?void 0:E.id}},onClick:s[3]||(s[3]=a=>a.stopPropagation()),class:"py-1 btn-3 ml-auto"},{default:P(()=>s[9]||(s[9]=[o("i",{class:"fal fa-file-alt"},null,-1),u(" Reports ")])),_:1},8,["to"])])]),d(B)],64)):(i(),n("div",Z,l(e(t).error||"Task not found."),1))]),d(O,{show:c.value,"commentable-id":m.value,"commentable-type":"task","user-id":p.userId,"on-close":A,onSubmitted:e(t).fetchTasks},null,8,["show","commentable-id","user-id","onSubmitted"])])}}};export{ns as default};
