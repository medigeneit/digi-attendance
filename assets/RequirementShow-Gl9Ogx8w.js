import{C as W,r as g,e as z,D as me,m as J,E as pe,z as ce,c as u,o as i,a as e,h as F,G as N,F as L,q as H,j as E,t as k,w as C,x as P,H as be,v as O,f as T,g as h,p as D,i as B,B as re,b as ve,u as fe,I as X,n as ye,k as xe}from"./index-BCAyTfv_.js";import{L as K}from"./LoaderView-B3U4EaDv.js";import{O as Y}from"./OverlyModal-BGl04nT4.js";import{R as ne}from"./RequiredIcon-CMAmUVAS.js";import{f as Z}from"./requirement-kGK04Yzx.js";import{o as ge}from"./url-CePbr-gY.js";import{u as ie}from"./department-D87Gh8xx.js";import{_ as we}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as G}from"./UserChip-BGtme2uF.js";import{u as ae}from"./user-CqVk0DsL.js";import{_ as ke}from"./TaskUserChip-BV8n5Ln7.js";async function he(m,_){return W.post(`/requirements/${m}/details`,_)}async function de(m,_,{params:r={}}={}){return W.get(`/requirements/${m}/details/${_}`,{params:r})}async function $e(m,_,r){return W.put(`/requirements/${m}/details/${_}`,r)}async function _e(m,_,{params:r={}}={}){const a=ge(r);return W.delete(`/requirements/${m}/details/${_}${a?"?"+a:""}`)}const qe={class:"flex flex-wrap items-center gap-1 w-full"},Ce={class:"bg-blue-100 text-blue-700 px-2 py-1 rounded text-sm"},Re=["onClick"],Se={class:"p-3"},De={class:"max-h-60 overflow-auto"},Ie=["onClick"],Ve={key:1,class:"px-3 py-2 text-gray-500"},Ee={__name:"SelectDropdown",props:{options:{type:Array,required:!0},modelValue:{type:[Object,Array,String,Number,null],default:null},placeholder:{type:String,default:"Select..."},multiple:{type:Boolean,default:!1},label:{type:String,default:"label"},value:{type:String,default:"value"},clearable:{type:Boolean,default:!0},searchable:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},filterBy:{type:Function,default:null},reduce:{type:Function,default:null},position:{type:String,default:"auto",validator:m=>["top","left","right","bottom","auto"].includes(m)},containment:{type:Object,default:()=>window}},emits:["update:modelValue","input","open","close","search","search:focus","search:blur","option:selecting","option:selected","option:deselecting","option:deselected"],setup(m,{emit:_}){const r=m,a=_,d=g(!1),q=g(""),l=g(),b=g(),p=g(r.position);function $(o){l.value&&!l.value.contains(o.target)&&d.value&&(d.value=!1,a("close"))}z(()=>{document.addEventListener("click",$),r.containment.addEventListener("scroll",()=>S(d.value))}),me(()=>{document.removeEventListener("click",$),r.containment.removeEventListener("scroll",()=>S(d.value))});const w=J(()=>{const o={top:"bottom-[100%] mb-0.5",left:"right-[100%] mr-0.5",right:"left-[100%] ml-0.5",bottom:"top-[100%] mt-0.5"};return o[p.value]||o.bottom}),c=J(()=>r.multiple?Array.isArray(r.modelValue)?r.modelValue:[]:r.modelValue),y=o=>(o==null?void 0:o[r.label])??(o==null?void 0:o.label)??o,s=o=>(o==null?void 0:o[r.value])??(o==null?void 0:o.value)??o,t=()=>{r.disabled||(d.value=!d.value,a(d.value?"open":"close"))},R=o=>{const f=s(o);return r.multiple?c.value.some(x=>s(x)===f):s(c.value)===f},n=o=>{if(r.multiple)if(R(o)){a("option:deselecting",o);const f=c.value.filter(x=>s(x)!==s(o));a("update:modelValue",f),a("option:deselected",o)}else{a("option:selecting",o);const f=[...c.value,o];a("update:modelValue",f),a("option:selected",o)}else a("option:selected",o),a("update:modelValue",o),d.value=!1,a("close");a("input",o),q.value=""},v=o=>{if(!r.multiple)return;const f=c.value.filter(x=>s(x)!==s(o));a("update:modelValue",f),a("option:deselected",o)},I=J(()=>{const o=q.value.toLowerCase();return!r.searchable||!o?r.options:typeof r.filterBy=="function"?r.filterBy(r.options,o):r.options.filter(f=>y(f).toLowerCase().includes(o))});async function S(o){if(o&&r.position==="auto"){await pe();const f=l.value,x=b.value;if(f&&x){console.log({cm:r.containment});const U=f.getBoundingClientRect(),A=x.offsetHeight,M=(r.containment.innerHeight||r.containment.clientHeight)-U.bottom,j=U.top;console.log({triggerRect:U,dropdownHeight:A,spaceBelow:M,spaceAbove:j}),p.value=M<A&&j>A?"top":"bottom"}}else p.value=r.position}return ce(d,S),(o,f)=>(i(),u("div",{class:"relative w-full",ref_key:"dropdownRef",ref:l},[e("div",{class:P(["border rounded-md px-2 py-1.5 cursor-pointer bg-white flex items-center justify-between",{"bg-gray-100":m.disabled}]),onClick:t},[e("div",qe,[m.multiple?(i(!0),u(L,{key:0},H(c.value,x=>N(o.$slots,"selected-option",{key:s(x),option:x},()=>[e("span",Ce,[E(k(y(x))+" ",1),e("button",{onClick:C(U=>v(x),["stop"]),class:"ml-1 text-xs"},"×",8,Re)])],!0)),128)):N(o.$slots,"selected-option",{key:1,option:c.value,isSelected:R},()=>[E(k(y(c.value)||m.placeholder),1)],!0)]),N(o.$slots,"open-indicator",{},()=>[f[3]||(f[3]=e("svg",{class:"w-4 h-4 ml-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))],!0)],2),F(e("div",{class:P(["absolute w-full border rounded shadow-[0px_0px_10px_0px_rgba(0,0,0,0.25)] z-50 border-teal-500 bg-white",w.value]),ref_key:"dropdownMenuRef",ref:b},[e("div",Se,[N(o.$slots,"search",{},()=>[F(e("input",{type:"text","onUpdate:modelValue":f[0]||(f[0]=x=>q.value=x),class:"w-full px-2 py-1 border rounded",placeholder:"Search...",onFocus:f[1]||(f[1]=x=>o.$emit("search:focus")),onBlur:f[2]||(f[2]=x=>o.$emit("search:blur"))},null,544),[[O,q.value]])],!0)]),N(o.$slots,"list-header",{},void 0,!0),e("ul",De,[I.value.length?(i(!0),u(L,{key:0},H(I.value,x=>(i(),u("li",{key:s(x),class:P([{"bg-blue-50":R(x)},"px-3 py-2 hover:bg-blue-100 cursor-pointer"]),onClick:U=>n(x)},[N(o.$slots,"option",{option:x},()=>[E(k(y(x)),1)],!0)],10,Ie))),128)):(i(),u("li",Ve,[N(o.$slots,"no-options",{},()=>[f[4]||(f[4]=E("No options found"))],!0)]))]),N(o.$slots,"list-footer",{},void 0,!0)],2),[[be,d.value]])],512))}},ue=we(Ee,[["__scopeId","data-v-e22454b9"]]),Fe={class:"sticky top-0 pt-4 bg-white z-10"},Le={class:"mb-4"},Ue={class:"block text-gray-600 text-sm mb-1 font-medium"},Ne={class:"mb-4"},Te={class:"mb-4"},Be={key:0,class:"relative w-full"},Oe={key:0,class:"absolute right-1 text-xl top-0 bottom-0 flex items-center"},Ae={class:"mb-4"},Me={class:"mb-4"},je={class:"sticky bottom-0 bg-white py-4 border-t -mx-6 px-6"},ze={key:0,class:"mb-4 text-red-500 font-medium"},Pe={key:1,class:"mb-4"},He={class:"flex items-center justify-between gap-4"},Ge=["disabled"],We={__name:"RequirementDetailAddForm",props:{requirementId:{type:[Number,String],required:!0}},emits:["create","closeClick","error"],setup(m,{emit:_}){const r=m,a=_,d=ie(),q=g(),l=g(""),b=g(),p=g({title:"",description:"",priority:"",better_to_complete_on:"",supervisor_id:null}),$=g(null),w=g([]);async function c(){var s,t,R;l.value="submitting";const y={...p.value,supervisor_id:(s=$.value)==null?void 0:s.id};console.log({payload:y});try{const n=await he(r.requirementId,y);a("create",n),l.value="create"}catch(n){l.value="error",b.value=((R=(t=n.response)==null?void 0:t.data)==null?void 0:R.message)||"Failed to create requirement detail",a("error",b.value)}}return z(async()=>{var s;const y=((s=(await Z(r.requirementId)).data)==null?void 0:s.requirement)||{};w.value=await d.fetchDepartmentEmployee([y.from_department_id])}),(y,s)=>(i(),u("div",{class:"max-h-[90vh] overflow-auto w-full mx-auto bg-white shadow-lg rounded-lg p-6 pb-0 pt-0 relative",ref_key:"formContainerRef",ref:q},[e("div",Fe,[s[8]||(s[8]=e("h2",{class:"text-2xl font-semibold text-gray-800"},"Add Requirement",-1)),s[9]||(s[9]=e("hr",{class:"mb-4"},null,-1)),e("div",{class:"text-purple-600/80 mb-4 text-xs border-b border-dashed",onClick:s[0]||(s[0]=C(t=>a("ok"),["prevent"]))}," Fields that must be filled in will be marked with an asterisk. ")]),e("form",{onSubmit:C(c,["prevent"]),class:"z-0"},[l.value!=="loading"?(i(),u(L,{key:0},[e("div",Le,[e("label",Ue,[s[10]||(s[10]=E("Title ")),D(ne)]),F(e("input",{"onUpdate:modelValue":s[1]||(s[1]=t=>p.value.title=t),required:"",placeholder:"EnderRequirement detail title",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[O,p.value.title]])]),e("div",Ne,[s[11]||(s[11]=e("label",{class:"block text-gray-600 text-sm mb-1 font-medium"},"Details",-1)),F(e("textarea",{rows:"10","onUpdate:modelValue":s[2]||(s[2]=t=>p.value.description=t),placeholder:"Enter requirement description",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[O,p.value.description]])]),e("div",Te,[s[12]||(s[12]=e("label",{class:"block text-gray-600 text-sm mb-1 font-medium"},"Supervisor",-1)),D(ue,{modelValue:$.value,"onUpdate:modelValue":s[4]||(s[4]=t=>$.value=t),options:w.value,placeholder:"--NO SUPERVISOR--",containment:q.value},{option:B(({option:t})=>[D(G,{user:t||{}},null,8,["user"])]),"selected-option":B(({option:t})=>[t?(i(),u("div",Be,[D(G,{user:t||{}},null,8,["user"]),$.value?(i(),u("div",Oe,[e("button",{onClick:s[3]||(s[3]=C(R=>$.value=null,["prevent"])),class:"text-gray-6 font-semibold 00 hover:text-red-700"}," × ")])):h("",!0)])):h("",!0)]),_:1},8,["modelValue","options","containment"])]),e("div",Ae,[s[14]||(s[14]=e("label",{class:"block text-gray-600 text-sm mb-1 font-medium"},"Priority ",-1)),F(e("select",{class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500","onUpdate:modelValue":s[5]||(s[5]=t=>p.value.priority=t)},s[13]||(s[13]=[e("option",{value:""},"NORMAL",-1),e("option",null,"IMPORTANT",-1),e("option",null,"URGENT",-1)]),512),[[re,p.value.priority]])]),e("div",Me,[s[15]||(s[15]=e("label",{class:"block text-gray-600 text-sm mb-1 font-medium"},"Better to Complete ",-1)),F(e("input",{type:"date","onUpdate:modelValue":s[6]||(s[6]=t=>p.value.better_to_complete_on=t),placeholder:"EnderRequirement detail title",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[O,p.value.better_to_complete_on]])])],64)):h("",!0),e("div",je,[b.value?(i(),u("div",ze,k(b.value),1)):h("",!0),b.value?(i(),u("hr",Pe)):h("",!0),e("div",He,[e("button",{type:"button",onClick:s[7]||(s[7]=C(t=>a("closeClick"),["prevent"])),class:"bg-gray-200 hover:bg-gray-300 text-gray-700 font-semibold px-5 py-2 rounded transition"}," Cancel "),e("button",{disabled:l.value=="loading"||l.value=="submitting",type:"submit",class:"bg-blue-500 hover:bg-blue-600 text-white font-semibold px-5 py-2 rounded transition"},k(l.value=="submitting"?"Saving...":"Add Requirement"),9,Ge)])])],32),l.value==="loading"||l.value==="submitting"?(i(),T(K,{key:0,class:"z-20 absolute inset-0 flex items-center justify-center bg-opacity-30"})):h("",!0)],512))}},Ke={class:"max-h-[90vh] overflow-auto w-full mx-auto bg-white shadow-lg rounded-lg p-6 pb-0 pt-0 relative"},Qe={class:"mb-4"},Je={class:"font-semibold"},Xe={class:"mb-4"},Ye={class:"line-clamp-2"},Ze={key:1,class:"min-h-40"},et={class:"sticky bottom-0 bg-white py-4 border-t -mx-6 px-6"},tt={key:0,class:"mb-4 text-red-500 font-medium"},st={key:1,class:"mb-4"},lt={class:"flex items-center justify-between gap-4"},ot=["disabled"],rt={__name:"RequirementDetailDeleteForm",props:{requirementId:{type:[Number,String],required:!0},detailId:{type:[Number,String],required:!0}},emits:["delete","closeClick","error"],setup(m,{emit:_}){const r=m,a=_,d=ae(),q=g(null),l=g(""),b=g(),p=g([]);async function $(){var w,c;l.value="submitting";try{const y=await _e(r.requirementId,r.detailId);a("delete",y),l.value="create"}catch(y){l.value="error",b.value=((c=(w=y.response)==null?void 0:w.data)==null?void 0:c.message)||"Failed to update requirement detail: "+y,a("error",b.value)}}return z(async()=>{var w,c,y;l.value="loading";try{p.value=await d.fetchDepartmentWiseEmployees(),q.value=(w=(await de(r.requirementId,r.detailId)).data)==null?void 0:w.detail}catch(s){b.value=((y=(c=s.response)==null?void 0:c.data)==null?void 0:y.message)||"Failed to fetch requirement detail"}finally{l.value=""}}),(w,c)=>{var y,s;return i(),u("div",Ke,[c[4]||(c[4]=e("div",{class:"sticky top-0 -mx-6 px-6 z-10 bg-gray-50"},[e("h2",{class:"text-xl font-semibold text-gray-800 py-2"},"Delete Requirement Details"),e("hr",{class:"mb-4 -mx-6"})],-1)),e("form",{onSubmit:C($,["prevent"]),class:"z-0"},[l.value!=="loading"?(i(),u(L,{key:0},[e("div",Qe,[c[1]||(c[1]=e("div",{class:"block text-gray-600 text-sm mb-1 font-medium"},"Title",-1)),e("div",Je,k((y=q.value)==null?void 0:y.title),1)]),e("div",Xe,[c[2]||(c[2]=e("div",{class:"block text-gray-600 text-sm mb-1 font-medium"},"Description",-1)),e("div",Ye,k((s=q.value)==null?void 0:s.description),1)]),c[3]||(c[3]=e("div",{class:"my-8 text-center text-xl text-red-600"},"Are you sure want to delete?",-1))],64)):(i(),u("div",Ze)),e("div",et,[b.value?(i(),u("div",tt,k(b.value),1)):h("",!0),b.value?(i(),u("hr",st)):h("",!0),e("div",lt,[e("button",{type:"button",onClick:c[0]||(c[0]=C(t=>a("closeClick"),["prevent"])),class:"bg-gray-200 hover:bg-gray-300 text-gray-700 font-semibold px-5 py-2 rounded transition"}," Cancel "),e("button",{disabled:l.value=="loading"||l.value=="submitting",type:"submit",class:"bg-red-700 hover:bg-red-500 text-white font-semibold px-5 py-2 rounded transition"},k(l.value=="submitting"?"Deleting...":"Delete"),9,ot)])])],32),l.value==="loading"||l.value==="submitting"?(i(),T(K,{key:0,class:"z-20 absolute inset-0 flex items-center justify-center bg-opacity-30"})):h("",!0)])}}},nt={class:"sticky top-0 pt-4 bg-white z-10"},it={class:"mb-4"},at={class:"block text-gray-600 text-sm mb-1 font-medium"},dt={class:"mb-4"},ut={class:"mb-4"},mt={key:0,class:"relative w-full"},pt={key:0,class:"absolute right-1 text-xl top-0 bottom-0 flex items-center"},ct={class:"mb-4"},bt={class:"mb-4"},vt={class:"sticky bottom-0 bg-white py-4 border-t -mx-6 px-6"},ft={key:0,class:"mb-4 text-red-500 font-medium"},yt={key:1,class:"mb-4"},xt={class:"flex items-center justify-between gap-4"},gt=["disabled"],wt={__name:"RequirementDetailEditForm",props:{requirementId:{type:[Number,String],required:!0},detailId:{type:[Number,String],required:!0}},emits:["update","closeClick","error"],setup(m,{emit:_}){const r=m,a=_,d=g(),q=ae(),l=ie(),b=g(null),p=g(""),$=g(),w=g({title:"",description:"",priority:"",better_to_complete_on:"",supervisor_id:null}),c=g([]),y=g([]),s=g(null);async function t(){var n,v,I;p.value="submitting";const R={...w.value,supervisor_id:(n=s.value)==null?void 0:n.id};console.log({payload:R});try{const S=await $e(r.requirementId,r.detailId,R);a("update",S),p.value="create"}catch(S){p.value="error",$.value=((I=(v=S.response)==null?void 0:v.data)==null?void 0:I.message)||"Failed to update requirement detail",a("error",$.value)}}return z(async()=>{var R,n,v,I;p.value="loading";try{c.value=await q.fetchDepartmentWiseEmployees();const S=((R=(await Z(r.requirementId)).data)==null?void 0:R.requirement)||{};y.value=await l.fetchDepartmentEmployee([S.from_department_id]),b.value=(n=(await de(r.requirementId,r.detailId)).data)==null?void 0:n.detail,w.value=b.value,s.value=b.value.supervisor;const o=new Date(b.value.better_to_complete_on);w.value.better_to_complete_on=o.toISOString().split("T")[0]}catch(S){$.value=((I=(v=S.response)==null?void 0:v.data)==null?void 0:I.message)||"Failed to fetch requirement detail"}finally{p.value=""}}),(R,n)=>(i(),u("div",{ref_key:"formContainerRef",ref:d,class:"max-h-[90vh] w-full mx-auto overflow-auto bg-white shadow-lg rounded-lg p-6 pb-0 pt-0 relative"},[e("div",nt,[n[8]||(n[8]=e("h2",{class:"text-2xl font-semibold text-gray-800"},"Add Requirement Details",-1)),n[9]||(n[9]=e("hr",{class:"mb-4"},null,-1)),e("div",{class:"text-purple-600/80 mb-4 text-xs border-b border-dashed",onClick:n[0]||(n[0]=C(v=>a("ok"),["prevent"]))}," Fields that must be filled in will be marked with an asterisk. ")]),e("form",{onSubmit:C(t,["prevent"]),class:"z-0"},[p.value!=="loading"?(i(),u(L,{key:0},[e("div",it,[e("label",at,[n[10]||(n[10]=E("Title ")),D(ne)]),F(e("input",{"onUpdate:modelValue":n[1]||(n[1]=v=>w.value.title=v),required:"",placeholder:"EnderRequirement detail title",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[O,w.value.title]])]),e("div",dt,[n[11]||(n[11]=e("label",{class:"block text-gray-600 text-sm mb-1 font-medium"},"Description",-1)),F(e("textarea",{rows:"10","onUpdate:modelValue":n[2]||(n[2]=v=>w.value.description=v),placeholder:"Enter requirement description",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[O,w.value.description]])]),e("div",ut,[n[12]||(n[12]=e("label",{class:"block text-gray-600 text-sm mb-1 font-medium"},"Supervisor",-1)),D(ue,{modelValue:s.value,"onUpdate:modelValue":n[4]||(n[4]=v=>s.value=v),options:y.value,placeholder:"--NO SUPERVISOR--",containment:d.value},{option:B(({option:v})=>[D(G,{user:v||{}},null,8,["user"])]),"selected-option":B(({option:v})=>[v?(i(),u("div",mt,[D(G,{user:v||{}},null,8,["user"]),s.value?(i(),u("div",pt,[e("button",{onClick:n[3]||(n[3]=C(I=>s.value=null,["prevent"])),class:"text-gray-6 font-semibold 00 hover:text-red-700"}," × ")])):h("",!0)])):h("",!0)]),_:1},8,["modelValue","options","containment"])]),e("div",ct,[n[14]||(n[14]=e("label",{class:"block text-gray-600 text-sm mb-1 font-medium"},"Priority ",-1)),F(e("select",{class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500","onUpdate:modelValue":n[5]||(n[5]=v=>w.value.priority=v)},n[13]||(n[13]=[e("option",{value:""},"NORMAL",-1),e("option",null,"IMPORTANT",-1),e("option",null,"URGENT",-1)]),512),[[re,w.value.priority]])]),e("div",bt,[n[15]||(n[15]=e("label",{class:"block text-gray-600 text-sm mb-1 font-medium"},"Better to Complete ",-1)),F(e("input",{type:"date","onUpdate:modelValue":n[6]||(n[6]=v=>w.value.better_to_complete_on=v),placeholder:"EnderRequirement detail title",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[O,w.value.better_to_complete_on]])])],64)):h("",!0),e("div",vt,[$.value?(i(),u("div",ft,k($.value),1)):h("",!0),$.value?(i(),u("hr",yt)):h("",!0),e("div",xt,[e("button",{type:"button",onClick:n[7]||(n[7]=C(v=>a("closeClick"),["prevent"])),class:"bg-gray-200 hover:bg-gray-300 text-gray-700 font-semibold px-5 py-2 rounded transition"}," Cancel "),e("button",{disabled:p.value=="loading"||p.value=="submitting",type:"submit",class:"bg-blue-500 hover:bg-blue-600 text-white font-semibold px-5 py-2 rounded transition"},k(p.value=="submitting"?"Saving...":"Edit Detail"),9,gt)])])],32),p.value==="loading"||p.value==="submitting"?(i(),T(K,{key:0,class:"z-20 absolute inset-0 flex items-center justify-center bg-opacity-30"})):h("",!0)],512))}},kt={class:"group/item border text-gray-800 py-4 shadow-sm mb-4 px-4 rounded-md hover:bg-blue-50"},ht={class:"border-2 border-gray-700 p-3 align-top"},$t={class:"text-2xl font-medium"},_t={class:"border-2 border-gray-700 p-3"},qt={class:"text-lg font-semibold mb-2"},Ct={class:"mb-5"},Rt={class:"text-justify"},St=["innerHTML"],Dt={class:"flex items-end"},It={class:"flex items-center gap-1 mb-3"},Vt={class:"text-blue-400 font-semibold"},Et={class:"ml-auto flex gap-6 items-center"},Ft={class:"border-2 border-gray-700 p-3 whitespace-nowrap print:whitespace-break-spaces print:px-0 text-center"},Lt={key:1,colspan:"2",class:"border-2 border-gray-700 p-3 text-center"},Ut={__name:"RequirementDetailTableRow",props:{detail:{type:Object},serial:{type:Number}},emits:["editClick","deleteClick"],setup(m,{emit:_}){const r=_,a=g("line-clamp-2");function d(){a.value=a.value?"":"line-clamp-2"}return(q,l)=>(i(),u("tr",kt,[e("td",ht,[e("span",$t,k(m.serial),1)]),e("td",_t,[e("div",null,[e("div",qt,[e("span",null,k(m.detail.title),1)]),l[3]||(l[3]=e("hr",{class:"mb-4 -mx-4"},null,-1)),e("div",Ct,[l[2]||(l[2]=e("div",{class:"text-gray-400 mr-2 text-xs uppercase font-semibold"},"Description",-1)),e("div",Rt,[e("p",{class:P(["print:line-clamp-none",a.value]),innerHTML:m.detail.description},null,10,St),e("button",{class:"text-blue-500 group-hover/item:underline hover:text-sky-400 ml-auto text-sm print:hidden",onClick:C(d,["prevent"])},k(a.value?"Show More":"Show Less"),1)])])]),e("div",Dt,[e("div",null,[e("div",It,[l[4]||(l[4]=e("span",{class:"text-gray-400 mr-2 text-xs uppercase font-semibold"},"Supervisor:",-1)),m.detail.supervisor?(i(),T(ke,{key:0,user:m.detail.supervisor},null,8,["user"])):h("",!0)]),e("div",null,[l[5]||(l[5]=e("span",{class:"text-gray-500 mr-2 text-xs uppercase font-semibold"},"Priority:",-1)),e("span",Vt,k(m.detail.priority),1)])]),e("div",Et,[e("button",{class:"btn-2",onClick:l[0]||(l[0]=C(b=>r("editClick",m.detail),["prevent"]))},l[6]||(l[6]=[e("i",{class:"fas fa-edit"},null,-1),E("Edit ")])),e("button",{class:"btn-2-red",onClick:l[1]||(l[1]=C(b=>r("deleteClick",m.detail),["prevent"]))},l[7]||(l[7]=[e("i",{class:"fas fa-trash-alt"},null,-1),E("Delete ")]))])])]),e("td",Ft,[e("div",null,k(new Date(m.detail.better_to_complete_on).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",weekday:"short"})),1)]),m.detail.task_id?(i(),u(L,{key:0},[l[8]||(l[8]=e("td",{class:"border-2 border-gray-700 p-3"},null,-1)),l[9]||(l[9]=e("td",{class:"border-2 border-gray-700 p-3"},null,-1))],64)):(i(),u("td",Lt,l[10]||(l[10]=[e("button",{class:"print:hidden hover:border-2 group-hover/item:bg-blue-200 hover:border-blue-700 text-blue-500 hover:text-white hover:!bg-blue-500 rounded-md px-4 py-1"}," Create Task ",-1)])))]))}},Nt={class:"container mx-auto p-6 print:p-0 w-full print:max-w-full"},Tt={class:"bg-white rounded shadow print:shadow-none p-4 print:p-0 relative"},Bt={class:"flex items-start"},Ot={class:"mb-4 text-lg print:black print:font-bold"},At={class:"ml-auto print:hidden flex gap-2 items-center"},Mt={class:"mb-4 flex items-center gap-1 print:mb-1"},jt={class:"font-bold print:text-gray-900"},zt={class:"mb-4 print:flex print:items-center print:gap-3 print:mb-1"},Pt={class:"print:text-gray-900"},Ht={class:"mb-4 print:flex print:items-center print:gap-3 print:mb-1"},Gt={class:"flex items-center gap-2 print:text-gray-900"},Wt={class:"mb-4 print:flex print:items-center print:gap-3 print:mb-1"},Kt={class:"print:text-gray-900"},Qt={class:"flex items-end mb-3"},Jt={class:"ml-auto print:hidden flex gap-2 text-sm"},Xt={key:0,class:"overflow-x-auto print:overflow-visible"},Yt={class:"w-full table-auto print:table-fixed"},Zt={colspan:"2",class:"border-2 border-gray-800 text-center text-gray-800 print:text-black text-base font-semibold whitespace-nowrap px-3 py-1 print:whitespace-normal w-[25%]"},es={class:"whitespace-nowrap print:whitespace-break-spaces print:px-0 p-3 text-center border-2 border-gray-800"},ts={class:"text-gray-900 text-base"},ss={key:1,class:"border min-h-64 rounded-md flex items-center justify-center group"},bs={__name:"RequirementShow",setup(m){const _=ve(),r=fe(),a=g(""),d=g(null),q=X({open:!1}),l=X({detail:null,open:!1}),b=X({detail:null,open:!1});z(async()=>{await p()});async function p(){var s;a.value="loading",d.value=(s=(await Z(_.params.id)).data)==null?void 0:s.requirement,a.value=""}function $(){q.open=!0}function w(s){l.open=!0,l.detail=s}function c(s){b.open=!0,b.detail=s}function y(){window.print()}return(s,t)=>{var n,v,I,S,o,f,x,U,A,M,j,ee,te,se;const R=ye("RouterLink");return i(),u("div",Nt,[q.open?(i(),T(Y,{key:0,class:"*:max-w-4xl"},{default:B(()=>[D(We,{requirementId:d.value.id,onCloseClick:t[0]||(t[0]=V=>q.open=!1),onCreate:t[1]||(t[1]=async()=>{q.open=!1,await p()})},null,8,["requirementId"])]),_:1})):h("",!0),l.open?(i(),T(Y,{key:1},{default:B(()=>{var V;return[D(wt,{requirementId:d.value.id,detailId:(V=l.detail)==null?void 0:V.id,onCloseClick:t[2]||(t[2]=Q=>l.open=!1),onUpdate:t[3]||(t[3]=async()=>{l.open=!1,await p()})},null,8,["requirementId","detailId"])]}),_:1})):h("",!0),b.open?(i(),T(Y,{key:2},{default:B(()=>{var V;return[D(rt,{requirementId:d.value.id,detailId:(V=b.detail)==null?void 0:V.id,onCloseClick:t[4]||(t[4]=Q=>b.open=!1),onDelete:t[5]||(t[5]=async()=>{b.open=!1,await p()})},null,8,["requirementId","detailId"])]}),_:1})):h("",!0),e("div",Tt,[e("div",Bt,[e("div",Ot,[t[7]||(t[7]=e("div",{class:"text-gray-800 print:leading-none"},"To",-1)),e("div",null,k((v=(n=d.value)==null?void 0:n.to_department)==null?void 0:v.name),1)]),e("div",At,[(((I=d.value)==null?void 0:I.details)||[]).length>0?(i(),u("button",{key:0,class:"btn-3 font-semibold !pl-2 !pr-4",onClick:C(y,["prevent"])},t[8]||(t[8]=[e("i",{class:"fad fa-print text-xl"},null,-1),E("Print ")]))):h("",!0),e("button",{class:"btn-3",onClick:t[6]||(t[6]=C(()=>xe(r).back(),["prevent"]))},"Back"),D(R,{class:"btn-2",to:`/requirements/edit/${(S=d.value)==null?void 0:S.id}`},{default:B(()=>t[9]||(t[9]=[E("Edit")])),_:1,__:[9]},8,["to"])])]),t[24]||(t[24]=e("div",{class:"text-center text-xl font-bold mb-2 underline"},"Requirement Form",-1)),e("div",Mt,[t[10]||(t[10]=e("div",{class:"text-gray-800 text-sm"},"Requirement ID:",-1)),e("div",jt,k((o=d.value)==null?void 0:o.id),1)]),e("div",zt,[t[11]||(t[11]=e("div",{class:"text-gray-800 text-sm"},"From",-1)),e("div",Pt,k((x=(f=d.value)==null?void 0:f.from_department)==null?void 0:x.name),1)]),e("div",Ht,[t[12]||(t[12]=e("div",{class:"text-gray-500 text-sm"},"Website",-1)),e("div",Gt,[(i(!0),u(L,null,H(((U=d.value)==null?void 0:U.website_tags)||[],V=>(i(),u("div",{key:V.id,class:"border px-2 rounded-md bg-gray-50 shadow-sm"},k(V.name),1))),128))])]),e("div",Wt,[t[13]||(t[13]=e("div",{class:"text-gray-500 text-sm"},"Submission Date",-1)),e("div",Kt,k(new Date((A=d.value)==null?void 0:A.submission_date).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})),1)]),t[25]||(t[25]=e("hr",{class:"mb-4"},null,-1)),e("div",null,[e("div",Qt,[t[15]||(t[15]=e("h2",{class:"text-xl font-semibold"},"Requirement Task List",-1)),e("div",Jt,[(((M=d.value)==null?void 0:M.details)||[]).length>0?(i(),u("button",{key:0,class:"btn-4 font-semibold !pl-2 !pr-4 border-2 border-blue-800 hover:bg-blue-800 hover:text-white",onClick:C($,["prevent"])},t[14]||(t[14]=[e("i",{class:"fad fa-plus-circle text-xl"},null,-1),E("Add Requirement ")]))):h("",!0)])]),(((j=d.value)==null?void 0:j.details)||[]).length>0?(i(),u("div",Xt,[e("table",Yt,[e("thead",null,[e("tr",null,[t[16]||(t[16]=e("th",{rowspan:"2",class:"border-2 border-gray-800 text-left px-4 text-gray-800 print:text-black text-xl font-semibold whitespace-nowrap w-[15%]"}," SL ",-1)),t[17]||(t[17]=e("th",{rowspan:"2",class:"border-2 border-gray-800 text-center text-gray-800 print:text-black text-base font-semibold whitespace-nowrap w-[65%]"}," Requirement Details ",-1)),t[18]||(t[18]=e("th",{rowspan:"2",class:"border-2 border-gray-800 text-center text-gray-800 print:text-black text-base px-3 font-semibold whitespace-nowrap print:whitespace-normal print:p-0 w-[15%]"}," Better To Complete ",-1)),e("th",Zt," For '"+k(((ee=d.value.to_department)==null?void 0:ee.short_name)||((te=d.value.to_department)==null?void 0:te.name))+"' Use ",1)]),t[19]||(t[19]=e("tr",null,[e("td",{class:"border-2 border-gray-800 text-center text-gray-800 print:text-black text-sm font-semibold whitespace-nowrap p-3 print:whitespace-normal"}," Issue No "),e("td",{class:"border-2 border-gray-800 text-center text-gray-800 print:text-black text-sm font-semibold whitespace-nowrap p-3 print:whitespace-normal print:p-0"}," Expected Date ")],-1))]),e("tbody",null,[(i(!0),u(L,null,H(((se=d.value)==null?void 0:se.details)||[],(V,Q)=>{var le,oe;return i(),u(L,{key:V.id},[D(Ut,{detail:V,serial:Q+1,onEditClick:w,onDeleteClick:c},null,8,["detail","serial"]),e("tr",null,[e("td",es,[e("div",ts," For '"+k(((le=d.value.to_department)==null?void 0:le.short_name)||((oe=d.value.to_department)==null?void 0:oe.name))+"' Use ",1),t[20]||(t[20]=e("div",{class:"text-gray-800 text-xs"},"(Feedback)",-1))]),t[21]||(t[21]=e("td",{class:"whitespace-nowrap p-3 text-center border-2 border-gray-800",colspan:"4"},null,-1))]),t[22]||(t[22]=e("tr",null,[e("td",{class:"whitespace-nowrap p-3 text-center border-2 border-gray-800 min-h-96"},"   "),e("td",{class:"whitespace-nowrap p-3 text-center border-2 border-gray-800 min-h-96",colspan:"4"},"   ")],-1))],64)}),128))])])])):(i(),u("div",ss,[e("button",{class:"btn-4 font-semibold pl-2 group-hover:border border-blue-300",onClick:C($,["prevent"])},t[23]||(t[23]=[e("i",{class:"fad fa-plus-circle text-2xl"},null,-1),E("Add Requirement ")]))]))]),a.value==="loading"?(i(),T(K,{key:0,class:"absolute inset-0 bg-opacity-90"})):h("",!0)])])}}};export{bs as default};
