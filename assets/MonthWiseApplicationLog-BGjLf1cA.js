import{u as U,b as R,r as S,e as j,A as B,n as E,c as o,o as l,a as t,f as F,g,p as f,k as C,h as G,v as I,j as i,t as s,F as x,x as v,i as D}from"./index-D_-o3ky2.js";import{_ as O}from"./EmployeeFilter-C1XeWgT1.js";import{L as W}from"./LoaderView-RMx_95hp.js";import{u as z}from"./leave-application-qZ61Yz2U.js";import{u as J}from"./user-BR_u_QAg.js";import"./MultiselectDropdown-BAtJGrn7.js";import"./company-C3S1u_0c.js";import"./department-vf73uRhI.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const P={class:"px-4 space-y-4"},H={class:"flex flex-wrap gap-4"},Q={key:0,class:"flex justify-between gap-4 text-sm"},X={class:"card-bg p-4 gap-1"},Y={class:"grid md:grid-cols-2"},Z={key:1},K={class:"space-y-5"},tt={class:"text-base font-semibold text-blue-400 mb-2 text-center capitalize"},et={class:"text-gray-500"},st={key:0,class:"overflow-x-auto rounded border bg-white"},at={class:"min-w-full text-sm text-left"},lt={class:"p-2"},ot={class:"p-2"},nt={class:"p-2"},it={class:"p-2"},rt={class:"p-2 whitespace-pre-line"},dt={class:"p-2 whitespace-pre-line"},pt={class:"p-2 text-sm text-gray-600"},ct={key:1,class:"overflow-x-auto rounded border bg-white"},ut={class:"min-w-full text-sm text-left"},_t={class:"p-2"},ht={class:"p-2"},yt={class:"p-2"},mt={class:"p-2"},gt={class:"p-2 whitespace-pre-line"},ft={class:"p-2 whitespace-pre-line"},xt={class:"p-2 whitespace-pre-line"},vt={class:"p-2 whitespace-pre-line text-center"},bt=["href"],wt={key:1,class:"text-gray-400"},kt={class:"p-2 whitespace-pre-line"},At={class:"p-2 text-sm text-gray-600"},Dt={key:2,class:"overflow-x-auto rounded border bg-white"},St={class:"min-w-full text-sm text-left"},Ct={class:"p-2"},Lt={class:"p-2"},Nt={class:"p-2"},qt={class:"p-2"},Vt={class:"p-2 whitespace-pre-line"},$t={class:"p-2 whitespace-pre-line"},Bt={class:"p-2 text-sm text-gray-600"},Tt={key:3,class:"overflow-x-auto rounded border bg-white"},Mt={class:"min-w-full text-sm text-left"},Ut={class:"p-2"},Rt={class:"p-2"},jt={class:"p-2"},Et={class:"p-2"},Ft={class:"p-2"},Gt={class:"p-2"},It={class:"p-2 whitespace-pre-line"},Ot={class:"p-2 text-sm text-gray-600"},te={__name:"MonthWiseApplicationLog",setup(Wt){const b=U(),u=R(),L=J(),w=z(),r=S(null),h=S(u.query.date||w.selectedMonth),d=S({company_id:u.query.company_id||"",department_id:u.query.department_id||"all",type:u.query.type||"all",employee_id:u.query.employee_id||"",category:""}),N=async n=>{n?(await L.fetchUser(n),r.value=L.user):r.value=null},k=async()=>{d.value.employee_id&&h.value&&await w.getMonthlyApplicationLog(d.value.employee_id,h.value)};j(async()=>{d.value.employee_id&&(await N(d.value.employee_id),await k())}),B(()=>d.value.employee_id,async(n,e)=>{n&&n!==e&&(await N(n),await k(),b.replace({query:{...u.query,employee_id:n}}))}),B(h,n=>{b.replace({query:{...u.query,date:n}}),k()});const T=()=>b.go(-1),A=n=>new Date(n).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),y=n=>`${new Date(n).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})}`,M=()=>{b.replace({query:{...u.query,company_id:d.value.company_id,department_id:d.value.department_id,type:d.value.type,employee_id:d.value.employee_id}})};return(n,e)=>{var q,V,$;const m=E("RouterLink");return l(),o("div",P,[t("div",{class:"flex items-center justify-between gap-2"},[t("button",{class:"btn-3",onClick:T},e[2]||(e[2]=[t("i",{class:"far fa-arrow-left"},null,-1),t("span",{class:"hidden md:flex"},"Back",-1)])),e[3]||(e[3]=t("h1",{class:"title-md md:title-lg flex-wrap text-center"},"Monthly Application Log",-1)),e[4]||(e[4]=t("div",null,null,-1))]),t("div",H,[f(O,{modelValue:d.value,"onUpdate:modelValue":e[0]||(e[0]=_=>d.value=_),"initial-value":C(u).query,onFilterChange:M},null,8,["modelValue","initial-value"]),t("div",null,[G(t("input",{id:"monthSelect",type:"month","onUpdate:modelValue":e[1]||(e[1]=_=>h.value=_),onChange:k,class:"input-1"},null,544),[[I,h.value]])])]),r.value?(l(),o("div",Q,[t("div",X,[e[13]||(e[13]=t("h2",{class:"title-md"},"Selected Employee Info",-1)),e[14]||(e[14]=t("hr",null,null,-1)),t("div",Y,[t("p",null,[e[5]||(e[5]=t("strong",null,"Name:",-1)),i(" "+s(r.value.name),1)]),t("p",null,[e[6]||(e[6]=t("strong",null,"Designation:",-1)),i(" "+s(((q=r.value.designation)==null?void 0:q.title)||"N/A"),1)]),t("p",null,[e[7]||(e[7]=t("strong",null,"Department:",-1)),i(" "+s(((V=r.value.department)==null?void 0:V.name)||"N/A"),1)]),t("p",null,[e[8]||(e[8]=t("strong",null,"Company:",-1)),i(" "+s((($=r.value.company)==null?void 0:$.name)||"N/A"),1)]),t("p",null,[e[9]||(e[9]=t("strong",null,"Phone:",-1)),i(" "+s(r.value.phone),1)]),t("p",null,[e[10]||(e[10]=t("strong",null,"Email:",-1)),i(" "+s(r.value.email||"N/A"),1)]),t("p",null,[e[11]||(e[11]=t("strong",null,"Blood Group:",-1)),i(" "+s(r.value.blood||"N/A"),1)]),t("p",null,[e[12]||(e[12]=t("strong",null,"Joining Date:",-1)),i(" "+s(r.value.joining_date||"N/A"),1)])])])])):(l(),o("div",Z,e[15]||(e[15]=[t("p",{class:"text-gray-400 text-center text-2xl italic"},"Select an employee, please.",-1)]))),C(w).loading?(l(),F(W,{key:2})):g("",!0),t("div",K,[(l(!0),o(x,null,v(C(w).applicationLog,(_,p)=>(l(),o("div",{key:p,class:"bg-gray-50 p-4 rounded shadow"},[t("h2",tt,[i(s(p.replaceAll("_"," "))+" ",1),t("span",et,"("+s(_.length)+")",1)]),p==="leave_application"?(l(),o("div",st,[t("table",at,[e[17]||(e[17]=t("thead",{class:"bg-gray-100 text-gray-700 text-xs uppercase"},[t("tr",null,[t("th",{class:"p-2"},"#"),t("th",{class:"p-2"},"Create Date"),t("th",{class:"p-2"},"Last Working Date"),t("th",{class:"p-2"},"Resumption Date"),t("th",{class:"p-2"},"Type"),t("th",{class:"p-2"},"Status"),t("th",{class:"p-2"},"Action")])],-1)),t("tbody",null,[(l(!0),o(x,null,v(_,(a,c)=>(l(),o("tr",{key:`${p}-${c}`,class:"border-t hover:bg-gray-50 text-sm"},[t("td",lt,s(c+=1),1),t("td",ot,s(y(a.create_date)),1),t("td",nt,s(a.from),1),t("td",it,s(a.to),1),t("td",rt,s(a.application_types),1),t("td",dt,s(a.status),1),t("td",pt,[f(m,{to:{name:"LeaveApplicationShow",params:{id:a.id}},class:"inline-flex items-center gap-1 text-blue-600 hover:underline"},{default:D(()=>e[16]||(e[16]=[t("i",{class:"far fa-eye"},null,-1),i(" View ")])),_:2,__:[16]},1032,["to"])])]))),128))])])])):g("",!0),p==="short_leave"?(l(),o("div",ct,[t("table",ut,[e[20]||(e[20]=t("thead",{class:"bg-gray-100 text-gray-700 text-xs uppercase"},[t("tr",null,[t("th",{class:"p-2"},"#"),t("th",{class:"p-2"},"Create Date"),t("th",{class:"p-2"},"Type"),t("th",{class:"p-2"},"Date"),t("th",{class:"p-2"},"Check In"),t("th",{class:"p-2"},"Check Out"),t("th",{class:"p-2"},"Duration"),t("th",{class:"p-2"},"Attachment"),t("th",{class:"p-2"},"Status"),t("th",{class:"p-2"},"Action")])],-1)),t("tbody",null,[(l(!0),o(x,null,v(_,(a,c)=>(l(),o("tr",{key:`${p}-${c}`,class:"border-t hover:bg-gray-50 text-sm"},[t("td",_t,s(c+=1),1),t("td",ht,s(y(a.create_date)),1),t("td",yt,s(a.application_types),1),t("td",mt,s(a.date),1),t("td",gt,s(A(a.start_time)),1),t("td",ft,s(A(a.end_time)),1),t("td",xt,s(a.duration)+" m ",1),t("td",vt,[a.attachment?(l(),o("a",{key:0,href:a.attachment,target:"_blank",rel:"noopener",class:"text-blue-600 hover:underline"},e[18]||(e[18]=[t("i",{class:"far fa-eye"},null,-1)]),8,bt)):(l(),o("span",wt,"No file"))]),t("td",kt,s(a.status),1),t("td",At,[f(m,{to:{name:"LeaveApplicationShow",params:{id:a.id}},class:"inline-flex items-center gap-1 text-blue-600 hover:underline"},{default:D(()=>e[19]||(e[19]=[t("i",{class:"far fa-eye"},null,-1),i(" View ")])),_:2,__:[19]},1032,["to"])])]))),128))])])])):g("",!0),p==="exchange_offday"||p==="exchange_shift"?(l(),o("div",Dt,[t("table",St,[e[22]||(e[22]=t("thead",{class:"bg-gray-100 text-gray-700 text-xs uppercase"},[t("tr",null,[t("th",{class:"p-2"},"#"),t("th",{class:"p-2"},"Create Date"),t("th",{class:"p-2"},"Current Date"),t("th",{class:"p-2"},"Exchange Date"),t("th",{class:"p-2"},"Shift"),t("th",{class:"p-2"},"Status"),t("th",{class:"p-2"},"Action")])],-1)),t("tbody",null,[(l(!0),o(x,null,v(_,(a,c)=>(l(),o("tr",{key:`${p}-${c}`,class:"border-t hover:bg-gray-50 text-sm"},[t("td",Ct,s(c+=1),1),t("td",Lt,s(y(a.create_date)),1),t("td",Nt,s(a.current_date),1),t("td",qt,s(a.exchange_date),1),t("td",Vt,s((a==null?void 0:a.shift)||"N/A"),1),t("td",$t,s(a.status),1),t("td",Bt,[f(m,{to:{name:"LeaveApplicationShow",params:{id:a.id}},class:"inline-flex items-center gap-1 text-blue-600 hover:underline"},{default:D(()=>e[21]||(e[21]=[t("i",{class:"far fa-eye"},null,-1),i(" View ")])),_:2,__:[21]},1032,["to"])])]))),128))])])])):g("",!0),p==="manual_attendance"?(l(),o("div",Tt,[t("table",Mt,[e[24]||(e[24]=t("thead",{class:"bg-gray-100 text-gray-700 text-xs uppercase"},[t("tr",null,[t("th",{class:"p-2"},"#"),t("th",{class:"p-2"},"Create Date"),t("th",{class:"p-2"},"Date"),t("th",{class:"p-2"},"Type"),t("th",{class:"p-2"},"Check In"),t("th",{class:"p-2"},"Check Out"),t("th",{class:"p-2"},"Status"),t("th",{class:"p-2"},"Action")])],-1)),t("tbody",null,[(l(!0),o(x,null,v(_,(a,c)=>(l(),o("tr",{key:`${p}-${c}`,class:"border-t hover:bg-gray-50 text-sm"},[t("td",Ut,s(c+=1),1),t("td",Rt,s(y(a.create_date)),1),t("td",jt,s(y(a.check_in||a.check_out)),1),t("td",Et,s(a.application_types),1),t("td",Ft,s(A(a.check_in)||"N/A"),1),t("td",Gt,s(A(a.check_out)||"N/A"),1),t("td",It,s(a.status),1),t("td",Ot,[f(m,{to:{name:"LeaveApplicationShow",params:{id:a.id}},class:"inline-flex items-center gap-1 text-blue-600 hover:underline"},{default:D(()=>e[23]||(e[23]=[t("i",{class:"far fa-eye"},null,-1),i(" View ")])),_:2,__:[23]},1032,["to"])])]))),128))])])])):g("",!0)]))),128))])])}}};export{te as default};
