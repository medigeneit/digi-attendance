import{u as M,b as O,d as L,r as n,e as A,c as l,o as a,a as t,p as B,w as C,g as _,h as i,v,C as b,t as d,F as x,x as U,k as F}from"./index-Bye8Nm01.js";import{L as H}from"./LoaderView-CYvfQEqW.js";import{u as T}from"./attendance-apuHWzp7.js";import{u as R}from"./department-6D9R1CXi.js";import{u as N}from"./overtime-9Y9jNwCX.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const W={class:"max-w-2xl mx-auto p-4 space-y-4"},j={key:0,class:"text-center"},$={class:"grid grid-cols-2 gap-4"},E={class:"grid grid-cols-2 gap-4"},I={class:"input-1 w-full text-center"},Y={class:"input-1 w-full text-center"},z={class:"grid grid-cols-2 gap-4"},G=["label"],J=["value"],K={key:0,class:"text-red-500 text-sm"},oe={__name:"MyOvertimeAdd",setup(P){const f=M(),h=O(),y=R(),w=N(),c=T(),u=L(),k=n(!1),g=n(null),m=n({}),o=n({date:h.query.date||"",duty_type:"",request_overtime_hours:"",higher_authority_user_id:"",work_details:""}),p=async()=>{await c.getMonthlyAttendanceByShift(u.user.id,S(o.value.date)),m.value=await c.getUserDailyLogsByDate(u.user.id,o.value.date)},S=r=>{const e=new Date(r),s=e.getFullYear(),V=String(e.getMonth()+1).padStart(2,"0");return`${s}-${V}`},D=()=>{f.go(-1)},q=async()=>{await w.createOvertime(o.value),f.push({name:"MyOvertimeList"})};return A(async()=>{var r;(r=u.user)!=null&&r.id||await u.fetchUser(),o.value.date&&await p(),await y.fetchDepartments("all")}),(r,e)=>(a(),l("div",W,[t("div",{class:"flex items-center justify-between gap-2"},[t("button",{class:"btn-3",onClick:D},e[5]||(e[5]=[t("i",{class:"far fa-arrow-left"},null,-1),t("span",{class:"hidden md:flex"},"Back",-1)])),e[6]||(e[6]=t("h1",{class:"title-md md:title-lg flex-wrap text-center"},"Overtime Request Form",-1))]),k.value?(a(),l("div",j,[B(H)])):(a(),l("form",{key:1,onSubmit:C(q,["prevent"]),class:"space-y-4 card-bg md:p-8 p-4 text-sm md:text-base"},[t("div",$,[t("div",null,[e[7]||(e[7]=t("label",{for:"date",class:"block text-sm font-medium"},"Date",-1)),i(t("input",{onChange:p,type:"date",id:"date","onUpdate:modelValue":e[0]||(e[0]=s=>o.value.date=s),class:"input-1 w-full",required:""},null,544),[[v,o.value.date]])]),t("div",null,[e[9]||(e[9]=t("label",{for:"duty_type",class:"block text-sm font-medium"},"Duty Type",-1)),i(t("select",{id:"duty_type","onUpdate:modelValue":e[1]||(e[1]=s=>o.value.duty_type=s),class:"input-1 w-full",required:""},e[8]||(e[8]=[t("option",{value:"",selected:"",disabled:""},"--Duty Type--",-1),t("option",{value:"WL"},"WL",-1),t("option",{value:"HD"},"HD",-1),t("option",{value:"OVT"},"OVT",-1)]),512),[[b,o.value.duty_type]])])]),t("div",E,[t("div",null,[e[10]||(e[10]=t("span",{class:"block text-sm font-medium"},"Check In",-1)),t("div",I,d(m.value.entry_time||"--:--"),1)]),t("div",null,[e[11]||(e[11]=t("span",{class:"block text-sm font-medium"},"Check Out",-1)),t("div",Y,d(m.value.exit_time||"--:--"),1)])]),t("div",z,[t("div",null,[e[12]||(e[12]=t("label",{for:"request_overtime_hours",class:"block text-sm font-medium"}," Overtime (Hour) ",-1)),i(t("input",{onChange:p,type:"number",id:"request_overtime_hours","onUpdate:modelValue":e[2]||(e[2]=s=>o.value.request_overtime_hours=s),class:"input-1 w-full",required:""},null,544),[[v,o.value.request_overtime_hours]])]),t("div",null,[e[14]||(e[14]=t("label",{for:"higher_authority_user_id",class:"block text-sm font-medium"}," Higher Authority ",-1)),i(t("select",{id:"higher_authority_user_id","onUpdate:modelValue":e[3]||(e[3]=s=>o.value.higher_authority_user_id=s),class:"input-1 w-full",required:""},[e[13]||(e[13]=t("option",{value:"",selected:"",disabled:""},"--Higher Authority--",-1)),(a(!0),l(x,null,U(F(y).departments,s=>(a(),l(x,{key:s.id},[s.in_charge?(a(),l("optgroup",{key:0,label:s.name},[t("option",{value:s.in_charge.id},d(s.in_charge.name),9,J)],8,G)):_("",!0)],64))),128))],512),[[b,o.value.higher_authority_user_id]])])]),t("div",null,[e[15]||(e[15]=t("label",{for:"higher_authority_user_id",class:"block text-sm font-medium"}," Details (Reason / Work description) ",-1)),i(t("textarea",{rows:"4","onUpdate:modelValue":e[4]||(e[4]=s=>o.value.work_details=s),class:"input-1 w-full"},null,512),[[v,o.value.work_details]])]),e[16]||(e[16]=t("hr",null,null,-1)),g.value?(a(),l("div",K,d(g.value),1)):_("",!0),e[17]||(e[17]=t("div",{class:"flex justify-center"},[t("button",{type:"submit",class:"btn-2"},"Submit")],-1))],32))]))}};export{oe as default};
