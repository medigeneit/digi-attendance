import{u as K,b as Q,r as _,s as k,e as X,A as x,k as Y,c as p,o as i,a as t,m as S,t as a,h as d,g as m,C,F as N,y as R,l as U,i as q,v as Z,x as y,n as I,f as W,p as $}from"./index-CoAjNv2r.js";import{L as ee}from"./LoaderView-BAOr41NC.js";import{_ as E}from"./MultiselectDropdown-Caw3UwVY.js";import{u as te}from"./attendance-Bk0TLSnv.js";import{u as se}from"./company-D6lGxvJL.js";import{u as ae}from"./department-0NY1y8Hi.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vue-multiselect.esm-PY59o7Hw.js";const oe={class:"px-4 space-y-4"},le={class:"flex items-center justify-between gap-2"},ne={class:"title-md md:title-lg flex-wrap text-center"},ie={class:"flex flex-wrap gap-4"},re=["value"],de={key:1,class:"space-y-4"},ue={class:"overflow-x-auto card-bg"},pe={class:"min-w-full table-auto border-collapse border border-gray-300 bg-white"},ce={class:"text-center text-xs"},ve={class:"border px-1 py-0.5"},be={class:"border px-1 py-0.5"},fe={class:"border px-1 py-0.5"},_e={class:"border px-1 py-0.5"},xe=["title"],me=["title"],ye=["title"],he={class:"border px-1 py-0.5"},ke={class:"border px-1 py-0.5"},Se={class:"border px-1 py-0.5"},Ce={class:"border px-1 py-0.5"},Re={__name:"TodayAttendanceReport",setup(Ve){var D;const V=K(),b=Q(),h=se(),A=ae(),r=te(),u=_(""),f=_(""),l=_(""),F=_(""),c=_(((D=b==null?void 0:b.query)==null?void 0:D.search)||""),n=_("all"),{companies:H,employees:M}=k(h),{departments:g}=k(A),{dailyLogs:j}=k(r),v=async()=>{(u.value||c.value)&&await r.getTodayAttendanceReport(u.value,f==null?void 0:f.value.id,l==null?void 0:l.value.id,n==null?void 0:n.value,r.selectedDate,c.value)};X(async()=>{await h.fetchCompanies()}),x([u,F],v),x(u,o=>{h.fetchEmployee(o),A.fetchDepartments(o)}),x(f,o=>{o!=null&&o.id&&v()}),x(l,o=>{o!=null&&o.id&&v()});const z=async()=>{await r.attendanceDownloadExcel(u.value,l==null?void 0:l.value.id,n==null?void 0:n.value,r.selectedDate,c.value)},O=async()=>{await r.attendanceDownloadPdf(u.value,l==null?void 0:l.value.id,n==null?void 0:n.value,r.selectedDate,c.value)},G=()=>V.go(-1);return x(c,o=>{V.push({query:{...b.query,search:o}})}),(o,s)=>{var L,B,P,T;const w=Y("router-link");return i(),p("div",oe,[t("div",le,[t("button",{class:"btn-3",onClick:G},s[6]||(s[6]=[t("i",{class:"far fa-arrow-left"},null,-1),t("span",{class:"hidden md:flex"},"Back",-1)])),t("h1",ne," Daily "+a(((B=(L=d(b))==null?void 0:L.query)==null?void 0:B.search)==="all"?"Attendance":(T=(P=d(b))==null?void 0:P.query)==null?void 0:T.search)+" Report ",1),t("div",{class:"flex gap-4"},[t("button",{type:"button",onClick:z,class:"btn-1"},s[7]||(s[7]=[t("i",{class:"far fa-file-excel text-2xl text-green-500"},null,-1)])),t("button",{type:"button",onClick:O,class:"btn-1"},s[8]||(s[8]=[t("i",{class:"fal fa-file-pdf text-2xl text-red-500"},null,-1)]))])]),t("div",ie,[t("div",null,[m(t("select",{id:"userSelect","onUpdate:modelValue":s[0]||(s[0]=e=>u.value=e),onChange:v,class:"input-1"},[s[9]||(s[9]=t("option",{value:"",disabled:""},"Select a Company",-1)),(i(!0),p(N,null,R(d(H),e=>(i(),p("option",{key:e==null?void 0:e.id,value:e==null?void 0:e.id},a(e==null?void 0:e.name),9,re))),128))],544),[[C,u.value]])]),t("div",null,[U(E,{modelValue:f.value,"onUpdate:modelValue":s[1]||(s[1]=e=>f.value=e),options:d(g),multiple:!1,placeholder:"Select department",label:"name"},null,8,["modelValue","options"])]),t("div",null,[U(E,{modelValue:l.value,"onUpdate:modelValue":s[2]||(s[2]=e=>l.value=e),options:d(M),multiple:!1,placeholder:"Select employee",label:"label"},null,8,["modelValue","options"])]),t("div",null,[m(t("select",{id:"userSelect","onUpdate:modelValue":s[3]||(s[3]=e=>n.value=e),onChange:v,class:"input-1"},s[10]||(s[10]=[q('<option value="all">All Category</option><option value="executive">Executive</option><option value="support_staff">Support Staff</option><option value="doctor">Doctor</option><option value="academy_body">Academy Body</option>',5)]),544),[[C,n.value]])]),t("div",null,[m(t("select",{id:"userSelect","onUpdate:modelValue":s[4]||(s[4]=e=>c.value=e),onChange:v,class:"input-1"},s[11]||(s[11]=[q('<option value="all">All Status</option><option value="Present">Present</option><option value="Absent">Absent</option><option value="Weekend">Weekend</option><option value="Holiday">Holiday</option><option value="Leave">Leave</option>',6)]),544),[[C,c.value]])]),t("div",null,[m(t("input",{type:"date","onUpdate:modelValue":s[5]||(s[5]=e=>d(r).selectedDate=e),onChange:v,class:"input-1"},null,544),[[Z,d(r).selectedDate]])])]),d(r).isLoading?(i(),S(ee,{key:0})):(i(),p("div",de,[t("div",ue,[t("table",pe,[s[14]||(s[14]=t("thead",null,[t("tr",{class:"bg-gray-200 text-xs"},[t("th",{class:"border p-1"},"#"),t("th",{class:"border p-1"},"Emp/Worker Name"),t("th",{class:"border p-1"},"Date"),t("th",{class:"border p-1"},"Day"),t("th",{class:"border p-1"},"Shift"),t("th",{class:"border p-1"},"Entry Time"),t("th",{class:"border p-1"},"Exit Time"),t("th",{class:"border p-1"},"Working Hours"),t("th",{class:"border p-1"},"Late Entry"),t("th",{class:"border p-1"},"Early Leave"),t("th",{class:"border p-1"},"Status")])],-1)),t("tbody",ce,[(i(!0),p(N,null,R(d(j),(e,J)=>(i(),p("tr",{key:e==null?void 0:e.date,class:"border-b hover:bg-blue-100"},[t("td",ve,a(J+=1),1),t("td",be,a(e.user_name),1),t("td",fe,a(e.date),1),t("td",_e,a(e.weekday),1),t("td",{class:"border px-1 py-0.5",title:`${e.shift_start_time} to ${e.shift_end_time}`},a(e.shift_name),9,xe),t("td",{class:y(["border px-1 py-0.5",{"bg-red-200":e.late_duration}]),title:`Device: ${e.entry_device}`},a(e.entry_time),11,me),t("td",{class:y(["border px-1 py-0.5",{"bg-red-200":e.early_leave_duration}]),title:`Device: ${e.exit_device}`},a(e.exit_time),11,ye),t("td",he,a(e.working_hours),1),t("td",ke,a(e.late_duration),1),t("td",Se,a(e.early_leave_duration),1),t("td",Ce,[e.absent_reason?(i(),p("span",{key:0,class:y(["font-medium",{"text-green-600":e.absent_reason.includes("Approved"),"text-orange-500":e.absent_reason.includes("Pending"),"text-gray-600":!e.absent_reason.includes("Approved")&&!e.absent_reason.includes("Pending")}])},[I(a(e.absent_reason)+" ",1),e.application_id?(i(),S(w,{key:0,to:{name:"LeaveApplicationShow",params:{id:e.application_id}}},{default:$(()=>s[12]||(s[12]=[t("i",{class:"far fa-eye"},null,-1)])),_:2},1032,["to"])):W("",!0),e.exchange_application_id?(i(),S(w,{key:1,to:{name:"ExchangeOffdayShow",params:{id:e.exchange_application_id}}},{default:$(()=>s[13]||(s[13]=[t("i",{class:"far fa-eye"},null,-1)])),_:2},1032,["to"])):W("",!0)],2)):(i(),p("span",{key:1,class:y(["font-medium",{"text-red-600":e.status==="Absent","text-green-600":e.status==="Present","text-gray-600":e.status==="Weekend"||e.status==="Leave"}])},a(e.status),3))])]))),128))])])])]))])}}};export{Re as default};
