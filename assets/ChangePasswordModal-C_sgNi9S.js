import{g,G as x,r as p,x as P,c as o,o as a,a as s,w as k,j as C,k as u,aa as w,s as N}from"./index-CwsmHfMp.js";const S={class:"modal-bg"},V={class:"modal-card"},M={class:"grid gap-2 space-y-3"},O={class:"relative"},U=["type"],j={key:0,class:"far fa-eye"},q={key:1,class:"far fa-eye-slash"},B={class:"relative"},D=["type"],z={key:0,class:"far fa-eye"},A={key:1,class:"far fa-eye-slash"},E={class:"relative"},G=["type"],T={key:0,class:"far fa-eye"},$={key:1,class:"far fa-eye-slash"},F={key:0,class:"text-red-500"},H={class:"flex justify-center gap-4"},K={__name:"ChangePasswordModal",props:{user:Object},emits:["close","updated"],setup(I,{emit:f}){const i=f,m=g(),t=x({old_password:"",new_password:"",confirm_password:""}),l=p(!1),n=p(!1),d=p(!1),y=()=>l.value=!l.value,v=()=>n.value=!n.value,b=()=>d.value=!d.value,c=P(()=>t.confirm_password?t.new_password===t.confirm_password:!0),h=async()=>{if(!c.value){alert("New Password and Confirm Password do not match!");return}const _={old_password:t.old_password,new_password:t.new_password,confirm_password:t.confirm_password};await m.changePassword(_),i("updated"),i("close")};return(_,e)=>(a(),o("div",S,[s("div",V,[e[7]||(e[7]=s("h2",{class:"text-xl font-bold text-center"},"Change Password",-1)),s("form",{onSubmit:k(h,["prevent"]),class:"space-y-4"},[s("div",M,[s("div",O,[e[4]||(e[4]=s("label",{class:""},"Old Password",-1)),u(s("input",{"onUpdate:modelValue":e[0]||(e[0]=r=>t.old_password=r),type:l.value?"text":"password",class:"w-full p-2 border rounded pr-10",required:""},null,8,U),[[w,t.old_password]]),s("button",{type:"button",onClick:y,class:"absolute inset-y-0 right-2 mt-6 flex items-center px-2 text-gray-600"},[l.value?(a(),o("i",j)):(a(),o("i",q))])]),s("div",B,[e[5]||(e[5]=s("label",{class:""},"New Password",-1)),u(s("input",{"onUpdate:modelValue":e[1]||(e[1]=r=>t.new_password=r),type:n.value?"text":"password",class:"w-full p-2 border rounded pr-10",required:""},null,8,D),[[w,t.new_password]]),s("button",{type:"button",onClick:v,class:"absolute inset-y-0 right-2 mt-6 flex items-center px-2 text-gray-600"},[n.value?(a(),o("i",z)):(a(),o("i",A))])]),s("div",E,[e[6]||(e[6]=s("label",{class:""},"Confirm Password",-1)),u(s("input",{"onUpdate:modelValue":e[2]||(e[2]=r=>t.confirm_password=r),type:d.value?"text":"password",class:"w-full p-2 border rounded pr-10",required:""},null,8,G),[[w,t.confirm_password]]),s("button",{type:"button",onClick:b,class:"absolute inset-y-0 right-2 mt-6 flex items-center px-2 text-gray-600"},[d.value?(a(),o("i",T)):(a(),o("i",$))])]),c.value?C("",!0):(a(),o("p",F,"Passwords do not match!"))]),s("div",H,[s("button",{type:"submit",class:N(["btn-2",{"pointer-events-none bg-blue-300":!c.value}])}," Set password ",2),s("button",{type:"button",onClick:e[3]||(e[3]=r=>i("close")),class:"btn-3"},"Cancel")])],32)])]))}};export{K as _};
