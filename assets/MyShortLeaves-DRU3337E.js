import{u as M,h as N,x as u,p as D,c as r,o as n,a as t,d as p,k as B,l as m,b as c,v as V,m as f,t as i,F as j,e as T,s as U,j as _}from"./index-BFvVSxOZ.js";import{L as R}from"./LoaderView-DuMIALXw.js";import{u as z}from"./short-leave-CpKhMJeF.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const F={class:"space-y-6 px-4 py-5"},P={class:"rounded-2xl border border-slate-200 bg-white px-4 py-4 shadow-sm md:px-6"},q={class:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between"},E={class:"flex flex-wrap items-center gap-2"},G={key:0,class:"text-center py-10"},H={key:1,class:"space-y-4"},$={key:0,class:"rounded-2xl border border-dashed border-slate-300 bg-slate-50 p-6 text-center text-slate-600"},I={class:"text-sm text-slate-500"},J={key:1,class:"rounded-2xl border border-slate-200 bg-white shadow-sm"},K={class:"flex items-center justify-between border-b border-slate-100 px-5 py-3"},O={class:"text-sm font-semibold text-slate-600"},Q={class:"overflow-x-auto"},W={class:"min-w-full divide-y divide-slate-100 text-sm"},X={class:"divide-y divide-slate-100"},Y={class:"px-4 py-3 font-semibold text-slate-600"},Z={class:"px-4 py-3 text-slate-700"},v={class:"px-4 py-3 text-slate-700"},tt={class:"px-4 py-3 text-slate-700"},et={class:"px-4 py-3 text-slate-700"},st={class:"px-4 py-3 text-slate-700"},ot={class:"px-4 py-3"},rt={key:0,class:"flex items-center gap-1 text-xs font-semibold text-indigo-600"},nt={key:1,class:"text-xs text-slate-400"},dt={class:"px-4 py-3"},it={class:"px-4 py-3"},at={class:"flex items-center justify-end gap-2"},lt=["onClick"],ct=["href"],bt={__name:"MyShortLeaves",setup(pt){const g=M(),d=z();N(()=>{d.fetchMyShortLeaves({date:d.selectedMonth})});const w=()=>{g.go(-1)},L=o=>{const s=(o||"").toLowerCase();return["approved","approved by hr","approved by incharge"].includes(s)?"border border-emerald-200 bg-emerald-50 text-emerald-700":["rejected","cancelled","declined"].includes(s)?"border border-red-200 bg-red-50 text-red-700":s==="pending"||!s?"border border-amber-200 bg-amber-50 text-amber-800":"border border-slate-200 bg-slate-50 text-slate-800"},x=u(()=>d.shortLeaves||[]),h=u(()=>Array.isArray(x.value)?x.value.length:0),S=u(()=>{const o=d.selectedMonth;if(!o)return"All months";const[s,a]=o.split("-");return!s||!a?"All months":new Date(Number(s),Number(a)-1).toLocaleString("en-US",{month:"long",year:"numeric"})}),k=async()=>{d.fetchMyShortLeaves({date:d.selectedMonth})};function A(o){confirm("Are you sure you want to delete this application?")&&d.deleteShortLeave(o)}const b=o=>o?new Date(o).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):"N/A",y=o=>{if(!o)return"N/A";const[s,a]=o.split(":").map(Number),l=new Date;return l.setHours(s,a),l.toLocaleString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})};return(o,s)=>{var l;const a=D("RouterLink");return n(),r("div",F,[t("div",P,[t("div",q,[t("div",null,[t("button",{class:"btn-3 order-2 md:order-1",onClick:w},s[1]||(s[1]=[t("i",{class:"far fa-arrow-left"},null,-1),t("span",{class:"hidden md:inline-flex"},"Back",-1)]))]),s[3]||(s[3]=t("div",{class:"space-y-1"},[t("p",{class:"text-2xl font-semibold text-slate-900"}," Short Leaves Applications ")],-1)),t("div",E,[p(a,{to:{name:"ShortLeaveAdd"},class:"btn-2 order-1 md:order-2"},{default:m(()=>s[2]||(s[2]=[t("i",{class:"far fa-plus mr-1"},null,-1),c(" New Short Leave ")])),_:1,__:[2]}),B(t("input",{id:"monthSelect",type:"month","onUpdate:modelValue":s[0]||(s[0]=e=>f(d).selectedMonth=e),onChange:k,class:"input-1 order-3 w-40"},null,544),[[V,f(d).selectedMonth]])])])]),(l=f(d))!=null&&l.loading?(n(),r("div",G,[p(R)])):(n(),r("div",H,[h.value===0?(n(),r("div",$,[s[5]||(s[5]=t("p",{class:"text-lg font-semibold text-slate-800"},"No requests yet",-1)),t("p",I,"Create your first short leave for "+i(S.value),1),p(a,{to:{name:"ShortLeaveAdd"},class:"mt-3 inline-flex rounded-full border border-indigo-200 bg-indigo-50 px-4 py-2 text-sm font-semibold text-indigo-700 shadow-sm hover:bg-indigo-100"},{default:m(()=>s[4]||(s[4]=[t("i",{class:"far fa-plus mr-2"},null,-1),c(" Create short leave ")])),_:1,__:[4]})])):(n(),r("div",J,[t("div",K,[t("p",O,"Showing "+i(h.value)+" records",1),s[6]||(s[6]=t("span",{class:"text-xs text-slate-500"}," Updated just now ",-1))]),t("div",Q,[t("table",W,[s[11]||(s[11]=t("thead",{class:"bg-slate-50 text-[11px] uppercase tracking-wider text-slate-500"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left"},"#"),t("th",{class:"px-4 py-3 text-left"},"Created"),t("th",{class:"px-4 py-3 text-left"},"Leave Date"),t("th",{class:"px-4 py-3 text-left"},"Type"),t("th",{class:"px-4 py-3 text-left"},"Time"),t("th",{class:"px-4 py-3 text-left"},"Minutes"),t("th",{class:"px-4 py-3 text-left"},"Attachment"),t("th",{class:"px-4 py-3 text-left"},"Status"),t("th",{class:"px-4 py-3 text-right"},"Actions")])],-1)),t("tbody",X,[(n(!0),r(j,null,T(x.value,(e,C)=>(n(),r("tr",{key:e==null?void 0:e.id,class:"hover:bg-slate-50 transition"},[t("td",Y,i(C+1),1),t("td",Z,i(b(e==null?void 0:e.created_at)),1),t("td",v,i(b(e==null?void 0:e.date)),1),t("td",tt,i((e==null?void 0:e.type)||"Short Leave"),1),t("td",et,i(y(e==null?void 0:e.start_time))+" - "+i(y(e==null?void 0:e.end_time)),1),t("td",st,i((e==null?void 0:e.total_minutes)||"â€”"),1),t("td",ot,[e!=null&&e.attachment?(n(),r("div",rt,s[7]||(s[7]=[t("i",{class:"far fa-paperclip"},null,-1),c(" Attached ")]))):(n(),r("span",nt,"None"))]),t("td",dt,[t("span",{class:U(["inline-flex items-center rounded-full px-3 py-1 text-[11px] font-semibold tracking-wide",L(e==null?void 0:e.status)])},i((e==null?void 0:e.status)||"Pending"),3)]),t("td",it,[t("div",at,[p(a,{to:{name:"ShortLeaveShow",params:{id:e==null?void 0:e.id}},class:"inline-flex items-center rounded-full border border-slate-200 px-3 py-1.5 text-xs font-semibold text-slate-600 transition hover:border-indigo-200 hover:text-indigo-700"},{default:m(()=>s[8]||(s[8]=[t("i",{class:"far fa-eye mr-1"},null,-1),c(" View ")])),_:2,__:[8]},1032,["to"]),e.status=="Pending"||!e.status?(n(),r("button",{key:0,type:"button",onClick:xt=>A(e==null?void 0:e.id),class:"inline-flex items-center rounded-full border border-red-200 px-3 py-1.5 text-xs font-semibold text-red-600 transition hover:border-red-300 hover:text-red-700"},s[9]||(s[9]=[t("i",{class:"far fa-trash mr-1"},null,-1),c(" Delete ")]),8,lt)):_("",!0),e!=null&&e.attachment?(n(),r("a",{key:1,href:e.attachment,target:"_blank",rel:"noreferrer",class:"inline-flex items-center rounded-full border border-indigo-200 px-3 py-1.5 text-xs font-semibold text-indigo-600 transition hover:border-indigo-300 hover:text-indigo-800"},s[10]||(s[10]=[t("i",{class:"far fa-download mr-1"},null,-1),c(" Download ")]),8,ct)):_("",!0)])])]))),128))])])])]))]))])}}};export{bt as default};
