import{u as I}from"./user-DvDAfEhf.js";import{s as F,m as Q,c as u,o,n as w,i as M,a as t,j as D,t as g,k as b,p as Z,w as T,q as V,r as S,x as z,e as X,y as U,z as H,F as N,A as R,g as L,f as A,R as ne,B as ee,d as te,h as ae,C as oe,u as le,l as re}from"./index-CHRnfRmw.js";import{L as ie}from"./LoaderView-Dhwquu-H.js";import{m as de,_ as ue}from"./task-tree-BTsRfAK2.js";import{o as K,g as E,a as Y,b as ce,c as ye}from"./datetime-C4Yr_jSk.js";import{u as me}from"./useTaskStore-BqaiaxTC.js";import{_ as pe}from"./TaskTreeViewWithSubTable-DKsyZGQI.js";import{O as ge}from"./OverlyModal-CRw-vqPL.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./TaskSupervisorAndEmployee-D_M0YvLW.js";import"./UserChip-C3_MRFhd.js";import"./TaskStatus-DjWEjmvU.js";import"./url-CePbr-gY.js";const he={class:"grid gap-4 md:grid-cols-3 mt-4 container mx-auto"},fe={class:"text-3xl"},be={class:"text-3xl"},xe={class:"text-3xl"},ve={class:"text-3xl"},_e={class:"text-3xl"},ke={class:"text-3xl"},we={class:"text-3xl"},De={class:"text-3xl"},$e={class:"text-3xl"},Ce={__name:"DashboardAdminView",setup(m){const i=I(),{dashboardInfo:l,selectedDate:y}=F(i);return(a,r)=>{const d=Q("RouterLink");return o(),u("div",he,[w(d,{to:{name:"TodayAttendanceReport",query:{status:"all"}},class:"main-button"},{default:M(()=>{var e;return[t("span",fe,g((e=b(l))==null?void 0:e.totalUsers),1),r[0]||(r[0]=D(" Total Employees "))]}),_:1,__:[0]}),w(d,{to:{name:"TodayAttendanceReport",query:{status:"Present"}},class:"main-button"},{default:M(()=>{var e;return[t("span",be,g((e=b(l))==null?void 0:e.todayPresents),1),r[1]||(r[1]=D(" Today Present "))]}),_:1,__:[1]}),w(d,{to:{name:"TodayAttendanceReport",query:{status:"Absent"}},class:"main-button"},{default:M(()=>{var e;return[t("span",xe,g((e=b(l))==null?void 0:e.todayAbsents),1),r[2]||(r[2]=D(" Today Absent "))]}),_:1,__:[2]}),w(d,{to:{name:"LeaveApplicationsForDay",query:{applicationType:"today"}},class:"main-button"},{default:M(()=>{var e;return[t("span",ve,g((e=b(l))==null?void 0:e.todayLeaves),1),r[3]||(r[3]=D(" Today Leave "))]}),_:1,__:[3]}),w(d,{to:{name:"LeaveApplicationsForDay",query:{applicationType:"tomorrow"}},class:"main-button"},{default:M(()=>{var e;return[t("span",_e,g((e=b(l))==null?void 0:e.tomorrowLeaves),1),r[4]||(r[4]=D(" Tomorrow Leave "))]}),_:1,__:[4]}),w(d,{to:{name:"DateWiseShortLeaveList",query:{date:b(y)}},class:"main-button"},{default:M(()=>{var e;return[t("span",ke,g((e=b(l))==null?void 0:e.todayShortLeaves),1),r[5]||(r[5]=D(" Today Short Leaves "))]}),_:1,__:[5]},8,["to"]),w(d,{to:{name:"DailyLateAttendanceReport",query:{date:b(y)}},class:"main-button"},{default:M(()=>{var e;return[t("span",we,g((e=b(l))==null?void 0:e.todayLateEntries),1),r[6]||(r[6]=D(" Today Late Report "))]}),_:1,__:[6]},8,["to"]),w(d,{to:{name:"PreviousAfterApplicationList",query:{applicationType:"prev",date:b(y)}},class:"main-button"},{default:M(()=>{var e;return[t("span",De,g((e=b(l))==null?void 0:e.prevWeekLeaves),1),r[7]||(r[7]=D(" Leave history of previousÂ week "))]}),_:1,__:[7]},8,["to"]),w(d,{to:{name:"PreviousAfterApplicationList",query:{applicationType:"after",date:b(y)}},class:"main-button"},{default:M(()=>{var e;return[t("span",$e,g((e=b(l))==null?void 0:e.nextWeekLeaves),1),r[8]||(r[8]=D(" Upcoming leaves "))]}),_:1,__:[8]},8,["to"])])}}},G=(m,i,l,y)=>{const a=new Date(y,l-1,i);return m.filter(r=>{const d=r.deadline?new Date(r.deadline):null,e=K(new Date);if(r.assigned_at){const s=K(new Date(r.assigned_at));if(a<s)return!1;let n=null;return r.completed_at&&(n=K(new Date(r.completed_at))),!(n&&n<a||d&&d<a&&a>e)}return!1}).map(r=>{let d=!1;return r.deadline&&(d=new Date(r.deadline)<a),{...r,deadline_crossed:d}})},Me={class:"px-4 py-2 flex items-center bg-gray-50 group"},Le=["disabled"],Te={class:"ml-4 md:ml-auto flex items-center gap-2"},Se=["value"],Ae=Z({__name:"DailyTaskHeading",props:{selectedDay:{type:String,required:!0},loading:{type:Boolean,default:!1}},emits:["change",,"reloadClick","monthWiseButtonClick"],setup(m,{emit:i}){const l=m,y=i;function a(){y("change",E(new Date))}function r(){const e=new Date(l.selectedDay);e.setDate(e.getDate()+1),y("change",E(e))}function d(){const e=new Date(l.selectedDay);e.setDate(e.getDate()-1),y("change",E(e))}return(e,s)=>(o(),u("div",Me,[s[4]||(s[4]=t("h2",{class:"leading-none font-semibold text-lg"},"Daily Task",-1)),t("button",{class:"btn-3 mx-4 h-7",onClick:s[0]||(s[0]=T(n=>y("monthWiseButtonClick"),["prevent"]))},"Month Wise"),t("button",{class:"btn-3 mx-4 h-7",onClick:T(a,["prevent"])},"Today"),t("button",{class:V(["btn-3 px-2 py-2 mx-4 size-7 disabled:text-gray-300 disabled:border-gray-300",{"animate-spin text-gray-300 border-gray-300 !bg-opacity-0":m.loading}]),onClick:s[1]||(s[1]=T(n=>y("reloadClick"),["prevent"])),disabled:m.loading},s[3]||(s[3]=[t("i",{class:"fas fa-redo-alt"},null,-1)]),10,Le),t("div",Te,[t("button",{class:"btn-2 h-7",onClick:T(d,["prevent"])},"Previous Day"),t("button",{class:"btn-2 h-7",onClick:T(r,["prevent"])},"Next Day"),t("input",{type:"date",value:m.selectedDay,onInput:s[2]||(s[2]=n=>{var c;return y("change",(c=n.target)==null?void 0:c.value)}),class:"border px-2 rounded"},null,40,Se)])]))}}),Ne={class:"px-4 py-2 flex items-center bg-gray-50 group"},Re=["disabled"],Be={class:"ml-4 md:ml-auto flex items-center gap-2"},Oe=["value"],Pe=Z({__name:"MonthlyTaskHeading",props:{selectedMonth:{type:String,required:!0},loading:{type:Boolean,default:!1}},emits:["reloadClick","dayWiseButtonClick","change"],setup(m,{emit:i}){const l=m,y=i;function a(){y("change",Y(new Date))}function r(){var c;const[e,s]=(c=l.selectedMonth)==null?void 0:c.split("-").map(Number),n=new Date(e,s,1);n.setMonth(n.getMonth()),y("change",Y(n))}function d(){var c;const[e,s]=(c=l.selectedMonth)==null?void 0:c.split("-").map(Number),n=new Date(e,s,1);n.setMonth(n.getMonth()-2),y("change",Y(n))}return(e,s)=>(o(),u("div",Ne,[s[4]||(s[4]=t("h2",{class:"leading-none font-semibold text-lg"},"Monthly Task",-1)),t("button",{class:"btn-3 mx-4 h-7",onClick:s[0]||(s[0]=T(n=>y("dayWiseButtonClick"),["prevent"]))},"Day Wise"),t("button",{class:"btn-3 mx-4 h-7",onClick:T(a,["prevent"])},"Current Month"),t("button",{class:V(["btn-3 px-2 py-2 mx-4 size-7 disabled:text-gray-300 disabled:border-gray-300",{"animate-spin text-gray-300 border-gray-300 !bg-opacity-0":m.loading}]),onClick:s[1]||(s[1]=T(n=>y("reloadClick"),["prevent"])),disabled:m.loading},s[3]||(s[3]=[t("i",{class:"fas fa-redo-alt"},null,-1)]),10,Re),t("div",Be,[t("button",{class:"btn-2 h-7",onClick:T(d,["prevent"])},"Previous Month"),t("button",{class:"btn-2 h-7",onClick:T(r,["prevent"])},"Next Month"),t("input",{type:"month",value:m.selectedMonth,onInput:s[2]||(s[2]=n=>{var c;return y("change",(c=n.target)==null?void 0:c.value)}),class:"border px-2 rounded"},null,40,Oe)])]))}}),qe={class:"grid grid-cols-7 *:text-center *:p-2 *:border-r *:border-b *:text-blue-800 *:text-sm"},We={class:"flex flex-col"},Ve={class:"p-2 border-r border-t"},Fe={__name:"CalenderView",props:{month:{type:String,required:!0,validator:m=>/^\d{4}-(0[1-9]|1[0-2])$/.test(m)}},emits:["change"],setup(m,{emit:i}){const l=m,y=i,a=S(),r=S(),d=S(),e=S(),s=["Saturday","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday"];function n(h,p,f,_){const k=[];for(let O=f-1;O>=0;O--){const W=_-O,B=new Date(h,p-1,W);k.push({date:B,day:B.getDate(),month:B.getMonth()+1,year:B.getFullYear(),isCurrentMonth:!1})}return k}function c(h,p,f){const _=[];for(let k=1;k<=f;k++){const W={date:new Date(h,p,k),day:k,month:p+1,year:h,isCurrentMonth:!0};_.push(W)}return _}function C(h,p,f){const _=[...h],k=Math.ceil(_.length/7)*7,O=1;for(let W=0;_.length<k;W++){const B=new Date(p,f+1,O+W);_.push({date:B,day:B.getDate(),month:B.getMonth()+1,year:B.getFullYear(),isCurrentMonth:!1})}return _}function q(h,p){const f=new Date(h,p,1),k=new Date(h,p+1,0).getDate(),W=(f.getDay()+1)%7,se=new Date(h,p,0).getDate();let P=[];P=[...n(h,p,W,se)];const j=c(h,p,k);return d.value=j[0],e.value=j[j.length-1],P=[...P,...j],P=[...C(P,h,p)],a.value=P[0],r.value=P[P.length-1],P}const $=z(()=>{const[h,p]=l.month.split("-"),f=parseInt(h),_=parseInt(p)-1;return q(f,_)}),x=z(()=>{const h=$.value,p=[];for(let f=0;f<h.length;f+=7)p.push(h.slice(f,f+7));return p});function v(){y("change",{gridStartDate:a.value,gridEndDate:r.value,startOfMonth:d.value,endOfMonth:e.value})}return X(()=>v()),U(()=>l.month,v),(h,p)=>(o(),u("div",null,[H(h.$slots,"calender-top"),t("div",qe,[(o(),u(N,null,R(s,f=>t("div",{key:f},g(f),1)),64))]),t("div",We,[(o(!0),u(N,null,R(x.value,(f,_)=>(o(),u("div",{class:"week grid grid-cols-7 min-h-28",key:_},[(o(!0),u(N,null,R(f,(k,O)=>H(h.$slots,"date",{key:O,day:k.day,month:k.month,year:k.year,weekday:(k.date.getDay()+1)%7,isCurrentMonth:k.isCurrentMonth},()=>[t("div",Ve,g(k.getDate()),1)])),128))]))),128))]),H(h.$slots,"calender-bottom")]))}},ze={key:0,class:"space-y-6 py-2"},Ue={key:0,class:"fad fa-folder text-xs mr-2"},Ie={key:1,class:"fad fa-file-alt text-xs mr-2"},je={key:2,class:"text-center w-full mt-4 text-xs text-gray-600"},J={__name:"TaskListOnDay",props:{isCurrentMonth:{type:Boolean,default:!1},tasks:{type:Array,default:()=>[]},limit:{type:Number,default:null},tree:{type:Boolean,default:!1}},emits:["clickOnMore"],setup(m,{emit:i}){const l=m,y=i,a=z(()=>{var r;return l.limit?((r=l==null?void 0:l.tasks)==null?void 0:r.slice(0,l.limit))||[]:[...l.tasks]});return(r,d)=>(o(),u("div",null,[m.tree?(o(),u("div",ze,[(o(!0),u(N,null,R(a.value,(e,s)=>(o(),A(pe,{"hide-buttons":"","hide-assigned-users":"",task:e,key:e.id,index:s,class:"shadow hover:shadow-md border border-blue-300 rounded-md *:border-none"},null,8,["task","index"]))),128))])):(o(),u("ul",{key:1,class:V({"text-gray-500 group-hover:text-gray-900":!m.isCurrentMonth})},[(o(!0),u(N,null,R(a.value,e=>(o(),u("li",{class:"mb-2",key:e.id},[w(b(ne),{to:`/tasks/${e.id}`,target:"_blank",class:"flex items-center hover:underline hover:text-blue-600"},{default:M(()=>[e.children_task_count>0?(o(),u("i",Ue)):L("",!0),e.children_task_count==0?(o(),u("i",Ie)):L("",!0),t("span",{class:V(["line-clamp-1",{"text-red-800":e.deadline_crossed}])},g(e.title),3)]),_:2},1032,["to"])]))),128))],2)),m.tasks.length-a.value.length>0?(o(),u("div",je,[t("button",{onClick:d[0]||(d[0]=T(e=>y("clickOnMore",e),["prevent"])),class:"text-blue-600 hover:underline"}," +"+g(m.tasks.length-a.value.length)+" More Tasks ",1)])):L("",!0)]))}},Ee={class:"relative"},Ye={class:"ml-auto"},He=["onClick"],Ke={key:0,class:"absolute inset-0 bg-gray-300 bg-opacity-90"},Ge={class:"absolute inset-16 bg-white border border-blue-500 rounded-md z-20 overflow-y-auto"},Je={class:"text-lg font-semibold mb-4 sticky top-0 border-b border-blue-200 px-4 z-30 py-3 bg-white flex items-center"},Qe={__name:"TaskInMonth",props:{month:{type:String,required:!0,validator:m=>/^\d{4}-(0[1-9]|1[0-2])$/.test(m)},tasks:{type:Array,required:!0,default:()=>[]}},setup(m){const i=ee({day:null,month:null,year:null});function l(e){e.stopPropagation(),i.day=null,i.month=null,i.year=null}function y(e,s,n,c){e.stopPropagation(),i.day=s,i.month=n,i.year=c}const a=(e,s,n)=>{const c=new Date;return e===c.getDate()&&s===c.getMonth()+1&&n===c.getFullYear()},r=(e,s,n)=>e===i.day&&s===i.month&&n===i.year,d=(e,s,n,c)=>{const C=a(e,s,n);return{"bg-green-100 text-green-900 border-blue-500 border-2 scale-105 z-10":C,"border-r border-t hover:border border-blue-200  hover:scale-105 hover:z-20 hover:bg-blue-50":!C,"bg-gray-50":!c}};return(e,s)=>(o(),u("div",Ee,[m.month?(o(),A(Fe,{key:0,month:m.month,class:"border-t border-blue-200/50 relative"},{date:M(({day:n,month:c,year:C,isCurrentMonth:q})=>[t("div",{tabindex:"0",class:V(["transition origin-center p-2 outline-blue-600 outline-1 cursor-pointer",d(n,c,C,q)])},[t("div",{class:V(["font-bold w-full flex items-center",{"text-gray-300":!q}])},[t("div",null,g(n),1),t("div",Ye,[r(n,c,C)?L("",!0):(o(),u("button",{key:0,class:"btn-icon",onClick:T($=>y($,n,c,C),["prevent"])},s[0]||(s[0]=[t("i",{class:"fas fa-expand-arrows text-gray-400 hover:text-gray-600"},null,-1)]),8,He))])],2),w(J,{"is-current-month":q,tasks:b(G)(m.tasks,n,c,C),limit:3,class:"text-xs mt-4",onClickOnMore:$=>y($,n,c,C)},null,8,["is-current-month","tasks","onClickOnMore"])],2)]),"calender-bottom":M(()=>[i.day?(o(),u("div",Ke,[t("div",Ge,[t("div",Je,[D(" Tasks for "+g(i.day)+"/"+g(i.month)+"/"+g(i.year)+" ",1),t("button",{class:"ml-auto",type:"button",onClick:T(l,["prevent"])},s[1]||(s[1]=[t("i",{class:"fas fa-times"},null,-1)]))]),w(J,{class:"p-4","is-current-month":e.isCurrentMonth,tasks:b(G)(m.tasks,i.day,i.month,i.year),tree:!0},null,8,["is-current-month","tasks"])])])):L("",!0)]),_:1},8,["month"])):L("",!0)]))}},Xe={class:"bg-opacity-90 relative"},Ze={class:"rounded-md z-20"},et={class:"text-md sticky top-0 border-b px-4 z-30 py-3 bg-white flex items-center shadow"},tt={class:"flex justify-between items-center gap-6 w-full"},st={key:0,class:"text-blue-800 bg-blue-100 rounded-full border px-4 py-0.5 text-sm"},nt={key:1,class:"text-blue-800 bg-blue-100 rounded-full border px-4 py-0.5 text-sm"},at={class:"ml-auto flex items-center gap-2"},ot={key:0,class:"w-32 relative h-8"},lt={__name:"DailyTask",setup(m){const i=ee({day:null,month:null,year:null}),l=S(),y=S(),a=S("loading"),r=me(),d=te(),e=S(""),s=S("day-wise"),n=S("not-completed");X(()=>{l.value=E(new Date),y.value=Y(new Date)}),U(l,$=>{const[x,v,h]=$.split("-").map(Number);i.day=h,i.month=v,i.year=x}),U(y,$=>{const[x,v]=$.split("-").map(Number);i.day=1,i.month=v,i.year=x}),U(()=>i.month,async()=>{a.value="loading",await c(),a.value=""}),U(s,$=>{if($=="month-wise"){const[x,v]=l.value.split("-");y.value=`${x}-${v}`}});async function c(){await r.fetchMyTasks()}const C=async()=>{a.value="loading",await c(),a.value=""},q=z(()=>{var v,h;const $=p=>{var f,_;return e.value?(_=p==null?void 0:p.toUpperCase())==null?void 0:_.includes((f=e.value)==null?void 0:f.toUpperCase()):!0},x=s.value=="day-wise"?{"user-ids":(v=d==null?void 0:d.user)==null?void 0:v.id,status:n.value}:{"user-ids":(h=d==null?void 0:d.user)==null?void 0:h.id};return de(G(r.tasks,i.day,i.month,i.year),x).filter(p=>{var f;return $(p.title)||((f=p.children_tasks)==null?void 0:f.some(_=>$(_==null?void 0:_.title)))}).map(p=>({...p,children_tasks:p.children_tasks.filter(f=>$(f.title))}))});return($,x)=>(o(),u("div",null,[s.value=="day-wise"?(o(),A(Ae,{key:0,loading:a.value=="loading","selected-day":l.value,onChange:x[0]||(x[0]=v=>l.value=v),onReloadClick:C,onMonthWiseButtonClick:x[1]||(x[1]=v=>s.value="month-wise")},null,8,["loading","selected-day"])):L("",!0),s.value=="month-wise"?(o(),A(Pe,{key:1,loading:a.value=="loading","selected-month":y.value,onChange:x[2]||(x[2]=v=>y.value=v),onDayWiseButtonClick:x[3]||(x[3]=v=>s.value="day-wise"),onReloadClick:C},null,8,["loading","selected-month"])):L("",!0),t("div",Xe,[t("div",Ze,[t("div",et,[t("div",tt,[s.value=="day-wise"?(o(),u("div",st,g(b(ce)(l.value)),1)):L("",!0),s.value=="month-wise"?(o(),u("div",nt,g(b(ye)(y.value)),1)):L("",!0),t("div",at,[s.value=="day-wise"?(o(),u("div",ot,[x[7]||(x[7]=t("label",{class:"absolute text-xs left-3 -top-1.5 bg-slate-100 text-blue-500"},"Status",-1)),ae(t("select",{"onUpdate:modelValue":x[4]||(x[4]=v=>n.value=v),class:"h-8 text-xs px-2 text-gray-600 border-2 border-gray-400 rounded-md w-full"},x[6]||(x[6]=[t("option",{value:""},"--ALL TASKS--",-1),t("option",{value:"not-completed"},"Not Completed",-1)]),512),[[oe,n.value]])])):L("",!0),w(ue,{modelValue:e.value,"onUpdate:modelValue":x[5]||(x[5]=v=>e.value=v),class:"w-full md:w-48 md:ml-auto h-8","debounce-time":0},null,8,["modelValue"])])])]),s.value=="day-wise"?(o(),A(J,{key:0,class:"p-4 overflow-y-auto",tasks:q.value,tree:!0},null,8,["tasks"])):s.value=="month-wise"?(o(),A(Qe,{key:1,tasks:q.value||[],month:y.value,class:"bg-gray-50"},null,8,["tasks","month"])):L("",!0)]),a.value==="loading"?(o(),A(ie,{key:0,class:"absolute inset-0 flex items-center justify-center z-20 bg-opacity-70"})):L("",!0)])]))}},rt={class:"bg-white shadow-md rounded-lg"},it={class:"overflow-x-auto shadow-md min-h-max"},dt={class:"min-w-full text-sm text-left text-gray-500 table-fixed"},ut={class:"text-xs"},ct={class:"text-sm font-semibold text-blue-800"},yt={__name:"DashboardLeaveBalance",setup(m){const i=I(),{userDashboard:l}=F(i);return(y,a)=>{var r,d,e,s;return o(),u("div",rt,[a[4]||(a[4]=t("h2",{class:"text-xl font-semibold py-2 px-4"},"Leave Balance",-1)),t("div",it,[t("table",dt,[t("thead",null,[t("tr",ut,[a[0]||(a[0]=t("th",{class:"px-2 py-1 font-semibold text-gray-900 border bg-gray-50"},null,-1)),(o(!0),u(N,null,R((r=b(l))==null?void 0:r.leave_balance,n=>(o(),u("th",{class:"px-4 text-center py-1 font-semibold text-gray-900 border bg-gray-50 w-40",key:n.id},g(n.name),1))),128))])]),t("tbody",null,[t("tr",null,[a[1]||(a[1]=t("td",{class:"px-4 py-4 font-medium text-gray-900 border text-xs"},"Total",-1)),(o(!0),u(N,null,R((d=b(l))==null?void 0:d.leave_balance,n=>(o(),u("td",{class:"px-4 text-center py-3 font-medium text-gray-900 border",key:n.id},g(n.annual_quota),1))),128))]),t("tr",null,[a[2]||(a[2]=t("td",{class:"px-4 py-3 font-medium text-gray-900 border text-xs"},"Used",-1)),(o(!0),u(N,null,R((e=b(l))==null?void 0:e.leave_balance,n=>(o(),u("td",{class:"px-4 text-center py-4 font-medium text-gray-900 border",key:n.id},g(n.used_days),1))),128))]),t("tr",ct,[a[3]||(a[3]=t("td",{class:"px-4 py-3 border text-xs"},"Balance",-1)),(o(!0),u(N,null,R((s=b(l))==null?void 0:s.leave_balance,n=>(o(),u("td",{class:"px-4 text-center py-4 border",key:n.id},g(n.remaining_days),1))),128))])])])])])}}},mt={class:"bg-white shadow-md rounded-lg p-4"},pt={key:0,class:"text-xs italic text-center py-4 text-gray-500"},gt={key:1,class:"py-3"},ht={class:"flex justify-between items-center py-2 rounded hover:bg-sky-50 transition-colors"},ft={class:"text-sm text-gray-800"},bt={key:0},xt={key:1},vt={key:2},_t={__name:"DashboardRecentApplications",setup(m){const i=I(),{userDashboard:l}=F(i);return(y,a)=>{var d,e,s;const r=Q("RouterLink");return o(),u("div",mt,[a[3]||(a[3]=t("div",{class:"flex items-center mb-1"},[t("i",{class:"fas fa-file mr-2 h-5 w-5"}),t("h2",{class:"text-xl font-semibold"},[D(" Applications "),t("span",{class:"text-xs ml-2 text-green-00"},"This month")])],-1)),a[4]||(a[4]=t("hr",null,null,-1)),((e=(d=b(l))==null?void 0:d.current_month_leave)==null?void 0:e.length)===0?(o(),u("div",pt," No Application on this month ")):(o(),u("div",gt,[(o(!0),u(N,null,R((s=b(l))==null?void 0:s.current_month_leave,n=>(o(),A(r,{to:{name:"MyLeaveApplicationShow",params:{id:n.id}},key:n.id},{default:M(()=>[t("div",ht,[t("h3",ft,"Leave Application #"+g(n.id),1),t("p",{class:V(["font-medium flex items-center space-x-2 whitespace-nowrap text-xs",{"bg-gray-500 py-1 rounded-full px-2 text-white":n.status===null,"bg-yellow-500 py-1 rounded-full px-2 text-white":n.status==="Pending","bg-green-500 py-1 rounded-full px-2 text-white":n.status==="approved"}])},[n.status===null?(o(),u("span",bt,a[0]||(a[0]=[t("i",{class:"fas fa-clock mr-2"},null,-1),D(" Hanover Waiting ")]))):n.status==="Pending"?(o(),u("span",xt,a[1]||(a[1]=[t("i",{class:"fas fa-hourglass-half mr-2"},null,-1),D(" Pending ")]))):(o(),u("span",vt,a[2]||(a[2]=[t("i",{class:"fas fa-check-circle mr-2"},null,-1),D(" Approved ")])))],2)])]),_:2},1032,["to"]))),128))]))])}}},kt={class:"bg-white shadow-md rounded-lg p-4"},wt={class:"space-y-3"},Dt={key:0,class:"text-xs italic text-center py-4 text-gray-500"},$t={class:"flex items-center space-x-4"},Ct={key:0,class:"h-3 w-3 bg-red-600 rounded-full inline-block"},Mt={key:1,class:"inline-block"},Lt={class:"absolute top-10 left-1/2 -translate-x-1/2 bg-gray-800 text-white text-xs rounded py-1 px-2 opacity-0 group-hover:opacity-100 transition pointer-events-none z-10 whitespace-nowrap"},Tt={class:"text-sm font-medium text-gray-900"},St={class:"text-xs text-gray-500 mt-0.5"},At={class:"text-xl font-bold text-gray-800 flex items-center gap-2 p-4"},Nt={class:"space-y-5 px-4 md:px-6 py-4"},Rt={class:"text-sm text-gray-500 flex items-center gap-2"},Bt={class:"flex justify-end gap-3 mt-6"},Ot={__name:"DashboardRecentNotices",setup(m){const i=I(),{userDashboard:l}=F(i),y=le(),a=z(()=>{var d,e;if(l.value&&l.value.notices){const s=(e=(d=l.value)==null?void 0:d.notices)==null?void 0:e.find(n=>!n.user_feedback);if(s)return s}return null}),r=()=>{if(!a.value)return;const d=a.value.type===1?`/notice-details/${a.value.id}`:`/policy-details/${a.value.id}`;y.push(d)};return(d,e)=>{var n;const s=Q("RouterLink");return o(),u("div",kt,[e[7]||(e[7]=re('<div class="flex justify-between items-start mb-1"><div class="flex items-center"><i class="fas fa-file mr-2 h-5 w-5"></i><h2 class="text-xl font-semibold">Notices</h2></div></div><hr class="mb-3">',2)),t("div",wt,[((n=b(l).notices)==null?void 0:n.length)===0?(o(),u("div",Dt," No pending notice found ")):(o(!0),u(N,{key:1},R(b(l).notices,(c,C)=>(o(),u("div",{key:C,class:"flex items-center justify-between p-4 border rounded-lg shadow-sm hover:shadow transition-all bg-white"},[t("div",$t,[t("div",{class:V([["rounded-full",c.user_feedback?"bg-green-100":"bg-red-100"],"h-8 w-8 flex items-center justify-center rounded-full flex-shrink-0"])},[c.user_feedback?(o(),u("span",Mt,e[2]||(e[2]=[t("i",{class:"far fa-check text-green-600"},null,-1)]))):(o(),u("span",Ct)),t("div",Lt,g(c.user_feedback?"Feedback Submitted":"Feedback Pending"),1)],2),t("div",null,[t("p",Tt,g(c.title),1),t("p",St,g(c.published_at),1)])]),w(s,{to:c.type===1?`/notice-details/${c.id}`:`/policy-details/${c.id}`,class:"text-blue-600 hover:text-blue-800 font-semibold text-sm"},{default:M(()=>e[3]||(e[3]=[D(" View ")])),_:2,__:[3]},1032,["to"])]))),128)),a.value?(o(),A(ge,{key:2,show:!0,onClose:e[1]||(e[1]=c=>a.value=null)},{default:M(()=>[t("div",At,[e[4]||(e[4]=t("i",{class:"fas fa-bell text-blue-500"},null,-1)),D(" "+g(a.value.title),1)]),t("div",Nt,[t("p",Rt,[e[5]||(e[5]=t("i",{class:"fas fa-calendar-alt text-gray-400"},null,-1)),D(" Published: "+g(a.value.published_at),1)]),e[6]||(e[6]=t("p",{class:"text-base text-gray-700 leading-relaxed"}," You must read this notice before proceeding. ",-1)),t("div",Bt,[t("button",{onClick:e[0]||(e[0]=c=>a.value=null),class:"bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium px-5 py-2 rounded-lg transition"}," Cancel "),t("button",{onClick:r,class:"bg-blue-600 hover:bg-blue-700 text-white font-semibold px-6 py-2.5 rounded-lg shadow transition"}," Read Details ")])])]),_:1})):L("",!0)])])}}},Pt={class:"w-full px-6 py-4"},qt={class:"grid lg:grid-cols-4 gap-6"},Wt={class:"card-bg gap-0 shadow-md border border-gray-300 col-span-full lg:col-span-3 lg:row-span-2"},Vt={class:"col-span-full lg:col-span-1 grid sm:grid-cols-2 lg:grid-cols-1 gap-6 sticky top-[80px]"},Ft={class:"card-bg gap-0 shadow-md border border-gray-300"},zt={class:"card-bg gap-0 shadow-md border border-gray-300"},Ut={class:"card-bg gap-0 shadow-md border border-gray-300"},It={__name:"DashboardEmployeeView",setup(m){return(i,l)=>(o(),u("div",Pt,[t("div",qt,[t("div",Wt,[w(lt)]),t("div",Vt,[t("div",Ft,[w(_t)]),t("div",zt,[w(Ot)]),t("div",Ut,[w(yt)])])])]))}},os={__name:"DashBoard",setup(m){const i=te(),l=I(),{userDashboard:y}=F(l),{user:a}=F(i),r=z(()=>{var e;return["admin","super_admin","developer"].includes((e=a==null?void 0:a.value)==null?void 0:e.role)}),d=S(null);return X(async()=>{var s,n;a.value||await i.fetchUser(),await l.fetchUserDashboardData(),r.value&&await l.fetchAdminDashboardData();const e=(n=(s=y.value)==null?void 0:s.notices)==null?void 0:n.find(c=>!c.user_feedback);e&&(d.value=e)}),(e,s)=>r.value&&b(i).isAdminMood?(o(),A(Ce,{key:0})):(o(),A(It,{key:1}))}};export{os as default};
