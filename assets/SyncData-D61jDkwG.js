import{J as _,r as h,K as g,e as x,c as u,o as d,a as n,g as v,h as k,C as w,k as a,F as S,x as F,t as p}from"./index-CRy9uoYJ.js";import{u as U}from"./device-V2m-aq1j.js";const C=_("sync",()=>{const o=h(!1),s=h(null),r=h(null),l=async t=>{i(),o.value=!0;try{const e=await g.get(`/zk-users/pull/${t}`);s.value=e.data.message}catch(e){c(e)}finally{o.value=!1}},y=async t=>{i(),o.value=!0;try{const e=await g.post(`/zk-users/push/${t}`);s.value=e.data.message}catch(e){c(e)}finally{o.value=!1}},m=async t=>{i(),o.value=!0;try{const e=await g.post(`/zk-fingerprints/pull/${t}`);s.value=e.data.message}catch(e){c(e)}finally{o.value=!1}},b=async t=>{i(),o.value=!0;try{const e=await g.post(`/zk-fingerprints/push/${t}`);s.value=e.data.message}catch(e){c(e)}finally{o.value=!1}},i=()=>{s.value=null,r.value=null},c=t=>{var e,f;r.value=((f=(e=t.response)==null?void 0:e.data)==null?void 0:f.message)||"Something went wrong."};return{loading:o,message:s,error:r,pullUsers:l,pushUsers:y,pullFingerprints:m,pushFingerprints:b,reset:i}}),D={class:"my-container space-y-4"},P={class:"card-bg p-4 md:p-6 space-y-4"},z=["disabled"],$=["value"],B={key:0,class:"text-red-600 text-sm mt-1"},V={class:"grid grid-cols-2 md:grid-cols-4 gap-3"},E=["disabled"],M=["disabled"],N=["disabled"],J=["disabled"],K={key:0,class:"text-blue-600 font-semibold"},L={key:1,class:"text-green-700 font-medium"},j={key:2,class:"text-red-600 font-medium"},G={__name:"SyncData",setup(o){const s=C(),r=U(),l=h("");x(()=>{r.fetchDevices()});const y=()=>{l.value&&s.pullUsers(l.value)},m=()=>{l.value&&s.pushUsers(l.value)},b=()=>{l.value&&s.pullFingerprints(l.value)},i=()=>{l.value&&s.pushFingerprints(l.value)};return(c,t)=>(d(),u("div",D,[t[3]||(t[3]=n("h1",{class:"title-lg"},"üîÑ Data Sync",-1)),n("div",P,[n("div",null,[t[2]||(t[2]=n("label",{class:"block text-gray-700 font-medium mb-1"},"Select Device",-1)),k(n("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.value=e),class:"w-full border rounded px-3 py-2",disabled:a(r).loading},[t[1]||(t[1]=n("option",{disabled:"",value:""},"-- Choose a device --",-1)),(d(!0),u(S,null,F(a(r).devices,e=>(d(),u("option",{key:e.id,value:e.id},p(e.name)+" ("+p(e.ip_address)+") ",9,$))),128))],8,z),[[w,l.value]]),a(r).error?(d(),u("p",B,p(a(r).error),1)):v("",!0)]),n("div",V,[n("button",{class:"bg-blue-600 hover:bg-blue-700 text-white rounded px-4 py-2",onClick:y,disabled:a(s).loading||!l.value}," Pull Users ",8,E),n("button",{class:"bg-green-600 hover:bg-green-700 text-white rounded px-4 py-2",onClick:m,disabled:a(s).loading||!l.value}," Push Users ",8,M),n("button",{class:"bg-purple-600 hover:bg-purple-700 text-white rounded px-4 py-2",onClick:b,disabled:a(s).loading||!l.value}," Pull Fingerprints ",8,N),n("button",{class:"bg-yellow-600 hover:bg-yellow-700 text-white rounded px-4 py-2",onClick:i,disabled:a(s).loading||!l.value}," Push Fingerprints ",8,J)]),a(s).loading?(d(),u("div",K,"Syncing in progress...")):v("",!0),a(s).message?(d(),u("div",L," ‚úÖ "+p(a(s).message),1)):v("",!0),a(s).error?(d(),u("div",j,"‚ùå "+p(a(s).error),1)):v("",!0)])]))}};export{G as default};
