import{u as X,b as Y,r as c,e as W,z as x,m as Z,c as p,o as m,a as e,p as $,k as n,h as y,v as b,g as z,j as i,t as d,F as ee,q as te,B as le}from"./index-Bv25wqkJ.js";import{_ as oe}from"./EmployeeFilter-BQ1B1n0R.js";import{L as se}from"./LoaderView-Hmc-qWpc.js";import{u as ae}from"./manual-attendance-BJBzW3D3.js";import{u as re}from"./user-Dr-bebQg.js";import"./MultiselectDropdown-mQQ5x827.js";import"./company-DgRrVmNn.js";import"./department-McYTm-SK.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const ne={class:"space-y-2 px-4"},de={class:"flex items-center justify-between gap-2"},ie={class:"flex flex-wrap gap-2"},ue={key:0,class:"text-center py-4"},pe={key:1,class:"space-y-4"},me={key:0,class:"bg-sky-100/30 p-4 rounded-lg shadow mb-6 space-y-4"},ce={class:"grid gap-6"},ye={class:"bg-white border rounded-lg p-4 shadow"},ge={class:"grid grid-cols-2 sm:grid-cols-4 gap-y-1 text-sm text-gray-600"},be={class:"overflow-x-auto"},ve={class:"min-w-full table-auto border-collapse border border-gray-200 bg-white rounded-md text-sm"},fe={class:"border border-gray-300 px-2"},_e={class:"border border-gray-300 px-2"},xe=["onUpdate:modelValue"],he={class:"border border-gray-300 px-2"},ke=["onUpdate:modelValue"],we={class:"border border-gray-300 px-2"},Ve=["onUpdate:modelValue"],Ue={class:"border border-gray-300 px-2"},Se=["onUpdate:modelValue"],qe={class:"border border-gray-300 px-2"},Ae=["onUpdate:modelValue"],Me={class:"border border-gray-300 px-2"},Ce={class:"flex gap-2"},Be={key:0},He={__name:"AdminManualAttendanceApplication",setup(Fe){const G=X(),u=Y(),o=ae(),f=re(),J=c(null),g=c(u.query.date||o.selectedMonth);new Date().toISOString().split("T")[0];const _=c([]);W(async()=>{await f.fetchUsers()});const h=c(!1);c(null);const a=c({company_id:u.query.company_id||"",department_id:u.query.department_id||"all",type:u.query.type||"all",employee_id:u.query.employee_id||"",category:""}),v=async()=>{const l={company_id:a.value.company_id,department_id:a.value.department_id,selectedMonth:g.value,selectedStatus:o.selectedStatus};a.value.employee_id?(l.user_id=a.value.employee_id,h.value=!0,await o.fetchAdminManualAttendances(l),h.value=!1):o.manualAttendances.value=[]};W(async()=>{await f.fetchUsers(),J.value=f.users.find(l=>l.id==a.value.employee_id)||null,await v()}),x(()=>[a.value.company_id,a.value.department_id,a.value.employee_id,g.value],async()=>{await v()}),x(g,l=>{G.replace({query:{...u.query,date:l}})});const K=Z(()=>o.attendances||[]);x(()=>o.attendances,l=>{_.value=[],l==null||l.forEach(t=>{_.value.push({date:t==null?void 0:t.date,type:"Forget Punch",check_in:t==null?void 0:t.entry_time,check_out:t==null?void 0:t.exit_time,description:""})})},{immediate:!0,deep:!0});const Q=async l=>{confirm("Are you sure to delete this application?")&&(await o.deleteManualAttendance(l),await v())};return(l,t)=>{var k,w,V,U,S,q,A,M,C,B,F,D,N,T,L,O,P,R,j,E;return m(),p("div",ne,[e("div",de,[e("button",{class:"btn-3",onClick:t[0]||(t[0]=(...s)=>l.goBack&&l.goBack(...s))},t[4]||(t[4]=[e("i",{class:"far fa-arrow-left"},null,-1),e("span",{class:"hidden md:flex"},"Back",-1)])),t[5]||(t[5]=e("h1",{class:"title-md md:title-lg flex-wrap text-center"},"Leave Applications",-1)),t[6]||(t[6]=e("div",null,null,-1))]),e("div",ie,[$(oe,{modelValue:a.value,"onUpdate:modelValue":t[1]||(t[1]=s=>a.value=s),"initial-value":n(u).query,onFilterChange:l.handleFilterChange},null,8,["modelValue","initial-value","onFilterChange"]),e("div",null,[y(e("input",{id:"monthSelect",type:"month","onUpdate:modelValue":t[2]||(t[2]=s=>g.value=s),onChange:v,class:"input-1"},null,544),[[b,g.value]])])]),n(o).loading?(m(),p("div",ue,[$(se)])):(m(),p("div",pe,[(k=a.value)!=null&&k.employee_id?(m(),p("div",me,[e("div",ce,[e("div",ye,[e("div",ge,[e("p",null,[t[7]||(t[7]=e("strong",null,"Name:",-1)),i(" "+d((V=(w=n(o))==null?void 0:w.user)==null?void 0:V.name),1)]),e("p",null,[t[8]||(t[8]=e("strong",null,"Data:",-1)),i(" "+d((q=(S=(U=n(o))==null?void 0:U.user)==null?void 0:S.designation)==null?void 0:q.title),1)]),e("p",null,[t[9]||(t[9]=e("strong",null,"Department:",-1)),i(" "+d((C=(M=(A=n(o))==null?void 0:A.user)==null?void 0:M.department)==null?void 0:C.name),1)]),e("p",null,[t[10]||(t[10]=e("strong",null,"Company:",-1)),i(" "+d((D=(F=(B=n(o))==null?void 0:B.user)==null?void 0:F.company)==null?void 0:D.name),1)]),e("p",null,[t[11]||(t[11]=e("strong",null,"Phone:",-1)),i(" "+d((T=(N=n(o))==null?void 0:N.user)==null?void 0:T.phone),1)]),e("p",null,[t[12]||(t[12]=e("strong",null,"Email:",-1)),i(" "+d((O=(L=n(o))==null?void 0:L.user)==null?void 0:O.email),1)]),e("p",null,[t[13]||(t[13]=e("strong",null,"Joining Date:",-1)),i(" "+d((R=(P=n(o))==null?void 0:P.user)==null?void 0:R.joining_date),1)]),e("p",null,[t[14]||(t[14]=e("strong",null,"Blood Group:",-1)),i(" "+d(((E=(j=n(o))==null?void 0:j.user)==null?void 0:E.blood)||"N/A"),1)])])])])])):z("",!0),e("div",be,[e("table",ve,[t[18]||(t[18]=e("thead",null,[e("tr",{class:"bg-gray-200"},[e("th",{class:"border border-gray-300 px-2 text-left"},"#"),e("th",{class:"border border-gray-300 px-2 text-left"},"Date"),e("th",{class:"border border-gray-300 px-2 text-left"},"Type"),e("th",{class:"border border-gray-300 px-2 text-left"},"Check-In"),e("th",{class:"border border-gray-300 px-2 text-left"},"Check-Out"),e("th",{class:"border border-gray-300 px-2 text-left"},"Status"),e("th",{class:"border border-gray-300 px-2 text-left"},"Action")])],-1)),e("tbody",null,[(m(!0),p(ee,null,te(_.value,(s,H)=>(m(),p("tr",{key:H,class:"border-b border-gray-200 hover:bg-blue-200"},[e("td",fe,d(H+1),1),e("td",_e,[y(e("input",{type:"date","onUpdate:modelValue":r=>s.date=r,class:"w-full",required:""},null,8,xe),[[b,s.date]])]),e("td",he,[y(e("select",{"onUpdate:modelValue":r=>s.type=r,class:"w-full",required:""},t[15]||(t[15]=[e("option",{value:""},"Select Type",-1),e("option",{value:"Home Office"},"Home Office",-1),e("option",{value:"Remote Work"},"Remote Work",-1),e("option",{value:"Forget Punch"},"Forget Punch",-1)]),8,ke),[[le,s.type]])]),e("td",we,[y(e("input",{type:"time","onUpdate:modelValue":r=>s.check_in=r,class:"w-full"},null,8,Ve),[[b,s.check_in]])]),e("td",Ue,[y(e("input",{type:"time","onUpdate:modelValue":r=>s.check_out=r,class:"w-full"},null,8,Se),[[b,s.check_out]])]),e("td",qe,[y(e("textarea",{"onUpdate:modelValue":r=>s.description=r,class:"w-full",cols:"1",required:""},null,8,Ae),[[b,s.description]])]),e("td",Me,[e("div",Ce,[e("button",{onClick:t[3]||(t[3]=r=>{var I;return Q((I=l.attendance)==null?void 0:I.id)}),class:"btn-icon text-red-500"},t[16]||(t[16]=[e("i",{class:"far fa-trash"},null,-1)]))])])]))),128)),K.value.length===0?(m(),p("tr",Be,t[17]||(t[17]=[e("td",{colspan:"7",class:"p-2 text-center text-red-500"},"No manual attendances found",-1)]))):z("",!0)])])]),t[19]||(t[19]=e("div",null,null,-1))]))])}}};export{He as default};
