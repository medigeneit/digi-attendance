import{_ as u}from"./ApprovalItem-zh5NQgez.js";import{L as mt}from"./LoaderView-N13Z3Y68.js";import{_ as gt}from"./ShareComponent-DGWzawUt.js";import{u as xt,N as _t,r as ft,y as ut,b as kt,c as n,a as t,l as a,k as wt,t as l,F as m,x as g,m as i,q as bt,e as Dt,f as At,o as r,g as Lt}from"./index-BzFnaVZA.js";import{u as ht}from"./leave-application-dJiRWL_u.js";import"./AcceptAndRejectHandler-Da0iltav.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const jt={class:"my-container max-w-3xl space-y-6"},Nt={key:1,class:"card-bg p-4 md:p-8"},Tt={class:"title-lg text-center"},Bt={class:"text-center text-sm"},Rt={class:"space-y-4"},St={class:"grid md:grid-cols-2 print:grid-cols-2 gap-8"},Wt={class:""},Vt={class:"text-sm"},Ct={class:"flex justify-end gap-4"},Ft={class:"table-auto border border-black bg-white text-xs"},Mt={class:"border border-black px-2"},Pt={class:"border border-black px-2"},Ht={class:"border border-black px-2"},It={class:"font-bold"},$t={class:"border border-black px-2"},qt={class:"table-auto border border-black bg-white text-xs"},zt={class:"border border-black"},Et={colspan:"2",class:"border border-black px-2 w-32"},Gt={class:"border border-black px-2"},Ut={class:"border border-black px-2"},Jt={class:"font-bold"},Kt={class:"border border-black px-2"},Ot={class:"grid print:grid-cols-2 md:grid-cols-2 text-sm"},Qt={class:"text-sm"},Xt={class:"pt-8 grid grid-cols-2"},Yt={class:"text-sm"},Zt={class:"overflow-x-auto"},te={class:"min-w-full table-auto border-collapse border border-gray-200 bg-white rounded-md text-sm"},ee={class:"border border-gray-500 px-4 py-0.5 text-left"},se={class:"border border-gray-500 px-4 py-0.5 text-center"},le={class:"border border-gray-500 px-4 py-0.5 text-center"},oe={class:"space-y-14"},ae={class:"font-bold text-center text-lg"},re={key:0},ne={class:"grid md:grid-cols-3 print:grid-cols-3 gap-4 text-sm items-end"},de={class:"flex justify-evenly text-sm items-end"},ge={__name:"LeaveApplicationShow",setup(ie){xt(),_t();const v=ht(),ct=Lt(),x=At(),_=ft(!0),s=ut(()=>v.leaveApplication);kt(async()=>{try{await v.fetchLeaveApplicationById(x.params.id)}catch(b){console.error("Failed to load leave application:",b)}finally{_.value=!1}});function vt(){window.print()}const p=async()=>{await v.fetchLeaveApplicationById(x.params.id)},yt=()=>ct.go(-1),f=ut(()=>{if(!s.value||!s.value.last_working_date||!s.value.resumption_date)return 0;const b=new Date(s==null?void 0:s.value.last_working_date),c=new Date(s==null?void 0:s.value.resumption_date)-b;return Math.ceil(c/(1e3*60*60*24))-1});return(b,e)=>{var c,y,k,w,D,A,L,h,j,N,T,B,R,S,W,V,C,F,M,P,H,I,$,q,z,E,G,U,J,K,O,Q,X,Y,Z,tt,et,st,lt,ot,at,rt,nt,dt,it,pt;return r(),n("div",jt,[t("div",{class:"flex items-center justify-between gap-2 print:hidden"},[t("button",{class:"btn-3",onClick:yt},e[0]||(e[0]=[t("i",{class:"far fa-arrow-left"},null,-1),t("span",{class:"hidden md:flex"},"Back",-1)])),e[2]||(e[2]=t("h1",{class:"title-md md:title-xl flex-wrap text-center"},"Leave Application",-1)),t("div",null,[t("button",{class:"btn-2",onClick:vt},e[1]||(e[1]=[t("i",{class:"far fa-print"},null,-1),a(" Print ")]))])]),_.value?(r(),wt(mt,{key:0})):(r(),n("div",Nt,[t("div",null,[t("h1",Tt,l((k=(y=(c=s.value)==null?void 0:c.user)==null?void 0:y.company)==null?void 0:k.name),1),t("p",Bt,l((D=(w=s.value)==null?void 0:w.user)==null?void 0:D.company.address),1)]),t("div",Rt,[t("div",St,[t("div",null,[e[3]||(e[3]=t("p",null,"To",-1)),e[4]||(e[4]=t("p",{class:"font-bold"},"Managing Director",-1)),t("p",Wt,l((h=(L=(A=s.value)==null?void 0:A.user)==null?void 0:L.company)==null?void 0:h.name),1),t("p",Vt,l((N=(j=s.value)==null?void 0:j.user)==null?void 0:N.company.address),1),e[5]||(e[5]=t("div",null,[t("p",{class:"pt-6"},[t("b",null,"Subject:"),a(" Leave Application")])],-1))]),t("div",Ct,[t("div",null,[e[9]||(e[9]=t("h1",{class:"font-bold"},"Summary",-1)),t("table",Ft,[e[8]||(e[8]=t("thead",null,[t("tr",{class:"bg-gray-200 border border-black"},[t("th",{class:"border border-black px-2"},"Type"),t("th",{class:"border border-black px-2"},"Days")])],-1)),t("tbody",null,[(r(!0),n(m,null,g((T=s.value)==null?void 0:T.leave_types,(o,d)=>(r(),n("tr",{key:d,class:"border border-black"},[t("td",Mt,l(o.type),1),t("td",Pt,l(o.days),1)]))),128)),t("tr",null,[e[6]||(e[6]=t("td",{class:"border-black px-2"},"WL/GHD",-1)),t("td",Ht,l(f.value-((R=(B=s.value)==null?void 0:B.leave_days)==null?void 0:R.length)),1)]),t("tr",It,[e[7]||(e[7]=t("td",{class:"border border-black px-2"},"Total",-1)),t("td",$t,l(f.value),1)])])])]),t("div",null,[e[13]||(e[13]=t("h1",{class:"font-bold"},"Last Leave",-1)),t("div",null,[t("table",qt,[t("thead",null,[e[10]||(e[10]=t("tr",{class:"bg-gray-200 border border-black"},[t("th",{colspan:"2",class:"border border-black px-2"},"Date")],-1)),t("tr",zt,[t("td",Et,l(((W=(S=s.value)==null?void 0:S.last_leave)==null?void 0:W.date)||"N/A"),1)]),e[11]||(e[11]=t("tr",{class:"bg-gray-200 border border-black"},[t("th",{class:"border border-black px-2"},"Type"),t("th",{class:"border border-black px-2"},"Days")],-1))]),t("tbody",null,[(r(!0),n(m,null,g((C=(V=s.value)==null?void 0:V.last_leave)==null?void 0:C.types,(o,d)=>(r(),n("tr",{key:d,class:"border border-black"},[t("td",Gt,l(o==null?void 0:o.type),1),t("td",Ut,l(o==null?void 0:o.days),1)]))),128)),t("tr",Jt,[e[12]||(e[12]=t("td",{class:"border border-black px-2"},"Total",-1)),t("td",Kt,l((M=(F=s.value)==null?void 0:F.last_leave)!=null&&M.types?s.value.last_leave.types.reduce((o,d)=>o+d.days,0):0),1)])])])])])])]),t("div",null,[e[20]||(e[20]=t("h3",{class:"font-bold"},"Leave Details:",-1)),t("div",Ot,[t("li",null,[e[14]||(e[14]=t("strong",null,"Reason: ",-1)),a(l(((P=s.value)==null?void 0:P.reason)||"No reason provided"),1)]),t("li",null,[e[15]||(e[15]=t("strong",null,"Leave Days:",-1)),a(" "+l((H=s.value)==null?void 0:H.leave_period),1)]),t("li",null,[e[16]||(e[16]=t("strong",null,"Total Days:",-1)),a(" "+l((I=s.value)==null?void 0:I.total_leave_days),1)]),t("li",null,[e[17]||(e[17]=t("strong",null,"Weekends:",-1)),a(" "+l((z=(q=($=s.value)==null?void 0:$.user)==null?void 0:q.weekends)==null?void 0:z.join(", ")),1)]),t("li",null,[e[18]||(e[18]=t("strong",null,"Last Working Date:",-1)),a(" "+l((E=s.value)==null?void 0:E.last_working_date),1)]),t("li",null,[e[19]||(e[19]=t("strong",null,"Resumption Date:",-1)),a(" "+l((G=s.value)==null?void 0:G.resumption_date),1)])])]),t("div",Qt,[t("p",null,[e[21]||(e[21]=t("strong",null,"Works in Hand: ",-1)),a(l(((U=s.value)==null?void 0:U.works_in_hand)||"No details provided"),1)])]),t("div",Xt,[t("div",null,[t("div",Yt,[e[26]||(e[26]=t("hr",{class:"w-44 border-black hidden print:block"},null,-1)),t("p",null,[e[22]||(e[22]=t("strong",null,"Applicant:",-1)),a(" "+l((K=(J=s.value)==null?void 0:J.user)==null?void 0:K.name),1)]),t("p",null,[e[23]||(e[23]=t("strong",null,"Designation:",-1)),a(" "+l((X=(Q=(O=s.value)==null?void 0:O.user)==null?void 0:Q.designation)==null?void 0:X.title),1)]),t("p",null,[e[24]||(e[24]=t("strong",null,"Department:",-1)),a(" "+l((tt=(Z=(Y=s.value)==null?void 0:Y.user)==null?void 0:Z.department)==null?void 0:tt.name),1)]),t("p",null,[e[25]||(e[25]=t("strong",null,"Phone:",-1)),a(" "+l((st=(et=s.value)==null?void 0:et.user)==null?void 0:st.phone),1)])])]),i(u,{application:s.value,type:"leave_applications",item:"handover",onAction:p},null,8,["application"])]),t("div",null,[e[28]||(e[28]=t("h1",{class:"font-bold"},"Leave Balance",-1)),t("div",Zt,[t("table",te,[e[27]||(e[27]=t("thead",null,[t("tr",{class:"bg-gray-200"},[t("th",{class:"border border-gray-500 px-4 py-0.5 text-left"},"Leave Type"),t("th",{class:"border border-gray-500 px-4 py-0.5 text-center"},"Total Days"),t("th",{class:"border border-gray-500 px-4 py-0.5 text-center"},"Used Days"),t("th",{class:"border border-gray-500 px-4 py-0.5 text-center"},"Remaining Days")])],-1)),t("tbody",null,[(r(!0),n(m,null,g((lt=s.value)==null?void 0:lt.leave_balance,(o,d)=>(r(),n("tr",{key:d,class:"hover:bg-blue-200"},[t("td",ee,l(o.leave_type),1),t("td",se,l(o.total_leave_days),1),t("td",le,l(o.used_days),1),t("td",{class:bt(["border border-gray-500 px-4 py-0.5 text-center",{"text-green-600 font-bold":o.remaining_days>0,"text-red-600 font-bold":o.remaining_days===0}])},l(o.remaining_days),3)]))),128))])])])])]),t("div",oe,[t("p",ae,[e[29]||(e[29]=a(" Leave Approval: ")),t("b",{class:bt({"text-yellow-600":((ot=s.value)==null?void 0:ot.status)==="Pending","text-green-600":((at=s.value)==null?void 0:at.status)==="Approved","text-red-600":((rt=s.value)==null?void 0:rt.status)==="Rejected"})},l(((nt=s.value)==null?void 0:nt.status)||"N/A"),3)]),((dt=s.value)==null?void 0:dt.status)==="Rejected"?(r(),n("div",re,[t("p",null,[e[30]||(e[30]=t("b",null,"Rejected by: ",-1)),a(" "+l((pt=(it=s.value)==null?void 0:it.rejected_by_user)==null?void 0:pt.name),1)]),t("p",null,[e[31]||(e[31]=t("b",null,"rejection Reason: ",-1)),a(" "+l(s.value.rejection_reason),1)])])):Dt("",!0),t("div",ne,[i(u,{application:s.value,type:"leave_applications",item:"in_charge",onAction:p},null,8,["application"]),i(u,{application:s.value,type:"leave_applications",item:"coordinator",onAction:p},null,8,["application"]),i(u,{application:s.value,type:"leave_applications",item:"operational_admin",onAction:p},null,8,["application"])]),t("div",de,[i(u,{application:s.value,type:"leave_applications",item:"recommend_by",onAction:p},null,8,["application"]),i(u,{application:s.value,type:"leave_applications",item:"approved_by",onAction:p},null,8,["application"])])])])),i(gt)])}}};export{ge as default};
