import{L as D}from"./LoaderView-D0vp_81D.js";import{u as N}from"./leave-application-DF1AFDsa.js";import{u as P,h as V,x as R,p as S,c as d,o as l,a as s,d as u,l as g,m as B,b as w,t as r,F as k,e as A,s as b,j as L}from"./index-Cf6qM8w5.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const M={class:"px-4 py-4 max-w-full mx-auto space-y-4"},T={class:"flex flex-wrap items-center justify-between gap-3"},F={key:0,class:"flex justify-center py-10"},H={key:1},W={key:0,class:"flex justify-center"},$={class:"max-w-md w-full bg-white rounded-lg border border-dashed border-gray-300 p-6 text-center space-y-3 shadow-sm"},q={key:1,class:"hidden md:block"},z={class:"overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm"},E={class:"flex items-center justify-between px-4 py-3 border-b border-gray-100 text-sm text-gray-600"},G={class:"overflow-x-auto"},Y={class:"min-w-full table-auto text-sm"},I={class:"px-3 py-2 align-top"},J={class:"px-3 py-2 align-top"},K={class:"px-3 py-2 align-top"},O={class:"px-3 py-2 align-top"},Q={class:"font-medium"},U={class:"text-xs text-gray-500 ml-1"},X={class:"px-3 py-2 align-top"},Z={class:"px-3 py-2 align-top"},i={class:"px-3 py-2 text-center align-top"},p=["href"],ee={key:1,class:"text-xs text-gray-400"},se={class:"px-3 py-2 align-top"},te={class:"flex gap-2"},re=["onClick"],de={class:"space-y-3 md:hidden"},le={class:"flex items-start justify-between gap-2"},ne={class:"text-xs text-gray-400"},oe={class:"text-sm font-semibold text-gray-800"},ue={class:"grid grid-cols-2 gap-2 text-xs text-gray-600"},xe={class:"font-medium"},me={class:"font-medium"},ye={class:"font-medium"},fe={class:"font-medium"},ge={class:"flex items-center justify-between pt-2 border-t border-gray-100"},_e=["href"],be={key:1,class:"text-[11px] text-gray-400"},ve={class:"flex gap-2"},he=["onClick"],ce={__name:"MyLeaveApplications",setup(ae){const c=P(),x=N();V(()=>{x.fetchMyLeaveApplications()});const C=()=>{c.go(-1)},m=R(()=>x.leaveApplications||[]),y=n=>n?new Date(n).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):"â€”",v=n=>{switch(n){case"Approved":return"bg-green-100 text-green-700 border border-green-200";case"Rejected":return"bg-red-100 text-red-700 border border-red-200";case"Pending":default:return"bg-yellow-100 text-yellow-700 border border-yellow-200"}};function h(n){confirm("Are you sure you want to delete this leave application?")&&x.deleteLeaveApplication(n)}return(n,t)=>{var a;const f=S("RouterLink");return l(),d("div",M,[s("div",T,[s("button",{class:"btn-3 flex items-center gap-2",onClick:C},t[0]||(t[0]=[s("i",{class:"far fa-arrow-left"},null,-1),s("span",{class:"hidden md:inline"},"Back",-1)])),t[2]||(t[2]=s("div",{class:"flex-1 text-center"},[s("h1",{class:"title-md md:title-lg"},"My Leave Applications"),s("p",{class:"text-xs md:text-sm text-gray-500 mt-1"}," Track the status of your submitted leave requests. ")],-1)),u(f,{to:{name:"LeaveApplicationAdd"},class:"btn-2 flex items-center gap-2"},{default:g(()=>t[1]||(t[1]=[s("i",{class:"far fa-plus-circle"},null,-1),s("span",null,"Apply for Leave",-1)])),_:1,__:[1]})]),(a=B(x))!=null&&a.loading?(l(),d("div",F,[u(D)])):(l(),d("div",H,[m.value.length===0?(l(),d("div",W,[s("div",$,[t[4]||(t[4]=s("div",{class:"text-3xl mb-2"},"ðŸ˜´",-1)),t[5]||(t[5]=s("h2",{class:"font-semibold text-gray-700"},"No leave applications yet",-1)),t[6]||(t[6]=s("p",{class:"text-sm text-gray-500"}," You havenâ€™t submitted any leave application. Click below to apply for leave. ",-1)),u(f,{to:{name:"LeaveApplicationAdd"},class:"btn-2 inline-flex items-center gap-2 mt-2"},{default:g(()=>t[3]||(t[3]=[s("i",{class:"far fa-paper-plane"},null,-1),s("span",null,"Apply for Leave",-1)])),_:1,__:[3]})])])):(l(),d("div",q,[s("div",z,[s("div",E,[s("span",null,[t[7]||(t[7]=w("Total Applications: ")),s("strong",null,r(m.value.length),1)])]),s("div",G,[s("table",Y,[t[11]||(t[11]=s("thead",{class:"bg-gray-50"},[s("tr",null,[s("th",{class:"px-3 py-2 text-left font-semibold text-gray-600"},"#"),s("th",{class:"px-3 py-2 text-left font-semibold text-gray-600"},"Last Working Date"),s("th",{class:"px-3 py-2 text-left font-semibold text-gray-600"},"Resumption Date"),s("th",{class:"px-3 py-2 text-left font-semibold text-gray-600"},"Total Days"),s("th",{class:"px-3 py-2 text-left font-semibold text-gray-600"},"Leave Types"),s("th",{class:"px-3 py-2 text-left font-semibold text-gray-600"},"Handover"),s("th",{class:"px-3 py-2 text-center font-semibold text-gray-600"},"Attachment"),s("th",{class:"px-3 py-2 text-left font-semibold text-gray-600"},"Status"),s("th",{class:"px-3 py-2 text-left font-semibold text-gray-600"},"Action")])],-1)),s("tbody",null,[(l(!0),d(k,null,A(m.value,(e,_)=>{var o;return l(),d("tr",{key:e==null?void 0:e.id,class:"border-t border-gray-100 hover:bg-blue-50 transition-colors"},[s("td",I,r(_+1),1),s("td",J,r(y(e==null?void 0:e.last_working_date)),1),s("td",K,r(y(e==null?void 0:e.resumption_date)),1),s("td",O,[s("span",Q,r(e==null?void 0:e.total_leave_days),1),s("span",U,"("+r(e==null?void 0:e.leave_period)+")",1)]),s("td",X,r(e.application_types),1),s("td",Z,r(((o=e==null?void 0:e.handover_user)==null?void 0:o.name)||"N/A"),1),s("td",i,[e.attachment?(l(),d("a",{key:0,href:e==null?void 0:e.attachment,target:"_blank",class:"inline-flex items-center justify-center text-blue-600 hover:text-blue-800 underline"},t[8]||(t[8]=[s("i",{class:"fad fa-link mr-1"},null,-1),s("span",{class:"text-xs"},"View",-1)]),8,p)):(l(),d("span",ee,"â€”"))]),s("td",se,[s("span",{class:b(["inline-flex items-center px-2 py-1 rounded-full text-xs font-medium",v((e==null?void 0:e.status)||"Pending")])},[s("span",{class:b(["w-1.5 h-1.5 rounded-full mr-1.5",{"bg-green-500":(e==null?void 0:e.status)==="Approved","bg-red-500":(e==null?void 0:e.status)==="Rejected","bg-yellow-400":!(e!=null&&e.status)||(e==null?void 0:e.status)==="Pending"}])},null,2),w(" "+r((e==null?void 0:e.status)||"Pending"),1)],2)]),s("td",null,[s("div",te,[u(f,{to:{name:"MyLeaveApplicationShow",params:{id:e==null?void 0:e.id}},class:"btn-icon",title:"View details"},{default:g(()=>t[9]||(t[9]=[s("i",{class:"far fa-eye"},null,-1)])),_:2,__:[9]},1032,["to"]),e.status=="Pending"||!e.status?(l(),d("button",{key:0,type:"button",onClick:j=>h(e==null?void 0:e.id),class:"btn-icon",title:"Delete application"},t[10]||(t[10]=[s("i",{class:"far fa-trash text-red-600"},null,-1)]),8,re)):L("",!0)])])])}),128))])])])])])),s("div",de,[(l(!0),d(k,null,A(m.value,(e,_)=>{var o;return l(),d("div",{key:e==null?void 0:e.id,class:"bg-white border border-gray-200 rounded-lg p-3 shadow-sm space-y-2"},[s("div",le,[s("div",null,[s("p",ne,"Application #"+r(_+1),1),s("p",oe,r(e.application_types||"Leave Application"),1)]),s("span",{class:b(["inline-flex items-center px-2 py-1 rounded-full text-[10px] font-medium",v((e==null?void 0:e.status)||"Pending")])},r((e==null?void 0:e.status)||"Pending"),3)]),s("div",ue,[s("div",null,[t[12]||(t[12]=s("p",{class:"text-gray-400"},"Last Working",-1)),s("p",xe,r(y(e==null?void 0:e.last_working_date)),1)]),s("div",null,[t[13]||(t[13]=s("p",{class:"text-gray-400"},"Resumption",-1)),s("p",me,r(y(e==null?void 0:e.resumption_date)),1)]),s("div",null,[t[14]||(t[14]=s("p",{class:"text-gray-400"},"Total Days",-1)),s("p",ye,r(e==null?void 0:e.total_leave_days)+" "+r(e==null?void 0:e.leave_period),1)]),s("div",null,[t[15]||(t[15]=s("p",{class:"text-gray-400"},"Handover",-1)),s("p",fe,r(((o=e==null?void 0:e.handover_user)==null?void 0:o.name)||"N/A"),1)])]),s("div",ge,[s("div",null,[e.attachment?(l(),d("a",{key:0,href:e==null?void 0:e.attachment,target:"_blank",class:"inline-flex items-center text-xs text-blue-600 hover:text-blue-800 underline"},t[16]||(t[16]=[s("i",{class:"fad fa-link mr-1"},null,-1),s("span",null,"View Attachment",-1)]),8,_e)):(l(),d("span",be,"No attachment"))]),s("div",ve,[u(f,{to:{name:"MyLeaveApplicationShow",params:{id:e==null?void 0:e.id}},class:"btn-icon"},{default:g(()=>t[17]||(t[17]=[s("i",{class:"far fa-eye"},null,-1)])),_:2,__:[17]},1032,["to"]),e.status=="Pending"||!e.status?(l(),d("button",{key:0,type:"button",onClick:j=>h(e==null?void 0:e.id),class:"btn-icon"},t[18]||(t[18]=[s("i",{class:"far fa-trash text-red-600"},null,-1)]),8,he)):L("",!0)])])])}),128))])]))])}}};export{ce as default};
