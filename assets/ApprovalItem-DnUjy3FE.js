import{ab as j,x as i,c,o as n,i as N,j as l,a as r,t as d,b as p}from"./index-Bi_YzWsi.js";import{_ as S}from"./AcceptAndRejectHandler-DzhBXHg_.js";const $={class:"flex flex-col justify-center items-center text-sm md:text-base text-center"},A={key:0,class:"text-center"},B={class:"text-center"},O={class:"text-xs text-gray-400 text-center"},R={key:0,class:"far fa-clock"},w={key:1},I={key:2},U={key:1,class:"text-center"},P={class:"font-bold"},T={key:0,class:"text-green-600"},V={key:1,class:"pl-2 text-yellow-700"},E={__name:"ApprovalItem",props:{application:Object,type:String,item:String,date:String,onAction:{type:Function,default:()=>{}}},setup(e){const y=j(),f=i(()=>e.item?e.item.replace(/[_-]/g," ").replace(/([A-Z])/g," $1").replace(/\s+/g," ").trim().split(" ").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" "):""),m=i(()=>{let t="";switch(e.type){case"overtime_applications":t="overtime_approval";break;case"leave_applications":t="leave_approval";break;default:t="other_approval";break}return t}),h=i(()=>{var t;return(t=e.application)==null?void 0:t[`${e.item}_user`]}),v=i(()=>{var t;return(t=e.application)==null?void 0:t[`${e.item}_user_id`]}),u=i(()=>{var t;return((t=e.application)==null?void 0:t[`${e.item}_note`])||""}),x=i(()=>{var t,a,s;return((s=(a=(t=e.application)==null?void 0:t.user)==null?void 0:a[m.value])==null?void 0:s[`${e.item}_user`])||{}}),k=i(()=>{var t;return(t=y.approvalPermissions)==null?void 0:t[`allow_${e.item}`]}),b=i(()=>!e.application.status||!v.value?!1:e.item==="handover"?e.application.status!=="Rejected"||e.application.rejected_by_user_id!==e.application.handover_user_id:!0),g=i(()=>{var t,a,s,o;return e.item==="handover"&&((t=e.application)==null?void 0:t.handover_user_id)||((o=(s=(a=e.application)==null?void 0:a.user)==null?void 0:s[m.value])==null?void 0:o[`${e.item}_user_id`])});return(t,a)=>{var s,o;return n(),c("div",$,[v.value?(n(),c("div",A,[r("p",B,d(((s=h.value)==null?void 0:s.name)||""),1),r("div",O,[e.date?(n(),c("i",R)):l("",!0),p(" "+d(e.date)+" ",1),e.date&&u.value?(n(),c("span",w," — ")):l("",!0),u.value?(n(),c("span",I,d(u.value),1)):l("",!0)])])):(n(),c("p",U,d(((o=x.value)==null?void 0:o.name)||"N/A"),1)),k.value?(n(),N(S,{key:2,notificationType:e.type,applicationId:e.application.id,onSuccess:e.onAction},null,8,["notificationType","applicationId","onSuccess"])):l("",!0),a[1]||(a[1]=r("hr",{class:"w-36 md:w-44 border-black my-1 mx-auto"},null,-1)),r("div",P,[p(d(f.value)+" ",1),b.value?(n(),c("span",T,"(✔)")):g.value?(n(),c("span",V,a[0]||(a[0]=[r("i",{class:"fad fa-spinner"},null,-1)]))):l("",!0)])])}}};export{E as _};
