import{u as B,b as C,r as y,e as A,y as b,c as n,o as l,a,g as M,f as j,s as w,h as F,v as N,k as h,F as k,q,t as v,j as T}from"./index-Dxc5EEcs.js";import{_ as D}from"./EmployeeFilter-CYDqYjva.js";import{L as E}from"./LoaderView-BcM1hLIT.js";import{S as V}from"./SelectedEmployeeCard-meXsrGvS.js";import{u as R}from"./attendance-ByhdrQKz.js";import{u as $}from"./user-BTAuYpLA.js";import"./company-ED4wwEHa.js";import"./department-DTxlX0oD.js";import"./SelectDropdown-BOLxy_Jy.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./UserChip-EBDAdyaN.js";const z={class:"px-4 space-y-4"},G={class:"flex flex-wrap gap-4"},H={key:0,class:"flex justify-between gap-4 text-sm"},J={key:2,class:"space-y-4"},K={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},O={class:"text-sm font-semibold text-blue-700 border-b pb-1 mb-2"},P={class:"flex items-center gap-1 text-gray-700"},Q={class:"text-right text-gray-500 bg-blue-100 px-2 py-0.5 rounded text-[10px]"},re={__name:"EmployeeAttendanceLog",setup(W){const u=B(),i=C(),_=$(),p=R(),m=y(null),r=y(i.query.date||p.selectedMonth),t=y({company_id:i.query.company_id||"",department_id:i.query.department_id||"all",type:i.query.type||"all",employee_id:i.query.employee_id||"",category:""}),f=async s=>{s?(await _.fetchUser(s),m.value=_.user):m.value=null},c=async()=>{t.value.employee_id&&r.value&&await p.getMonthlyAttendanceLog(t.value.employee_id,r.value)};A(async()=>{t.value.employee_id&&(await f(t.value.employee_id),await c())}),b(()=>t.value.employee_id,async(s,e)=>{s&&s!==e&&(await f(s),await c(),u.replace({query:{...i.query,employee_id:s}}))}),b(r,s=>{u.replace({query:{...i.query,date:s}}),c()});const U=()=>u.go(-1),L=s=>new Date(s).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),S=()=>{u.replace({query:{...i.query,company_id:t.value.company_id,department_id:t.value.department_id,type:t.value.type,employee_id:t.value.employee_id}})};return(s,e)=>(l(),n("div",z,[a("div",{class:"flex items-center justify-between gap-2"},[a("button",{class:"btn-3",onClick:U},e[5]||(e[5]=[a("i",{class:"far fa-arrow-left"},null,-1),a("span",{class:"hidden md:flex"},"Back",-1)])),e[6]||(e[6]=a("h1",{class:"title-md md:title-lg flex-wrap text-center"},"Attendance Log",-1)),e[7]||(e[7]=a("div",null,null,-1))]),a("div",G,[w(D,{company_id:t.value.company_id,"onUpdate:company_id":e[0]||(e[0]=o=>t.value.company_id=o),department_id:t.value.department_id,"onUpdate:department_id":e[1]||(e[1]=o=>t.value.department_id=o),employee_id:t.value.employee_id,"onUpdate:employee_id":e[2]||(e[2]=o=>t.value.employee_id=o),category:t.value.category,"onUpdate:category":e[3]||(e[3]=o=>t.value.category=o),"with-type":!0,"initial-value":s.$route.query,onFilterChange:S},null,8,["company_id","department_id","employee_id","category","initial-value"]),a("div",null,[F(a("input",{id:"monthSelect",type:"month","onUpdate:modelValue":e[4]||(e[4]=o=>r.value=o),onChange:c,class:"input-1"},null,544),[[N,r.value]])])]),m.value?(l(),n("div",H,[w(V,{user:m.value},null,8,["user"])])):M("",!0),h(p).isLoading?(l(),j(E,{key:1})):(l(),n("div",J,[a("div",K,[(l(!0),n(k,null,q(h(p).attendanceLogs,(o,g)=>(l(),n("div",{key:g,class:"bg-white shadow rounded-lg p-4"},[a("h3",O,v(g),1),(l(!0),n(k,null,q(o,(d,X)=>{var x;return l(),n("div",{key:d.id,class:"flex items-center justify-between text-xs mb-1"},[a("div",P,[e[8]||(e[8]=a("i",{class:"far fa-clock text-blue-500"},null,-1)),T(" "+v(L(d.timestamp)),1)]),a("div",Q,v(((x=d==null?void 0:d.device)==null?void 0:x.name)||"Unknown"),1)])}),128))]))),128))])]))]))}};export{re as default};
