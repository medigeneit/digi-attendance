import{r as b,b as U,A as N,o as r,c as n,a as e,h as a,w,d,v as y,G as f,t as m,e as x,C as D}from"./index-CKknogop.js";import{u as I}from"./useTaskStore-CXX0xAHb.js";const M={class:"bg-white shadow-lg rounded-lg p-6"},S={key:0,class:"text-center py-4 text-gray-500"},C={class:"mb-4"},V={class:"mb-4"},T={class:"flex gap-1 items-center"},B={class:"flex gap-1 items-center"},G={key:0,class:"mb-4"},P={class:"grid grid-cols-2 gap-4 mb-4"},L={class:"mb-4"},O={key:1,class:"mb-4 text-red-500 font-medium"},R={class:"flex items-center gap-4"},h=["disabled"],j={key:2,class:"text-center py-4 text-red-500"},F={__name:"TaskEditForm",props:{taskId:{type:[String,Number],required:!0}},emits:["updated","cancel"],setup(_,{emit:E}){const c=_,g=E,s=I(),u=b(!1),v=b([]),i=b({title:"",requirement_id:"",user_ids:"",priority:"MEDIUM",status:"PENDING",description:"",is_important:!1,is_urgent:!1});U(async()=>{await s.fetchTask(c.taskId),v.value=s.task.users,i.value={title:s.task.title,requirement_id:s.task.requirement_id,user_ids:s.task.users.map(o=>o.id).join(","),priority:s.task.priority,status:s.task.status,description:s.task.description,is_important:s.task.is_important,is_urgent:s.task.is_urgent}}),N(()=>s.task,o=>{i.value={title:o.title,requirement_id:o.requirement_id,user_ids:o.users.map(t=>t.id).join(","),priority:o.priority,status:o.status,description:o.description}});const q=async()=>{var t;u.value=!0;const o={...i.value,user_ids:((t=v.value)==null?void 0:t.map(p=>Number(p.id)))||[]};await s.updateTask(c.taskId,o),u.value=!1,g("updated")};return(o,t)=>{var p,k;return r(),n("div",M,[t[13]||(t[13]=e("h2",{class:"text-2xl font-semibold text-gray-800 mb-4"},"Edit Task",-1)),a(s).loading?(r(),n("div",S,"Loading task details...")):a(s).task?(r(),n("form",{key:1,onSubmit:w(q,["prevent"])},[e("div",C,[t[6]||(t[6]=e("label",{class:"block text-gray-700 font-medium mb-2"},"Task Title",-1)),d(e("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>i.value.title=l),required:"",placeholder:"Enter task title",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[y,i.value.title]])]),e("div",V,[e("label",T,[d(e("input",{type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=l=>i.value.is_important=l),class:"size-4"},null,512),[[f,i.value.is_important]]),t[7]||(t[7]=e("span",{class:"block text-gray-600 text-base pt-1 mb-1 font-medium"},"Important",-1))]),e("label",B,[d(e("input",{type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=l=>i.value.is_urgent=l),class:"size-4"},null,512),[[f,i.value.is_urgent]]),t[8]||(t[8]=e("span",{class:"block text-gray-600 text-base mb-1 font-medium"},"Urgent",-1))])]),a(s).task.requirement?(r(),n("div",G,[t[9]||(t[9]=e("label",{class:"block text-gray-700 font-medium mb-2"},"Requirement",-1)),e("div",null,[e("p",null,m((k=(p=a(s).task)==null?void 0:p.requirement)==null?void 0:k.title),1)])])):x("",!0),e("div",P,[e("div",null,[t[11]||(t[11]=e("label",{class:"block text-gray-700 font-medium mb-2"},"Status",-1)),d(e("select",{"onUpdate:modelValue":t[3]||(t[3]=l=>i.value.status=l),class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},t[10]||(t[10]=[e("option",null,"PENDING",-1),e("option",null,"IN_PROGRESS",-1),e("option",null,"COMPLETED",-1),e("option",null,"BLOCKED",-1)]),512),[[D,i.value.status]])])]),e("div",L,[t[12]||(t[12]=e("label",{class:"block text-gray-700 font-medium mb-2"},"Description",-1)),d(e("textarea",{"onUpdate:modelValue":t[4]||(t[4]=l=>i.value.description=l),rows:"4",placeholder:"Enter task description",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[y,i.value.description]])]),a(s).error?(r(),n("div",O,m(a(s).error),1)):x("",!0),e("div",R,[e("button",{disabled:u.value,type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold px-5 py-2 rounded transition"},m(u.value?"Updating...":"Update Task"),9,h),e("button",{type:"button",onClick:t[5]||(t[5]=l=>g("close")),class:"bg-gray-200 hover:bg-gray-300 text-gray-700 font-semibold px-5 py-2 rounded transition"}," Cancel ")])],32)):(r(),n("div",j,m(a(s).error||"Task not found."),1))])}}};export{F as _};
