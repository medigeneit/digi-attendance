import{P as A,a9 as B,r as d,x as b,e as N,K as S,c as l,o as c,a as t,g as r,q as x,w as T,h as q,t as w,v as M,j as _,J as V}from"./index-BnK1mVVG.js";const z={key:0,class:"font-bold text-lg text-green-600"},D={key:1,class:"btn-2"},E={key:0,class:"text-base"},L={key:1,class:"btn-1"},I={class:"modal-card"},K={class:"title-lg"},U=["placeholder","required"],$={class:"flex justify-between gap-2 mt-4"},F={class:"capitalize hidden md:inline"},J={__name:"AcceptAndRejectHandler",props:{notificationType:{type:String,required:!0},applicationId:{type:[String,Number],required:!0},onSuccess:{type:Function,default:null},variant:{type:Number,default:1}},setup(s){const u=s,j=A(),f=B(),p=d(null),m=d(null),n=d(null),o=d(""),y=b(()=>n.value!==null),R=b(()=>n.value==="accept"?"Accept Application":"Reject Application");function g(a){(a==="accept"||a==="reject")&&(n.value=a,o.value="",C())}function v(){n.value=null,o.value=""}async function h(){if(!f.loading){if(n.value==="reject"&&!o.value)return j.error("Rejection Reason is required!");await f.updateSpecificNotification(u.notificationType,u.applicationId,n.value,o.value),u.onSuccess?u.onSuccess():f.fetchCountNotifications(),v()}}function k(a){var e,i;y.value&&(a.key==="ArrowLeft"?(e=m.value)==null||e.focus():a.key==="ArrowRight"&&((i=p.value)==null||i.focus()))}function C(){V(()=>{var a;(a=p.value)==null||a.focus()})}return N(()=>{window.addEventListener("keydown",k)}),S(()=>{window.removeEventListener("keydown",k)}),(a,e)=>(c(),l("div",null,[t("div",{class:x(["flex justify-center items-center",s.variant===1?"gap-5":"gap-2"])},[t("button",{onClick:e[0]||(e[0]=i=>g("accept"))},[s.variant===1?(c(),l("span",z,"✔")):r("",!0),s.variant===2?(c(),l("span",D,e[3]||(e[3]=[t("span",{class:"text-base scale-110"},"✔",-1),t("span",{class:"hidden md:inline"},"Approve",-1)]))):r("",!0)]),t("button",{onClick:e[1]||(e[1]=i=>g("reject"))},[s.variant===1?(c(),l("span",E,"❌")):r("",!0),s.variant===2?(c(),l("span",L,e[4]||(e[4]=[t("span",{class:"text-base"},"❌",-1),t("span",{class:"hidden md:inline"},"Reject",-1)]))):r("",!0)])],2),y.value?(c(),l("div",{key:0,class:"fixed inset-0 z-50 flex justify-center items-center bg-black/50",onClick:T(v,["self"])},[t("div",I,[t("h3",K,w(R.value),1),q(t("textarea",{"onUpdate:modelValue":e[2]||(e[2]=i=>o.value=i),rows:"7",placeholder:n.value==="accept"?"Accept Note...":"Rejection Reason...",class:"w-full border rounded-lg p-2 text-gray-700",required:n.value==="reject"},null,8,U),[[M,o.value]]),t("div",$,[t("button",{ref_key:"cancelBtnRef",ref:m,class:"btn-3 focus:ring-2 ring-offset-2",onClick:v}," Cancel ",512),t("button",{ref_key:"confirmBtnRef",ref:p,class:x(["focus:ring-2 ring-offset-2",n.value==="reject"?"btn-2-red":"btn-2-green"]),onClick:h},[e[5]||(e[5]=_(" Confirm ")),t("span",F,w(n.value),1)],2)])])])):r("",!0)]))}};export{J as _};
