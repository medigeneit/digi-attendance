import{u as D,b as L,r as l,s as q,e as A,z as b,c as o,o as p,a as e,f as S,p as E,h as M,v as R,k as x,F as T,q as C,t as s}from"./index-COPzwHU0.js";import{_ as F}from"./EmployeeFilter-uzWUzlpK.js";import{L as H}from"./LoaderView-BQbD0ifJ.js";import{u as V}from"./attendance-CxqH6cef.js";import"./MultiselectDropdown-QpK23rSZ.js";import"./vue-multiselect.esm-BiiliMOd.js";import"./company-CjmI43_B.js";import"./department-DhV9japg.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const B={class:"px-4 space-y-4"},P={class:"flex flex-wrap gap-4"},W={key:1,class:"space-y-4"},N={key:0,class:"overflow-x-auto card-bg"},U={class:"min-w-full table-auto border-collapse border border-gray-300 bg-white"},j={class:"text-center text-sm"},z={class:"border px-2 py-0.5"},O={class:"border px-2 py-0.5"},$={class:"border px-2 py-0.5"},G={class:"border px-2 py-0.5"},I={class:"border px-2 py-0.5"},J={class:"border px-2 py-0.5"},K={class:"border px-2 py-0.5"},Q={class:"border px-2 py-0.5"},X={class:"border px-2 py-0.5"},Y={class:"border px-2 py-0.5"},Z={class:"border px-2 py-0.5"},g={class:"border px-2 py-0.5"},tt={class:"border px-2 py-0.5"},et={class:"border px-2 py-0.5"},st={class:"border px-2 py-0.5"},at={class:"border px-2 py-0.5"},rt={class:"border py-0.5"},dt={class:"border-b border-black font-semibold text-green-600"},pt={class:"text-gray-600"},nt={class:"border px-2 py-0.5"},ct={class:"border px-2 py-0.5"},ot={class:"border px-2 py-0.5"},it={class:"border px-2 py-0.5"},yt={class:"border px-2 py-0.5"},_t={class:"border px-2 py-0.5"},lt={class:"border px-2 py-0.5"},ut={class:"border px-2 py-0.5"},bt={key:1,class:"text-center text-red-500 text-xl italic mt-10"},At={__name:"MonthlyAttendanceSummaryReport",setup(xt){const _=D(),d=L(),n=V(),c=l(d.query.date||n.selectedMonth),{monthly_company_summary:h}=q(n),u=l(""),a=l({company_id:d.query.company_id||"",department_id:d.query.department_id||"all",type:d.query.type||"all",employee_id:d.query.employee_id||""}),i=async()=>{a.value.company_id&&await n.getMonthlyAttendanceSummaryReport(a.value.company_id,a.value.employee_id,a.value.type,c.value)},m=async()=>{a.value.company_id&&await n.downloadExcel(a.value.company_id,u.value,c.value)},v=async()=>{a.value.company_id&&await n.downloadPDF(a.value.company_id,u.value,c.value)};A(async()=>{await i()}),b(()=>a.value.company_id,async y=>{y&&await i()}),b(c,y=>{_.replace({query:{...d.query,date:y}}),i()});const f=()=>{_.replace({query:{...d.query,company_id:a.value.company_id,department_id:a.value.department_id,type:a.value.type,employee_id:a.value.employee_id}}),i()},w=()=>_.go(-1);return(y,r)=>(p(),o("div",B,[e("div",{class:"flex items-center justify-between gap-2"},[e("button",{class:"btn-3",onClick:w},r[2]||(r[2]=[e("i",{class:"far fa-arrow-left"},null,-1),e("span",{class:"hidden md:flex"},"Back",-1)])),r[5]||(r[5]=e("h1",{class:"title-md md:title-lg flex-wrap text-center"},"Monthly Attendance Summary Report",-1)),e("div",{class:"flex gap-4"},[e("button",{type:"button",onClick:m,class:"btn-1"},r[3]||(r[3]=[e("i",{class:"far fa-file-excel text-2xl text-green-500"},null,-1)])),e("button",{type:"button",onClick:v,class:"btn-1"},r[4]||(r[4]=[e("i",{class:"fal fa-file-pdf text-2xl text-red-500"},null,-1)]))])]),e("div",P,[E(F,{modelValue:a.value,"onUpdate:modelValue":r[0]||(r[0]=t=>a.value=t),"initial-value":y.initialFilter,onFilterChange:f},null,8,["modelValue","initial-value"]),e("div",null,[M(e("input",{type:"month","onUpdate:modelValue":r[1]||(r[1]=t=>c.value=t),onChange:i,class:"input-1"},null,544),[[R,c.value]])])]),x(n).isLoading?(p(),S(H,{key:0})):(p(),o("div",W,[a.value.company_id?(p(),o("div",N,[e("table",U,[r[6]||(r[6]=e("thead",null,[e("tr",{class:"bg-gray-100 text-sm"},[e("th",{rowspan:"2",class:"border px-1 py-0.5"},"#"),e("th",{rowspan:"2",class:"border px-1 py-0.5"},"Employee Name"),e("th",{rowspan:"2",class:"border px-1 py-0.5"},"Designation"),e("th",{colspan:"5",class:"border px-1 py-0.5"},"Attendance Summary"),e("th",{colspan:"2",class:"border px-1 py-0.5"},"Actual Late"),e("th",{colspan:"2",class:"border px-1 py-0.5"},"Remaining Late"),e("th",{colspan:"2",class:"border px-1 py-0.5"},"Actual Early"),e("th",{colspan:"2",class:"border px-1 py-0.5"},"Remaining Early"),e("th",{rowspan:"2",class:"border px-1 py-0.5"},"Working Hour"),e("th",{rowspan:"2",class:"border px-1 py-0.5"},"OT Hour"),e("th",{colspan:"4",class:"border px-1 py-0.5"},"Leave Day"),e("th",{colspan:"2",class:"border px-1 py-0.5"},"Short Leave"),e("th",{rowspan:"2",class:"border px-1 py-0.5"},"Weekend Duty")]),e("tr",{class:"bg-gray-100 text-xs"},[e("th",{class:"border px-2 py-0.5"},"TD"),e("th",{class:"border px-2 py-0.5"},"TP"),e("th",{class:"border px-2 py-0.5"},"TW"),e("th",{class:"border px-2 py-0.5"},"TL"),e("th",{class:"border px-2 py-0.5"},"TA"),e("th",{class:"border px-1 py-0.5"},"Day"),e("th",{class:"border px-2 py-0.5"},"Hour"),e("th",{class:"border px-1 py-0.5"},"Day"),e("th",{class:"border px-2 py-0.5"},"Hour"),e("th",{class:"border px-1 py-0.5"},"Day"),e("th",{class:"border px-2 py-0.5"},"Hour"),e("th",{class:"border px-2 py-0.5"},"Day"),e("th",{class:"border px-2 py-0.5"},"Hour"),e("th",{class:"border px-2 py-0.5"},"CL"),e("th",{class:"border px-2 py-0.5"},"ML"),e("th",{class:"border px-2 py-0.5"},"SL"),e("th",{class:"border px-2 py-0.5"},"WPL"),e("th",{class:"border px-2 py-0.5"},"Delay"),e("th",{class:"border px-2 py-0.5"},"Early")])],-1)),e("tbody",j,[(p(!0),o(T,null,C(x(h),(t,k)=>(p(),o("tr",{key:t==null?void 0:t.date,class:"border-b border-gray-200 hover:bg-blue-200"},[e("td",z,s(k+=1),1),e("td",O,s(t==null?void 0:t.user),1),e("td",$,s(t==null?void 0:t.designation),1),e("td",G,s(t==null?void 0:t.total_monthly_days),1),e("td",I,s(t==null?void 0:t.total_present),1),e("td",J,s(t==null?void 0:t.total_weekend),1),e("td",K,s(t==null?void 0:t.total_leave),1),e("td",Q,s(t==null?void 0:t.total_absent),1),e("td",X,s(t==null?void 0:t.actual_late_day),1),e("td",Y,s(t==null?void 0:t.actual_late_hour),1),e("td",Z,s(t==null?void 0:t.total_remain_late_day),1),e("td",g,s(t==null?void 0:t.total_remain_late_hour),1),e("td",tt,s(t==null?void 0:t.actual_early_day),1),e("td",et,s(t==null?void 0:t.actual_early_hour),1),e("td",st,s(t==null?void 0:t.total_remain_early_day),1),e("td",at,s(t==null?void 0:t.total_remain_early_hour),1),e("td",rt,[e("div",dt,s((t==null?void 0:t.total_working_hours)||0),1),e("div",pt,s((t==null?void 0:t.total_shift_hour)||0),1)]),e("td",nt,s(t!=null&&t.total_overtime_hours?(t==null?void 0:t.total_overtime_hours)+" H":""),1),e("td",ct,s(t==null?void 0:t.total_cl_leave),1),e("td",ot,s(t==null?void 0:t.total_ml_leave),1),e("td",it,s(t==null?void 0:t.total_sl_leave),1),e("td",yt,s(t==null?void 0:t.total_wpl_leave),1),e("td",_t,s(t==null?void 0:t.total_first_short_leave),1),e("td",lt,s(t==null?void 0:t.total_last_short_leave),1),e("td",ut,s(t.total_present_in_weekend),1)]))),128))])])])):(p(),o("div",bt,"Please select company"))]))]))}};export{At as default};
