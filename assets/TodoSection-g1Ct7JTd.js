import{L as Q}from"./LoaderView-CV8zyZt5.js";import{r as R,x as F,e as K,A as Y,c as f,o as d,I as O,a as e,F as V,y as B,t as S,g as k,w as D,q as z,n as L,f as P,H as de,i as M,k as C,J as ae,j as U,h as J,v as Z,m as ue,Z as G,$ as H}from"./index-YNh9CR68.js";import{f as ce,b as X,g as le}from"./datetime-l2Vm98rT.js";import{u as W}from"./useTodoStore-BoAUHh5p.js";import{_ as me}from"./UserChip-DIaSvEdK.js";import{O as te}from"./OverlyModal-BT4oDd2x.js";const ye={class:"grid grid-cols-7 *:text-center *:p-2 *:border-r *:border-b *:text-blue-800 *:text-sm"},ve={class:"flex flex-col"},pe={key:0,class:"p-2 border-r border-t"},fe={__name:"CalenderView",props:{month:{type:String,required:!0,validator:i=>/^\d{4}-(0[1-9]|1[0-2])$/.test(i)}},emits:["change"],setup(i,{emit:x}){const a=i,l=x,c=R(),n=R(),r=R(),u=R(),o=["Saturday","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday"];function m(h,s,g,w){const b=[];for(let N=g-1;N>=0;N--){const v=w-N,$=new Date(h,s-1,v);b.push({date:$,day:$.getDate(),month:$.getMonth()+1,year:$.getFullYear(),isCurrentMonth:!1})}return b}function t(h,s,g){const w=[];for(let b=1;b<=g;b++){const v={date:new Date(h,s,b),day:b,month:s+1,year:h,isCurrentMonth:!0};w.push(v)}return w}function y(h,s,g){const w=[...h],b=Math.ceil(w.length/7)*7,N=1;for(let v=0;w.length<b;v++){const $=new Date(s,g+1,N+v);w.push({date:$,day:$.getDate(),month:$.getMonth()+1,year:$.getFullYear(),isCurrentMonth:!1})}return w}function p(h,s){const g=new Date(h,s,1),b=new Date(h,s+1,0).getDate(),v=(g.getDay()+1)%7,I=new Date(h,s,0).getDate();let _=[];_=[...m(h,s,v,I)];const A=t(h,s,b);return r.value=A[0],u.value=A[A.length-1],_=[..._,...A],_=[...y(_,h,s)],c.value=_[0],n.value=_[_.length-1],_}const T=F(()=>{const[h,s]=a.month.split("-"),g=parseInt(h),w=parseInt(s)-1;return console.log({yearStr:h,monthStr:s}),p(g,w)}),E=F(()=>{const h=T.value,s=[];for(let g=0;g<h.length;g+=7)s.push(h.slice(g,g+7));return s});function j(){l("change",{gridStartDate:c.value,gridEndDate:n.value,startOfMonth:r.value,endOfMonth:u.value})}return K(()=>j()),Y(()=>a.month,j),(h,s)=>(d(),f("div",null,[O(h.$slots,"calender-top"),e("div",ye,[(d(),f(V,null,B(o,g=>e("div",{key:g},S(g),1)),64))]),e("div",ve,[(d(!0),f(V,null,B(E.value,(g,w)=>(d(),f("div",{class:"week grid grid-cols-7 min-h-28 items-stretch",key:w},[(d(!0),f(V,null,B(g,(b,N)=>O(h.$slots,"date",{key:N,day:b.day,month:b.month,year:b.year,weekday:(b.date.getDay()+1)%7,isCurrentMonth:b.isCurrentMonth,yearMonthDate:`${b.year}-${String(b.month).padStart(2,"0")}-${String(b.day).padStart(2,"0")}`},()=>{var v;return[b!=null&&b.date?(d(),f("div",pe,S((v=b==null?void 0:b.date)==null?void 0:v.getDate()),1)):k("",!0)]})),128))]))),128))]),O(h.$slots,"calender-bottom")]))}},ge={class:"px-4 py-2 flex items-center bg-gray-50 group gap-2"},be=["value"],he=["value"],ke=["value"],we=["value"],xe=["disabled"],Ce={key:4,class:"ml-4 md:ml-auto flex items-center gap-2"},De={key:5,class:"ml-4 md:ml-auto flex items-center gap-2"},$e={__name:"TodoHeading",props:{selected:{type:Object,default:()=>({type:"month-view",month:"",day:"",year:"",week:""})},loading:{type:Boolean,default:!1}},emits:["reloadClick",,"change"],setup(i,{emit:x}){const a=i,l=[{value:"month-view",label:"Monthly"},{value:"day-view",label:"Daily"}],c=x,n=R();function r(s){n.value=s,c("change",{...a.selected,type:s})}Y(()=>{var s;return(s=a.selected)==null?void 0:s.type},s=>r(s),{immediate:!0});const u=F(()=>n.value=="month-view"&&a.selected.year&&a.selected.month?[a.selected.year,a.selected.month-1,1]:n.value=="day-view"&&a.selected.year&&a.selected.month&&a.selected.day?[a.selected.year,a.selected.month-1,a.selected.day]:[new Date().getFullYear(),new Date().getMonth(),new Date().getDate()]);function o(){n.value=="month-view"&&E(new Date)}function m(){if(n.value=="month-view"){const s=new Date(...u.value);s.setMonth(s.getMonth()+1),E(s)}}function t(){if(n.value=="month-view"){const s=new Date(...u.value);s.setMonth(s.getMonth()-1),E(s)}}function y(){n.value=="day-view"&&E(new Date)}function p(){if(n.value=="day-view"){const s=new Date(...u.value);s.setDate(s.getDate()+1),E(s)}}function T(){if(n.value=="day-view"){const s=new Date(...u.value);s.setDate(s.getDate()-1),E(s)}}function E(s){c("change",{type:n.value,month:s.getMonth()+1,day:s.getDate(),year:s.getFullYear(),week:s.getDay()})}const j=F(()=>n.value=="month-view"?`${a.selected.year}-${a.selected.month.toString().padStart(2,"0")}`:n.value=="day-view"?`${a.selected.year}-${a.selected.month.toString().padStart(2,"0")}-${a.selected.day.toString().padStart(2,"0")}`:a.selected),h=s=>{var g,w;if(n.value=="month-view"){const[b,N]=(g=s.target.value)==null?void 0:g.split("-").map(Number),v=new Date(b,N-1,1);E(v)}if(n.value=="day-view"){const b=new Date((w=s.target)==null?void 0:w.value);E(b)}};return(s,g)=>(d(),f("div",null,[e("div",ge,[O(s.$slots,"before",{selected:i.selected}),O(s.$slots,"typeSelection",{selected:i.selected,types:l,changeType:r},()=>[e("select",{class:"px-2 h-7 border rounded",value:n.value,onChange:g[0]||(g[0]=w=>r(w.target.value))},[(d(),f(V,null,B(l,w=>e("option",{value:w.value,key:w.id},S(w.label),9,he)),64))],40,be)]),n.value=="month-view"?(d(),f("input",{key:0,type:"month",value:j.value,onInput:h,class:"border px-2 rounded"},null,40,ke)):k("",!0),n.value=="day-view"?(d(),f("input",{key:1,type:"date",value:j.value,onInput:h,class:"border px-2 rounded"},null,40,we)):k("",!0),n.value=="month-view"?(d(),f("button",{key:2,class:"btn-3 mx-4 h-7",onClick:D(o,["prevent"])}," Current Month ")):k("",!0),n.value=="day-view"?(d(),f("button",{key:3,class:"btn-3 mx-4 h-7",onClick:D(y,["prevent"])}," Today ")):k("",!0),e("button",{class:z(["btn-3 px-2 py-2 mx-4 size-7 disabled:text-gray-300 disabled:border-gray-300",{"animate-spin text-gray-300 border-gray-300 !bg-opacity-0":i.loading}]),onClick:g[1]||(g[1]=D(w=>c("reloadClick"),["prevent"])),disabled:i.loading},g[2]||(g[2]=[e("i",{class:"fas fa-redo-alt"},null,-1)]),10,xe),n.value=="month-view"?(d(),f("div",Ce,[e("button",{class:"btn-2 h-7",onClick:D(t,["prevent"])}," Previous Month "),e("button",{class:"btn-2 h-7",onClick:D(m,["prevent"])},"Next Month")])):k("",!0),n.value=="day-view"?(d(),f("div",De,[e("button",{class:"btn-2 h-7",onClick:D(T,["prevent"])},"Previous Day"),e("button",{class:"btn-2 h-7",onClick:D(p,["prevent"])},"Next Day")])):k("",!0),O(s.$slots,"after",{selected:i.selected})]),O(s.$slots,"bottom",{selected:i.selected})]))}},Se={key:0,class:"fa fa-exclamation-circle",title:"Pending"},Te={key:1,class:"fa fa-exclamation-square",title:"Wording"},_e={key:2,class:"fa fa-check-square",title:"Completed"},ne={__name:"TodoStatusIcon",props:{todo:{type:Object,required:!0}},setup(i){const x=i,a=F(()=>{switch(x.todo.status){case"PENDING":return"text-red-400";case"WORKING":return"text-yellow-400";case"COMPLETED":return"text-green-400"}return""});return(l,c)=>(d(),f("span",{class:z(a.value)},[i.todo.status=="PENDING"?(d(),f("i",Se)):k("",!0),i.todo.status=="WORKING"?(d(),f("i",Te)):k("",!0),i.todo.status=="COMPLETED"?(d(),f("i",_e)):k("",!0)],2))}},Me=["title","onClick"],Ie={class:"line-clamp-1"},Ee={key:0,class:"text-purple-600 text-center"},ie={__name:"TodosInDate",props:{date:{type:String,required:!0},maxItems:{type:[Number,String],default:3}},emits:["clickTodo"],setup(i,{emit:x}){const a=i,l=x,{getTodosByDate:c}=W(),n=F(()=>{let r=[],u=!1,o=[];if(typeof c=="function"){const m=c(a.date);if(o=Array.isArray(m)?m:[],a.maxItems==="all")return{all:o,items:o,moreItemsCount:0};r=o.slice(0,a.maxItems),u=o.length-r.length}return{all:o,items:r,moreItemsCount:u}});return(r,u)=>(d(),f("div",null,[n.value.items.length===0?O(r.$slots,"noTodos",{key:0},()=>[u[0]||(u[0]=e("div",{class:"text-gray-400 text-center"},"No todos",-1))]):(d(),f(V,{key:1},[(d(!0),f(V,null,B(n.value.items,o=>O(r.$slots,"todoItem",{key:o.id,todo:o,moreItemsCount:n.value.moreItemsCount},()=>{var m,t,y,p;return[e("div",{title:`${o==null?void 0:o.title} ${o!=null&&o.user?`
by:`:""} ${(m=o==null?void 0:o.user)==null?void 0:m.name} ${(t=o==null?void 0:o.user)!=null&&t.department?`
DEPT:`:""} ${(p=(y=o.user)==null?void 0:y.department)==null?void 0:p.name}`,class:z(["px-1 mb-2 text-sm rounded cursor-pointer flex items-center gap-2",{"bg-sky-50 text-sky-900 hover:bg-sky-700 hover:text-white border border-sky-300":o.status!=="COMPLETED","bg-green-500 text-white":o.status==="COMPLETED"}]),onClick:D(T=>l("clickTodo",o),["prevent","stop"])},[L(ne,{todo:o,class:z(["text-sm",[o.status=="COMPLETED"?"!text-white":""]])},null,8,["todo","class"]),e("div",Ie,S(o.title),1),o.user?(d(),P(de,{key:0,user:o.user,size:"xsmall",class:"ml-auto"},null,8,["user"])):k("",!0)],10,Me)]})),128)),n.value.moreItemsCount>0?(d(),f("div",Ee," + "+S(n.value.moreItemsCount)+" more todo"+S(n.value.moreItemsCount>1?"s":""),1)):k("",!0)],64))]))}},Oe={class:"relative"},Ne=["onClick","onKeypress"],Re={class:"flex items-center justify-center"},Le=["onClick"],Pe={__name:"TodosInCalenderView",props:{month:{type:String,required:!0,validator:i=>/^\d{4}-(0[1-9]|1[0-2])$/.test(i)}},emits:["dateClick","clickTodo","clickDateCell"],setup(i,{emit:x}){const a=x;function l(n,r){n.isTrusted&&n.ctrlKey&&n.which==10&&a("dateClick",r)}function c(n){const[r,u,o]=String(n).split("-").map(Number),m=new Date(r,u-1,o);return ce(m)}return(n,r)=>(d(),f("div",Oe,[i.month?(d(),P(fe,{key:0,month:i.month,class:"border-t border-blue-200/50 relative"},{date:M(({day:u,yearMonthDate:o,isCurrentMonth:m})=>[e("div",{tabindex:"0",class:z(["border p-4 cursor-pointer group/date relative focus:outline-slate-400",{"bg-sky-50   border-sky-300 focus:bg-sky-50 focus:outline-sky-400":c(o),"hover:bg-slate-50  hover:border-slate-300 focus:bg-slate-50 ":!c(o)}]),onClick:D(t=>a("dateClick",o),["prevent","stop"]),onKeypress:D(t=>l(t,o),["prevent"])},[e("button",{tabindex:"1",class:z([{"text-gray-300":!m,"text-sky-400":m},"text-center mb-2 font-semibold hover:bg-sky-200 w-full rounded"])},S(u),3),e("div",null,[L(ie,{date:o,onClickTodo:r[0]||(r[0]=t=>a("clickTodo",t))},{noTodos:M(()=>r[1]||(r[1]=[e("span",null,null,-1)])),_:2},1032,["date"])]),e("div",Re,[e("button",{onClick:D(t=>a("clickDateCell",o),["prevent","stop"]),class:"btn-3 !py-1 invisible group-hover/date:visible text-sm text-red-800/40"},r[2]||(r[2]=[e("i",{class:"fas fa-plus"},null,-1),e("span",{class:"hidden lg:inline whitespace-nowrap"}," Add todo ",-1)]),8,Le)])],42,Ne)]),_:1},8,["month"])):k("",!0)]))}},Fe={class:"relative bg-white p-4"},je={class:"max-w-6xl mx-auto border rounded my-10"},Ae={class:"mb-4 text-gray-700 border-b py-2 px-4 flex items-center"},Ue={class:"text-lg font-semibold"},Ve={class:"ml-auto"},qe=["onClick"],ze={class:"ml-4"},We={class:"line-clamp-2"},Be={key:0,class:"mt-1 flex items-center gap-2"},Ke={class:"border border-sky-400 rounded-full text-sky-500 font-semibold bg-sky-50 px-1 py-0.5 text-xs inline-block"},Ge={key:0,class:"line-clamp-2 ml-4 text-gray-500"},He={class:"ml-auto flex items-center gap-2"},Ye=["onClick"],Je=["onClick"],Ze=["onClick"],Qe={__name:"TodosInDailyView",props:{date:{type:String,required:!0}},emits:["clickTodo","clickAdd","clickEdit","clickDelete","clickChangeStatus","backClick","update"],setup(i,{emit:x}){const a=i,l=x,c=F(()=>new Date(a.date)),n=W();async function r(o){confirm(`Are your sure want to delete todo
'${o==null?void 0:o.title}'`)&&(await n.deleteTodo(o.id),l("update"))}async function u(o){confirm(`Are your sure want to compete todo
'${o==null?void 0:o.title}'`)&&(await n.updateTodoStatus(o.id,"COMPLETED"),l("update"))}return(o,m)=>(d(),f("div",Fe,[e("div",je,[e("div",Ae,[e("button",{class:"fa fa-arrow-left btn-icon mr-2",onClick:m[0]||(m[0]=D(t=>l("backClick"),["prevent"]))}),e("div",Ue,S(C(X)(c.value,{weekDay:"long"})),1),e("div",Ve,[e("button",{class:"btn btn-icon",onClick:m[1]||(m[1]=D(t=>l("clickAdd",a.date),["prevent"]))},m[2]||(m[2]=[e("i",{class:"fas fa-plus"},null,-1)]))])]),L(ie,{date:i.date,"max-items":"all",class:"my-8 w-full px-4"},{todoItem:M(({todo:t})=>{var y,p;return[e("div",{class:"border rounded px-4 py-3 my-4 hover:bg-sky-50 cursor-pointer flex items-center",onClick:D(T=>l("clickTodo",t),["prevent"])},[L(ne,{todo:t},null,8,["todo"]),e("div",ze,[e("div",We,S(t.title),1),t.user?(d(),f("div",Be,[L(me,{user:t.user,"avatar-size":"xsmall"},null,8,["user"]),e("div",Ke,S((p=(y=t.user)==null?void 0:y.department)==null?void 0:p.name),1)])):k("",!0)]),t.todo_type&&t.todo_type_id?(d(),f("div",Ge,S(t.todo_type)+" id: "+S(t.todo_type_id),1)):k("",!0),e("div",He,[t.status==="WORKING"?(d(),f("button",{key:0,class:"btn-icon bg-green-400 text-white hover:bg-green-600 hover:text-white",onClick:D(()=>u(t),["prevent","stop"])},m[3]||(m[3]=[e("i",{class:"fas fa-check"},null,-1)]),8,Ye)):k("",!0),e("button",{class:"btn-icon bg-sky-400 text-white hover:bg-sky-600 hover:text-white",onClick:D(T=>l("clickEdit",t),["prevent","stop"])},m[4]||(m[4]=[e("i",{class:"fas fa-pen"},null,-1)]),8,Je),e("button",{class:"btn-icon bg-red-400 text-white hover:bg-red-600 hover:text-white",onClick:D(()=>r(t),["prevent","stop"])},m[5]||(m[5]=[e("i",{class:"fas fa-trash-alt"},null,-1)]),8,Ze)])],8,qe)]}),noTodos:M(()=>m[6]||(m[6]=[e("div",{class:"flex min-h-[38vh] items-center justify-center text-gray-400 text-center rounded-md"}," No Todos ",-1)])),_:1},8,["date"])])]))}},Xe={class:"bg-white border-t px-4 py-4 sticky bottom-0 rounded-b-md"},et={key:0,class:"mb-4 text-red-500 font-medium"},tt={key:1,class:"mb-4 text-blue-500 font-medium"},nt={class:"flex justify-between items-center gap-4"},ot=["disabled"],re={__name:"FormHandler",props:{isSubmitting:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},error:{type:String,default:""}},emits:["submit","clickCancel"],setup(i,{emit:x}){const a=x;return(l,c)=>(d(),f("form",{onSubmit:c[1]||(c[1]=D(n=>a("submit"),["prevent"]))},[O(l.$slots,"default"),e("div",Xe,[i.error?(d(),f("div",et,S(i.error),1)):k("",!0),i.isSubmitting?(d(),f("div",tt,"Saving changes...")):k("",!0),O(l.$slots,"footer",{},()=>[e("div",nt,[e("button",{type:"button",onClick:c[0]||(c[0]=n=>a("clickCancel")),class:"btn-3"},"Cancel"),e("button",{disabled:i.isSubmitting||i.isLoading,type:"submit",class:"btn-2"},S(i.isSubmitting?"Saving...":"Save"),9,ot)])])])],32))}},st={class:""},at={class:"p-4 min-h-[10vh] max-h-[50vh] overflow-y-auto"},lt={class:"mb-2"},it={class:"mb-4"},rt={class:"mb-4"},dt={__name:"TodoAddForm",props:{date:{type:String,default:le(new Date)},userRole:{type:String,default:"employee"}},emits:["update","cancelClick"],setup(i,{emit:x}){const a=i,l=R(),c=R(),n=W(),r=x,u=R({title:"",date:a.date||"",task_id:""});async function o(){try{l.value="submitting",await n.createTodo(u.value,{returnWith:a.userRole!=="employee"?"user,department,company":""}),r("update")}finally{l.value=""}}const m=F(()=>new Date(a.date));return K(async()=>{var t;await ae(),(t=c.value)==null||t.focus()}),(t,y)=>(d(),f("div",st,[C(n).loading?(d(),P(Q,{key:0,class:"absolute inset-0 bg-opacity-80 text-center py-4 text-gray-500 z-10 flex items-center justify-center"},{default:M(()=>y[3]||(y[3]=[U(" Loading... ")])),_:1,__:[3]})):k("",!0),L(re,{onSubmit:o,onClickCancel:y[2]||(y[2]=p=>r("cancelClick")),isSubmitting:l.value=="submitting",error:C(n).error,class:"rounded-md relative"},{default:M(()=>[y[7]||(y[7]=e("div",{class:"border-b py-2 px-4"},[e("h2",{class:"text-xl font-semibold"},"Add Todo")],-1)),e("div",at,[e("div",lt,[y[4]||(y[4]=e("span",{class:"font-semibold"}," Date ",-1)),e("span",null,S(C(X)(m.value,{weekDay:"long"})),1)]),e("div",it,[y[5]||(y[5]=e("label",{class:"block text-gray-700 font-medium mb-2"},"Title",-1)),J(e("input",{ref_key:"titleRef",ref:c,"onUpdate:modelValue":y[0]||(y[0]=p=>u.value.title=p),required:"",placeholder:"Enter todo title",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[Z,u.value.title]])]),e("div",rt,[y[6]||(y[6]=e("label",{class:"block text-gray-700 font-medium mb-2"},"Task ID (optional)",-1)),J(e("input",{"onUpdate:modelValue":y[1]||(y[1]=p=>u.value.task_id=p),placeholder:"Enter a task id",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[Z,u.value.task_id]])])])]),_:1,__:[7]},8,["isSubmitting","error"])]))}},ut={class:"relative"},ct={class:"p-4 min-h-[10vh] max-h-[50vh] overflow-y-auto"},mt={class:"mb-2"},yt={class:"mb-4"},vt={class:"mb-4"},pt={__name:"TodoEditForm",props:{date:{type:String,default:le(new Date)},todo:{type:Object,default:()=>{}}},emits:["update","cancelClick"],setup(i,{emit:x}){const a=i,l=R(),c=R(),n=W(),r=x,u=R({title:"",todo_type:"task",todo_type_id:""});async function o(){var y,p,T;await n.fetchTodo((y=a.todo)==null?void 0:y.id),u.value.title=(p=n.todo)==null?void 0:p.title,u.value.todo_type_id=(T=n.todo)==null?void 0:T.todoable_id}async function m(){l.value="submitting";try{await n.updateTodo(a.todo.id,u.value),r("update")}finally{l.value=""}}const t=F(()=>new Date(a.todo.date));return K(async()=>{var y;await o(),await ae(),(y=c.value)==null||y.focus()}),(y,p)=>(d(),f("div",ut,[C(n).loading?(d(),P(Q,{key:0,class:"absolute inset-0 bg-opacity-80 text-center py-4 text-gray-500 z-10 flex items-center justify-center"},{default:M(()=>p[3]||(p[3]=[U(" Loading... ")])),_:1,__:[3]})):k("",!0),L(re,{onSubmit:m,onClickCancel:p[2]||(p[2]=T=>r("cancelClick")),isSubmitting:l.value=="submitting",isLoading:C(n).loading,error:C(n).error},{default:M(()=>[p[7]||(p[7]=e("div",{class:"border-b py-2 px-4"},[e("h2",{class:"text-xl font-semibold"},"Edit Todo")],-1)),e("div",ct,[e("div",mt,[p[4]||(p[4]=e("span",{class:"font-semibold"}," Date ",-1)),e("span",null,S(C(X)(t.value,{weekDay:"long"})),1)]),e("div",yt,[p[5]||(p[5]=e("label",{class:"block text-gray-700 font-medium mb-2"},"Title",-1)),J(e("input",{ref_key:"titleRef",ref:c,"onUpdate:modelValue":p[0]||(p[0]=T=>u.value.title=T),required:"",placeholder:"Enter todo title",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[Z,u.value.title]])]),e("div",vt,[p[6]||(p[6]=e("label",{class:"block text-gray-700 font-medium mb-2"},"Task ID (optional)",-1)),J(e("input",{"onUpdate:modelValue":p[1]||(p[1]=T=>u.value.todo_type_id=T),placeholder:"Enter a task id",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[Z,u.value.todo_type_id]])])])]),_:1,__:[7]},8,["isSubmitting","isLoading","error"])]))}},ft={class:"relative"},gt={class:"min-h-[10vh] max-h-[50vh] overflow-y-auto p-4"},bt={class:"mb-4"},ht={class:"mb-4"},kt={key:0,class:"mt-1 flex items-center gap-2"},wt={class:"border border-sky-400 rounded-full text-sky-500 font-semibold bg-sky-50 px-1 py-0.5 text-xs inline-block"},xt={class:"flex items-center gap-4"},Ct={key:0,class:"flex items-center gap-2"},Dt={class:"flex justify-between items-center gap-4 py-4 px-4 border-t"},$t={class:"ml-auto flex items-center gap-2"},St={__name:"TodoShow",props:{todo:{type:Object,default:()=>{}}},emits:["cancelClick","clickEdit","update"],setup(i,{emit:x}){const a=i,l=W(),c=x;async function n(){var m;await l.fetchTodo((m=a.todo)==null?void 0:m.id)}const r=F(()=>{var m,t;return(m=l.todo)!=null&&m.date?new Date((t=l.todo)==null?void 0:t.date):null});async function u(m){var t;confirm(`Are your sure want to delete todo
'${(t=l.todo)==null?void 0:t.title}'`)&&(await l.deleteTodo(m.id),c("update"))}async function o(m,t){var y;confirm(`Are your sure want to compete todo
'${(y=l.todo)==null?void 0:y.title}'`)&&(await l.updateTodoStatus(m.id,t),c("update"))}return K(async()=>{await n()}),(m,t)=>{var p,T,E,j,h,s,g,w;const y=ue("UserChip");return d(),f("div",ft,[C(l).loading?(d(),P(Q,{key:0,class:"absolute inset-0 bg-opacity-80 text-center py-4 text-gray-500 z-10 flex items-center justify-center"},{default:M(()=>t[5]||(t[5]=[U(" Loading... ")])),_:1,__:[5]})):k("",!0),e("div",null,[t[11]||(t[11]=e("div",{class:"border-b py-2 px-4"},[e("h2",{class:"text-xl font-semibold"},"Show Todo")],-1)),e("div",gt,[e("div",bt,[t[6]||(t[6]=e("div",{class:"font-semibold text-xs text-gray-500"},"Date",-1)),e("span",null,S(C(X)(r.value,{weekDay:"long"})),1)]),e("div",ht,[t[7]||(t[7]=e("div",{class:"text-xs text-gray-500"},"Todo",-1)),U(" "+S((p=C(l).todo)==null?void 0:p.title),1)]),i.todo.user?(d(),f("div",kt,[L(y,{user:i.todo.user,"avatar-size":"xsmall"},null,8,["user"]),e("div",wt,S((E=(T=i.todo.user)==null?void 0:T.department)==null?void 0:E.name),1)])):k("",!0),e("div",null,[t[10]||(t[10]=e("div",{class:"text-xs text-gray-500"},"Status",-1)),e("div",xt,[e("div",null,[(j=C(l))!=null&&j.todo?(d(),P(ne,{key:0,todo:(h=C(l))==null?void 0:h.todo},null,8,["todo"])):k("",!0),U(" "+S((s=C(l).todo)==null?void 0:s.status),1)]),C(l).loading?k("",!0):(d(),f("div",Ct,[((g=C(l).todo)==null?void 0:g.status)==="PENDING"?(d(),f("button",{key:0,class:"btn-2 from-yellow-700 to-yellow-500 text-white hover:bg-green-600 hover:text-white",onClick:t[0]||(t[0]=D(()=>o(C(l).todo,"WORKING"),["prevent","stop"]))},t[8]||(t[8]=[e("i",{class:"fas fa-exclamation-circle"},null,-1),U(" Change to Working ")]))):k("",!0),((w=C(l).todo)==null?void 0:w.status)==="WORKING"?(d(),f("button",{key:1,class:"btn-2 from-green-700 to-green-300 text-white hover:bg-green-600 hover:text-white",onClick:t[1]||(t[1]=D(()=>o(C(l).todo,"COMPLETED"),["prevent","stop"]))},t[9]||(t[9]=[e("i",{class:"fas fa-check"},null,-1),U(" Make Complete ")]))):k("",!0)]))])])])]),e("div",Dt,[e("button",{type:"button",onClick:t[2]||(t[2]=b=>c("cancelClick")),class:"btn-3"},"Cancel"),e("div",$t,[e("button",{class:"btn-2 bg-sky-400 text-white hover:bg-sky-600 hover:text-white",onClick:t[3]||(t[3]=D(b=>c("clickEdit",C(l).todo),["prevent","stop"]))},t[12]||(t[12]=[e("i",{class:"fas fa-pen"},null,-1),U(" Edit ")])),e("button",{class:"btn-2-red",onClick:t[4]||(t[4]=D(()=>u(C(l).todo),["prevent","stop"]))},t[13]||(t[13]=[e("i",{class:"fas fa-trash-alt"},null,-1),U(" Delete ")]))])])])}}},Tt={__name:"TodoCreateEditShow",props:{todoModal:{type:Object,required:!0},userRole:{type:String,required:"employee"}},emits:["cancelClick","update","clickEdit","clickDelete","clickChangeStatus"],setup(i,{emit:x}){const a=x;function l(){a("update")}return(c,n)=>(d(),f(V,null,[i.todoModal.action=="add"?(d(),P(te,{key:0},{default:M(()=>{var r;return[L(dt,{onCancelClick:n[0]||(n[0]=u=>a("cancelClick")),onUpdate:l,date:(r=i.todoModal)==null?void 0:r.date,userRole:i.userRole},null,8,["date","userRole"])]}),_:1})):k("",!0),i.todoModal.action=="edit"?(d(),P(te,{key:1},{default:M(()=>{var r;return[L(pt,{onCancelClick:n[1]||(n[1]=u=>a("cancelClick")),onUpdate:l,todo:(r=i.todoModal)==null?void 0:r.todo,userRole:i.userRole},null,8,["todo","userRole"])]}),_:1})):k("",!0),i.todoModal.action=="show"?(d(),P(te,{key:2},{default:M(()=>{var r;return[L(St,{onCancelClick:n[2]||(n[2]=u=>a("cancelClick")),onUpdate:l,onClickEdit:n[3]||(n[3]=u=>a("clickEdit",u)),onClickDelete:n[4]||(n[4]=u=>a("clickDelete",u)),onClickChangeStatus:n[5]||(n[5]=(u,o)=>a("clickChangeStatus",u,o)),todo:(r=i.todoModal)==null?void 0:r.todo,userRole:i.userRole},null,8,["todo","userRole"])]}),_:1})):k("",!0)],64))}},_t={class:"border bg-white relative"},Lt={__name:"TodoSection",props:{year:{type:Number,default:()=>new Date().getFullYear()},month:{type:Number,default:()=>new Date().getMonth()+1},day:{type:Number,default:()=>new Date().getDate()},week:{type:Number,default:()=>new Date().getDay()},type:{type:String,default:"month-view"},userRole:{type:String,default:"employee"}},emits:["changeInput"],setup(i,{emit:x}){const a=new Date,l=i,c=R({type:"month-view",month:a.getMonth()+1,day:a.getDate(),year:a.getFullYear(),week:a.getDay()}),n=x;Y(()=>({...c.value}),v=>{n("changeInput",v)}),Y(()=>({year:l.year,month:l.month,day:l.day,week:l.week,type:l.type}),v=>{c.value={...v}},{immediate:!0});const r=R({action:null}),u=W();async function o(){await N()}function m(){r.value={...r.value,action:""}}async function t(v,$){await u.updateTodoStatus(v,$)}async function y(v){await u.deleteTodo(v)}function p(){c.value={...c.value,type:"month-view"}}function T(v){c.value={...c.value,...v}}function E(v){const[$,I,_]=v.split("-").map(Number);c.value={...c.value,type:"day-view",year:$,month:I,day:_}}function j(v){r.value={...r.value,action:"show",todo:v}}function h(v){r.value={...r.value,action:"edit",todo:v}}function s(v){r.value={...r.value,action:"add",date:v}}function g(){r.value={action:null,todo:null}}const w=F(()=>{var _,q,A,ee,oe,se;const v=(q=(_=c.value)==null?void 0:_.year)==null?void 0:q.toString(),$=(ee=(A=c.value)==null?void 0:A.month)==null?void 0:ee.toString().padStart(2,"0"),I=(se=(oe=c.value)==null?void 0:oe.day)==null?void 0:se.toString().padStart(2,"0");return`${v}-${$}-${I}`}),b=F(()=>{var I,_,q,A;const v=(_=(I=c.value)==null?void 0:I.year)==null?void 0:_.toString(),$=(A=(q=c.value)==null?void 0:q.month)==null?void 0:A.toString().padStart(2,"0");return`${v}-${$}`});async function N(){l.userRole=="employee"?await u.fetchMyTodos():await u.fetchTodos()}return K(async()=>{await N()}),(v,$)=>(d(),f("div",null,[e("div",_t,[C(u).loading?(d(),P(Q,{key:0,class:"absolute inset-0 bg-opacity-80 text-center py-4 text-gray-500 z-10 flex items-center justify-center"},{default:M(()=>$[0]||($[0]=[U(" Loading... ")])),_:1,__:[0]})):k("",!0),L($e,{selected:c.value,class:"border-b shadow z-20",onChange:T,onReloadClick:o},{before:M(I=>[O(v.$slots,"beforeHeader",G(H(I)))]),after:M(I=>[O(v.$slots,"afterHeader",G(H(I)))]),bottom:M(I=>[O(v.$slots,"bottomHeader",G(H(I)))]),typeSelection:M(I=>[O(v.$slots,"typeSelection",G(H(I)))]),_:3},8,["selected"]),c.value.type=="month-view"?(d(),P(Pe,{key:1,month:b.value,class:"bg-white",onDateClick:E,onClickTodo:j,onClickDateCell:s},null,8,["month"])):k("",!0),c.value.type=="day-view"?(d(),P(Qe,{key:2,date:w.value,onClickTodo:j,onClickEdit:h,onClickAdd:s,onClickDelete:y,onClickChangeStatus:t,onBackClick:p,onUpdate:m},null,8,["date"])):k("",!0)]),L(Tt,{todoModal:r.value,userRole:i.userRole,onCancelClick:g,onUpdate:m,onClickEdit:h},null,8,["todoModal","userRole"])]))}};export{fe as _,Lt as a};
