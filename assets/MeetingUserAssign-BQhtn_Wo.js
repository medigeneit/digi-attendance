import{b as h,u as k,r as u,p as w,e as U,c as l,o as r,a as t,t as d,k as c,w as M,g as S,y as V}from"./index-uPs6BKob.js";import{_ as A}from"./MultiselectDropdown-u5h1w8nA.js";import{u as B}from"./useMeetingStore-CZy3FyMH.js";import{u as C}from"./user-CSzx7aET.js";import"./MultiselectDropdown.vue_vue_type_style_index_0_lang-OhLb_lUM.js";const L={class:"container mx-auto p-6"},N={class:"max-w-xl mx-auto bg-white shadow-lg rounded-lg p-6"},R={class:"text-2xl font-semibold text-gray-800 mb-4"},$={key:0,class:"text-center text-gray-500 py-4"},D={class:"mb-4"},E={key:0,class:"mb-4 text-red-500 font-medium"},I={class:"flex items-center gap-4"},j=["disabled"],K={__name:"MeetingUserAssign",setup(q){const a=B(),m=C(),_=h(),g=k(),n=u([]),y=w(()=>n.value.map(s=>s.id)),p=_.params.id,e=u(!1),i=u(null);U(async()=>{var s;e.value=!0,await a.fetchMeetings(p),await m.fetchUsers(),n.value=(s=a==null?void 0:a.meeting)==null?void 0:s.users,e.value=!1});const x=async()=>{e.value=!0,i.value=null;try{await a.assignUsers(p,y.value),g.push({name:"MeetingList"})}catch(s){i.value=s.message||"Assign users failed"}finally{e.value=!1}};return(s,o)=>{var b,v;return r(),l("div",L,[t("div",N,[t("h2",R,' Assign Users to Meeting: "'+d((v=(b=c(a))==null?void 0:b.meeting)==null?void 0:v.title)+'" ',1),e.value?(r(),l("div",$,"Loading users...")):(r(),l("form",{key:1,onSubmit:M(x,["prevent"])},[t("div",D,[o[2]||(o[2]=t("label",{class:"block text-gray-700 font-medium mb-2"},"Select Users",-1)),V(A,{modelValue:n.value,"onUpdate:modelValue":o[0]||(o[0]=f=>n.value=f),options:c(m).users,multiple:!0,"track-by":"id",label:"label",placeholder:"Select users"},null,8,["modelValue","options"])]),i.value?(r(),l("div",E,d(i.value),1)):S("",!0),t("div",I,[t("button",{disabled:e.value,type:"submit",class:"bg-indigo-500 hover:bg-indigo-600 text-white font-semibold px-5 py-2 rounded transition"},d(e.value?"Assigning...":"Assign Users"),9,j),t("button",{type:"button",onClick:o[1]||(o[1]=f=>c(g).push({name:"MeetingList"})),class:"bg-gray-200 hover:bg-gray-300 text-gray-700 font-semibold px-5 py-2 rounded transition"}," Cancel ")])],32))])])}}};export{K as default};
