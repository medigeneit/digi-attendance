import{u as w,D as N,r as d,h as j,q as U,c as n,o as i,a as e,k as r,v as F,z as $,H as c,F as M,e as D,t as a,m as l,n as E,j as P,s as q}from"./index-DVSBxIzu.js";import{u as z}from"./adminCareers-CM8myG86.js";import{u as B}from"./department-BinYAAz6.js";const L={class:"max-w-7xl mx-auto px-4 py-8"},R={class:"mt-6 grid md:grid-cols-6 gap-3"},I=["value"],K={class:"flex gap-2"},H={class:"mt-6 overflow-x-auto bg-white rounded-2xl border"},G={class:"min-w-full text-sm"},O={class:"px-4 py-3"},Q={class:"font-medium"},W={class:"text-xs text-gray-500 line-clamp-1"},X={class:"px-4 py-3"},Y={class:"px-4 py-3"},Z={class:"px-4 py-3 capitalize"},ee={class:"px-4 py-3"},te={key:0,class:"text-xs px-2 py-1 rounded bg-amber-100 text-amber-800"},se={key:1,class:"text-xs text-gray-400"},oe={class:"px-4 py-3"},le={class:"px-4 py-3 text-right"},ae={class:"inline-flex gap-2"},ne=["onClick"],ie=["onClick"],de={key:0},pe={class:"mt-4 flex items-center justify-between"},ue={class:"text-sm text-gray-500"},re={class:"flex items-center gap-2"},ce=["disabled"],xe=["disabled"],ge={__name:"JobsIndex",setup(be){const f=w(),o=z(),h=B(),{departments:S}=N(h),x=d(""),b=d(null),v=d(null),y=d(""),m=d(""),g=d(1),_=d(12);async function p(){try{await o.fetchJobs({q:x.value||void 0,department_id:b.value||void 0,location_id:v.value||void 0,employment_type:m.value||void 0,status:y.value||void 0,per_page:_.value,page:g.value})}catch(u){console.log(u)}}function V(){f.push({name:"AdminCareersJobCreate"})}function A(u){f.push({name:"AdminCareersJobEdit",params:{id:u}})}async function J(u){if(confirm("Delete this job?"))try{await o.deleteJob(u),await p()}catch{alert("Failed to delete")}}return j(p),j(()=>{h.fetchDepartments()}),U([g,_],p),(u,s)=>{var C;return i(),n("div",L,[e("div",{class:"flex items-center justify-between"},[s[9]||(s[9]=e("h1",{class:"text-2xl font-semibold"},"Jobs (Admin)",-1)),e("button",{onClick:V,class:"px-4 py-2 rounded-xl bg-emerald-600 text-white"},"+ New Job")]),e("div",R,[r(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>x.value=t),onKeyup:$(p,["enter"]),placeholder:"Search title/summary…",class:"border rounded-lg px-3 py-2"},null,544),[[F,x.value]]),r(e("select",{"onUpdate:modelValue":s[1]||(s[1]=t=>b.value=t),class:"border rounded-lg px-3 py-2"},[s[10]||(s[10]=e("option",{value:null},"All Departments",-1)),(i(!0),n(M,null,D(l(S),t=>(i(),n("option",{key:t==null?void 0:t.id,value:t==null?void 0:t.id},a(t==null?void 0:t.name),9,I))),128))],512),[[c,b.value]]),r(e("select",{"onUpdate:modelValue":s[2]||(s[2]=t=>v.value=t),class:"border rounded-lg px-3 py-2"},s[11]||(s[11]=[e("option",{value:null},"All Locations",-1)]),512),[[c,v.value]]),r(e("select",{"onUpdate:modelValue":s[3]||(s[3]=t=>m.value=t),class:"border rounded-lg px-3 py-2"},s[12]||(s[12]=[E('<option value="">Type</option><option value="full_time">Full Time</option><option value="part_time">Part Time</option><option value="contract">Contract</option><option value="internship">Internship</option><option value="temporary">Temporary</option>',6)]),512),[[c,m.value]]),r(e("select",{"onUpdate:modelValue":s[4]||(s[4]=t=>y.value=t),class:"border rounded-lg px-3 py-2"},s[13]||(s[13]=[e("option",{value:""},"Any Status",-1),e("option",{value:"draft"},"Draft",-1),e("option",{value:"published"},"Published",-1),e("option",{value:"closed"},"Closed",-1)]),512),[[c,y.value]]),e("div",K,[e("button",{onClick:p,class:"px-4 py-2 rounded-lg bg-indigo-600 text-white w-full"},"Filter"),e("button",{onClick:s[5]||(s[5]=t=>{x.value="",b.value=null,v.value=null,m.value="",y.value="",p()}),class:"px-4 py-2 rounded-lg border w-full"},"Reset")])]),e("div",H,[e("table",G,[s[15]||(s[15]=e("thead",null,[e("tr",{class:"text-left border-b"},[e("th",{class:"px-4 py-3"},"Title"),e("th",{class:"px-4 py-3"},"Dept"),e("th",{class:"px-4 py-3"},"Location"),e("th",{class:"px-4 py-3"},"Type"),e("th",{class:"px-4 py-3"},"Deadline"),e("th",{class:"px-4 py-3"},"Status"),e("th",{class:"px-4 py-3 text-right"},"Actions")])],-1)),e("tbody",null,[(i(!0),n(M,null,D(l(o).jobs,t=>{var k;return i(),n("tr",{key:t.id,class:"border-b hover:bg-gray-50"},[e("td",O,[e("div",Q,a(t.title),1),e("div",W,a(t.summary),1)]),e("td",X,a(((k=t.department)==null?void 0:k.name)||"—"),1),e("td",Y,a(t.location||"—"),1),e("td",Z,a((t.employment_type||"").replace("_"," ")),1),e("td",ee,[t.application_deadline?(i(),n("span",te,a(t.application_deadline),1)):(i(),n("span",se,"—"))]),e("td",oe,[e("span",{class:q(["text-xs px-2 py-1 rounded",{"bg-gray-100 text-gray-700":t.status==="draft","bg-emerald-100 text-emerald-800":t.status==="published","bg-rose-100 text-rose-800":t.status==="closed"}])},a(t.status),3)]),e("td",le,[e("div",ae,[e("button",{onClick:T=>A(t.id),class:"px-3 py-1 rounded bg-blue-600 text-white"},"Edit",8,ne),e("button",{onClick:T=>J(t.id),class:"px-3 py-1 rounded bg-rose-600 text-white"},"Delete",8,ie)])])])}),128)),(C=l(o).jobs)!=null&&C.length?P("",!0):(i(),n("tr",de,s[14]||(s[14]=[e("td",{colspan:"7",class:"px-4 py-8 text-center text-gray-500"},"No jobs found",-1)])))])])]),e("div",pe,[e("div",ue," Page "+a(l(o).jobsMeta.page)+" / "+a(l(o).jobsMeta.last_page)+" • "+a(l(o).jobsMeta.total)+" total ",1),e("div",re,[e("button",{disabled:l(o).jobsMeta.page<=1,onClick:s[6]||(s[6]=t=>g.value=Math.max(1,l(o).jobsMeta.page-1)),class:"px-3 py-1 rounded border"},"Prev",8,ce),e("button",{disabled:l(o).jobsMeta.page>=l(o).jobsMeta.last_page,onClick:s[7]||(s[7]=t=>g.value=Math.min(l(o).jobsMeta.last_page,l(o).jobsMeta.page+1)),class:"px-3 py-1 rounded border"},"Next",8,xe),r(e("select",{"onUpdate:modelValue":s[8]||(s[8]=t=>_.value=t),class:"border rounded px-2 py-1"},s[16]||(s[16]=[e("option",{value:12},"12",-1),e("option",{value:24},"24",-1),e("option",{value:48},"48",-1)]),512),[[c,_.value,void 0,{number:!0}]])])])])}}};export{ge as default};
