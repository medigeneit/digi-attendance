import{s as f,r as b,b as U,A as y,c as o,a as e,d as p,C as D,F as v,x as g,h as c,m as _,v as M,o as l,t as n,q as N,g as P,f as T}from"./index-D4zU1mMP.js";import{L as F}from"./LoaderView-EtWnfk2u.js";import{_ as j}from"./MultiselectDropdown-Nsh5WyC2.js";import{u as q}from"./attendance-BW5svkM4.js";import{u as z}from"./company-BLXBahGL.js";import{S as E}from"./sweetalert2.esm.all-89IKscqO.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vue-multiselect.esm-7-ofqN1q.js";const K={class:"space-y-2 px-4"},O={class:"flex flex-wrap items-center gap-2"},W=["value"],$={key:0,class:"text-center py-4"},G={key:1,class:"space-y-4"},H={key:0,class:"overflow-x-auto"},J={class:"min-w-full table-auto border-collapse border border-gray-200 bg-white rounded-md text-sm"},Q={class:"border border-gray-300 px-2"},X={class:"border border-gray-300 px-2"},Y={class:"border border-gray-300 px-2"},Z={class:"border border-gray-300 px-2"},I={class:"border border-gray-300 px-2"},ee={class:"border border-gray-300 px-2"},te={class:"border border-gray-300 px-2"},se={class:"border border-gray-300 px-2"},ae={key:0},oe={key:1,class:"text-gray-500 italic text-xs"},le={class:"border border-gray-300 px-2"},ne={key:1,class:"text-center text-red-500 text-xl italic mt-10"},ye={__name:"LateAttendanceReport",setup(re){const h=P();T();const u=q(),x=z(),{dailyLateLogs:w,isLoading:k,selectedMonth:C}=f(u),{companies:S,employees:L}=f(x),d=b(C),r=b(""),s=b("");U(()=>{x.fetchCompanies()}),y(()=>r.value,async i=>{i&&await x.fetchEmployee(i)}),y(()=>s.value,async i=>{i.id&&await m()});const A=()=>{h.go(-1)},V=async()=>{r.value&&(s!=null&&s.value.id)?await u.lateReportDownloadExcel(r.value,s==null?void 0:s.value.id,d.value):E.fire({icon:"warning",title:"Missing Selection!",text:"Please select Company and Employee first!",confirmButtonText:"OK"})},m=async()=>{r.value&&(s!=null&&s.value.id)&&await u.getAttendanceLateReport(r.value,s==null?void 0:s.value.id,d.value)},B=i=>i==="Pending"?"text-yellow-700":i==="Approved"?"text-green-700":"text-red-500";return(i,a)=>(l(),o("div",K,[e("div",{class:"flex items-center justify-between gap-2"},[e("button",{class:"btn-3",onClick:A},a[3]||(a[3]=[e("i",{class:"far fa-arrow-left"},null,-1),e("span",{class:"hidden md:flex"},"Back",-1)])),a[5]||(a[5]=e("h1",{class:"title-md md:title-lg flex-wrap text-center"},"Late Reports",-1)),e("div",{class:"flex gap-4"},[e("button",{type:"button",onClick:V,class:"btn-3"},a[4]||(a[4]=[e("i",{class:"far fa-file-excel text-2xl text-green-500"},null,-1)]))])]),e("div",O,[e("div",null,[p(e("select",{id:"user-filter","onUpdate:modelValue":a[0]||(a[0]=t=>r.value=t),class:"input-1"},[a[6]||(a[6]=e("option",{value:""},"Select Company",-1)),(l(!0),o(v,null,g(c(S),t=>(l(),o("option",{key:t.id,value:t.id},n(t.name),9,W))),128))],512),[[D,r.value]])]),e("div",null,[_(j,{modelValue:s.value,"onUpdate:modelValue":a[1]||(a[1]=t=>s.value=t),options:c(L),multiple:!1,label:"label",placeholder:"Please select employee..."},null,8,["modelValue","options"])]),e("div",null,[p(e("input",{id:"user-filter","onUpdate:modelValue":a[2]||(a[2]=t=>d.value=t),onChange:m,type:"month",class:"input-1"},null,544),[[M,d.value]])])]),c(k)?(l(),o("div",$,[_(F)])):(l(),o("div",G,[r.value&&s.value?(l(),o("div",H,[e("table",J,[a[7]||(a[7]=e("thead",null,[e("tr",{class:"bg-gray-200"},[e("th",{class:"border border-gray-300 px-2 text-left"},"#"),e("th",{class:"border border-gray-300 px-2 text-left"},"Date"),e("th",{class:"border border-gray-300 px-2 text-left"},"Employee Name"),e("th",{class:"border border-gray-300 px-2 text-left"},"Company"),e("th",{class:"border border-gray-300 px-2 text-left"},"Department"),e("th",{class:"border border-gray-300 px-2 text-left"},"Entry Time"),e("th",{class:"border border-gray-300 px-2 text-left"},"Late Duration"),e("th",{class:"border border-gray-300 px-2 text-left"},"Action"),e("th",{class:"border border-gray-300 px-2 text-left"},"Shift")])],-1)),e("tbody",null,[(l(!0),o(v,null,g(c(w),(t,R)=>(l(),o("tr",{key:t.id,class:"border-b border-gray-200 hover:bg-blue-200"},[e("td",Q,n(R+1),1),e("td",X,n(t==null?void 0:t.date),1),e("td",Y,n((t==null?void 0:t.user_name)||"Unknown"),1),e("td",Z,n((t==null?void 0:t.company_name)||"Unknown"),1),e("td",I,n((t==null?void 0:t.department_name)||"Unknown"),1),e("td",ee,n(t.entry_time),1),e("td",te,n(t.late_duration),1),e("td",se,[t!=null&&t.short_leave?(l(),o("div",ae,[e("span",{class:N(B(t.short_leave.status))},n(t.short_leave.status||"Waiting"),3)])):(l(),o("div",oe,"No Application"))]),e("td",le,n(t.shift_name),1)]))),128))])])])):(l(),o("div",ne," Please select company and employee "))]))]))}};export{ye as default};
