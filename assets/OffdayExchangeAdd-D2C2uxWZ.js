import{u as V,g as q,r,D as R,q as O,h as B,p as D,c as d,o as u,a as t,d as k,m as C,b as H,w as L,k as N,t as E,n as i,l as m,v as f}from"./index-DKNJ0-JN.js";import{L as T}from"./LoaderView-BEaHKhEr.js";import{_ as A}from"./MultiselectDropdown-CuZqrO7g.js";import{u as M}from"./exchange-C0s9cyHy.js";import{u as W}from"./user-t7uGqQHj.js";const j={class:"max-w-3xl mx-auto p-4 space-y-4"},$={class:"flex items-center justify-between gap-2"},z={key:0,class:"text-center"},F={class:"title-lg text-center"},G={key:0,class:"text-red-500 text-sm"},Y={__name:"OffdayExchangeAdd",setup(I){const y=V(),b=M(),g=W(),o=q(),p=r(null),c=r(!1),{error:v}=R(b),s=r({exchange_type:"offday",current_date:"",exchange_date:"",works_in_hand:"",handover_user_id:""});O(()=>p.value,l=>{s.value.handover_user_id=l==null?void 0:l.id,c.value=!1});const x=r(!1),U=async()=>{var l;x.value=!0,v.value=null;try{const e={user_id:(l=o==null?void 0:o.user)==null?void 0:l.id,...s.value};if(!s.value.handover_user_id){c.value=!0;return}const n=await b.createExchange(e);y.push({name:"ExchangeOffdayShow",params:{id:n==null?void 0:n.id}})}catch{}finally{x.value=!1}};B(()=>{g.fetchTypeWiseEmployees({except:"auth"}),o.fetchUser()});const S=()=>{y.go(-1)};return(l,e)=>{var h,w,_;const n=D("RouterLink");return u(),d("div",j,[t("div",$,[t("button",{class:"btn-3",onClick:S},e[5]||(e[5]=[t("i",{class:"far fa-arrow-left"},null,-1),t("span",{class:"hidden md:flex"},"Back",-1)])),e[7]||(e[7]=t("h1",{class:"title-md md:title-lg flex-wrap text-center"},"Offday Exchange Request",-1)),t("div",null,[k(n,{to:"/",class:"btn-2"},{default:C(()=>e[6]||(e[6]=[H("Home")])),_:1,__:[6]})])]),x.value?(u(),d("div",z,[k(T)])):(u(),d("form",{key:1,onSubmit:L(U,["prevent"]),class:"space-y-4 card-bg md:p-8 p-4"},[t("div",null,[t("h4",F,E((_=(w=(h=i(o))==null?void 0:h.user)==null?void 0:w.company)==null?void 0:_.name),1),e[8]||(e[8]=t("p",{class:"text-center"},"Offday Exchange Application",-1))]),t("div",null,[e[9]||(e[9]=t("label",{for:"current-date",class:"block text-sm font-medium"},"Holiday/Weekend (Date)",-1)),m(t("input",{type:"date",id:"current-date","onUpdate:modelValue":e[0]||(e[0]=a=>s.value.current_date=a),class:"input-1 w-full",required:""},null,512),[[f,s.value.current_date]])]),t("div",null,[e[10]||(e[10]=t("label",{for:"exchange-date",class:"block text-sm font-medium"},"Exchange Date",-1)),m(t("input",{type:"date",id:"exchange-date","onUpdate:modelValue":e[1]||(e[1]=a=>s.value.exchange_date=a),class:"input-1 w-full",required:""},null,512),[[f,s.value.exchange_date]])]),t("div",null,[e[11]||(e[11]=t("label",{for:"works-in-hand",class:"block text-sm font-medium"},"Reason",-1)),m(t("textarea",{id:"works-in-hand","onUpdate:modelValue":e[2]||(e[2]=a=>s.value.reason=a),class:"input-1 w-full",placeholder:"Enter details of reason"},null,512),[[f,s.value.reason]])]),t("div",null,[e[12]||(e[12]=t("label",{for:"works-in-hand",class:"block text-sm font-medium"},"Works in Hand (Optional)",-1)),m(t("textarea",{id:"works-in-hand","onUpdate:modelValue":e[3]||(e[3]=a=>s.value.works_in_hand=a),class:"input-1 w-full",placeholder:"Enter details of works in hand"},null,512),[[f,s.value.works_in_hand]])]),t("div",null,[e[13]||(e[13]=t("label",{for:"handover-user",class:"block text-sm font-medium"},"Handover User",-1)),k(A,{modelValue:p.value,"onUpdate:modelValue":e[4]||(e[4]=a=>p.value=a),options:i(g).users,multiple:!1,required:c.value,label:"label",placeholder:"Select user"},null,8,["modelValue","options","required"])]),i(v)?(u(),d("div",G,E(i(v)),1)):N("",!0),e[14]||(e[14]=t("div",{class:"flex justify-center"},[t("button",{type:"submit",class:"btn-2"},"Submit")],-1))],32))])}}};export{Y as default};
