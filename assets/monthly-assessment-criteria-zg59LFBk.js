import{L as O,r as p,x as P,M as y}from"./index-BRcUpGA5.js";const B=O("monthlyAssessmentCriteria",()=>{const r=p([]),u=p(null),d=p(!1),c=p(!1),o=p(null),i=p({total:0,per_page:15,current_page:1,last_page:1}),v=p({q:"",is_active:"",date_from:"",date_to:"",sort_by:"created_at",sort_dir:"desc",per_page:15,page:1}),S=P(()=>i.value.current_page<i.value.last_page),w=P(()=>i.value.current_page>1),g=()=>{o.value=null},_=e=>({id:e.id,name:e.name??"",description:e.description??"",is_active:Number(e.is_active??0),created_at:e.created_at??null,updated_at:e.updated_at??null}),L=e=>{const t={},a=["q","is_active","date_from","date_to","sort_by","sort_dir","per_page","page"];for(const n of a)e[n]!==void 0&&e[n]!==null&&e[n]!==""&&(t[n]=e[n]);return t.is_active!==void 0&&(t.is_active=Number(t.is_active)),t.per_page!==void 0&&(t.per_page=Number(t.per_page)),t.page!==void 0&&(t.page=Number(t.page)),t},N=e=>({name:String(e.name??"").trim(),description:String(e.description??"").trim(),is_active:Number(e.is_active??0)}),f=e=>{var t,a;return((a=(t=e==null?void 0:e.response)==null?void 0:t.data)==null?void 0:a.message)||(e==null?void 0:e.message)||"Something went wrong"},C=e=>{const t=r.value.findIndex(a=>a.id===e.id);t===-1?r.value.unshift(e):r.value.splice(t,1,e)},q=e=>{const t=r.value.findIndex(a=>a.id===e);t!==-1&&r.value.splice(t,1)};let m=null;async function h(e={}){var n,l;g();const t={...v.value,...e},a=L(t);m&&m.abort(),m=new AbortController,d.value=!0;try{const s=await y.get("/monthly-assessment-criteria",{params:a,signal:m.signal}),x=((n=s==null?void 0:s.data)==null?void 0:n.data)??[],b=((l=s==null?void 0:s.data)==null?void 0:l.meta)??{};r.value=x.map(_),i.value={total:b.total??x.length,per_page:b.per_page??t.per_page,current_page:b.current_page??t.page??1,last_page:b.last_page??1},v.value={...v.value,...a,page:i.value.current_page,per_page:i.value.per_page}}catch(s){(s==null?void 0:s.name)!=="CanceledError"&&(s==null?void 0:s.message)!=="canceled"&&(o.value=f(s))}finally{d.value=!1,m=null}}async function A(e){var t;g(),c.value=!0;try{const a=await y.post("/monthly-assessment-criteria",N(e)),n=_(((t=a==null?void 0:a.data)==null?void 0:t.data)??(a==null?void 0:a.data));return C(n),n}catch(a){throw o.value=f(a),a}finally{c.value=!1}}async function E(e){var t;g(),d.value=!0;try{const a=await y.get(`/monthly-assessment-criteria/${e}`),n=_(((t=a==null?void 0:a.data)==null?void 0:t.data)??(a==null?void 0:a.data));return u.value=n,C(n),n}catch(a){throw o.value=f(a),a}finally{d.value=!1}}async function I(e,t){var a,n;g(),c.value=!0;try{const l=await y.put(`/monthly-assessment-criteria/${e}`,N(t)),s=_(((a=l==null?void 0:l.data)==null?void 0:a.data)??(l==null?void 0:l.data));return C(s),((n=u.value)==null?void 0:n.id)===e&&(u.value=s),s}catch(l){throw o.value=f(l),l}finally{c.value=!1}}async function $(e){var t;g(),c.value=!0;try{return await y.delete(`/monthly-assessment-criteria/${e}`),q(e),((t=u.value)==null?void 0:t.id)===e&&(u.value=null),r.value.length===0&&w.value&&await h({page:i.value.current_page-1}),!0}catch(a){throw o.value=f(a),a}finally{c.value=!1}}async function z(e){return h({page:Number(e)})}async function F(e){return h({per_page:Number(e),page:1})}function M(e){u.value=e?_(e):null}function k(){r.value=[],u.value=null,i.value={total:0,per_page:15,current_page:1,last_page:1},v.value={q:"",is_active:"",date_from:"",date_to:"",sort_by:"created_at",sort_dir:"desc",per_page:15,page:1},g(),d.value=!1,c.value=!1}return{items:r,current:u,isLoading:d,isSaving:c,error:o,meta:i,filters:v,hasNextPage:S,hasPrevPage:w,fetchList:h,createCriteria:A,updateCriteria:I,deleteCriteria:$,setPage:z,setPerPage:F,setCurrent:M,reset:k,fetchOne:E}});export{B as u};
