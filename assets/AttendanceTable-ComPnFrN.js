import{f as C}from"./datetime-y2WWmmYq.js";import{x as L,c as d,o as a,a as t,t as s,s as o,g as D,p as P,n as T,F as x,e as O,k as n,d as y,m as c,b as _,j as l}from"./index-DGmPUdou.js";const E={class:"flex items-center gap-2"},j="flex items-center gap-1.5 px-3 py-1 rounded-full text-xs font-medium border transition-all",M={__name:"StatusBadge",props:{status:{type:String,required:!0},isApproved:{type:Boolean,default:!1}},setup(p){var r;const u=p,m=((r=u.status)==null?void 0:r.toLowerCase())??"",h=L(()=>{switch(m){case"present":return{iconClass:"fas fa-check-circle",label:"Present",classes:"bg-emerald-50 text-emerald-700 border-emerald-200"};case"absent":return{iconClass:"fas fa-times-circle",label:"Absent",classes:"bg-red-50 text-red-700 border-red-200"};case"weekend":return{iconClass:"fas fa-calendar-alt",label:"Weekend",classes:"bg-purple-50 text-purple-700 border-purple-200"};case"eid":return{iconClass:"fas fa-coffee",label:"EID",classes:"bg-amber-50 text-amber-700 border-amber-200"};case"sl":return{iconClass:"fas fa-exclamation-circle",label:"Special Leave",classes:"bg-blue-50 text-blue-700 border-blue-200"};case"cl":return{iconClass:"fas fa-plane-departure",label:"Casual Leave",classes:"bg-cyan-50 text-cyan-700 border-cyan-200"};case"ml":return{iconClass:"fas fa-baby",label:"Medical Leave",classes:"bg-pink-50 text-pink-700 border-pink-200"};case"wpl":return{iconClass:"fas fa-user-slash",label:"Without Pay Leave",classes:"bg-yellow-50 text-yellow-700 border-yellow-200"};default:return m.startsWith("holiday")?{iconClass:"fas fa-umbrella-beach",label:u.status,classes:"bg-lime-50 text-lime-700 border-lime-200"}:{iconClass:"fas fa-question-circle",label:u.status,classes:"bg-gray-50 text-gray-700 border-gray-200"}}});return(i,e)=>(a(),d("div",E,[t("div",{class:o([j,h.value.classes])},s(p.status),3)]))}},q={class:"min-w-full table-auto border-collapse border border-gray-300 bg-white"},B={class:"text-center text-xs"},R={class:"border px-1 py-0.5"},W={class:"border px-1 py-0.5"},V=["title"],$={class:"flex flex-col"},H={class:"font-semibold text-gray-800"},I={key:0,class:"text-xs"},z=["title"],N={key:0,class:"font-semibold"},F=["title"],U={class:"border px-1 py-0.5"},G={class:"border px-1 py-0.5"},J={key:2,class:"bg-red-100 text-red-700 px-2 py-1 rounded text-xs font-semibold"},K={class:"border px-1 py-0.5"},Q={class:"border px-1 py-0.5"},X={key:0},Y={class:"border px-1 py-0.5"},Z={key:0},g={class:"border py-0.5"},ee={class:"flex justify-center items-center gap-1"},te={key:0},ae={key:1},ne={__name:"AttendanceTable",props:{logs:{type:Array,required:!0},applyApplication:{type:Boolean,default:!1}},setup(p){const u=D();function m(h){try{return C(new Date(h))}catch{return!1}}return(h,r)=>{const i=P("router-link");return a(),d("table",q,[t("thead",null,[t("tr",{class:o(["bg-gray-200 text-xs sticky top-14 z-20",{"top-28":T(u).isAdminMood}])},r[0]||(r[0]=[t("th",{class:"border p-1"},"Date",-1),t("th",{class:"border p-1"},"Day",-1),t("th",{class:"border p-1"},"Shift",-1),t("th",{class:"border p-1"},"Entry Time",-1),t("th",{class:"border p-1"},"Exit Time",-1),t("th",{class:"border p-1"},"Working Hours",-1),t("th",{class:"border p-1"},"Over Time",-1),t("th",{class:"border p-1"},"Approved OT",-1),t("th",{class:"border p-1"},"Late Entry",-1),t("th",{class:"border p-1"},"Early Leave",-1),t("th",{class:"border p-1"},"Status",-1)]),2)]),t("tbody",B,[(a(!0),d(x,null,O(p.logs,e=>{var b,v,f,k,w,A,S;return a(),d("tr",{key:e.date,class:o(["hover:z-50 hover:bg-blue-200",{"bg-blue-50 border-y-2 border-violet-200":m(e.date),"hover:border-b-2 hover:border-gray-200":!m(e.date)}])},[t("td",R,s(e.date),1),t("td",W,s(e.weekday),1),t("td",{class:"border px-2 py-1 text-sm whitespace-nowrap",title:`${e.shift_start_time} to ${e.shift_end_time}`},[t("div",$,[t("div",H,s(e.shift_name),1),e.shift_exchange_application_status?(a(),d("div",I,[y(i,{to:{name:"ExchangeShiftShow",params:{id:e.shift_exchange_application_id}},class:o(["inline-flex items-center gap-1 px-2 py-0.5 font-medium transition hover:underline hover:opacity-90",{" text-yellow-800":e.shift_exchange_application_status==="Pending"," text-green-800":e.shift_exchange_application_status==="Approved"," text-red-800":e.shift_exchange_application_status==="Rejected"}])},{default:c(()=>[_(s(e.shift_exchange_application_status),1)]),_:2},1032,["to","class"])])):n("",!0)])],8,V),t("td",{class:o(["border px-2 py-1 text-sm whitespace-nowrap",{"bg-red-50 text-red-800":e.late_duration&&e.first_short_leave!=="Approved","bg-blue-50 text-blue-800":((b=e==null?void 0:e.manual_attendance)==null?void 0:b.check_in)&&e.entry_time}])},[t("div",{class:"flex items-center gap-1",title:`Device: ${e.entry_device}`},[(v=e==null?void 0:e.manual_attendance)!=null&&v.check_in&&e.entry_time?(a(),d("span",N,"M:")):n("",!0),t("span",null,s(e.entry_time||"--"),1),(f=e==null?void 0:e.manual_attendance)!=null&&f.id&&((k=e==null?void 0:e.manual_attendance)!=null&&k.check_in)?(a(),l(i,{key:1,to:{name:"ManualAttendanceShow",params:{id:e.manual_attendance.id}},class:"text-blue-600 hover:text-blue-800"},{default:c(()=>r[1]||(r[1]=[t("i",{class:"far fa-eye ml-1"},null,-1)])),_:2,__:[1]},1032,["to"])):n("",!0)],8,z)],2),t("td",{class:o(["border px-2 py-1 text-sm whitespace-nowrap",{"bg-red-50 text-red-800":e.early_leave_duration&&e.last_short_leave!=="Approved","bg-blue-50 text-blue-800":((w=e==null?void 0:e.manual_attendance)==null?void 0:w.check_out)&&e.exit_time}])},[t("div",{class:"flex items-center gap-1",title:`Device: ${e.exit_device}`},[t("span",null,s(e.exit_time||"--"),1),(A=e==null?void 0:e.manual_attendance)!=null&&A.id&&((S=e==null?void 0:e.manual_attendance)!=null&&S.check_out)?(a(),l(i,{key:0,to:{name:"ManualAttendanceShow",params:{id:e.manual_attendance.id}},class:"text-blue-600 hover:text-blue-800"},{default:c(()=>r[2]||(r[2]=[t("i",{class:"far fa-eye ml-1"},null,-1)])),_:2,__:[2]},1032,["to"])):n("",!0),!e.exit_time&&new Date(e.date)<new Date&&e.status==="Present"&&p.applyApplication?(a(),l(i,{key:1,to:{name:"ManualAttendanceAdd",query:{type:"Forget Punch",date:new Date(e.date+" UTC").toISOString().split("T")[0],entry_time:e.entry_time,exit_time:e.exit_time}},class:"btn-link text-red-600"},{default:c(()=>r[3]||(r[3]=[_(" (Check Out Apply) ")])),_:2,__:[3]},1032,["to"])):n("",!0)],8,F)],2),t("td",U,s(e.working_hours),1),t("td",G,[e.over_time_status==="Approved"?(a(),l(i,{key:0,to:{name:"MyOvertimeShow",params:{id:e.over_time_application_id}},class:"inline-flex items-center gap-1 font-medium text-green-600 transition hover:underline hover:opacity-90"},{default:c(()=>[_(s(e.overtime_hours)+" (Approved) ",1)]),_:2},1032,["to"])):e.over_time_status==="Pending"?(a(),l(i,{key:1,to:{name:"MyOvertimeShow",params:{id:e.over_time_application_id}},class:"inline-flex items-center gap-1 py-0.5 font-medium transition hover:underline hover:opacity-90"},{default:c(()=>[_(s(e.overtime_hours??"--")+" | Pending ",1)]),_:2},1032,["to"])):e.over_time_status==="Rejected"?(a(),d("span",J,"Rejected")):e.over_time_status&&e.overtime_hours?(a(),d(x,{key:3},[t("span",null,s(e.overtime_hours),1),p.applyApplication&&e.overtime_hours&&e._overtime_minutes>=120?(a(),l(i,{key:0,to:{name:"MyOvertimeAdd",query:{date:new Date(e.date+" UTC").toISOString().split("T")[0],start_time:e.exit_time,end_time:e.shift_end_time,request_overtime_hours:e.overtime_hours}},class:"btn-link text-red-600"},{default:c(()=>r[4]||(r[4]=[_(" (Apply) ")])),_:2,__:[4]},1032,["to"])):n("",!0)],64)):n("",!0)]),t("td",K,s(e!=null&&e.approved_over_times?e.approved_over_times+" H":""),1),t("td",Q,[e.late_duration?(a(),d("div",X,[_(s(e.late_duration)+" ",1),e.first_short_leave?(a(),l(i,{key:0,to:{name:"ShortLeaveShow",params:{id:e.first_short_leave_id}},class:o(["hover:underline",{"text-green-500":e.first_short_leave==="Approved","text-yellow-500":e.first_short_leave==="Pending","text-red-500":e.first_short_leave==="Rejected"}])},{default:c(()=>[_(" ("+s(e.first_short_leave)+") ",1)]),_:2},1032,["to","class"])):n("",!0),p.applyApplication&&e.late_duration&&!e.first_short_leave?(a(),l(i,{key:1,to:{name:"ShortLeaveAdd",query:{type:"Delay",start_time:e.shift_start_time,end_time:e.entry_time}},class:"btn-link text-red-600"},{default:c(()=>r[5]||(r[5]=[_(" (Apply) ")])),_:2,__:[5]},1032,["to"])):n("",!0)])):n("",!0)]),t("td",Y,[e.early_leave_duration?(a(),d("div",Z,[_(s(e.early_leave_duration)+" ",1),e.last_short_leave?(a(),l(i,{key:0,to:{name:"ShortLeaveShow",params:{id:e.last_short_leave_id}},class:o(["px-1",{"text-green-500":e.last_short_leave==="Approved","text-yellow-500":e.last_short_leave==="Pending","text-red-500":e.last_short_leave==="Rejected"}])},{default:c(()=>[_(" ("+s(e.last_short_leave)+") ",1)]),_:2},1032,["to","class"])):n("",!0),p.applyApplication&&e.early_leave_duration&&!e.last_short_leave?(a(),l(i,{key:1,to:{name:"ShortLeaveAdd",query:{type:"Early",start_time:e.exit_time,end_time:e.shift_end_time}},class:"btn-link text-red-600"},{default:c(()=>r[6]||(r[6]=[_(" (Apply) ")])),_:2,__:[6]},1032,["to"])):n("",!0)])):n("",!0)]),t("td",g,[t("div",ee,[y(M,{status:e.status},null,8,["status"]),e.leave_application_id?(a(),d("div",te,[y(i,{to:{name:"LeaveApplicationShow",params:{id:e.leave_application_id}},class:"text-blue-600 text-xs inline-flex items-center gap-1 hover:underline hover:text-blue-800",title:"View Leave Application"},{default:c(()=>[t("span",{class:o(["text-xs font-medium",{"text-green-700":e.application_status==="Approved","text-yellow-700":e.application_status==="Pending","text-red-700":e.application_status==="Rejected"}])},s(e.status==="Absent"?e.leave_application_type:"")+" ("+s(e.application_status||"Waiting Handover")+") ",3)]),_:2},1032,["to"])])):n("",!0),e.day_exchange_id?(a(),d("div",ae,[y(i,{to:{name:"ExchangeOffdayShow",params:{id:e.day_exchange_id}},class:"text-blue-600 text-xs hover:underline hover:text-blue-800",title:"View Exchange Offday Application"},{default:c(()=>[t("span",{class:o(["text-xs font-medium",{"text-green-700":e.day_exchange_status==="Approved","text-yellow-700":e.day_exchange_status==="Pending","text-red-700":e.day_exchange_status==="Rejected"}])},[["Absent","Present"].includes(e.status)?(a(),d(x,{key:0},[_(" Offday ("+s(e.day_exchange_status||"Waiting Handover")+") ",1)],64)):(a(),d(x,{key:1},[_(s(e.day_exchange_status||"Waiting Handover"),1)],64))],2)]),_:2},1032,["to"])])):n("",!0)])])],2)}),128))])])}}};export{ne as _};
