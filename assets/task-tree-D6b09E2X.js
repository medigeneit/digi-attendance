import{r as y,p as g,c as s,o as p,h as _,a as c,v as f,g as b,w as x}from"./index-DIQ3TADa.js";const v={class:"text-gray-600 relative"},T=["placeholder"],S={class:"absolute right-2 top-[50%] translate-y-[-50%] flex gap-1"},V={__name:"SearchInput",props:{modelValue:String,placeholder:{type:String,default:"Type to search..."},debounceTime:{type:Number,default:500}},emits:["update:modelValue"],setup(t,{emit:r}){const n=t,u=y(),a=r,e=i=>{a("update:modelValue",i||void 0)};let o=0;const d=g({get(){return n.modelValue},set(i){n.debounceTime>0?(clearTimeout(o),o=setTimeout(e,n.debounceTime,i)):e(i)}});return(i,l)=>(p(),s("div",v,[_(c("input",{ref_key:"searchInput",ref:u,id:"search","onUpdate:modelValue":l[0]||(l[0]=h=>d.value=h),type:"text",class:"!pr-7 w-full rounded-md px-2 py-1 border-2 border-gray-400 placeholder:text-sm focus:outline-gray-400 h-full",placeholder:t.placeholder},null,8,T),[[f,d.value]]),l[3]||(l[3]=c("label",{class:"absolute text-xs left-2.5 -top-1.5 bg-slate-100 text-blue-500"},"Search",-1)),c("div",S,[d.value?(p(),s("i",{key:0,class:"fas fa-times opacity-35 hover:opacity-60 cursor-pointer",onClick:l[1]||(l[1]=x(()=>{e(""),u.value.focus()},["prevent"]))})):b("",!0),l[2]||(l[2]=c("i",{class:"fas fa-search opacity-80"},null,-1))])]))}};function m(t,r){var u,a;let n=!0;if(r!=null&&r["user-ids"]&&(n=n&&t.users.some(e=>e.id==(r==null?void 0:r["user-ids"]))),r!=null&&r.status){const e={"not-completed":["IN_PROGRESS","PENDING"],"only-completed":["COMPLETED"]},o=e==null?void 0:e[r==null?void 0:r.status];n=n&&o.includes(t==null?void 0:t.status)}return((u=t==null?void 0:t.children_tasks)==null?void 0:u.length)>0?n&&((a=t==null?void 0:t.children_tasks)==null?void 0:a.filter(e=>m(e,r)).length)>0:n}function I(t,r){var u,a;const n=e=>e.is_urgent&&e.is_important?4:e.is_urgent?3:e.is_important?2:e.is_target?1:0;return((a=(u=t==null?void 0:t.filter(e=>m(e,r)))==null?void 0:u.map(e=>{var o;return{...e,children_tasks:((o=e.children_tasks)==null?void 0:o.length)>0?I(e.children_tasks,r):[]}}))==null?void 0:a.sort((e,o)=>{const d=n(e),i=n(o);return i!==d?i-d:o.priority!==e.priority?o.priority-e.priority:o.serial!==e.serial?o.serial-e.serial:o.id-e.id}))||[]}export{V as _,I as m};
