import{i as S,r as g,b as B,c as u,a as t,j as M,t as r,F as T,x as C,d as I,v as U,o as d,f as V}from"./index-debvsqJq.js";import{L as j}from"./LoaderView-BIoLdzPt.js";import{u as E}from"./notice-Bcn-uVdD.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const H={class:"my-container space-y-6"},A={class:"card-bg p-6"},P={key:1,class:"text-center text-red-500"},R={key:2,class:"grid gap-2"},$={class:"bg-gray-100 p-4 rounded-lg"},q={class:"grid md:grid-cols-2 gap-4"},z={class:"text-lg text-gray-800"},G={class:"text-lg text-gray-800"},J={class:"text-lg text-gray-800"},K={class:"text-lg text-gray-800"},O={class:"col-span-full"},Q=["innerHTML"],W={class:"md:flex justify-center mt-8 gap-4"},se={__name:"NoticeDetails",setup(X){const m=E(),x=S(),y=V(),c=g(""),s=g(null),p=g(!0),n=g(null),f=a=>new Date(a).toLocaleString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}),N=async()=>{var a,e,o;try{p.value=!0,n.value=null;const l=y.params.id;s.value=await m.fetchNoticeDetails(l),c.value=(a=s.value.user_feedback)==null?void 0:a.feedback}catch(l){n.value=((o=(e=l.response)==null?void 0:e.data)==null?void 0:o.message)||"Failed to load notice details",x.error(n.value)}finally{p.value=!1}},h=async()=>{var a,e;if(c.value)try{const o=y.params.id,l={feedback:c.value};await m.createNoticeFeedback(o,l)}catch(o){n.value=((e=(a=o.response)==null?void 0:a.data)==null?void 0:e.message)||"Failed to load notice details",x.error(n.value)}finally{p.value=!1}};B(async()=>{await N()});const L=async a=>{window.open(a,"_blank")};return(a,e)=>{var o,l,b,k,_,w,D;return d(),u("div",H,[t("div",A,[e[10]||(e[10]=t("h2",{class:"title-lg text-center"},"Notice Details",-1)),p.value?(d(),M(j,{key:0,class:"shadow-none"})):n.value?(d(),u("div",P,[t("p",null,r(n.value),1)])):(d(),u("div",R,[t("div",$,[e[8]||(e[8]=t("p",{class:"title-md"},"Notice Info",-1)),e[9]||(e[9]=t("hr",{class:"mb-2"},null,-1)),t("div",q,[t("div",null,[e[2]||(e[2]=t("p",{class:"text-sm font-bold text-gray-600"},"Company:",-1)),t("p",z,r(((l=(o=s.value)==null?void 0:o.company)==null?void 0:l.name)||"N/A"),1)]),t("div",null,[e[3]||(e[3]=t("p",{class:"text-sm font-bold text-gray-600"},"Department:",-1)),t("p",G,[(d(!0),u(T,null,C((b=s.value)==null?void 0:b.departments,(i,v)=>{var F;return d(),u("span",{key:i.id},r(i==null?void 0:i.name)+" "+r(v<((F=s.value)==null?void 0:F.departments.length)-1?", ":""),1)}),128))])]),t("div",null,[e[4]||(e[4]=t("p",{class:"text-sm font-bold text-gray-600"},"Published Date:",-1)),t("p",J,r(f((k=s.value)==null?void 0:k.published_at)),1)]),t("div",null,[e[5]||(e[5]=t("p",{class:"text-sm font-bold text-gray-600"},"Expired Date:",-1)),t("p",K,r(f((_=s.value)==null?void 0:_.expired_at)),1)]),t("div",null,[e[6]||(e[6]=t("p",{class:"text-sm font-bold text-gray-600"},"File:",-1)),t("button",{onClick:e[0]||(e[0]=i=>{var v;return L((v=s.value)==null?void 0:v.file)}),class:"btn-2"},"Download File")]),t("div",O,[e[7]||(e[7]=t("p",{class:"text-sm font-bold text-gray-600"},"Description / Body:",-1)),t("p",{class:"text-lg text-gray-800",innerHTML:(w=s.value)==null?void 0:w.description},null,8,Q)])])]),t("div",W,[I(t("input",{"onUpdate:modelValue":e[1]||(e[1]=i=>c.value=i),type:"text",class:"w-full p-2 border rounded"},null,512),[[U,c.value]]),t("div",{class:"bg-blue-500 cursor-pointer text-white w-1/3 text-center px-4 py-2 rounded hover:bg-blue-600",onClick:h},r((D=s.value)!=null&&D.user_feedback?"Notice Feedback Updated":"Submit Notice Feedback"),1)])]))])])}}};export{se as default};
