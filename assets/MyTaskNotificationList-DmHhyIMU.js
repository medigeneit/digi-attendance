import{L as H}from"./LoaderView-Bv6AzloZ.js";import{_ as R}from"./ApproveAndReject-sKGCpMu3.js";import{f as S,a6 as V,D as j,r as B,h as C,q,x as A,p as D,c as t,o as s,a,i as F,j as m,b as k,t as o,m as d,F as n,e as b,d as f,l as I}from"./index-DKJTqFIi.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const $={class:"my-container space-y-4 px-4 py-4 relative"},z={class:"md:text-2xl font-semibold capitalize text-gray-700"},E={key:0,class:"ml-auto text-xs bg-red-500 text-white rounded-full px-2 py-0.5 font-semibold"},U={key:1,class:"space-y-4"},Z={class:"flex gap-2 md:gap-3 items-center"},G={class:"shrink grow font-semibold text-sm md:text-base"},J=["innerHTML"],K={class:"ml-auto shrink-0 grow-0 flex gap-2 md:gap-3 items-center"},O=["innerHTML"],P={key:0,class:"flex flex-wrap gap-y-1 gap-x-3 items-center text-xs md:text-sm lg:text-base"},Q={key:0},W={class:"flex gap-3 items-center"},X={class:"flex items-center gap-8"},Y={key:0,class:"flex flex-wrap flex-col md:flex-row gap-x-1 text-xs md:text-sm text-left"},ee={key:0,class:"hidden md:inline font-bold"},se=["innerHTML"],te={key:2,class:"h-[80vh] flex items-center justify-center border rounded-md bg-white/50 text-gray-400"},me={__name:"MyTaskNotificationList",setup(ae){const r=S(),u=V(),{notifications:x,notification_count:_}=j(u),l=B(!1);C(async()=>{r.params.type&&(l.value=!0,await u.fetchTaskNotification(r.params.type),l.value=!1)});async function w(){l.value=!0,await u.fetchTaskNotification(r.params.type),l.value=!1}q(()=>r.params.type,async(p,c)=>{p&&p!==c&&(l.value=!0,await u.fetchTaskNotification(p),l.value=!1)});const T=p=>{if(r.params.type=="pending-requirements")return{name:"RequirementShow",params:{id:p.application_id}}},L=A(()=>r.params.type?r.params.type.replace(/[_-]/g," ").replace(/([A-Z])/g," $1").replace(/\s+/g," ").trim().split(" ").map(p=>p.charAt(0).toUpperCase()+p.slice(1)).join(" "):"");return(p,c)=>{var y,h,g;const N=D("RouterLink");return s(),t("div",$,[a("h2",z,[k(o(L.value||"Notifications")+" ",1),(y=d(_))!=null&&y[d(r).params.type]?(s(),t("span",E,o(((h=d(_))==null?void 0:h[d(r).params.type])||0),1)):m("",!0)]),l.value||d(u).loading?(s(),F(H,{key:0,class:"absolute inset-0 flex items-center justify-center bg-opacity-80 !shadow-none min-h-[80vh]"})):m("",!0),!l.value&&((g=d(x))==null?void 0:g.length)>0?(s(),t("div",U,[(s(!0),t(n,null,b(d(x),e=>{var v;return s(),t("div",{key:e.application_id,class:"bg-white p-3 md:p-4 rounded-xl shadow border grid gap-2"},[a("div",Z,[a("div",G,[a("div",{class:"flex items-center text-green-600 text-xs md:text-sm lg:text-base",innerHTML:e==null?void 0:e.title},null,8,J),a("div",null,o(e==null?void 0:e.user_name),1)]),a("div",K,[f(N,{to:T(e),class:"btn-1 px-3"},{default:I(()=>c[0]||(c[0]=[a("i",{class:"far fa-eye"},null,-1)])),_:2,__:[0]},1032,["to"])])]),a("div",{class:"text-red-600 text-xs md:text-sm lg:text-base line-clamp-1 pr-12",innerHTML:e==null?void 0:e.description},null,8,O),e!=null&&e.type?(s(),t("div",P,[e!=null&&e.type?(s(),t("div",Q,[c[1]||(c[1]=a("span",{class:"text-gray-400"},"Type:",-1)),k(" "+o(e==null?void 0:e.type),1)])):m("",!0)])):m("",!0),a("div",W,[a("div",X,[(v=e==null?void 0:e.messages)!=null&&v.length?(s(),t("p",Y,[(s(!0),t(n,null,b(e.messages,(M,i)=>(s(),t(n,{key:i},[i?(s(),t("span",ee,"|")):m("",!0),a("span",{innerHTML:M,class:"text-black"},null,8,se)],64))),128))])):m("",!0)]),f(R,{class:"ml-auto",notificationType:d(r).params.type,applicationId:e==null?void 0:e.application_id,onSuccess:w,variant:2},null,8,["notificationType","applicationId"])])])}),128))])):l.value?m("",!0):(s(),t("div",te," No notifications. "))])}}};export{me as default};
