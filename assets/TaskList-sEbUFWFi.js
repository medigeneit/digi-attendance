import{r as f,b as S,c as i,a as o,h as d,t as a,F as b,x as h,m as g,o as n,w as A,k as P,n as x,l as y,q as _,g as I,p as M}from"./index-CaMuXalC.js";import{_ as N}from"./CommentModal-CmrFh8sK.js";import{u as R}from"./useTaskStore-CtVgNPtn.js";import"./useCommentStore-COmzRJOM.js";const B={class:"container mx-auto p-6"},D={key:0,class:"text-center py-4 text-gray-500"},O={key:1,class:"text-center py-4 text-red-500"},U={key:2,class:"min-w-full bg-white shadow rounded-lg overflow-hidden"},G=["onClick"],V={class:"px-4 py-2"},$={class:"px-4 py-2 font-medium"},q={class:"px-4 py-2 font-medium grid gap-1"},F={class:"px-4 py-2"},H={class:"px-4 py-2"},j={class:"px-4 py-2 flex gap-2"},z=["onClick"],K=["onClick"],W=1,tt={__name:"TaskList",setup(J){const l=R(),p=I(),u=f(!1),c=f(null);S(()=>{l.fetchTasks()});const C=()=>{p.push({name:"TaskAdd"})},T=(r,s)=>{r.stopPropagation(),p.push({name:"TaskEdit",params:{id:s}})},w=r=>{p.push({name:"TaskShow",params:{id:r}})},v=(r,s)=>{r.stopPropagation(),c.value=s,u.value=!0},k=()=>{u.value=!1,c.value=null};return(r,s)=>{const m=M("RouterLink");return n(),i("div",B,[o("div",{class:"flex justify-between items-center mb-6"},[s[3]||(s[3]=o("h2",{class:"text-2xl font-bold text-gray-800"},"Task List",-1)),o("button",{onClick:C,class:"btn-1"},"Add Task")]),d(l).loading?(n(),i("div",D,"Loading tasks...")):d(l).error?(n(),i("div",O,a(d(l).error),1)):(n(),i("table",U,[s[6]||(s[6]=o("thead",{class:"bg-gray-100"},[o("tr",null,[o("th",{class:"px-4 py-2 text-left"},"#"),o("th",{class:"px-4 py-2 text-left"},"Title"),o("th",{class:"px-4 py-2 text-left"},"Assign Users"),o("th",{class:"px-4 py-2 text-left"},"Priority"),o("th",{class:"px-4 py-2 text-left"},"Status"),o("th",{class:"px-4 py-2 text-left"},"Actions")])],-1)),o("tbody",null,[(n(!0),i(b,null,h(d(l).tasks,(t,E)=>(n(),i("tr",{key:t.id,class:"border-t hover:bg-gray-50 cursor-pointer",onClick:A(e=>w(t.id),["prevent"]),role:"button"},[o("td",V,a(E+1),1),o("td",$,a(t.title),1),o("td",q,[(n(!0),i(b,null,h(t.users,e=>(n(),P(m,{to:`/settings/user-show/${e.id}`,onClick:s[0]||(s[0]=L=>L.stopPropagation()),key:e.id,class:"btn-1"},{default:x(()=>[y(a(e==null?void 0:e.name),1)]),_:2},1032,["to"]))),128))]),o("td",F,[o("span",{class:_([{"text-green-600":t.priority==="LOW","text-yellow-600":t.priority==="MEDIUM","text-orange-600":t.priority==="HIGH","text-red-600":t.priority==="CRITICAL"},"font-semibold"])},a(t.priority),3)]),o("td",H,[o("span",{class:_([{"bg-gray-200":t.status==="PENDING","bg-blue-200":t.status==="IN_PROGRESS","bg-green-200":t.status==="COMPLETED","bg-red-200":t.status==="BLOCKED"},"px-3 py-1 rounded-full"])},a(t.status),3)]),o("td",j,[o("button",{onClick:e=>T(e,t.id),class:"btn-2"},"Edit",8,z),g(m,{to:{name:"TaskUserAssign",params:{id:t==null?void 0:t.id}},class:"bg-indigo-500 hover:bg-indigo-600 text-white font-semibold px-3 py-1 rounded-full transition",onClick:s[1]||(s[1]=e=>e.stopPropagation())},{default:x(()=>s[4]||(s[4]=[y(" Assign Users ")])),_:2},1032,["to"]),g(m,{to:{name:"TaskAdd",query:{parent_id:t==null?void 0:t.id}},class:"bg-indigo-500 hover:bg-indigo-600 text-white font-semibold px-3 py-1 rounded-full transition",onClick:s[2]||(s[2]=e=>e.stopPropagation())},{default:x(()=>s[5]||(s[5]=[y(" + Sub Task ")])),_:2},1032,["to"]),o("button",{onClick:e=>v(e,t.id),class:"bg-indigo-500 text-white px-3 py-1 rounded-full"}," + Comment ",8,K)])],8,G))),128))])])),g(N,{show:u.value,"commentable-id":c.value,"commentable-type":"task","user-id":W,"on-close":k,onSubmitted:d(l).fetchTasks},null,8,["show","commentable-id","onSubmitted"])])}}};export{tt as default};
