import{u as q,r as H,n as R,b as W,i as F,c as p,a as t,t as a,d as z,v as I,j as r,h as n,p as O,F as G,q as J,g as K,o as u,s as c,e as V}from"./index-h7mmMxW1.js";import{u as Q}from"./attendance-85aFR89D.js";import{L as X}from"./LoaderView-BQ1Og2nT.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const Y={class:"px-4 space-y-4"},Z={class:"md:flex items-center justify-between gap-2"},tt={class:"title-lg md:title-lg flex-wrap text-center"},et={class:"flex gap-4"},st={class:"grid md:grid-cols-2 gap-4 text-sm"},at={class:"card-bg p-4 gap-1"},rt={class:"grid md:grid-cols-2"},nt={class:"card-bg p-4 gap-1"},lt={class:"grid md:grid-cols-2"},ot={key:1,class:"space-y-4"},it={class:"overflow-x-auto card-bg"},dt={class:"min-w-full table-auto border-collapse border border-gray-300 bg-white"},ut={class:"text-center text-xs"},pt={class:"border px-1 py-0.5"},ct={class:"border px-1 py-0.5"},_t=["title"],mt=["title"],yt=["title"],ft={class:"border px-1 py-0.5"},ht={class:"border px-1 py-0.5"},vt={key:0},xt=["title"],bt={class:"border px-1 py-0.5"},gt={key:0},kt=["title"],Mt={__name:"MyAttendance",setup(wt){const y=K(),o=q(),l=Q(),i=H(l.selectedMonth),j=R(()=>{if(!i.value)return"";const[d,e]=i.value.split("-");return new Date(d,e-1).toLocaleDateString("en-US",{month:"long",year:"numeric"})}),_=async()=>{var d;(d=o.user)!=null&&d.id&&i.value&&await l.getMonthlyAttendanceByShift(o.user.id,i.value)};W(async()=>{o.isAuthenticated?(await o.fetchUser(),_()):y.push("/login")}),F(i,async d=>{l.selectedMonth=d,await _()});const $=()=>y.go(-1);return(d,e)=>{var m,f,h,v,x,b,g,k,w,D,A,S,L,M,B,T,E,U,C,N,P;return u(),p("div",Y,[t("div",Z,[t("button",{class:"btn-3",onClick:$},e[1]||(e[1]=[t("i",{class:"far fa-arrow-left"},null,-1),t("span",{class:"hidden md:flex"},"Back",-1)])),t("h1",tt," My Attendance of "+a(j.value),1),t("div",et,[t("div",null,[z(t("input",{id:"monthSelect",type:"month","onUpdate:modelValue":e[0]||(e[0]=s=>i.value=s),onChange:_,class:"input-1"},null,544),[[I,i.value]])])])]),t("div",st,[t("div",at,[e[8]||(e[8]=t("h2",{class:"title-md"},"User Info",-1)),e[9]||(e[9]=t("hr",null,null,-1)),t("div",rt,[t("p",null,[e[2]||(e[2]=t("strong",null,"Name:",-1)),r(" "+a((m=n(o).user)==null?void 0:m.name),1)]),t("p",null,[e[3]||(e[3]=t("strong",null,"Designation:",-1)),r(" "+a((f=n(o).user)==null?void 0:f.designation.title),1)]),t("p",null,[e[4]||(e[4]=t("strong",null,"Department:",-1)),r(" "+a((v=(h=n(o).user)==null?void 0:h.department)==null?void 0:v.name),1)]),t("p",null,[e[5]||(e[5]=t("strong",null,"Company:",-1)),r(" "+a((b=(x=n(o).user)==null?void 0:x.company)==null?void 0:b.name),1)]),t("p",null,[e[6]||(e[6]=t("strong",null,"Phone:",-1)),r(" "+a((g=n(o).user)==null?void 0:g.phone),1)]),t("p",null,[e[7]||(e[7]=t("strong",null,"Email:",-1)),r(" "+a((k=n(o).user)==null?void 0:k.email),1)])])]),t("div",nt,[e[16]||(e[16]=t("h2",{class:"title-md"},"Attendance Summary",-1)),e[17]||(e[17]=t("hr",null,null,-1)),t("div",lt,[t("p",null,[e[10]||(e[10]=t("strong",null,"Total Working Days:",-1)),r(" "+a((D=(w=n(l))==null?void 0:w.summary)==null?void 0:D.total_working_days),1)]),t("p",null,[e[11]||(e[11]=t("strong",null,"Present Days:",-1)),r(" "+a((S=(A=n(l))==null?void 0:A.summary)==null?void 0:S.total_present_days),1)]),t("p",null,[e[12]||(e[12]=t("strong",null,"Absent Days:",-1)),r(" "+a((M=(L=n(l))==null?void 0:L.summary)==null?void 0:M.total_absent_days),1)]),t("p",null,[e[13]||(e[13]=t("strong",null,"Late Days:",-1)),r(" "+a((T=(B=n(l))==null?void 0:B.summary)==null?void 0:T.total_late_days),1)]),t("p",null,[e[14]||(e[14]=t("strong",null,"Total Working Hours:",-1)),r(" "+a((U=(E=n(l))==null?void 0:E.summary)==null?void 0:U.total_working_hours),1)]),t("p",null,[e[15]||(e[15]=t("strong",null,"Total Overtime Hours:",-1)),r(" "+a((N=(C=n(l))==null?void 0:C.summary)==null?void 0:N.total_overtime_hours),1)])])])]),n(l).isLoading?(u(),O(X,{key:0})):(u(),p("div",ot,[t("div",it,[t("table",dt,[e[18]||(e[18]=t("thead",null,[t("tr",{class:"bg-gray-200 text-xs"},[t("th",{class:"border p-1"},"Date"),t("th",{class:"border p-1"},"Day"),t("th",{class:"border p-1"},"Shift"),t("th",{class:"border p-1"},"Entry Time"),t("th",{class:"border p-1"},"Exit Time"),t("th",{class:"border p-1"},"Working Hours"),t("th",{class:"border p-1"},"Late Entry"),t("th",{class:"border p-1"},"Early Leave"),t("th",{class:"border p-1"},"Status")])],-1)),t("tbody",ut,[(u(!0),p(G,null,J((P=n(l))==null?void 0:P.monthlyLogs,s=>(u(),p("tr",{key:s==null?void 0:s.date},[t("td",pt,a(s.date),1),t("td",ct,a(s.weekday),1),t("td",{class:"border px-1 py-0.5",title:`${s.shift_start_time} to ${s.shift_end_time}`},a(s.shift_name),9,_t),t("td",{class:c(["border px-1 py-0.5",{"bg-red-200":s.late_duration}]),title:`Device: ${s.entry_device}`},a(s.entry_time),11,mt),t("td",{class:c(["border px-1 py-0.5",{"bg-red-200":s.early_leave_duration}]),title:`Device: ${s.exit_device}`},a(s.exit_time),11,yt),t("td",ft,a(s.working_hours),1),t("td",ht,[s.late_duration?(u(),p("div",vt,[r(a(s.late_duration)+" ",1),t("span",null,[t("i",{class:c({"fas fa-check-circle text-green-500":s.first_short_leave==="Approved","fas fa-hourglass-half text-yellow-500":s.first_short_leave==="Pending","fas fa-times-circle text-red-500":s.first_short_leave==="Rejected","fas fa-question-circle text-gray-400":!s.first_short_leave}),title:s.first_short_leave||"Unknown"},null,10,xt)])])):V("",!0)]),t("td",bt,[s.early_leave_duration?(u(),p("div",gt,[r(a(s.early_leave_duration)+" ",1),t("span",null,[t("i",{class:c({"fas fa-check-circle text-green-500":s.last_short_leave==="Approved","fas fa-hourglass-half text-yellow-500":s.last_short_leave==="Pending","fas fa-times-circle text-red-500":s.last_short_leave==="Rejected","fas fa-question-circle text-gray-400":!s.last_short_leave}),title:s.last_short_leave||"Unknown"},null,10,kt)])])):V("",!0)]),t("td",{class:c(["border px-1 py-0.5",{"text-red-600":s.status==="Absent","text-green-600":s.status==="Present"}])},a(s.status),3)]))),128))])])])]))])}}};export{Mt as default};
