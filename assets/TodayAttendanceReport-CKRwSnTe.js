import{r as p,s as _,b as D,q as A,c as n,a as e,d as c,A as y,F as x,x as h,h as l,B as C,v as L,j as B,o as r,t as a,y as b,g as T}from"./index-C4L07Zzr.js";import{L as E}from"./LoaderView-BgPJIW1d.js";import{u as R}from"./attendance-E4Tj22yF.js";import{u as V}from"./company-D4KTJrek.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const g={class:"px-4 space-y-4"},W={class:"flex gap-4"},$=["value"],H={key:1,class:"space-y-4"},M={class:"overflow-x-auto card-bg"},N={class:"min-w-full table-auto border-collapse border border-gray-300 bg-white"},P={class:"text-center text-xs"},U={class:"border px-1 py-0.5"},j={class:"border px-1 py-0.5"},F={class:"border px-1 py-0.5"},q=["title"],z=["title"],I=["title"],G={class:"border px-1 py-0.5"},J={class:"border px-1 py-0.5"},K={class:"border px-1 py-0.5"},se={__name:"TodayAttendanceReport",setup(O){const f=T(),v=V(),o=R(),d=p(""),m=p(""),i=p(""),{companies:k}=_(v),{dailyLogs:w}=_(o),u=async()=>{(d.value||i.value)&&await o.getTodayAttendanceReport(d.value,o.selectedDate,i.value)};D(async()=>{await v.fetchCompanies(),await o.getTodayAttendanceReport(d.value,o.selectedDate)}),A([d,m],u);const S=()=>f.go(-1);return(Q,s)=>(r(),n("div",g,[e("div",{class:"flex items-center justify-between gap-2"},[e("button",{class:"btn-3",onClick:S},s[3]||(s[3]=[e("i",{class:"far fa-arrow-left"},null,-1),e("span",{class:"hidden md:flex"},"Back",-1)])),s[4]||(s[4]=e("h1",{class:"title-md md:title-lg flex-wrap text-center"},"Daily Attendance Report",-1)),s[5]||(s[5]=e("div",null,null,-1))]),e("div",W,[e("div",null,[c(e("select",{id:"userSelect","onUpdate:modelValue":s[0]||(s[0]=t=>d.value=t),onChange:u,class:"input-1"},[s[6]||(s[6]=e("option",{value:"",disabled:""},"Select a Company",-1)),(r(!0),n(x,null,h(l(k),t=>(r(),n("option",{key:t==null?void 0:t.id,value:t==null?void 0:t.id},a(t==null?void 0:t.name),9,$))),128))],544),[[y,d.value]])]),e("div",null,[c(e("select",{id:"userSelect","onUpdate:modelValue":s[1]||(s[1]=t=>i.value=t),onChange:u,class:"input-1"},s[7]||(s[7]=[C('<option value="">All Status</option><option value="Present">Present</option><option value="Absent">Absent</option><option value="Weekend">Weekend</option><option value="Holiday">Holiday</option><option value="Leave">Leave</option>',6)]),544),[[y,i.value]])]),e("div",null,[c(e("input",{type:"date","onUpdate:modelValue":s[2]||(s[2]=t=>l(o).selectedDate=t),onChange:u,class:"input-1"},null,544),[[L,l(o).selectedDate]])])]),l(o).isLoading?(r(),B(E,{key:0})):(r(),n("div",H,[e("div",M,[e("table",N,[s[8]||(s[8]=e("thead",null,[e("tr",{class:"bg-gray-200 text-xs"},[e("th",{class:"border p-1"},"Emp/Worker Name"),e("th",{class:"border p-1"},"Date"),e("th",{class:"border p-1"},"Day"),e("th",{class:"border p-1"},"Shift"),e("th",{class:"border p-1"},"Entry Time"),e("th",{class:"border p-1"},"Exit Time"),e("th",{class:"border p-1"},"Working Hours"),e("th",{class:"border p-1"},"Late Entry"),e("th",{class:"border p-1"},"Early Leave"),e("th",{class:"border p-1"},"Status")])],-1)),e("tbody",P,[(r(!0),n(x,null,h(l(w),t=>(r(),n("tr",{key:t==null?void 0:t.date,class:"border-b hover:bg-gray-100"},[e("td",U,a(t.user_name),1),e("td",j,a(t.date),1),e("td",F,a(t.weekday),1),e("td",{class:"border px-1 py-0.5",title:`${t.shift_start_time} to ${t.shift_end_time}`},a(t.shift_name),9,q),e("td",{class:b(["border px-1 py-0.5",{"bg-red-200":t.late_duration}]),title:`Device: ${t.entry_device}`},a(t.entry_time),11,z),e("td",{class:b(["border px-1 py-0.5",{"bg-red-200":t.early_leave_duration}]),title:`Device: ${t.exit_device}`},a(t.exit_time),11,I),e("td",G,a(t.working_hours),1),e("td",J,a(t.late_duration),1),e("td",K,a(t.early_leave_duration),1),e("td",{class:b(["border px-1 py-0.5",{"text-red-600":t.status==="Absent","text-green-600":t.status==="Present"}])},a(t.status),3)]))),128))])])])]))]))}};export{se as default};
