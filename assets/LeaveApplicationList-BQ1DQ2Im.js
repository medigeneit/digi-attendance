import{u as D,b as R,s as B,r as g,y as S,e as M,A as _,k as N,c as a,o as l,a as e,l as h,h as y,g as p,v as T,C as j,f as q,F as E,x as F,t as c,m as H,p as C}from"./index-C06RZP8W.js";import{L as P}from"./LoaderView-BCzN24IG.js";import{_ as $}from"./MultiselectDropdown-B8tHSCNs.js";import{u as I}from"./leave-application-CtfPVGUk.js";import{u as W}from"./user-Dg9HMs58.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vue-multiselect.esm-H4W6riin.js";const z={class:"space-y-2 px-4"},G={class:"flex gap-2"},J={style:{width:"300px"}},K={key:0,class:"text-center py-4"},O={key:1,class:"space-y-4"},Q={class:"overflow-x-auto"},X={class:"min-w-full table-auto border-collapse border border-gray-200 bg-white rounded-md text-sm"},Y={class:"border border-gray-300 px-2"},Z={class:"border border-gray-300 px-2"},ee={class:"border border-gray-300 px-2"},te={class:"border border-gray-300 px-2"},se={class:"border border-gray-300 px-2"},re=["innerHTML"],oe={class:"border border-gray-300 px-2"},de={class:"border border-gray-300 px-2"},le={class:"flex justify-center gap-2"},ae=["onClick"],ne={key:0},_e={__name:"LeaveApplicationList",setup(ue){var k;const f=D(),o=R(),d=I(),m=W(),{leaveApplications:ce}=B(d),v=g(""),i=S(()=>{var r;return(r=v.value)==null?void 0:r.id}),n=g(((k=o==null?void 0:o.query)==null?void 0:k.date)||d.selectedMonth),x=g("");M(async()=>{var r;await m.fetchUsers(),v.value=m.users.find(s=>{var u;return s.id==((u=o==null?void 0:o.query)==null?void 0:u.user_id)}),x.value=((r=o==null?void 0:o.query)==null?void 0:r.search)||"",await b()});const U=()=>{f.go(-1)},b=async()=>{i.value?await d.fetchLeaveApplications({user_id:i.value,selectedDate:n.value,selectedStatus:d.selectedStatus,query:x.value}):await d.fetchLeaveApplications({selectedStatus:d.selectedStatus,selectedDate:n.value,query:x.value})},A=S(()=>d.leaveApplications);_([i],b),_(i,r=>{f.replace({query:{...o.query,user_id:r}})}),_(n,r=>{f.replace({query:{...o.query,date:r}})});const V=async r=>{confirm("Are you sure to delete this application?")&&d.deleteLeaveApplication(r)};return(r,s)=>{const u=N("RouterLink");return l(),a("div",z,[e("div",{class:"flex items-center justify-between gap-2"},[e("button",{class:"btn-3",onClick:U},s[3]||(s[3]=[e("i",{class:"far fa-arrow-left"},null,-1),e("span",{class:"hidden md:flex"},"Back",-1)])),s[4]||(s[4]=e("h1",{class:"title-md md:title-lg flex-wrap text-center"},"Leave Applications",-1)),s[5]||(s[5]=e("div",null,null,-1))]),e("div",G,[e("div",J,[h($,{modelValue:v.value,"onUpdate:modelValue":s[0]||(s[0]=t=>v.value=t),options:y(m).users,multiple:!1,label:"label",placeholder:"Select user"},null,8,["modelValue","options"])]),e("div",null,[p(e("input",{id:"monthSelect",type:"month","onUpdate:modelValue":s[1]||(s[1]=t=>n.value=t),onChange:b,class:"input-1"},null,544),[[T,n.value]])]),e("div",null,[p(e("select",{"onUpdate:modelValue":s[2]||(s[2]=t=>y(d).selectedStatus=t),onChange:b,class:"input-1"},s[6]||(s[6]=[e("option",{value:"",selected:""},"All",-1),e("option",{value:"Pending"},"Pending",-1),e("option",{value:"Approved"},"Approved",-1),e("option",{value:"Rejected"},"Rejected",-1)]),544),[[j,y(d).selectedStatus]])])]),y(d).loading?(l(),a("div",K,[h(P)])):(l(),a("div",O,[e("div",Q,[e("table",X,[s[11]||(s[11]=e("thead",null,[e("tr",{class:"bg-gray-200"},[e("th",{class:"border border-gray-300 px-2 text-left"},"#"),e("th",{class:"border border-gray-300 px-2 text-left"},"Employee Name"),e("th",{class:"border border-gray-300 px-2 text-left"},"Last Working Day"),e("th",{class:"border border-gray-300 px-2 text-left"},"Resumption Date"),e("th",{class:"border border-gray-300 px-2 text-left"},"Total Days"),e("th",{class:"border border-gray-300 px-2 text-left"},"Status"),e("th",{class:"border border-gray-300 px-2 text-left"},"Action")])],-1)),e("tbody",null,[(l(!0),a(E,null,F(A.value,(t,w)=>{var L;return l(),a("tr",{key:w,class:"border-b border-gray-200 hover:bg-blue-200"},[e("td",Y,c(w+1),1),e("td",Z,c(((L=t==null?void 0:t.user)==null?void 0:L.name)||"Unknown"),1),e("td",ee,c(t==null?void 0:t.last_working_date),1),e("td",te,c(t==null?void 0:t.resumption_date),1),e("td",se,[e("div",{innerHTML:t.duration||(t==null?void 0:t.total_leave_days)},null,8,re)]),e("td",oe,c((t==null?void 0:t.status)||"N/A"),1),e("td",de,[e("div",le,[h(u,{to:{name:"LeaveApplicationShow",params:{id:t==null?void 0:t.id}},class:"btn-icon"},{default:C(()=>s[7]||(s[7]=[e("i",{class:"far fa-eye"},null,-1)])),_:2},1032,["to"]),(t==null?void 0:t.status)!=="Approved"?(l(),H(u,{key:0,to:{name:"LeaveApplicationEdit",params:{id:t==null?void 0:t.id}},class:"btn-icon"},{default:C(()=>s[8]||(s[8]=[e("i",{class:"far fa-edit text-orange-600"},null,-1)])),_:2},1032,["to"])):q("",!0),e("button",{onClick:ve=>V(t==null?void 0:t.id),class:"btn-icon text-red-500"},s[9]||(s[9]=[e("i",{class:"far fa-trash"},null,-1)]),8,ae)])])])}),128)),A.value.length===0?(l(),a("tr",ne,s[10]||(s[10]=[e("td",{colspan:"7",class:"p-1 text-center text-red-500"},"No application found",-1)]))):q("",!0)])])])]))])}}};export{_e as default};
