import{u as G,b as J,r as _,s as k,e as K,A as x,k as O,c as v,o as u,a as t,m as Q,t as l,h as p,g as m,C as S,F as P,x as R,l as A,i as q,v as X,q as h,n as Y,p as Z}from"./index-D7bpHmyD.js";import{L as I}from"./LoaderView-D6Rpqaya.js";import{_ as U}from"./MultiselectDropdown-dJOue540.js";import{u as ee}from"./attendance-NKy0Srw0.js";import{u as te}from"./company-Z0_N4Ml6.js";import{u as se}from"./department-C0jhY9Ux.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vue-multiselect.esm-BEydf0Wu.js";const ae={class:"px-4 space-y-4"},oe={class:"flex items-center justify-between gap-2"},le={class:"title-md md:title-lg flex-wrap text-center"},ne={class:"flex flex-wrap gap-4"},ie=["value"],re={key:1,class:"space-y-4"},de={class:"overflow-x-auto card-bg"},ue={class:"min-w-full table-auto border-collapse border border-gray-300 bg-white"},pe={class:"text-center text-xs"},ce={class:"border px-1 py-0.5"},ve={class:"border px-1 py-0.5"},be={class:"border px-1 py-0.5"},fe={class:"border px-1 py-0.5"},_e=["title"],xe=["title"],me=["title"],he={class:"border px-1 py-0.5"},ye={class:"border px-1 py-0.5"},ke={class:"border px-1 py-0.5"},Se={class:"border px-1 py-0.5"},Re={__name:"TodayAttendanceReport",setup(Ae){var D;const C=G(),f=J(),y=te(),V=se(),i=ee(),r=_(""),d=_(""),a=_(""),N=_(""),c=_(((D=f==null?void 0:f.query)==null?void 0:D.search)||""),o=_("all"),{companies:W,employees:$}=k(y),{departments:F}=k(V),{dailyLogs:H}=k(i),b=async()=>{(r.value||c.value)&&await i.getTodayAttendanceReport(r.value,d==null?void 0:d.value.id,a==null?void 0:a.value.id,o==null?void 0:o.value,i.selectedDate,c.value)};K(async()=>{await y.fetchCompanies(),await i.getTodayAttendanceReport(r.value,d==null?void 0:d.value.id,a==null?void 0:a.value.id,o==null?void 0:o.value,i.selectedDate,c.value)}),x([r,N],b),x(r,n=>{y.fetchEmployee(n),V.fetchDepartments(n)}),x(d,n=>{n!=null&&n.id&&b()}),x(a,n=>{n!=null&&n.id&&b()});const M=async()=>{await i.attendanceDownloadExcel(r.value,a==null?void 0:a.value.id,o==null?void 0:o.value,i.selectedDate,c.value)},j=async()=>{await i.attendanceDownloadPdf(r.value,a==null?void 0:a.value.id,o==null?void 0:o.value,i.selectedDate,c.value)},z=()=>C.go(-1);return x(c,n=>{C.push({query:{...f.query,search:n}})}),(n,s)=>{var w,L,T,B;const g=O("router-link");return u(),v("div",ae,[t("div",oe,[t("button",{class:"btn-3",onClick:z},s[6]||(s[6]=[t("i",{class:"far fa-arrow-left"},null,-1),t("span",{class:"hidden md:flex"},"Back",-1)])),t("h1",le," Daily "+l(((L=(w=p(f))==null?void 0:w.query)==null?void 0:L.search)==="all"?"Attendance":(B=(T=p(f))==null?void 0:T.query)==null?void 0:B.search)+" Report ",1),t("div",{class:"flex gap-4"},[t("button",{type:"button",onClick:M,class:"btn-1"},s[7]||(s[7]=[t("i",{class:"far fa-file-excel text-2xl text-green-500"},null,-1)])),t("button",{type:"button",onClick:j,class:"btn-1"},s[8]||(s[8]=[t("i",{class:"fal fa-file-pdf text-2xl text-red-500"},null,-1)]))])]),t("div",ne,[t("div",null,[m(t("select",{id:"userSelect","onUpdate:modelValue":s[0]||(s[0]=e=>r.value=e),onChange:b,class:"input-1"},[s[9]||(s[9]=t("option",{value:"",disabled:""},"Select a Company",-1)),(u(!0),v(P,null,R(p(W),e=>(u(),v("option",{key:e==null?void 0:e.id,value:e==null?void 0:e.id},l(e==null?void 0:e.name),9,ie))),128))],544),[[S,r.value]])]),t("div",null,[A(U,{modelValue:d.value,"onUpdate:modelValue":s[1]||(s[1]=e=>d.value=e),options:p(F),multiple:!1,placeholder:"Select department",label:"name"},null,8,["modelValue","options"])]),t("div",null,[A(U,{modelValue:a.value,"onUpdate:modelValue":s[2]||(s[2]=e=>a.value=e),options:p($),multiple:!1,placeholder:"Select employee",label:"label"},null,8,["modelValue","options"])]),t("div",null,[m(t("select",{id:"userSelect","onUpdate:modelValue":s[3]||(s[3]=e=>o.value=e),onChange:b,class:"input-1"},s[10]||(s[10]=[q('<option value="all">All Category</option><option value="executive">Executive</option><option value="support_staff">Support Staff</option><option value="doctor">Doctor</option><option value="academy_body">Academy Body</option>',5)]),544),[[S,o.value]])]),t("div",null,[m(t("select",{id:"userSelect","onUpdate:modelValue":s[4]||(s[4]=e=>c.value=e),onChange:b,class:"input-1"},s[11]||(s[11]=[q('<option value="all">All Status</option><option value="Present">Present</option><option value="Absent">Absent</option><option value="Weekend">Weekend</option><option value="Holiday">Holiday</option><option value="Leave">Leave</option>',6)]),544),[[S,c.value]])]),t("div",null,[m(t("input",{type:"date","onUpdate:modelValue":s[5]||(s[5]=e=>p(i).selectedDate=e),onChange:b,class:"input-1"},null,544),[[X,p(i).selectedDate]])])]),p(i).isLoading?(u(),Q(I,{key:0})):(u(),v("div",re,[t("div",de,[t("table",ue,[s[13]||(s[13]=t("thead",null,[t("tr",{class:"bg-gray-200 text-xs"},[t("th",{class:"border p-1"},"#"),t("th",{class:"border p-1"},"Emp/Worker Name"),t("th",{class:"border p-1"},"Date"),t("th",{class:"border p-1"},"Day"),t("th",{class:"border p-1"},"Shift"),t("th",{class:"border p-1"},"Entry Time"),t("th",{class:"border p-1"},"Exit Time"),t("th",{class:"border p-1"},"Working Hours"),t("th",{class:"border p-1"},"Late Entry"),t("th",{class:"border p-1"},"Early Leave"),t("th",{class:"border p-1"},"Status")])],-1)),t("tbody",pe,[(u(!0),v(P,null,R(p(H),(e,E)=>(u(),v("tr",{key:e==null?void 0:e.date,class:"border-b hover:bg-blue-100"},[t("td",ce,l(E+=1),1),t("td",ve,l(e.user_name),1),t("td",be,l(e.date),1),t("td",fe,l(e.weekday),1),t("td",{class:"border px-1 py-0.5",title:`${e.shift_start_time} to ${e.shift_end_time}`},l(e.shift_name),9,_e),t("td",{class:h(["border px-1 py-0.5",{"bg-red-200":e.late_duration}]),title:`Device: ${e.entry_device}`},l(e.entry_time),11,xe),t("td",{class:h(["border px-1 py-0.5",{"bg-red-200":e.early_leave_duration}]),title:`Device: ${e.exit_device}`},l(e.exit_time),11,me),t("td",he,l(e.working_hours),1),t("td",ye,l(e.late_duration),1),t("td",ke,l(e.early_leave_duration),1),t("td",Se,[e.absent_reason?(u(),v("span",{key:0,class:h(["font-medium",{"text-green-600":e.absent_reason.includes("Approved"),"text-orange-500":e.absent_reason.includes("Pending"),"text-gray-600":!e.absent_reason.includes("Approved")&&!e.absent_reason.includes("Pending")}])},[Y(l(e.absent_reason)+" ",1),A(g,{to:{name:"LeaveApplicationShow",params:{id:e.application_id}}},{default:Z(()=>s[12]||(s[12]=[t("i",{class:"far fa-eye"},null,-1)])),_:2},1032,["to"])],2)):(u(),v("span",{key:1,class:h(["font-medium",{"text-red-600":e.status==="Absent","text-green-600":e.status==="Present","text-gray-600":e.status==="Weekend"||e.status==="Leave"}])},l(e.status),3))])]))),128))])])])]))])}}};export{Re as default};
