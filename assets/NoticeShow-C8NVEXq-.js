import{L as ke}from"./LoaderView-RJlNADRU.js";import{_ as be}from"./ShareComponent-DN8GXzzy.js";import{d as he,N as we,b as Ne,r as m,e as Ae,m as Le,c as l,o,a as s,f as De,t as d,n as _,g as v,k as u,F as de,y as ue,i as ce,j as pe}from"./index-ff60E6R1.js";import{u as Fe}from"./notice-DV6IwK5s.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const Se={class:"my-container space-y-6"},Be={class:"card-bg p-6"},Ce={key:1,class:"text-center text-red-500"},je={key:2,class:"grid gap-2"},Ee={class:"bg-gray-100 p-4 rounded-lg"},Te={class:"grid md:grid-cols-2 gap-4"},Ve={class:"text-sm text-gray-800"},$e={key:0},Me={key:0,class:"text-gray-800 text-sm"},Ie={key:1,class:"text-lg text-gray-800"},Re={key:1},He={key:0,class:"text-gray-800"},Pe={key:1,class:"text-gray-800"},Ue={key:2},qe={key:0,class:"text-gray-800"},ze={key:1},Ge={class:"text-gray-800"},Je={class:"text-gray-800"},Ke={class:"col-span-full"},Oe=["innerHTML"],Qe={key:3,class:"col-span-full"},We={class:"flex items-center gap-2"},Xe=["src"],Ye=["src"],Ze={class:"flex justify-center mt-2 gap-4"},rt={__name:"NoticeShow",setup(et){const n=he(),ye=Fe(),ve=we(),ge=Ne(),t=m(null),g=m(!0),p=m(null),f=a=>a?new Date(a).toLocaleString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}):"N/A",me=async()=>{var a,e;try{g.value=!0,p.value=null;const c=ge.params.id;t.value=await ye.fetchNotice(c)}catch(c){p.value=((e=(a=c.response)==null?void 0:a.data)==null?void 0:e.message)||"Failed to load notice details",ve.error(p.value)}finally{g.value=!1}};Ae(async()=>{await me()});const x=async a=>{window.open(a,"_blank")},_e=a=>a?/\.(jpg|jpeg|png|gif|webp)$/i.test(a):!1,fe=a=>a?/\.pdf$/i.test(a):!1,xe=a=>a==null?void 0:a.split("/").pop();return(a,e)=>{var k,b,h,w,N,A,L,D,F,S,B,C,j,E,T,V,$,M,I,R,H,P,U,q,z,G,J,K,O,Q,W,X,Y,Z,ee,te,se,oe,le,ae,re,ne,ie;const c=Le("RouterLink");return o(),l("div",Se,[s("div",Be,[e[13]||(e[13]=s("h2",{class:"title-lg text-center"},"Notice Details",-1)),g.value?(o(),De(ke,{key:0,class:"shadow-none"})):p.value?(o(),l("div",Ce,[s("p",null,d(p.value),1)])):(o(),l("div",je,[s("div",Ee,[e[9]||(e[9]=s("p",{class:"title-md"},"Notice Info",-1)),e[10]||(e[10]=s("hr",{class:"mb-2"},null,-1)),s("div",Te,[s("div",null,[e[2]||(e[2]=s("p",{class:"font-bold text-gray-600"},"Title:",-1)),s("p",Ve,d((k=t.value)==null?void 0:k.title),1)]),((h=(b=u(n))==null?void 0:b.user)==null?void 0:h.role)==="super_admin"||((N=(w=u(n))==null?void 0:w.user)==null?void 0:N.role)==="developer"||((L=(A=u(n))==null?void 0:A.user)==null?void 0:L.id)===((D=t.value)==null?void 0:D.created_id)?(o(),l("div",$e,[e[3]||(e[3]=s("p",{class:"font-bold text-gray-600"},"Company:",-1)),Array.isArray((F=t.value)==null?void 0:F.companies_notice)&&((B=(S=t.value)==null?void 0:S.companies_notice)!=null&&B.length)?(o(),l("p",Me,[(o(!0),l(de,null,ue((C=t.value)==null?void 0:C.companies_notice,(r,i)=>{var y;return o(),l("span",{key:r.id},d(r==null?void 0:r.name)+" "+d(i<((y=t.value)==null?void 0:y.companies_notice.length)-1?", ":""),1)}),128))])):(o(),l("p",Ie,"All department"))])):v("",!0),((E=(j=u(n))==null?void 0:j.user)==null?void 0:E.role)==="super_admin"||((V=(T=u(n))==null?void 0:T.user)==null?void 0:V.role)==="developer"||((M=($=u(n))==null?void 0:$.user)==null?void 0:M.id)===((I=t.value)==null?void 0:I.created_id)?(o(),l("div",Re,[e[4]||(e[4]=s("p",{class:"font-bold text-gray-600"},"Department:",-1)),Array.isArray((R=t.value)==null?void 0:R.departments)&&((P=(H=t.value)==null?void 0:H.departments)!=null&&P.length)?(o(),l("p",He,[(o(!0),l(de,null,ue((U=t.value)==null?void 0:U.departments,(r,i)=>{var y;return o(),l("span",{key:r.id},d(r==null?void 0:r.name)+" "+d(i<((y=t.value)==null?void 0:y.departments.length)-1?", ":""),1)}),128))])):(o(),l("p",Pe,"All department"))])):v("",!0),((z=(q=u(n))==null?void 0:q.user)==null?void 0:z.role)==="super_admin"||((J=(G=u(n))==null?void 0:G.user)==null?void 0:J.role)==="developer"||((O=(K=u(n))==null?void 0:K.user)==null?void 0:O.id)===((Q=t.value)==null?void 0:Q.created_id)?(o(),l("div",Ue,[e[5]||(e[5]=s("p",{class:"font-bold text-gray-600"},"Employee:",-1)),Array.isArray((W=t.value)==null?void 0:W.employees)&&!((Y=(X=t.value)==null?void 0:X.employees)!=null&&Y.length)?(o(),l("p",qe," All employees ")):(o(),l("p",ze,"Multiple employees"))])):v("",!0),s("div",null,[e[6]||(e[6]=s("p",{class:"font-bold text-gray-600"},"Published Date:",-1)),s("p",Ge,d(f((Z=t.value)==null?void 0:Z.published_at)),1)]),s("div",null,[e[7]||(e[7]=s("p",{class:"font-bold text-gray-600"},"Expired Date:",-1)),s("p",Je,d(f((ee=t.value)==null?void 0:ee.expired_at)),1)]),s("div",Ke,[e[8]||(e[8]=s("p",{class:"font-bold text-gray-600"},"Description / Body:",-1)),s("p",{class:"text-gray-800",innerHTML:(te=t.value)==null?void 0:te.description},null,8,Oe)]),(se=t.value)!=null&&se.file?(o(),l("div",Qe,[s("div",We,[_e((oe=t.value)==null?void 0:oe.file)?(o(),l("img",{key:0,src:(le=t.value)==null?void 0:le.file,alt:"Notice File",class:"object-cover rounded-md cursor-pointer",style:{width:"80%"},onClick:e[0]||(e[0]=r=>{var i;return x((i=t.value)==null?void 0:i.file)})},null,8,Xe)):fe((ae=t.value)==null?void 0:ae.file)?(o(),l("iframe",{key:1,src:(re=t.value)==null?void 0:re.file,class:"w-full md:h-[700px] border rounded-md"},null,8,Ye)):(o(),l("span",{key:2,class:"text-blue-500 cursor-pointer",onClick:e[1]||(e[1]=r=>{var i;return x((i=t.value)==null?void 0:i.file)})}," File: "+d(xe((ne=t.value)==null?void 0:ne.file)),1))])])):v("",!0)])]),_(be),s("div",Ze,[_(c,{to:{name:"NoticeList"},type:"button",class:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600"},{default:ce(()=>e[11]||(e[11]=[pe(" Back to List ")])),_:1,__:[11]}),_(c,{to:{name:"NoticeEdit",params:{id:(ie=t.value)==null?void 0:ie.id}},class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600"},{default:ce(()=>e[12]||(e[12]=[pe(" Edit ")])),_:1,__:[12]},8,["to"])])]))])])}}};export{rt as default};
