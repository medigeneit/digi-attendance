import{C as D,r as d,x as i,D as o}from"./index-tqWOmoax.js";const j=D("manualAttendance",()=>{const s=d([]),m=d(null),l=d(!1),n=d(null),p=d(new Date().toISOString().substring(0,7)),f=d(""),h=async(e={})=>{var r,t;l.value=!0,n.value=null;try{const a=await o.get("/manual-attendances",{params:e});s.value=a==null?void 0:a.data}catch(a){n.value=((t=(r=a.response)==null?void 0:r.data)==null?void 0:t.message)||"Failed to fetch manual attendances",console.error("Error fetching manual attendances:",a)}finally{l.value=!1}},y=async(e={})=>{var r,t;l.value=!0,n.value=null;try{const a=await o.get("/user-manual-attendances",{params:e});s.value=a.data.data}catch(a){n.value=((t=(r=a.response)==null?void 0:r.data)==null?void 0:t.message)||"Failed to fetch manual attendances",console.error("Error fetching manual attendances:",a)}finally{l.value=!1}},w=async e=>{var r,t;l.value=!0,n.value=null;try{const a=await o.get(`/manual-attendances/${e}`);m.value=a.data}catch(a){n.value=((t=(r=a.response)==null?void 0:r.data)==null?void 0:t.message)||`Failed to fetch manual attendance (ID: ${e})`,console.error(`Error fetching manual attendance with id ${e}:`,a)}finally{l.value=!1}},g=async e=>{var r,t;l.value=!0,n.value=null;try{const a=await o.post("/manual-attendances",e);return s.value.push(a.data.data),a.data.data}catch(a){throw n.value=((t=(r=a.response)==null?void 0:r.data)==null?void 0:t.message)||"Failed to create manual attendance",console.error("Error creating manual attendance:",a),new Error(n.value)}finally{l.value=!1}},$=async(e,r)=>{var t,a;l.value=!0,n.value=null;try{const c=await o.put(`/manual-attendances/${e}`,r),u=s.value.findIndex(v=>v.id===e);return u!==-1&&(s.value[u]=c.data.data),c.data.data}catch(c){throw n.value=((a=(t=c.response)==null?void 0:t.data)==null?void 0:a.message)||`Failed to update manual attendance (ID: ${e})`,console.error(`Error updating manual attendance with id ${e}:`,c),new Error(n.value)}finally{l.value=!1}},E=async e=>{var r,t;l.value=!0,n.value=null;try{await o.delete(`/manual-attendances/${e}`),s.value=s.value.filter(a=>a.id!==e)}catch(a){throw n.value=((t=(r=a.response)==null?void 0:r.data)==null?void 0:t.message)||`Failed to delete manual attendance (ID: ${e})`,console.error(`Error deleting manual attendance with id ${e}:`,a),new Error(n.value)}finally{l.value=!1}},A=async e=>{var r,t;l.value=!0,n.value=null;try{const a=await o.post(`/manual-attendances/${e}/in-charge-accept`),c=s.value.findIndex(u=>u.id===e);return c!==-1&&(s.value[c]=a.data.data),a.data.data}catch(a){throw n.value=((t=(r=a.response)==null?void 0:r.data)==null?void 0:t.message)||`Failed to accept in-charge for manual attendance (ID: ${e})`,console.error(`Error accepting in-charge for manual attendance with id ${e}:`,a),new Error(n.value)}finally{l.value=!1}},I=async e=>{var r,t;l.value=!0,n.value=null;try{const a=await o.post(`/manual-attendances/${e}/recommend-by-accept`),c=s.value.findIndex(u=>u.id===e);return c!==-1&&(s.value[c]=a.data.data),a.data.data}catch(a){throw n.value=((t=(r=a.response)==null?void 0:r.data)==null?void 0:t.message)||`Failed to accept recommendation for manual attendance (ID: ${e})`,console.error(`Error accepting recommendation for manual attendance with id ${e}:`,a),new Error(n.value)}finally{l.value=!1}},x=async e=>{var r,t;l.value=!0,n.value=null;try{const a=await o.post(`/manual-attendances/${e}/approved-by-accept`),c=s.value.findIndex(u=>u.id===e);return c!==-1&&(s.value[c]=a.data.data),a.data.data}catch(a){throw n.value=((t=(r=a.response)==null?void 0:r.data)==null?void 0:t.message)||`Failed to approve manual attendance (ID: ${e})`,console.error(`Error approving manual attendance with id ${e}:`,a),new Error(n.value)}finally{l.value=!1}},F=async(e,r)=>{var t,a;l.value=!0,n.value=null;try{const c=await o.post(`/manual-attendances/${e}/reject`,{rejection_reason:r}),u=s.value.findIndex(v=>v.id===e);return u!==-1&&(s.value[u]=c.data.data),c.data.data}catch(c){throw n.value=((a=(t=c.response)==null?void 0:t.data)==null?void 0:a.message)||`Failed to reject manual attendance (ID: ${e})`,console.error(`Error rejecting manual attendance with id ${e}:`,c),new Error(n.value)}finally{l.value=!1}};return{manualAttendances:i(()=>s.value),manualAttendance:i(()=>m.value),loading:i(()=>l.value),error:i(()=>n.value),selectedMonth:p,selectedStatus:f,fetchManualAttendances:h,fetchManualAttendanceById:w,createManualAttendance:g,updateManualAttendance:$,deleteManualAttendance:E,inChargeAccept:A,recommendByAccept:I,approvedByAccept:x,rejectManualAttendance:F,fetchUserManualAttendances:y}});export{j as u};
