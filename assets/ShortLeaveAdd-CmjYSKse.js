import{u as S,r as v,b as L,c as a,a as t,k as b,l as V,w as g,d as o,v as n,z as U,F as q,q as _,h as B,t as k,e as M,m as C,o as r,j as E,g as F}from"./index-4IjiUvet.js";import{u as H}from"./short-leave-CGmj7v6F.js";import{u as N}from"./user-CNVlVJd8.js";import{L as R}from"./LoaderView-B-JsmDqY.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const T={class:"max-w-3xl mx-auto p-4 space-y-4"},h={class:"flex items-center justify-between gap-2"},j={key:0,class:"text-center"},A=["value"],D={key:0,class:"text-red-500 text-sm"},K={__name:"ShortLeaveAdd",setup(z){const p=F(),x=H(),f=N(),u=S(),l=v({date:"",start_time:"",end_time:"",reason:"",works_in_hand:"",handover_user_id:""}),d=v(!1),i=v(null),w=async()=>{var m;d.value=!0,i.value=null;try{const e={user_id:(m=u==null?void 0:u.user)==null?void 0:m.id,...l.value};await x.createShortLeave(e),alert("Short leave application submitted successfully!"),p.push({name:"MyShortLeaves"})}catch(e){i.value=e.message||"Failed to submit short leave application"}finally{d.value=!1}};L(()=>{f.fetchUsers()});const y=()=>{p.go(-1)};return(m,e)=>{const c=C("RouterLink");return r(),a("div",T,[t("div",h,[t("button",{class:"btn-3",onClick:y},e[6]||(e[6]=[t("i",{class:"far fa-arrow-left"},null,-1),t("span",{class:"hidden md:flex"},"Back",-1)])),e[8]||(e[8]=t("h1",{class:"title-md md:title-lg flex-wrap text-center"},"Short Leave Application Form",-1)),t("div",null,[b(c,{to:"/",class:"btn-2"},{default:V(()=>e[7]||(e[7]=[E("Home")])),_:1})])]),d.value?(r(),a("div",j,[b(R)])):(r(),a("form",{key:1,onSubmit:g(w,["prevent"]),class:"space-y-4 card-bg md:p-8 p-4"},[t("div",null,[e[9]||(e[9]=t("label",{for:"date",class:"block text-sm font-medium"},"Date",-1)),o(t("input",{type:"date",id:"date","onUpdate:modelValue":e[0]||(e[0]=s=>l.value.date=s),class:"input-1 w-full",required:""},null,512),[[n,l.value.date]])]),t("div",null,[e[10]||(e[10]=t("label",{for:"start-time",class:"block text-sm font-medium"},"Start Time",-1)),o(t("input",{type:"time",id:"start-time","onUpdate:modelValue":e[1]||(e[1]=s=>l.value.start_time=s),class:"input-1 w-full",required:""},null,512),[[n,l.value.start_time]])]),t("div",null,[e[11]||(e[11]=t("label",{for:"end-time",class:"block text-sm font-medium"},"End Time",-1)),o(t("input",{type:"time",id:"end-time","onUpdate:modelValue":e[2]||(e[2]=s=>l.value.end_time=s),class:"input-1 w-full",required:""},null,512),[[n,l.value.end_time]])]),t("div",null,[e[12]||(e[12]=t("label",{for:"reason",class:"block text-sm font-medium"},"Reason",-1)),o(t("textarea",{id:"reason","onUpdate:modelValue":e[3]||(e[3]=s=>l.value.reason=s),class:"input-1 w-full",placeholder:"Enter your reason for leave",required:""},null,512),[[n,l.value.reason]])]),t("div",null,[e[13]||(e[13]=t("label",{for:"works-in-hand",class:"block text-sm font-medium"},"Works in Hand (Optional)",-1)),o(t("textarea",{id:"works-in-hand","onUpdate:modelValue":e[4]||(e[4]=s=>l.value.works_in_hand=s),class:"input-1 w-full",placeholder:"Enter details of works in hand"},null,512),[[n,l.value.works_in_hand]])]),t("div",null,[e[15]||(e[15]=t("label",{for:"handover-user",class:"block text-sm font-medium"},"Handover User",-1)),o(t("select",{id:"handover-user","onUpdate:modelValue":e[5]||(e[5]=s=>l.value.handover_user_id=s),class:"input-1 w-full",required:""},[e[14]||(e[14]=t("option",{value:""},"Select Handover User",-1)),(r(!0),a(q,null,_(B(f).users,s=>(r(),a("option",{key:s.id,value:s.id},k(s.name),9,A))),128))],512),[[U,l.value.handover_user_id]])]),i.value?(r(),a("div",D,k(i.value),1)):M("",!0),e[16]||(e[16]=t("div",{class:"flex justify-center"},[t("button",{type:"submit",class:"btn-2"},"Submit")],-1))],32))])}}};export{K as default};
