import{_ as c}from"./ApprovalItem-CaFlTj_z.js";import{L as Z}from"./LoaderView-Ce2jqIF0.js";import{_ as tt}from"./ScreenshotCapture-YuQPiJfu.js";import{_ as et}from"./ShareComponent-DXO3x0FI.js";import{N as at,u as nt,j as lt,r as M,y as st,b as it,c as m,a as t,l as n,k as ot,t as l,m as o,q as dt,e as O,n as rt,f as ut,o as p,g as ct}from"./index-BFO7VWut.js";import{u as pt}from"./exchange-BrZEfITQ.js";import"./AcceptAndRejectHandler-C3_StVT2.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const mt={class:"my-container max-w-3xl space-y-6"},vt={key:1,class:"bg-white rounded p-4 md:p-8 text-sm md:text-base space-y-1",id:"leave-application"},ft={class:"flex md:justify-end"},gt={class:"font-medium"},ht={class:"gap-y-1"},xt={class:"gap-y-1"},yt={class:"grid md:grid-cols-2 pt-2"},_t={class:"col-span-2 pt-2"},bt={class:"grid md:grid-cols-3 gap-x-4 py-1 md:justify-between items-end md:items-start"},wt={class:"md:col-span-2 print:col-span-2"},kt={class:"text-center"},At={class:"title-md"},Dt={key:0},Nt={class:"grid grid-cols-2 text-sm md:text-base md:grid-cols-3 md:gap-x-4 gap-y-14 pt-14 items-end"},St={class:"print:hidden"},jt={key:0,class:"mb-2"},Ft=["href"],It={__name:"ExchangeShiftShow",setup(Et){at();const W=ct(),v=ut(),d=pt();nt();const f=lt(),g=M(!0),h=M(null),a=st(()=>d.exchange);it(async()=>{const{id:s}=v.params;try{await d.fetchExchange(s)}catch(e){console.error("Failed to fetch exchange details:",e)}finally{g.value=!1}});const G=async s=>{const e=s.target.files[0];if(e){const u=new FormData;u.append("file",e);const i=await d.fetchFileUpload(u);h.value=i==null?void 0:i.url,i!=null&&i.url?(J(),f.success("File uploaded successfully")):f.error("Failed to upload file")}},J=async()=>{try{const s={attachment:h.value};await d.uploadAttachmentExchange(v.params.id,s)}catch(s){console.error("Failed to reject short leave:",s),alert("Failed to reject short leave.")}};function K(){window.print()}const Q=()=>W.go(-1),X=s=>new Date(s).toISOString().slice(0,10),Y=s=>new Date(s).toLocaleDateString("en-US",{weekday:"long"}),r=async()=>{await d.fetchExchange(v.params.id)};return(s,e)=>{var u,i,x,y,_,b,w,k,A,D,N,S,j,F,E,R,B,C,V,L,T,U,$,I,P,q,z,H;return p(),m("div",mt,[t("div",{class:"flex items-center justify-between gap-2 print:hidden"},[t("button",{class:"btn-3",onClick:Q},e[0]||(e[0]=[t("i",{class:"far fa-arrow-left"},null,-1),t("span",{class:"hidden md:flex"},"Back",-1)])),e[2]||(e[2]=t("h1",{class:"title-lg text-center"},"Exchange Details",-1)),t("div",null,[t("button",{class:"btn-2",onClick:K},e[1]||(e[1]=[t("i",{class:"far fa-print"},null,-1),n(" Print ")]))])]),g.value?(p(),ot(Z,{key:0})):(p(),m("div",vt,[e[15]||(e[15]=t("div",null,[t("h1",{class:"title-lg text-center"},"Shift Exchange Application")],-1)),t("div",ft,[t("div",null,"Date: "+l(X((u=a.value)==null?void 0:u.created_at)),1)]),t("div",null,[t("p",gt,[e[3]||(e[3]=n(" Name: ")),t("b",null,l((x=(i=a.value)==null?void 0:i.user)==null?void 0:x.name),1)]),t("div",ht,[t("p",null,[e[4]||(e[4]=n(" Designation: ")),t("b",null,l((b=(_=(y=a.value)==null?void 0:y.user)==null?void 0:_.designation)==null?void 0:b.title),1)])]),t("div",xt,[t("p",null,[e[5]||(e[5]=n(" Department: ")),t("b",null,l((A=(k=(w=a.value)==null?void 0:w.user)==null?void 0:k.company)==null?void 0:A.name),1)])])]),t("div",yt,[t("div",null,[e[6]||(e[6]=t("b",null,"Exchange Day:",-1)),n(" "+l(Y((D=a.value)==null?void 0:D.exchange_date)),1)]),t("div",null,[e[7]||(e[7]=t("b",null,"Date:",-1)),n(" "+l((N=a.value)==null?void 0:N.exchange_date),1)]),t("div",null,[e[8]||(e[8]=t("b",null,"From:",-1)),n(" "+l((j=(S=a.value)==null?void 0:S.current_shift)==null?void 0:j.name),1)]),t("div",null,[e[9]||(e[9]=t("b",null,"To:",-1)),n(" "+l((E=(F=a.value)==null?void 0:F.shift)==null?void 0:E.name),1)]),t("div",_t,[e[10]||(e[10]=t("b",null,"Reason:",-1)),n(" "+l(((R=a.value)==null?void 0:R.reason)||"N/A"),1)])]),t("div",bt,[t("div",wt,[t("div",null,[e[11]||(e[11]=t("b",null,"Works in Hand:",-1)),n(" "+l(((B=a.value)==null?void 0:B.works_in_hand)||"N/A"),1)])]),o(c,{application:a.value,type:"shift_exchange_applications",item:"handover",onAction:r,class:"pt-10 ml-auto hidden md:block"},null,8,["application"])]),e[16]||(e[16]=t("hr",{class:"my-2"},null,-1)),t("div",kt,[t("h3",At,[e[12]||(e[12]=n(" Approvals ")),t("span",{class:dt({"text-yellow-500":((C=a.value)==null?void 0:C.status)==="Pending","text-green-500":((V=a.value)==null?void 0:V.status)==="Approved","text-red-500":((L=a.value)==null?void 0:L.status)==="Rejected"})}," ("+l(((T=a.value)==null?void 0:T.status)||"N/A")+") ",3)]),((U=a.value)==null?void 0:U.status)==="Rejected"?(p(),m("div",Dt,[t("div",null,[e[13]||(e[13]=t("b",null,"Rejected By:",-1)),n(" "+l(((I=($=a.value)==null?void 0:$.rejected_by_user)==null?void 0:I.name)||"N/A"),1)]),t("div",null,[e[14]||(e[14]=t("b",null,"Rejection Reason:",-1)),n(" "+l(((P=a.value)==null?void 0:P.rejection_reason)||"N/A"),1)])])):O("",!0)]),t("div",Nt,[o(c,{application:a.value,type:"shift_exchange_applications",item:"handover",onAction:r,class:"md:hidden"},null,8,["application"]),o(c,{application:a.value,type:"shift_exchange_applications",item:"in_charge",onAction:r},null,8,["application"]),o(c,{application:a.value,type:"shift_exchange_applications",item:"recommend_by",onAction:r},null,8,["application"]),o(c,{application:a.value,type:"shift_exchange_applications",item:"approved_by",onAction:r},null,8,["application"])])])),t("div",St,[t("div",null,[e[17]||(e[17]=t("label",null,"Attachment",-1)),(q=a.value)!=null&&q.attachment&&typeof((z=a.value)==null?void 0:z.attachment)=="string"?(p(),m("div",jt,[t("a",{href:(H=a.value)==null?void 0:H.attachment,target:"_blank",class:"text-blue-500 underline"}," View Current File ",8,Ft)])):O("",!0),t("input",{type:"file",onChange:G,class:"w-full p-2 border rounded"},null,32),e[18]||(e[18]=t("p",{class:"text-sm text-gray-600 mt-1"},"Selected File",-1))])]),o(et,null,{default:rt(()=>[o(tt,{targetId:"leave-application",platform:"whatsapp"})]),_:1})])}}};export{It as default};
