import{m as N,c as f,o as u,g as c,x as J,d as X,n as dt,p as E,a as o,t as h,f as R,j as C,i as I,w as $,k as w,F as Z,L as H,r as T,e as P,J as z,A as tt,K as st,h as G,v as _}from"./index-DLQLieTe.js";import{_ as nt}from"./DepartmentChip-BjmDxwX_.js";import{_ as et}from"./UserChip-mNF804rO.js";import{O as F}from"./OverlyModal-I1DlqLHO.js";import{g as B,b as it}from"./datetime-DcVwRp76.js";import{u as Y,a as ot,f as ut,d as rt,b as mt}from"./useTodoStore-BmU6DPQ_.js";import{L as K}from"./LoaderView-B2LxTwBM.js";import{u as yt}from"./useTaskStore-BSFLp5cG.js";import{_ as ct}from"./TaskSelectionInput-D5LVbwar.js";const ft={key:0,class:"fa fa-exclamation-square",title:"Pending"},pt={key:1,class:"fa fa-pause",title:"Working"},vt={key:2,class:"fa fa-check-square",title:"Completed"},lt={__name:"TodoStatusIcon",props:{todoDate:{type:Object,required:!0}},setup(e){const D=e,n=N(()=>{switch(D.todoDate.status){case"PENDING":return"text-red-400";case"WORKING":return"text-yellow-600";case"COMPLETED":return"text-green-400"}return""});return(d,b)=>(u(),f("span",{class:J(n.value)},[e.todoDate.status=="PENDING"?(u(),f("i",ft)):c("",!0),e.todoDate.status=="WORKING"?(u(),f("i",pt)):c("",!0),e.todoDate.status=="COMPLETED"?(u(),f("i",vt)):c("",!0)],2))}},bt={class:""},gt={key:0,class:"mt-1 flex items-center gap-2"},kt={key:0,class:"line-clamp-2 text-gray-500 whitespace-nowrap mr-2"},xt={class:"md:ml-auto w-full md:w-auto flex items-center justify-center gap-2"},wt={key:0,class:"flex items-center gap-1 text-red-600"},re={__name:"TodoItemCard",props:{todoDate:{type:Object,required:!0},hideDepartment:{type:Boolean,default:!1},hideUser:{type:Boolean,default:!1},hideSortingBtn:{type:Boolean,default:!1},userRole:{type:String,default:"employee"}},emits:["clickTodo","clickEdit","clickDelete","clickChangeStatus","clickDelete"],setup(e,{emit:D}){const n=X(),d=D;return(b,s)=>{var p,l,v,m,a,t,g;const i=dt("RouterLink");return u(),f("div",{class:J(["px-4 py-4 md:py-2 cursor-pointer flex flex-wrap items-center gap-y-2 gap-x-4 text-sm",{"bg-green-100":e.todoDate.status=="COMPLETED","hover:bg-gray-50":e.todoDate.status!="COMPLETED"}]),onClick:s[4]||(s[4]=$(k=>d("clickTodo",e.todoDate),["prevent"]))},[E(lt,{todoDate:e.todoDate},null,8,["todoDate"]),o("div",bt,[o("div",{class:J(["line-clamp-1",{"text-green-800":e.todoDate.status=="COMPLETED","text-blue-800":e.todoDate.status!="COMPLETED"}])},h(e.todoDate.id)+" - "+h(e.todoDate.title),3),e.todoDate.user?(u(),f("div",gt,[e.hideUser?c("",!0):(u(),R(et,{key:0,user:e.todoDate.user,"avatar-size":"xsmall"},null,8,["user"])),e.hideDepartment?c("",!0):(u(),R(nt,{key:1,department:(l=(p=e.todoDate)==null?void 0:p.user)==null?void 0:l.department},null,8,["department"]))])):c("",!0)]),(v=e.todoDate.todo)!=null&&v.todo_type&&((m=e.todoDate.todo)!=null&&m.todo_type_id)?(u(),f("div",kt,[C(h((a=e.todoDate.todo)==null?void 0:a.todo_type)+" ",1),E(i,{class:"text-blue-600 font-semibold underline hover:text-sky-400",onClick:$(k=>null,["stop"]),to:{name:"RequirementTaskShow",params:{id:(t=e.todoDate.todo)==null?void 0:t.todo_type_id}}},{default:I(()=>{var k;return[s[5]||(s[5]=o("i",{class:"fas fa-link"},null,-1)),C(" "+h((k=e.todoDate.todo)==null?void 0:k.todo_type_id),1)]}),_:1,__:[5]},8,["to"])])):c("",!0),o("div",xt,[e.todoDate.status=="WORKING"?(u(),f("div",wt,s[6]||(s[6]=[o("span",{class:"fas fa-circle animate-pulse text-xs"},null,-1),o("span",{class:"text-xs"},"Working",-1)]))):c("",!0),e.todoDate.user_id===((g=w(n).user)==null?void 0:g.id)?(u(),f(Z,{key:1},[e.todoDate.status==="WORKING"?(u(),f("button",{key:0,title:"Mark as Completed",class:"btn-icon bg-transparent text-green-400 border-green-400 border hover:bg-green-400 hover:text-white",onClick:s[0]||(s[0]=$(()=>d("clickChangeStatus",e.todoDate,"COMPLETED"),["prevent","stop"]))},s[7]||(s[7]=[o("i",{class:"fas fa-check"},null,-1)]))):c("",!0),e.todoDate.status==="PENDING"?(u(),f("button",{key:1,title:"Start Working",class:"btn-icon bg-transparent text-red-400 border-red-400 border hover:bg-red-400 hover:text-white",onClick:s[1]||(s[1]=$(()=>d("clickChangeStatus",e.todoDate,"WORKING"),["prevent","stop"]))},s[8]||(s[8]=[o("i",{class:"fas fa-play ml-[4px]"},null,-1)]))):c("",!0),o("button",{class:"btn-icon bg-sky-400 text-white hover:bg-sky-600 hover:text-white",onClick:s[2]||(s[2]=$(k=>{var O;return d("clickEdit",(O=e.todoDate)==null?void 0:O.todo)},["prevent","stop"]))},s[9]||(s[9]=[o("i",{class:"fas fa-pen"},null,-1)])),o("button",{class:"btn-icon bg-red-400 text-white hover:bg-red-600 hover:text-white",onClick:s[3]||(s[3]=$(()=>d("clickDelete",e.todoDate),["prevent","stop"]))},s[10]||(s[10]=[o("i",{class:"fas fa-trash-alt"},null,-1)]))],64)):c("",!0),e.hideSortingBtn?c("",!0):(u(),f("button",{key:2,onClick:$(()=>null,["stop","prevent"]),class:"btn-icon bg-gray-400 text-white hover:bg-gray-600 hover:text-white handle"},s[11]||(s[11]=[o("i",{class:"fas fa-arrows-alt-v"},null,-1)])))])],2)}}},Tt={class:"bg-white border-t px-4 py-4 sticky bottom-0 rounded-b-md"},Dt={key:0,class:"mb-4 text-red-500 font-medium"},Ct={key:0,class:"mb-4 text-blue-500 font-medium"},St={class:"flex justify-between items-center gap-4"},ht=["disabled"],Q={__name:"FormHandler",props:{isSubmitting:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},error:{type:String,default:""}},emits:["submit","clickCancel"],setup(e,{emit:D}){const n=D;return(d,b)=>(u(),f("form",{onSubmit:b[1]||(b[1]=$(s=>n("submit"),["prevent"]))},[H(d.$slots,"default"),o("div",Tt,[H(d.$slots,"error",{},()=>[e.error?(u(),f("div",Dt,h(e.error),1)):c("",!0)]),e.isSubmitting?(u(),f("div",Ct,"Saving changes...")):c("",!0),H(d.$slots,"footer",{},()=>[o("div",St,[o("button",{type:"button",onClick:b[0]||(b[0]=s=>n("clickCancel")),class:"btn-3"},"Cancel"),o("button",{disabled:e.isSubmitting||e.isLoading,type:"submit",class:"btn-2"},h(e.isSubmitting?"Saving...":"Save"),9,ht)])])])],32))}},at={__name:"TodoTypeInput",props:{todoType:{type:String,default:"task"},todoTypeId:{type:[String,Number],default:null},show:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1}},emits:["update:todoType","update:todoTypeId","update:show"],setup(e,{emit:D}){const n=e,d=D,b=N({get:()=>n.todoTypeId,set:m=>d("update:todoTypeId",m)}),s=N({get:()=>n.show,set:m=>d("update:show",m)}),i=T(null),p=T({});function l(){if(!(i!=null&&i.value))return;const m=i.value.getBoundingClientRect(),a=window.innerHeight,t=300,k=a-m.bottom<t;p.value={position:"fixed",top:k?m.top-t+"px":m.bottom+"px",left:m.left+"px",width:m.width+"px",zIndex:5e3}}P(async()=>{await z(),window.addEventListener("resize",l),document.addEventListener("scroll",l)});const v=yt();return tt(()=>s.value,async m=>{m&&await v.fetchAllMyTasks()}),st(()=>{window.removeEventListener("resize",l),document.removeEventListener("scroll",l)}),(m,a)=>(u(),f("div",null,[E(ct,{show:s.value,"onUpdate:show":a[0]||(a[0]=t=>s.value=t),taskId:b.value,"onUpdate:taskId":a[1]||(a[1]=t=>b.value=t)},null,8,["show","taskId"])]))}},$t={class:"p-4 min-h-[10vh] max-h-[50vh] overflow-y-auto"},Et={class:"mb-4"},It={class:"mb-4"},Rt=["readonly"],Mt={class:"mb-4"},Ot={__name:"TodoAddForm",props:{date:{type:String,default:B(new Date)},userRole:{type:String,default:"employee"},todoType:{type:String,default:"task"},todoTypeId:{type:String,default:null},readonlyValues:{type:Object,default:()=>({date:!1,todo_type_id:!1})}},emits:["update","cancelClick"],setup(e,{emit:D}){const n=e,d=T(),b=T(!1),s=T(),i=Y(),p=D,l=T({title:"",date:n.date||"",todo_type:"task",todo_type_id:""});async function v(){var m;try{d.value="submitting",(m=l.value)!=null&&m.todo_type_id||(l.value={title:l.value.title,date:l.value.date}),await i.createTodo(l.value,{returnWith:n.userRole!=="employee"?"user,department,company":""}),p("update")}finally{d.value=""}}return tt(()=>({date:n.date,todo_type:n.todoType,todo_type_id:n.todoTypeId}),m=>{l.value=m},{immediate:!0}),P(async()=>{var m;await z(),(m=s.value)==null||m.focus()}),(m,a)=>(u(),f("div",{onClick:a[6]||(a[6]=t=>b.value=!1)},[o("pre",null,h(l.value),1),w(i).loading?(u(),R(K,{key:0,class:"absolute inset-0 bg-opacity-80 text-center py-4 text-gray-500 z-10 flex items-center justify-center"},{default:I(()=>a[7]||(a[7]=[C(" Loading... ")])),_:1,__:[7]})):c("",!0),E(Q,{onSubmit:v,onClickCancel:a[5]||(a[5]=t=>p("cancelClick")),isSubmitting:d.value=="submitting",error:w(i).error,class:"rounded-md relative"},{default:I(()=>{var t,g;return[a[11]||(a[11]=o("div",{class:"border-b py-2 px-4"},[o("h2",{class:"text-xl font-semibold"},"Add Todo")],-1)),o("div",$t,[o("div",Et,[a[8]||(a[8]=o("label",{class:"block text-gray-700 font-medium mb-1 text-sm"},"Title",-1)),G(o("input",{ref_key:"titleRef",ref:s,"onUpdate:modelValue":a[0]||(a[0]=k=>l.value.title=k),required:"",placeholder:"Enter todo title",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[_,l.value.title]])]),o("div",It,[a[9]||(a[9]=o("label",{class:"block text-gray-700 font-medium mb-1 text-sm"},"Date",-1)),G(o("input",{readonly:(t=e.readonlyValues)==null?void 0:t.date,"onUpdate:modelValue":a[1]||(a[1]=k=>l.value.date=k),type:"date",required:"",placeholder:"Enter todo title",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,8,Rt),[[_,l.value.date]])]),o("div",Mt,[a[10]||(a[10]=o("label",{class:"block text-gray-700 font-medium mb-1 text-sm"},"Task ID (optional)",-1)),E(at,{show:b.value,"onUpdate:show":a[2]||(a[2]=k=>b.value=k),todoType:l.value.todo_type,"onUpdate:todoType":a[3]||(a[3]=k=>l.value.todo_type=k),todoTypeId:l.value.todo_type_id,"onUpdate:todoTypeId":a[4]||(a[4]=k=>l.value.todo_type_id=k),readonly:(g=e.readonlyValues)==null?void 0:g.todo_type_id},null,8,["show","todoType","todoTypeId","readonly"])])])]}),_:1,__:[11]},8,["isSubmitting","error"])]))}},Lt={class:"p-4 min-h-[10vh] max-h-[50vh] overflow-y-auto"},Ut={class:"mb-4 text-md"},Nt={class:"font-semibold"},Vt={class:"mb-2"},Bt={__name:"TodoDateAddForm",props:{date:{type:[String,Number],default:B(new Date)},todoId:{type:[String,Number],required:!0},userRole:{type:String,default:"employee"}},emits:["update","cancelClick"],setup(e,{emit:D}){const n=e,d=T(),b=T(!1),s=T(),i=Y(),p=ot(),l=D,v=T({date:n.date||"",todo_id:n.todoId});async function m(){try{d.value="submitting",await p.createTodoDate(v.value),l("update")}finally{d.value=""}}return P(async()=>{var a;await z(),await i.fetchTodo(n.todoId),(a=s.value)==null||a.focus()}),(a,t)=>(u(),f("div",{onClick:t[2]||(t[2]=g=>b.value=!1)},[w(i).loading?(u(),R(K,{key:0,class:"absolute inset-0 bg-opacity-80 text-center py-4 text-gray-500 z-10 flex items-center justify-center"},{default:I(()=>t[3]||(t[3]=[C(" Loading... ")])),_:1,__:[3]})):c("",!0),E(Q,{onSubmit:m,onClickCancel:t[1]||(t[1]=g=>l("cancelClick")),isSubmitting:d.value=="submitting",error:w(p).error,class:"rounded-md relative"},{default:I(()=>{var g;return[t[6]||(t[6]=o("div",{class:"border-b py-2 px-4"},[o("h2",{class:"text-xl font-semibold"},"Carry Todo To Date")],-1)),o("div",Lt,[o("div",Ut,[t[4]||(t[4]=C(" TODO: ")),o("span",Nt,h((g=w(i).todo)==null?void 0:g.title),1)]),o("div",Vt,[t[5]||(t[5]=o("span",{class:"font-semibold"}," Date ",-1)),G(o("input",{"onUpdate:modelValue":t[0]||(t[0]=k=>v.value.date=k),type:"date",multiple:"",required:"",placeholder:"Enter todo title",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[_,v.value.date]])])])]}),_:1,__:[6]},8,["isSubmitting","error"])]))}},Pt={key:0,class:"mb-4 text-red-500 font-medium"},jt={key:1,class:"mb-4 text-red-500 font-medium"},At={class:"p-4 min-h-[10vh] max-h-[50vh] overflow-y-auto"},qt={class:"mb-4"},Wt={class:"mb-4"},Ft={__name:"TodoEditForm",props:{date:{type:String,default:B(new Date)},todo:{type:Object,default:()=>({})}},emits:["update","cancelClick"],setup(e,{emit:D}){var M;const n=e,d=T(),b=T(!1),s=T(),i=Y(),p=D,l=T({title:"",todo_type:"task",todo_type_id:""}),v=T({id:null,repeat_type:"daily",start_date:((M=n.todo)==null?void 0:M.date)||n.date||B(new Date),end_date:null,weekly_day:null,monthly_mode:null,monthly_value:null,monthly_week:null,yearly_month:null,yearly_day:null}),m=T(!1),a=T({});async function t(){var x,r,y;await i.fetchTodo((x=n.todo)==null?void 0:x.id),l.value.title=(r=i.todo)==null?void 0:r.title,l.value.todo_type_id=(y=i.todo)==null?void 0:y.todoable_id}const g=T(null);async function k(){var x,r;try{const{data:y}=await ut(n.todo.id),S=y==null?void 0:y.setting;S?(m.value=!0,g.value=S.id,v.value={repeat_type:S.repeat_type??"daily",start_date:S.start_date??v.value.start_date,end_date:S.end_date??null,weekly_day:S.weekly_day??null,monthly_mode:S.monthly_mode??null,monthly_value:S.monthly_value??null,monthly_week:S.monthly_week??null,yearly_month:S.yearly_month??null,yearly_day:S.yearly_day??null}):v.value.id=null}catch(y){L.value=(r=(x=y==null?void 0:y.response)==null?void 0:x.data)==null?void 0:r.message,console.error("Load setting failed:",(y==null?void 0:y.message)||y)}}async function O(){await i.updateTodo(n.todo.id,{title:l.value.title,todo_type:l.value.todo_type,todo_type_id:l.value.todo_type_id})}async function j(){var x,r;if(!m.value)g.value&&await rt(n.todo.id,g.value);else{const y=(x=a.value)!=null&&x.buildPayload?a.value.buildPayload():{...v.value};y.start_date||(y.start_date=((r=n.todo)==null?void 0:r.date)||n.date||B(new Date)),await mt(n.todo.id,y)}}const A=x=>{var r,y;return((y=(r=x==null?void 0:x.response)==null?void 0:r.data)==null?void 0:y.message)||(x==null?void 0:x.message)||"Something went wrong"};async function q(){const[x,r]=await Promise.allSettled([O(),j()]),y=x.status==="fulfilled",S=r.status==="fulfilled";S||(L.value=A(r.reason)),y&&S&&p("update")}const U=T(!1),L=T(!1);async function W(){var x;await t(),U.value=!0,await k(),U.value=!1,await z(),(x=s.value)==null||x.focus()}const V=N(()=>i.loading||U.value);return P(()=>{W()}),(x,r)=>(u(),f("div",{class:"relative",onClick:r[5]||(r[5]=y=>b.value=!1)},[V.value?(u(),R(K,{key:0,class:"absolute inset-0 bg-opacity-80 text-center py-4 text-gray-500 z-10 flex items-center justify-center"},{default:I(()=>r[6]||(r[6]=[C(" Loading... ")])),_:1,__:[6]})):c("",!0),E(Q,{onSubmit:q,onClickCancel:r[4]||(r[4]=y=>p("cancelClick")),isSubmitting:d.value=="submitting",isLoading:V.value,id:"todoEditForm"},{error:I(()=>[o("div",null,[w(i).error?(u(),f("div",Pt,h(w(i).error),1)):c("",!0),L.value?(u(),f("div",jt,h(L.value),1)):c("",!0)])]),default:I(()=>[r[10]||(r[10]=o("div",{class:"border-b py-2 px-4"},[o("h2",{class:"text-xl font-semibold"},"Edit Todo")],-1)),o("div",At,[r[9]||(r[9]=o("div",{class:"text-xs text-red-800 mb-6"},[o("strong",null,"Tips:"),C(" If you change the todo, it will change to all the concurrent dates ")],-1)),o("div",qt,[r[7]||(r[7]=o("label",{class:"block text-gray-500 font-medium text-sm"},"Title",-1)),G(o("input",{ref_key:"titleRef",ref:s,"onUpdate:modelValue":r[0]||(r[0]=y=>l.value.title=y),required:"",placeholder:"Enter todo title",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500 shadow-sm"},null,512),[[_,l.value.title]])]),o("div",Wt,[r[8]||(r[8]=o("label",{class:"block text-gray-500 font-medium text-sm"},"Task ID (optional)",-1)),E(at,{show:b.value,"onUpdate:show":r[1]||(r[1]=y=>b.value=y),todoType:l.value.todo_type,"onUpdate:todoType":r[2]||(r[2]=y=>l.value.todo_type=y),todoTypeId:l.value.todo_type_id,"onUpdate:todoTypeId":r[3]||(r[3]=y=>l.value.todo_type_id=y)},null,8,["show","todoType","todoTypeId"])])])]),_:1,__:[10]},8,["isSubmitting","isLoading"])]))}},Gt={class:"relative"},_t={class:"min-h-[10vh] max-h-[50vh] overflow-y-auto p-4"},zt={class:"mb-4"},Kt={class:"mb-4 flex justify-between items-end"},Ht={key:0,class:"mt-1 flex items-center gap-2 mb-4"},Jt={class:"border border-sky-400 rounded-full text-sky-500 font-semibold bg-sky-50 px-1 py-0.5 text-xs inline-block"},Yt={class:"flex items-center justify-between gap-4"},Qt={key:0,class:"flex items-center gap-2"},Xt={class:"flex justify-between items-center gap-4 py-4 px-4 border-t"},Zt={key:0,class:"ml-auto flex items-center gap-2"},te={__name:"TodoShow",props:{todoDate:{type:Object,default:()=>{}}},emits:["cancelClick","clickEdit","update","clickAddTodoDate"],setup(e,{emit:D}){const n=e,d=ot(),b=X(),s=D;async function i(){var a;console.log({todo_date:"dd"}),await d.fetchTodoDate((a=n.todoDate)==null?void 0:a.id)}const p=N(()=>{var a,t;return(a=d.todo_date)!=null&&a.date?new Date((t=d.todo_date)==null?void 0:t.date):null}),l=N(()=>{var a,t,g;return((t=(a=d.todo_date)==null?void 0:a.user)==null?void 0:t.id)===((g=b.user)==null?void 0:g.id)});async function v(a){var t;confirm(`Are your sure want to delete todo
'${(t=d.todo_date)==null?void 0:t.title}'`)&&(await d.deleteTodoDate(a.id),s("update"))}async function m(a,t){var g;confirm(`Are your sure want to compete todo
'${(g=d.todo_date)==null?void 0:g.title}'`)&&(await d.updateStatus(a.id,t),s("update"))}return P(async()=>{await i()}),(a,t)=>{var g,k,O,j,A,q,U,L,W;return u(),f("div",Gt,[w(d).loading?(u(),R(K,{key:0,class:"absolute inset-0 bg-opacity-80 text-center py-4 text-gray-500 z-10 flex items-center justify-center"},{default:I(()=>t[6]||(t[6]=[C(" Loading... ")])),_:1,__:[6]})):c("",!0),o("div",null,[t[13]||(t[13]=o("div",{class:"border-b py-2 px-4"},[o("h2",{class:"text-xl font-semibold"},"Show Todo")],-1)),o("div",_t,[o("div",zt,[t[7]||(t[7]=o("div",{class:"font-semibold text-xs text-gray-500"},"Date",-1)),o("span",null,h(w(it)(p.value,{weekDay:"long"})),1)]),o("div",Kt,[o("div",null,[t[8]||(t[8]=o("div",{class:"text-xs text-gray-500"},"Todo",-1)),C(" "+h((g=w(d).todo_date)==null?void 0:g.title),1)]),o("button",{class:"btn-2 bg-sky-400 text-white hover:bg-sky-600 hover:text-white bg-none",onClick:t[0]||(t[0]=$(V=>{var M;return s("clickEdit",(M=w(d).todo_date)==null?void 0:M.todo)},["prevent","stop"]))},t[9]||(t[9]=[o("i",{class:"fas fa-pen"},null,-1),C(" Edit Todo ")]))]),(k=e.todoDate)!=null&&k.user?(u(),f("div",Ht,[E(et,{user:e.todoDate.user,"avatar-size":"xsmall"},null,8,["user"]),o("div",Jt,h((j=(O=e.todoDate.user)==null?void 0:O.department)==null?void 0:j.name),1)])):c("",!0),o("div",null,[t[12]||(t[12]=o("div",{class:"text-xs text-gray-500"},"Status",-1)),o("div",Yt,[o("div",null,[(A=w(d))!=null&&A.todo_date?(u(),R(lt,{key:0,todoDate:(q=w(d))==null?void 0:q.todo_date},null,8,["todoDate"])):c("",!0),C(" "+h((U=w(d).todo_date)==null?void 0:U.status),1)]),l.value&&!w(d).loading?(u(),f("div",Qt,[((L=w(d).todo_date)==null?void 0:L.status)==="PENDING"?(u(),f("button",{key:0,class:"btn-2 from-yellow-700 to-yellow-500 text-white hover:bg-green-600 hover:text-white",onClick:t[1]||(t[1]=$(()=>m(w(d).todo_date,"WORKING"),["prevent","stop"]))},t[10]||(t[10]=[o("i",{class:"fas fa-exclamation-circle"},null,-1),C(" Change to Working ")]))):c("",!0),((W=w(d).todo_date)==null?void 0:W.status)==="WORKING"?(u(),f("button",{key:1,class:"btn-2 from-green-700 to-green-300 text-white hover:bg-green-600 hover:text-white",onClick:t[2]||(t[2]=$(()=>m(w(d).todo_date,"COMPLETED"),["prevent","stop"]))},t[11]||(t[11]=[o("i",{class:"fas fa-check"},null,-1),C(" Make Complete ")]))):c("",!0)])):c("",!0)])])])]),o("div",Xt,[o("button",{type:"button",onClick:t[3]||(t[3]=V=>s("cancelClick")),class:"btn-3"},"Cancel"),l.value&&!w(d).loading?(u(),f("div",Zt,[o("button",{class:"btn-2 bg-green-600 text-white hover:bg-green-700 hover:text-white bg-none",onClick:t[4]||(t[4]=$(V=>{var M,x;return s("clickAddTodoDate",(M=w(d).todo_date)==null?void 0:M.todo_id,(x=w(d).todo_date)==null?void 0:x.date)},["prevent","stop"]))},t[14]||(t[14]=[o("i",{class:"fas fa-plus"},null,-1),C(" Add To another date ")])),o("button",{class:"btn-2-red",onClick:t[5]||(t[5]=$(()=>v(w(d).todo_date),["prevent","stop"]))},t[15]||(t[15]=[o("i",{class:"fas fa-trash-alt"},null,-1),C(" Delete ")]))])):c("",!0)])])}}},me={__name:"TodoCreateEditShow",props:{todoModal:{type:Object,required:!0},userRole:{type:String,required:"employee"}},emits:["cancelClick","todoUpdate","todoDateUpdate","clickEdit","clickDelete","clickChangeStatus","clickAddTodoDate"],setup(e,{emit:D}){const n=D;function d(){n("todoUpdate")}function b(){n("todoDateUpdate")}return(s,i)=>(u(),f(Z,null,[e.todoModal.action=="add"?(u(),R(F,{key:0},{default:I(()=>{var p,l,v,m;return[E(Ot,{onCancelClick:i[0]||(i[0]=a=>n("cancelClick")),onUpdate:d,date:(p=e.todoModal)==null?void 0:p.date,todoType:(l=e.todoModal)==null?void 0:l.todoType,todoTypeId:(v=e.todoModal)==null?void 0:v.todoTypeId,readonlyValues:((m=e.todoModal)==null?void 0:m.formReadonlyValues)||{},userRole:e.userRole},null,8,["date","todoType","todoTypeId","readonlyValues","userRole"])]}),_:1})):c("",!0),e.todoModal.action=="addDate"?(u(),R(F,{key:1},{default:I(()=>{var p,l,v;return[E(Bt,{onCancelClick:i[1]||(i[1]=m=>n("cancelClick")),onUpdate:b,date:(p=e.todoModal)==null?void 0:p.date,todoId:(l=e.todoModal)==null?void 0:l.todo_id,userRole:e.userRole,readonlyValues:((v=e.todoModal)==null?void 0:v.formReadonlyValues)||{}},null,8,["date","todoId","userRole","readonlyValues"])]}),_:1})):c("",!0),e.todoModal.action=="edit"?(u(),R(F,{key:2},{default:I(()=>{var p,l;return[E(Ft,{onCancelClick:i[2]||(i[2]=v=>n("cancelClick")),onUpdate:d,todo:(p=e.todoModal)==null?void 0:p.todo,userRole:e.userRole,readonlyValues:((l=e.todoModal)==null?void 0:l.formReadonlyValues)||{}},null,8,["todo","userRole","readonlyValues"])]}),_:1})):c("",!0),e.todoModal.action=="show"?(u(),R(F,{key:3},{default:I(()=>{var p;return[E(te,{onCancelClick:i[3]||(i[3]=l=>n("cancelClick")),onUpdate:b,onClickEdit:i[4]||(i[4]=l=>n("clickEdit",l)),onClickAddTodoDate:i[5]||(i[5]=(...l)=>n("clickAddTodoDate",...l)),onClickDelete:i[6]||(i[6]=l=>n("clickDelete",l)),onClickChangeStatus:i[7]||(i[7]=(l,v)=>n("clickChangeStatus",l,v)),todoDate:(p=e.todoModal)==null?void 0:p.todo,userRole:e.userRole},null,8,["todoDate","userRole"])]}),_:1})):c("",!0)],64))}};export{re as _,me as a,lt as b};
