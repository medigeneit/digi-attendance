import{f as _,u as j,D as h,r as m,h as k,q as w,c as a,o as r,a as t,m as n,w as P,j as C,k as b,v as S,H as U,F as L,e as M,t as u}from"./index-Cc1Rk5xP.js";import{u as V}from"./company-CARw1618.js";import{u as B}from"./useProjectStore-D3tZjTLB.js";const D={class:"container mx-auto p-6"},E={class:"max-w-lg mx-auto bg-white shadow-lg rounded-lg p-6"},N={key:0,class:"text-center py-4 text-gray-500"},R={class:"mb-4"},q={class:"mb-4"},F=["value"],T={key:0,class:"mb-4 text-red-500 font-medium"},H={class:"flex items-center gap-4"},I=["disabled"],$={key:2,class:"text-center py-4 text-red-500"},K={__name:"ProjectEdit",setup(z){const o=B(),g=_(),p=j(),f=V(),{companies:y}=h(f),v=g.params.id,l=m(!1),d=m(""),i=m("");k(()=>{o.fetchProject(v),f.fetchCompanies()}),w(()=>o.project,c=>{d.value=c.name||"",i.value=c.company_id||""});const x=async()=>{l.value=!0,await o.updateProject(v,{name:d.value,company_id:i.value}),l.value=!1,o.error||p.push({name:"ProjectList"})};return(c,e)=>(r(),a("div",D,[t("div",E,[e[6]||(e[6]=t("h2",{class:"text-2xl font-semibold text-gray-800 mb-4"},"Edit Project",-1)),n(o).loading?(r(),a("div",N," Loading project details... ")):n(o).project?(r(),a("form",{key:1,onSubmit:P(x,["prevent"])},[t("div",R,[e[3]||(e[3]=t("label",{class:"block text-gray-700 font-medium mb-2"},"Project Name",-1)),b(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>d.value=s),type:"text",required:"",placeholder:"Update project name",class:"w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[S,d.value]])]),t("div",q,[e[5]||(e[5]=t("label",{class:"block text-gray-700 font-medium mb-2"},"Company",-1)),b(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>i.value=s),class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},[e[4]||(e[4]=t("option",{value:""},"Select Company",-1)),(r(!0),a(L,null,M(n(y),s=>(r(),a("option",{key:s.id,value:s.id},u(s.name),9,F))),128))],512),[[U,i.value]])]),n(o).error?(r(),a("div",T,u(n(o).error),1)):C("",!0),t("div",H,[t("button",{disabled:l.value,type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold px-5 py-2 rounded transition"},u(l.value?"Updating...":"Update Project"),9,I),t("button",{type:"button",onClick:e[2]||(e[2]=s=>n(p).push({name:"ProjectList"})),class:"bg-gray-200 hover:bg-gray-300 text-gray-700 font-semibold px-5 py-2 rounded transition"}," Cancel ")])],32)):(r(),a("div",$,u(n(o).error||"Project not found."),1))])]))}};export{K as default};
