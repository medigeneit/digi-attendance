import{r as v,y as N,b as q,A as y,c as n,a as t,m as g,h as u,d as U,v as B,C as R,F as T,x as D,e as A,f as j,o as l,t as a,n as E,g as F,p as P}from"./index-CF2vbTeX.js";import{L as $}from"./LoaderView-Cbf-MFCo.js";import{_ as H}from"./MultiselectDropdown-DW6aD0Q_.js";import{u as I}from"./short-leave-ERkY5FF1.js";import{u as z}from"./user-DGly_MT2.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vue-multiselect.esm-kYotjhMM.js";/* empty css                                                            */const G={class:"space-y-2 px-4"},J={class:"flex gap-4"},K={style:{width:"300px"}},O={key:0,class:"text-center py-4"},Q={key:1,class:"space-y-4"},W={class:"overflow-x-auto"},X={class:"min-w-full table-auto border-collapse border border-gray-200 bg-white rounded-md text-sm"},Y={class:"border border-gray-300 px-2"},Z={class:"border border-gray-300 px-2"},tt={class:"border border-gray-300 px-2"},et={class:"border border-gray-300 px-2"},st={class:"border border-gray-300 px-2"},rt={class:"border border-gray-300 px-2"},ot={class:"border border-gray-300 px-2"},dt={class:"border border-gray-300 px-2 text-center"},at=["href"],nt={class:"border border-gray-300 px-2"},lt={class:"border border-gray-300 px-2"},it={class:"flex gap-2"},ut=["onClick"],ct={key:0},Lt={__name:"ShortLeaveList",setup(pt){var S;const m=F(),d=j(),r=I(),h=z(),p=v(""),i=v(((S=d==null?void 0:d.query)==null?void 0:S.date)||r.selectedMonth),b=N(()=>{var o;return(o=p.value)==null?void 0:o.id});q(()=>{h.fetchUsers(),r.fetchShortLeaves({selectedMonth:i.value,selectedStatus:r.selectedStatus}),p.value=h.users.find(o=>{var s;return o.id==((s=d==null?void 0:d.query)==null?void 0:s.user_id)})});const f=async()=>{b.value?await r.fetchShortLeaves({user_id:b.value,selectedMonth:i.value,selectedStatus:r.selectedStatus}):await r.fetchShortLeaves({selectedMonth:i.value,selectedStatus:r.selectedStatus})},C=()=>{m.go(-1)};y([b],f),y(b,o=>{m.replace({query:{...d.query,user_id:o}})}),y(i,o=>{m.replace({query:{...d.query,date:o}})});const _=o=>{const[s,x]=o.split(":").map(Number),c=new Date;return c.setHours(s,x),c.toLocaleString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})},M=async o=>{confirm("Are you sure to delete this application?")&&r.deleteShortLeave(o)};return(o,s)=>{var c,L,k;const x=P("RouterLink");return l(),n("div",G,[t("div",{class:"flex items-center justify-between gap-2"},[t("button",{class:"btn-3",onClick:C},s[3]||(s[3]=[t("i",{class:"far fa-arrow-left"},null,-1),t("span",{class:"hidden md:flex"},"Back",-1)])),s[4]||(s[4]=t("h1",{class:"title-md md:title-lg flex-wrap text-center"},"Short Leaves",-1)),s[5]||(s[5]=t("div",null,null,-1))]),t("div",J,[t("div",K,[g(H,{modelValue:p.value,"onUpdate:modelValue":s[0]||(s[0]=e=>p.value=e),options:u(h).users,multiple:!1,label:"label",placeholder:"Select user"},null,8,["modelValue","options"])]),t("div",null,[U(t("input",{id:"monthSelect",type:"month","onUpdate:modelValue":s[1]||(s[1]=e=>i.value=e),onChange:f,class:"input-1"},null,544),[[B,i.value]])]),t("div",null,[U(t("select",{"onUpdate:modelValue":s[2]||(s[2]=e=>u(r).selectedStatus=e),onChange:f,class:"input-1"},s[6]||(s[6]=[t("option",{value:"",selected:""},"All",-1),t("option",{value:"Pending"},"Pending",-1),t("option",{value:"Approved"},"Approved",-1),t("option",{value:"Rejected"},"Rejected",-1)]),544),[[R,u(r).selectedStatus]])])]),u(r).loading?(l(),n("div",O,[g($)])):(l(),n("div",Q,[t("div",W,[t("table",X,[s[11]||(s[11]=t("thead",null,[t("tr",{class:"bg-gray-200"},[t("th",{class:"border border-gray-300 px-2 text-left"},"#"),t("th",{class:"border border-gray-300 px-2 text-left"},"Employee Name"),t("th",{class:"border border-gray-300 px-2 text-left"},"Type"),t("th",{class:"border border-gray-300 px-2 text-left"},"Date"),t("th",{class:"border border-gray-300 px-2 text-left"},"Start Time"),t("th",{class:"border border-gray-300 px-2 text-left"},"End Time"),t("th",{class:"border border-gray-300 px-2 text-left"},"Total Minutes"),t("th",{class:"border border-gray-300 px-2 text-left"},"Attachment"),t("th",{class:"border border-gray-300 px-2 text-left"},"Status"),t("th",{class:"border border-gray-300 px-2 text-left"},"Action")])],-1)),t("tbody",null,[(l(!0),n(T,null,D((c=u(r))==null?void 0:c.shortLeaves,(e,V)=>{var w;return l(),n("tr",{key:e==null?void 0:e.id,class:"border-b border-gray-200 hover:bg-blue-200"},[t("td",Y,a(V+1),1),t("td",Z,a(((w=e==null?void 0:e.user)==null?void 0:w.name)||"Unknown"),1),t("td",tt,a((e==null?void 0:e.type)||"Unknown"),1),t("td",et,a(e.date),1),t("td",st,a(_(e.start_time)),1),t("td",rt,a(e.end_time?_(e.end_time):""),1),t("td",ot,a(e.total_minutes),1),t("td",dt,[e.attachment?(l(),n("a",{key:0,href:e==null?void 0:e.attachment,target:"_blank",class:"text-blue-500 underline"},s[7]||(s[7]=[t("i",{class:"fad fa-link"},null,-1)]),8,at)):A("",!0)]),t("td",nt,a(e.status||"N/A"),1),t("td",lt,[t("div",it,[g(x,{to:{name:"ShortLeaveShow",params:{id:e==null?void 0:e.id}},class:"btn-icon"},{default:E(()=>s[8]||(s[8]=[t("i",{class:"far fa-eye"},null,-1)])),_:2},1032,["to"]),t("button",{onClick:bt=>M(e==null?void 0:e.id),class:"btn-icon text-red-500"},s[9]||(s[9]=[t("i",{class:"far fa-trash"},null,-1)]),8,ut)])])])}),128)),((k=(L=u(r))==null?void 0:L.shortLeaves)==null?void 0:k.length)===0?(l(),n("tr",ct,s[10]||(s[10]=[t("td",{colspan:"8",class:"p-2 text-center text-red-500"},"No short leaves found",-1)]))):A("",!0)])])])]))])}}};export{Lt as default};
