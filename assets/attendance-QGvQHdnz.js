import{C as R,r as y,D as p}from"./index-CbBhj06S.js";const O=R("attendance",()=>{const g=y([]),v=y([]),w=y([]),f=y(null),h=y(null),b=y(new Date().toISOString().substring(0,7)),S=y(new Date().toISOString().substring(0,10)),e=y(null),c=y(!1);return{monthlyLogs:g,dailyLateLogs:w,summary:f,monthly_company_summary:h,selectedMonth:b,selectedDate:S,error:e,isLoading:c,dailyLogs:v,getMonthlyAttendanceByShift:async(o,d)=>{var n,l;if(!o||!d){e.value="Invalid user ID or month";return}console.log("sdfsdf",o),c.value=!0;try{const a=await p.get(`/user/${o}/attendance/monthly/${d}`);g.value=a.data.monthly_logs,f.value=a.data.summary,e.value=null}catch(a){e.value=((l=(n=a.response)==null?void 0:n.data)==null?void 0:l.message)||"Something went wrong",console.error(e.value)}finally{c.value=!1}},getTodayAttendanceReport:async(o,d,n,l,a,t)=>{var r,u;c.value=!0;try{const s={companyId:o,departmentId:d,employee_id:n,category:l,month:a,status:t},m=await p.get("/attendance/today",{params:s});v.value=m.data,e.value=null}catch(s){e.value=((u=(r=s.response)==null?void 0:r.data)==null?void 0:u.message)||"Something went wrong",console.error(e.value)}finally{c.value=!1}},getAttendanceLateReport:async(o,d,n)=>{var l,a;c.value=!0;try{const t={company_id:o,employee_id:d,month:n};console.log({params:t});const r=await p.get("/monthly/attendance/late-reports",{params:t});w.value=r.data,e.value=null}catch(t){e.value=((a=(l=t.response)==null?void 0:l.data)==null?void 0:a.message)||"Something went wrong",console.error(e.value)}finally{c.value=!1}},getMonthlyAttendanceSummaryReport:async(o,d,n,l)=>{var a,t;if(!o||!l){e.value="Invalid user ID or month";return}c.value=!0;try{const r={company_id:o,employee_id:d,category:n,month:l},u=await p.get("/attendance/monthly-summary-reports",{params:r});h.value=u.data,e.value=null}catch(r){e.value=((t=(a=r.response)==null?void 0:a.data)==null?void 0:t.message)||"Something went wrong",console.error(e.value)}finally{c.value=!1}},downloadExcel:async(o,d,n)=>{var l,a;if(!o||!n){e.value="Invalid company ID or month";return}c.value=!0;try{const t={company_id:o,category:d,month:n};console.log({params:t});const r=await p.get("/attendance/monthly-summary-reports?flag=excel",{params:t,responseType:"blob"}),u=window.URL.createObjectURL(new Blob([r.data])),s=document.createElement("a");s.href=u,s.setAttribute("download",`${n} attendance_summary.xlsx`),document.body.appendChild(s),s.click(),document.body.removeChild(s)}catch(t){e.value=((a=(l=t.response)==null?void 0:l.data)==null?void 0:a.message)||"Something went wrong",console.error(e.value)}finally{c.value=!1}},downloadPDF:async(o,d,n,l=0)=>{var a,t;if(!o||!n){e.value="Invalid user ID or month";return}c.value=!0;try{const r={company_id:o,category:d,month:n},u=await p.get("/attendance/monthly-summary-reports?flag=pdf",{params:r,responseType:"blob"}),s=window.URL.createObjectURL(new Blob([u.data])),m=document.createElement("a");m.href=s,m.setAttribute("download",`${n} attendance_summary.pdf`),document.body.appendChild(m),m.click(),document.body.removeChild(m)}catch(r){e.value=((t=(a=r.response)==null?void 0:a.data)==null?void 0:t.message)||"Something went wrong",console.error(e.value)}finally{c.value=!1}},attendanceDownloadExcel:async(o,d,n,l,a)=>{var t,r;c.value=!0;try{const u={companyId:o,employee_id:d,category:n,month:l,status:a},s=await p.get("/attendance/today?flag=excel",{params:u,responseType:"blob"}),m=window.URL.createObjectURL(new Blob([s.data])),i=document.createElement("a");i.href=m,i.setAttribute("download",`${l} attendance_summary.xlsx`),document.body.appendChild(i),i.click(),document.body.removeChild(i)}catch(u){e.value=((r=(t=u.response)==null?void 0:t.data)==null?void 0:r.message)||"Something went wrong",console.error(e.value)}finally{c.value=!1}},attendanceDownloadPdf:async(o,d,n,l,a)=>{var t,r;c.value=!0;try{const u={companyId:o,employee_id:d,category:n,month:l,status:a},s=await p.get("/attendance/today?flag=pdf",{params:u,responseType:"blob"}),m=window.URL.createObjectURL(new Blob([s.data])),i=document.createElement("a");i.href=m,i.setAttribute("download",`${l} attendance_summary.pdf`),document.body.appendChild(i),i.click(),document.body.removeChild(i)}catch(u){e.value=((r=(t=u.response)==null?void 0:t.data)==null?void 0:r.message)||"Something went wrong",console.error(e.value)}finally{c.value=!1}},lateReportDownloadExcel:async(o,d,n)=>{var l,a;if(!o||!n){e.value="Invalid company ID or month";return}c.value=!0;try{const t={company_id:o,employee_id:d,month:n},r=await p.get("/monthly/attendance/late-reports?flag=excel",{params:t,responseType:"blob"}),u=window.URL.createObjectURL(new Blob([r.data])),s=document.createElement("a");s.href=u,s.setAttribute("download",`${n} attendance_summary.xlsx`),document.body.appendChild(s),s.click(),document.body.removeChild(s)}catch(t){e.value=((a=(l=t.response)==null?void 0:l.data)==null?void 0:a.message)||"Something went wrong",console.error(e.value)}finally{c.value=!1}}}});export{O as u};
