import{g as R,e as $}from"./requirement-CSyXZ5ic.js";import{B as E,r as o,x as i,C as c}from"./index-OI-CErl3.js";const I=E("requirement",()=>{const u=o([]),m=o([]),v=o(null),s=o(!1),n=o(null),q=async(r={})=>{var t,a;s.value=!0,n.value=null;try{const e=await R({params:r});u.value=e.data}catch(e){n.value=((a=(t=e.response)==null?void 0:t.data)==null?void 0:a.message)||"রিকোয়ারমেন্ট লোড করতে ব্যর্থ হয়েছে।",console.error("Error fetching requirements:",e)}finally{s.value=!1}},f=async(r={})=>{var t,a,e;s.value=!0,n.value=null;try{const l=await $({params:r});m.value=((t=l.data)==null?void 0:t.requirement_details)||[],console.log({response:l})}catch(l){throw n.value=((e=(a=l.response)==null?void 0:a.data)==null?void 0:e.message)||"রিকোয়ারমেন্ট লোড করতে ব্যর্থ হয়েছে।",console.error("Error fetching requirements:",l),l}finally{s.value=!1}},p=async r=>{var t,a;s.value=!0,n.value=null;try{const e=await c.get(`/requirements/${r}`);v.value=e.data}catch(e){n.value=((a=(t=e.response)==null?void 0:t.data)==null?void 0:a.message)||`রিকোয়ারমেন্ট (ID: ${r}) লোড করতে ব্যর্থ হয়েছে।`,console.error(`Error fetching requirement with id ${r}:`,e)}finally{s.value=!1}},g=async r=>{var t,a;s.value=!0,n.value=null;try{const e=await c.post("/requirements",r);return u.value.push(e.data.data),e.data.data}catch(e){n.value=((a=(t=e.response)==null?void 0:t.data)==null?void 0:a.message)||"রিকোয়ারমেন্ট তৈরি করতে ব্যর্থ হয়েছে।",console.error("Error creating requirement:",e)}finally{s.value=!1}},h=async(r,t)=>{var a,e;s.value=!0,n.value=null;try{const l=await c.put(`/requirements/${r}`,t),d=u.value.findIndex(w=>w.id===r);return d!==-1&&(u.value[d]=l.data.data),l.data.data}catch(l){n.value=((e=(a=l.response)==null?void 0:a.data)==null?void 0:e.message)||`রিকোয়ারমেন্ট (ID: ${r}) আপডেট করতে ব্যর্থ হয়েছে।`,console.error(`Error updating requirement with id ${r}:`,l)}finally{s.value=!1}},y=async r=>{var t,a;s.value=!0,n.value=null;try{await c.delete(`/requirements/${r}`),u.value=u.value.filter(e=>e.id!==r)}catch(e){n.value=((a=(t=e.response)==null?void 0:t.data)==null?void 0:a.message)||`রিকোয়ারমেন্ট (ID: ${r}) মুছতে ব্যর্থ হয়েছে।`,console.error(`Error deleting requirement with id ${r}:`,e)}finally{s.value=!1}};return{requirements:i(()=>u.value),requirementDetails:i(()=>m.value),requirement:i(()=>v.value),loading:i(()=>s.value),error:i(()=>n.value),fetchRequirementsWithTasks:f,fetchRequirements:q,fetchRequirement:p,createRequirement:g,updateRequirement:h,deleteRequirement:y}});export{I as u};
