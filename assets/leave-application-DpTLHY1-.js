import{D as S,r as u,E as s}from"./index-Bh2BQNF6.js";const B=S("leaveApplication",()=>{const o=u([]),p=u(null),r=u(!1),t=u(null),f=u(new Date().toISOString().substring(0,7)),y=u("");async function v(n={}){var l,e;r.value=!0,t.value=null;try{const a=await s.get("/leave-applications",{params:n});a.data?o.value=a.data:o.value=[]}catch(a){t.value=((e=(l=a.response)==null?void 0:l.data)==null?void 0:e.message)||"Failed to fetch leave applications"}finally{r.value=!1}}async function h(n={}){var l,e;r.value=!0,t.value=null;try{const a=await s.get("/my-leave-applications",{params:n});o.value=a.data.data}catch(a){t.value=((e=(l=a.response)==null?void 0:l.data)==null?void 0:e.message)||"Failed to fetch leave applications"}finally{r.value=!1}}async function w(n){var l,e,a,i;r.value=!0,t.value=null;try{const c=await s.post("/leave-applications/store",n);return o.value.push((l=c==null?void 0:c.data)==null?void 0:l.data),(e=c==null?void 0:c.data)==null?void 0:e.data}catch(c){throw t.value=((i=(a=c.response)==null?void 0:a.data)==null?void 0:i.message)||"Failed to store leave application",new Error(t.value)}finally{r.value=!1}}async function m(n){var l,e;r.value=!0,t.value=null;try{await s.delete(`/my-leave-application/destroy/${n}`),await v()}catch(a){throw t.value=((e=(l=a.response)==null?void 0:l.data)==null?void 0:e.message)||"Failed to store leave application",new Error(t.value)}finally{r.value=!1}}async function g(n,l){var e,a;r.value=!0,t.value=null;try{const i=await s.post(`/leave-applications/${n}/update`,l),c=o.value.findIndex(d=>d.id===n);return c!==-1&&(o.value[c]=i.data.data),i.data.data}catch(i){throw t.value=((a=(e=i.response)==null?void 0:e.data)==null?void 0:a.message)||"Failed to update leave application",new Error(t.value)}finally{r.value=!1}}async function x(n){var l,e;r.value=!0,t.value=null;try{const a=await s.get(`/leave-applications/${n}`);p.value=a==null?void 0:a.data}catch(a){t.value=((e=(l=a.response)==null?void 0:l.data)==null?void 0:e.message)||"Failed to fetch leave application"}finally{r.value=!1}}async function A(n){var l,e;r.value=!0,t.value=null;try{const a=await s.post(`/leave-applications/${n.id}/handover-accept`,n),i=o.value.findIndex(c=>c.id===id);return i!==-1&&(o.value[i]=a.data.data),a.data.data}catch(a){throw t.value=((e=(l=a.response)==null?void 0:l.data)==null?void 0:e.message)||"Failed to accept handover",new Error(t.value)}finally{r.value=!1}}async function F(n){var l,e;r.value=!0,t.value=null;try{const a=await s.post(`/leave-applications/${n.id}/incharge-accept`,n),i=o.value.findIndex(c=>c.id===id);return i!==-1&&(o.value[i]=a.data.data),a.data.data}catch(a){throw t.value=((e=(l=a.response)==null?void 0:l.data)==null?void 0:e.message)||"Failed to accept in-charge approval",new Error(t.value)}finally{r.value=!1}}async function E(n){var l,e;r.value=!0,t.value=null;try{const a=await s.post(`/leave-applications/${n.id}/coordinator-accept`,n),i=o.value.findIndex(c=>c.id===id);return i!==-1&&(o.value[i]=a.data.data),a.data.data}catch(a){throw t.value=((e=(l=a.response)==null?void 0:l.data)==null?void 0:e.message)||"Failed to accept coordinator approval",new Error(t.value)}finally{r.value=!1}}async function I(n){var l,e;r.value=!0,t.value=null;try{const a=await s.post(`/leave-applications/${n.id}/operational-admin-accept`,n),i=o.value.findIndex(c=>c.id===id);return i!==-1&&(o.value[i]=a.data.data),a.data.data}catch(a){throw t.value=((e=(l=a.response)==null?void 0:l.data)==null?void 0:e.message)||"Failed to accept operational admin approval",new Error(t.value)}finally{r.value=!1}}async function $(n){var l,e;r.value=!0,t.value=null;try{const a=await s.post(`/leave-applications/${n.id}/recommend-by-accept`,n),i=o.value.findIndex(c=>c.id===id);return i!==-1&&(o.value[i]=a.data.data),a.data.data}catch(a){throw t.value=((e=(l=a.response)==null?void 0:l.data)==null?void 0:e.message)||"Failed to accept recommend by approval",new Error(t.value)}finally{r.value=!1}}async function L(n){var l,e;r.value=!0,t.value=null;try{const a=await s.post(`/leave-applications/${n==null?void 0:n.id}/approved-by-accept`,n),i=o.value.findIndex(c=>c.id===id);return i!==-1&&(o.value[i]=a.data.data),a.data.data}catch(a){throw t.value=((e=(l=a.response)==null?void 0:l.data)==null?void 0:e.message)||"Failed to accept approval by admin",new Error(t.value)}finally{r.value=!1}}async function b(n,l){var e,a;r.value=!0,t.value=null;try{const i=await s.post(`/leave-applications/${n}/reject`,l),c=o.value.findIndex(d=>d.id===n);return c!==-1&&(o.value[c]=i.data.data),i.data.data}catch(i){throw t.value=((a=(e=i.response)==null?void 0:e.data)==null?void 0:a.message)||"Failed to reject leave application",new Error(t.value)}finally{r.value=!1}}return{leaveApplications:o,leaveApplication:p,loading:r,error:t,selectedMonth:f,selectedStatus:y,fetchLeaveApplications:v,storeLeaveApplication:w,updateLeaveApplication:g,fetchLeaveApplicationById:x,acceptHandover:A,acceptInCharge:F,acceptCoordinator:E,acceptOperationalAdmin:I,acceptRecommendBy:$,acceptApprovedBy:L,rejectLeaveApplication:b,fetchMyLeaveApplications:h,deleteLeaveApplication:m}});export{B as u};
