import{i as S,r as v,b as B,c as u,a as e,j as M,t as n,F as T,x as I,d as U,v as V,o as d,f as j}from"./index-DgyHG0oN.js";import{L as C}from"./LoaderView-C74jZuwf.js";import{u as E}from"./notice-BF5w3FRQ.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const H={class:"my-container space-y-6"},A={class:"card-bg p-6"},P={key:1,class:"text-center text-red-500"},R={key:2,class:"grid gap-2"},q={class:"bg-gray-100 p-4 rounded-lg"},z={class:"grid md:grid-cols-2 gap-4"},G={class:"text-lg text-gray-800"},J={class:"text-lg text-gray-800"},K={class:"text-lg text-gray-800"},O={class:"text-lg text-gray-800"},Q={class:"text-lg text-gray-800"},W={class:"col-span-full"},X=["innerHTML"],Y={class:"md:flex justify-center mt-8 gap-4"},ae={__name:"NoticeDetails",setup(Z){const g=E(),x=S(),m=j(),c=v(""),s=v(null),p=v(!0),i=v(null),y=l=>new Date(l).toLocaleString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}),D=async()=>{var l,t,a;try{p.value=!0,i.value=null;const o=m.params.id;s.value=await g.fetchNoticeDetails(o),c.value=(l=s.value.user_feedback)==null?void 0:l.feedback}catch(o){i.value=((a=(t=o.response)==null?void 0:t.data)==null?void 0:a.message)||"Failed to load notice details",x.error(i.value)}finally{p.value=!1}},F=async()=>{var l,t;if(c.value)try{const a=m.params.id,o={feedback:c.value};await g.createNoticeFeedback(a,o)}catch(a){i.value=((t=(l=a.response)==null?void 0:l.data)==null?void 0:t.message)||"Failed to load notice details",x.error(i.value)}finally{p.value=!1}};return B(async()=>{await D()}),(l,t)=>{var a,o,f,b,_,k,N,h;return d(),u("div",H,[e("div",A,[t[9]||(t[9]=e("h2",{class:"title-lg text-center"},"Notice Details",-1)),p.value?(d(),M(C,{key:0,class:"shadow-none"})):i.value?(d(),u("div",P,[e("p",null,n(i.value),1)])):(d(),u("div",R,[e("div",q,[t[7]||(t[7]=e("p",{class:"title-md"},"Notice Info",-1)),t[8]||(t[8]=e("hr",{class:"mb-2"},null,-1)),e("div",z,[e("div",null,[t[1]||(t[1]=e("p",{class:"text-sm font-bold text-gray-600"},"Company:",-1)),e("p",G,n(((o=(a=s.value)==null?void 0:a.company)==null?void 0:o.name)||"N/A"),1)]),e("div",null,[t[2]||(t[2]=e("p",{class:"text-sm font-bold text-gray-600"},"Department:",-1)),e("p",J,[(d(!0),u(T,null,I((f=s.value)==null?void 0:f.departments,(r,L)=>{var w;return d(),u("span",{key:r.id},n(r==null?void 0:r.name)+" "+n(L<((w=s.value)==null?void 0:w.departments.length)-1?", ":""),1)}),128))])]),e("div",null,[t[3]||(t[3]=e("p",{class:"text-sm font-bold text-gray-600"},"Published Date:",-1)),e("p",K,n(y((b=s.value)==null?void 0:b.published_at)),1)]),e("div",null,[t[4]||(t[4]=e("p",{class:"text-sm font-bold text-gray-600"},"Expired Date:",-1)),e("p",O,n(y((_=s.value)==null?void 0:_.expired_at)),1)]),e("div",null,[t[5]||(t[5]=e("p",{class:"text-sm font-bold text-gray-600"},"File:",-1)),e("p",Q,n((k=s.value)==null?void 0:k.file),1)]),e("div",W,[t[6]||(t[6]=e("p",{class:"text-sm font-bold text-gray-600"},"Description / Body:",-1)),e("p",{class:"text-lg text-gray-800",innerHTML:(N=s.value)==null?void 0:N.description},null,8,X)])])]),e("div",Y,[U(e("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>c.value=r),type:"text",class:"w-full p-2 border rounded"},null,512),[[V,c.value]]),e("div",{class:"bg-blue-500 cursor-pointer text-white w-1/3 text-center px-4 py-2 rounded hover:bg-blue-600",onClick:F},n((h=s.value)!=null&&h.user_feedback?"Notice Feedback Updated":"Submit Notice Feedback"),1)])]))])])}}};export{ae as default};
