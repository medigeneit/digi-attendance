import{L as q}from"./LoaderView-BZAPVsCD.js";import{u as M,g as $,r as F,x as f,q as z,p as P,c as r,o as l,a as t,d as i,l as A,b as n,m as C,t as d,F as T,e as G,s as U,j as Y}from"./index-CTTU2Cjr.js";import{u as H}from"./exchange-_dEXii1V.js";import{_ as I}from"./FlexibleDatePicker-BpxMGaKu.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const J={class:"space-y-6 px-4 py-5"},K={class:"rounded-2xl border border-slate-200 bg-white px-4 py-4 shadow-sm md:px-6"},O={class:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between"},Q={class:"flex flex-wrap items-center gap-2"},W={class:"flex items-center gap-2"},X={key:0,class:"text-center py-10"},Z={key:1,class:"space-y-4"},tt={key:0,class:"rounded-2xl border border-dashed border-slate-300 bg-slate-50 p-6 text-center text-slate-600"},et={key:1,class:"rounded-2xl border border-slate-200 bg-white shadow-sm"},st={class:"flex items-center justify-between border-b border-slate-100 px-5 py-3"},ot={class:"text-sm font-semibold text-slate-600"},rt={class:"overflow-x-auto"},lt={class:"min-w-full divide-y divide-slate-100 text-sm"},dt={class:"divide-y divide-slate-100"},at={class:"px-4 py-3 font-semibold text-slate-600"},it={class:"px-4 py-3 text-slate-700"},nt={class:"px-4 py-3 text-slate-700"},pt={class:"px-4 py-3 text-slate-700"},ut={class:"px-4 py-3 text-slate-700"},ct={class:"px-4 py-3"},ft={key:0,class:"flex items-center gap-1 text-xs font-semibold text-indigo-600"},mt={key:1,class:"text-xs text-slate-400"},xt={class:"px-4 py-3"},yt={class:"px-4 py-3"},_t={class:"flex items-center justify-end gap-2"},bt=["onClick"],vt="shift",Vt={__name:"MyShiftExchangeList",setup(ht){const V=M(),a=H(),D=$(),p=new Date,u=F({year:p.getFullYear(),month:p.getMonth()+1,day:p.getDate()}),m=f(()=>{const o=u.value||{};return!o.year||!o.month?"":`${o.year}-${g(o.month)}`}),L=()=>{a.fetchExchanges({payload:{type:vt,date:m.value}})};function N(o){confirm("Are you sure you want to delete this application?")&&a.deleteExchange(o)}const x=o=>o?new Date(o).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):"N/A",g=o=>o.toString().padStart(2,"0"),c=f(()=>a.exchanges||[]),y=f(()=>Array.isArray(c.value)?c.value.length:0);z(m,o=>{o&&(a.selectedMonth=o,L())},{immediate:!0});const B=o=>{const s=(o||"").toLowerCase();return["approved","accepted"].includes(s)?"border border-emerald-200 bg-emerald-50 text-emerald-700":["rejected","declined","cancelled"].includes(s)?"border border-red-200 bg-red-50 text-red-700":s==="pending"||!s?"border border-amber-200 bg-amber-50 text-amber-800":"border border-slate-200 bg-slate-50 text-slate-800"},R=()=>{V.go(-1)};return(o,s)=>{var b;const _=P("RouterLink");return l(),r("div",J,[t("div",K,[t("div",O,[t("div",null,[t("button",{class:"btn-3 order-2 md:order-1",onClick:R},s[1]||(s[1]=[t("i",{class:"far fa-arrow-left"},null,-1),t("span",{class:"hidden md:inline-flex"},"Back",-1)]))]),s[3]||(s[3]=t("div",{class:"space-y-1"},[t("p",{class:"text-2xl font-semibold text-slate-900"},"Shift Exchanges Records")],-1)),t("div",Q,[i(_,{to:{name:"ShiftExchangeAdd"},class:"btn-2 order-1 md:order-2"},{default:A(()=>s[2]||(s[2]=[t("i",{class:"far fa-plus mr-1"},null,-1),n(" Request Shift Exchange ")])),_:1,__:[2]}),t("div",W,[i(I,{modelValue:u.value,"onUpdate:modelValue":s[0]||(s[0]=e=>u.value=e),"show-year":!1,"show-month":!0,"show-date":!1},null,8,["modelValue"])])])])]),(b=C(a))!=null&&b.loading?(l(),r("div",X,[i(q)])):(l(),r("div",Z,[y.value===0?(l(),r("div",tt,s[4]||(s[4]=[t("p",{class:"text-lg font-semibold text-slate-800"},"No exchanges yet",-1),t("p",{class:"text-sm text-slate-500"},"Try changing the month or create a new request",-1)]))):(l(),r("div",et,[t("div",st,[t("p",ot,"Showing "+d(y.value)+" records",1),s[5]||(s[5]=t("span",{class:"text-xs text-slate-500"},"Auto-updated",-1))]),t("div",rt,[t("table",lt,[s[9]||(s[9]=t("thead",{class:"bg-slate-50 text-[11px] uppercase tracking-wider text-slate-500"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left"},"#"),t("th",{class:"px-4 py-3 text-left"},"Created Date"),t("th",{class:"px-4 py-3 text-left"},"Exchange"),t("th",{class:"px-4 py-3 text-left"},"Current Shift"),t("th",{class:"px-4 py-3 text-left"},"Requested Shift"),t("th",{class:"px-4 py-3 text-left"},"Attachment"),t("th",{class:"px-4 py-3 text-left"},"Status"),t("th",{class:"px-4 py-3 text-right"},"Actions")])],-1)),t("tbody",dt,[(l(!0),r(T,null,G(c.value,(e,j)=>{var v,h,w,k,S,E;return l(),r("tr",{key:e==null?void 0:e.id,class:"hover:bg-slate-50 transition"},[t("td",at,d(j+1),1),t("td",it,d(x(e==null?void 0:e.created_at)),1),t("td",nt,d(x(e==null?void 0:e.exchange_date)),1),t("td",pt,d(((v=e==null?void 0:e.current_shift)==null?void 0:v.name)||((S=(k=(w=(h=C(D))==null?void 0:h.user)==null?void 0:w.current_shift)==null?void 0:k.shift)==null?void 0:S.name)),1),t("td",ut,d(((E=e==null?void 0:e.shift)==null?void 0:E.name)||"N/A"),1),t("td",ct,[e!=null&&e.attachment?(l(),r("div",ft,s[6]||(s[6]=[t("i",{class:"far fa-paperclip"},null,-1),n(" Attached ")]))):(l(),r("span",mt,"None"))]),t("td",xt,[t("span",{class:U(["inline-flex items-center rounded-full px-3 py-1 text-[11px] font-semibold tracking-wide",B(e==null?void 0:e.status)])},d((e==null?void 0:e.status)||"Pending"),3)]),t("td",yt,[t("div",_t,[i(_,{to:{name:"ExchangeShiftShow",params:{id:e==null?void 0:e.id}},class:"inline-flex items-center rounded-full border border-slate-200 px-3 py-1.5 text-xs font-semibold text-slate-600 transition hover:border-indigo-200 hover:text-indigo-700"},{default:A(()=>s[7]||(s[7]=[t("i",{class:"far fa-eye mr-1"},null,-1),n(" View ")])),_:2,__:[7]},1032,["to"]),e.status=="Pending"||!e.status?(l(),r("button",{key:0,type:"button",onClick:wt=>N(e==null?void 0:e.id),class:"inline-flex items-center rounded-full border border-red-200 px-3 py-1.5 text-xs font-semibold text-red-600 transition hover:border-red-300 hover:text-red-700"},s[8]||(s[8]=[t("i",{class:"far fa-trash mr-1"},null,-1),n(" Delete ")]),8,bt)):Y("",!0)])])])}),128))])])])]))]))])}}};export{Vt as default};
