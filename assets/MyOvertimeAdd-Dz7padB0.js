import{u as M,b as B,d as L,r as p,e as C,c as o,o as l,a as t,n as y,w as U,g as x,h as d,v as b,B as w,t as r,F as k,y as T,k as v}from"./index-CE4LFMzm.js";import{L as A}from"./LoaderView-agvE60ag.js";import{_ as F}from"./TimePickerAsFloatHour-ANw5LHpb.js";import{u as R}from"./attendance-B0Ln1ah8.js";import{u as I}from"./department-CaQXSVpd.js";import{u as W}from"./overtime-DaVAsDIp.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const H={class:"max-w-xl mx-auto p-4 space-y-4"},N={key:0,class:"text-center"},$={class:"grid grid-cols-2 gap-2 md:gap-4"},j=["max"],E={class:"input-1 w-full text-center px-1 bg-gray-300"},Y={class:"input-1 w-full text-center px-1 bg-gray-300"},z={class:"input-1 w-full text-center px-1 bg-gray-300"},G={class:"flex items-center"},J={class:"col-span-full"},K=["label"],P=["value"],Q={key:0,class:"text-red-500 text-sm"},ne={__name:"MyOvertimeAdd",setup(X){const f=M(),S=B(),g=I(),m=W(),c=R(),i=L(),D=p(!1),u=p({}),a=p({date:S.query.date||"",duty_type:"",request_overtime_hours:"",assigned_in_charge_user_id:"",work_details:""}),_=async()=>{await c.getMonthlyAttendanceByShift(i.user.id,h(a.value.date)),u.value=await c.getUserDailyLogsByDate(i.user.id,a.value.date)},h=n=>{const e=new Date(n),s=e.getFullYear(),O=String(e.getMonth()+1).padStart(2,"0");return`${s}-${O}`},V=()=>{f.go(-1)},q=async()=>{await m.createOvertime(a.value),f.push({name:"MyOvertimeList"})};return C(async()=>{var n;(n=i.user)!=null&&n.id||await i.fetchUser(),a.value.date&&await _(),await g.fetchDepartments("all")}),(n,e)=>(l(),o("div",H,[t("div",{class:"flex items-center justify-between gap-2"},[t("button",{class:"btn-3",onClick:V},e[5]||(e[5]=[t("i",{class:"far fa-arrow-left"},null,-1),t("span",{class:"hidden md:flex"},"Back",-1)])),e[6]||(e[6]=t("h1",{class:"title-md md:title-lg flex-wrap text-center"},"Overtime Request Form",-1))]),D.value?(l(),o("div",N,[y(A)])):(l(),o("form",{key:1,onSubmit:U(q,["prevent"]),class:"space-y-4 card-bg md:p-8 p-4 text-sm md:text-base"},[t("div",$,[t("div",null,[e[7]||(e[7]=t("label",{for:"date",class:"block text-sm font-medium"},"Date",-1)),d(t("input",{onChange:_,type:"date",id:"date","onUpdate:modelValue":e[0]||(e[0]=s=>a.value.date=s),class:"input-1 w-full",required:"",max:new Date(Date.now()-864e5).toISOString().split("T")[0]},null,40,j),[[b,a.value.date]])]),t("div",null,[e[9]||(e[9]=t("label",{for:"duty_type",class:"block text-sm font-medium"},"Duty Type",-1)),d(t("select",{id:"duty_type","onUpdate:modelValue":e[1]||(e[1]=s=>a.value.duty_type=s),class:"input-1 w-full",required:""},e[8]||(e[8]=[t("option",{value:"",selected:"",disabled:""},"--Duty Type--",-1),t("option",{value:"WL"},"WL",-1),t("option",{value:"HD"},"HD",-1),t("option",{value:"OVT"},"OVT",-1)]),512),[[w,a.value.duty_type]])]),t("div",null,[e[10]||(e[10]=t("span",{class:"block text-sm font-medium"},"Check In",-1)),t("div",E,r(u.value.entry_time||"--:--"),1)]),t("div",null,[e[11]||(e[11]=t("span",{class:"block text-sm font-medium"},"Check Out",-1)),t("div",Y,r(u.value.exit_time||"--:--"),1)]),t("div",null,[e[12]||(e[12]=t("span",{class:"block text-sm font-medium"},"Working Hour",-1)),t("div",z,r(u.value.working_hours||"-"),1)]),t("div",null,[e[13]||(e[13]=t("label",{for:"request_overtime_hours",class:"block text-sm font-medium"}," Request Overtime ",-1)),t("div",G,[y(F,{modelValue:a.value.request_overtime_hours,"onUpdate:modelValue":e[2]||(e[2]=s=>a.value.request_overtime_hours=s),"minute-interval":5,required:!0,"hour-min":1,"hour-max":24},null,8,["modelValue"])])]),t("div",J,[e[15]||(e[15]=t("label",{for:"assigned_in_charge_user_id",class:"block text-sm font-medium"}," In-Charge ",-1)),d(t("select",{id:"assigned_in_charge_user_id","onUpdate:modelValue":e[3]||(e[3]=s=>a.value.assigned_in_charge_user_id=s),class:"input-1 w-full",required:""},[e[14]||(e[14]=t("option",{value:"",selected:"",disabled:""},"--In-Charge--",-1)),(l(!0),o(k,null,T(v(g).departments,s=>(l(),o(k,{key:s.id},[s.in_charge?(l(),o("optgroup",{key:0,label:s.name},[t("option",{value:s.in_charge.id},r(s.in_charge.name),9,P)],8,K)):x("",!0)],64))),128))],512),[[w,a.value.assigned_in_charge_user_id]])])]),t("div",null,[e[16]||(e[16]=t("label",{for:"assigned_in_charge_user_id",class:"block text-sm font-medium"}," Details (Reason / Work description) ",-1)),d(t("textarea",{rows:"6","onUpdate:modelValue":e[4]||(e[4]=s=>a.value.work_details=s),class:"input-1 w-full",required:""},null,512),[[b,a.value.work_details]])]),e[17]||(e[17]=t("hr",null,null,-1)),v(m).error?(l(),o("div",Q,r(v(m).error),1)):x("",!0),e[18]||(e[18]=t("div",{class:"flex justify-center"},[t("button",{type:"submit",class:"btn-2"},"Submit")],-1))],32))]))}};export{ne as default};
