import{r as _,e as F,c as d,o as n,a as e,f as A,g as b,w as T,F as j,h as U,j as N,p as R,v as L,i as S,B as _e,t as w,k as Z,d as Re,m as ee,n as we,y as se,x as V,N as Te,K as qe,J as Ie,b as Se,u as De,z as W}from"./index-CQkOOsfR.js";import{L as J}from"./LoaderView-BF235sqP.js";import{O as K}from"./OverlyModal-DTOdsDei.js";import{_ as Ne}from"./ShareComponent-DocFy6Tl.js";import{_ as te}from"./DescriptionView-B9jDvLig.js";import{R as he}from"./RequiredIcon-YCebzkQx.js";import{f as re,s as Ee}from"./requirement-Dh0rPOxH.js";import{a as Ae,f as ne,d as je,u as Ue,b as Le,_ as Pe}from"./TaskAddForm-C6Twip0t.js";import{u as Ve}from"./department-BpX_945O.js";import{S as $e}from"./SelectDropdown-DWo3TfYY.js";import{_ as Q}from"./UserChip-Dvbw8lV-.js";import{u as Ce}from"./user-CjFBzBG3.js";import{_ as Fe}from"./TaskUserChip-DoiWs4PG.js";import{u as Oe}from"./useTaskStore-CoYLLgqk.js";import{_ as Me}from"./TaskSelectionInput-G4PCW3L2.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./company-D5pcCjQV.js";import"./url-CePbr-gY.js";import"./CompanyDepartmentSelectInput-Cr7MffzC.js";import"./SectionLoading-DemGe-8-.js";import"./TextWithHr-DQD3g6mc.js";import"./TaskUrgencyInput-DtKqhcq3.js";const Be={class:"sticky top-0 pt-4 bg-white z-10"},ze={class:"mb-4"},Ge={class:"block text-gray-600 text-sm mb-1 font-medium"},He={class:"mb-4"},We={class:"mb-4"},Ke={class:"mb-4"},Qe={class:"mb-4"},Je={class:"sticky bottom-0 bg-white py-4 border-t -mx-6 px-6"},Ye={key:0,class:"mb-4 text-red-500 font-medium"},Xe={key:1,class:"mb-4"},Ze={class:"flex items-center justify-between gap-4"},et=["disabled"],tt={__name:"RequirementDetailAddForm",props:{requirementId:{type:[Number,String],required:!0}},emits:["create","closeClick","error"],setup(f,{emit:x}){const g=f,c=x,i=Ve(),y=_(),a=_(""),u=_(),p=_({title:"",description:"",priority:"",better_to_complete_on:"",supervisor_id:null}),o=_([]);async function v(){var t,r;a.value="submitting";const s={...p.value};console.log({payload:s});try{const $=await Ae(g.requirementId,s);c("create",$),a.value="create"}catch($){a.value="error",u.value=((r=(t=$.response)==null?void 0:t.data)==null?void 0:r.message)||"Failed to create requirement detail",c("error",u.value)}}return F(async()=>{var t;const s=((t=(await re(g.requirementId)).data)==null?void 0:t.requirement)||{};o.value=await i.fetchDepartmentEmployee([s.from_department_id])}),(s,t)=>(n(),d("div",{class:"max-h-[90vh] overflow-auto w-full mx-auto bg-white shadow-lg rounded-lg p-6 pb-0 pt-0 relative",ref_key:"formContainerRef",ref:y},[e("div",Be,[t[7]||(t[7]=e("h2",{class:"text-2xl font-semibold text-gray-800"},"Add Requirement",-1)),t[8]||(t[8]=e("hr",{class:"mb-4"},null,-1)),e("div",{class:"text-purple-600/80 mb-4 text-xs border-b border-dashed",onClick:t[0]||(t[0]=T(r=>c("ok"),["prevent"]))}," Fields that must be filled in will be marked with an asterisk. ")]),e("form",{onSubmit:T(v,["prevent"]),class:"z-0"},[a.value!=="loading"?(n(),d(j,{key:0},[e("div",ze,[e("label",Ge,[t[9]||(t[9]=N("Title ")),R(he)]),U(e("input",{"onUpdate:modelValue":t[1]||(t[1]=r=>p.value.title=r),required:"",placeholder:"EnderRequirement detail title",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[L,p.value.title]])]),e("div",He,[t[10]||(t[10]=e("label",{class:"block text-gray-600 text-sm mb-1 font-medium"},"Details",-1)),U(e("textarea",{rows:"10","onUpdate:modelValue":t[2]||(t[2]=r=>p.value.description=r),placeholder:"Enter requirement description",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[L,p.value.description]])]),e("div",We,[t[12]||(t[12]=e("label",{class:"block text-gray-600 text-sm mb-1 font-medium"},"Supervisor",-1)),R($e,{modelValue:p.value.supervisor_id,"onUpdate:modelValue":t[3]||(t[3]=r=>p.value.supervisor_id=r),options:o.value,placeholder:"--NO SUPERVISOR--",containment:y.value,clearable:"",class:"h-10"},{"list-header":S(()=>t[11]||(t[11]=[e("div",{class:"px-3 pt-2 pb-1 shadow-md text-xs uppercase bg-gray-50 text-gray-500"}," Employees ",-1)])),option:S(({option:r})=>[R(Q,{user:r||{},class:"pr-5 -mx-1"},null,8,["user"])]),"selected-option":S(({option:r})=>[r?(n(),A(Q,{key:0,user:r||{},class:"pr-4"},null,8,["user"])):b("",!0)]),_:1},8,["modelValue","options","containment"])]),e("div",Ke,[t[14]||(t[14]=e("label",{class:"block text-gray-600 text-sm mb-1 font-medium"},"Priority ",-1)),U(e("select",{class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500","onUpdate:modelValue":t[4]||(t[4]=r=>p.value.priority=r)},t[13]||(t[13]=[e("option",{value:""},"NORMAL",-1),e("option",null,"IMPORTANT",-1),e("option",null,"URGENT",-1)]),512),[[_e,p.value.priority]])]),e("div",Qe,[t[15]||(t[15]=e("label",{class:"block text-gray-600 text-sm mb-1 font-medium"},"Better to Complete ",-1)),U(e("input",{type:"date","onUpdate:modelValue":t[5]||(t[5]=r=>p.value.better_to_complete_on=r),placeholder:"EnderRequirement detail title",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[L,p.value.better_to_complete_on]])])],64)):b("",!0),e("div",Je,[u.value?(n(),d("div",Ye,w(u.value),1)):b("",!0),u.value?(n(),d("hr",Xe)):b("",!0),e("div",Ze,[e("button",{type:"button",onClick:t[6]||(t[6]=T(r=>c("closeClick"),["prevent"])),class:"bg-gray-200 hover:bg-gray-300 text-gray-700 font-semibold px-5 py-2 rounded transition"}," Cancel "),e("button",{disabled:a.value=="loading"||a.value=="submitting",type:"submit",class:"bg-blue-500 hover:bg-blue-600 text-white font-semibold px-5 py-2 rounded transition"},w(a.value=="submitting"?"Saving...":"Add Requirement"),9,et)])])],32),a.value==="loading"||a.value==="submitting"?(n(),A(J,{key:0,class:"z-20 absolute inset-0 flex items-center justify-center bg-opacity-30"})):b("",!0)],512))}},st={class:"max-h-[90vh] overflow-auto w-full mx-auto bg-white shadow-lg rounded-lg p-6 pb-0 pt-0 relative"},rt={class:"mb-4"},nt={class:"font-semibold"},it={class:"mb-4"},lt={class:"line-clamp-2"},at={key:1,class:"min-h-40"},ot={class:"sticky bottom-0 bg-white py-4 border-t -mx-6 px-6"},dt={key:0,class:"mb-4 text-red-500 font-medium"},ut={key:1,class:"mb-4"},mt={class:"flex items-center justify-between gap-4"},pt=["disabled"],ct={__name:"RequirementDetailDeleteForm",props:{requirementId:{type:[Number,String],required:!0},detailId:{type:[Number,String],required:!0}},emits:["delete","closeClick","error"],setup(f,{emit:x}){const g=f,c=x,i=Ce(),y=_(null),a=_(""),u=_(),p=_([]);async function o(){var v,s;a.value="submitting";try{const t=await je(g.requirementId,g.detailId);c("delete",t),a.value="create"}catch(t){a.value="error",u.value=((s=(v=t.response)==null?void 0:v.data)==null?void 0:s.message)||"Failed to update requirement detail: "+t,c("error",u.value)}}return F(async()=>{var v,s,t;a.value="loading";try{p.value=await i.fetchDepartmentWiseEmployees(),y.value=(v=(await ne(g.requirementId,g.detailId)).data)==null?void 0:v.detail}catch(r){u.value=((t=(s=r.response)==null?void 0:s.data)==null?void 0:t.message)||"Failed to fetch requirement detail"}finally{a.value=""}}),(v,s)=>{var t,r;return n(),d("div",st,[s[4]||(s[4]=e("div",{class:"sticky top-0 -mx-6 px-6 z-10 bg-gray-50"},[e("h2",{class:"text-xl font-semibold text-gray-800 py-2"},"Delete Requirement Details"),e("hr",{class:"mb-4 -mx-6"})],-1)),e("form",{onSubmit:T(o,["prevent"]),class:"z-0"},[a.value!=="loading"?(n(),d(j,{key:0},[e("div",rt,[s[1]||(s[1]=e("div",{class:"block text-gray-600 text-sm mb-1 font-medium"},"Title",-1)),e("div",nt,w((t=y.value)==null?void 0:t.title),1)]),e("div",it,[s[2]||(s[2]=e("div",{class:"block text-gray-600 text-sm mb-1 font-medium"},"Description",-1)),e("div",lt,w((r=y.value)==null?void 0:r.description),1)]),s[3]||(s[3]=e("div",{class:"my-8 text-center text-xl text-red-600"},"Are you sure want to delete?",-1))],64)):(n(),d("div",at)),e("div",ot,[u.value?(n(),d("div",dt,w(u.value),1)):b("",!0),u.value?(n(),d("hr",ut)):b("",!0),e("div",mt,[e("button",{type:"button",onClick:s[0]||(s[0]=T($=>c("closeClick"),["prevent"])),class:"bg-gray-200 hover:bg-gray-300 text-gray-700 font-semibold px-5 py-2 rounded transition"}," Cancel "),e("button",{disabled:a.value=="loading"||a.value=="submitting",type:"submit",class:"bg-red-700 hover:bg-red-500 text-white font-semibold px-5 py-2 rounded transition"},w(a.value=="submitting"?"Deleting...":"Delete"),9,pt)])])],32),a.value==="loading"||a.value==="submitting"?(n(),A(J,{key:0,class:"z-20 absolute inset-0 flex items-center justify-center bg-opacity-30"})):b("",!0)])}}},vt={class:"sticky top-0 pt-4 bg-white z-10"},bt={class:"mb-4"},ft={class:"block text-gray-600 text-sm mb-1 font-medium"},yt={class:"mb-4"},gt={class:"mb-4"},xt={key:0,class:"relative w-full"},kt={key:0,class:"absolute right-1 text-xl top-0 bottom-0 flex items-center"},_t={class:"mb-4"},wt={class:"mb-4"},qt={class:"sticky bottom-0 bg-white py-4 border-t -mx-6 px-6"},ht={key:0,class:"mb-4 text-red-500 font-medium"},$t={key:1,class:"mb-4"},Ct={class:"flex items-center justify-between gap-4"},Rt=["disabled"],Tt={__name:"RequirementDetailEditForm",props:{requirementId:{type:[Number,String],required:!0},detailId:{type:[Number,String],required:!0}},emits:["update","closeClick","error"],setup(f,{emit:x}){const g=f,c=x,i=_(),y=Ce(),a=_(null),u=_(""),p=_(),o=_({title:"",description:"",priority:"",better_to_complete_on:"",supervisor_id:null}),v=_([]);async function s(){var r,$;u.value="submitting";const t={...o.value};try{const k=await Ue(g.requirementId,g.detailId,t);c("update",k),u.value="create"}catch(k){u.value="error",p.value=(($=(r=k.response)==null?void 0:r.data)==null?void 0:$.message)||"Failed to update requirement detail",c("error",p.value)}}return F(async()=>{var t,r,$,k,D,E,m;u.value="loading";try{v.value=await y.fetchDepartmentWiseEmployees(),await y.fetchTypeWiseEmployees({type:"academy_body,doctor,executive"}),a.value=(t=(await ne(g.requirementId,g.detailId)).data)==null?void 0:t.detail,o.value={title:(r=a.value)==null?void 0:r.title,description:($=a.value)==null?void 0:$.description,priority:(k=a.value)==null?void 0:k.priority,supervisor_id:(D=a.value)==null?void 0:D.supervisor_id};const q=new Date(a.value.better_to_complete_on);o.value.better_to_complete_on=q.toISOString().split("T")[0]}catch(q){p.value=((m=(E=q.response)==null?void 0:E.data)==null?void 0:m.message)||"Failed to fetch requirement detail"}finally{u.value=""}}),(t,r)=>{var $;return n(),d("div",{ref_key:"formContainerRef",ref:i,class:"max-h-[90vh] w-full mx-auto overflow-auto bg-white shadow-lg rounded-lg p-6 pb-0 pt-0 relative"},[e("div",vt,[r[8]||(r[8]=e("h2",{class:"text-2xl font-semibold text-gray-800"},"Edit Requirement",-1)),r[9]||(r[9]=e("hr",{class:"mb-4"},null,-1)),e("div",{class:"text-purple-600/80 mb-4 text-xs border-b border-dashed",onClick:r[0]||(r[0]=T(k=>c("ok"),["prevent"]))}," Fields that must be filled in will be marked with an asterisk. ")]),e("form",{onSubmit:T(s,["prevent"]),class:"z-0"},[u.value!=="loading"?(n(),d(j,{key:0},[e("div",bt,[e("label",ft,[r[10]||(r[10]=N("Title ")),R(he)]),U(e("input",{"onUpdate:modelValue":r[1]||(r[1]=k=>o.value.title=k),required:"",placeholder:"EnderRequirement detail title",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[L,o.value.title]])]),e("div",yt,[r[11]||(r[11]=e("label",{class:"block text-gray-600 text-sm mb-1 font-medium"},"Description",-1)),U(e("textarea",{rows:"10","onUpdate:modelValue":r[2]||(r[2]=k=>o.value.description=k),placeholder:"Enter requirement description",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[L,o.value.description]])]),e("div",gt,[r[12]||(r[12]=e("label",{class:"block text-gray-600 text-sm mb-1 font-medium"},"Supervisor",-1)),R($e,{modelValue:o.value.supervisor_id,"onUpdate:modelValue":r[4]||(r[4]=k=>o.value.supervisor_id=k),options:[...Z(y).users||[],...(Z(y).users||[]).find(k=>{var D,E;return k.id==((E=(D=a.value)==null?void 0:D.supervisor)==null?void 0:E.id)})?[]:[($=a.value)==null?void 0:$.supervisor]],containment:i.value,placeholder:"--NO SUPERVISOR--",class:"h-10"},{option:S(({option:k})=>[R(Q,{user:k||{}},null,8,["user"])]),"selected-option":S(({option:k})=>[k?(n(),d("div",xt,[R(Q,{user:k||{}},null,8,["user"]),o.value.supervisor_id?(n(),d("div",kt,[e("button",{onClick:r[3]||(r[3]=T(D=>o.value.supervisor_id=null,["prevent"])),class:"text-gray-6 font-semibold 00 hover:text-red-700"}," × ")])):b("",!0)])):b("",!0)]),_:1},8,["modelValue","options","containment"])]),e("div",_t,[r[14]||(r[14]=e("label",{class:"block text-gray-600 text-sm mb-1 font-medium"},"Priority ",-1)),U(e("select",{class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500","onUpdate:modelValue":r[5]||(r[5]=k=>o.value.priority=k)},r[13]||(r[13]=[e("option",{value:null},"NORMAL",-1),e("option",null,"IMPORTANT",-1),e("option",null,"URGENT",-1)]),512),[[_e,o.value.priority]])]),e("div",wt,[r[15]||(r[15]=e("label",{class:"block text-gray-600 text-sm mb-1 font-medium"},"Better to Complete ",-1)),U(e("input",{type:"date","onUpdate:modelValue":r[6]||(r[6]=k=>o.value.better_to_complete_on=k),placeholder:"EnderRequirement detail title",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[L,o.value.better_to_complete_on]])])],64)):b("",!0),e("div",qt,[p.value?(n(),d("div",ht,w(p.value),1)):b("",!0),p.value?(n(),d("hr",$t)):b("",!0),e("div",Ct,[e("button",{type:"button",onClick:r[7]||(r[7]=T(k=>c("closeClick"),["prevent"])),class:"btn-3"},"Cancel"),e("button",{disabled:u.value=="loading"||u.value=="submitting",type:"submit",class:"btn-2"},w(u.value=="submitting"?"Saving...":"Edit"),9,Rt)])])],32),u.value==="loading"||u.value==="submitting"?(n(),A(J,{key:0,class:"z-20 absolute inset-0 flex items-center justify-center bg-opacity-30"})):b("",!0)],512)}}},It=["rowspan"],St={class:"text-2xl font-medium"},Dt=["rowspan"],Nt={class:"text-lg font-semibold mb-2 flex items-start gap-3"},Et={key:0},At={key:0,class:"mb-5"},jt=["innerHTML"],Ut={class:"flex items-end"},Lt={key:0,class:"mt-4 flex justify-between items-end print:pb-0"},Pt={class:""},Vt={key:1,class:"ml-auto flex gap-6 items-center"},Ft=["rowspan"],Ot={class:"text-center print:text-xs"},Mt={class:"border-2 border-gray-700 p-3 text-center"},Bt=["title"],zt={class:"border-2 border-gray-700 p-3"},Gt={class:"whitespace-nowrap text-center print:whitespace-break-spaces"},Ht={key:0,class:"print:text-xs"},Wt={key:1,class:"text-gray-500"},Kt={key:0,colspan:"2",class:"border-2 border-gray-700 p-3 text-center"},Qt={key:1,class:"text-red-400"},Jt={key:2,class:"text-blue-400"},Yt={key:0},Xt={colspan:"2",class:"border-2 border-gray-700 p-3 text-center"},Zt={key:1,class:"text-red-400"},es={key:2,class:"text-blue-400"},ts={__name:"RequirementDetailTableRow",props:{detail:{type:Object},requirement:{type:Object},serial:{type:Number},isPrinting:{type:Boolean}},emits:["editClick","deleteClick","taskCreateClick"],setup(f,{emit:x}){const g=f,c=x,i=Re(),y=_(""),a=ee(()=>{var p,o,v;return((o=(p=g.detail)==null?void 0:p.tasks)==null?void 0:o.length)>0?(v=g.detail)==null?void 0:v.tasks:[{id:0}]});function u(){var p,o,v,s,t;if(i.user.role!=="super_admin"&&((p=i.user)==null?void 0:p.id)!==((v=(o=g.requirement)==null?void 0:o.to_department)==null?void 0:v.incharge_id))return alert(`You can't create or assign task for this requirement. 
Only ${(t=(s=g.requirement)==null?void 0:s.to_department)==null?void 0:t.name}'s In charge can create or assign.`);c("taskCreateClick",g.detail)}return(p,o)=>{const v=we("RouterLink");return n(),d(j,null,[(n(!0),d(j,null,se(a.value,(s,t)=>{var r,$,k,D,E,m,q,I,h;return n(),d("tr",{key:s.id,class:"group/item border text-gray-800 py-4 shadow-sm mb-4 px-4 rounded-md hover:bg-blue-50"},[t===0?(n(),d(j,{key:0},[e("td",{class:"border-2 border-gray-700 p-3 align-top",rowspan:((($=(r=f.detail)==null?void 0:r.tasks)==null?void 0:$.length)||1)+(f.isPrinting?0:1)},[e("span",St,w(f.serial),1)],8,It),e("td",{class:"border-2 border-gray-700 p-3",rowspan:(((D=(k=f.detail)==null?void 0:k.tasks)==null?void 0:D.length)||1)+(f.isPrinting?0:1)},[e("div",null,[e("div",Nt,[R(te,{"line-clamp":"3",class:"grow"},{default:S(()=>[N(w(f.detail.title),1)]),btnText:S(({lineClampClass:l})=>[N(w(l?"More":"Less"),1)]),_:1}),f.detail.priority?(n(),d("div",Et,[e("span",{class:V(["font-semibold text-sm",{"text-yellow-600 ":f.detail.priority=="IMPORTANT","text-red-700 ":f.detail.priority=="URGENT"}])},w(f.detail.priority),3)])):b("",!0)]),o[3]||(o[3]=e("hr",{class:"mb-4 -mx-4"},null,-1)),f.detail.description?(n(),d("div",At,[o[2]||(o[2]=e("div",{class:"text-gray-400 mr-2 text-xs uppercase font-semibold"},"Description",-1)),R(te,{"line-clamp":4,"class-name":{button:"group-hover/item:underline"}},{default:S(()=>[e("p",{innerHTML:f.detail.description,class:"text-justify"},null,8,jt)]),_:1})])):b("",!0)]),e("div",Ut,[f.detail.supervisor?(n(),d("div",Lt,[e("div",Pt,[o[4]||(o[4]=e("div",{class:"text-gray-400 mr-2 text-xs uppercase font-semibold"},"Supervisor:",-1)),R(Fe,{user:f.detail.supervisor},null,8,["user"])])])):b("",!0),y.value!="loading"&&!((E=f.requirement)!=null&&E.status)||((q=(m=Z(i))==null?void 0:m.user)==null?void 0:q.role)=="super_admin"?(n(),d("div",Vt,[e("button",{class:"btn-2",onClick:o[0]||(o[0]=T(l=>c("editClick",f.detail),["prevent"]))},o[5]||(o[5]=[e("i",{class:"fas fa-edit"},null,-1),N("Edit ")])),e("button",{class:"btn-2-red",onClick:o[1]||(o[1]=T(l=>c("deleteClick",f.detail),["prevent"]))},o[6]||(o[6]=[e("i",{class:"fas fa-trash-alt"},null,-1),N("Delete ")]))])):b("",!0)])],8,Dt),e("td",{class:"border-2 border-gray-700 p-3 whitespace-nowrap print:whitespace-break-spaces print:px-0",rowspan:(((h=(I=f.detail)==null?void 0:I.tasks)==null?void 0:h.length)||1)+(f.isPrinting?0:1)},[e("div",Ot,w(new Date(f.detail.better_to_complete_on).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",weekday:"short"})),1)],8,Ft)],64)):b("",!0),s.id?(n(),d(j,{key:1},[e("td",Mt,[R(v,{title:s.title,to:{name:"RequirementTaskShow",params:{id:s.id}},class:"hover:underline text-gray-900 hover:text-blue-600 whitespace-nowrap block",target:"_blank"},{default:S(()=>[N(w(s.id)+" ",1),e("i",{title:s.status,class:V(["ml-1",{"fad fa-exclamation-circle text-red-600":s.status=="PENDING","fad fa-exclamation-square text-yellow-600":s.status=="IN_PROGRESS","fad fa-check-circle text-green-600":s.status=="COMPLETED"}])},null,10,Bt)]),_:2},1032,["title","to"])]),e("td",zt,[e("div",Gt,[s.deadline?(n(),d("div",Ht,w(new Date(s.deadline).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",weekday:"short"})),1)):(n(),d("div",Wt,"-"))])])],64)):(n(),d(j,{key:2},[f.isPrinting?(n(),d("td",Kt,[f.requirement.status=="approved"?(n(),d("button",{key:0,onClick:T(u,["prevent"]),class:"print:hidden border-2 border-transparent group-hover/item:bg-blue-200 hover:border-blue-700 text-blue-500 hover:text-white hover:!bg-blue-500 rounded-md px-4 py-1 whitespace-nowrap"},o[7]||(o[7]=[e("i",{class:"fas fa-plus-circle"},null,-1),N(" Create / Assign Task ")]))):f.requirement.status=="rejected"?(n(),d("div",Qt,"Task Rejected")):(n(),d("div",Jt,"Approval Pending"))])):b("",!0)],64))])}),128)),f.isPrinting?b("",!0):(n(),d("tr",Yt,[e("td",Xt,[f.requirement.status=="approved"?(n(),d("button",{key:0,onClick:T(u,["prevent"]),class:"print:hidden border-2 border-transparent group-hover/item:bg-blue-200 hover:border-blue-700 text-blue-500 hover:text-white hover:!bg-blue-500 rounded-md px-4 py-1 whitespace-nowrap"},o[8]||(o[8]=[e("i",{class:"fas fa-plus-circle"},null,-1),N(" Create / Assign Task ")]))):f.requirement.status=="rejected"?(n(),d("div",Zt,"Task Rejected")):(n(),d("div",es,"Approval Pending"))])]))],64)}}},ss={class:"sticky top-0 pt-4 bg-white z-10"},rs={class:"mb-4"},ns={class:"mb-4"},is={class:"sticky bottom-0 bg-white py-4 border-t -mx-6 px-6"},ls={key:0,class:"mb-4 text-red-500 font-medium"},as={key:1,class:"mb-4"},os={class:"flex items-center justify-between gap-4"},ds=["disabled"],us={__name:"RequirementFeedbackEditForm",props:{requirementId:{type:[Number,String],required:!0},detailId:{type:[Number,String],required:!0}},emits:["update","closeClick","error"],setup(f,{emit:x}){const g=f,c=x,i=_(),y=_(null),a=_(""),u=_(),p=_({feedback:""});async function o(){var v,s;a.value="submitting";try{const t=await Le(g.requirementId,g.detailId,p.value.feedback);c("update",t),a.value="create"}catch(t){a.value="error",u.value=((s=(v=t.response)==null?void 0:v.data)==null?void 0:s.message)||"Failed to update requirement detail",c("error",u.value)}}return F(async()=>{var v,s,t,r;a.value="loading";try{await re(g.requirementId),y.value=(v=(await ne(g.requirementId,g.detailId)).data)==null?void 0:v.detail,p.value={feedback:(s=y.value)==null?void 0:s.feedback}}catch($){u.value=((r=(t=$.response)==null?void 0:t.data)==null?void 0:r.message)||"Failed to fetch requirement detail"}finally{a.value=""}}),(v,s)=>{var t;return n(),d("div",{ref_key:"formContainerRef",ref:i,class:"max-h-[90vh] w-full mx-auto overflow-auto bg-white shadow-lg rounded-lg p-6 pb-0 pt-0 relative"},[e("div",ss,[s[3]||(s[3]=e("h2",{class:"text-2xl font-semibold text-gray-800"},"Requirement Feedback",-1)),s[4]||(s[4]=e("hr",{class:"mb-4"},null,-1)),e("div",{class:"text-purple-600/80 mb-4 text-xs border-b border-dashed",onClick:s[0]||(s[0]=T(r=>c("ok"),["prevent"]))}," Fields that must be filled in will be marked with an asterisk. ")]),e("form",{onSubmit:T(o,["prevent"]),class:"z-0"},[a.value!=="loading"?(n(),d(j,{key:0},[e("div",rs,[s[5]||(s[5]=e("label",{class:"block text-gray-600 text-sm font-medium"},"Title ",-1)),R(te,{"line-clamp":"1",className:{paragraph:"whitespace-pre-wrap text-justify ",button:"mt-0"}},{default:S(()=>{var r;return[N(w((r=y.value)==null?void 0:r.title),1)]}),_:1})]),e("div",ns,[s[6]||(s[6]=e("label",{class:"block text-gray-600 text-sm mb-1 font-medium"},"Feedback",-1)),U(e("textarea",{rows:"5","onUpdate:modelValue":s[1]||(s[1]=r=>p.value.feedback=r),placeholder:"Enter requirement feedback",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[L,p.value.feedback]])])],64)):b("",!0),e("div",is,[u.value?(n(),d("div",ls,w(u.value),1)):b("",!0),u.value?(n(),d("hr",as)):b("",!0),e("div",os,[e("button",{type:"button",onClick:s[2]||(s[2]=T(r=>c("closeClick"),["prevent"])),class:"btn-3"},"Cancel"),e("button",{disabled:a.value=="loading"||a.value=="submitting",type:"submit",class:"btn-2"},w(a.value=="submitting"?"Saving...":(t=y.value)!=null&&t.feedback?"Update Feedback":"Add Feedback"),9,ds)])])],32),a.value==="loading"||a.value==="submitting"?(n(),A(J,{key:0,class:"z-20 absolute inset-0 flex items-center justify-center bg-opacity-30"})):b("",!0)],512)}}},ms={class:"flex justify-center items-center"},ps={class:"modal-card"},cs=["required"],vs={class:"flex"},bs={class:"flex justify-between gap-2 mt-4"},fs=["disabled"],ys=["disabled"],gs={__name:"RequirementSubmissionHandler",props:{requirementId:{type:[String,Number],required:!0}},emits:["loading","success","error"],setup(f,{emit:x}){const g=f,c=x,i=_(255),y=ee(()=>i.value-v.value.length),a=Te(),u=_(null),p=_(null),o=_(null),v=_(""),s=_(!1),t=ee(()=>o.value!==null);function r(m){o.value=m,v.value="",E()}function $(){o.value=null,v.value=""}async function k(){var m,q;if(o.value==="reject"&&!v.value)return a.error("Rejection Reason is required!");if(typeof g.onSubmit=="function")return g.onSubmit({note:v.value,action:o.value});c("loading",!0),s.value=!0;try{await Ee(g.requirementId,{note:v.value}),c("success"),$()}catch(I){return c("error",I),a.error(((q=(m=I==null?void 0:I.response)==null?void 0:m.data)==null?void 0:q.message)||"Submission failed!")}finally{c("loading",!1),s.value=!1}}function D(m){var q,I;t.value&&(m.key==="ArrowLeft"?(q=p.value)==null||q.focus():m.key==="ArrowRight"&&((I=u.value)==null||I.focus()))}function E(){Ie(()=>{var m;(m=u.value)==null||m.focus()})}return F(()=>{window.addEventListener("keydown",D)}),qe(()=>{window.removeEventListener("keydown",D)}),(m,q)=>(n(),d("div",null,[e("div",ms,[e("button",{onClick:q[0]||(q[0]=I=>r("accept"))},q[3]||(q[3]=[e("span",{class:"btn-2"},[e("span",{class:"fas fa-paper-plane"}),e("span",{class:"hidden md:inline"},"Submit Requirement")],-1)]))]),t.value?(n(),d("div",{key:0,class:"fixed inset-0 z-50 flex justify-center items-center bg-black/50",onClick:T($,["self"])},[e("div",ps,[q[4]||(q[4]=e("h3",{class:"title-lg"},"Requirement Submission",-1)),e("div",null,[U(e("textarea",{"onUpdate:modelValue":q[1]||(q[1]=I=>v.value=I),rows:"4",placeholder:"Note...",class:"w-full border rounded-lg p-2 text-gray-700",required:o.value==="reject",onInput:q[2]||(q[2]=I=>v.value.length>i.value?v.value=v.value.slice(0,i.value):null)},null,40,cs),[[L,v.value]]),e("div",vs,[e("div",{class:V(["ml-auto inline-block text-sm text-gray-500",v.value.length>=i.value?"text-red-500":""])}," left "+w(y.value)+"/"+w(i.value)+" words ",3)])]),e("div",bs,[e("button",{ref_key:"cancelBtnRef",ref:p,class:"btn-3 focus:ring-2 ring-offset-2 disabled:opacity-30",onClick:$,disabled:s.value}," Cancel ",8,fs),e("button",{ref_key:"confirmBtnRef",ref:u,class:V(["focus:ring-2 ring-offset-2 disabled:opacity-30",o.value==="reject"?"btn-2-red":"btn-2-green"]),onClick:k,disabled:s.value}," Confirm Submission ",10,ys)])])])):b("",!0)]))}},xs={class:"flex items-center gap-6 justify-center my-16"},ks={key:0,class:"border rounded-md"},_s={__name:"RequirementTaskCreateOrAssign",props:{fromDepartmentId:{type:Number},requirementDetail:{type:Object}},emits:["addNewTaskClick","cancelClick","assignTask"],setup(f,{emit:x}){const g=f,c=x,i=Oe(),y=_(""),a=_(null),u=_(""),p=_(!1);async function o(){await i.setTaskRequirement(u.value,g.requirementDetail.id),c("assignTask")}return(v,s)=>(n(),d("div",{class:V(["text-left p-4",[y.value&&!a.value?"min-h-[400px]":""]])},[e("div",xs,[e("button",{onClick:s[0]||(s[0]=T(t=>c("addNewTaskClick"),["prevent"])),class:"btn-3"},"Add New Task"),s[5]||(s[5]=e("span",null,"or",-1)),e("button",{class:V({"btn-3":y.value!=="direct-assign","btn-2":y.value=="direct-assign"}),onClick:s[1]||(s[1]=T(()=>y.value="direct-assign",["prevent"]))}," Assign Task ",2)]),y.value&&!a.value?(n(),d("div",ks,[e("form",{onSubmit:T(o,["prevent"]),class:"p-4 flex items-end"},[R(Me,{class:"flex-grow mr-4 h-12",taskId:u.value,"onUpdate:taskId":s[2]||(s[2]=t=>u.value=t),show:p.value,"onUpdate:show":s[3]||(s[3]=t=>p.value=t),isOnlyMyTask:!1,taskQueryParams:{"from-department-id":f.fromDepartmentId},filterTasks:t=>!t.requirement_detail_id,onAddNewTaskClick:s[4]||(s[4]=t=>c("addNewTaskClick"))},null,8,["taskId","show","taskQueryParams","filterTasks"]),s[6]||(s[6]=e("div",{class:"flex justify-center"},[e("button",{class:"btn-2 h-12 rounded-md"},"Save")],-1))],32)])):b("",!0)],2))}},ws={class:"flex flex-col items-center gax-x-1 justify-between"},qs={key:0},hs={key:1},$s={class:"text-base text-gray-900 font-semibold"},Cs={class:"ml-2"},Rs={key:0,class:"fas fa-check-circle ml-2 text-green-500"},X={__name:"RequirementApprovalItem",props:{requirement:{type:Object,required:!0},approvalType:{type:String,required:!0}},setup(f){const x=f,g=ee(()=>{var p,o,v,s,t,r,$,k,D,E,m,q,I,h,l,Y,O,M,B,z,G,H;let c=null,i=null,y=null,a="",u=!1;return x.approvalType==="from_department_in_charge"&&(c=(p=x.requirement)==null?void 0:p.from_department,i=(v=(o=x.requirement)==null?void 0:o.from_department)==null?void 0:v.in_charge,y=(t=(s=x.requirement)==null?void 0:s.from_department)==null?void 0:t.in_charge,a="In Charge",u=!!((r=x.requirement)!=null&&r.status&&(($=x.requirement)!=null&&$.submission_date))),x.approvalType==="from_department_coordinator"&&(c=(k=x.requirement)==null?void 0:k.from_department,i=(E=(D=x.requirement)==null?void 0:D.from_department)==null?void 0:E.coordinator,y=(m=x.requirement)==null?void 0:m.from_coordinator,u=!!((q=x.requirement)!=null&&q.from_coordinator),a="Coordinator"),x.approvalType==="to_department_in_charge"&&(c=(I=x.requirement)==null?void 0:I.to_department,i=(l=(h=x.requirement)==null?void 0:h.to_department)==null?void 0:l.in_charge,y=(Y=x.requirement)==null?void 0:Y.to_in_charge,u=!!((O=x.requirement)!=null&&O.to_incharge),a="In Charge"),x.approvalType==="to_department_coordinator"&&(c=(M=x.requirement)==null?void 0:M.to_department,i=(z=(B=x.requirement)==null?void 0:B.to_department)==null?void 0:z.coordinator,y=(G=x.requirement)==null?void 0:G.to_coordinator,u=!!((H=x.requirement)!=null&&H.to_coordinator),a="Coordinator"),{department:c,department_user:i,approval_user:y,userType:a,approved:u}});return(c,i)=>{var y,a;return n(),d("div",ws,[g.value.department_user?(n(),d("div",qs,[R(Q,{user:g.value.department_user,"avatar-size":"xsmall"},null,8,["user"])])):(n(),d("div",hs,i[0]||(i[0]=[e("span",{class:"italic text-xs text-gray-400"},"N/A",-1)]))),i[1]||(i[1]=e("hr",{class:"my-2 border-gray-600 w-64"},null,-1)),e("div",$s,[e("span",null,w(((y=g.value.department)==null?void 0:y.short_name)||((a=g.value.department)==null?void 0:a.name)),1),e("span",Cs,w(g.value.userType),1),g.value.approved?(n(),d("span",Rs)):b("",!0)])])}}},Ts={class:"container mx-auto p-6 print:p-0 w-full print:max-w-full"},Is={class:"bg-white rounded shadow print:shadow-none p-4 print:p-0 relative mb-6 print:mb-0"},Ss={class:"flex items-start"},Ds={class:"mb-4 text-lg print:black print:font-bold"},Ns={class:"ml-auto print:hidden flex gap-2 items-center"},Es={class:"mb-4 flex items-center gap-1 print:mb-1"},As={class:"font-bold print:text-gray-900"},js={class:"mb-3 flex items-center gap-3 print:mb-1"},Us={class:"print:text-gray-900"},Ls={key:0,class:"mb-3 flex items-center gap-3 print:mb-1"},Ps={class:"flex items-center gap-2 print:text-gray-900 flex-wrap"},Vs={key:1,class:"mb-3 flex items-center gap-3 print:mb-1"},Fs={class:"print:text-gray-900"},Os={key:0,class:"overflow-x-auto print:overflow-visible"},Ms={class:"w-full table-auto print:table-fixed"},Bs={colspan:"2",class:"w-[30%] border-2 border-gray-800 text-center text-gray-800 print:text-black text-base font-semibold whitespace-nowrap px-3 py-1 print:whitespace-normal"},zs={class:""},Gs={class:"p-3 border-2 border-gray-800",colspan:"5"},Hs={class:"font-semibold text-gray-500 print:text-gray-800 text-sm mb-1"},Ws={key:0},Ks=["innerHTML"],Qs=["onClick"],Js={key:1,class:"mt-8 border rounded-md p-8 flex items-start justify-between bg-gray-50 print:hidden"},Ys={class:"flex flex-col items-end"},Xs={class:"mt-12 mb-8"},Zs={class:"whitespace-nowrap border-gray-200 grid grid-cols-2 mb-12 items-center"},er={class:"whitespace-nowrap border-gray-200 grid grid-cols-2 gap-2 items-center"},tr={key:2,class:"mt-2 text-right print:hidden"},hr={__name:"RequirementShow",setup(f){const x=Se(),g=De(),c=_(""),i=_(null),y=W({open:!1}),a=W({detail:null,open:!1}),u=W({detail:null,open:!1}),p=W({detail:null,open:!1}),o=_(!1),v=()=>o.value=!0,s=()=>o.value=!1;F(async()=>{await t(),window.addEventListener("beforeprint",v),window.addEventListener("afterprint",s)}),qe(()=>{window.removeEventListener("beforeprint",v),window.removeEventListener("afterprint",s)});async function t(){var h;c.value="loading",i.value=(h=(await re(x.params.id)).data)==null?void 0:h.requirement,c.value=""}function r(h){console.log({detail:h}),m.modalShown=!0,m.from_department_id=i.value.from_department_id,m.to_department_id=i.value.to_department_id,m.taskDefaultValues={title:"",description:"",from_department_id:i.value.from_department_id,to_department_id:i.value.to_department_id,is_important:(h==null?void 0:h.priority)=="IMPORTANT",is_urgent:(h==null?void 0:h.priority)=="URGENT",supervisor_ids:h!=null&&h.supervisor_id?[h==null?void 0:h.supervisor_id]:[]},m.requirementDetail=h}function $(){y.open=!0}function k(h){a.open=!0,a.detail=h}function D(h){p.open=!0,p.detail=h}function E(){setTimeout(()=>window.print()),o.value=!0}const m=W({parentId:null,modalShown:!1,requirementId:0,taskDefaultValues:{},requirementDetail:null,creating:!1});async function q(){m.parentId=0,m.parentId=null,m.modalShown=!1,m.requirementDetail=null,c.value="loading",await t()}async function I(){m.parentId=null,m.modalShown=!1,m.requirementDetail=null,m.creating=!1}return(h,l)=>{var O,M,B,z,G,H,ie,le,ae,oe,de,ue,me,pe,ce,ve,be,fe,ye;const Y=we("RouterLink");return n(),d("div",Ts,[y.open?(n(),A(K,{key:0,class:"*:max-w-4xl"},{default:S(()=>[R(tt,{requirementId:i.value.id,onCloseClick:l[0]||(l[0]=C=>y.open=!1),onCreate:l[1]||(l[1]=async()=>{y.open=!1,await t()})},null,8,["requirementId"])]),_:1})):b("",!0),a.open?(n(),A(K,{key:1},{default:S(()=>{var C;return[R(Tt,{requirementId:i.value.id,detailId:(C=a.detail)==null?void 0:C.id,onCloseClick:l[2]||(l[2]=P=>a.open=!1),onUpdate:l[3]||(l[3]=async()=>{a.open=!1,await t()})},null,8,["requirementId","detailId"])]}),_:1})):b("",!0),u.open?(n(),A(K,{key:2},{default:S(()=>{var C;return[R(us,{requirementId:i.value.id,detailId:(C=u.detail)==null?void 0:C.id,onCloseClick:l[4]||(l[4]=P=>u.open=!1),onUpdate:l[5]||(l[5]=async()=>{u.open=!1,await t()})},null,8,["requirementId","detailId"])]}),_:1})):b("",!0),p.open?(n(),A(K,{key:3},{default:S(()=>{var C;return[R(ct,{requirementId:i.value.id,detailId:(C=p.detail)==null?void 0:C.id,onCloseClick:l[6]||(l[6]=P=>p.open=!1),onDelete:l[7]||(l[7]=async()=>{p.open=!1,await t()})},null,8,["requirementId","detailId"])]}),_:1})):b("",!0),m.modalShown?(n(),A(K,{key:4,class:"*:relative"},{default:S(()=>{var C,P;return[e("button",{onClick:T(I,["prevent"]),class:"absolute right-3 top-2 text-xl text-red-500 hover:text-red-400"},l[10]||(l[10]=[e("i",{class:"fas fa-times-circle"},null,-1)])),m!=null&&m.creating?b("",!0):(n(),A(_s,{key:0,"from-department-id":(C=i.value)==null?void 0:C.from_department_id,requirementDetail:m==null?void 0:m.requirementDetail,onCancelClick:I,onAddNewTaskClick:l[8]||(l[8]=()=>{m.modalShown=!0,m.creating=!0}),onAssignTask:q},null,8,["from-department-id","requirementDetail"])),m!=null&&m.creating?(n(),A(Pe,{key:1,requirementDetailId:(P=m==null?void 0:m.requirementDetail)==null?void 0:P.id,requirementId:i.value.id,onClose:I,onTaskCreated:q,defaultValues:m.taskDefaultValues,readonlyFields:{from_department_id:!0,to_department_id:!0}},null,8,["requirementDetailId","requirementId","defaultValues"])):b("",!0)]}),_:1})):b("",!0),e("div",Is,[e("div",Ss,[e("div",Ds,[l[11]||(l[11]=e("div",{class:"text-gray-800 leading-none"},"To",-1)),e("div",null,w((M=(O=i.value)==null?void 0:O.to_department)==null?void 0:M.name),1)]),e("div",Ns,[(((B=i.value)==null?void 0:B.details)||[]).length>0?(n(),d("button",{key:0,class:"btn-3 font-semibold !pl-2 !pr-4",onClick:T(E,["prevent"])},l[12]||(l[12]=[e("i",{class:"fad fa-print text-xl"},null,-1),N("Print ")]))):b("",!0),e("button",{class:"btn-3",onClick:l[9]||(l[9]=T(()=>Z(g).back(),["prevent"]))},"Back"),R(Y,{class:"btn-2",to:`/requirements/edit/${(z=i.value)==null?void 0:z.id}`},{default:S(()=>l[13]||(l[13]=[N("Edit")])),_:1,__:[13]},8,["to"])])]),l[28]||(l[28]=e("div",{class:"text-center text-xl font-bold mb-2 underline"},"Requirement Form",-1)),e("div",Es,[l[14]||(l[14]=e("div",{class:"text-gray-500 text-sm"},"Requirement ID:",-1)),e("div",As,w((G=i.value)==null?void 0:G.id),1)]),e("div",js,[l[15]||(l[15]=e("div",{class:"text-gray-500 text-sm"},"From",-1)),e("div",Us,w((ie=(H=i.value)==null?void 0:H.from_department)==null?void 0:ie.name),1)]),((ae=(le=i.value)==null?void 0:le.website_tags)==null?void 0:ae.length)>0?(n(),d("div",Ls,[l[16]||(l[16]=e("div",{class:"text-gray-500 text-sm"},"Website",-1)),e("div",Ps,[(n(!0),d(j,null,se(((oe=i.value)==null?void 0:oe.website_tags)||[],C=>(n(),d("div",{key:C.id,class:"border px-2 rounded-md bg-gray-50 shadow-sm whitespace-nowrap"},w(C.name),1))),128))])])):b("",!0),(de=i.value)!=null&&de.submission_date?(n(),d("div",Vs,[l[17]||(l[17]=e("div",{class:"text-gray-500 text-sm"},"Submission Date",-1)),e("div",Fs,w(new Date((ue=i.value)==null?void 0:ue.submission_date).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})),1)])):b("",!0),l[29]||(l[29]=e("hr",{class:"mb-4"},null,-1)),e("div",null,[l[27]||(l[27]=e("div",{class:"flex items-end mb-3"},[e("h2",{class:"text-xl font-semibold"},"Requirements"),e("div",{class:"ml-auto print:hidden flex gap-2 text-sm"})],-1)),(((me=i.value)==null?void 0:me.details)||[]).length>0?(n(),d("div",Os,[e("table",Ms,[e("thead",null,[e("tr",null,[l[18]||(l[18]=e("th",{rowspan:"2",class:"border-2 border-gray-800 text-left px-4 print:px-2 text-gray-800 print:text-black text-xl font-semibold whitespace-nowrap w-[8%]"}," SL ",-1)),l[19]||(l[19]=e("th",{rowspan:"2",class:"border-2 border-gray-800 text-center text-gray-800 print:text-black text-base font-semibold whitespace-nowrap print:whitespace-normal w-[65%]"}," Requirement Details ",-1)),l[20]||(l[20]=e("th",{rowspan:"2",class:"border-2 border-gray-800 text-center text-gray-800 print:text-black text-base px-3 font-semibold whitespace-nowrap print:whitespace-normal print:p-0 w-[15%]"}," Better To Complete ",-1)),e("th",Bs," For '"+w(((pe=i.value.to_department)==null?void 0:pe.short_name)||((ce=i.value.to_department)==null?void 0:ce.name))+"' Use ",1)]),l[21]||(l[21]=e("tr",null,[e("td",{class:"whitespace-nowrap border-2 border-gray-800 text-center text-gray-800 print:text-black text-sm font-semibold print:text-xs"}," Task No "),e("td",{class:"border-2 border-gray-800 text-center text-gray-800 print:text-black text-sm font-semibold whitespace-nowrap p-3 print:text-xs print:p-0"}," Expected Date ")],-1))]),e("tbody",null,[(n(!0),d(j,null,se(((ve=i.value)==null?void 0:ve.details)||[],(C,P)=>{var ge,xe,ke;return n(),d(j,{key:C.id},[R(ts,{requirement:i.value,detail:C,serial:P+1,onEditClick:k,onDeleteClick:D,onTaskCreateClick:r,isPrinting:o.value},null,8,["requirement","detail","serial","isPrinting"]),e("tr",zs,[e("td",Gs,[e("div",Hs," '"+w(((ge=i.value.to_department)==null?void 0:ge.short_name)||((xe=i.value.to_department)==null?void 0:xe.name))+"' Feedback ",1),c.value!="loading"&&((ke=i.value)!=null&&ke.status)?(n(),d("div",Ws,[C!=null&&C.feedback?(n(),A(te,{key:0,lineClamp:"2",className:{button:"  underline"},class:"mb-4 print:mb-0"},{default:S(()=>[e("p",{class:"text-sky-800 text-sm text-justify",innerHTML:C==null?void 0:C.feedback},null,8,Ks)]),_:2},1024)):b("",!0),e("div",null,[e("button",{class:"btn-3 print:hidden",onClick:T(()=>{u.open=!0,u.detail=C},["prevent"])},w(C.feedback?"Update Feedback":"Add feedback"),9,Qs)])])):b("",!0)])])],64)}),128))])])])):b("",!0),c.value!="loading"&&!((be=i.value)!=null&&be.status)?(n(),d("div",Js,[e("button",{class:"btn-2 pl-2 text-base",onClick:T($,["prevent"])},l[22]||(l[22]=[e("i",{class:"fad fa-plus-circle text-2xl mr-2"},null,-1),N("Add Requirement ")])),e("div",Ys,[R(gs,{"requirement-id":(fe=i.value)==null?void 0:fe.id,onSuccess:t},{heading:S(()=>l[23]||(l[23]=[N(" Requirement Submission ")])),acceptButtonLabel:S(()=>l[24]||(l[24]=[e("span",{class:"btn-2 pl-2 text-base"},[e("i",{class:"fad fa-paper-plane text-lg mr-2"}),N("Submit Requirement ")],-1)])),submitButtonLabel:S(()=>l[25]||(l[25]=[N(" Submit Requirement ")])),_:1},8,["requirement-id"])])])):b("",!0),e("div",Xs,[e("div",Zs,[R(X,{requirement:i.value,"approval-type":"from_department_in_charge"},null,8,["requirement"]),R(X,{requirement:i.value,"approval-type":"from_department_coordinator"},null,8,["requirement"])]),e("div",er,[R(X,{requirement:i.value,"approval-type":"to_department_in_charge"},null,8,["requirement"]),R(X,{requirement:i.value,"approval-type":"to_department_coordinator"},null,8,["requirement"])])]),c.value!="loading"&&!((ye=i.value)!=null&&ye.status)?(n(),d("div",tr,l[26]||(l[26]=[e("p",{class:"text-yellow-800 text-sm"},[e("span",{class:"fas fa-exclamation-circle"}),N(" After submitting you cannot add requirement no more ")],-1)]))):b("",!0)]),c.value==="loading"?(n(),A(J,{key:2,class:"absolute inset-0 bg-opacity-90"})):b("",!0)]),R(Ne)])}}};export{hr as default};
