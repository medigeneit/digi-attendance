import{i as B,r as m,b as C,c,a as t,j as M,t as r,F as T,q as V,e as I,d as U,v as j,o as d,f as E}from"./index-DlEd1BlV.js";import{L as H}from"./LoaderView-U-TKEv4z.js";import{u as P}from"./notice-CcwnRWqZ.js";import{S as q}from"./sweetalert2.esm.all-89IKscqO.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const A={class:"my-container space-y-6"},R={class:"card-bg p-6"},Y={key:1,class:"text-center text-red-500"},$={key:2,class:"grid gap-2"},z={class:"bg-gray-100 p-4 rounded-lg"},G={class:"grid md:grid-cols-2 gap-4"},J={class:"text-lg text-gray-800"},K={class:"text-lg text-gray-800"},O={class:"text-lg text-gray-800"},Q={class:"text-lg text-gray-800"},W={class:"col-span-full"},X=["innerHTML"],Z={class:"md:flex justify-center mt-8 gap-4"},ne={__name:"NoticeDetails",setup(ee){const g=P(),f=B(),y=E(),u=m(""),s=m(null),p=m(!0),n=m(null),x=a=>new Date(a).toLocaleString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}),h=async()=>{var a,e,o;try{p.value=!0,n.value=null;const l=y.params.id;s.value=await g.fetchNoticeDetails(l),u.value=(a=s.value.user_feedback)==null?void 0:a.feedback}catch(l){n.value=((o=(e=l.response)==null?void 0:e.data)==null?void 0:o.message)||"Failed to load notice details",f.error(n.value)}finally{p.value=!1}},S=async()=>{var a,e;if(u.value)try{const o=y.params.id,l={feedback:u.value};await g.createNoticeFeedback(o,l),q.fire({position:"top-end",icon:"success",title:"Your feedback has been saved",showConfirmButton:!1,timer:1500})}catch(o){n.value=((e=(a=o.response)==null?void 0:a.data)==null?void 0:e.message)||"Failed to load notice details",f.error(n.value)}finally{p.value=!1}};C(async()=>{await h()});const L=async a=>{window.open(a,"_blank")};return(a,e)=>{var o,l,b,k,w,_,N,D;return d(),c("div",A,[t("div",R,[e[10]||(e[10]=t("h2",{class:"title-lg text-center"},"Notice Details",-1)),p.value?(d(),M(H,{key:0,class:"shadow-none"})):n.value?(d(),c("div",Y,[t("p",null,r(n.value),1)])):(d(),c("div",$,[t("div",z,[e[8]||(e[8]=t("p",{class:"title-md"},"Notice Info",-1)),e[9]||(e[9]=t("hr",{class:"mb-2"},null,-1)),t("div",G,[t("div",null,[e[2]||(e[2]=t("p",{class:"text-sm font-bold text-gray-600"},"Company:",-1)),t("p",J,r(((l=(o=s.value)==null?void 0:o.company)==null?void 0:l.name)||"N/A"),1)]),t("div",null,[e[3]||(e[3]=t("p",{class:"text-sm font-bold text-gray-600"},"Department:",-1)),t("p",K,[(d(!0),c(T,null,V((b=s.value)==null?void 0:b.departments,(i,v)=>{var F;return d(),c("span",{key:i.id},r(i==null?void 0:i.name)+" "+r(v<((F=s.value)==null?void 0:F.departments.length)-1?", ":""),1)}),128))])]),t("div",null,[e[4]||(e[4]=t("p",{class:"text-sm font-bold text-gray-600"},"Published Date:",-1)),t("p",O,r(x((k=s.value)==null?void 0:k.published_at)),1)]),t("div",null,[e[5]||(e[5]=t("p",{class:"text-sm font-bold text-gray-600"},"Expired Date:",-1)),t("p",Q,r(x((w=s.value)==null?void 0:w.expired_at)),1)]),t("div",null,[e[6]||(e[6]=t("p",{class:"text-sm font-bold text-gray-600"},"File:",-1)),(_=s.value)!=null&&_.file?(d(),c("button",{key:0,onClick:e[0]||(e[0]=i=>{var v;return L((v=s.value)==null?void 0:v.file)}),class:"btn-2"}," Download File ")):I("",!0)]),t("div",W,[e[7]||(e[7]=t("p",{class:"text-sm font-bold text-gray-600"},"Description / Body:",-1)),t("p",{class:"text-lg text-gray-800",innerHTML:(N=s.value)==null?void 0:N.description},null,8,X)])])]),t("div",Z,[U(t("input",{"onUpdate:modelValue":e[1]||(e[1]=i=>u.value=i),type:"text",class:"w-full p-2 border rounded",placeholder:"Please enter your feedback"},null,512),[[j,u.value]]),t("div",{class:"bg-blue-500 cursor-pointer text-white w-1/3 text-center px-4 py-2 rounded hover:bg-blue-600",onClick:S},r((D=s.value)!=null&&D.user_feedback?"Notice Feedback Updated":"Submit Notice Feedback"),1)])]))])])}}};export{ne as default};
