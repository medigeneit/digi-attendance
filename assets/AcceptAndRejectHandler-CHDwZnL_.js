import{R as C,ad as B,r as d,x as g,h as N,y as S,c as l,o as c,a as t,k as r,s as x,w as T,l as M,t as w,v as q,b as _,A as V}from"./index-DKNJ0-JN.js";const z={key:0,class:"font-bold text-lg text-green-600"},D={key:1,class:"btn-2"},E={key:0,class:"text-base"},L={key:1,class:"btn-1"},I={class:"modal-card"},U={class:"title-lg"},$=["placeholder","required"],F={class:"flex justify-between gap-2 mt-4"},H={class:"capitalize hidden md:inline"},O={__name:"AcceptAndRejectHandler",props:{notificationType:{type:String,required:!0},applicationId:{type:[String,Number],required:!0},onSuccess:{type:Function,default:null},variant:{type:Number,default:1}},setup(a){const u=a,j=C(),f=B(),p=d(null),m=d(null),n=d(null),o=d(""),y=g(()=>n.value!==null),R=g(()=>n.value==="accept"?"Accept Application":"Reject Application");function k(s){(s==="accept"||s==="reject")&&(n.value=s,o.value="",A())}function v(){n.value=null,o.value=""}async function h(){if(!f.loading){if(n.value==="reject"&&!o.value)return j.error("Rejection Reason is required!");await f.updateSpecificNotification(u.notificationType,u.applicationId,n.value,o.value),u.onSuccess?u.onSuccess():f.fetchCountNotifications(),v()}}function b(s){var e,i;y.value&&(s.key==="ArrowLeft"?(e=m.value)==null||e.focus():s.key==="ArrowRight"&&((i=p.value)==null||i.focus()))}function A(){V(()=>{var s;(s=p.value)==null||s.focus()})}return N(()=>{window.addEventListener("keydown",b)}),S(()=>{window.removeEventListener("keydown",b)}),(s,e)=>(c(),l("div",null,[t("div",{class:x(["flex justify-center items-center",a.variant===1?"gap-5":"gap-2"])},[t("button",{onClick:e[0]||(e[0]=i=>k("accept"))},[a.variant===1?(c(),l("span",z,"✔")):r("",!0),a.variant===2?(c(),l("span",D,e[3]||(e[3]=[t("span",{class:"text-base scale-110"},"✔",-1),t("span",{class:"hidden md:inline"},"Approve",-1)]))):r("",!0)]),t("button",{onClick:e[1]||(e[1]=i=>k("reject"))},[a.variant===1?(c(),l("span",E,"❌")):r("",!0),a.variant===2?(c(),l("span",L,e[4]||(e[4]=[t("span",{class:"text-base"},"❌",-1),t("span",{class:"hidden md:inline"},"Reject",-1)]))):r("",!0)])],2),y.value?(c(),l("div",{key:0,class:"fixed inset-0 z-50 flex justify-center items-center bg-black/50",onClick:T(v,["self"])},[t("div",I,[t("h3",U,w(R.value),1),M(t("textarea",{"onUpdate:modelValue":e[2]||(e[2]=i=>o.value=i),rows:"7",placeholder:n.value==="accept"?"Accept Note...":"Rejection Reason...",class:"w-full border rounded-lg p-2 text-gray-700",required:n.value==="reject"},null,8,$),[[q,o.value]]),t("div",F,[t("button",{ref_key:"cancelBtnRef",ref:m,class:"btn-3 focus:ring-2 ring-offset-2",onClick:v}," Cancel ",512),t("button",{ref_key:"confirmBtnRef",ref:p,class:x(["focus:ring-2 ring-offset-2",n.value==="reject"?"btn-2-red":"btn-2-green"]),onClick:h},[e[5]||(e[5]=_(" Confirm ")),t("span",H,w(n.value),1)],2)])])])):r("",!0)]))}};export{O as _};
