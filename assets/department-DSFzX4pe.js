import{B as $,r as m,x as v,C as c}from"./index-BaPt3XBf.js";const I=$("department",()=>{const p=m([]),u=m([]),d=m(null),n=m(!1),s=m(null),i=async(a=null)=>{var r,t;n.value=!0,s.value=null;try{const e=await c.get("/departments",{params:{company_id:a}});u.value=e.data}catch(e){s.value=((t=(r=e.response)==null?void 0:r.data)==null?void 0:t.message)||"ডিপার্টমেন্ট লোড করতে ব্যর্থ হয়েছে।",console.error("Error fetching departments:",e)}finally{n.value=!1}},f=async a=>{var r,t;n.value=!0,s.value=null;try{const e=await c.get(`/departments/${a}`);d.value=e.data}catch(e){s.value=((t=(r=e.response)==null?void 0:r.data)==null?void 0:t.message)||`ডিপার্টমেন্ট (ID: ${a}) লোড করতে ব্যর্থ হয়েছে।`,console.error(`Error fetching department with id ${a}:`,e)}finally{n.value=!1}},y=async(a,r)=>{var t,e,o;n.value=!0,s.value=null;try{console.log({department_ids:a,line_type:r});const l=await c.get("department-employees",{params:{department_ids:a,line_type:r}});return p.value=((t=l==null?void 0:l.data)==null?void 0:t.employees)||[],p.value}catch(l){s.value=((o=(e=l.response)==null?void 0:e.data)==null?void 0:o.message)||"ডিপার্টমেন্টের এম্প্লয়ি লোড করতে ব্যর্থ হয়েছে।",console.error("Error fetching department employees:",l)}finally{n.value=!1}},g=async(a,r)=>{var t,e,o;n.value=!0,s.value=null;try{console.log({department_ids:a,line_type:r});const l=await c.get("department-active-employees",{params:{department_ids:a,line_type:r}});return p.value=((t=l==null?void 0:l.data)==null?void 0:t.employees)||[],p.value}catch(l){s.value=((o=(e=l.response)==null?void 0:e.data)==null?void 0:o.message)||"ডিপার্টমেন্টের এম্প্লয়ি লোড করতে ব্যর্থ হয়েছে।",console.error("Error fetching department employees:",l)}finally{n.value=!1}},h=async a=>{var r,t;n.value=!0,s.value=null;try{console.log({data:a});const e=await c.post("/departments",a);return u.value.push(e.data),e.data}catch(e){s.value=((t=(r=e.response)==null?void 0:r.data)==null?void 0:t.message)||"ডিপার্টমেন্ট তৈরি করতে ব্যর্থ হয়েছে।",console.error("Error creating department:",e)}finally{n.value=!1}},D=async(a,r)=>{var t,e;n.value=!0,s.value=null;try{const o=await c.put(`/departments/${a}`,r),l=u.value.findIndex(E=>E.id===a);return l!==-1&&(u.value[l]=o.data),o.data}catch(o){s.value=((e=(t=o.response)==null?void 0:t.data)==null?void 0:e.message)||`ডিপার্টমেন্ট (ID: ${a}) আপডেট করতে ব্যর্থ হয়েছে।`,console.error(`Error updating department with id ${a}:`,o)}finally{n.value=!1}},w=async a=>{var r,t;n.value=!0,s.value=null;try{await c.delete(`/departments/${a}`),u.value=u.value.filter(e=>e.id!==a)}catch(e){s.value=((t=(r=e.response)==null?void 0:r.data)==null?void 0:t.message)||`ডিপার্টমেন্ট (ID: ${a}) মুছতে ব্যর্থ হয়েছে।`,console.error(`Error deleting department with id ${a}:`,e)}finally{n.value=!1}};return{departments:v(()=>u.value),department:v(()=>d.value),loading:v(()=>n.value),error:v(()=>s.value),employees:p,fetchDepartmentEmployee:y,fetchDepartmentActiveEmployee:g,fetchDepartments:i,fetchDepartment:f,createDepartment:h,updateDepartment:D,deleteDepartment:w}});export{I as u};
