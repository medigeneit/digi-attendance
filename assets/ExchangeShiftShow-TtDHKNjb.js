import{_ as m}from"./ApprovalItem-CGfQ4p-J.js";import{L as nt}from"./LoaderView-CFTMT42R.js";import{_ as st}from"./ScreenshotCapture-Y9lPWpPi.js";import{_ as lt}from"./ShareComponent-DtJHenuN.js";import{u as it,f as ot,g as dt,Q as rt,r as J,x as ut,h as ct,c as r,o,a as t,i as pt,d,b as s,t as l,j as K,s as mt,m as vt,l as ft}from"./index-D_Kvc_TG.js";import{u as gt}from"./exchange-BLBmYYUw.js";import"./AcceptAndRejectHandler-DU2cYvOZ.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const ht={class:"my-container max-w-3xl space-y-6"},xt={key:1,class:"bg-white rounded p-4 md:p-8 text-sm md:text-base space-y-1",id:"leave-application"},yt={class:"flex md:justify-end"},_t={class:"font-medium"},bt={class:"gap-y-1"},wt={class:"gap-y-1"},kt={class:"grid md:grid-cols-2 pt-2"},At={class:"col-span-2 pt-2"},Dt={class:"grid md:grid-cols-3 gap-x-4 py-1 md:justify-between items-end md:items-start"},jt={class:"md:col-span-2 print:col-span-2"},Nt={class:"text-center"},St={class:"title-md"},Ft={key:0},Et={class:"grid grid-cols-2 text-sm md:text-base md:grid-cols-3 md:gap-x-4 gap-y-14 pt-14 items-end"},Bt={class:"print:hidden"},Rt={key:0,class:"mb-2"},Ct=["href"],Vt={key:1,class:"text-center text-lg italic text-gray-400"},Lt={key:2},Qt={__name:"ExchangeShiftShow",setup(Tt){const O=it(),v=ot(),u=gt(),X=dt(),f=rt(),g=J(!0),h=J(null),a=ut(()=>u.exchange);ct(async()=>{const{id:n}=v.params;try{await u.fetchExchange(n)}catch(e){console.error("Failed to fetch exchange details:",e)}finally{g.value=!1}});const Y=async n=>{const e=n.target.files[0];if(e){const p=new FormData;p.append("file",e);const i=await u.fetchFileUpload(p);h.value=i==null?void 0:i.url,i!=null&&i.url?(Z(),f.success("File uploaded successfully")):f.error("Failed to upload file")}},Z=async()=>{try{const n={attachment:h.value};await u.uploadAttachmentExchange(v.params.id,n)}catch(n){console.error("Failed to reject short leave:",n),alert("Failed to reject short leave.")}};function tt(){window.print()}const et=()=>O.go(-1),x=n=>n?new Date(n).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):"",at=n=>new Date(n).toLocaleDateString("en-US",{weekday:"long"}),c=async()=>{await u.fetchExchange(v.params.id)};return(n,e)=>{var p,i,y,_,b,w,k,A,D,j,N,S,F,E,B,R,C,V,L,T,U,$,P,z,G,H,I,M,Q,W,q;return o(),r("div",ht,[t("div",{class:"flex items-center justify-between gap-2 print:hidden"},[t("button",{class:"btn-3",onClick:et},e[0]||(e[0]=[t("i",{class:"far fa-arrow-left"},null,-1),t("span",{class:"hidden md:flex"},"Back",-1)])),e[2]||(e[2]=t("h1",{class:"title-lg text-center"},"Exchange Details",-1)),t("div",null,[t("button",{class:"btn-2",onClick:tt},e[1]||(e[1]=[t("i",{class:"far fa-print"},null,-1),s(" Print ")]))])]),g.value?(o(),pt(nt,{key:0})):(o(),r("div",xt,[e[15]||(e[15]=t("div",null,[t("h1",{class:"title-lg text-center"},"Shift Exchange Application")],-1)),t("div",yt,[t("div",null,"Date: "+l(x((p=a.value)==null?void 0:p.created_at)),1)]),t("div",null,[t("p",_t,[e[3]||(e[3]=s(" Name: ")),t("b",null,l((y=(i=a.value)==null?void 0:i.user)==null?void 0:y.name),1)]),t("div",bt,[t("p",null,[e[4]||(e[4]=s(" Designation: ")),t("b",null,l((w=(b=(_=a.value)==null?void 0:_.user)==null?void 0:b.designation)==null?void 0:w.title),1)])]),t("div",wt,[t("p",null,[e[5]||(e[5]=s(" Department: ")),t("b",null,l((D=(A=(k=a.value)==null?void 0:k.user)==null?void 0:A.company)==null?void 0:D.name),1)])])]),t("div",kt,[t("div",null,[e[6]||(e[6]=t("b",null,"Exchange Day:",-1)),s(" "+l(at((j=a.value)==null?void 0:j.exchange_date)),1)]),t("div",null,[e[7]||(e[7]=t("b",null,"Date:",-1)),s(" "+l(x((N=a.value)==null?void 0:N.exchange_date)),1)]),t("div",null,[e[8]||(e[8]=t("b",null,"From:",-1)),s(" "+l((F=(S=a.value)==null?void 0:S.current_shift)==null?void 0:F.name),1)]),t("div",null,[e[9]||(e[9]=t("b",null,"To:",-1)),s(" "+l((B=(E=a.value)==null?void 0:E.shift)==null?void 0:B.name),1)]),t("div",At,[e[10]||(e[10]=t("b",null,"Reason:",-1)),s(" "+l(((R=a.value)==null?void 0:R.reason)||"N/A"),1)])]),t("div",Dt,[t("div",jt,[t("div",null,[e[11]||(e[11]=t("b",null,"Works in Hand:",-1)),s(" "+l(((C=a.value)==null?void 0:C.works_in_hand)||"N/A"),1)])]),d(m,{application:a.value,type:"shift_exchange_applications",item:"handover",onAction:c,class:"pt-10 ml-auto hidden md:block"},null,8,["application"])]),e[16]||(e[16]=t("hr",{class:"my-2"},null,-1)),t("div",Nt,[t("h3",St,[e[12]||(e[12]=s(" Approvals ")),t("span",{class:mt({"text-yellow-500":((V=a.value)==null?void 0:V.status)==="Pending","text-green-500":((L=a.value)==null?void 0:L.status)==="Approved","text-red-500":((T=a.value)==null?void 0:T.status)==="Rejected"})}," ("+l(((U=a.value)==null?void 0:U.status)||"N/A")+") ",3)]),(($=a.value)==null?void 0:$.status)==="Rejected"?(o(),r("div",Ft,[t("div",null,[e[13]||(e[13]=t("b",null,"Rejected By:",-1)),s(" "+l(((z=(P=a.value)==null?void 0:P.rejected_by_user)==null?void 0:z.name)||"N/A"),1)]),t("div",null,[e[14]||(e[14]=t("b",null,"Rejection Reason:",-1)),s(" "+l(((G=a.value)==null?void 0:G.rejection_reason)||"N/A"),1)])])):K("",!0)]),t("div",Et,[d(m,{application:a.value,type:"shift_exchange_applications",item:"handover",onAction:c,class:"md:hidden"},null,8,["application"]),d(m,{application:a.value,type:"shift_exchange_applications",item:"in_charge",onAction:c},null,8,["application"]),d(m,{application:a.value,type:"shift_exchange_applications",item:"recommend_by",onAction:c},null,8,["application"]),d(m,{application:a.value,type:"shift_exchange_applications",item:"approved_by",onAction:c},null,8,["application"])])])),t("div",Bt,[t("div",null,[e[18]||(e[18]=t("label",null,"Attachment",-1)),(H=a.value)!=null&&H.attachment&&typeof((I=a.value)==null?void 0:I.attachment)=="string"?(o(),r("div",Rt,[t("a",{href:(M=a.value)==null?void 0:M.attachment,target:"_blank",class:"text-blue-500 underline"}," View Current File ",8,Ct)])):(o(),r("div",Vt,"No attachment")),((W=(Q=vt(X))==null?void 0:Q.user)==null?void 0:W.id)===((q=a.value)==null?void 0:q.user_id)?(o(),r("div",Lt,[t("input",{type:"file",onChange:Y,class:"w-full p-2 border rounded"},null,32),e[17]||(e[17]=t("p",{class:"text-sm text-gray-600 mt-1"},"Selected File",-1))])):K("",!0)])]),d(lt,null,{default:ft(()=>[d(st,{targetId:"leave-application",platform:"whatsapp"})]),_:1})])}}};export{Qt as default};
