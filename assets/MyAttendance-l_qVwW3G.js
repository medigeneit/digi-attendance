import{u as P,r as W,n as j,b as F,i as q,c as p,a as t,t as n,d as z,v as I,j as a,h as r,p as O,F as R,q as G,g as J,o as u,s as c}from"./index-CWWZybLD.js";import{u as K}from"./attendance-BPTObKlk.js";import{L as Q}from"./LoaderView-CGMTMlXz.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const X={class:"px-4 space-y-4"},Y={class:"md:flex items-center justify-between gap-2"},Z={class:"title-lg md:title-lg flex-wrap text-center"},tt={class:"flex gap-4"},st={class:"grid md:grid-cols-2 gap-4 text-sm"},et={class:"card-bg p-4 gap-1"},nt={class:"grid md:grid-cols-2"},rt={class:"card-bg p-4 gap-1"},at={class:"grid md:grid-cols-2"},ot={key:1,class:"space-y-4"},lt={class:"overflow-x-auto card-bg"},dt={class:"min-w-full table-auto border-collapse border border-gray-300 bg-white"},it={class:"text-center text-xs"},ut={class:"border px-1 py-0.5"},pt={class:"border px-1 py-0.5"},mt=["title"],yt=["title"],ct=["title"],_t={class:"border px-1 py-0.5"},bt={class:"border px-1 py-0.5"},gt={class:"border px-1 py-0.5"},kt={__name:"MyAttendance",setup(ht){const _=J(),l=P(),o=K(),d=W(o.selectedMonth),$=j(()=>{if(!d.value)return"";const[i,s]=d.value.split("-");return new Date(i,s-1).toLocaleDateString("en-US",{month:"long",year:"numeric"})}),m=async()=>{var i;(i=l.user)!=null&&i.id&&d.value&&await o.getMonthlyAttendanceByShift(l.user.id,d.value)};F(async()=>{l.isAuthenticated?(await l.fetchUser(),m()):_.push("/login")}),q(d,async i=>{o.selectedMonth=i,await m()});const H=()=>_.go(-1);return(i,s)=>{var y,b,g,h,v,x,f,w,k,D,S,A,L,M,B,T,E,C,N,U,V;return u(),p("div",X,[t("div",Y,[t("button",{class:"btn-3",onClick:H},s[1]||(s[1]=[t("i",{class:"far fa-arrow-left"},null,-1),t("span",{class:"hidden md:flex"},"Back",-1)])),t("h1",Z," My Attendance of "+n($.value),1),t("div",tt,[t("div",null,[z(t("input",{id:"monthSelect",type:"month","onUpdate:modelValue":s[0]||(s[0]=e=>d.value=e),onChange:m,class:"input-1"},null,544),[[I,d.value]])])])]),t("div",st,[t("div",et,[s[8]||(s[8]=t("h2",{class:"title-md"},"User Info",-1)),s[9]||(s[9]=t("hr",null,null,-1)),t("div",nt,[t("p",null,[s[2]||(s[2]=t("strong",null,"Name:",-1)),a(" "+n((y=r(l).user)==null?void 0:y.name),1)]),t("p",null,[s[3]||(s[3]=t("strong",null,"Designation:",-1)),a(" "+n((b=r(l).user)==null?void 0:b.designation.title),1)]),t("p",null,[s[4]||(s[4]=t("strong",null,"Department:",-1)),a(" "+n((h=(g=r(l).user)==null?void 0:g.department)==null?void 0:h.name),1)]),t("p",null,[s[5]||(s[5]=t("strong",null,"Company:",-1)),a(" "+n((x=(v=r(l).user)==null?void 0:v.company)==null?void 0:x.name),1)]),t("p",null,[s[6]||(s[6]=t("strong",null,"Phone:",-1)),a(" "+n((f=r(l).user)==null?void 0:f.phone),1)]),t("p",null,[s[7]||(s[7]=t("strong",null,"Email:",-1)),a(" "+n((w=r(l).user)==null?void 0:w.email),1)])])]),t("div",rt,[s[16]||(s[16]=t("h2",{class:"title-md"},"Attendance Summary",-1)),s[17]||(s[17]=t("hr",null,null,-1)),t("div",at,[t("p",null,[s[10]||(s[10]=t("strong",null,"Total Working Days:",-1)),a(" "+n((D=(k=r(o))==null?void 0:k.summary)==null?void 0:D.total_working_days),1)]),t("p",null,[s[11]||(s[11]=t("strong",null,"Present Days:",-1)),a(" "+n((A=(S=r(o))==null?void 0:S.summary)==null?void 0:A.total_present_days),1)]),t("p",null,[s[12]||(s[12]=t("strong",null,"Absent Days:",-1)),a(" "+n((M=(L=r(o))==null?void 0:L.summary)==null?void 0:M.total_absent_days),1)]),t("p",null,[s[13]||(s[13]=t("strong",null,"Late Days:",-1)),a(" "+n((T=(B=r(o))==null?void 0:B.summary)==null?void 0:T.total_late_days),1)]),t("p",null,[s[14]||(s[14]=t("strong",null,"Total Working Hours:",-1)),a(" "+n((C=(E=r(o))==null?void 0:E.summary)==null?void 0:C.total_working_hours),1)]),t("p",null,[s[15]||(s[15]=t("strong",null,"Total Overtime Hours:",-1)),a(" "+n((U=(N=r(o))==null?void 0:N.summary)==null?void 0:U.total_overtime_hours),1)])])])]),r(o).isLoading?(u(),O(Q,{key:0})):(u(),p("div",ot,[t("div",lt,[t("table",dt,[s[18]||(s[18]=t("thead",null,[t("tr",{class:"bg-gray-200 text-xs"},[t("th",{class:"border p-1"},"Date"),t("th",{class:"border p-1"},"Day"),t("th",{class:"border p-1"},"Shift"),t("th",{class:"border p-1"},"Entry Time"),t("th",{class:"border p-1"},"Exit Time"),t("th",{class:"border p-1"},"Working Hours"),t("th",{class:"border p-1"},"Late Entry"),t("th",{class:"border p-1"},"Early Leave"),t("th",{class:"border p-1"},"Status")])],-1)),t("tbody",it,[(u(!0),p(R,null,G((V=r(o))==null?void 0:V.monthlyLogs,e=>(u(),p("tr",{key:e==null?void 0:e.date},[t("td",ut,n(e.date),1),t("td",pt,n(e.weekday),1),t("td",{class:"border px-1 py-0.5",title:`${e.shift_start_time} to ${e.shift_end_time}`},n(e.shift_name),9,mt),t("td",{class:c(["border px-1 py-0.5",{"bg-red-200":e.late_duration}]),title:`Device: ${e.entry_device}`},n(e.entry_time),11,yt),t("td",{class:c(["border px-1 py-0.5",{"bg-red-200":e.early_leave_duration}]),title:`Device: ${e.exit_device}`},n(e.exit_time),11,ct),t("td",_t,n(e.working_hours),1),t("td",bt,n(e.late_duration),1),t("td",gt,n(e.early_leave_duration),1),t("td",{class:c(["border px-1 py-0.5",{"text-red-600":e.status==="Absent","text-green-600":e.status==="Present"}])},n(e.status),3)]))),128))])])])]))])}}};export{kt as default};
