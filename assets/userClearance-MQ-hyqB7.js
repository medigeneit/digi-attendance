import{B as g,r as a,C as A}from"./index-B_JHsvjR.js";const U=g("userClearance",()=>{const n=a(null),u=a(null),l=a([]),o=a(!1),d=a(""),i=a({total:0,by_status:{},by_handover_to:{}}),t=a({by:"created_at",dir:"desc"}),r=a({search:"",status:"",department_id:"",template_item_id:"",handover_to:""});function y(s){n.value=s}async function f(){var s,m;if(n.value){o.value=!0,d.value="";try{const{data:e}=await A.get(`/users/${n.value}/clearance-items`,{params:{include:"department,templateItem,clearedBy",sort:t.value.by,order:t.value.dir,search:r.value.search||void 0,status:r.value.status||void 0,department_id:r.value.department_id||void 0,template_item_id:r.value.template_item_id||void 0,handover_to:r.value.handover_to||void 0}}),_=Array.isArray(e==null?void 0:e.data)?e.data:Array.isArray(e)?e:[];l.value=_;const c=(e==null?void 0:e.meta)||{},b=(e==null?void 0:e.extra)||{},v=c.summary||b.summary||{};i.value={total:Number(v.total??_.length)||0,by_status:v.by_status||{},by_handover_to:v.by_handover_to||{}},c.user&&(u.value=c.user)}catch(e){console.error(e),d.value=((m=(s=e==null?void 0:e.response)==null?void 0:s.data)==null?void 0:m.message)||"Failed to load",l.value=[],i.value={total:0,by_status:{},by_handover_to:{}},u.value=null}finally{o.value=!1}}}function h(s){t.value.by===s?t.value.dir=t.value.dir==="asc"?"desc":"asc":(t.value.by=s,t.value.dir="desc")}function p(){r.value={search:"",status:"",department_id:"",template_item_id:"",handover_to:""}}return{currentUserId:n,currentUserInfo:u,items:l,loading:o,error:d,summary:i,sort:t,filters:r,setUser:y,fetch:f,setSort:h,resetFilters:p}});export{U as u};
