import{r as v,e as F,$ as z,c as i,o as l,a as e,g as f,t as n,q as y,F as B,G as I,b as W,u as J,d as Q,a3 as X,z as Y,n as Z,p as ee,k as h,f as te,i as se}from"./index-DaUxVtpM.js";import{u as D}from"./overtime-tJ6qR-cR.js";import{_ as re}from"./AcceptAndRejectHandler-CzKW3zEB.js";import{_ as S}from"./DisplayFormattedWorkingHours-Bg_23fSv.js";import{_ as oe}from"./TimePickerAsFloatHour-BVIQek_E.js";const ne={key:0,class:"fixed inset-0 z-50 flex justify-center items-center bg-black/50"},ae={class:"modal-card max-w-sm p-4"},le={class:"grid grid-cols-3 gap-2 border p-3"},ie={class:"border-x"},ce={class:"col-span-full text-xs md:text-sm border-t pt-3"},de={class:"flex justify-between gap-2 mt-2"},ue={__name:"DeleteOvertime",props:{overtime:Object,onSuccess:{type:Function,default:null}},setup(r){const d=r,k=D(),u=v(null),m=v(null),c=v(!1),b=async()=>{await k.deleteOvertime(d.overtime.id),d.onSuccess&&await d.onSuccess(),w()},s=()=>{c.value=!0,g()},w=()=>{c.value=!1};function g(){I(()=>{var p;(p=u.value)==null||p.focus()})}function _(p){var a,o;c.value&&(p.key==="ArrowLeft"?(a=m.value)==null||a.focus():p.key==="ArrowRight"&&((o=u.value)==null||o.focus()))}return F(()=>{window.addEventListener("keydown",_)}),z(()=>{window.removeEventListener("keydown",_)}),(p,a)=>(l(),i(B,null,[e("i",{onClick:s,class:"fa fa-trash cursor-pointer text-red-600"}),c.value?(l(),i("div",ne,[e("div",ae,[a[0]||(a[0]=e("h3",{class:"title-lg"},"Delete Overtime",-1)),e("div",le,[e("div",null,[e("b",null,n(new Date(r.overtime.date).toLocaleDateString("en-GB",{day:"2-digit",month:"long",year:"numeric"})),1)]),e("div",ie,[e("b",null,n(r.overtime.duty_type),1)]),e("div",null,[e("b",null,[y(S,{workingHours:r.overtime.request_overtime_hours},null,8,["workingHours"])])]),e("div",ce,n(r.overtime.work_details),1)]),e("div",de,[e("button",{type:"button",ref_key:"cancelBtnRef",ref:m,class:"btn-3 focus:ring-2 ring-offset-2",onClick:w}," Cancel ",512),e("button",{type:"button",ref_key:"confirmBtnRef",ref:u,class:"btn-2-red focus:ring-2 ring-offset-2",onClick:b}," Delete ",512)])])])):f("",!0)],64))}},pe={key:0,class:"fixed inset-0 z-50 flex justify-center items-center bg-black/50"},fe={class:"modal-card max-w-sm"},me={class:"flex justify-between gap-2 mt-4"},ye={__name:"UpdateApprovalTime",props:{overtime:Object,onSuccess:{type:Function,default:null}},setup(r){const d=r,k=D(),u=v(null),m=v(null),c=v(!1),b=v(d.overtime.approval_overtime_hours||d.overtime.request_overtime_hours||""),s=async()=>{if(!b.value)return alert("Please set approval time!");await k.updateApprovalTime(d.overtime.id,b.value),d.onSuccess&&await d.onSuccess(),g()},w=()=>{c.value=!0,_()},g=()=>{c.value=!1};function _(){I(()=>{var a;(a=u.value)==null||a.focus()})}function p(a){var o,x;c.value&&(a.key==="ArrowLeft"?(o=m.value)==null||o.focus():a.key==="ArrowRight"&&((x=u.value)==null||x.focus()))}return F(()=>{window.addEventListener("keydown",p)}),z(()=>{window.removeEventListener("keydown",p)}),(a,o)=>(l(),i(B,null,[e("i",{onClick:w,class:"fa fa-edit cursor-pointer text-sky-600"}),c.value?(l(),i("div",pe,[e("div",fe,[o[1]||(o[1]=e("h3",{class:"title-lg"},"Update Approval Time",-1)),o[2]||(o[2]=e("hr",{class:"my-2"},null,-1)),y(oe,{modelValue:b.value,"onUpdate:modelValue":o[0]||(o[0]=x=>b.value=x),"minute-interval":5,required:!0,"hour-min":2,"hour-max":16},null,8,["modelValue"]),o[3]||(o[3]=e("hr",{class:"my-2"},null,-1)),e("div",me,[e("button",{type:"button",ref_key:"cancelBtnRef",ref:m,class:"btn-3 focus:ring-2 ring-offset-2",onClick:g}," Cancel ",512),e("button",{type:"button",ref_key:"confirmBtnRef",ref:u,class:"btn-2-green focus:ring-2 ring-offset-2",onClick:s}," Update Time ",512)])])])):f("",!0)],64))}},be={class:"space-y-4"},ge={class:"card-bg p-4 gap-1"},_e={class:"flex flex-wrap gap-x-8 gap-y-2"},xe={key:0,class:"text-gray-700"},he={class:"ml-1"},ve={key:1,class:"text-gray-700"},ke={class:"ml-1"},we={key:2,class:"text-gray-700"},Se={class:"ml-1"},Be={key:3,class:"text-gray-700"},De={class:"ml-1"},Ae={key:4,class:"text-gray-700"},Ce={class:"ml-1"},Re={class:"overflow-x-auto"},$e={class:"min-w-full table-auto border-collapse border border-gray-200 bg-white rounded-md text-sm"},Oe={class:"border border-gray-300 px-2 text-center"},Le={class:"border border-gray-300 px-2 text-center"},je={class:"border border-gray-300 px-2 text-center"},Ne={class:"border border-gray-300 px-2 text-center"},Ue={class:"border border-gray-300 px-2 text-center"},He={class:"border border-gray-300 px-2 text-center"},Me={class:"border border-gray-300 px-2 text-center"},Te={class:"border border-gray-300 px-2 text-center"},qe={class:"flex items-center justify-center gap-4"},Ee={class:"border border-gray-300 px-2 text-center"},Pe={class:"border border-gray-300 px-2 text-center"},Ve={class:"border border-gray-300 px-2 text-center !py-0.5"},Fe={class:"flex items-center justify-center gap-x-4"},ze={key:0,class:"border border-dashed px-4 rounded-xl"},Ie={key:0},Xe={__name:"OvertimeDataList",props:{user:Object,onUpdate:{type:Function,default:null}},setup(r){W(),J();const d=Q(),k=D(),u=X(),m=r,c=async()=>{m.onUpdate?await m.onUpdate():await u.fetchCountNotifications()};return(b,s)=>{var g,_,p,a,o,x,A,C,R,$,O,L,j,N,U;const w=Y("RouterLink");return l(),i("div",be,[e("div",ge,[e("div",_e,[(g=r.user)!=null&&g.employee_id?(l(),i("p",xe,[s[0]||(s[0]=e("span",{class:"text-gray-400"},"Employee ID:",-1)),e("strong",he,n(((_=r.user)==null?void 0:_.employee_id)||"N/A"),1)])):f("",!0),(p=r.user)!=null&&p.name?(l(),i("p",ve,[s[1]||(s[1]=e("span",{class:"text-gray-400"},"Name:",-1)),e("strong",ke,n((a=r.user)==null?void 0:a.name),1)])):f("",!0),(x=(o=r.user)==null?void 0:o.designation)!=null&&x.title?(l(),i("p",we,[s[2]||(s[2]=e("span",{class:"text-gray-400"},"Designation:",-1)),e("strong",Se,n(((C=(A=r.user)==null?void 0:A.designation)==null?void 0:C.title)||"N/A"),1)])):f("",!0),($=(R=r.user)==null?void 0:R.department)!=null&&$.name?(l(),i("p",Be,[s[3]||(s[3]=e("span",{class:"text-gray-400"},"Department:",-1)),e("strong",De,n(((L=(O=r.user)==null?void 0:O.department)==null?void 0:L.name)||"N/A"),1)])):f("",!0),(j=r.user)!=null&&j.phone?(l(),i("p",Ae,[s[4]||(s[4]=e("span",{class:"text-gray-400"},"Phone:",-1)),e("strong",Ce,n((N=r.user)==null?void 0:N.phone),1)])):f("",!0)])]),e("div",Re,[e("table",$e,[s[7]||(s[7]=e("thead",null,[e("tr",{class:"bg-gray-200 *:py-1"},[e("th",{class:"border border-gray-300 px-2 text-center"},"#"),e("th",{class:"border border-gray-300 px-2 text-center"},"Date"),e("th",{class:"border border-gray-300 px-2 text-center"},"Type"),e("th",{class:"border border-gray-300 px-2 text-center"},"Shift"),e("th",{class:"border border-gray-300 px-2 text-center"},"Check-In"),e("th",{class:"border border-gray-300 px-2 text-center"},"Check-Out"),e("th",{class:"border border-gray-300 px-2 text-center"},"Working (hour)"),e("th",{class:"border border-gray-300 px-2 text-center"},"Request (hour)"),e("th",{class:"border border-gray-300 px-2 text-center"},"Approved (hour)"),e("th",{class:"border border-gray-300 px-2 text-center"},"Details"),e("th",{class:"border border-gray-300 px-2 text-center"},"Status"),e("th",{class:"border border-gray-300 px-2 text-center"},"Action")])],-1)),e("tbody",null,[(l(!0),i(B,null,Z(h(k).overtimes,(t,G)=>{var H,M,T,q,E,P,V;return l(),i("tr",{key:t==null?void 0:t.id,class:"border-b border-gray-200 hover:bg-blue-200 *:py-2"},[e("td",Oe,n(G+1),1),e("td",Le,n(new Date(t.date).toLocaleDateString("en-GB",{day:"2-digit",month:"long",year:"numeric"})),1),e("td",je,n(t.duty_type),1),e("td",Ne,n(t.shift),1),e("td",Ue,n(t.check_in||"- : -"),1),e("td",He,n(t.check_out||"- : -"),1),e("td",Me,[y(S,{workingHours:t.working_hours},null,8,["workingHours"])]),e("td",Te,[y(S,{workingHours:t.request_overtime_hours},null,8,["workingHours"])]),e("td",{class:ee(["border border-gray-300 px-2 text-center",{"bg-red-500/50":!t.approval_overtime_hours&&(t.recommend_by_user_id===((H=h(d).user)==null?void 0:H.id)||((T=(M=h(u).applicationApprovalPermissions)==null?void 0:M[t.id])==null?void 0:T.allow_recommend_by))}])},[e("div",qe,[y(S,{workingHours:t.approval_overtime_hours},null,8,["workingHours"]),t.recommend_by_user_id===((q=h(d).user)==null?void 0:q.id)||(P=(E=h(u).applicationApprovalPermissions)==null?void 0:E[t.id])!=null&&P.allow_recommend_by?(l(),te(ye,{key:0,overtime:t,onSuccess:c},null,8,["overtime"])):f("",!0)])],2),e("td",Ee,n(t.work_details||""),1),e("td",Pe,n(t.status||"Pending"),1),e("td",Ve,[e("div",Fe,[t.approval_overtime_hours&&Object.values(((V=h(u).applicationApprovalPermissions)==null?void 0:V[t.id])||{}).some(K=>K)?(l(),i("div",ze,[y(re,{class:"ml-auto",notificationType:"overtime_applications",applicationId:t.id,onSuccess:c,variant:1},null,8,["applicationId"])])):f("",!0),y(w,{to:{name:"MyOvertimeShow",params:{id:t.id}},class:"text-blue-800"},{default:se(()=>s[5]||(s[5]=[e("i",{class:"far fa-eye text-lg"},null,-1)])),_:2,__:[5]},1032,["to"]),y(ue,{overtime:t,onSuccess:c},null,8,["overtime"])])])])}),128)),((U=h(k).overtimes)==null?void 0:U.length)===0?(l(),i("tr",Ie,s[6]||(s[6]=[e("td",{colspan:"100",class:"p-2 text-center text-red-500"},"No overtimes found",-1)]))):f("",!0)])])])])}}};export{Xe as _};
