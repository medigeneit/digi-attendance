import{H as E,m as y,c as a,o as r,g as p,p as d,a as s,A as I,j as b,t as x,R,F as $,n as N,f as C,i as k,q as g,K as B,L as O,B as S,z}from"./index-DNfawfJ5.js";import{_ as j}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as L}from"./UserChip-Dr_UQVgQ.js";const ue=E({__name:"SubTaskProgress",props:{task:{}},setup(e,{expose:t}){const o=e,l=y(function(){return o.task.completed_count}),n=y(()=>o.task.children_task_count===0?o.task.status==="COMPLETED"?100:0:l.value/o.task.children_task_count*100),f=y(()=>{const c=n.value;let m,u,i;return c===100?(m="bg-green-50",u="bg-green-200",i="text-green-600 "):c<100&&(m="bg-red-50",u="bg-red-200",i="text-red-600 "),{container:m,bar:u,text:i}});return t({completedPercentage:n,completedSubTaskCount:l}),(c,m)=>(r(),a("div",null,[c.task.children_task_count>0?(r(),a("div",{key:0,class:d(["rounded-full py-0.5 relative overflow-hidden h-6",f.value.container])},[s("div",{class:d(["z-10 absolute top-0 bottom-0",f.value.bar]),style:I(`width: ${n.value}%`)},null,6),s("span",{class:d(["z-20 absolute inset-0 gap-1 text-center h-full flex justify-center items-center",f.value.text])},[s("span",null,[s("span",null,x(l.value),1),m[0]||(m[0]=b(" / ")),s("span",null,x(c.task.children_task_count),1)])],2)],2)):p("",!0)]))}}),A={key:0},ie={__name:"TaskStatus",props:{status:{type:String,required:!0},progressPercent:{type:Number,required:!0}},setup(e){const t=e,o=y(()=>{switch(t.status){case"COMPLETED":return"text-white bg-green-500  border-green-200 font-semibold";case"PENDING":return"text-red-500 bg-red-200  border-red-500";case"IN_PROGRESS":return"text-yellow-600 bg-yellow-200  border-yellow-300"}return"bg-blue-100 text-blue-800 border-blue-200"}),l=y(()=>{switch(t.status){case"COMPLETED":return"fas fa-check-circle"}return"fas fa-exclamation-circle"});return(n,f)=>(r(),a("div",{class:d(["px-2 py-0.5 text-xs rounded-full border flex items-center gap-1",o.value])},[s("i",{class:d(l.value)},null,2),s("span",null,x(e.status),1),e.progressPercent!==null||e.progressPercent!==void 0?(r(),a("span",A,x(e.progressPercent)+"% ",1)):p("",!0)],2))}},M={},q={class:"text-xs px-2 py-0.5 rounded-full border bg-yellow-800 text-white"};function D(e,t){return r(),a("span",q,t[0]||(t[0]=[s("i",{class:"far fa-exclamation-circle"},null,-1),b(" IMPORTANT ")]))}const ce=j(M,[["render",D]]),U={class:"relative"},F={key:0,class:"text-gray-400 text-xs whitespace-nowrap border py-1.5 rounded-full px-3 italic border-dashed"},V={class:"border rounded-full size-6 flex justify-center items-center border-blue-300 bg-blue-100 flex-shrink-0"},G={key:0,class:"fas fa-user-cowboy text-blue-500"},H={key:1,class:"fas fa-user-crown text-blue-300"},K={key:2,class:"text-sm text-gray-500 group/users"},J={class:"cursor-pointer hover:underline text-blue-600 whitespace-nowrap"},Q={class:"hidden absolute group-hover/users:block right-0 p-3 bg-white rounded shadow-lg z-30"},P={__name:"TaskAssignedUsers",props:{users:{type:Array,required:!0,default:()=>[]},maxItems:{type:Number,default:2},routeTo:{type:Function,default:null},isTargetTask:{Boolean,default:!1},listType:{String,default:"employee"},maxItem:{Number,default:2}},setup(e){const t=e,o=y(()=>t.users.slice(0,t.maxItem)),l=y(()=>t.users.slice(t.maxItem));function n(c){return typeof t.routeTo=="function"?t.routeTo(c):{}}const f=y(()=>typeof t.routeTo=="function"?R:"div");return(c,m)=>(r(),a("div",U,[t.users.length===0?(r(),a("div",F,x(e.listType=="supervisors"?"No Supervisor assigned":"Not Assigned To Anyone"),1)):(r(!0),a($,{key:1},N(o.value,(u,i)=>(r(),C(S(f.value),O({key:i},{ref_for:!0},{...typeof t.routeTo=="function"?{to:n(u)}:{}}),{default:k(()=>[g(L,{class:d(["flex items-center gap-2 border rounded-full border-gray-300 shadow-sm",{"!bg-yellow-400":e.isTargetTask," !bg-blue-100":!e.isTargetTask&&e.listType=="employee"&&i===0}]),user:u},B({_:2},[i===0||e.listType=="supervisors"?{name:"after",fn:k(()=>[s("div",V,[e.listType=="supervisors"?(r(),a("i",G)):(r(),a("i",H))])]),key:"0"}:void 0]),1032,["class","user"])]),_:2},1040))),128)),l.value.length>0?(r(),a("div",K,[s("div",J," + "+x(l.value.length)+" more "+x(e.listType=="employee"?"users":e.listType=="supervisors"?"supervisor":""),1),s("div",Q,[(r(!0),a($,null,N(l.value,(u,i)=>(r(),C(S(f.value),{key:i,to:n(u),class:"w-full block mb-2"},{default:k(()=>[g(L,{class:d(["flex items-center gap-2 border rounded-full border-gray-300 shadow-sm w-full",{"!bg-yellow-400":e.isTargetTask}]),user:u},null,8,["class","user"])]),_:2},1032,["to"]))),128))])])):p("",!0)]))}},W={class:"col-span-full flex flex-col md:flex-row items-stretched my-4 lg:my-0 justify-start gap-x-5 gap-y-4"},X={class:"flex flex-col items-start justify-start gap-2 border-gray-200 bg-gray-50/40 p-1 px-3"},Y=["title"],Z={class:"flex flex-col items-start justify-start gap-2 py-1 px-3"},ee=["title"],de={__name:"TaskSupervisorAndEmployee",props:{treeLevel:{type:Number,required:!0},task:{type:Object,required:!0},employeeRouteTo:{type:Function,default:null}},setup(e){return(t,o)=>{var l,n,f,c,m,u,i,h,T,v,w,_;return r(),a("div",W,[s("div",X,[e.treeLevel===0?(r(),a("div",{key:0,class:d(["text-xs px-2 py-0.5 rounded-full border bg-sky-500/80 text-white line-clamp-1 text-center",{"":(n=(l=e.task)==null?void 0:l.from_department)==null?void 0:n.name}]),title:((c=(f=e.task)==null?void 0:f.from_department)==null?void 0:c.name)||"--"},x(((u=(m=e.task)==null?void 0:m.from_department)==null?void 0:u.name)||"--"),11,Y)):p("",!0),g(P,{class:"flex items-center justify-center flex-wrap gap-x-3 gap-y-2",users:e.task.supervisors||[],listType:"supervisors",maxItem:1},null,8,["users"])]),o[0]||(o[0]=s("div",null,[s("span",{class:"flex md:hidden text-2xl text-gray-200 items-center justify-center h-full"},[s("i",{class:"fad fa-arrow-down"})]),s("span",{class:"hidden md:flex text-2xl text-gray-200 items-center justify-center h-full"},[s("i",{class:"fad fa-arrow-right"})])],-1)),s("div",Z,[e.treeLevel===0?(r(),a("div",{key:0,class:d(["text-xs px-2 py-0.5 rounded-full border bg-sky-500/80 text-white line-clamp-1 text-center",{"":(h=(i=e.task)==null?void 0:i.to_department)==null?void 0:h.name}]),title:((v=(T=e.task)==null?void 0:T.to_department)==null?void 0:v.name)||"--"},x(((_=(w=e.task)==null?void 0:w.to_department)==null?void 0:_.name)||"--"),11,ee)):p("",!0),g(P,{class:"flex items-center justify-center gap-x-3 gap-y-2",users:e.task.users||[],isTargetTask:e.task.is_target,routeTo:e.employeeRouteTo,maxItem:1},null,8,["users","isTargetTask","routeTo"])])])}}},te={class:"flex items-center gap-2"},fe={__name:"TaskTitleRouterLink",props:{task:Object,subTasksOpen:{type:Boolean,default:!1},isMyTask:{type:Boolean,default:!1},titleClass:{type:String,default:""}},setup(e){return(t,o)=>{var n;const l=z("RouterLink");return r(),a("div",te,[s("i",{class:d(["fad",((n=e.task)==null?void 0:n.children_task_count)>0?{"fa-folder text-blue-800/70":!e.subTasksOpen,"fa-folder-open text-blue-400":e.subTasksOpen}:"fa-file-alt text-gray-400"])},null,2),g(l,{to:{name:e.isMyTask?"MyTaskShow":"TaskShow",params:{id:e.task.id}},title:e.task.title,class:d(["font-medium text-gray-700 cursor-pointer hover:text-blue-700 whitespace-normal line-clamp-1 w-full",e.titleClass])},{default:k(()=>[s("div",null,x(e.task.title),1)]),_:1},8,["to","title","class"])])}}},se={},re={class:"text-xs px-2 py-0.5 rounded-full border bg-red-500 text-white"};function ae(e,t){return r(),a("span",re,t[0]||(t[0]=[s("i",{class:"far fa-exclamation-triangle"},null,-1),b(" URGENT ")]))}const me=j(se,[["render",ae]]);export{ce as T,fe as _,P as a,ie as b,ue as c,me as d,de as e};
