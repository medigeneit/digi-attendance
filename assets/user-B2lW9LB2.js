import{J as b,r as d,q as v,K as l}from"./index-CjYkxO9X.js";const H=b("user",()=>{const o=d([]),p=d([]),i=d({}),m=d({}),f=d({}),n=d(null),r=d(!1),h=d(new Date().toISOString().substring(0,10)),y=v(()=>o.value),g=v(()=>i.value),w=v(()=>n.value);return{users:o,handoverUsers:p,user:i,error:n,isLoading:r,allUsers:y,singleUser:g,errorMessage:w,dashboardInfo:f,userDashboard:m,selectedDate:h,fetchUsers:async(t={})=>{var s,e;try{r.value=!0;const a=await l.get("/users",{params:t});o.value=a.data,n.value=null}catch(a){n.value=((e=(s=a.response)==null?void 0:s.data)==null?void 0:e.message)||"Something went wrong"}finally{r.value=!1}},fetchUser:async t=>{var s,e;try{r.value=!0;const u=(await l.get(`/users/${t}`)).data;return u&&(i.value=u),n.value=null,u}catch(a){n.value=((e=(s=a.response)==null?void 0:s.data)==null?void 0:e.message)||"Something went wrong"}finally{r.value=!1}},createUser:async t=>{var s,e;try{r.value=!0;const a=await l.post("/users",t);o.value.push(a.data.user),n.value=null}catch(a){n.value=((e=(s=a.response)==null?void 0:s.data)==null?void 0:e.message)||"Something went wrong"}finally{r.value=!1}},updateUser:async(t,s)=>{var e,a;try{r.value=!0;const u=await l.put(`/users/${t}`,s),c=o.value.findIndex(U=>U.id===t);return c!==-1&&(o.value[c]=u.data.user),n.value=null,u.data.user}catch(u){n.value=((a=(e=u.response)==null?void 0:e.data)==null?void 0:a.message)||"Something went wrong"}finally{r.value=!1}},deleteUser:async t=>{var s,e;try{r.value=!0,await l.delete(`/users/${t}`),o.value=o.value.filter(a=>a.id!==t),n.value=null}catch(a){n.value=((e=(s=a.response)==null?void 0:s.data)==null?void 0:e.message)||"Something went wrong"}finally{r.value=!1}},fetchUserDashboardData:async()=>{var t,s;try{r.value=!0;const a=(await l.get("/dashboard")).data;return a&&(m.value=a),n.value=null,a}catch(e){n.value=((s=(t=e.response)==null?void 0:t.data)==null?void 0:s.message)||"Something went wrong"}finally{r.value=!1}},fetchAdminDashboardData:async()=>{var t,s;try{r.value=!0;const a=(await l.get("/admin-dashboard")).data;return a&&(f.value=a),n.value=null,a}catch(e){n.value=((s=(t=e.response)==null?void 0:t.data)==null?void 0:s.message)||"Something went wrong"}finally{r.value=!1}},fetchTypeWiseEmployees:async(t={})=>{var s,e;try{r.value=!0;const a=await l.get("/type-wise-employees",{params:t});o.value=a.data,n.value=null}catch(a){n.value=((e=(s=a.response)==null?void 0:s.data)==null?void 0:e.message)||"Something went wrong"}finally{r.value=!1}},fetchDepartmentWiseEmployees:async()=>{var t,s;try{r.value=!0;const e=await l.get("/department-wise-employees");o.value=e.data,n.value=null}catch(e){n.value=((s=(t=e.response)==null?void 0:t.data)==null?void 0:s.message)||"Something went wrong"}finally{r.value=!1}},fetchHandoverDepartmentWiseEmployees:async()=>{var t,s;try{r.value=!0;const e=await l.get("/department-handover-wise-employees");p.value=e.data,n.value=null}catch(e){n.value=((s=(t=e.response)==null?void 0:t.data)==null?void 0:s.message)||"Something went wrong"}finally{r.value=!1}},fetchUsersExcelExport:async t=>{var s,e;try{r.value=!0;const a=await l.get("/users",{params:{flag:"excel",companyName:t.data.companyName},responseType:"blob"}),u=window.URL.createObjectURL(new Blob([a.data])),c=document.createElement("a");c.href=u,c.setAttribute("download","users.xlsx"),document.body.appendChild(c),c.click(),c.remove(),n.value=null}catch(a){n.value=((e=(s=a.response)==null?void 0:s.data)==null?void 0:e.message)||"Something went wrong"}finally{r.value=!1}}}});export{H as u};
