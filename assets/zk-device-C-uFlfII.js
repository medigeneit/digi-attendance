import{B,r as d,C as o}from"./index-CTTU2Cjr.js";const F=B("device",()=>{const i=d([]),p=d(null),s=d(!1),c=d(null),r=(e,t)=>{var n,a;c.value=((a=(n=e==null?void 0:e.response)==null?void 0:n.data)==null?void 0:a.message)||(e==null?void 0:e.message)||t};async function u(){s.value=!0,c.value=null;try{const{data:e}=await o.get("/devices");return i.value=e,e}catch(e){return r(e,"ডিভাইস লোড ব্যর্থ"),[]}finally{s.value=!1}}async function v(e){s.value=!0,c.value=null;try{const{data:t}=await o.get(`/devices/${encodeURIComponent(e)}`);return p.value=t,t}catch(t){return r(t,`ডিভাইস (${e}) লোড ব্যর্থ`),null}finally{s.value=!1}}async function f(e){var t;s.value=!0,c.value=null;try{const{data:n}=await o.post("/devices",e);return await u(),n}catch(n){throw r(n,"ডিভাইস তৈরি ব্যর্থ"),((t=n==null?void 0:n.response)==null?void 0:t.data)||n}finally{s.value=!1}}async function m(e,t){var n;s.value=!0,c.value=null;try{const{data:a}=await o.put(`/devices/${encodeURIComponent(e)}`,t);return await u(),a}catch(a){throw r(a,`ডিভাইস (${e}) আপডেট ব্যর্থ`),((n=a==null?void 0:a.response)==null?void 0:n.data)||a}finally{s.value=!1}}async function h(e){var t;s.value=!0,c.value=null;try{const{data:n}=await o.delete(`/devices/${encodeURIComponent(e)}`);return i.value=i.value.filter(a=>a.id!==e),n}catch(n){throw r(n,`ডিভাইস (${e}) ডিলিট ব্যর্থ`),((t=n==null?void 0:n.response)==null?void 0:t.data)||n}finally{s.value=!1}}async function y(e,{modes:t=["udp","tcp"]}={}){var n;try{const{data:a}=await o.get(`/devices/${encodeURIComponent(e)}/ping`,{params:{modes:t}});return a}catch(a){throw r(a,"কনেকশন চেক ব্যর্থ"),((n=a==null?void 0:a.response)==null?void 0:n.data)||a}}const w=e=>o.get(`/devices/${encodeURIComponent(e)}/info`).then(t=>t.data),C=e=>o.post(`/devices/${encodeURIComponent(e)}/enable`).then(t=>t.data),$=e=>o.post(`/devices/${encodeURIComponent(e)}/disable`).then(t=>t.data),U=e=>o.post(`/devices/${encodeURIComponent(e)}/restart`).then(t=>t.data),I=e=>o.post(`/devices/${encodeURIComponent(e)}/shutdown`).then(t=>t.data),R=e=>o.post(`/devices/${encodeURIComponent(e)}/test-voice`).then(t=>t.data);function g(e,{datetime:t,date:n,time:a}){const l=t?{datetime:t}:{date:n,time:a};return o.post(`/devices/${encodeURIComponent(e)}/time/sync`,l).then(S=>S.data)}const D=e=>o.get(`/devices/${encodeURIComponent(e)}/users/live`).then(t=>t.data),b=(e,{include_inactive:t=!1}={})=>o.get(`/devices/${encodeURIComponent(e)}/users/diff`,{include_inactive:t}).then(n=>n.data);async function x(e,t,{pushNow:n=!0}={}){const a=new FormData;a.append("file",t),n&&a.append("push_now","1");const{data:l}=await o.post(`/devices/${encodeURIComponent(e)}/users/import`,a,{headers:{"Content-Type":"multipart/form-data"}});return l}async function T(e){return(await o.get(`/devices/${encodeURIComponent(e)}/users/export`,{responseType:"blob"})).data}return{devices:i,device:p,loading:s,error:c,fetchDevices:u,fetchDevice:v,createDevice:f,updateDevice:m,deleteDevice:h,ping:y,info:w,setTime:g,enable:C,disable:$,restart:U,shutdown:I,testVoice:R,usersLive:D,usersDiff:b,importUsers:x,exportUsers:T}});export{F as u};
