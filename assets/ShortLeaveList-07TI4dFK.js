import{r as w,p as D,b as N,q as A,c as a,a as t,l as x,h as r,d as k,v as B,z as C,F as R,x as T,e as v,f as j,o as n,t as d,m as E,g as F,n as q}from"./index-CxG37pJ2.js";import{L as P}from"./LoaderView-D2a7U-bJ.js";import{_ as z}from"./MultiselectDropdown-BujKoe-z.js";import{u as H}from"./short-leave-CcnQ0GEc.js";import{u as I}from"./user-DbX4EKyE.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vue-multiselect.esm-B8Cwk9tt.js";const $={class:"space-y-2 px-4"},G={class:"flex items-center justify-between gap-2"},J={class:"flex gap-2"},K={style:{width:"300px"}},O={key:0,class:"text-center py-4"},Q={key:1,class:"space-y-4"},W={class:"overflow-x-auto"},X={class:"min-w-full table-auto border-collapse border border-gray-200 bg-white rounded-md text-sm"},Y={class:"border border-gray-300 px-2"},Z={class:"border border-gray-300 px-2"},tt={class:"border border-gray-300 px-2"},et={class:"border border-gray-300 px-2"},st={class:"border border-gray-300 px-2"},ot={class:"border border-gray-300 px-2"},rt={class:"border border-gray-300 px-2"},dt={class:"border border-gray-300 px-2 text-center"},at=["href"],nt={class:"border border-gray-300 px-2"},lt={class:"border border-gray-300 px-2"},ct={class:"flex gap-2"},it={key:0},yt={__name:"ShortLeaveList",setup(ut){var y;const M=F(),i=j(),o=H(),f=I(),u=w(""),p=w(((y=i==null?void 0:i.query)==null?void 0:y.search)||null),b=D(()=>{var l;return(l=u.value)==null?void 0:l.id});N(()=>{f.fetchUsers(),o.fetchShortLeaves({selectedMonth:o.selectedMonth,selectedStatus:o.selectedStatus,selectedDate:p.value})});const h=async()=>{b.value?await o.fetchShortLeaves({user_id:b.value,selectedMonth:o.selectedMonth,selectedStatus:o.selectedStatus,selectedDate:p.value}):await o.fetchShortLeaves({selectedMonth:o.selectedMonth,selectedStatus:o.selectedStatus,selectedDate:p.value})},U=()=>{M.go(-1)};A([b],h);const g=l=>{const[s,m]=l.split(":").map(Number),c=new Date;return c.setHours(s,m),c.toLocaleString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})};return(l,s)=>{var c,_,S;const m=q("RouterLink");return n(),a("div",$,[t("div",G,[t("button",{class:"btn-3",onClick:U},s[3]||(s[3]=[t("i",{class:"far fa-arrow-left"},null,-1),t("span",{class:"hidden md:flex"},"Back",-1)])),s[5]||(s[5]=t("h1",{class:"title-md md:title-lg flex-wrap text-center"},"Short Leaves",-1)),t("div",J,[t("div",K,[x(z,{modelValue:u.value,"onUpdate:modelValue":s[0]||(s[0]=e=>u.value=e),options:r(f).users,multiple:!1,label:"Select User",labelFor:"user"},null,8,["modelValue","options"])]),t("div",null,[k(t("input",{id:"monthSelect",type:"month","onUpdate:modelValue":s[1]||(s[1]=e=>r(o).selectedMonth=e),onChange:h,class:"input-1"},null,544),[[B,r(o).selectedMonth]])]),t("div",null,[k(t("select",{"onUpdate:modelValue":s[2]||(s[2]=e=>r(o).selectedStatus=e),onChange:h,class:"input-1"},s[4]||(s[4]=[t("option",{value:"",selected:""},"All",-1),t("option",{value:"Pending"},"Pending",-1),t("option",{value:"Approved"},"Approved",-1),t("option",{value:"Rejected"},"Rejected",-1)]),544),[[C,r(o).selectedStatus]])])])]),r(o).loading?(n(),a("div",O,[x(P)])):(n(),a("div",Q,[t("div",W,[t("table",X,[s[9]||(s[9]=t("thead",null,[t("tr",{class:"bg-gray-200"},[t("th",{class:"border border-gray-300 px-2 text-left"},"#"),t("th",{class:"border border-gray-300 px-2 text-left"},"Employee Name"),t("th",{class:"border border-gray-300 px-2 text-left"},"Type"),t("th",{class:"border border-gray-300 px-2 text-left"},"Date"),t("th",{class:"border border-gray-300 px-2 text-left"},"Start Time"),t("th",{class:"border border-gray-300 px-2 text-left"},"End Time"),t("th",{class:"border border-gray-300 px-2 text-left"},"Total Minutes"),t("th",{class:"border border-gray-300 px-2 text-left"},"Attachment"),t("th",{class:"border border-gray-300 px-2 text-left"},"Status"),t("th",{class:"border border-gray-300 px-2 text-left"},"Action")])],-1)),t("tbody",null,[(n(!0),a(R,null,T((c=r(o))==null?void 0:c.shortLeaves,(e,V)=>{var L;return n(),a("tr",{key:e==null?void 0:e.id,class:"border-b border-gray-200 hover:bg-blue-200"},[t("td",Y,d(V+1),1),t("td",Z,d(((L=e==null?void 0:e.user)==null?void 0:L.name)||"Unknown"),1),t("td",tt,d((e==null?void 0:e.type)||"Unknown"),1),t("td",et,d(e.date),1),t("td",st,d(g(e.start_time)),1),t("td",ot,d(e.end_time?g(e.end_time):""),1),t("td",rt,d(e.total_minutes),1),t("td",dt,[e.attachment?(n(),a("a",{key:0,href:e==null?void 0:e.attachment,target:"_blank",class:"text-blue-500 underline"},s[6]||(s[6]=[t("i",{class:"fad fa-link"},null,-1)]),8,at)):v("",!0)]),t("td",nt,d(e.status||"N/A"),1),t("td",lt,[t("div",ct,[x(m,{to:{name:"ShortLeaveShow",params:{id:e==null?void 0:e.id}},class:"btn-icon"},{default:E(()=>s[7]||(s[7]=[t("i",{class:"far fa-eye"},null,-1)])),_:2},1032,["to"])])])])}),128)),((S=(_=r(o))==null?void 0:_.shortLeaves)==null?void 0:S.length)===0?(n(),a("tr",it,s[8]||(s[8]=[t("td",{colspan:"8",class:"p-2 text-center text-red-500"},"No short leaves found",-1)]))):v("",!0)])])])]))])}}};export{yt as default};
