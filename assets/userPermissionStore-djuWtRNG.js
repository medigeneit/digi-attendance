import{G as h,r as c,p as d,H as o}from"./index-uCRd0XTj.js";const x=h("permission",()=>{const u=c([]),v=c(null),l=c(!1),i=c(null),m=async()=>{var t,r,s;l.value=!0,i.value=null;try{const e=await o.get("/permissions");u.value=((t=e==null?void 0:e.data)==null?void 0:t.data)||[]}catch(e){i.value=((s=(r=e.response)==null?void 0:r.data)==null?void 0:s.message)||"Permission load failed"}finally{l.value=!1}},f=async t=>{var r,s,e,a;l.value=!0,i.value=null;try{const n=await o.get(`/permissions/${t}`);return v.value=((r=n==null?void 0:n.data)==null?void 0:r.data)||[],(s=n==null?void 0:n.data)==null?void 0:s.data}catch(n){i.value=((a=(e=n.response)==null?void 0:e.data)==null?void 0:a.message)||"Permission load failed"}finally{l.value=!1}},p=async t=>{var r,s,e;l.value=!0,i.value=null;try{const a=await o.post("/permissions",t);return await m(),(r=a==null?void 0:a.data)==null?void 0:r.data}catch(a){throw console.error(a),i.value=((e=(s=a.response)==null?void 0:s.data)==null?void 0:e.message)||"Permission creation failed",a}finally{l.value=!1}},y=async(t,r)=>{var s,e;l.value=!0,i.value=null;try{const a=await o.put(`/permissions/${t}`,r),n=u.value.findIndex(g=>g.id===t);return n!==-1&&(u.value[n]=a.data),a.data}catch(a){i.value=((e=(s=a.response)==null?void 0:s.data)==null?void 0:e.message)||"Permission update failed"}finally{l.value=!1}},P=async t=>{var r,s;l.value=!0,i.value=null;try{await o.delete(`/permissions/${t}`),u.value=u.value.filter(e=>e.id!==t)}catch(e){i.value=((s=(r=e.response)==null?void 0:r.data)==null?void 0:s.message)||"permission delete failed"}finally{l.value=!1}};return{userPermissions:d(()=>u.value),userPermission:d(()=>v.value),loading:d(()=>l.value),error:d(()=>i.value),fetchUserPermissions:m,fetchPermission:f,createPermission:p,updatePermission:y,deletePermission:P}});export{x as u};
