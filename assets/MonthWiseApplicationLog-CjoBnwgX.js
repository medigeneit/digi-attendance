import{u as R,b as U,r as A,e as j,x as M,z as F,c as r,o,a as t,f as G,g as x,q as _,k as D,h as I,v as W,j as i,t as a,F as g,n as b,i as v}from"./index-Dgu37sY7.js";import{_ as z}from"./EmployeeFilter-DeYXqs-0.js";import{L as P}from"./LoaderView-DeK-UVzl.js";import{_ as C}from"./DisplayFormattedWorkingHours-C8Wuj3eI.js";import{u as J}from"./leave-application-0Y2Baajl.js";import{u as Q}from"./user-CaSn5G7Y.js";import"./MultiselectDropdown-Dmg7XJZg.js";import"./company-BkDbL6I9.js";import"./department-DNQS8xnJ.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const X={class:"px-4 space-y-4"},Y={class:"flex flex-wrap gap-4"},Z={key:0,class:"flex justify-between gap-4 text-sm"},K={class:"card-bg p-4 gap-1"},tt={class:"grid md:grid-cols-2"},et={key:1},st={class:"space-y-5"},at={class:"text-base font-semibold text-blue-400 mb-2 text-center capitalize"},ot={class:"text-gray-500"},rt={key:0,class:"overflow-x-auto rounded border bg-white"},lt={class:"min-w-full table-auto border-collapse border border-gray-200 bg-white rounded-md text-sm"},nt={class:"border border-gray-300 px-2 text-center"},dt={class:"border border-gray-300 px-2 text-center"},it={class:"border border-gray-300 px-2 text-center"},ct={class:"border border-gray-300 px-2 text-center"},pt={class:"border border-gray-300 px-2 text-center"},ut={class:"border border-gray-300 px-2 text-center"},ht={class:"border border-gray-300 px-2 text-center"},_t={class:"border border-gray-300 px-2 text-center"},yt={class:"border border-gray-300 px-2 text-center"},xt={class:"border border-gray-300 px-2 text-center"},gt={class:"border border-gray-300 px-2 text-center"},bt={class:"border border-gray-300 px-2 text-center !py-0.5"},ft={key:1,class:"overflow-x-auto rounded border bg-white"},mt={class:"min-w-full text-sm text-left"},vt={class:"p-2"},wt={class:"p-2"},kt={class:"p-2"},St={class:"p-2"},At={class:"p-2 whitespace-pre-line"},Dt={class:"p-2 whitespace-pre-line"},Ct={class:"p-2 text-sm text-gray-600"},Lt={key:2,class:"overflow-x-auto rounded border bg-white"},qt={class:"min-w-full text-sm text-left"},Nt={class:"p-2"},$t={class:"p-2"},Tt={class:"p-2"},Vt={class:"p-2"},Bt={class:"p-2 whitespace-pre-line"},Mt={class:"p-2 whitespace-pre-line"},Et={class:"p-2 whitespace-pre-line"},Ht={class:"p-2 whitespace-pre-line text-center"},Ot=["href"],Rt={key:1,class:"text-gray-400"},Ut={class:"p-2 whitespace-pre-line"},jt={class:"p-2 text-sm text-gray-600"},Ft={key:3,class:"overflow-x-auto rounded border bg-white"},Gt={class:"min-w-full text-sm text-left"},It={class:"p-2"},Wt={class:"p-2"},zt={class:"p-2"},Pt={class:"p-2"},Jt={class:"p-2 whitespace-pre-line"},Qt={class:"p-2 whitespace-pre-line"},Xt={class:"p-2 text-sm text-gray-600"},Yt={key:4,class:"overflow-x-auto rounded border bg-white"},Zt={class:"min-w-full text-sm text-left"},Kt={class:"p-2"},te={class:"p-2"},ee={class:"p-2"},se={class:"p-2"},ae={class:"p-2"},oe={class:"p-2"},re={class:"p-2 whitespace-pre-line"},le={class:"p-2 text-sm text-gray-600"},be={__name:"MonthWiseApplicationLog",setup(ne){const w=R(),h=U(),L=Q(),k=J(),c=A(null),f=A(h.query.date||k.selectedMonth),p=A({company_id:h.query.company_id||"",department_id:h.query.department_id||"all",type:h.query.type||"all",employee_id:h.query.employee_id||"",category:""}),q=async l=>{l?(await L.fetchUser(l),c.value=L.user):c.value=null},S=async()=>{p.value.employee_id&&f.value&&await k.getMonthlyApplicationLog(p.value.employee_id,f.value)};j(async()=>{p.value.employee_id&&await q(p.value.employee_id)}),M(()=>p.value.employee_id,async(l,e)=>{l&&l!==e&&(await q(l),await S(),w.replace({query:{...h.query,employee_id:l}}))}),M(f,l=>{w.replace({query:{...h.query,date:l}}),S()});const E=()=>w.go(-1),N=l=>new Date(l).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),$=l=>new Date(`1970-01-01T${l}`).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),m=l=>`${new Date(l).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})}`,H=()=>{w.replace({query:{...h.query,company_id:p.value.company_id,department_id:p.value.department_id,type:p.value.type,employee_id:p.value.employee_id}})},O={exchange_shift:"ExchangeShiftShow",exchange_offday:"ExchangeOffdayShow"};return(l,e)=>{var T,V,B;const y=F("RouterLink");return o(),r("div",X,[t("div",{class:"flex items-center justify-between gap-2"},[t("button",{class:"btn-3",onClick:E},e[2]||(e[2]=[t("i",{class:"far fa-arrow-left"},null,-1),t("span",{class:"hidden md:flex"},"Back",-1)])),e[3]||(e[3]=t("h1",{class:"title-md md:title-lg flex-wrap text-center"},"Monthly Application Log",-1)),e[4]||(e[4]=t("div",null,null,-1))]),t("div",Y,[_(z,{modelValue:p.value,"onUpdate:modelValue":e[0]||(e[0]=u=>p.value=u),"initial-value":D(h).query,onFilterChange:H},null,8,["modelValue","initial-value"]),t("div",null,[I(t("input",{id:"monthSelect",type:"month","onUpdate:modelValue":e[1]||(e[1]=u=>f.value=u),onChange:S,class:"input-1"},null,544),[[W,f.value]])])]),c.value?(o(),r("div",Z,[t("div",K,[e[13]||(e[13]=t("h2",{class:"title-md"},"Selected Employee Info",-1)),e[14]||(e[14]=t("hr",null,null,-1)),t("div",tt,[t("p",null,[e[5]||(e[5]=t("strong",null,"Name:",-1)),i(" "+a(c.value.name),1)]),t("p",null,[e[6]||(e[6]=t("strong",null,"Designation:",-1)),i(" "+a(((T=c.value.designation)==null?void 0:T.title)||"N/A"),1)]),t("p",null,[e[7]||(e[7]=t("strong",null,"Department:",-1)),i(" "+a(((V=c.value.department)==null?void 0:V.name)||"N/A"),1)]),t("p",null,[e[8]||(e[8]=t("strong",null,"Company:",-1)),i(" "+a(((B=c.value.company)==null?void 0:B.name)||"N/A"),1)]),t("p",null,[e[9]||(e[9]=t("strong",null,"Phone:",-1)),i(" "+a(c.value.phone),1)]),t("p",null,[e[10]||(e[10]=t("strong",null,"Email:",-1)),i(" "+a(c.value.email||"N/A"),1)]),t("p",null,[e[11]||(e[11]=t("strong",null,"Blood Group:",-1)),i(" "+a(c.value.blood||"N/A"),1)]),t("p",null,[e[12]||(e[12]=t("strong",null,"Joining Date:",-1)),i(" "+a(c.value.joining_date||"N/A"),1)])])])])):(o(),r("div",et,e[15]||(e[15]=[t("p",{class:"text-gray-400 text-center text-2xl italic"},"Select an employee, please.",-1)]))),D(k).loading?(o(),G(P,{key:2})):x("",!0),t("div",st,[(o(!0),r(g,null,b(D(k).applicationLog,(u,d)=>(o(),r("div",{key:d,class:"bg-gray-50 p-4 rounded shadow"},[t("h2",at,[i(a(d.replaceAll("_"," "))+" ",1),t("span",ot,"("+a(u.length)+")",1)]),d==="overtime"?(o(),r("div",rt,[t("table",lt,[e[17]||(e[17]=t("thead",null,[t("tr",{class:"bg-gray-200 *:py-1"},[t("th",{class:"border border-gray-300 px-2 text-center"},"#"),t("th",{class:"border border-gray-300 px-2 text-center"},"Date"),t("th",{class:"border border-gray-300 px-2 text-center"},"Type"),t("th",{class:"border border-gray-300 px-2 text-center"},"Shift"),t("th",{class:"border border-gray-300 px-2 text-center"},"Check-In"),t("th",{class:"border border-gray-300 px-2 text-center"},"Check-Out"),t("th",{class:"border border-gray-300 px-2 text-center"},"Working (hour)"),t("th",{class:"border border-gray-300 px-2 text-center"},"Request (hour)"),t("th",{class:"border border-gray-300 px-2 text-center"},"Approved (hour)"),t("th",{class:"border border-gray-300 px-2 text-center"},"Details"),t("th",{class:"border border-gray-300 px-2 text-center"},"Status"),t("th",{class:"border border-gray-300 px-2 text-center"},"Action")])],-1)),t("tbody",null,[(o(!0),r(g,null,b(u,(s,n)=>(o(),r("tr",{key:`${d}-${n}`,class:"border-b border-gray-200 hover:bg-blue-200 *:py-2"},[t("td",nt,a(n+1),1),t("td",dt,a(new Date(s.date).toLocaleDateString("en-GB",{day:"2-digit",month:"long",year:"numeric"})),1),t("td",it,a(s.duty_type),1),t("td",ct,a(s.shift),1),t("td",pt,a(s.check_in||"- : -"),1),t("td",ut,a(s.check_out||"- : -"),1),t("td",ht,[_(C,{workingHours:s.working_hours},null,8,["workingHours"])]),t("td",_t,[_(C,{workingHours:s.request_overtime_hours},null,8,["workingHours"])]),t("td",yt,[_(C,{workingHours:s.approval_overtime_hours},null,8,["workingHours"])]),t("td",xt,a(s.work_details||""),1),t("td",gt,a(s.status||"Pending"),1),t("td",bt,[_(y,{to:{name:"MyOvertimeShow",params:{id:s.id}},class:"text-blue-800"},{default:v(()=>e[16]||(e[16]=[t("i",{class:"far fa-eye text-lg"},null,-1)])),_:2,__:[16]},1032,["to"])])]))),128))])])])):x("",!0),d==="leave_application"?(o(),r("div",ft,[t("table",mt,[e[19]||(e[19]=t("thead",{class:"bg-gray-100 text-gray-700 text-xs uppercase"},[t("tr",null,[t("th",{class:"p-2"},"#"),t("th",{class:"p-2"},"Create Date"),t("th",{class:"p-2"},"Last Working Date"),t("th",{class:"p-2"},"Resumption Date"),t("th",{class:"p-2"},"Type"),t("th",{class:"p-2"},"Status"),t("th",{class:"p-2"},"Action")])],-1)),t("tbody",null,[(o(!0),r(g,null,b(u,(s,n)=>(o(),r("tr",{key:`${d}-${n}`,class:"border-t hover:bg-gray-50 text-sm"},[t("td",vt,a(n+=1),1),t("td",wt,a(m(s.create_date)),1),t("td",kt,a(s.from),1),t("td",St,a(s.to),1),t("td",At,a(s.application_types),1),t("td",Dt,a(s.status),1),t("td",Ct,[_(y,{to:{name:"LeaveApplicationShow",params:{id:s.id}},class:"inline-flex items-center gap-1 text-blue-600 hover:underline"},{default:v(()=>e[18]||(e[18]=[t("i",{class:"far fa-eye"},null,-1),i(" View ")])),_:2,__:[18]},1032,["to"])])]))),128))])])])):x("",!0),d==="short_leave"?(o(),r("div",Lt,[t("table",qt,[e[22]||(e[22]=t("thead",{class:"bg-gray-100 text-gray-700 text-xs uppercase"},[t("tr",null,[t("th",{class:"p-2"},"#"),t("th",{class:"p-2"},"Create Date"),t("th",{class:"p-2"},"Type"),t("th",{class:"p-2"},"Date"),t("th",{class:"p-2"},"Check In"),t("th",{class:"p-2"},"Check Out"),t("th",{class:"p-2"},"Duration"),t("th",{class:"p-2"},"Attachment"),t("th",{class:"p-2"},"Status"),t("th",{class:"p-2"},"Action")])],-1)),t("tbody",null,[(o(!0),r(g,null,b(u,(s,n)=>(o(),r("tr",{key:`${d}-${n}`,class:"border-t hover:bg-gray-50 text-sm"},[t("td",Nt,a(n+=1),1),t("td",$t,a(m(s.create_date)),1),t("td",Tt,a(s.application_types),1),t("td",Vt,a(s.date),1),t("td",Bt,a($(s.start_time)),1),t("td",Mt,a($(s.end_time)),1),t("td",Et,a(s.duration)+" m ",1),t("td",Ht,[s.attachment?(o(),r("a",{key:0,href:s.attachment,target:"_blank",rel:"noopener",class:"text-blue-600 hover:underline"},e[20]||(e[20]=[t("i",{class:"far fa-eye"},null,-1)]),8,Ot)):(o(),r("span",Rt,"No file"))]),t("td",Ut,a(s.status),1),t("td",jt,[_(y,{to:{name:"ShortLeaveShow",params:{id:s.id}},class:"inline-flex items-center gap-1 text-blue-600 hover:underline"},{default:v(()=>e[21]||(e[21]=[t("i",{class:"far fa-eye"},null,-1),i(" View ")])),_:2,__:[21]},1032,["to"])])]))),128))])])])):x("",!0),d==="exchange_offday"||d==="exchange_shift"?(o(),r("div",Ft,[t("table",Gt,[e[24]||(e[24]=t("thead",{class:"bg-gray-100 text-gray-700 text-xs uppercase"},[t("tr",null,[t("th",{class:"p-2"},"#"),t("th",{class:"p-2"},"Create Date"),t("th",{class:"p-2"},"Current Date"),t("th",{class:"p-2"},"Exchange Date"),t("th",{class:"p-2"},"Shift"),t("th",{class:"p-2"},"Status"),t("th",{class:"p-2"},"Action")])],-1)),t("tbody",null,[(o(!0),r(g,null,b(u,(s,n)=>(o(),r("tr",{key:`${d}-${n}`,class:"border-t hover:bg-gray-50 text-sm"},[t("td",It,a(n+=1),1),t("td",Wt,a(m(s.create_date)),1),t("td",zt,a(s.current_date),1),t("td",Pt,a(s.exchange_date),1),t("td",Jt,a((s==null?void 0:s.shift)||"N/A"),1),t("td",Qt,a(s.status),1),t("td",Xt,[_(y,{to:{name:O[s.type],params:{id:s.id}},class:"inline-flex items-center gap-1 text-blue-600 hover:underline"},{default:v(()=>e[23]||(e[23]=[t("i",{class:"far fa-eye"},null,-1),i(" View ")])),_:2,__:[23]},1032,["to"])])]))),128))])])])):x("",!0),d==="manual_attendance"?(o(),r("div",Yt,[t("table",Zt,[e[26]||(e[26]=t("thead",{class:"bg-gray-100 text-gray-700 text-xs uppercase"},[t("tr",null,[t("th",{class:"p-2"},"#"),t("th",{class:"p-2"},"Create Date"),t("th",{class:"p-2"},"Date"),t("th",{class:"p-2"},"Type"),t("th",{class:"p-2"},"Check In"),t("th",{class:"p-2"},"Check Out"),t("th",{class:"p-2"},"Status"),t("th",{class:"p-2"},"Action")])],-1)),t("tbody",null,[(o(!0),r(g,null,b(u,(s,n)=>(o(),r("tr",{key:`${d}-${n}`,class:"border-t hover:bg-gray-50 text-sm"},[t("td",Kt,a(n+=1),1),t("td",te,a(m(s.create_date)),1),t("td",ee,a(m(s.check_in||s.check_out)),1),t("td",se,a(s.application_types),1),t("td",ae,a(N(s.check_in)||"N/A"),1),t("td",oe,a(N(s.check_out)||"N/A"),1),t("td",re,a(s.status),1),t("td",le,[_(y,{to:{name:"ManualAttendanceShow",params:{id:s.id}},class:"inline-flex items-center gap-1 text-blue-600 hover:underline"},{default:v(()=>e[25]||(e[25]=[t("i",{class:"far fa-eye"},null,-1),i(" View ")])),_:2,__:[25]},1032,["to"])])]))),128))])])])):x("",!0)]))),128))])])}}};export{be as default};
