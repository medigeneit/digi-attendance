import{O as X}from"./OverlyModal-T-RY_Ig4.js";import{c as k,o as y,O as et,a as e,k as S,t as M,w as P,r as v,x as B,q,h as z,U as mt,l as W,j as L,v as K,P as ct,F as dt,e as yt,Z as ft,A as H,y as vt,d as E,g as ot,n as c,m as j,b as $}from"./index-CjQTiVLp.js";import{g as G,b as bt}from"./datetime-Du_mcDA9.js";import{u as nt}from"./company-B69JylNm.js";import{u as it}from"./useTodoProjectStore-DRGVNusT.js";import{u as lt}from"./useTodoStore-CdrjGqyp.js";import{_ as gt}from"./CompanyDepartmentSelectInput-DvojfQLD.js";import{L as tt}from"./LoaderView-CQZ4xFYv.js";import{u as wt}from"./useTaskStore-gae-jqSY.js";import{_ as xt}from"./TaskSelectionInput-DGJcTL8S.js";import{u as rt,f as kt,d as Tt,a as St}from"./useTodoDateStore-C8xzczeG.js";import{_ as Ct}from"./UserChip-BevO34Zs.js";import{a as _t}from"./TodoItemCard-DBwQ_vSK.js";const ht={class:"bg-white border-t px-4 py-4 sticky bottom-0 rounded-b-md shadow-lg shadow-red-600"},Dt={key:0,class:"mb-4 text-red-500 font-medium"},$t={key:0,class:"mb-4 text-blue-500 font-medium"},Vt={class:"flex justify-between items-center gap-4"},It=["disabled"],at={__name:"FormHandler",props:{isSubmitting:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},error:{type:String,default:""}},emits:["submit","clickCancel"],setup(n,{emit:I}){const l=I;return(a,f)=>(y(),k("form",{onSubmit:f[1]||(f[1]=P(g=>l("submit"),["prevent"])),class:"overflow-hidden"},[et(a.$slots,"default"),e("div",ht,[et(a.$slots,"error",{},()=>[n.error?(y(),k("div",Dt,M(n.error),1)):S("",!0)]),n.isSubmitting?(y(),k("div",$t,"Saving changes...")):S("",!0),et(a.$slots,"footer",{},()=>[e("div",Vt,[e("button",{type:"button",onClick:f[0]||(f[0]=g=>l("clickCancel")),class:"btn-3"},"Cancel"),e("button",{disabled:n.isSubmitting||n.isLoading,type:"submit",class:"btn-2"},M(n.isSubmitting?"Saving...":"Save"),9,It)])])])],32))}},Et={class:"relative"},jt=["placeholder"],Rt=["onClick"],ut={__name:"InputWithSuggestions",props:{modelValue:{type:[String,Number],default:null},options:{type:Array,default:()=>[]},label:{type:String,default:"title"},value:{type:String,default:"id"},placeholder:{type:String,default:"Select or type..."}},emits:["update:modelValue","update:inputValue"],setup(n,{emit:I}){const l=n,a=I,f=v(""),g=v(!1),s=v(null),b=v(null),r=v({top:"0px",left:"0px",width:"0px"}),x=B(()=>{if(!f.value)return l.options;const o=f.value.toLowerCase();return l.options.filter(_=>{const T=_[l.label];return T&&String(T).toLowerCase().includes(o)})});function i(){if(s.value){const o=s.value.getBoundingClientRect();r.value={top:`${o.bottom}px`,left:`${o.left}px`,width:`${o.width}px`}}}function p(o){f.value=o[l.label],a("update:modelValue",o[l.value]),a("update:inputValue",o[l.label]),g.value=!1}function t(){g.value=!0,i(),a("update:inputValue",f.value);const o=l.options.find(_=>{var T;return((T=_[l.label])==null?void 0:T.toLowerCase())===f.value.toLowerCase()});o?a("update:modelValue",o[l.value]):a("update:modelValue",null)}function C(){g.value=!0,i()}q(()=>l.modelValue,o=>{if(o){const _=l.options.find(T=>T[l.value]==o);_&&(f.value=_[l.label],a("update:inputValue",_[l.label]))}},{immediate:!0}),q(()=>l.options,()=>{if(l.modelValue){const o=l.options.find(_=>_[l.value]==l.modelValue);o&&(f.value=o[l.label],a("update:inputValue",o[l.label]))}}),q(g,o=>{o&&H(()=>i())});function m(o){s.value&&s.value.contains(o.target)||b.value&&b.value.contains(o.target)||(g.value=!1)}function R(){g.value&&i()}function h(){g.value&&i()}return z(()=>{document.addEventListener("click",m),window.addEventListener("scroll",R,!0),window.addEventListener("resize",h)}),mt(()=>{document.removeEventListener("click",m),window.removeEventListener("scroll",R,!0),window.removeEventListener("resize",h)}),(o,_)=>(y(),k("div",Et,[W(e("input",{ref_key:"inputRef",ref:s,type:"text","onUpdate:modelValue":_[0]||(_[0]=T=>f.value=T),onInput:t,onFocus:C,class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500 outline-none",placeholder:n.placeholder},null,40,jt),[[K,f.value]]),(y(),L(ft,{to:"body"},[g.value&&x.value.length>0?(y(),k("ul",{key:0,ref_key:"dropdownRef",ref:b,class:"fixed z-[9999] bg-white border rounded-md shadow-lg max-h-60 overflow-y-auto mt-1",style:ct(r.value)},[(y(!0),k(dt,null,yt(x.value,T=>(y(),k("li",{key:T[n.value],onClick:U=>p(T),class:"px-4 py-2 hover:bg-blue-50 cursor-pointer text-sm text-gray-700 block text-left"},M(T[n.label]),9,Rt))),128))],4)):S("",!0)]))]))}},pt={__name:"TodoTypeInput",props:{todoType:{type:String,default:"task"},todoTypeId:{type:[String,Number],default:null},show:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1}},emits:["update:todoType","update:todoTypeId","update:show"],setup(n,{emit:I}){const l=n,a=I,f=B({get:()=>l.todoTypeId,set:i=>a("update:todoTypeId",i)}),g=B({get:()=>l.show,set:i=>a("update:show",i)}),s=v(null),b=v({});function r(){if(!(s!=null&&s.value))return;const i=s.value.getBoundingClientRect(),p=window.innerHeight,t=300,m=p-i.bottom<t;b.value={position:"fixed",top:m?i.top-t+"px":i.bottom+"px",left:i.left+"px",width:i.width+"px",zIndex:5e3}}z(async()=>{await H(),window.addEventListener("resize",r),document.addEventListener("scroll",r)});const x=wt();return q(()=>g.value,async i=>{i&&await x.fetchAllMyTasks()}),vt(()=>{window.removeEventListener("resize",r),document.removeEventListener("scroll",r)}),(i,p)=>(y(),k("div",null,[E(xt,{show:g.value,"onUpdate:show":p[0]||(p[0]=t=>g.value=t),taskId:f.value,"onUpdate:taskId":p[1]||(p[1]=t=>f.value=t),readonly:n.readonly},null,8,["show","taskId","readonly"])]))}},Lt={class:"p-4 min-h-[10vh] max-h-[50vh] overflow-y-auto"},Mt={class:"mb-4"},Ut={class:"mb-4"},Ot=["readonly"],Pt={class:"mb-4"},At={class:"mb-4"},Nt={__name:"TodoAddForm",props:{date:{type:String,default:G(new Date)},userRole:{type:String,default:"employee"},todoType:{type:String,default:"task"},todoTypeId:{type:String,default:null},readonlyValues:{type:Object,default:()=>({date:!1,todo_type_id:!1})}},emits:["update","cancelClick"],setup(n,{emit:I}){const l=n,a=v(),f=v(!1),g=v(),s=lt(),b=it(),r=ot(),x=nt(),i=v(null),p=v(""),t=v(null),C=I,m=v({title:"",date:l.date||"",todo_type:"task",todo_type_id:""});async function R(){try{a.value="submitting";const h={...m.value};if(h.todo_type_id||(delete h.todo_type_id,delete h.todo_type),i.value)h.todo_project_id=i.value;else if(p.value){const o=await b.createProject({title:p.value,department_id:t.value});h.todo_project_id=o.id}await s.createTodo(h,{returnWith:l.userRole!=="employee"?"user,department,company":""}),C("update")}finally{a.value=""}}return q(()=>({date:l.date,todo_type:l.todoType,todo_type_id:l.todoTypeId}),h=>{m.value={...m.value,...h}},{immediate:!0}),z(async()=>{var h;await H(),(h=g.value)==null||h.focus(),r.isAdminMood&&await x.fetchMyCompanies({with:"departments"}),await b.fetchProjects()}),(h,o)=>(y(),k("div",{onClick:o[9]||(o[9]=_=>f.value=!1)},[c(s).loading?(y(),L(tt,{key:0,class:"absolute inset-0 bg-opacity-80 text-center py-4 text-gray-500 z-10 flex items-center justify-center"},{default:j(()=>o[10]||(o[10]=[$(" Loading... ")])),_:1,__:[10]})):S("",!0),E(at,{onSubmit:R,onClickCancel:o[8]||(o[8]=_=>C("cancelClick")),isSubmitting:a.value=="submitting",error:c(s).error,class:"rounded-md relative"},{default:j(()=>{var _,T,U;return[o[16]||(o[16]=e("div",{class:"border-b py-2 px-4"},[e("h2",{class:"text-xl font-semibold"},"Add Todo")],-1)),e("div",Lt,[e("div",Mt,[o[11]||(o[11]=e("label",{class:"block text-gray-700 font-medium mb-1 text-sm"},"Title",-1)),W(e("input",{ref_key:"titleRef",ref:g,"onUpdate:modelValue":o[0]||(o[0]=D=>m.value.title=D),required:"",placeholder:"Enter todo title",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[K,m.value.title]])]),e("div",Ut,[o[12]||(o[12]=e("label",{class:"block text-gray-700 font-medium mb-1 text-sm"},"Date",-1)),W(e("input",{readonly:(_=n.readonlyValues)==null?void 0:_.date,"onUpdate:modelValue":o[1]||(o[1]=D=>m.value.date=D),type:"date",required:"",placeholder:"Enter todo title",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,8,Ot),[[K,m.value.date]])]),c(r).isAdminMood?(y(),L(gt,{key:0,modelValue:t.value,"onUpdate:modelValue":o[2]||(o[2]=D=>t.value=D),companies:((T=c(x))==null?void 0:T.myCompanies)||[],class:"mb-4"},{label:j(()=>o[13]||(o[13]=[e("label",{class:"block text-gray-700 font-medium mb-1 text-sm"},[$(" Project Department "),e("span",{class:"text-gray-500"},"(Optional - for new project)")],-1)])),_:1},8,["modelValue","companies"])):S("",!0),e("div",Pt,[o[14]||(o[14]=e("label",{class:"block text-gray-700 font-medium mb-1 text-sm"},[$(" Issue/Website/Project "),e("span",{class:"text-gray-500"},"(Optional)")],-1)),E(ut,{modelValue:i.value,"onUpdate:modelValue":o[3]||(o[3]=D=>i.value=D),"onUpdate:inputValue":o[4]||(o[4]=D=>p.value=D),options:c(b).projects,label:"title",value:"id",placeholder:"Select or type project..."},null,8,["modelValue","options"])]),e("div",At,[o[15]||(o[15]=e("label",{class:"block text-gray-700 font-medium mb-1 text-sm"},"Task (optional)",-1)),E(pt,{show:f.value,"onUpdate:show":o[5]||(o[5]=D=>f.value=D),todoType:m.value.todo_type,"onUpdate:todoType":o[6]||(o[6]=D=>m.value.todo_type=D),todoTypeId:m.value.todo_type_id,"onUpdate:todoTypeId":o[7]||(o[7]=D=>m.value.todo_type_id=D),readonly:(U=n.readonlyValues)==null?void 0:U.todo_type_id},null,8,["show","todoType","todoTypeId","readonly"])])])]}),_:1,__:[16]},8,["isSubmitting","error"])]))}},Bt={class:"p-4 min-h-[10vh] max-h-[50vh] overflow-y-auto"},zt={class:"mb-4 text-md"},Ft={class:"font-semibold"},qt={class:"mb-2"},Gt={__name:"TodoDateAddForm",props:{date:{type:[String,Number],default:G(new Date)},todoId:{type:[String,Number],required:!0},userRole:{type:String,default:"employee"}},emits:["update","cancelClick"],setup(n,{emit:I}){const l=n,a=v(),f=v(!1),g=v(),s=lt(),b=rt(),r=I,x=v({date:l.date||"",todo_id:l.todoId});async function i(){try{a.value="submitting",await b.createTodoDate(x.value),r("update")}finally{a.value=""}}return z(async()=>{var p;await H(),await s.fetchTodo(l.todoId),(p=g.value)==null||p.focus()}),(p,t)=>(y(),k("div",{onClick:t[2]||(t[2]=C=>f.value=!1)},[c(s).loading?(y(),L(tt,{key:0,class:"absolute inset-0 bg-opacity-80 text-center py-4 text-gray-500 z-10 flex items-center justify-center"},{default:j(()=>t[3]||(t[3]=[$(" Loading... ")])),_:1,__:[3]})):S("",!0),E(at,{onSubmit:i,onClickCancel:t[1]||(t[1]=C=>r("cancelClick")),isSubmitting:a.value=="submitting",error:c(b).error,class:"rounded-md relative"},{default:j(()=>{var C;return[t[6]||(t[6]=e("div",{class:"border-b py-2 px-4"},[e("h2",{class:"text-xl font-semibold"},"Carry Todo To Date")],-1)),e("div",Bt,[e("div",zt,[t[4]||(t[4]=$(" TODO: ")),e("span",Ft,M((C=c(s).todo)==null?void 0:C.title),1)]),e("div",qt,[t[5]||(t[5]=e("span",{class:"font-semibold"}," Date ",-1)),W(e("input",{"onUpdate:modelValue":t[0]||(t[0]=m=>x.value.date=m),type:"date",multiple:"",required:"",placeholder:"Enter todo title",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[K,x.value.date]])])])]}),_:1,__:[6]},8,["isSubmitting","error"])]))}},Wt={key:0,class:"mb-4 text-red-500 font-medium"},Kt={key:1,class:"mb-4 text-red-500 font-medium"},Ht={class:"p-4 min-h-[10vh] max-h-[50vh] overflow-y-auto"},Qt={class:"mb-5"},Yt={class:"relative group"},Zt={class:"mb-5"},Jt={class:"mb-8"},Xt={__name:"TodoEditForm",props:{date:{type:String,default:G(new Date)},todo:{type:Object,default:()=>({})}},emits:["update","cancelClick"],setup(n,{emit:I}){var F;const l=n,a=v(),f=v(!1),g=v(),s=lt(),b=it(),r=ot(),x=nt(),i=v(null),p=v(""),t=v(null),C=I,m=v({title:"",todo_type:"task",todo_type_id:"",status:"PENDING"}),R=v({id:null,repeat_type:"daily",start_date:((F=l.todo)==null?void 0:F.date)||l.date||G(new Date),end_date:null,weekly_day:null,monthly_mode:null,monthly_value:null,monthly_week:null,yearly_month:null,yearly_day:null}),h=v(!1),o=v({});async function _(){var w,d,u,V,st;await s.fetchTodo((w=l.todo)==null?void 0:w.id),m.value.title=(d=s.todo)==null?void 0:d.title,m.value.todo_type_id=(u=s.todo)==null?void 0:u.todoable_id,m.value.status=((V=s.todo)==null?void 0:V.status)||"PENDING",i.value=((st=s.todo)==null?void 0:st.todo_project_id)||null}const T=v(null);async function U(){var w,d;try{const{data:u}=await kt(l.todo.id),V=u==null?void 0:u.setting;V?(h.value=!0,T.value=V.id,R.value={repeat_type:V.repeat_type??"daily",start_date:V.start_date??R.value.start_date,end_date:V.end_date??null,weekly_day:V.weekly_day??null,monthly_mode:V.monthly_mode??null,monthly_value:V.monthly_value??null,monthly_week:V.monthly_week??null,yearly_month:V.yearly_month??null,yearly_day:V.yearly_day??null}):R.value.id=null}catch(u){A.value=(d=(w=u==null?void 0:u.response)==null?void 0:w.data)==null?void 0:d.message,console.error("Load setting failed:",(u==null?void 0:u.message)||u)}}async function D(){const w={title:m.value.title,todo_type:m.value.todo_type,todo_type_id:m.value.todo_type_id,status:m.value.status};if(i.value)w.todo_project_id=i.value;else if(p.value){const d=await b.createProject({title:p.value,department_id:t.value});w.todo_project_id=d.id}await s.updateTodo(l.todo.id,w)}async function Q(){var w,d;if(!h.value)T.value&&await Tt(l.todo.id,T.value);else{const u=(w=o.value)!=null&&w.buildPayload?o.value.buildPayload():{...R.value};u.start_date||(u.start_date=((d=l.todo)==null?void 0:d.date)||l.date||G(new Date)),await St(l.todo.id,u)}}const Y=w=>{var d,u;return((u=(d=w==null?void 0:w.response)==null?void 0:d.data)==null?void 0:u.message)||(w==null?void 0:w.message)||"Something went wrong"};async function Z(){const[w,d]=await Promise.allSettled([D(),Q()]),u=w.status==="fulfilled",V=d.status==="fulfilled";V||(A.value=Y(d.reason)),u&&V&&C("update")}const N=v(!1),A=v(!1);async function J(){var w;r.isAdminMood&&await x.fetchMyCompanies({with:"departments"}),b.fetchProjects(),await _(),N.value=!0,await U(),N.value=!1,await H(),(w=g.value)==null||w.focus()}const O=B(()=>s.loading||N.value);return z(()=>{J()}),(w,d)=>(y(),k("div",{class:"relative",onClick:d[7]||(d[7]=u=>f.value=!1)},[O.value?(y(),L(tt,{key:0,class:"absolute inset-0 bg-opacity-80 text-center py-4 text-gray-500 z-10 flex items-center justify-center"},{default:j(()=>d[8]||(d[8]=[$(" Loading... ")])),_:1,__:[8]})):S("",!0),E(at,{onSubmit:Z,onClickCancel:d[6]||(d[6]=u=>C("cancelClick")),isSubmitting:a.value=="submitting",isLoading:O.value,id:"todoEditForm"},{error:j(()=>[e("div",null,[c(s).error?(y(),k("div",Wt,M(c(s).error),1)):S("",!0),A.value?(y(),k("div",Kt,M(A.value),1)):S("",!0)])]),default:j(()=>[d[14]||(d[14]=e("div",{class:"border-b py-2 px-4"},[e("h2",{class:"text-xl font-semibold"},"Edit Todo")],-1)),e("div",Ht,[d[13]||(d[13]=e("div",{class:"text-xs text-red-800 mb-6"},[e("strong",null,"Tips:"),$(" If you change the todo, it will change to all the concurrent dates ")],-1)),e("div",Qt,[d[10]||(d[10]=e("label",{class:"block text-slate-500 font-bold text-[11px] uppercase tracking-wider mb-1.5 ml-1"}," Title ",-1)),e("div",Yt,[W(e("input",{ref_key:"titleRef",ref:g,"onUpdate:modelValue":d[0]||(d[0]=u=>m.value.title=u),required:"",placeholder:"Enter todo title",class:"w-full pl-10 pr-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-4 focus:ring-sky-500/10 focus:border-sky-400 outline-none transition-all duration-200 font-medium text-slate-700"},null,512),[[K,m.value.title]]),d[9]||(d[9]=e("div",{class:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 group-focus-within:text-sky-500 transition-colors"},[e("i",{class:"fas fa-edit text-sm"})],-1))])]),e("div",Zt,[d[11]||(d[11]=e("label",{class:"block text-slate-500 font-bold text-[11px] uppercase tracking-wider mb-1.5 ml-1"},[$(" Issue/Website/Project "),e("span",{class:"text-[10px] lowercase font-normal"},"(Optional)")],-1)),E(ut,{modelValue:i.value,"onUpdate:modelValue":d[1]||(d[1]=u=>i.value=u),"onUpdate:inputValue":d[2]||(d[2]=u=>p.value=u),options:c(b).projects,value:"id",label:"title",placeholder:"Select or type project..."},null,8,["modelValue","options"])]),e("div",Jt,[d[12]||(d[12]=e("label",{class:"block text-slate-500 font-bold text-[11px] uppercase tracking-wider mb-1.5 ml-1"},[$(" Task ID "),e("span",{class:"text-[10px] lowercase font-normal"},"(Optional)")],-1)),E(pt,{show:f.value,"onUpdate:show":d[3]||(d[3]=u=>f.value=u),todoType:m.value.todo_type,"onUpdate:todoType":d[4]||(d[4]=u=>m.value.todo_type=u),todoTypeId:m.value.todo_type_id,"onUpdate:todoTypeId":d[5]||(d[5]=u=>m.value.todo_type_id=u)},null,8,["show","todoType","todoTypeId"])])])]),_:1,__:[14]},8,["isSubmitting","isLoading"])]))}},te={class:"relative"},ee={class:"min-h-[10vh] max-h-[50vh] overflow-y-auto p-4"},oe={class:"mb-4 flex justify-between items-end"},le={class:"mb-4 flex justify-between items-center group"},ae={class:"text-sm font-semibold text-slate-700"},se={key:0,class:"mt-1 flex items-center gap-2 mb-4"},de={class:"border border-sky-400 rounded-full text-sky-500 font-semibold bg-sky-50 px-1 py-0.5 text-xs inline-block"},ne={class:"mt-6 p-4 bg-slate-50 rounded-xl border border-slate-200 shadow-inner"},ie={class:"flex items-center justify-between mb-4"},re={class:"flex items-center gap-2 px-3 py-1.5 bg-white rounded-full shadow-sm border border-slate-100"},ue={class:"text-xs font-bold text-slate-700 tracking-wide"},pe={key:0},me={class:"grid grid-cols-2 gap-3"},ce={key:1,class:"py-4 text-center text-emerald-600 bg-emerald-50 rounded-lg border border-emerald-100"},ye={class:"flex justify-between items-center gap-4 py-4 px-4 border-t"},fe={key:0,class:"ml-auto flex items-center gap-2"},ve={__name:"TodoShow",props:{todoDate:{type:Object,default:()=>{}}},emits:["cancelClick","clickEdit","update","clickAddTodoDate"],setup(n,{emit:I}){const l=n,a=rt(),f=ot(),g=I;async function s(){var p;console.log({todo_date:"dd"}),await a.fetchTodoDate((p=l.todoDate)==null?void 0:p.id)}const b=B(()=>{var p,t;return(p=a.todo_date)!=null&&p.date?new Date((t=a.todo_date)==null?void 0:t.date):null}),r=B(()=>{var p,t,C;return((t=(p=a.todo_date)==null?void 0:p.user)==null?void 0:t.id)===((C=f.user)==null?void 0:C.id)});async function x(p){var t;confirm(`Are your sure want to delete todo
'${(t=a.todo_date)==null?void 0:t.title}'`)&&(await a.deleteTodoDate(p.id),g("update"))}async function i(p,t){var C;confirm(`Are your sure want to compete todo
'${(C=a.todo_date)==null?void 0:C.title}'`)&&(await a.updateStatus(p.id,t),g("update"))}return z(async()=>{await s()}),(p,t)=>{var C,m,R,h,o,_,T,U,D,Q,Y,Z,N,A;return y(),k("div",te,[c(a).loading?(y(),L(tt,{key:0,class:"absolute inset-0 bg-opacity-80 text-center py-4 text-gray-500 z-10 flex items-center justify-center"},{default:j(()=>t[8]||(t[8]=[$(" Loading... ")])),_:1,__:[8]})):S("",!0),e("div",null,[t[21]||(t[21]=e("div",{class:"border-b py-2 px-4"},[e("h2",{class:"text-xl font-semibold"},"Show Todo")],-1)),e("div",ee,[e("div",oe,[e("div",null,[t[9]||(t[9]=e("div",{class:"text-xs text-gray-500"},"Todo",-1)),$(" "+M((C=c(a).todo_date)==null?void 0:C.title),1)]),e("button",{class:"btn-2 bg-sky-400 text-white hover:bg-sky-600 hover:text-white bg-none",onClick:t[0]||(t[0]=P(J=>{var O;return g("clickEdit",(O=c(a).todo_date)==null?void 0:O.todo)},["prevent","stop"]))},t[10]||(t[10]=[e("i",{class:"fas fa-pen"},null,-1),$(" Edit Todo ")]))]),t[20]||(t[20]=e("hr",{class:"mb-4"},null,-1)),e("div",le,[e("div",null,[t[11]||(t[11]=e("div",{class:"font-semibold text-[10px] text-slate-400 uppercase tracking-wider mb-0.5"}," Date ",-1)),e("div",ae,M(c(bt)(b.value,{weekDay:"long"})),1)]),r.value&&!c(a).loading?(y(),k("button",{key:0,class:"btn-2 bg-emerald-500 text-white hover:bg-emerald-700 hover:text-white bg-none",onClick:t[1]||(t[1]=P(J=>{var O,F;return g("clickAddTodoDate",(O=c(a).todo_date)==null?void 0:O.todo_id,(F=c(a).todo_date)==null?void 0:F.date)},["prevent","stop"]))},t[12]||(t[12]=[e("i",{class:"fas fa-calendar-plus mr-1"},null,-1),$(" Add to another date ")]))):S("",!0)]),(m=n.todoDate)!=null&&m.user?(y(),k("div",se,[E(Ct,{user:n.todoDate.user,"avatar-size":"xsmall"},null,8,["user"]),e("div",de,M((h=(R=n.todoDate.user)==null?void 0:R.department)==null?void 0:h.name),1)])):S("",!0),e("div",ne,[e("div",ie,[t[13]||(t[13]=e("div",{class:"text-[10px] font-bold text-slate-400 uppercase tracking-widest"}," Current Status ",-1)),e("div",re,[(o=c(a))!=null&&o.todo_date?(y(),L(_t,{key:0,todoDate:(_=c(a))==null?void 0:_.todo_date},null,8,["todoDate"])):S("",!0),e("span",ue,M((T=c(a).todo_date)==null?void 0:T.status),1)])]),r.value&&!c(a).loading&&((U=c(a).todo_date)==null?void 0:U.status)!=="COMPLETED"?(y(),k("div",pe,[t[18]||(t[18]=e("div",{class:"text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-3 text-center"}," Quick Transitions ",-1)),e("div",me,[((D=c(a).todo_date)==null?void 0:D.status)!=="WORKING"?(y(),k("button",{key:0,class:"btn-2 py-2.5 from-amber-600 to-amber-400 text-white hover:scale-[1.02] active:scale-[0.98] shadow-md transition-all duration-200",onClick:t[2]||(t[2]=P(()=>i(c(a).todo_date,"WORKING"),["prevent","stop"]))},t[14]||(t[14]=[e("i",{class:"fas fa-sync-alt mr-1"},null,-1),$(" Working ")]))):S("",!0),((Q=c(a).todo_date)==null?void 0:Q.status)!=="COMPLETED"&&((Y=c(a).todo_date)==null?void 0:Y.status)!=="BACK_LOG"?(y(),k("button",{key:1,class:"btn-2 py-2.5 from-emerald-600 to-emerald-400 text-white hover:scale-[1.02] active:scale-[0.98] shadow-md transition-all duration-200",onClick:t[3]||(t[3]=P(()=>i(c(a).todo_date,"COMPLETED"),["prevent","stop"]))},t[15]||(t[15]=[e("i",{class:"fas fa-check-double mr-1"},null,-1),$(" Complete ")]))):S("",!0),((Z=c(a).todo_date)==null?void 0:Z.status)!=="DEPENDANT"?(y(),k("button",{key:2,class:"btn-4 py-2 bg-white border border-slate-200 text-slate-600 hover:bg-orange-50 hover:text-orange-600 hover:border-orange-200 hover:scale-[1.02] active:scale-[0.98] shadow-sm transition-all duration-200",onClick:t[4]||(t[4]=P(()=>i(c(a).todo_date,"DEPENDANT"),["prevent","stop"]))},t[16]||(t[16]=[e("i",{class:"fas fa-pause-circle mr-1"},null,-1),$(" Dependant / Pause ")]))):S("",!0),((N=c(a).todo_date)==null?void 0:N.status)!=="BACK_LOG"?(y(),k("button",{key:3,class:"btn-4 py-2 bg-white border border-slate-200 text-slate-600 hover:bg-purple-50 hover:text-purple-600 hover:border-purple-200 hover:scale-[1.02] active:scale-[0.98] shadow-sm transition-all duration-200",onClick:t[5]||(t[5]=P(()=>i(c(a).todo_date,"BACK_LOG"),["prevent","stop"]))},t[17]||(t[17]=[e("i",{class:"fas fa-history mr-1"},null,-1),$(" Backlog ")]))):S("",!0)])])):((A=c(a).todo_date)==null?void 0:A.status)==="COMPLETED"?(y(),k("div",ce,t[19]||(t[19]=[e("i",{class:"fas fa-check-circle text-2xl mb-1"},null,-1),e("div",{class:"text-xs font-bold uppercase tracking-wider"},"This Todo is Completed",-1)]))):S("",!0)])])]),e("div",ye,[e("button",{type:"button",onClick:t[6]||(t[6]=J=>g("cancelClick")),class:"btn-3"},"Cancel"),r.value&&!c(a).loading?(y(),k("div",fe,[e("button",{class:"btn-2-red",onClick:t[7]||(t[7]=P(()=>x(c(a).todo_date),["prevent","stop"]))},t[22]||(t[22]=[e("i",{class:"fas fa-trash-alt"},null,-1),$(" Delete ")]))])):S("",!0)])])}}},Ie={__name:"TodoCreateEditShow",props:{todoModal:{type:Object,required:!0},userRole:{type:String,required:"employee"}},emits:["cancelClick","todoUpdate","todoDateUpdate","clickEdit","clickDelete","clickChangeStatus","clickAddTodoDate"],setup(n,{emit:I}){const l=I;function a(){l("todoUpdate")}function f(){l("todoDateUpdate")}return(g,s)=>(y(),k(dt,null,[n.todoModal.action=="add"?(y(),L(X,{key:0},{default:j(()=>{var b,r,x,i;return[E(Nt,{onCancelClick:s[0]||(s[0]=p=>l("cancelClick")),onUpdate:a,date:(b=n.todoModal)==null?void 0:b.date,todoType:(r=n.todoModal)==null?void 0:r.todoType,todoTypeId:(x=n.todoModal)==null?void 0:x.todoTypeId,readonlyValues:((i=n.todoModal)==null?void 0:i.formReadonlyValues)||{},userRole:n.userRole},null,8,["date","todoType","todoTypeId","readonlyValues","userRole"])]}),_:1})):S("",!0),n.todoModal.action=="addDate"?(y(),L(X,{key:1},{default:j(()=>{var b,r,x;return[E(Gt,{onCancelClick:s[1]||(s[1]=i=>l("cancelClick")),onUpdate:f,date:(b=n.todoModal)==null?void 0:b.date,todoId:(r=n.todoModal)==null?void 0:r.todo_id,userRole:n.userRole,readonlyValues:((x=n.todoModal)==null?void 0:x.formReadonlyValues)||{}},null,8,["date","todoId","userRole","readonlyValues"])]}),_:1})):S("",!0),n.todoModal.action=="edit"?(y(),L(X,{key:2},{default:j(()=>{var b,r;return[E(Xt,{onCancelClick:s[2]||(s[2]=x=>l("cancelClick")),onUpdate:a,todo:(b=n.todoModal)==null?void 0:b.todo,userRole:n.userRole,readonlyValues:((r=n.todoModal)==null?void 0:r.formReadonlyValues)||{}},null,8,["todo","userRole","readonlyValues"])]}),_:1})):S("",!0),n.todoModal.action=="show"?(y(),L(X,{key:3},{default:j(()=>{var b;return[E(ve,{onCancelClick:s[3]||(s[3]=r=>l("cancelClick")),onUpdate:f,onClickEdit:s[4]||(s[4]=r=>l("clickEdit",r)),onClickAddTodoDate:s[5]||(s[5]=(...r)=>l("clickAddTodoDate",...r)),onClickDelete:s[6]||(s[6]=r=>l("clickDelete",r)),onClickChangeStatus:s[7]||(s[7]=(r,x)=>l("clickChangeStatus",r,x)),todoDate:(b=n.todoModal)==null?void 0:b.todo,userRole:n.userRole},null,8,["todoDate","userRole"])]}),_:1})):S("",!0)],64))}};export{Ie as _};
