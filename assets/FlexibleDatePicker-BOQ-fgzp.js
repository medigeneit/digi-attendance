import{r as $,x as l,c as p,o as y,a as s,k as J,j as N,H as E,F as H,e as U,t as S}from"./index-4cVhF2CH.js";const q={class:"flex flex-col gap-1 relative"},z={class:"flex flex-wrap items-center gap-2"},G=["disabled"],K=["value"],Q={key:1,class:"relative"},T=["disabled"],W=["value"],X={key:2,class:"relative"},Z=["disabled"],ee=["value"],ae={__name:"FlexibleDatePicker",props:{modelValue:{type:Object,default:()=>({year:null,month:null,day:null})},yearOptions:{type:Array,default:()=>[]},label:{type:String,default:"Period"},disabled:{type:Boolean,default:!1},showSummary:{type:Boolean,default:!0},showYear:{type:Boolean,default:!0},showMonth:{type:Boolean,default:!0},showDate:{type:Boolean,default:!0}},emits:["update:modelValue","change"],setup(u,{emit:O}){const o=u,P=O,m=$(null),f=$(null),M=new Date,i=M.getFullYear(),h=M.getMonth()+1,g=M.getDate();function w(e,t){return new Date(e,t,0).getDate()}const r=l({get(){var e;return((e=o.modelValue)==null?void 0:e.year)||i},set(e){const t=Number(e)||i,a=v.value,n=Math.min(c.value,w(t,a));b({year:t,month:a,day:n})}}),v=l({get(){var e;return((e=o.modelValue)==null?void 0:e.month)||h},set(e){const t=Number(e)||h,a=r.value,n=Math.min(c.value,w(a,t));b({year:a,month:t,day:n})}}),c=l({get(){var e;return((e=o.modelValue)==null?void 0:e.day)||g},set(e){const t=Number(e)||g,a=r.value,n=v.value,d=w(a,n);b({year:a,month:n,day:Math.min(t,d)})}}),Y=l(()=>{if(o.yearOptions&&o.yearOptions.length)return o.yearOptions;const e=i,t=[];for(let a=e-3;a<=e+1;a++)t.push(a);return t}),_=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],V=l(()=>{const e=Number(v.value)-1;return e<0||e>11?"Month":_[e]}),j=l(()=>{const e=c.value;return e?String(e).padStart(2,"0"):"Day"}),C=l(()=>{const e=r.value,t=String(v.value).padStart(2,"0");return`${e}-${t}`}),F=l(()=>{const e=r.value,t=String(v.value).padStart(2,"0"),a=String(c.value).padStart(2,"0");return`${e}-${t}-${a}`});l(()=>{const e=r.value,t=V.value,a=c.value,n=[];return o.showDate&&n.push(String(a).padStart(2,"0")),o.showMonth&&n.push(t),o.showYear&&n.push(String(e)),n.length?n.join(" "):`${String(a).padStart(2,"0")} ${t} ${e}`});function I(){!o.showMonth||!m.value||o.disabled||(typeof m.value.showPicker=="function"?m.value.showPicker():m.value.click())}function L(){!o.showDate||!f.value||o.disabled||(typeof f.value.showPicker=="function"?f.value.showPicker():f.value.click())}function R(e){var k;const t=((k=e==null?void 0:e.target)==null?void 0:k.value)||"";if(!t)return;const[a,n]=t.split("-"),d=Number(a)||i,x=Number(n)||h,D=Math.min(c.value,w(d,x));b({year:d,month:x,day:D})}function A(e){var B;const t=((B=e==null?void 0:e.target)==null?void 0:B.value)||"";if(!t)return;const[a,n,d]=t.split("-"),x=Number(a)||i,D=Number(n)||h,k=Number(d)||g;b({year:x,month:D,day:k})}function b(e){const t={year:e.year||i,month:e.month||h,day:e.day||g};P("update:modelValue",t),P("change",t)}return(e,t)=>(y(),p("div",q,[s("div",z,[u.showYear?J((y(),p("select",{key:0,"onUpdate:modelValue":t[0]||(t[0]=a=>r.value=a),disabled:u.disabled,class:"input-1 py-1.5 px-3 rounded-full text-xs font-semibold uppercase tracking-wide text-slate-500 border-slate-200 bg-slate-50 disabled:opacity-50"},[(y(!0),p(H,null,U(Y.value,a=>(y(),p("option",{key:a,value:a},S(a),9,K))),128))],8,G)),[[E,r.value]]):N("",!0),u.showMonth?(y(),p("div",Q,[s("button",{type:"button",onClick:I,disabled:u.disabled,class:"input-1 flex items-center justify-between gap-2 px-3 py-2 rounded-full text-xs font-semibold uppercase tracking-wide text-slate-500 border-slate-200 bg-white shadow-sm disabled:opacity-50"},[t[1]||(t[1]=s("i",{class:"far fa-calendar-alt text-slate-400"},null,-1)),s("span",null,S(V.value)+" - "+S(r.value),1),t[2]||(t[2]=s("i",{class:"far fa-chevron-down text-[10px] text-slate-400"},null,-1))],8,T),s("input",{ref_key:"monthPickerRef",ref:m,type:"month",class:"pointer-events-none absolute inset-0 opacity-0",value:C.value,onChange:R},null,40,W)])):N("",!0),u.showDate?(y(),p("div",X,[s("button",{type:"button",onClick:L,disabled:u.disabled,class:"input-1 flex items-center justify-between gap-2 px-3 py-2 rounded-full text-xs font-semibold uppercase tracking-wide text-slate-500 border-slate-200 bg-white shadow-sm disabled:opacity-50"},[t[3]||(t[3]=s("i",{class:"far fa-calendar text-slate-400"},null,-1)),s("span",null,S(j.value),1),t[4]||(t[4]=s("i",{class:"far fa-chevron-down text-[10px] text-slate-400"},null,-1))],8,Z),s("input",{ref_key:"datePickerRef",ref:f,type:"date",class:"pointer-events-none absolute inset-0 opacity-0",value:F.value,onChange:A},null,40,ee)])):N("",!0)])]))}};export{ae as _};
