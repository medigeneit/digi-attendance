import{L}from"./LoaderView-FEbZ0MDp.js";import{_ as N}from"./FlexibleDatePicker-CI0dSAyS.js";import{u as D,g as V,r as B,x as n,q as R,p as j,c as r,o as l,a as e,d as u,l as h,b as f,m as q,t as i,F as $,e as F,s as U,j as z}from"./index-BOfvMjcu.js";import{u as P}from"./manual-attendance-D8MmKsxA.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const T={class:"space-y-6 px-4 py-5"},E={class:"rounded-2xl border border-slate-200 bg-white px-4 py-4 shadow-sm md:px-6"},G={class:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between"},I={class:"flex flex-wrap items-center gap-2"},O={key:0,class:"text-center py-10"},Y={key:1,class:"space-y-4"},H={key:0,class:"rounded-2xl border border-dashed border-slate-300 bg-slate-50 p-6 text-center text-slate-600"},J={class:"text-sm text-slate-500"},K={key:1,class:"rounded-2xl border border-slate-200 bg-white shadow-sm"},Q={class:"flex items-center justify-between border-b border-slate-100 px-5 py-3"},W={class:"text-sm font-semibold text-slate-600"},X={class:"overflow-x-auto"},Z={class:"min-w-full divide-y divide-slate-100 text-sm"},ee={class:"divide-y divide-slate-100"},te={class:"px-4 py-3 font-semibold text-slate-600"},se={class:"px-4 py-3 text-slate-700"},oe={class:"px-4 py-3 text-slate-700"},re={class:"px-4 py-3 text-slate-700"},le={class:"px-4 py-3 text-slate-700"},ie={class:"px-4 py-3"},ae={class:"px-4 py-3"},de={class:"flex items-center justify-end gap-2"},ne=["onClick"],be={__name:"MyManualAttendanceList",setup(ue){const _=D(),d=P();V();const p=new Date,c=B({year:p.getFullYear(),month:p.getMonth()+1,day:p.getDate()}),g=o=>o.toString().padStart(2,"0"),y=n(()=>{const o=c.value||{};return!o.year||!o.month?"":`${o.year}-${g(o.month)}`}),v=o=>{d.fetchUserManualAttendances({date:o})};R(y,o=>{o&&v(o)},{immediate:!0});const x=n(()=>d.manualAttendances||[]),b=n(()=>Array.isArray(x.value)?x.value.length:0),w=n(()=>{const o=y.value,[s,a]=(o||"").split("-");return!s||!a?"Month":new Date(Number(s),Number(a)-1).toLocaleString("en-US",{month:"long",year:"numeric"})}),A=o=>o?new Date(o).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):"N/A",k=o=>{const s=(o||"").toLowerCase();return["approved","accepted"].includes(s)?"border border-emerald-200 bg-emerald-50 text-emerald-700":["rejected","declined","cancelled"].includes(s)?"border border-red-200 bg-red-50 text-red-700":s==="pending"||!s?"border border-amber-200 bg-amber-50 text-amber-800":"border border-slate-200 bg-slate-50 text-slate-800"},M=()=>{_.go(-1)};function S(o){confirm("Are you sure you want to delete this application?")&&d.deleteManualAttendance(o)}return(o,s)=>{var m;const a=j("RouterLink");return l(),r("div",T,[e("div",E,[e("div",G,[e("div",null,[e("button",{class:"btn-3",onClick:M},s[1]||(s[1]=[e("i",{class:"far fa-arrow-left"},null,-1),e("span",{class:"hidden md:inline-flex"},"Back",-1)]))]),s[3]||(s[3]=e("div",{class:"space-y-1"},[e("p",{class:"text-2xl font-semibold text-slate-900"},"Manual Attendances Records")],-1)),e("div",I,[u(a,{to:{name:"ManualAttendanceAdd"},class:"btn-2"},{default:h(()=>s[2]||(s[2]=[e("i",{class:"far fa-plus mr-1"},null,-1),f(" Request ")])),_:1,__:[2]}),u(N,{modelValue:c.value,"onUpdate:modelValue":s[0]||(s[0]=t=>c.value=t),"show-year":!1,"show-month":!0,"show-date":!1},null,8,["modelValue"])])])]),(m=q(d))!=null&&m.loading?(l(),r("div",O,[u(L)])):(l(),r("div",Y,[b.value===0?(l(),r("div",H,[s[4]||(s[4]=e("p",{class:"text-lg font-semibold text-slate-800"},"No manual attendances yet",-1)),e("p",J,"Submit your first request for "+i(w.value),1)])):(l(),r("div",K,[e("div",Q,[e("p",W,"Showing "+i(b.value)+" requests",1),s[5]||(s[5]=e("span",{class:"text-xs text-slate-500"},"Auto-updated",-1))]),e("div",X,[e("table",Z,[s[8]||(s[8]=e("thead",{class:"bg-slate-50 text-[11px] uppercase tracking-wider text-slate-500"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left"},"#"),e("th",{class:"px-4 py-3 text-left"},"Created Date"),e("th",{class:"px-4 py-3 text-left"},"Type"),e("th",{class:"px-4 py-3 text-left"},"Check-In"),e("th",{class:"px-4 py-3 text-left"},"Check-Out"),e("th",{class:"px-4 py-3 text-left"},"Status"),e("th",{class:"px-4 py-3 text-right"},"Actions")])],-1)),e("tbody",ee,[(l(!0),r($,null,F(x.value,(t,C)=>(l(),r("tr",{key:t==null?void 0:t.id,class:"hover:bg-slate-50 transition"},[e("td",te,i(C+1),1),e("td",se,i(A(t==null?void 0:t.created_at)),1),e("td",oe,i((t==null?void 0:t.type)||"Manual"),1),e("td",re,i((t==null?void 0:t.check_in)||"N/A"),1),e("td",le,i((t==null?void 0:t.check_out)||"N/A"),1),e("td",ie,[e("span",{class:U(["inline-flex items-center rounded-full px-3 py-1 text-[11px] font-semibold tracking-wide",k(t==null?void 0:t.status)])},i((t==null?void 0:t.status)||"Pending"),3)]),e("td",ae,[e("div",de,[u(a,{to:{name:"ManualAttendanceShow",params:{id:t==null?void 0:t.id}},class:"inline-flex items-center rounded-full border border-slate-200 px-3 py-1.5 text-xs font-semibold text-slate-600 transition hover:border-indigo-200 hover:text-indigo-700"},{default:h(()=>s[6]||(s[6]=[e("i",{class:"far fa-eye mr-1"},null,-1),f(" View ")])),_:2,__:[6]},1032,["to"]),t.status=="Pending"||!t.status?(l(),r("button",{key:0,type:"button",onClick:pe=>S(t==null?void 0:t.id),class:"inline-flex items-center rounded-full border border-red-200 px-3 py-1.5 text-xs font-semibold text-red-600 transition hover:border-red-300 hover:text-red-700"},s[7]||(s[7]=[e("i",{class:"far fa-trash mr-1"},null,-1),f(" Delete ")]),8,ne)):z("",!0)])])]))),128))])])])]))]))])}}};export{be as default};
