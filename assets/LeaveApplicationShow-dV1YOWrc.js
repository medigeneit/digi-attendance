import{u as $s,N as Ms,r as g,y as ws,b as Hs,c as o,a as e,l as r,k as Vs,t as l,F as C,x as L,h as c,e as d,q as As,m as Us,d as hs,v as js,f as qs,o as a,g as Es}from"./index-CA1YAq4M.js";import{L as Fs}from"./LoaderView-CFBc3lz6.js";import{_ as Os}from"./ShareComponent-CTaywaGM.js";import{u as zs}from"./leave-application-BGXLJeFC.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const Gs={class:"my-container max-w-3xl space-y-6"},Js={key:1,class:"card-bg p-4 md:p-8"},Ks={class:"title-lg text-center"},Qs={class:"text-center text-sm"},Xs={class:"space-y-4"},Ys={class:"grid md:grid-cols-2 print:grid-cols-2 gap-8"},Zs={class:""},el={class:"text-sm"},tl={class:"flex justify-end gap-4"},sl={class:"table-auto border border-black bg-white text-xs"},ll={class:"border border-black px-2"},al={class:"border border-black px-2"},ol={class:"border border-black px-2"},rl={class:"font-bold"},nl={class:"border border-black px-2"},il={class:"table-auto border border-black bg-white text-xs"},dl={class:"border border-black"},ul={colspan:"2",class:"border border-black px-2 w-32"},pl={class:"border border-black px-2"},cl={class:"border border-black px-2"},vl={class:"font-bold"},_l={class:"border border-black px-2"},bl={class:"grid print:grid-cols-2 md:grid-cols-2 text-sm"},yl={class:"text-sm"},ml={class:"pt-8 grid grid-cols-2"},xl={class:"text-sm"},fl={class:"flex flex-col justify-center items-center text-sm"},gl={key:0,class:"print:hidden"},kl={class:"text-xs text-center"},wl={class:"flex justify-center gap-2"},Al={class:"font-bold"},hl={key:0,class:"text-green-600 print:text-black"},jl={key:1,class:"pl-2 text-yellow-700"},Cl={class:"text-xs text-gray-500"},Dl={class:"overflow-x-auto"},Ll={class:"min-w-full table-auto border-collapse border border-gray-200 bg-white rounded-md text-sm"},Bl={class:"border border-gray-500 px-4 py-0.5 text-left"},Rl={class:"border border-gray-500 px-4 py-0.5 text-center"},Nl={class:"border border-gray-500 px-4 py-0.5 text-center"},Il={class:"space-y-14"},Wl={class:"font-bold text-center text-lg"},Tl={key:0},Sl={class:"grid md:grid-cols-3 print:grid-cols-3 gap-4 text-sm items-end"},Pl={class:"flex flex-col justify-center items-center"},$l={key:0},Ml={key:1,class:"text-center"},Hl={key:2,class:"print:hidden"},Vl={class:"text-xs text-center text-blue-600"},Ul={class:"flex justify-center gap-4"},ql={class:"font-bold"},El={key:0,class:"text-green-600"},Fl={key:1,class:"pl-2 text-yellow-700"},Ol={class:"text-xs text-gray-500"},zl={class:"flex flex-col justify-center items-center"},Gl={key:0},Jl={key:1,class:"text-center"},Kl={key:2,class:"print:hidden"},Ql={class:"text-xs text-center text-blue-600"},Xl={class:"flex justify-center gap-4"},Yl={class:"font-bold"},Zl={key:0,class:"text-green-600"},ea={key:1,class:"pl-2 text-yellow-700"},ta={class:"flex flex-col justify-center items-center"},sa={key:0},la={key:1,class:"text-center"},aa={key:2,class:"print:hidden"},oa={class:"text-xs text-center text-blue-600"},ra={class:"flex justify-center gap-4"},na={class:"font-bold"},ia={key:0,class:"text-green-600"},da={key:1,class:"pl-2 text-yellow-700"},ua={class:"flex justify-evenly text-sm items-end"},pa={class:"flex flex-col justify-center items-center"},ca={key:0},va={key:1,class:"text-center"},_a={key:2,class:"print:hidden"},ba={class:"text-xs text-center text-blue-600"},ya={class:"flex justify-center gap-4"},ma={class:"font-bold"},xa={key:0,class:"text-green-600"},fa={key:1,class:"pl-2 text-yellow-700"},ga={class:"text-xs text-gray-500"},ka={class:"flex flex-col justify-center items-center"},wa={key:0},Aa={key:1,class:"text-center"},ha={key:2,class:"print:hidden"},ja={class:"text-xs text-center text-blue-600"},Ca={class:"flex justify-center gap-4"},Da={class:"font-bold"},La={key:0,class:"text-green-600"},Ba={key:1,class:"pl-2 text-yellow-700"},Ra={class:"text-xs text-gray-500"},Na={key:0,class:"modal-bg"},Ia={class:"modal-card"},Wa={class:"flex justify-end gap-2 mt-4"},Ta={key:1,class:"modal-bg"},Sa={class:"modal-card"},Pa={class:"flex justify-end gap-2 mt-4"},Ea={__name:"LeaveApplicationShow",setup($a){const m=$s(),_=Ms(),u=zs(),Cs=Es(),p=qs(),B=g(!0),k=g(!1),w=g(""),A=g(!1),v=g(""),s=ws(()=>u.leaveApplication);Hs(async()=>{const{id:i}=p.params;try{await u.fetchLeaveApplicationById(i)}catch(t){console.error("Failed to load leave application:",t)}finally{B.value=!1}});async function Ds(){try{await u.rejectLeaveApplication(p.params.id,{rejection_reason:w.value}),alert("Leave application rejected successfully!"),k.value=!1,w.value="",await u.fetchLeaveApplicationById(p.params.id),b()}catch(i){alert(i.message)}}function x(){k.value=!0}let f="";function h(i){A.value=!0,f=i}async function Ls(){f==="acceptApprovedByApplication"&&Ts(p.params.id),f==="acceptHandoverApplication"&&Bs(p.params.id),f==="acceptInChargeApplication"&&Rs(p.params.id),f==="acceptRecommendByApplication"&&Ws(p.params.id),A.value=!1}async function Bs(i){try{await u.acceptHandover({id:i,note:v.value}),await u.fetchLeaveApplicationById(i),b()}catch(t){alert(t.message)}}async function Rs(i){try{await u.acceptInCharge({id:i,note:v.value}),await u.fetchLeaveApplicationById(i),b()}catch(t){alert(t.message)}}async function Ns(i){try{await u.acceptCoordinator({id:i,note:v.value}),await u.fetchLeaveApplicationById(i),b()}catch(t){alert(t.message)}}async function Is(i){try{await u.acceptOperationalAdmin({id:i,note:v.value}),await u.fetchLeaveApplicationById(i),b()}catch(t){alert(t.message)}}async function Ws(i){try{await u.acceptRecommendBy({id:i,note:v.value}),await u.fetchLeaveApplicationById(i),b()}catch(t){alert(t.message)}}async function Ts(i){console.log(v.value);try{await u.acceptApprovedBy({id:i,note:v.value}),b(),await u.fetchLeaveApplicationById(i)}catch(t){alert(t.message)}}async function b(){var i,t;(i=p==null?void 0:p.query)!=null&&i.notifyId&&await _.markAsRead((t=p==null?void 0:p.query)==null?void 0:t.notifyId)}function Ss(){window.print()}const Ps=()=>Cs.go(-1),R=ws(()=>{if(!s.value||!s.value.last_working_date||!s.value.resumption_date)return 0;const i=new Date(s==null?void 0:s.value.last_working_date),j=new Date(s==null?void 0:s.value.resumption_date)-i;return Math.ceil(j/(1e3*60*60*24))-1});return(i,t)=>{var j,D,N,I,W,T,S,P,$,M,H,V,U,q,E,F,O,z,G,J,K,Q,X,Y,Z,ee,te,se,le,ae,oe,re,ne,ie,de,ue,pe,ce,ve,_e,be,ye,me,xe,fe,ge,ke,we,Ae,he,je,Ce,De,Le,Be,Re,Ne,Ie,We,Te,Se,Pe,$e,Me,He,Ve,Ue,qe,Ee,Fe,Oe,ze,Ge,Je,Ke,Qe,Xe,Ye,Ze,et,tt,st,lt,at,ot,rt,nt,it,dt,ut,pt,ct,vt,_t,bt,yt,mt,xt,ft,gt,kt,wt,At,ht,jt,Ct,Dt,Lt,Bt,Rt,Nt,It,Wt,Tt,St,Pt,$t,Mt,Ht,Vt,Ut,qt,Et,Ft,Ot,zt,Gt,Jt,Kt,Qt,Xt,Yt,Zt,es,ts,ss,ls,as,os,rs,ns,is,ds,us,ps,cs,vs,_s,bs,ys,ms,xs,fs,gs,ks;return a(),o(C,null,[e("div",Gs,[e("div",{class:"flex items-center justify-between gap-2 print:hidden"},[e("button",{class:"btn-3",onClick:Ps},t[10]||(t[10]=[e("i",{class:"far fa-arrow-left"},null,-1),e("span",{class:"hidden md:flex"},"Back",-1)])),t[12]||(t[12]=e("h1",{class:"title-md md:title-xl flex-wrap text-center"},"Leave Application",-1)),e("div",null,[e("button",{class:"btn-2",onClick:Ss},t[11]||(t[11]=[e("i",{class:"far fa-print"},null,-1),r(" Print ")]))])]),B.value?(a(),Vs(Fs,{key:0})):(a(),o("div",Js,[e("div",null,[e("h1",Ks,l((N=(D=(j=s.value)==null?void 0:j.user)==null?void 0:D.company)==null?void 0:N.name),1),e("p",Qs,l((W=(I=s.value)==null?void 0:I.user)==null?void 0:W.company.address),1)]),e("div",Xs,[e("div",Ys,[e("div",null,[t[13]||(t[13]=e("p",null,"To",-1)),t[14]||(t[14]=e("p",{class:"font-bold"},"Managing Director",-1)),e("p",Zs,l((P=(S=(T=s.value)==null?void 0:T.user)==null?void 0:S.company)==null?void 0:P.name),1),e("p",el,l((M=($=s.value)==null?void 0:$.user)==null?void 0:M.company.address),1),t[15]||(t[15]=e("div",null,[e("p",{class:"pt-6"},[e("b",null,"Subject:"),r(" Leave Application")])],-1))]),e("div",tl,[e("div",null,[t[19]||(t[19]=e("h1",{class:"font-bold"},"Summary",-1)),e("table",sl,[t[18]||(t[18]=e("thead",null,[e("tr",{class:"bg-gray-200 border border-black"},[e("th",{class:"border border-black px-2"},"Type"),e("th",{class:"border border-black px-2"},"Days")])],-1)),e("tbody",null,[(a(!0),o(C,null,L((H=s.value)==null?void 0:H.leave_types,(n,y)=>(a(),o("tr",{key:y,class:"border border-black"},[e("td",ll,l(n.type),1),e("td",al,l(n.days),1)]))),128)),e("tr",null,[t[16]||(t[16]=e("td",{class:"border-black px-2"},"WL/GHD",-1)),e("td",ol,l(R.value-((U=(V=s.value)==null?void 0:V.leave_days)==null?void 0:U.length)),1)]),e("tr",rl,[t[17]||(t[17]=e("td",{class:"border border-black px-2"},"Total",-1)),e("td",nl,l(R.value),1)])])])]),e("div",null,[t[23]||(t[23]=e("h1",{class:"font-bold"},"Last Leave",-1)),e("div",null,[e("table",il,[e("thead",null,[t[20]||(t[20]=e("tr",{class:"bg-gray-200 border border-black"},[e("th",{colspan:"2",class:"border border-black px-2"},"Date")],-1)),e("tr",dl,[e("td",ul,l(((E=(q=s.value)==null?void 0:q.last_leave)==null?void 0:E.date)||"N/A"),1)]),t[21]||(t[21]=e("tr",{class:"bg-gray-200 border border-black"},[e("th",{class:"border border-black px-2"},"Type"),e("th",{class:"border border-black px-2"},"Days")],-1))]),e("tbody",null,[(a(!0),o(C,null,L((O=(F=s.value)==null?void 0:F.last_leave)==null?void 0:O.types,(n,y)=>(a(),o("tr",{key:y,class:"border border-black"},[e("td",pl,l(n==null?void 0:n.type),1),e("td",cl,l(n==null?void 0:n.days),1)]))),128)),e("tr",vl,[t[22]||(t[22]=e("td",{class:"border border-black px-2"},"Total",-1)),e("td",_l,l((G=(z=s.value)==null?void 0:z.last_leave)!=null&&G.types?s.value.last_leave.types.reduce((n,y)=>n+y.days,0):0),1)])])])])])])]),e("div",null,[t[30]||(t[30]=e("h3",{class:"font-bold"},"Leave Details:",-1)),e("div",bl,[e("li",null,[t[24]||(t[24]=e("strong",null,"Reason: ",-1)),r(l(((J=s.value)==null?void 0:J.reason)||"No reason provided"),1)]),e("li",null,[t[25]||(t[25]=e("strong",null,"Leave Days:",-1)),r(" "+l((K=s.value)==null?void 0:K.leave_period),1)]),e("li",null,[t[26]||(t[26]=e("strong",null,"Total Days:",-1)),r(" "+l((Q=s.value)==null?void 0:Q.total_leave_days),1)]),e("li",null,[t[27]||(t[27]=e("strong",null,"Weekends:",-1)),r(" "+l((Z=(Y=(X=s.value)==null?void 0:X.user)==null?void 0:Y.weekends)==null?void 0:Z.join(", ")),1)]),e("li",null,[t[28]||(t[28]=e("strong",null,"Last Working Date:",-1)),r(" "+l((ee=s.value)==null?void 0:ee.last_working_date),1)]),e("li",null,[t[29]||(t[29]=e("strong",null,"Resumption Date:",-1)),r(" "+l((te=s.value)==null?void 0:te.resumption_date),1)])])]),e("div",yl,[e("p",null,[t[31]||(t[31]=e("strong",null,"Works in Hand: ",-1)),r(l(((se=s.value)==null?void 0:se.works_in_hand)||"No details provided"),1)])]),e("div",ml,[e("div",null,[e("div",xl,[t[36]||(t[36]=e("hr",{class:"w-44 border-black hidden print:block"},null,-1)),e("p",null,[t[32]||(t[32]=e("strong",null,"Applicant:",-1)),r(" "+l((ae=(le=s.value)==null?void 0:le.user)==null?void 0:ae.name),1)]),e("p",null,[t[33]||(t[33]=e("strong",null,"Designation:",-1)),r(" "+l((ne=(re=(oe=s.value)==null?void 0:oe.user)==null?void 0:re.designation)==null?void 0:ne.title),1)]),e("p",null,[t[34]||(t[34]=e("strong",null,"Department:",-1)),r(" "+l((ue=(de=(ie=s.value)==null?void 0:ie.user)==null?void 0:de.department)==null?void 0:ue.name),1)]),e("p",null,[t[35]||(t[35]=e("strong",null,"Phone:",-1)),r(" "+l((ce=(pe=s.value)==null?void 0:pe.user)==null?void 0:ce.phone),1)])])]),e("div",fl,[e("p",null,l(((_e=(ve=s.value)==null?void 0:ve.handover_user)==null?void 0:_e.name)||"Not assigned"),1),(be=c(_).approvalPermissions)!=null&&be.allow_handover&&!((ye=s.value)!=null&&ye.status)&&s.value.handover_user_id===c(m).user.id?(a(),o("div",gl,[e("p",kl,[r(l((xe=(me=s.value)==null?void 0:me.user)==null?void 0:xe.name)+" has assigned you for his handover. ",1),t[37]||(t[37]=e("br",null,null,-1)),t[38]||(t[38]=r(" Do you agree? "))]),e("div",wl,[e("button",{class:"font-bold text-lg text-green-600 px-2",onClick:t[0]||(t[0]=n=>h("acceptHandoverApplication"))}," ✔ "),t[39]||(t[39]=e("button",{class:"px-2"},"❌",-1))])])):d("",!0),t[42]||(t[42]=e("hr",{class:"w-44 border-black mt-2"},null,-1)),e("h4",Al,[t[41]||(t[41]=r(" Handover ")),(fe=s.value)!=null&&fe.handover_user_id&&((ge=s.value)!=null&&ge.status)?(a(),o("span",hl," (✔) ")):d("",!0),(ke=s.value)!=null&&ke.handover_user_id&&!((we=s.value)!=null&&we.status)?(a(),o("span",jl,t[40]||(t[40]=[e("i",{class:"fad fa-spinner"},null,-1)]))):d("",!0)]),e("p",Cl,l((Ae=s.value)==null?void 0:Ae.handover_note),1)])]),e("div",null,[t[44]||(t[44]=e("h1",{class:"font-bold"},"Leave Balance",-1)),e("div",Dl,[e("table",Ll,[t[43]||(t[43]=e("thead",null,[e("tr",{class:"bg-gray-200"},[e("th",{class:"border border-gray-500 px-4 py-0.5 text-left"},"Leave Type"),e("th",{class:"border border-gray-500 px-4 py-0.5 text-center"},"Total Days"),e("th",{class:"border border-gray-500 px-4 py-0.5 text-center"},"Used Days"),e("th",{class:"border border-gray-500 px-4 py-0.5 text-center"},"Remaining Days")])],-1)),e("tbody",null,[(a(!0),o(C,null,L((he=s.value)==null?void 0:he.leave_balance,(n,y)=>(a(),o("tr",{key:y,class:"hover:bg-blue-200"},[e("td",Bl,l(n.leave_type),1),e("td",Rl,l(n.total_leave_days),1),e("td",Nl,l(n.used_days),1),e("td",{class:As(["border border-gray-500 px-4 py-0.5 text-center",{"text-green-600 font-bold":n.remaining_days>0,"text-red-600 font-bold":n.remaining_days===0}])},l(n.remaining_days),3)]))),128))])])])])]),e("div",Il,[e("p",Wl,[t[45]||(t[45]=r(" Leave Approval: ")),e("b",{class:As({"text-yellow-600":((je=s.value)==null?void 0:je.status)==="Pending","text-green-600":((Ce=s.value)==null?void 0:Ce.status)==="Approved","text-red-600":((De=s.value)==null?void 0:De.status)==="Rejected"})},l(((Le=s.value)==null?void 0:Le.status)||"N/A"),3)]),((Be=s.value)==null?void 0:Be.status)==="Rejected"?(a(),o("div",Tl,[e("p",null,[t[46]||(t[46]=e("b",null,"Rejected by: ",-1)),r(" "+l((Ne=(Re=s.value)==null?void 0:Re.rejected_by_user)==null?void 0:Ne.name),1)]),e("p",null,[t[47]||(t[47]=e("b",null,"rejection Reason: ",-1)),r(" "+l(s.value.rejection_reason),1)])])):d("",!0),e("div",Sl,[e("div",Pl,[(Ie=s.value)!=null&&Ie.in_charge_user?(a(),o("p",$l,l(((Te=(We=s.value)==null?void 0:We.in_charge_user)==null?void 0:Te.name)||""),1)):(a(),o("p",Ml,l(((Me=($e=(Pe=(Se=s.value)==null?void 0:Se.user)==null?void 0:Pe.leave_approval)==null?void 0:$e.in_charge_user)==null?void 0:Me.name)||""),1)),(He=c(_).approvalPermissions)!=null&&He.allow_in_charge&&s.value.status!=="Rejected"&&s.value.status!=="Approved"&&!((Ve=s.value)!=null&&Ve.in_charge_user_id)&&((Ee=(qe=(Ue=s.value)==null?void 0:Ue.user)==null?void 0:qe.leave_approval)==null?void 0:Ee.in_charge_user_id)===c(m).user.id?(a(),o("div",Hl,[e("p",Vl,[r(l((Oe=(Fe=s.value)==null?void 0:Fe.user)==null?void 0:Oe.name)+" has submitted an application. ",1),t[48]||(t[48]=e("br",null,null,-1)),t[49]||(t[49]=r(" Will you forward it? "))]),e("div",Ul,[e("button",{class:"font-bold text-lg text-green-600",onClick:t[1]||(t[1]=n=>h("acceptInChargeApplication"))}," ✔ "),e("button",{class:"",onClick:x},"❌")])])):d("",!0),t[52]||(t[52]=e("hr",{class:"w-44 border-black mt-2"},null,-1)),e("h4",ql,[e("p",null,[t[51]||(t[51]=r(" In-Charge ")),(ze=s.value)!=null&&ze.in_charge_user_id?(a(),o("span",El,"(✔)")):d("",!0),!((Ge=s.value)!=null&&Ge.in_charge_user_id)&&((Qe=(Ke=(Je=s.value)==null?void 0:Je.user)==null?void 0:Ke.leave_approval)!=null&&Qe.in_charge_user)?(a(),o("span",Fl,t[50]||(t[50]=[e("i",{class:"fad fa-spinner"},null,-1)]))):d("",!0)])]),e("p",Ol,l((Xe=s.value)==null?void 0:Xe.in_charge_note),1)]),e("div",zl,[(Ye=s.value)!=null&&Ye.coordinator_user?(a(),o("p",Gl,l(((et=(Ze=s.value)==null?void 0:Ze.coordinator_user)==null?void 0:et.name)||"N/A"),1)):(a(),o("p",Jl,l(((at=(lt=(st=(tt=s.value)==null?void 0:tt.user)==null?void 0:st.leave_approval)==null?void 0:lt.coordinator_user)==null?void 0:at.name)||"N/A"),1)),(ot=c(_).approvalPermissions)!=null&&ot.allow_coordinator&&s.value.status!=="Rejected"&&s.value.status!=="Approved"&&!((rt=s.value)!=null&&rt.coordinator_user_id)&&((dt=(it=(nt=s.value)==null?void 0:nt.user)==null?void 0:it.leave_approval)==null?void 0:dt.coordinator_user_id)===c(m).user.id?(a(),o("div",Kl,[e("p",Ql,[r(l((pt=(ut=s.value)==null?void 0:ut.user)==null?void 0:pt.name)+" has submitted an application. ",1),t[53]||(t[53]=e("br",null,null,-1)),t[54]||(t[54]=r(" Will you recommend it? "))]),e("div",Xl,[e("button",{class:"font-bold text-lg text-green-600",onClick:t[2]||(t[2]=n=>Ns(s.value.id))}," ✔ "),e("button",{class:"",onClick:x},"❌")])])):d("",!0),t[57]||(t[57]=e("hr",{class:"w-44 border-black mt-2"},null,-1)),e("p",Yl,[t[56]||(t[56]=r(" Coordinator ")),(ct=s.value)!=null&&ct.coordinator_user_id?(a(),o("span",Zl,"(✔)")):d("",!0),!((vt=s.value)!=null&&vt.coordinator_user_id)&&((yt=(bt=(_t=s.value)==null?void 0:_t.user)==null?void 0:bt.leave_approval)!=null&&yt.coordinator_user)?(a(),o("span",ea,t[55]||(t[55]=[e("i",{class:"fad fa-spinner"},null,-1)]))):d("",!0)])]),e("div",ta,[(mt=s.value)!=null&&mt.operational_admin_user?(a(),o("p",sa,l(((ft=(xt=s.value)==null?void 0:xt.operational_admin_user)==null?void 0:ft.name)||""),1)):(a(),o("p",la,l(((At=(wt=(kt=(gt=s.value)==null?void 0:gt.user)==null?void 0:kt.leave_approval)==null?void 0:wt.operational_admin_user)==null?void 0:At.name)||"N/A"),1)),(ht=c(_).approvalPermissions)!=null&&ht.allow_operational_admin&&s.value.status!=="Rejected"&&s.value.status!=="Approved"&&!((jt=s.value)!=null&&jt.operational_admin_user_id)&&((Lt=(Dt=(Ct=s.value)==null?void 0:Ct.user)==null?void 0:Dt.leave_approval)==null?void 0:Lt.operational_admin_user_id)===c(m).user.id?(a(),o("div",aa,[e("p",oa,[r(l((Rt=(Bt=s.value)==null?void 0:Bt.user)==null?void 0:Rt.name)+" has submitted an application.",1),t[58]||(t[58]=e("br",null,null,-1)),t[59]||(t[59]=r(" Will you recommend it? "))]),e("div",ra,[e("button",{class:"font-bold text-lg text-green-600",onClick:t[3]||(t[3]=n=>Is(s.value.id))}," ✔ "),e("button",{class:"",onClick:x},"❌")])])):d("",!0),t[62]||(t[62]=e("hr",{class:"w-44 border-black mt-2"},null,-1)),e("p",na,[t[61]||(t[61]=r(" Operational Admin ")),(Nt=s.value)!=null&&Nt.operational_admin_user_id?(a(),o("span",ia,"(✔)")):d("",!0),!((It=s.value)!=null&&It.operational_admin_user_id)&&((St=(Tt=(Wt=s.value)==null?void 0:Wt.user)==null?void 0:Tt.leave_approval)!=null&&St.operational_admin_user)?(a(),o("span",da,t[60]||(t[60]=[e("i",{class:"fad fa-spinner"},null,-1)]))):d("",!0)])])]),e("div",ua,[e("div",pa,[(Pt=s.value)!=null&&Pt.recommend_by_user?(a(),o("p",ca,l(((Mt=($t=s.value)==null?void 0:$t.recommend_by_user)==null?void 0:Mt.name)||"N/A"),1)):(a(),o("p",va,l(((qt=(Ut=(Vt=(Ht=s.value)==null?void 0:Ht.user)==null?void 0:Vt.leave_approval)==null?void 0:Ut.recommend_by_user)==null?void 0:qt.name)||"N/A"),1)),(Et=c(_).approvalPermissions)!=null&&Et.allow_recommend_by&&s.value.status!=="Rejected"&&s.value.status!=="Approved"&&!((Ft=s.value)!=null&&Ft.recommend_by_user_id)&&((Gt=(zt=(Ot=s.value)==null?void 0:Ot.user)==null?void 0:zt.leave_approval)==null?void 0:Gt.recommend_by_user_id)===c(m).user.id?(a(),o("div",_a,[e("p",ba,[r(l((Kt=(Jt=s.value)==null?void 0:Jt.user)==null?void 0:Kt.name)+" has submitted an application.",1),t[63]||(t[63]=e("br",null,null,-1)),t[64]||(t[64]=r(" Will you recommend it? "))]),e("div",ya,[e("button",{class:"font-bold text-lg text-green-600",onClick:t[4]||(t[4]=n=>h("acceptRecommendByApplication"))}," ✔ "),e("button",{class:"",onClick:x},"❌")])])):d("",!0),t[67]||(t[67]=e("hr",{class:"w-44 border-black mt-2"},null,-1)),e("p",ma,[t[66]||(t[66]=r(" Recommend By ")),(Qt=s.value)!=null&&Qt.recommend_by_user_id?(a(),o("span",xa,"(✔)")):d("",!0),!((Xt=s.value)!=null&&Xt.recommend_by_user_id)&&((es=(Zt=(Yt=s.value)==null?void 0:Yt.user)==null?void 0:Zt.leave_approval)!=null&&es.recommend_by_user)?(a(),o("span",fa,t[65]||(t[65]=[e("i",{class:"fad fa-spinner"},null,-1)]))):d("",!0)]),e("p",ga,l((ts=s.value)==null?void 0:ts.recommend_note),1)]),e("div",ka,[(ss=s.value)!=null&&ss.approved_by_user?(a(),o("p",wa,l(((as=(ls=s.value)==null?void 0:ls.approved_by_user)==null?void 0:as.name)||""),1)):(a(),o("p",Aa,l(((is=(ns=(rs=(os=s.value)==null?void 0:os.user)==null?void 0:rs.leave_approval)==null?void 0:ns.approved_by_user)==null?void 0:is.name)||""),1)),(ds=c(_).approvalPermissions)!=null&&ds.allow_approved_by&&s.value.status!=="Rejected"&&s.value.status!=="Approved"&&!((us=s.value)!=null&&us.approved_by_user_id)&&((vs=(cs=(ps=s.value)==null?void 0:ps.user)==null?void 0:cs.leave_approval)==null?void 0:vs.approved_by_user_id)===c(m).user.id?(a(),o("div",ha,[e("p",ja,[r(l((bs=(_s=s.value)==null?void 0:_s.user)==null?void 0:bs.name)+" has submitted an application.",1),t[68]||(t[68]=e("br",null,null,-1)),t[69]||(t[69]=r(" Will you accept it? "))]),e("div",Ca,[e("button",{class:"font-bold text-lg text-green-600",onClick:t[5]||(t[5]=n=>h("acceptApprovedByApplication"))}," ✔ "),e("button",{class:"",onClick:x},"❌")])])):d("",!0),t[72]||(t[72]=e("hr",{class:"w-44 border-black mt-2"},null,-1)),e("p",Da,[t[71]||(t[71]=r(" Approved By ")),(ys=s.value)!=null&&ys.approved_by_user_id?(a(),o("span",La,"(✔)")):d("",!0),!((ms=s.value)!=null&&ms.approved_by_user_id)&&((gs=(fs=(xs=s.value)==null?void 0:xs.user)==null?void 0:fs.leave_approval)!=null&&gs.approved_by_user)?(a(),o("span",Ba,t[70]||(t[70]=[e("i",{class:"fad fa-spinner"},null,-1)]))):d("",!0)]),e("p",Ra,l((ks=s.value)==null?void 0:ks.approval_note),1)])])])])),Us(Os)]),A.value?(a(),o("div",Na,[e("div",Ia,[t[73]||(t[73]=e("h3",{class:"title-lg"},"Accept Application",-1)),hs(e("input",{"onUpdate:modelValue":t[6]||(t[6]=n=>v.value=n),rows:"4",placeholder:"Enter accept note...",class:"w-full border rounded-lg p-2 text-gray-700"},null,512),[[js,v.value]]),e("div",Wa,[e("button",{class:"btn-3",onClick:t[7]||(t[7]=n=>A.value=!1)},"Cancel"),e("button",{class:"btn-2 bg-red-500 text-white",onClick:Ls},"Confirm")])])])):d("",!0),k.value?(a(),o("div",Ta,[e("div",Sa,[t[74]||(t[74]=e("h3",{class:"title-lg"},"Reject Application",-1)),hs(e("textarea",{"onUpdate:modelValue":t[8]||(t[8]=n=>w.value=n),rows:"4",placeholder:"Enter rejection reason...",class:"w-full border rounded-lg p-2 text-gray-700"},null,512),[[js,w.value]]),e("div",Pa,[e("button",{class:"btn-3",onClick:t[9]||(t[9]=n=>k.value=!1)},"Cancel"),e("button",{class:"btn-2 bg-red-500 text-white",onClick:Ds},"Confirm")])])])):d("",!0)],64)}}};export{Ea as default};
