import{r as y,x as h,b as D,z as g,c as a,a as t,l as E,h as b,d as M,v as _,j,F as V,q as N,k as r,t as n,f as T,o,g as C}from"./index-DGv-5VRk.js";import{L as I}from"./LoaderView-CqBXQ6G1.js";import{_ as F}from"./MultiselectDropdown-u3WjsFu9.js";import{u as R}from"./attendance-vqVDf-qC.js";import{u as z}from"./user-37oW2csG.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vue-multiselect.esm-DFm_2OEG.js";const P={class:"px-4 space-y-4"},$={class:"w-1/2 flex flex-wrap gap-4"},G={key:1,class:"space-y-4"},H={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},J={class:"text-sm font-semibold text-blue-700 border-b pb-1 mb-2"},K={class:"flex items-center gap-1 text-gray-700"},O={class:"text-right text-gray-500 bg-blue-100 px-2 py-0.5 rounded text-[10px]"},Q={key:2,class:"flex justify-between gap-4 text-sm"},W={class:"card-bg p-4 gap-1"},X={class:"grid md:grid-cols-2"},Y={key:3},ie={__name:"EmployeeAttendanceLog",setup(Z){const f=C(),m=T(),v=z(),p=R(),l=y(null),q=y(""),i=y(m.query.date||p.selectedMonth),c=h(()=>{var s;return(s=l.value)==null?void 0:s.id}),x=async()=>{c&&await p.getMonthlyAttendanceLog(c.value,i.value)};D(async()=>{await v.fetchUsers(),l.value=v.users.find(s=>s.id==m.query.user_id)}),g([q,i],x),g(c,s=>{f.replace({query:{...m.query,user_id:s}})}),g(i,s=>{f.replace({query:{...m.query,date:s}})}),g(c,(s,e)=>{s!==null&&x()},{immediate:!1});const U=()=>f.go(-1),B=s=>new Date(s).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return(s,e)=>{var w,k,S;return o(),a("div",P,[t("div",{class:"flex items-center justify-between gap-2"},[t("button",{class:"btn-3",onClick:U},e[2]||(e[2]=[t("i",{class:"far fa-arrow-left"},null,-1),t("span",{class:"hidden md:flex"},"Back",-1)])),e[3]||(e[3]=t("h1",{class:"title-md md:title-lg flex-wrap text-center"},"Attendance Log",-1)),e[4]||(e[4]=t("div",null,null,-1))]),t("div",$,[E(F,{modelValue:l.value,"onUpdate:modelValue":e[0]||(e[0]=d=>l.value=d),options:b(v).users,multiple:!1,label:"name",placeholder:"Select Employee"},null,8,["modelValue","options"]),t("div",null,[M(t("input",{id:"monthSelect",type:"month","onUpdate:modelValue":e[1]||(e[1]=d=>i.value=d),onChange:x,class:"input-1"},null,544),[[_,i.value]])])]),b(p).isLoading?(o(),j(I,{key:0})):(o(),a("div",G,[t("div",H,[(o(!0),a(V,null,N(b(p).attendanceLogs,(d,A)=>(o(),a("div",{key:A,class:"bg-white shadow rounded-lg p-4"},[t("h3",J,n(A),1),(o(!0),a(V,null,N(d,(u,ee)=>{var L;return o(),a("div",{key:u.id,class:"flex items-center justify-between text-xs mb-1"},[t("div",K,[e[5]||(e[5]=t("i",{class:"far fa-clock text-blue-500"},null,-1)),r(" "+n(B(u.timestamp)),1)]),t("div",O,n(((L=u==null?void 0:u.device)==null?void 0:L.name)||"Unknown"),1)])}),128))]))),128))])])),l.value?(o(),a("div",Q,[t("div",W,[e[12]||(e[12]=t("h2",{class:"title-md"},"Selected Employee Info",-1)),e[13]||(e[13]=t("hr",null,null,-1)),t("div",X,[t("p",null,[e[6]||(e[6]=t("strong",null,"Name:",-1)),r(" "+n(l.value.name),1)]),t("p",null,[e[7]||(e[7]=t("strong",null,"Designation:",-1)),r(" "+n(((w=l.value.designation)==null?void 0:w.title)||"N/A"),1)]),t("p",null,[e[8]||(e[8]=t("strong",null,"Department:",-1)),r(" "+n(((k=l.value.department)==null?void 0:k.name)||"N/A"),1)]),t("p",null,[e[9]||(e[9]=t("strong",null,"Company:",-1)),r(" "+n(((S=l.value.company)==null?void 0:S.name)||"N/A"),1)]),t("p",null,[e[10]||(e[10]=t("strong",null,"Phone:",-1)),r(" "+n(l.value.phone),1)]),t("p",null,[e[11]||(e[11]=t("strong",null,"Email:",-1)),r(" "+n(l.value.email||"N/A"),1)])])])])):(o(),a("div",Y,e[14]||(e[14]=[t("p",{class:"text-gray-400 text-center text-2xl italic"},"Select an employee, please.",-1)])))])}}};export{ie as default};
