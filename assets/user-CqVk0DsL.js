import{L as b,r as d,m as v,C as o}from"./index-BCAyTfv_.js";const k=b("user",()=>{const l=d([]),p=d([]),i=d({}),m=d({}),f=d({}),n=d(null),r=d(!1),h=d(new Date().toISOString().substring(0,10)),y=v(()=>l.value),g=v(()=>i.value),w=v(()=>n.value);return{users:l,handoverUsers:p,user:i,error:n,isLoading:r,allUsers:y,singleUser:g,errorMessage:w,dashboardInfo:f,userDashboard:m,selectedDate:h,fetchUsers:async(t={})=>{var s,e;try{r.value=!0;const a=await o.get("/users",{params:t});l.value=a.data,n.value=null}catch(a){n.value=((e=(s=a.response)==null?void 0:s.data)==null?void 0:e.message)||"Something went wrong"}finally{r.value=!1}},fetchUser:async t=>{var s,e;try{r.value=!0;const u=(await o.get(`/users/${t}`)).data;return u&&(i.value=u),n.value=null,u}catch(a){n.value=((e=(s=a.response)==null?void 0:s.data)==null?void 0:e.message)||"Something went wrong"}finally{r.value=!1}},createUser:async t=>{var s,e;try{r.value=!0;const a=await o.post("/users",t);l.value.push(a.data.user),n.value=null}catch(a){n.value=((e=(s=a.response)==null?void 0:s.data)==null?void 0:e.message)||"Something went wrong"}finally{r.value=!1}},updateUser:async(t,s)=>{var e,a;try{r.value=!0;const u=await o.put(`/users/${t}`,s),c=l.value.findIndex(U=>U.id===t);return c!==-1&&(l.value[c]=u.data.user),n.value=null,u.data.user}catch(u){n.value=((a=(e=u.response)==null?void 0:e.data)==null?void 0:a.message)||"Something went wrong"}finally{r.value=!1}},deleteUser:async t=>{var s,e;try{r.value=!0,await o.delete(`/users/${t}`),l.value=l.value.filter(a=>a.id!==t),n.value=null}catch(a){n.value=((e=(s=a.response)==null?void 0:s.data)==null?void 0:e.message)||"Something went wrong"}finally{r.value=!1}},fetchUserDashboardData:async()=>{var t,s;try{r.value=!0;const a=(await o.get("/dashboard")).data;return a&&(m.value=a),n.value=null,a}catch(e){n.value=((s=(t=e.response)==null?void 0:t.data)==null?void 0:s.message)||"Something went wrong"}finally{r.value=!1}},fetchAdminDashboardData:async()=>{var t,s;try{r.value=!0;const a=(await o.get("/admin-dashboard")).data;return a&&(f.value=a),n.value=null,a}catch(e){n.value=((s=(t=e.response)==null?void 0:t.data)==null?void 0:s.message)||"Something went wrong"}finally{r.value=!1}},fetchTypeWiseEmployees:async(t={})=>{var s,e;try{r.value=!0;const a=await o.get("/type-wise-employees",{params:t});l.value=a.data,n.value=null}catch(a){n.value=((e=(s=a.response)==null?void 0:s.data)==null?void 0:e.message)||"Something went wrong"}finally{r.value=!1}},fetchDepartmentWiseEmployees:async()=>{var t,s;try{r.value=!0;const e=await o.get("/department-wise-employees");return l.value=e.data,n.value=null,l.value}catch(e){n.value=((s=(t=e.response)==null?void 0:t.data)==null?void 0:s.message)||"Something went wrong"}finally{r.value=!1}},fetchHandoverDepartmentWiseEmployees:async()=>{var t,s;try{r.value=!0;const e=await o.get("/department-handover-wise-employees");p.value=e.data,n.value=null}catch(e){n.value=((s=(t=e.response)==null?void 0:t.data)==null?void 0:s.message)||"Something went wrong"}finally{r.value=!1}},fetchUsersExcelExport:async t=>{var s,e;try{r.value=!0;const a=await o.get("/users",{params:{flag:"excel",company_id:t.data.company_id,department_id:t.data.department_id,line_type:t.data.line_type,status:t.data.status},responseType:"blob"}),u=window.URL.createObjectURL(new Blob([a.data])),c=document.createElement("a");c.href=u,c.setAttribute("download","users.xlsx"),document.body.appendChild(c),c.click(),c.remove(),n.value=null}catch(a){n.value=((e=(s=a.response)==null?void 0:s.data)==null?void 0:e.message)||"Something went wrong"}finally{r.value=!1}}}});export{k as u};
