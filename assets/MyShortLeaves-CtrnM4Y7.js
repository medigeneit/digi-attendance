import{L as M}from"./LoaderView-DSPZV6Kw.js";import{_ as B}from"./FlexibleDatePicker-qMe8DFax.js";import{u as j}from"./short-leave-5am0V4ns.js";import{u as T,r as U,x as u,q as $,p as F,c as r,o as n,a as t,d as p,m as h,b as l,n as R,t as d,F as q,e as z,s as P,k as w}from"./index-C8s2zm6y.js";const E={class:"space-y-6 px-4 py-5"},G={class:"rounded-2xl border border-slate-200 bg-white px-4 py-4 shadow-sm md:px-6"},H={class:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between"},Y={class:"flex flex-wrap items-center gap-2"},I={key:0,class:"text-center py-10"},J={key:1,class:"space-y-4"},K={key:0,class:"rounded-2xl border border-dashed border-slate-300 bg-slate-50 p-6 text-center text-slate-600"},O={class:"text-sm text-slate-500"},Q={key:1,class:"rounded-2xl border border-slate-200 bg-white shadow-sm"},W={class:"flex items-center justify-between border-b border-slate-100 px-5 py-3"},X={class:"text-sm font-semibold text-slate-600"},Z={class:"overflow-x-auto"},v={class:"min-w-full divide-y divide-slate-100 text-sm"},tt={class:"divide-y divide-slate-100"},et={class:"px-4 py-3 font-semibold text-slate-600"},st={class:"px-4 py-3 text-slate-700"},ot={class:"px-4 py-3 text-slate-700"},rt={class:"px-4 py-3 text-slate-700"},nt={class:"px-4 py-3 text-slate-700"},dt={class:"px-4 py-3 text-slate-700"},it={class:"px-4 py-3"},at={key:0,class:"flex items-center gap-1 text-xs font-semibold text-indigo-600"},lt={key:1,class:"text-xs text-slate-400"},ct={class:"px-4 py-3"},pt={class:"px-4 py-3"},ut={class:"flex items-center justify-end gap-2"},xt=["onClick"],mt=["href"],wt={__name:"MyShortLeaves",setup(ft){const L=T(),c=j(),S=()=>{L.go(-1)},x=new Date,m=U({year:x.getFullYear(),month:x.getMonth()+1,day:x.getDate()}),k=o=>o.toString().padStart(2,"0"),b=u(()=>{const o=m.value||{};return!o.year||!o.month?"":`${o.year}-${k(o.month)}`}),A=async o=>{c.fetchMyShortLeaves({date:o})};$(b,o=>{o&&(c.selectedMonth=o,A(o))},{immediate:!0});const C=o=>{const s=(o||"").toLowerCase();return["approved","approved by hr","approved by incharge"].includes(s)?"border border-emerald-200 bg-emerald-50 text-emerald-700":["rejected","cancelled","declined"].includes(s)?"border border-red-200 bg-red-50 text-red-700":s==="pending"||!s?"border border-amber-200 bg-amber-50 text-amber-800":"border border-slate-200 bg-slate-50 text-slate-800"},f=u(()=>c.shortLeaves||[]),y=u(()=>Array.isArray(f.value)?f.value.length:0),D=u(()=>{const o=b.value;if(!o)return"All months";const[s,i]=o.split("-");return!s||!i?"All months":new Date(Number(s),Number(i)-1).toLocaleString("en-US",{month:"long",year:"numeric"})});function N(o){confirm("Are you sure you want to delete this application?")&&c.deleteShortLeave(o)}const _=o=>o?new Date(o).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):"N/A",g=o=>{if(!o)return"N/A";const[s,i]=o.split(":").map(Number),a=new Date;return a.setHours(s,i),a.toLocaleString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})};return(o,s)=>{var a;const i=F("RouterLink");return n(),r("div",E,[t("div",G,[t("div",H,[t("div",null,[t("button",{class:"btn-3 order-2 md:order-1",onClick:S},s[1]||(s[1]=[t("i",{class:"far fa-arrow-left"},null,-1),t("span",{class:"hidden md:inline-flex"},"Back",-1)]))]),s[3]||(s[3]=t("div",{class:"space-y-1"},[t("p",{class:"text-2xl font-semibold text-slate-900"}," Short Leaves Applications ")],-1)),t("div",Y,[p(i,{to:{name:"ShortLeaveAdd"},class:"btn-2 order-1 md:order-2"},{default:h(()=>s[2]||(s[2]=[t("i",{class:"far fa-plus mr-1"},null,-1),l(" New Short Leave ")])),_:1,__:[2]}),p(B,{modelValue:m.value,"onUpdate:modelValue":s[0]||(s[0]=e=>m.value=e),"show-year":!1,"show-month":!0,"show-date":!1,label:"Month"},null,8,["modelValue"])])])]),(a=R(c))!=null&&a.loading?(n(),r("div",I,[p(M)])):(n(),r("div",J,[y.value===0?(n(),r("div",K,[s[5]||(s[5]=t("p",{class:"text-lg font-semibold text-slate-800"},"No requests yet",-1)),t("p",O,"Create your first short leave for "+d(D.value),1),p(i,{to:{name:"ShortLeaveAdd"},class:"mt-3 inline-flex rounded-full border border-indigo-200 bg-indigo-50 px-4 py-2 text-sm font-semibold text-indigo-700 shadow-sm hover:bg-indigo-100"},{default:h(()=>s[4]||(s[4]=[t("i",{class:"far fa-plus mr-2"},null,-1),l(" Create short leave ")])),_:1,__:[4]})])):(n(),r("div",Q,[t("div",W,[t("p",X,"Showing "+d(y.value)+" records",1),s[6]||(s[6]=t("span",{class:"text-xs text-slate-500"}," Updated just now ",-1))]),t("div",Z,[t("table",v,[s[11]||(s[11]=t("thead",{class:"bg-slate-50 text-[11px] uppercase tracking-wider text-slate-500"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left"},"#"),t("th",{class:"px-4 py-3 text-left"},"Created Date"),t("th",{class:"px-4 py-3 text-left"},"Leave Date"),t("th",{class:"px-4 py-3 text-left"},"Type"),t("th",{class:"px-4 py-3 text-left"},"Time"),t("th",{class:"px-4 py-3 text-left"},"Minutes"),t("th",{class:"px-4 py-3 text-left"},"Attachment"),t("th",{class:"px-4 py-3 text-left"},"Status"),t("th",{class:"px-4 py-3 text-right"},"Actions")])],-1)),t("tbody",tt,[(n(!0),r(q,null,z(f.value,(e,V)=>(n(),r("tr",{key:e==null?void 0:e.id,class:"hover:bg-slate-50 transition"},[t("td",et,d(V+1),1),t("td",st,d(_(e==null?void 0:e.created_at)),1),t("td",ot,d(_(e==null?void 0:e.date)),1),t("td",rt,d((e==null?void 0:e.type)||"Short Leave"),1),t("td",nt,d(g(e==null?void 0:e.start_time))+" - "+d(g(e==null?void 0:e.end_time)),1),t("td",dt,d((e==null?void 0:e.total_minutes)||"â€”"),1),t("td",it,[e!=null&&e.attachment?(n(),r("div",at,s[7]||(s[7]=[t("i",{class:"far fa-paperclip"},null,-1),l(" Attached ")]))):(n(),r("span",lt,"None"))]),t("td",ct,[t("span",{class:P(["inline-flex items-center rounded-full px-3 py-1 text-[11px] font-semibold tracking-wide",C(e==null?void 0:e.status)])},d((e==null?void 0:e.status)||"Pending"),3)]),t("td",pt,[t("div",ut,[p(i,{to:{name:"ShortLeaveShow",params:{id:e==null?void 0:e.id}},class:"inline-flex items-center rounded-full border border-slate-200 px-3 py-1.5 text-xs font-semibold text-slate-600 transition hover:border-indigo-200 hover:text-indigo-700"},{default:h(()=>s[8]||(s[8]=[t("i",{class:"far fa-eye mr-1"},null,-1),l(" View ")])),_:2,__:[8]},1032,["to"]),e.status=="Pending"||!e.status?(n(),r("button",{key:0,type:"button",onClick:ht=>N(e==null?void 0:e.id),class:"inline-flex items-center rounded-full border border-red-200 px-3 py-1.5 text-xs font-semibold text-red-600 transition hover:border-red-300 hover:text-red-700"},s[9]||(s[9]=[t("i",{class:"far fa-trash mr-1"},null,-1),l(" Delete ")]),8,xt)):w("",!0),e!=null&&e.attachment?(n(),r("a",{key:1,href:e.attachment,target:"_blank",rel:"noreferrer",class:"inline-flex items-center rounded-full border border-indigo-200 px-3 py-1.5 text-xs font-semibold text-indigo-600 transition hover:border-indigo-300 hover:text-indigo-800"},s[10]||(s[10]=[t("i",{class:"far fa-download mr-1"},null,-1),l(" Download ")]),8,mt)):w("",!0)])])]))),128))])])])]))]))])}}};export{wt as default};
