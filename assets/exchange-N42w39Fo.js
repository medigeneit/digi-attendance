import{E as A,r as v,G as r}from"./index-D6cR4M0f.js";const S=A("exchange",()=>{const p=v([]),u=v([]),o=v(null),l=v(!1),s=v(null);async function d(t,n=""){var a,e;l.value=!0,s.value=null;try{const c=await r.get(`/all-exchanges?type=${t}&user_id=${n}`);p.value=c.data.data}catch(c){s.value=((e=(a=c.response)==null?void 0:a.data)==null?void 0:e.message)||"Failed to fetch exchanges"}finally{l.value=!1}}async function g(t){var n,a;l.value=!0,s.value=null;try{const e=await r.get(`/exchanges?type=${t}`);u.value=e.data.data}catch(e){s.value=((a=(n=e.response)==null?void 0:n.data)==null?void 0:a.message)||"Failed to fetch exchanges"}finally{l.value=!1}}async function f(t){var n,a;l.value=!0,s.value=null;try{const e=await r.get(`/exchanges/${t}`);o.value=e.data}catch(e){s.value=((a=(n=e.response)==null?void 0:n.data)==null?void 0:a.message)||`Failed to fetch exchange with ID ${t}`}finally{l.value=!1}}async function y(t){var n,a;l.value=!0,s.value=null;try{const e=await r.post("/exchanges",t);return u.value.push(e.data.data),e.data.data}catch(e){s.value=((a=(n=e.response)==null?void 0:n.data)==null?void 0:a.message)||"Failed to create exchange"}finally{l.value=!1}}async function x(t,n){var a,e;l.value=!0,s.value=null;try{const c=await r.put(`/exchanges/${t}`,n),h=u.value.findIndex(i=>i.id===t);h!==-1&&(u.value[h]=c.data)}catch(c){s.value=((e=(a=c.response)==null?void 0:a.data)==null?void 0:e.message)||`Failed to update exchange with ID ${t}`}finally{l.value=!1}}async function m(t,n){var a,e;l.value=!0,s.value=null;try{const c=await r.put(`/attachment-upload/exchanges/${t}`,n),h=u.value.findIndex(i=>i.id===t);h!==-1&&(u.value[h]=c.data)}catch(c){s.value=((e=(a=c.response)==null?void 0:a.data)==null?void 0:e.message)||`Failed to update exchange with ID ${t}`}finally{l.value=!1}}async function $(t){var n,a;l.value=!0,s.value=null;try{await r.delete(`/exchanges/${t}`),u.value=u.value.filter(e=>e.id!==t)}catch(e){s.value=((a=(n=e.response)==null?void 0:n.data)==null?void 0:a.message)||`Failed to delete exchange with ID ${t}`}finally{l.value=!1}}async function w(t){var n,a;l.value=!0,s.value=null;try{const e=await r.post(`/exchanges/${t}/handover-accept`);o.value=e.data}catch(e){s.value=((a=(n=e.response)==null?void 0:n.data)==null?void 0:a.message)||`Failed to accept handover for exchange ID ${t}`}finally{l.value=!1}}async function F(t){var n,a;l.value=!0,s.value=null;try{const e=await r.post(`/exchanges/${t}/in-charge-accept`);o.value=e.data}catch(e){s.value=((a=(n=e.response)==null?void 0:n.data)==null?void 0:a.message)||`Failed to accept in-charge for exchange ID ${t}`}finally{l.value=!1}}async function I(t){var n,a;l.value=!0,s.value=null;try{const e=await r.post(`/exchanges/${t}/recommend-accept`);o.value=e.data}catch(e){s.value=((a=(n=e.response)==null?void 0:n.data)==null?void 0:a.message)||`Failed to recommend exchange ID ${t}`}finally{l.value=!1}}async function E(t){var n,a;l.value=!0,s.value=null;try{const e=await r.post(`/exchanges/${t}/approve`);o.value=e.data}catch(e){s.value=((a=(n=e.response)==null?void 0:n.data)==null?void 0:a.message)||`Failed to approve exchange ID ${t}`}finally{l.value=!1}}async function D(t,n){var a,e;l.value=!0,s.value=null;try{const c=await r.post(`/exchanges/${t}/reject`,{rejection_reason:n});o.value=c.data}catch(c){s.value=((e=(a=c.response)==null?void 0:a.data)==null?void 0:e.message)||`Failed to reject exchange ID ${t}`}finally{l.value=!1}}return{all_exchanges:p,exchanges:u,exchange:o,loading:l,error:s,fetchAllExchanges:d,fetchExchanges:g,fetchExchange:f,createExchange:y,updateExchange:x,deleteExchange:$,handoverAccept:w,inChargeAccept:F,recommendByAccept:I,approvedByAccept:E,rejectExchange:D,fetchFileUpload:async t=>{var n,a;try{return l.value=!0,(await r.post("attachment-upload",t,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(e){s.value=((a=(n=e.response)==null?void 0:n.data)==null?void 0:a.message)||"Something went wrong"}finally{l.value=!1}},uploadAttachmentExchange:m}});export{S as u};
