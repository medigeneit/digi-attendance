import{u as V,b as H,r as D,e as O,y as T,B as R,c as o,o as r,a as t,g as _,f as E,s as p,h as F,v as j,k as B,F as y,q as x,j as f,t as a,i as m}from"./index-BKgdzu_o.js";import{_ as W}from"./EmployeeFilter-BK_b8h1E.js";import{L as G}from"./LoaderView-GlVQbooq.js";import{_ as A}from"./DisplayFormattedWorkingHours-DaTsc7vt.js";import{S as I}from"./SelectedEmployeeCard-CUbiZmnF.js";import{u as z}from"./leave-application-DVbdDwsl.js";import{u as P}from"./user-HxOpoM6x.js";import"./company-B7duRx3C.js";import"./department-wFKlhmSg.js";import"./EmployeeDropdownInput-DdZG0zxF.js";import"./SelectDropdown-D9ANyCgT.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./UserChip-IDoNCYdY.js";const J={class:"px-4 space-y-4"},Q={class:"flex flex-wrap gap-4"},X={key:0,class:"flex justify-between gap-4 text-sm"},Y={class:"space-y-5"},Z={class:"text-base font-semibold text-blue-400 mb-2 text-center capitalize"},K={class:"text-gray-500"},tt={key:0,class:"overflow-x-auto rounded border bg-white"},et={class:"min-w-full table-auto border-collapse border border-gray-200 bg-white rounded-md text-sm"},st={class:"border border-gray-300 px-2 text-center"},at={class:"border border-gray-300 px-2 text-center"},rt={class:"border border-gray-300 px-2 text-center"},ot={class:"border border-gray-300 px-2 text-center"},lt={class:"border border-gray-300 px-2 text-center"},nt={class:"border border-gray-300 px-2 text-center"},dt={class:"border border-gray-300 px-2 text-center"},ct={class:"border border-gray-300 px-2 text-center"},it={class:"border border-gray-300 px-2 text-center"},pt={class:"border border-gray-300 px-2 text-center"},ut={class:"border border-gray-300 px-2 text-center"},_t={class:"border border-gray-300 px-2 text-center !py-0.5"},ht={key:1,class:"overflow-x-auto rounded border bg-white"},yt={class:"min-w-full text-sm text-left"},xt={class:"p-2"},bt={class:"p-2"},gt={class:"p-2"},ft={class:"p-2"},mt={class:"p-2 whitespace-pre-line"},vt={class:"p-2 whitespace-pre-line"},wt={class:"p-2 text-sm text-gray-600"},kt={key:2,class:"overflow-x-auto rounded border bg-white"},St={class:"min-w-full text-sm text-left"},Dt={class:"p-2"},At={class:"p-2"},Ct={class:"p-2"},Lt={class:"p-2"},qt={class:"p-2 whitespace-pre-line"},$t={class:"p-2 whitespace-pre-line"},Tt={class:"p-2 whitespace-pre-line"},Bt={class:"p-2 whitespace-pre-line text-center"},Mt=["href"],Ut={key:1,class:"text-gray-400"},Nt={class:"p-2 whitespace-pre-line"},Vt={class:"p-2 text-sm text-gray-600"},Ht={key:3,class:"overflow-x-auto rounded border bg-white"},Ot={class:"min-w-full text-sm text-left"},Rt={class:"p-2"},Et={class:"p-2"},Ft={class:"p-2"},jt={class:"p-2"},Wt={class:"p-2 whitespace-pre-line"},Gt={class:"p-2 whitespace-pre-line"},It={class:"p-2 text-sm text-gray-600"},zt={key:4,class:"overflow-x-auto rounded border bg-white"},Pt={class:"min-w-full text-sm text-left"},Jt={class:"p-2"},Qt={class:"p-2"},Xt={class:"p-2"},Yt={class:"p-2"},Zt={class:"p-2"},Kt={class:"p-2"},te={class:"p-2 whitespace-pre-line"},ee={class:"p-2 text-sm text-gray-600"},xe={__name:"MonthWiseApplicationLog",setup(se){const v=V(),u=H(),C=P(),w=z(),k=D(null),b=D(u.query.date||w.selectedMonth),l=D({company_id:u.query.company_id||"",department_id:u.query.department_id||"all",line_type:u.query.line_type||"all",employee_id:u.query.employee_id||"",category:""}),L=async n=>{n?(await C.fetchUser(n),k.value=C.user):k.value=null},S=async()=>{l.value.employee_id&&b.value&&await w.getMonthlyApplicationLog(l.value.employee_id,b.value)};O(async()=>{l.value.employee_id&&await L(l.value.employee_id)}),T(()=>l.value.employee_id,async(n,s)=>{n&&n!==s&&(await L(n),await S(),v.replace({query:{...u.query,employee_id:n}}))}),T(b,n=>{v.replace({query:{...u.query,date:n}}),S()});const M=()=>v.go(-1),q=n=>new Date(n).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),$=n=>new Date(`1970-01-01T${n}`).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),g=n=>`${new Date(n).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})}`,U=()=>{v.replace({query:{...u.query,company_id:l.value.company_id,department_id:l.value.department_id,line_type:l.value.line_type,employee_id:l.value.employee_id}})},N={exchange_shift:"ExchangeShiftShow",exchange_offday:"ExchangeOffdayShow"};return(n,s)=>{const h=R("RouterLink");return r(),o("div",J,[t("div",{class:"flex items-center justify-between gap-2"},[t("button",{class:"btn-3",onClick:M},s[5]||(s[5]=[t("i",{class:"far fa-arrow-left"},null,-1),t("span",{class:"hidden md:flex"},"Back",-1)])),s[6]||(s[6]=t("h1",{class:"title-md md:title-lg flex-wrap text-center"},"Monthly Application Log",-1)),s[7]||(s[7]=t("div",null,null,-1))]),t("div",Q,[p(W,{company_id:l.value.company_id,"onUpdate:company_id":s[0]||(s[0]=d=>l.value.company_id=d),department_id:l.value.department_id,"onUpdate:department_id":s[1]||(s[1]=d=>l.value.department_id=d),employee_id:l.value.employee_id,"onUpdate:employee_id":s[2]||(s[2]=d=>l.value.employee_id=d),line_type:l.value.line_type,"onUpdate:line_type":s[3]||(s[3]=d=>l.value.line_type=d),"with-type":!0,"initial-value":n.$route.query,onFilterChange:U},null,8,["company_id","department_id","employee_id","line_type","initial-value"]),t("div",null,[F(t("input",{id:"monthSelect",type:"month","onUpdate:modelValue":s[4]||(s[4]=d=>b.value=d),onChange:S,class:"input-1"},null,544),[[j,b.value]])])]),k.value?(r(),o("div",X,[p(I,{user:k.value},null,8,["user"])])):_("",!0),B(w).loading?(r(),E(G,{key:1})):_("",!0),t("div",Y,[(r(!0),o(y,null,x(B(w).applicationLog,(d,i)=>(r(),o("div",{key:i,class:"bg-gray-50 p-4 rounded shadow"},[t("h2",Z,[f(a(i.replaceAll("_"," "))+" ",1),t("span",K,"("+a(d.length)+")",1)]),i==="overtime"?(r(),o("div",tt,[t("table",et,[s[9]||(s[9]=t("thead",null,[t("tr",{class:"bg-gray-200 *:py-1"},[t("th",{class:"border border-gray-300 px-2 text-center"},"#"),t("th",{class:"border border-gray-300 px-2 text-center"},"Date"),t("th",{class:"border border-gray-300 px-2 text-center"},"Type"),t("th",{class:"border border-gray-300 px-2 text-center"},"Shift"),t("th",{class:"border border-gray-300 px-2 text-center"},"Check-In"),t("th",{class:"border border-gray-300 px-2 text-center"},"Check-Out"),t("th",{class:"border border-gray-300 px-2 text-center"},"Working (hour)"),t("th",{class:"border border-gray-300 px-2 text-center"},"Request (hour)"),t("th",{class:"border border-gray-300 px-2 text-center"},"Approved (hour)"),t("th",{class:"border border-gray-300 px-2 text-center"},"Details"),t("th",{class:"border border-gray-300 px-2 text-center"},"Status"),t("th",{class:"border border-gray-300 px-2 text-center"},"Action")])],-1)),t("tbody",null,[(r(!0),o(y,null,x(d,(e,c)=>(r(),o("tr",{key:`${i}-${c}`,class:"border-b border-gray-200 hover:bg-blue-200 *:py-2"},[t("td",st,a(c+1),1),t("td",at,a(new Date(e.date).toLocaleDateString("en-GB",{day:"2-digit",month:"long",year:"numeric"})),1),t("td",rt,a(e.duty_type),1),t("td",ot,a(e.shift),1),t("td",lt,a(e.check_in||"- : -"),1),t("td",nt,a(e.check_out||"- : -"),1),t("td",dt,[p(A,{workingHours:e.working_hours},null,8,["workingHours"])]),t("td",ct,[p(A,{workingHours:e.request_overtime_hours},null,8,["workingHours"])]),t("td",it,[p(A,{workingHours:e.approval_overtime_hours},null,8,["workingHours"])]),t("td",pt,a(e.work_details||""),1),t("td",ut,a(e.status||"Pending"),1),t("td",_t,[p(h,{to:{name:"MyOvertimeShow",params:{id:e.id}},class:"text-blue-800"},{default:m(()=>s[8]||(s[8]=[t("i",{class:"far fa-eye text-lg"},null,-1)])),_:2,__:[8]},1032,["to"])])]))),128))])])])):_("",!0),i==="leave_application"?(r(),o("div",ht,[t("table",yt,[s[11]||(s[11]=t("thead",{class:"bg-gray-100 text-gray-700 text-xs uppercase"},[t("tr",null,[t("th",{class:"p-2"},"#"),t("th",{class:"p-2"},"Create Date"),t("th",{class:"p-2"},"Last Working Date"),t("th",{class:"p-2"},"Resumption Date"),t("th",{class:"p-2"},"Type"),t("th",{class:"p-2"},"Status"),t("th",{class:"p-2"},"Action")])],-1)),t("tbody",null,[(r(!0),o(y,null,x(d,(e,c)=>(r(),o("tr",{key:`${i}-${c}`,class:"border-t hover:bg-gray-50 text-sm"},[t("td",xt,a(c+=1),1),t("td",bt,a(g(e.create_date)),1),t("td",gt,a(e.from),1),t("td",ft,a(e.to),1),t("td",mt,a(e.application_types),1),t("td",vt,a(e.status),1),t("td",wt,[p(h,{to:{name:"LeaveApplicationShow",params:{id:e.id}},class:"inline-flex items-center gap-1 text-blue-600 hover:underline"},{default:m(()=>s[10]||(s[10]=[t("i",{class:"far fa-eye"},null,-1),f(" View ")])),_:2,__:[10]},1032,["to"])])]))),128))])])])):_("",!0),i==="short_leave"?(r(),o("div",kt,[t("table",St,[s[14]||(s[14]=t("thead",{class:"bg-gray-100 text-gray-700 text-xs uppercase"},[t("tr",null,[t("th",{class:"p-2"},"#"),t("th",{class:"p-2"},"Create Date"),t("th",{class:"p-2"},"Type"),t("th",{class:"p-2"},"Date"),t("th",{class:"p-2"},"Check In"),t("th",{class:"p-2"},"Check Out"),t("th",{class:"p-2"},"Duration"),t("th",{class:"p-2"},"Attachment"),t("th",{class:"p-2"},"Status"),t("th",{class:"p-2"},"Action")])],-1)),t("tbody",null,[(r(!0),o(y,null,x(d,(e,c)=>(r(),o("tr",{key:`${i}-${c}`,class:"border-t hover:bg-gray-50 text-sm"},[t("td",Dt,a(c+=1),1),t("td",At,a(g(e.create_date)),1),t("td",Ct,a(e.application_types),1),t("td",Lt,a(e.date),1),t("td",qt,a($(e.start_time)),1),t("td",$t,a($(e.end_time)),1),t("td",Tt,a(e.duration)+" m ",1),t("td",Bt,[e.attachment?(r(),o("a",{key:0,href:e.attachment,target:"_blank",rel:"noopener",class:"text-blue-600 hover:underline"},s[12]||(s[12]=[t("i",{class:"far fa-eye"},null,-1)]),8,Mt)):(r(),o("span",Ut,"No file"))]),t("td",Nt,a(e.status),1),t("td",Vt,[p(h,{to:{name:"ShortLeaveShow",params:{id:e.id}},class:"inline-flex items-center gap-1 text-blue-600 hover:underline"},{default:m(()=>s[13]||(s[13]=[t("i",{class:"far fa-eye"},null,-1),f(" View ")])),_:2,__:[13]},1032,["to"])])]))),128))])])])):_("",!0),i==="exchange_offday"||i==="exchange_shift"?(r(),o("div",Ht,[t("table",Ot,[s[16]||(s[16]=t("thead",{class:"bg-gray-100 text-gray-700 text-xs uppercase"},[t("tr",null,[t("th",{class:"p-2"},"#"),t("th",{class:"p-2"},"Create Date"),t("th",{class:"p-2"},"Current Date"),t("th",{class:"p-2"},"Exchange Date"),t("th",{class:"p-2"},"Shift"),t("th",{class:"p-2"},"Status"),t("th",{class:"p-2"},"Action")])],-1)),t("tbody",null,[(r(!0),o(y,null,x(d,(e,c)=>(r(),o("tr",{key:`${i}-${c}`,class:"border-t hover:bg-gray-50 text-sm"},[t("td",Rt,a(c+=1),1),t("td",Et,a(g(e.create_date)),1),t("td",Ft,a(e.current_date),1),t("td",jt,a(e.exchange_date),1),t("td",Wt,a((e==null?void 0:e.shift)||"N/A"),1),t("td",Gt,a(e.status),1),t("td",It,[p(h,{to:{name:N[e.type],params:{id:e.id}},class:"inline-flex items-center gap-1 text-blue-600 hover:underline"},{default:m(()=>s[15]||(s[15]=[t("i",{class:"far fa-eye"},null,-1),f(" View ")])),_:2,__:[15]},1032,["to"])])]))),128))])])])):_("",!0),i==="manual_attendance"?(r(),o("div",zt,[t("table",Pt,[s[18]||(s[18]=t("thead",{class:"bg-gray-100 text-gray-700 text-xs uppercase"},[t("tr",null,[t("th",{class:"p-2"},"#"),t("th",{class:"p-2"},"Create Date"),t("th",{class:"p-2"},"Date"),t("th",{class:"p-2"},"Type"),t("th",{class:"p-2"},"Check In"),t("th",{class:"p-2"},"Check Out"),t("th",{class:"p-2"},"Status"),t("th",{class:"p-2"},"Action")])],-1)),t("tbody",null,[(r(!0),o(y,null,x(d,(e,c)=>(r(),o("tr",{key:`${i}-${c}`,class:"border-t hover:bg-gray-50 text-sm"},[t("td",Jt,a(c+=1),1),t("td",Qt,a(g(e.create_date)),1),t("td",Xt,a(g(e.check_in||e.check_out)),1),t("td",Yt,a(e.application_types),1),t("td",Zt,a(q(e.check_in)||"N/A"),1),t("td",Kt,a(q(e.check_out)||"N/A"),1),t("td",te,a(e.status),1),t("td",ee,[p(h,{to:{name:"ManualAttendanceShow",params:{id:e.id}},class:"inline-flex items-center gap-1 text-blue-600 hover:underline"},{default:m(()=>s[17]||(s[17]=[t("i",{class:"far fa-eye"},null,-1),f(" View ")])),_:2,__:[17]},1032,["to"])])]))),128))])])])):_("",!0)]))),128))])])}}};export{xe as default};
