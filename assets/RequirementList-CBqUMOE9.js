import{L as Y}from"./LoaderView-7wbWNiBa.js";import{_ as I}from"./DepartmentChip-BpNVVKGp.js";import{g as K,p as Z,c as n,o as a,a as t,F as Q,e as J,t as d,k as w,d as u,m as x,s as C,b as z,j as D,n as p,f as W,x as h,r as G,h as X,q as P,w as q,l as F,Q as ee,v as te,u as se}from"./index-MLT4TxMN.js";import{_ as T}from"./UserChip-BJll6UHz.js";import{g as ae}from"./task-BjVEfQqK.js";import{u as oe}from"./company-WZBPoXfZ.js";import{_ as H}from"./CompanyDepartmentSelectInput-DaVIQbcY.js";import{_ as le}from"./EmployeeDropdownInput-yZkuVFvB.js";import{_ as ne}from"./SearchInput-BePqP8Ik.js";import{S as j}from"./SelectDropdown-BH_JDgDn.js";import{u as de}from"./useRequirementStore-DA8sG-be.js";import"./user-Duu01Kho.js";import"./url-Buz9GlSr.js";import"./requirement-CsAXEh9s.js";const ie={class:"min-w-full bg-white border table table-fixed"},re={key:0},me={class:"px-4 py-4 font-semibold text-xl text-gray-700 border border-gray-200 text-center"},ce={class:"px-4 py-4 min-w-[300px] md:min-w-[400px] border border-gray-200"},ue={class:"space-y-4"},pe={class:"text-xl mb-4 flex gap-4 md:justify-between items-center"},xe={class:"text-sky-800 font-bold hover:underline md:mr-auto"},_e={key:0,class:"flex justify-center items-center gap-1 text-gray-600 mt-1",title:"Comments"},ye={class:"relative"},he={class:"text-xs absolute top-1 left-1/2 -translate-x-1/2 font-semibold"},fe={class:"hidden md:inline"},ge={class:"flex justify-center items-center gap-1"},be={class:"text-blue-800"},ve=["title"],we={class:"text-gray-400 text-xs mt-4"},ke=["title","innerHTML"],$e={key:0},Ve={class:"flex gap-6 items-center mt-4"},Ne={key:0,class:"text-gray-600 text-xs flex items-center gap-2 whitespace-nowrap"},Ae={class:"flex items-center gap-2 whitespace-nowrap"},Re={key:0,class:"flex gap-2 items-center bg-gray-50 bg-opacity-70 hover:bg-opacity-90 border-gray-100 rounded-md mt-1"},Te={class:"text-sm flex items-center gap-2 text-red-400 font-semibold"},Ce={class:"mt-[2px] whitespace-nowrap"},De={class:"text-gray-800 flex items-center gap-2"},Se={class:"px-4 py-4 whitespace-nowrap border border-gray-200"},Le=["title"],Me={class:"flex items-center gap-2 mt-4"},Be={key:1},Ue={class:"flex items-center gap-2 mt-3"},Ee={key:1},je={key:0,class:"text-xs text-red-300"},ze={key:1,class:"italic text-xs text-gray-400"},Pe={class:"px-4 py-4 whitespace-nowrap border border-gray-200"},Oe=["title"],Ie={class:"flex items-center gap-2 mt-4"},Fe={key:1},He={key:0,class:"text-xs text-red-300"},Ke={key:1,class:"italic text-xs text-gray-400"},Qe={class:"flex items-center gap-2 mt-3"},Je={key:1},We={key:0,class:"text-xs text-red-300"},Xe={key:1,class:"italic text-xs text-gray-400"},Ye={class:"px-4 py-4 text-center whitespace-nowrap border border-gray-200"},Ze={key:0,class:"text-gray-600 text-sm"},Ge={class:"mb-4 w-full flex flex-col justify-between items-start"},qe={class:"w-full flex flex-col justify-between items-start"},et={key:1},tt={class:"px-4 py-2 md:py-4 text-center border border-gray-200 bg-sky-50 sm:sticky right-0"},st={class:"flex gap-2 md:gap-4 items-center justify-center mt-3"};const at={__name:"RequirementTable",props:{requirements:{type:Array,default:()=>[]}},setup(L){const m=K();return(k,l)=>{var v;const b=Z("RouterLink");return a(),n("table",ie,[l[26]||(l[26]=t("thead",{class:"bg-gray-100 text-gray-400 text-xs"},[t("tr",null,[t("th",{class:"px-4 py-0.5 text-center whitespace-nowrap border w-[4%]"},"#"),t("th",{class:"px-4 py-0.5 text-left whitespace-nowrap border w-[60%]"},"Requirement"),t("th",{class:"px-4 py-0.5 text-center whitespace-nowrap w-[12%] border"},"From Department"),t("th",{class:"px-4 py-0.5 text-center whitespace-nowrap w-[12%] border"},"To Department"),t("th",{class:"px-4 py-0.5 text-center whitespace-nowrap w-[12%] border"}),t("th",{class:"px-4 py-0.5 text-center whitespace-nowrap w-[12%] border bg-sky-50 sm:sticky right-0"})])],-1)),t("tbody",null,[((v=L.requirements)==null?void 0:v.length)===0?(a(),n("tr",re,l[4]||(l[4]=[t("td",{colspan:"10",class:"p-4"},[t("div",{class:"text-gray-500 italic w-full h-64 flex items-center justify-center"}," No Requirement Found ")],-1)]))):(a(!0),n(Q,{key:1},J(L.requirements,(e,c)=>{var i,f,r,A,R,M,B,_,U,y,S,E,g,o,$,V,N;return a(),n("tr",{key:e.id,class:"border-t hover:bg-blue-50 odd:bg-gray-50 group/item relative"},[t("td",me,d(c+1),1),t("td",ce,[t("div",ue,[u(b,{to:{name:"RequirementShow",params:{id:e==null?void 0:e.id}},class:"text-blue-600 hover:text-blue-800 z-20"},{default:x(()=>{var s,O;return[t("div",pe,[t("span",xe,d(e==null?void 0:e.id),1),e.comments_count>0?(a(),n("div",_e,[t("div",ye,[l[5]||(l[5]=t("i",{class:"far fa-comment-alt"},null,-1)),t("span",he,d(e.comments_count),1)])])):w("",!0),t("div",{class:C(["whitespace-nowrap text-sm",[{"text-green-700 font-semibold":e.tasks_count>0&&e.completed_tasks_count==e.tasks_count,"text-red-700 font-semibold":e.tasks_count==0||e.completed_tasks_count!=e.tasks_count}]])},[z(d(e.completed_tasks_count)+"/"+d(e.tasks_count)+" ",1),t("span",fe," task"+d(e.completed_tasks_count!==1?"s":""),1),l[6]||(l[6]=t("span",null," done",-1))],2),t("div",ge,[t("span",{class:C(["border rounded-lg px-2 py-0.5 text-xs",{"bg-red-300 text-red-700 border-red-400":e.status!="approved","bg-green-300 text-green-700 border-green-400":e.status=="approved"}])},d(String(e.status).toUpperCase()),3)])]),t("div",be,[t("div",{class:"line-clamp-2 font-semibold hover:underline",title:e==null?void 0:e.title},d(e==null?void 0:e.title),9,ve)]),t("div",we,[t("div",{class:"line-clamp-2",title:e==null?void 0:e.description,innerHTML:e==null?void 0:e.description},null,8,ke)]),((s=e==null?void 0:e.details)==null?void 0:s.length)-1>0?(a(),n("span",$e,d(((O=e==null?void 0:e.details)==null?void 0:O.length)-1)+" More Requirement ",1)):w("",!0)]}),_:2},1032,["to"])]),t("div",Ve,[e.created_at?(a(),n("div",Ne,[l[7]||(l[7]=t("i",{class:"fas fa-clock text-sky-800/50"},null,-1)),t("div",null,d(new Date(e.created_at).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0})),1)])):w("",!0),t("div",Ae,[l[8]||(l[8]=t("span",{class:"text-xs text-gray-500"},"By:",-1)),e.created_by?(a(),D(T,{key:0,"show-details-on-avatar-hover":p(m).isAdminMood,user:e.created_by,"avatar-size":"xsmall"},null,8,["show-details-on-avatar-hover","user"])):w("",!0)]),e.priority?(a(),n("span",{key:1,class:C(["font-semibold text-sm border rounded-full px-2",{"bg-yellow-50 text-yellow-700 border-yellow-700 ":e.priority=="IMPORTANT","bg-red-700 text-red-50 ":e.priority=="URGENT"}])},d(e.priority),3)):w("",!0)]),e.closed_at?(a(),n("div",Re,[t("div",Te,[l[9]||(l[9]=t("span",{class:"fad fa-lock"},null,-1)),l[10]||(l[10]=t("span",{class:"mt-[2px] whitespace-nowrap mr-2"},"CLOSED AT",-1)),t("span",Ce,d(new Date(e.closed_at).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0})),1)]),t("div",De,[l[11]||(l[11]=t("span",{class:"text-sm whitespace-nowrap"},"Closed by",-1)),u(T,{user:e.closed_by_user,"avatar-size":"xsmall"},null,8,["user"])])])):w("",!0)]),t("td",Se,[t("span",{title:(i=e==null?void 0:e.from_department)==null?void 0:i.name,class:C([{"bg-green-500 text-white group-hover/item:text-white":((f=e==null?void 0:e.from_department)==null?void 0:f.id)==((A=(r=p(m))==null?void 0:r.user)==null?void 0:A.department_id)},"text-blue-500 font-semibold flex-shrink-0 border border-blue-500 bg-blue-50 rounded-full px-2 text-xs"])},d(((R=e==null?void 0:e.from_department)==null?void 0:R.short_name)||((M=e==null?void 0:e.from_department)==null?void 0:M.name)),11,Le),t("div",Me,[l[13]||(l[13]=t("div",{class:"text-xs text-gray-500 w-16 mr-1"},"In Charge:",-1)),(B=e==null?void 0:e.from_department)!=null&&B.in_charge?(a(),D(T,{key:0,"show-details-on-avatar-hover":p(m).isAdminMood,user:(_=e==null?void 0:e.from_department)==null?void 0:_.in_charge,"avatar-size":"xsmall"},null,8,["show-details-on-avatar-hover","user"])):(a(),n("div",Be,l[12]||(l[12]=[t("span",{class:"italic text-xs text-gray-400"},"N/A",-1)])))]),t("div",Ue,[l[14]||(l[14]=t("div",{class:"text-xs text-gray-500 w-16 mr-1"},"Coordinator:",-1)),e.from_coordinator?(a(),D(T,{key:0,"show-details-on-avatar-hover":p(m).isAdminMood,user:e.from_coordinator,"avatar-size":"xsmall"},null,8,["show-details-on-avatar-hover","user"])):(a(),n("div",Ee,[(U=e==null?void 0:e.from_department)!=null&&U.coordinator_id?(a(),n("div",je," Approval Pending ")):(a(),n("div",ze,"N/A"))]))])]),t("td",Pe,[t("span",{title:(y=e==null?void 0:e.to_department)==null?void 0:y.name,class:C([{"bg-sky-500 !text-white  ":((S=e==null?void 0:e.to_department)==null?void 0:S.id)==((g=(E=p(m))==null?void 0:E.user)==null?void 0:g.department_id)},"text-sky-500 font-semibold flex-shrink-0 border border-sky-500 bg-blue-50 rounded-full px-2 text-xs"])},d(((o=e==null?void 0:e.to_department)==null?void 0:o.short_name)||(($=e==null?void 0:e.to_department)==null?void 0:$.name)),11,Oe),t("div",Ie,[l[15]||(l[15]=t("div",{class:"text-xs text-gray-500 w-16 mr-1"},"In Charge:",-1)),e.to_incharge?(a(),D(T,{key:0,"show-details-on-avatar-hover":p(m).isAdminMood,user:e.to_incharge,"avatar-size":"xsmall"},null,8,["show-details-on-avatar-hover","user"])):(a(),n("div",Fe,[(V=e==null?void 0:e.to_department)!=null&&V.incharge_id?(a(),n("div",He," Approval Pending ")):(a(),n("div",Ke,"N/A"))]))]),t("div",Qe,[l[16]||(l[16]=t("div",{class:"text-xs text-gray-500 w-16 mr-1"},"Coordinator:",-1)),e.to_coordinator?(a(),D(T,{key:0,"show-details-on-avatar-hover":p(m).isAdminMood,user:e.to_coordinator,"avatar-size":"xsmall"},null,8,["show-details-on-avatar-hover","user"])):(a(),n("div",Je,[(N=e==null?void 0:e.to_department)!=null&&N.coordinator_id?(a(),n("div",We," Approval Pending ")):(a(),n("div",Xe,"N/A"))]))])]),t("td",Ye,[e.submission_date?(a(),n("div",Ze,[t("div",Ge,[l[17]||(l[17]=t("span",{class:"text-xs font-bold"},"Submitted:",-1)),t("div",null,d(new Date(e.submission_date).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}))+" "+d(new Date(e.submission_date).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})),1)]),t("div",qe,[l[18]||(l[18]=t("span",{class:"text-xs font-bold"},"Better To Complete:",-1)),t("div",null,d(new Date(e.submission_date).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})),1)])])):(a(),n("div",et,"-"))]),t("td",tt,[t("div",st,[u(b,{to:{name:"RequirementShow",params:{id:e==null?void 0:e.id}},class:"btn-2 px-4",onClick:l[0]||(l[0]=s=>s.stopPropagation())},{default:x(()=>l[19]||(l[19]=[t("i",{class:"fad fa-eye"},null,-1)])),_:2,__:[19]},1032,["to"]),u(b,{to:{name:"RequirementEdit",params:{id:e==null?void 0:e.id}},class:"btn-4 px-4 border border-blue-500 hover:bg-blue-500 hover:text-white",onClick:l[1]||(l[1]=s=>s.stopPropagation())},{default:x(()=>l[20]||(l[20]=[t("i",{class:"fad fa-edit"},null,-1)])),_:2,__:[20]},1032,["to"])]),(e.closed_at,w("",!0))])])}),128))])])}}},ot={class:"flex flex-col sm:flex-row flex-wrap items-start w-full gap-2"},lt={class:"w-full sm:w-auto flex items-center gap-4"},nt={class:"grid xl:flex grid-cols-1 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-4 md:ml-auto flex-wrap items-center justify-center gap-x-4 gap-y-3 w-full lg:w-auto"},dt={class:"relative"},it={class:"text-xs"},rt=["title"],mt={key:1},ct={class:"w-36 my-0.5"},ut={class:"text-xs"},pt=["user","title"],xt={class:"text-sky-500 font-semibold mr-1"},_t={key:1,class:"text-gray-600"},yt={class:"text-xs"},ht=["user","title"],ft={class:"text-sky-500 font-semibold"},gt={key:1,class:"text-gray-600"},bt={key:1,class:"relative"},vt={class:"text-xs"},wt={key:0,class:"flex items-center gap-1 overflow-hidden text-xs"},kt={key:1,class:"text-gray-600"},$t={class:"relative"},Vt={class:"text-xs"},Nt=["user"],At={key:1},Rt={class:"relative"},Tt={class:"text-xs"},Ct=["user"],Dt={key:1},St={class:"flex items-center text-xs gap-1 text-gray-600 relative rounded h-8 border border-gray-300 bg-white px-2"},Lt={class:"!text-sm flex text-gray-600 relative rounded h-8 border border-gray-300 bg-white pl-2 md:col-span-2 lg:col-span-1"},Mt={class:"mt-4 flex-col lg:flex-row flex lg:items-end"},Bt={__name:"RequirementHeader",props:{modelValue:{type:Object,default:()=>({})},listHasRearranged:{type:Boolean,default:!1},isMyTask:{type:Boolean,default:!1}},emits:["update:modelValue","clickPrioritySave","clickPriorityDiscard","clickAddTask","clickAdd"],setup(L,{emit:m}){const k=L,l=K(),b=W(),v=h(y("company-id")),e=h(y("from-department-id")),c=h(y("to-department-id")),i=h(y("created-by")),f=h(y("month")),r=h(y("priority")),A=h(y("status")),R=h(y("is-closed")),M=h(y("search")),B=m,_=oe(),U=G([]);function y(g){return{get:()=>k.modelValue[g]||"",set:o=>{B("update:modelValue",{...k.modelValue,[g]:o||void 0})}}}async function S(){var g,o,$;if(!k.isMyTask){const V=(g=k.modelValue)==null?void 0:g["company-id"],N=c.value,s={...V?{company_id:V}:{},...N?{department_ids:[N]}:{}};U.value=(($=(o=await ae({params:s}))==null?void 0:o.data)==null?void 0:$.employees)||[]}}X(async()=>{await _.fetchCompanies({with:"departments",ignore_permission:!0}),await _.fetchMyCompanies({with:"departments"}),await S()}),P(()=>c.value,S),P(()=>v.value,()=>{e.value="",c.value="",i.value="",S()});const E=h(()=>v.value?_==null?void 0:_.companies.filter(g=>g.id==v.value):_==null?void 0:_.companies);return(g,o)=>{var $,V,N;return a(),n("div",null,[t("div",ot,[t("div",lt,[o[11]||(o[11]=t("h2",{class:"text-lg 2xl:text-2xl font-bold text-gray-800"},"Requirements",-1)),t("button",{onClick:o[0]||(o[0]=q(s=>B("clickAdd"),["prevent"])),class:"btn-icon size-7 border-gray-400"},o[10]||(o[10]=[t("i",{class:"fas fa-plus text-sm"},null,-1)]))]),t("div",nt,[t("div",dt,[u(j,{modelValue:v.value,"onUpdate:modelValue":o[1]||(o[1]=s=>v.value=s),options:(($=p(_))==null?void 0:$.companies)||[],label:"name",id:"id",class:"border border-gray-300 rounded h-8 bg-white !text-sm",clearable:""},{"selected-option":x(({option:s})=>[t("span",it,[s?(a(),n("span",{key:0,title:s==null?void 0:s.name,class:"max-w-28 line-clamp-1 text-sky-500 font-semibold"},d(s==null?void 0:s.name),9,rt)):(a(),n("span",mt,"Company"))])]),option:x(({option:s})=>[t("div",ct,d(s.name),1)]),_:1},8,["modelValue","options"])]),u(H,{modelValue:e.value,"onUpdate:modelValue":o[2]||(o[2]=s=>e.value=s),companies:E.value||[],class:"relative",className:{select:"border border-gray-300 rounded h-8 bg-white !text-sm"},defaultOption:"--ALL DEPARTMENT--"},{label:x(()=>o[12]||(o[12]=[t("span",null,null,-1)])),selectedOption:x(({option:s})=>[t("span",ut,[s?(a(),n("span",{key:0,user:s,"avatar-size":"xsmall",class:"max-w-28 line-clamp-1",title:s==null?void 0:s.name},[o[13]||(o[13]=t("span",{class:"text-gray-400"},"From:",-1)),t("span",xt,d((s==null?void 0:s.short_name)||(s==null?void 0:s.name)),1)],8,pt)):(a(),n("span",_t,"--From Department--"))])]),_:1},8,["modelValue","companies"]),p(b).name!=="MyTaskList"?(a(),D(H,{key:0,modelValue:c.value,"onUpdate:modelValue":o[3]||(o[3]=s=>c.value=s),companies:E.value||[],class:"relative",className:{select:"border border-gray-300 rounded h-8 bg-white !text-sm"},defaultOption:"--ALL DEPARTMENT--"},{label:x(()=>o[14]||(o[14]=[t("span",null,null,-1)])),selectedOption:x(({option:s})=>[t("span",yt,[s?(a(),n("span",{key:0,user:s,"avatar-size":"xsmall",class:"max-w-28 line-clamp-1",title:s==null?void 0:s.name},[o[15]||(o[15]=t("span",{class:"text-gray-400 mr-1"},"To:",-1)),t("span",ft,d((s==null?void 0:s.short_name)||(s==null?void 0:s.name)),1)],8,ht)):(a(),n("span",gt,"--To Department--"))])]),_:1},8,["modelValue","companies"])):w("",!0),p(l).isAdminMood&&((N=(V=p(l))==null?void 0:V.user)==null?void 0:N.role)!=="employee"?(a(),n("div",bt,[u(le,{employees:U.value,modelValue:i.value,"onUpdate:modelValue":o[4]||(o[4]=s=>i.value=s),class:"border border-gray-300 rounded h-8 bg-white w-full lg:max-w-64 !text-sm"},{selectedOption:x(({option:s})=>[t("span",vt,[s?(a(),n("span",wt,[o[16]||(o[16]=t("span",{class:"text-gray-400"},"User: ",-1)),u(T,{user:s,"avatar-size":"xsmall",class:"inline"},null,8,["user"])])):(a(),n("span",kt,"--All Employee--"))])]),_:1},8,["employees","modelValue"])])):w("",!0),t("div",$t,[u(j,{modelValue:r.value,"onUpdate:modelValue":o[5]||(o[5]=s=>r.value=s),searchable:!1,clearable:!0,options:[{label:"Normal",id:"normal"},{label:"IMPORTANT",id:"IMPORTANT"},{label:"URGENT",id:"URGENT"}],class:"border border-gray-300 rounded h-8 bg-white !text-sm"},{"selected-option":x(({option:s})=>[t("span",Vt,[s?(a(),n("span",{key:0,user:s,"avatar-size":"xsmall",class:"max-w-28 line-clamp-1 text-sky-500 font-semibold"},d(s==null?void 0:s.label),9,Nt)):(a(),n("span",At,"--Any Priority--"))])]),_:1},8,["modelValue"])]),t("div",Rt,[u(j,{modelValue:A.value,"onUpdate:modelValue":o[6]||(o[6]=s=>A.value=s),searchable:!1,clearable:!0,options:[{label:"Pending",id:"pending"},{label:"Approved",id:"approved"},{label:"Rejected",id:"rejected"}],class:"border border-gray-300 rounded h-8 bg-white !text-sm"},{"selected-option":x(({option:s})=>[t("span",Tt,[s?(a(),n("span",{key:0,user:s,"avatar-size":"xsmall",class:"max-w-28 line-clamp-1 text-sky-500 font-semibold"},d(s==null?void 0:s.label),9,Ct)):(a(),n("span",Dt,"--ALL Status--"))])]),_:1},8,["modelValue"])]),t("div",null,[t("label",St,[F(t("input",{type:"checkbox",class:"size-[15px]","onUpdate:modelValue":o[7]||(o[7]=s=>R.value=s)},null,512),[[ee,R.value]]),t("span",{class:C(["font-semibold",[R.value?"text-sky-500 font-semibold":""]])},"Is Closed",2)])]),t("div",Lt,[o[17]||(o[17]=t("label",{class:"top-2 bottom-2 left-2 flex items-center text-xs text-gray-500 mr-1",for:"month-filter"}," Month: ",-1)),F(t("input",{id:"month-filter","onUpdate:modelValue":o[8]||(o[8]=s=>f.value=s),type:"month",class:C(["rounded h-full !text-xs w-full appearance-none text-gray-800 font-semibold outline-none pr-1",[R.value?"text-sky-500 font-semibold":""]]),placeholder:"All month"},null,2),[[te,f.value]])])])]),t("div",Mt,[o[18]||(o[18]=t("div",{class:"text-sm text-gray-700 mb-4 lg:mb-0"},"Showing requirements",-1)),u(ne,{modelValue:M.value,"onUpdate:modelValue":o[9]||(o[9]=s=>M.value=s),class:"lg:ml-auto !border !border-gray-300 w-full lg:w-96 h-[40px] px-4",placeholder:"Search requirements ",label:null},null,8,["modelValue"])])])}}},Ut={class:"container mx-auto"},Et={class:"bg-white shadow-md rounded-lg p-4"},jt={key:1,class:"text-center py-4 text-red-500"},zt={key:2,class:"text-center py-4 text-gray-500 min-h-[50vh] flex items-center justify-center border rounded-md"},Pt={key:3,class:"space-y-6"},Ot={class:"sticky top-14 z-40 text-gray-700 bg-gradient-to-tl from-sky-400/60 to-sky-400 py-2 px-4 flex items-center"},It={class:"font-semibold flex items-center gap-2"},Ft={class:"border rounded text-sm px-2 text-white bg-sky-600 ml-auto"},Ht={class:"hidden md:inline"},Kt={class:"rounded-b-md overflow-x-auto border-x xl:border-x-0"},ns={__name:"RequirementList",setup(L){const m=de(),k=se(),l=W(),b=h({get(){return{...l.query}},set(c){k.push({query:{...c}})}});X(()=>{console.log("Requirement List Mounted"),m.fetchRequirements(b.value)}),P(()=>({...b.value}),async function(c){m.fetchRequirements(c)});const v=()=>{k.push({name:"RequirementAdd"})},e=h(()=>(m.requirements||[]).reduce((c,i)=>{const f=`${i.from_department_id}-${i.to_department_id}`,r=c.find(A=>A.key==f);return r?r.requirements=[...r.requirements,i]:c.push({key:f,from_department:i.from_department,to_department:i.to_department,requirements:[i]}),c},[]));return(c,i)=>{var f;return a(),n("div",Ut,[t("div",Et,[u(Bt,{modelValue:b.value,"onUpdate:modelValue":i[0]||(i[0]=r=>b.value=r),onClickAdd:v,class:"mb-2"},null,8,["modelValue"]),p(m).loading?(a(),D(Y,{key:0,class:"sm:min-h-64 lg:min-h-96 shadow-none flex items-center justify-center"},{default:x(()=>i[1]||(i[1]=[z(" Loading requirements... ")])),_:1,__:[1]})):p(m).error?(a(),n("div",jt,d(p(m).error),1)):((f=p(m).requirements)==null?void 0:f.length)===0?(a(),n("div",zt," No Requirements ")):(a(),n("div",Pt,[(a(!0),n(Q,null,J(e.value,r=>(a(),n("div",{key:r.key,class:"rounded-md border-2 border-sky-300"},[t("div",Ot,[t("div",It,[i[2]||(i[2]=t("span",{class:"text-white text-sm"},"From",-1)),u(I,{department:r.from_department,shortName:!0},null,8,["department"]),i[3]||(i[3]=t("span",{class:"text-white text-sm"},"To",-1)),u(I,{department:r.to_department,shortName:!0},null,8,["department"])]),t("div",Ft,[z(d(r.requirements.length)+" ",1),t("span",Ht," requirement"+d(r.requirements.length>1?"s":""),1)])]),t("div",Kt,[u(at,{requirements:r.requirements},null,8,["requirements"])])]))),128))]))])])}}};export{ns as default};
