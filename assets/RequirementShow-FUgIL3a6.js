import{C as G,r as w,e as j,D as me,m as Q,z as pe,c as m,o as i,a as e,h as E,E as N,F,q as P,j as I,t as k,w as q,x as z,G as ce,v as L,H as be,f as T,g as h,p as R,i as B,B as re,b as ve,u as fe,I as J,n as ye,k as xe}from"./index-TAPWLbqf.js";import{L as W}from"./LoaderView-C5j9qb_S.js";import{O as X}from"./OverlyModal-D3gNT5Rn.js";import{R as ne}from"./RequiredIcon-FSC6dfbP.js";import{f as Y}from"./requirement-kYnWofFE.js";import{o as ge}from"./url-CePbr-gY.js";import{u as ie}from"./department-Cww7EtnB.js";import{_ as we}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as H}from"./UserChip-B3iFuvMS.js";import{u as ae}from"./user-CGZOEeN7.js";import{_ as ke}from"./TaskUserChip-CgtREzMX.js";async function he(p,$){return G.post(`/requirements/${p}/details`,$)}async function de(p,$,{params:n={}}={}){return G.get(`/requirements/${p}/details/${$}`,{params:n})}async function $e(p,$,n){return G.put(`/requirements/${p}/details/${$}`,n)}async function _e(p,$,{params:n={}}={}){const a=ge(n);return G.delete(`/requirements/${p}/details/${$}${a?"?"+a:""}`)}const qe={class:"flex flex-wrap items-center gap-1 w-full"},Ce={class:"bg-blue-100 text-blue-700 px-2 py-1 rounded text-sm"},Se=["onClick"],Re={class:"p-3"},De={class:"max-h-60 overflow-auto"},Ie=["onClick"],Ve={key:1,class:"px-3 py-2 text-gray-500"},Ee={__name:"SelectDropdown",props:{options:{type:Array,required:!0},modelValue:{type:[Object,Array,String,Number,null],default:null},placeholder:{type:String,default:"Select..."},multiple:{type:Boolean,default:!1},label:{type:String,default:"label"},value:{type:String,default:"value"},clearable:{type:Boolean,default:!0},searchable:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},filterBy:{type:Function,default:null},reduce:{type:Function,default:null},position:{type:String,default:"auto",validator:p=>["top","left","right","bottom","auto"].includes(p)},containment:{type:Object,default:()=>window}},emits:["update:modelValue","input","open","close","search","search:focus","search:blur","option:selecting","option:selected","option:deselecting","option:deselected"],setup(p,{emit:$}){const n=p,a=$,u=w(!1),_=w(""),l=w(),d=w(),f=w(n.position);function g(o){l.value&&!l.value.contains(o.target)&&u.value&&(u.value=!1,a("close"))}j(()=>{document.addEventListener("click",g)}),me(()=>{document.removeEventListener("click",g)});const C=Q(()=>{const o={top:"bottom-[100%] mb-0.5",left:"right-[100%] mr-0.5",right:"left-[100%] ml-0.5",bottom:"top-[100%] mt-0.5"};return o[f.value]||o.bottom}),c=Q(()=>n.multiple?Array.isArray(n.modelValue)?n.modelValue:[]:n.modelValue),v=o=>(o==null?void 0:o[n.label])??(o==null?void 0:o.label)??o,s=o=>(o==null?void 0:o[n.value])??(o==null?void 0:o.value)??o,t=()=>{n.disabled||(u.value=!u.value,a(u.value?"open":"close"))},r=o=>{const y=s(o);return n.multiple?c.value.some(x=>s(x)===y):s(c.value)===y},b=o=>{if(n.multiple)if(r(o)){a("option:deselecting",o);const y=c.value.filter(x=>s(x)!==s(o));a("update:modelValue",y),a("option:deselected",o)}else{a("option:selecting",o);const y=[...c.value,o];a("update:modelValue",y),a("option:selected",o)}else a("option:selected",o),a("update:modelValue",o),u.value=!1,a("close");a("input",o),_.value=""},V=o=>{if(!n.multiple)return;const y=c.value.filter(x=>s(x)!==s(o));a("update:modelValue",y),a("option:deselected",o)},S=Q(()=>{const o=_.value.toLowerCase();return!n.searchable||!o?n.options:typeof n.filterBy=="function"?n.filterBy(n.options,o):n.options.filter(y=>v(y).toLowerCase().includes(o))});return pe(u,async o=>{if(o&&n.position==="auto"){await be();const y=l.value,x=d.value;if(y&&x){console.log({cm:n.containment});const U=y.getBoundingClientRect(),O=x.offsetHeight,A=(n.containment.innerHeight||n.containment.clientHeight)-U.bottom,M=U.top;console.log({triggerRect:U,dropdownHeight:O,spaceBelow:A,spaceAbove:M}),f.value=A<O&&M>O?"top":"bottom"}}else f.value=n.position}),(o,y)=>(i(),m("div",{class:"relative w-full",ref_key:"dropdownRef",ref:l},[e("div",{class:z(["border rounded-md px-2 py-1.5 cursor-pointer bg-white flex items-center justify-between",{"bg-gray-100":p.disabled}]),onClick:t},[e("div",qe,[p.multiple?(i(!0),m(F,{key:0},P(c.value,x=>N(o.$slots,"selected-option",{key:s(x),option:x},()=>[e("span",Ce,[I(k(v(x))+" ",1),e("button",{onClick:q(U=>V(x),["stop"]),class:"ml-1 text-xs"},"×",8,Se)])],!0)),128)):N(o.$slots,"selected-option",{key:1,option:c.value,isSelected:r},()=>[I(k(v(c.value)||p.placeholder),1)],!0)]),N(o.$slots,"open-indicator",{},()=>[y[3]||(y[3]=e("svg",{class:"w-4 h-4 ml-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))],!0)],2),E(e("div",{class:z(["absolute w-full border rounded shadow-[0px_0px_10px_0px_rgba(0,0,0,0.25)] z-50 border-teal-500 bg-white",C.value]),ref_key:"dropdownMenuRef",ref:d},[e("div",Re,[N(o.$slots,"search",{},()=>[E(e("input",{type:"text","onUpdate:modelValue":y[0]||(y[0]=x=>_.value=x),class:"w-full px-2 py-1 border rounded",placeholder:"Search...",onFocus:y[1]||(y[1]=x=>o.$emit("search:focus")),onBlur:y[2]||(y[2]=x=>o.$emit("search:blur"))},null,544),[[L,_.value]])],!0)]),N(o.$slots,"list-header",{},void 0,!0),e("ul",De,[S.value.length?(i(!0),m(F,{key:0},P(S.value,x=>(i(),m("li",{key:s(x),class:z([{"bg-blue-50":r(x)},"px-3 py-2 hover:bg-blue-100 cursor-pointer"]),onClick:U=>b(x)},[N(o.$slots,"option",{option:x},()=>[I(k(v(x)),1)],!0)],10,Ie))),128)):(i(),m("li",Ve,[N(o.$slots,"no-options",{},()=>[y[4]||(y[4]=I("No options found"))],!0)]))]),N(o.$slots,"list-footer",{},void 0,!0)],2),[[ce,u.value]])],512))}},ue=we(Ee,[["__scopeId","data-v-d1323daf"]]),Fe={class:"sticky top-0 pt-4 bg-white z-10"},Ue={class:"mb-4"},Ne={class:"block text-gray-600 text-sm mb-1 font-medium"},Te={class:"mb-4"},Be={class:"mb-4"},Le={key:0,class:"relative w-full"},Oe={key:0,class:"absolute right-1 text-xl top-0 bottom-0 flex items-center"},Ae={class:"mb-4"},Me={class:"mb-4"},je={class:"sticky bottom-0 bg-white py-4 border-t -mx-6 px-6"},ze={key:0,class:"mb-4 text-red-500 font-medium"},Pe={key:1,class:"mb-4"},He={class:"flex items-center justify-between gap-4"},Ge=["disabled"],We={__name:"RequirementDetailAddForm",props:{requirementId:{type:[Number,String],required:!0}},emits:["create","closeClick","error"],setup(p,{emit:$}){const n=p,a=$,u=ie(),_=w(),l=w(""),d=w(),f=w({title:"",description:"",priority:"",better_to_complete_on:"",supervisor_id:null}),g=w(null),C=w([]);async function c(){var s,t,r;l.value="submitting";const v={...f.value,supervisor_id:(s=g.value)==null?void 0:s.id};console.log({payload:v});try{const b=await he(n.requirementId,v);a("create",b),l.value="create"}catch(b){l.value="error",d.value=((r=(t=b.response)==null?void 0:t.data)==null?void 0:r.message)||"Failed to create requirement detail",a("error",d.value)}}return j(async()=>{var s;const v=((s=(await Y(n.requirementId)).data)==null?void 0:s.requirement)||{};C.value=await u.fetchDepartmentEmployee([v.from_department_id])}),(v,s)=>(i(),m("div",{class:"max-h-[90vh] overflow-auto w-full mx-auto bg-white shadow-lg rounded-lg p-6 pb-0 pt-0 relative",ref_key:"formContainerRef",ref:_},[e("div",Fe,[s[8]||(s[8]=e("h2",{class:"text-2xl font-semibold text-gray-800"},"Add Requirement",-1)),s[9]||(s[9]=e("hr",{class:"mb-4"},null,-1)),e("div",{class:"text-purple-600/80 mb-4 text-xs border-b border-dashed",onClick:s[0]||(s[0]=q(t=>a("ok"),["prevent"]))}," Fields that must be filled in will be marked with an asterisk. ")]),e("form",{onSubmit:q(c,["prevent"]),class:"z-0"},[l.value!=="loading"?(i(),m(F,{key:0},[e("div",Ue,[e("label",Ne,[s[10]||(s[10]=I("Title ")),R(ne)]),E(e("input",{"onUpdate:modelValue":s[1]||(s[1]=t=>f.value.title=t),required:"",placeholder:"EnderRequirement detail title",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[L,f.value.title]])]),e("div",Te,[s[11]||(s[11]=e("label",{class:"block text-gray-600 text-sm mb-1 font-medium"},"Details",-1)),E(e("textarea",{rows:"10","onUpdate:modelValue":s[2]||(s[2]=t=>f.value.description=t),placeholder:"Enter requirement description",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[L,f.value.description]])]),e("div",Be,[s[12]||(s[12]=e("label",{class:"block text-gray-600 text-sm mb-1 font-medium"},"Supervisor",-1)),R(ue,{modelValue:g.value,"onUpdate:modelValue":s[4]||(s[4]=t=>g.value=t),options:C.value,placeholder:"--NO SUPERVISOR--",containment:_.value},{option:B(({option:t})=>[R(H,{user:t||{}},null,8,["user"])]),"selected-option":B(({option:t})=>[t?(i(),m("div",Le,[R(H,{user:t||{}},null,8,["user"]),g.value?(i(),m("div",Oe,[e("button",{onClick:s[3]||(s[3]=q(r=>g.value=null,["prevent"])),class:"text-gray-6 font-semibold 00 hover:text-red-700"}," × ")])):h("",!0)])):h("",!0)]),_:1},8,["modelValue","options","containment"])]),e("div",Ae,[s[14]||(s[14]=e("label",{class:"block text-gray-600 text-sm mb-1 font-medium"},"Priority ",-1)),E(e("select",{class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500","onUpdate:modelValue":s[5]||(s[5]=t=>f.value.priority=t)},s[13]||(s[13]=[e("option",{value:""},"NORMAL",-1),e("option",null,"IMPORTANT",-1),e("option",null,"URGENT",-1)]),512),[[re,f.value.priority]])]),e("div",Me,[s[15]||(s[15]=e("label",{class:"block text-gray-600 text-sm mb-1 font-medium"},"Better to Complete ",-1)),E(e("input",{type:"date","onUpdate:modelValue":s[6]||(s[6]=t=>f.value.better_to_complete_on=t),placeholder:"EnderRequirement detail title",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[L,f.value.better_to_complete_on]])])],64)):h("",!0),e("div",je,[d.value?(i(),m("div",ze,k(d.value),1)):h("",!0),d.value?(i(),m("hr",Pe)):h("",!0),e("div",He,[e("button",{type:"button",onClick:s[7]||(s[7]=q(t=>a("closeClick"),["prevent"])),class:"bg-gray-200 hover:bg-gray-300 text-gray-700 font-semibold px-5 py-2 rounded transition"}," Cancel "),e("button",{disabled:l.value=="loading"||l.value=="submitting",type:"submit",class:"bg-blue-500 hover:bg-blue-600 text-white font-semibold px-5 py-2 rounded transition"},k(l.value=="submitting"?"Saving...":"Add Requirement"),9,Ge)])])],32),l.value==="loading"||l.value==="submitting"?(i(),T(W,{key:0,class:"z-20 absolute inset-0 flex items-center justify-center bg-opacity-30"})):h("",!0)],512))}},Ke={class:"max-h-[90vh] overflow-auto w-full mx-auto bg-white shadow-lg rounded-lg p-6 pb-0 pt-0 relative"},Qe={class:"mb-4"},Je={class:"font-semibold"},Xe={class:"mb-4"},Ye={class:"line-clamp-2"},Ze={key:1,class:"min-h-40"},et={class:"sticky bottom-0 bg-white py-4 border-t -mx-6 px-6"},tt={key:0,class:"mb-4 text-red-500 font-medium"},st={key:1,class:"mb-4"},lt={class:"flex items-center justify-between gap-4"},ot=["disabled"],rt={__name:"RequirementDetailDeleteForm",props:{requirementId:{type:[Number,String],required:!0},detailId:{type:[Number,String],required:!0}},emits:["delete","closeClick","error"],setup(p,{emit:$}){const n=p,a=$,u=ae(),_=w(null),l=w(""),d=w(),f=w([]);async function g(){var C,c;l.value="submitting";try{const v=await _e(n.requirementId,n.detailId);a("delete",v),l.value="create"}catch(v){l.value="error",d.value=((c=(C=v.response)==null?void 0:C.data)==null?void 0:c.message)||"Failed to update requirement detail: "+v,a("error",d.value)}}return j(async()=>{var C,c,v;l.value="loading";try{f.value=await u.fetchDepartmentWiseEmployees(),_.value=(C=(await de(n.requirementId,n.detailId)).data)==null?void 0:C.detail}catch(s){d.value=((v=(c=s.response)==null?void 0:c.data)==null?void 0:v.message)||"Failed to fetch requirement detail"}finally{l.value=""}}),(C,c)=>{var v,s;return i(),m("div",Ke,[c[4]||(c[4]=e("div",{class:"sticky top-0 -mx-6 px-6 z-10 bg-gray-50"},[e("h2",{class:"text-xl font-semibold text-gray-800 py-2"},"Delete Requirement Details"),e("hr",{class:"mb-4 -mx-6"})],-1)),e("form",{onSubmit:q(g,["prevent"]),class:"z-0"},[l.value!=="loading"?(i(),m(F,{key:0},[e("div",Qe,[c[1]||(c[1]=e("div",{class:"block text-gray-600 text-sm mb-1 font-medium"},"Title",-1)),e("div",Je,k((v=_.value)==null?void 0:v.title),1)]),e("div",Xe,[c[2]||(c[2]=e("div",{class:"block text-gray-600 text-sm mb-1 font-medium"},"Description",-1)),e("div",Ye,k((s=_.value)==null?void 0:s.description),1)]),c[3]||(c[3]=e("div",{class:"my-8 text-center text-xl text-red-600"},"Are you sure want to delete?",-1))],64)):(i(),m("div",Ze)),e("div",et,[d.value?(i(),m("div",tt,k(d.value),1)):h("",!0),d.value?(i(),m("hr",st)):h("",!0),e("div",lt,[e("button",{type:"button",onClick:c[0]||(c[0]=q(t=>a("closeClick"),["prevent"])),class:"bg-gray-200 hover:bg-gray-300 text-gray-700 font-semibold px-5 py-2 rounded transition"}," Cancel "),e("button",{disabled:l.value=="loading"||l.value=="submitting",type:"submit",class:"bg-red-700 hover:bg-red-500 text-white font-semibold px-5 py-2 rounded transition"},k(l.value=="submitting"?"Deleting...":"Delete"),9,ot)])])],32),l.value==="loading"||l.value==="submitting"?(i(),T(W,{key:0,class:"z-20 absolute inset-0 flex items-center justify-center bg-opacity-30"})):h("",!0)])}}},nt={class:"max-h-[90vh] w-full mx-auto bg-white shadow-lg rounded-lg p-6 pb-0 pt-0 relative"},it={class:"sticky top-0 pt-4 bg-white z-10"},at={class:"mb-4"},dt={class:"block text-gray-600 text-sm mb-1 font-medium"},ut={class:"mb-4"},mt={class:"mb-4"},pt={key:0,class:"relative w-full"},ct={key:0,class:"absolute right-1 text-xl top-0 bottom-0 flex items-center"},bt={class:"mb-4"},vt={class:"mb-4"},ft={class:"sticky bottom-0 bg-white py-4 border-t -mx-6 px-6"},yt={key:0,class:"mb-4 text-red-500 font-medium"},xt={key:1,class:"mb-4"},gt={class:"flex items-center justify-between gap-4"},wt=["disabled"],kt={__name:"RequirementDetailEditForm",props:{requirementId:{type:[Number,String],required:!0},detailId:{type:[Number,String],required:!0}},emits:["update","closeClick","error"],setup(p,{emit:$}){const n=p,a=$,u=ae(),_=ie(),l=w(null),d=w(""),f=w(),g=w({title:"",description:"",priority:"",better_to_complete_on:"",supervisor_id:null}),C=w([]),c=w([]),v=w(null);async function s(){var r,b,V;d.value="submitting";const t={...g.value,supervisor_id:(r=v.value)==null?void 0:r.id};console.log({payload:t});try{const S=await $e(n.requirementId,n.detailId,t);a("update",S),d.value="create"}catch(S){d.value="error",f.value=((V=(b=S.response)==null?void 0:b.data)==null?void 0:V.message)||"Failed to update requirement detail",a("error",f.value)}}return j(async()=>{var t,r,b,V;d.value="loading";try{C.value=await u.fetchDepartmentWiseEmployees();const S=((t=(await Y(n.requirementId)).data)==null?void 0:t.requirement)||{};c.value=await _.fetchDepartmentEmployee([S.from_department_id]),l.value=(r=(await de(n.requirementId,n.detailId)).data)==null?void 0:r.detail,g.value=l.value,v.value=l.value.supervisor;const o=new Date(l.value.better_to_complete_on);g.value.better_to_complete_on=o.toISOString().split("T")[0]}catch(S){f.value=((V=(b=S.response)==null?void 0:b.data)==null?void 0:V.message)||"Failed to fetch requirement detail"}finally{d.value=""}}),(t,r)=>(i(),m("div",nt,[e("div",it,[r[8]||(r[8]=e("h2",{class:"text-2xl font-semibold text-gray-800"},"Add Requirement Details",-1)),r[9]||(r[9]=e("hr",{class:"mb-4"},null,-1)),e("div",{class:"text-purple-600/80 mb-4 text-xs border-b border-dashed",onClick:r[0]||(r[0]=q(b=>a("ok"),["prevent"]))}," Fields that must be filled in will be marked with an asterisk. ")]),e("form",{onSubmit:q(s,["prevent"]),class:"z-0"},[d.value!=="loading"?(i(),m(F,{key:0},[e("div",at,[e("label",dt,[r[10]||(r[10]=I("Title ")),R(ne)]),E(e("input",{"onUpdate:modelValue":r[1]||(r[1]=b=>g.value.title=b),required:"",placeholder:"EnderRequirement detail title",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[L,g.value.title]])]),e("div",ut,[r[11]||(r[11]=e("label",{class:"block text-gray-600 text-sm mb-1 font-medium"},"Description",-1)),E(e("textarea",{rows:"10","onUpdate:modelValue":r[2]||(r[2]=b=>g.value.description=b),placeholder:"Enter requirement description",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[L,g.value.description]])]),e("div",mt,[r[12]||(r[12]=e("label",{class:"block text-gray-600 text-sm mb-1 font-medium"},"Supervisor",-1)),R(ue,{modelValue:v.value,"onUpdate:modelValue":r[4]||(r[4]=b=>v.value=b),options:c.value,placeholder:"--NO SUPERVISOR--"},{option:B(({option:b})=>[R(H,{user:b||{}},null,8,["user"])]),"selected-option":B(({option:b})=>[b?(i(),m("div",pt,[R(H,{user:b||{}},null,8,["user"]),v.value?(i(),m("div",ct,[e("button",{onClick:r[3]||(r[3]=q(V=>v.value=null,["prevent"])),class:"text-gray-6 font-semibold 00 hover:text-red-700"}," × ")])):h("",!0)])):h("",!0)]),_:1},8,["modelValue","options"])]),e("div",bt,[r[14]||(r[14]=e("label",{class:"block text-gray-600 text-sm mb-1 font-medium"},"Priority ",-1)),E(e("select",{class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500","onUpdate:modelValue":r[5]||(r[5]=b=>g.value.priority=b)},r[13]||(r[13]=[e("option",{value:""},"NORMAL",-1),e("option",null,"IMPORTANT",-1),e("option",null,"URGENT",-1)]),512),[[re,g.value.priority]])]),e("div",vt,[r[15]||(r[15]=e("label",{class:"block text-gray-600 text-sm mb-1 font-medium"},"Better to Complete ",-1)),E(e("input",{type:"date","onUpdate:modelValue":r[6]||(r[6]=b=>g.value.better_to_complete_on=b),placeholder:"EnderRequirement detail title",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[L,g.value.better_to_complete_on]])])],64)):h("",!0),e("div",ft,[f.value?(i(),m("div",yt,k(f.value),1)):h("",!0),f.value?(i(),m("hr",xt)):h("",!0),e("div",gt,[e("button",{type:"button",onClick:r[7]||(r[7]=q(b=>a("closeClick"),["prevent"])),class:"bg-gray-200 hover:bg-gray-300 text-gray-700 font-semibold px-5 py-2 rounded transition"}," Cancel "),e("button",{disabled:d.value=="loading"||d.value=="submitting",type:"submit",class:"bg-blue-500 hover:bg-blue-600 text-white font-semibold px-5 py-2 rounded transition"},k(d.value=="submitting"?"Saving...":"Edit Detail"),9,wt)])])],32),d.value==="loading"||d.value==="submitting"?(i(),T(W,{key:0,class:"z-20 absolute inset-0 flex items-center justify-center bg-opacity-30"})):h("",!0)]))}},ht={class:"group/item border text-gray-800 py-4 shadow-sm mb-4 px-4 rounded-md hover:bg-blue-50"},$t={class:"border-2 border-gray-700 p-3 align-top"},_t={class:"text-2xl font-medium"},qt={class:"border-2 border-gray-700 p-3"},Ct={class:"text-lg font-semibold mb-2"},St={class:"mb-5"},Rt={class:"text-justify"},Dt=["innerHTML"],It={class:"flex items-end"},Vt={class:"flex items-center gap-1 mb-3"},Et={class:"text-blue-400 font-semibold"},Ft={class:"ml-auto flex gap-6 items-center"},Ut={class:"border-2 border-gray-700 p-3 whitespace-nowrap print:whitespace-break-spaces print:px-0 text-center"},Nt={key:1,colspan:"2",class:"border-2 border-gray-700 p-3 text-center"},Tt={__name:"RequirementDetailTableRow",props:{detail:{type:Object},serial:{type:Number}},emits:["editClick","deleteClick"],setup(p,{emit:$}){const n=$,a=w("line-clamp-2");function u(){a.value=a.value?"":"line-clamp-2"}return(_,l)=>(i(),m("tr",ht,[e("td",$t,[e("span",_t,k(p.serial),1)]),e("td",qt,[e("div",null,[e("div",Ct,[e("span",null,k(p.detail.title),1)]),l[3]||(l[3]=e("hr",{class:"mb-4 -mx-4"},null,-1)),e("div",St,[l[2]||(l[2]=e("div",{class:"text-gray-400 mr-2 text-xs uppercase font-semibold"},"Description",-1)),e("div",Rt,[e("p",{class:z(["print:line-clamp-none",a.value]),innerHTML:p.detail.description},null,10,Dt),e("button",{class:"text-blue-500 group-hover/item:underline hover:text-sky-400 ml-auto text-sm print:hidden",onClick:q(u,["prevent"])},k(a.value?"Show More":"Show Less"),1)])])]),e("div",It,[e("div",null,[e("div",Vt,[l[4]||(l[4]=e("span",{class:"text-gray-400 mr-2 text-xs uppercase font-semibold"},"Supervisor:",-1)),p.detail.supervisor?(i(),T(ke,{key:0,user:p.detail.supervisor},null,8,["user"])):h("",!0)]),e("div",null,[l[5]||(l[5]=e("span",{class:"text-gray-500 mr-2 text-xs uppercase font-semibold"},"Priority:",-1)),e("span",Et,k(p.detail.priority),1)])]),e("div",Ft,[e("button",{class:"btn-2",onClick:l[0]||(l[0]=q(d=>n("editClick",p.detail),["prevent"]))},l[6]||(l[6]=[e("i",{class:"fas fa-edit"},null,-1),I("Edit ")])),e("button",{class:"btn-2-red",onClick:l[1]||(l[1]=q(d=>n("deleteClick",p.detail),["prevent"]))},l[7]||(l[7]=[e("i",{class:"fas fa-trash-alt"},null,-1),I("Delete ")]))])])]),e("td",Ut,[e("div",null,k(new Date(p.detail.better_to_complete_on).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",weekday:"short"})),1)]),p.detail.task_id?(i(),m(F,{key:0},[l[8]||(l[8]=e("td",{class:"border-2 border-gray-700 p-3"},null,-1)),l[9]||(l[9]=e("td",{class:"border-2 border-gray-700 p-3"},null,-1))],64)):(i(),m("td",Nt,l[10]||(l[10]=[e("button",{class:"print:hidden hover:border-2 group-hover/item:bg-blue-200 hover:border-blue-700 text-blue-500 hover:text-white hover:!bg-blue-500 rounded-md px-4 py-1"}," Create Task ",-1)])))]))}},Bt={class:"container mx-auto p-6 print:p-0 w-full print:max-w-full"},Lt={class:"bg-white rounded shadow print:shadow-none p-4 print:p-0 relative"},Ot={class:"flex items-start"},At={class:"mb-4 text-lg print:black print:font-bold"},Mt={class:"ml-auto print:hidden flex gap-2 items-center"},jt={class:"mb-4 flex items-center gap-1 print:mb-1"},zt={class:"font-bold print:text-gray-900"},Pt={class:"mb-4 print:flex print:items-center print:gap-3 print:mb-1"},Ht={class:"print:text-gray-900"},Gt={class:"mb-4 print:flex print:items-center print:gap-3 print:mb-1"},Wt={class:"flex items-center gap-2 print:text-gray-900"},Kt={class:"mb-4 print:flex print:items-center print:gap-3 print:mb-1"},Qt={class:"print:text-gray-900"},Jt={class:"flex items-end mb-3"},Xt={class:"ml-auto print:hidden flex gap-2 text-sm"},Yt={key:0,class:"overflow-x-auto print:overflow-visible"},Zt={class:"w-full table-auto print:table-fixed"},es={colspan:"2",class:"border-2 border-gray-800 text-center text-gray-800 print:text-black text-base font-semibold whitespace-nowrap px-3 py-1 print:whitespace-normal w-[25%]"},ts={class:"whitespace-nowrap print:whitespace-break-spaces print:px-0 p-3 text-center border-2 border-gray-800"},ss={class:"text-gray-900 text-base"},ls={key:1,class:"border min-h-64 rounded-md flex items-center justify-center group"},vs={__name:"RequirementShow",setup(p){const $=ve(),n=fe(),a=w(""),u=w(null),_=J({open:!1}),l=J({detail:null,open:!1}),d=J({detail:null,open:!1});j(async()=>{await f()});async function f(){var s;a.value="loading",u.value=(s=(await Y($.params.id)).data)==null?void 0:s.requirement,a.value=""}function g(){_.open=!0}function C(s){l.open=!0,l.detail=s}function c(s){d.open=!0,d.detail=s}function v(){window.print()}return(s,t)=>{var b,V,S,o,y,x,U,O,A,M,Z,ee,te,se;const r=ye("RouterLink");return i(),m("div",Bt,[_.open?(i(),T(X,{key:0,class:"*:max-w-4xl"},{default:B(()=>[R(We,{requirementId:u.value.id,onCloseClick:t[0]||(t[0]=D=>_.open=!1),onCreate:t[1]||(t[1]=async()=>{_.open=!1,await f()})},null,8,["requirementId"])]),_:1})):h("",!0),l.open?(i(),T(X,{key:1},{default:B(()=>{var D;return[R(kt,{requirementId:u.value.id,detailId:(D=l.detail)==null?void 0:D.id,onCloseClick:t[2]||(t[2]=K=>l.open=!1),onUpdate:t[3]||(t[3]=async()=>{l.open=!1,await f()})},null,8,["requirementId","detailId"])]}),_:1})):h("",!0),d.open?(i(),T(X,{key:2},{default:B(()=>{var D;return[R(rt,{requirementId:u.value.id,detailId:(D=d.detail)==null?void 0:D.id,onCloseClick:t[4]||(t[4]=K=>d.open=!1),onDelete:t[5]||(t[5]=async()=>{d.open=!1,await f()})},null,8,["requirementId","detailId"])]}),_:1})):h("",!0),e("div",Lt,[e("div",Ot,[e("div",At,[t[7]||(t[7]=e("div",{class:"text-gray-800 print:leading-none"},"To",-1)),e("div",null,k((V=(b=u.value)==null?void 0:b.to_department)==null?void 0:V.name),1)]),e("div",Mt,[(((S=u.value)==null?void 0:S.details)||[]).length>0?(i(),m("button",{key:0,class:"btn-3 font-semibold !pl-2 !pr-4",onClick:q(v,["prevent"])},t[8]||(t[8]=[e("i",{class:"fad fa-print text-xl"},null,-1),I("Print ")]))):h("",!0),e("button",{class:"btn-3",onClick:t[6]||(t[6]=q(()=>xe(n).back(),["prevent"]))},"Back"),R(r,{class:"btn-2",to:`/requirements/edit/${(o=u.value)==null?void 0:o.id}`},{default:B(()=>t[9]||(t[9]=[I("Edit")])),_:1,__:[9]},8,["to"])])]),t[24]||(t[24]=e("div",{class:"text-center text-xl font-bold mb-2 underline"},"Requirement Form",-1)),e("div",jt,[t[10]||(t[10]=e("div",{class:"text-gray-800 text-sm"},"Requirement ID:",-1)),e("div",zt,k((y=u.value)==null?void 0:y.id),1)]),e("div",Pt,[t[11]||(t[11]=e("div",{class:"text-gray-800 text-sm"},"From",-1)),e("div",Ht,k((U=(x=u.value)==null?void 0:x.from_department)==null?void 0:U.name),1)]),e("div",Gt,[t[12]||(t[12]=e("div",{class:"text-gray-500 text-sm"},"Website",-1)),e("div",Wt,[(i(!0),m(F,null,P(((O=u.value)==null?void 0:O.website_tags)||[],D=>(i(),m("div",{key:D.id,class:"border px-2 rounded-md bg-gray-50 shadow-sm"},k(D.name),1))),128))])]),e("div",Kt,[t[13]||(t[13]=e("div",{class:"text-gray-500 text-sm"},"Submission Date",-1)),e("div",Qt,k(new Date((A=u.value)==null?void 0:A.submission_date).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})),1)]),t[25]||(t[25]=e("hr",{class:"mb-4"},null,-1)),e("div",null,[e("div",Jt,[t[15]||(t[15]=e("h2",{class:"text-xl font-semibold"},"Requirement Task List",-1)),e("div",Xt,[(((M=u.value)==null?void 0:M.details)||[]).length>0?(i(),m("button",{key:0,class:"btn-4 font-semibold !pl-2 !pr-4 border-2 border-blue-800 hover:bg-blue-800 hover:text-white",onClick:q(g,["prevent"])},t[14]||(t[14]=[e("i",{class:"fad fa-plus-circle text-xl"},null,-1),I("Add Requirement ")]))):h("",!0)])]),(((Z=u.value)==null?void 0:Z.details)||[]).length>0?(i(),m("div",Yt,[e("table",Zt,[e("thead",null,[e("tr",null,[t[16]||(t[16]=e("th",{rowspan:"2",class:"border-2 border-gray-800 text-left px-4 text-gray-800 print:text-black text-xl font-semibold whitespace-nowrap w-[15%]"}," SL ",-1)),t[17]||(t[17]=e("th",{rowspan:"2",class:"border-2 border-gray-800 text-center text-gray-800 print:text-black text-base font-semibold whitespace-nowrap w-[65%]"}," Requirement Details ",-1)),t[18]||(t[18]=e("th",{rowspan:"2",class:"border-2 border-gray-800 text-center text-gray-800 print:text-black text-base px-3 font-semibold whitespace-nowrap print:whitespace-normal print:p-0 w-[15%]"}," Better To Complete ",-1)),e("th",es," For '"+k(((ee=u.value.to_department)==null?void 0:ee.short_name)||((te=u.value.to_department)==null?void 0:te.name))+"' Use ",1)]),t[19]||(t[19]=e("tr",null,[e("td",{class:"border-2 border-gray-800 text-center text-gray-800 print:text-black text-sm font-semibold whitespace-nowrap p-3 print:whitespace-normal"}," Issue No "),e("td",{class:"border-2 border-gray-800 text-center text-gray-800 print:text-black text-sm font-semibold whitespace-nowrap p-3 print:whitespace-normal print:p-0"}," Expected Date ")],-1))]),e("tbody",null,[(i(!0),m(F,null,P(((se=u.value)==null?void 0:se.details)||[],(D,K)=>{var le,oe;return i(),m(F,{key:D.id},[R(Tt,{detail:D,serial:K+1,onEditClick:C,onDeleteClick:c},null,8,["detail","serial"]),e("tr",null,[e("td",ts,[e("div",ss," For '"+k(((le=u.value.to_department)==null?void 0:le.short_name)||((oe=u.value.to_department)==null?void 0:oe.name))+"' Use ",1),t[20]||(t[20]=e("div",{class:"text-gray-800 text-xs"},"(Feedback)",-1))]),t[21]||(t[21]=e("td",{class:"whitespace-nowrap p-3 text-center border-2 border-gray-800",colspan:"4"},null,-1))]),t[22]||(t[22]=e("tr",null,[e("td",{class:"whitespace-nowrap p-3 text-center border-2 border-gray-800 min-h-96"},"   "),e("td",{class:"whitespace-nowrap p-3 text-center border-2 border-gray-800 min-h-96",colspan:"4"},"   ")],-1))],64)}),128))])])])):(i(),m("div",ls,[e("button",{class:"btn-4 font-semibold pl-2 group-hover:border border-blue-300",onClick:q(g,["prevent"])},t[23]||(t[23]=[e("i",{class:"fad fa-plus-circle text-2xl"},null,-1),I("Add Requirement ")]))]))]),a.value==="loading"?(i(),T(W,{key:0,class:"absolute inset-0 bg-opacity-90"})):h("",!0)])])}}};export{vs as default};
