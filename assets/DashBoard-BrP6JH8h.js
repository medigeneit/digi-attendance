const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LeaveApplicationModal-R2KMfVoV.js","assets/index-rim-Johs.js","assets/index-BFXC5ocq.css","assets/ApprovalItem-BIVIoM8_.js","assets/AcceptAndRejectHandler-D8wCDBAV.js","assets/LoaderView-DEVpObhu.js","assets/_plugin-vue_export-helper-DlAUqK2U.js","assets/ShareComponent-B21xx-cW.js","assets/leave-application-IiMw-SUY.js","assets/LeaveApplicationModal-B7WJltA7.css","assets/ShortLeaveDetailsModal-BIqueGDc.js","assets/ScreenshotCapture-BRSIIUDZ.js","assets/short-leave-CSdmmWPm.js","assets/ShortLeaveDetailsModal-D4avNQ1k.css","assets/ManualAttendanceDetailsModal-EEDkFhxO.js","assets/manual-attendance-v-vQkcXg.js","assets/ManualAttendanceDetailsModal-MS8n2gFL.css","assets/ShiftExchangeDetailsModal-Cln-f9qJ.js","assets/exchange-0Em-WAEF.js","assets/ShiftExchangeDetailsModal-BlZsJzAI.css","assets/OffdayExchangeDetailsModal-BHZlpaTh.js","assets/OffdayExchangeDetailsModal-jTt80Glg.css"])))=>i.map(i=>d[i]);
import{g as ge,D as X,x as M,p as ye,c as d,o as a,d as D,l as C,a as e,b as L,t as m,m as k,E as $e,w as S,s as $,j as T,F as q,e as O,i as R,R as Fe,G as De,r as B,h as Ce,q as J,k as ae,H as We,f as Me,u as be,I as se,n as Ye,J as ie,K as ze,_ as ne}from"./index-rim-Johs.js";import{u as oe}from"./user-BXd-M3xm.js";import{L as He}from"./LoaderView-DEVpObhu.js";import{_ as Ke}from"./SearchInput-C-pMtmEX.js";import{o as ve,g as pe,a as me,b as Ge,c as Je}from"./datetime-Du_mcDA9.js";import{m as Xe}from"./task-tree-wODDhwOu.js";import{u as Ze}from"./useTaskStore-DhO37Mpl.js";import{_ as Qe,a as et}from"./TodoSection-B1NtQKCd.js";import{_ as tt}from"./TaskTreeViewWithSubTable-BProqv5T.js";import{O as st}from"./OverlyModal-DpjyeEWN.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./requirement-bvmIJdpC.js";import"./useTodoDateStore-DDGTfr0n.js";import"./url-CePbr-gY.js";import"./TodoItemCard-DteahtoF.js";import"./DepartmentChip-D5qdb2Dy.js";import"./UserChip-WFUGEQMB.js";import"./useTodoStore-BaBoLXQ-.js";import"./DraggableList.vue_vue_type_script_setup_true_lang-i1-cVWys.js";import"./TodoCreateEditShow-BDW4g0FZ.js";import"./TaskSelectionInput-CXe1Dlu_.js";import"./TaskTitle-B2ZFXTjF.js";import"./TaskUrgentBadge-CgJ2d9SQ.js";import"./TaskAssignedUsers-DI3rxxmP.js";import"./TaskIsClosedBadge-DFyQPVWI.js";import"./TaskSupervisorAndEmployee-C52bUqh3.js";const nt={class:"grid gap-4 md:grid-cols-3 mt-4 px-4 container mx-auto"},at={class:"text-3xl"},ot={class:"text-3xl"},lt={class:"text-3xl"},rt={class:"text-3xl"},it={class:"text-3xl"},dt={class:"text-3xl"},ut={class:"text-3xl"},ct={class:"text-3xl"},pt={class:"text-3xl"},mt={class:"text-3xl"},yt={class:"text-3xl"},vt={__name:"DashboardAdminView",setup(_){const r=oe();ge();const{dashboardInfo:p,selectedDate:g}=X(r),c=M(()=>new Date);return(y,u)=>{const n=ye("RouterLink");return a(),d("div",nt,[D(n,{to:{name:"TodayAttendanceReport",query:{status:"all"}},class:"main-button"},{default:C(()=>{var t;return[e("span",at,m((t=k(p))==null?void 0:t.totalUsers),1),u[0]||(u[0]=L(" Total Employees "))]}),_:1,__:[0]}),D(n,{to:{name:"TodayAttendanceReport",query:{status:"Present"}},class:"main-button"},{default:C(()=>{var t;return[e("span",ot,m((t=k(p))==null?void 0:t.todayPresents),1),u[1]||(u[1]=L(" Today Present "))]}),_:1,__:[1]}),D(n,{to:{name:"TodayAttendanceReport",query:{status:"Absent"}},class:"main-button"},{default:C(()=>{var t;return[e("span",lt,m((t=k(p))==null?void 0:t.todayAbsents),1),u[2]||(u[2]=L(" Today Absent "))]}),_:1,__:[2]}),D(n,{to:{name:"LeaveApplicationsForDay",query:{applicationType:"today"}},class:"main-button"},{default:C(()=>{var t;return[e("span",rt,m((t=k(p))==null?void 0:t.todayLeaves),1),u[3]||(u[3]=L(" Today Leave "))]}),_:1,__:[3]}),D(n,{to:{name:"LeaveApplicationsForDay",query:{applicationType:"tomorrow"}},class:"main-button"},{default:C(()=>{var t;return[e("span",it,m((t=k(p))==null?void 0:t.tomorrowLeaves),1),u[4]||(u[4]=L(" Tomorrow Leave "))]}),_:1,__:[4]}),D(n,{to:{name:"DateWiseShortLeaveList",query:{date:k(g)}},class:"main-button"},{default:C(()=>{var t;return[e("span",dt,m((t=k(p))==null?void 0:t.todayShortLeaves),1),u[5]||(u[5]=L(" Today Short Leaves "))]}),_:1,__:[5]},8,["to"]),D(n,{to:{name:"DailyLateAttendanceReport",query:{date:k(g)}},class:"main-button"},{default:C(()=>{var t;return[e("span",ut,m((t=k(p))==null?void 0:t.todayLateEntries),1),u[6]||(u[6]=L(" Today Late Report "))]}),_:1,__:[6]},8,["to"]),D(n,{to:{name:"PreviousAfterApplicationList",query:{applicationType:"prev",date:k(g)}},class:"main-button"},{default:C(()=>{var t;return[e("span",ct,m((t=k(p))==null?void 0:t.prevWeekLeaves),1),u[7]||(u[7]=L(" Leave history of previous week "))]}),_:1,__:[7]},8,["to"]),D(n,{to:{name:"PreviousAfterApplicationList",query:{applicationType:"after",date:k(g)}},class:"main-button"},{default:C(()=>{var t;return[e("span",pt,m((t=k(p))==null?void 0:t.nextWeekLeaves),1),u[8]||(u[8]=L(" Upcoming leaves "))]}),_:1,__:[8]},8,["to"]),D(n,{to:{name:"TodoList",query:{day:c.value.getDate(),month:c.value.getMonth()+1,year:c.value.getFullYear(),type:"day-view"}},class:"main-button"},{default:C(()=>{var t;return[e("span",mt,m((t=k(p))==null?void 0:t.todayTotalTodos),1),u[9]||(u[9]=L(" Today Todos "))]}),_:1,__:[9]},8,["to"]),D(n,{to:{name:"TodoList",query:{month:c.value.getMonth()+1,year:c.value.getFullYear(),type:"month-view"}},class:"main-button"},{default:C(()=>{var t;return[e("span",yt,m((t=k(p))==null?void 0:t.thisMonthTotalTodos),1),u[10]||(u[10]=L(" Todos In This Month "))]}),_:1,__:[10]},8,["to"])])}}},fe=(_,r,p,g)=>{const c=new Date(g,p-1,r);return _.filter(y=>{const u=y.deadline?new Date(y.deadline):null,n=ve(new Date);if(y.assigned_at){const t=ve(new Date(y.assigned_at));if(c<t)return!1;let o=null;return y.completed_at&&(o=ve(new Date(y.completed_at))),!(o&&o<c||u&&u<c&&c>n)}return!1}).map(y=>{let u=!1;return y.deadline&&(u=new Date(y.deadline)<c),{...y,deadline_crossed:u}})},ft={class:"px-4 py-2 flex items-center bg-gray-50 group"},xt=["disabled"],gt={class:"ml-4 md:ml-auto flex items-center gap-2"},bt=["value"],ht=$e({__name:"DailyTaskHeading",props:{selectedDay:{type:String,required:!0},loading:{type:Boolean,default:!1}},emits:["change",,"reloadClick","monthWiseButtonClick"],setup(_,{emit:r}){const p=_,g=r;function c(){g("change",pe(new Date))}function y(){const n=new Date(p.selectedDay);n.setDate(n.getDate()+1),g("change",pe(n))}function u(){const n=new Date(p.selectedDay);n.setDate(n.getDate()-1),g("change",pe(n))}return(n,t)=>(a(),d("div",ft,[t[4]||(t[4]=e("h2",{class:"leading-none font-semibold text-lg"},"Daily Task",-1)),e("button",{class:"btn-3 mx-4 h-7",onClick:t[0]||(t[0]=S(o=>g("monthWiseButtonClick"),["prevent"]))},"Month Wise"),e("button",{class:"btn-3 mx-4 h-7",onClick:S(c,["prevent"])},"Today"),e("button",{class:$(["btn-3 px-2 py-2 mx-4 size-7 disabled:text-gray-300 disabled:border-gray-300",{"animate-spin text-gray-300 border-gray-300 !bg-opacity-0":_.loading}]),onClick:t[1]||(t[1]=S(o=>g("reloadClick"),["prevent"])),disabled:_.loading},t[3]||(t[3]=[e("i",{class:"fas fa-redo-alt"},null,-1)]),10,xt),e("div",gt,[e("button",{class:"btn-2 h-7",onClick:S(u,["prevent"])},"Previous Day"),e("button",{class:"btn-2 h-7",onClick:S(y,["prevent"])},"Next Day"),e("input",{type:"date",value:_.selectedDay,onInput:t[2]||(t[2]=o=>{var b;return g("change",(b=o.target)==null?void 0:b.value)}),class:"border px-2 rounded"},null,40,bt)])]))}}),_t={class:"px-4 py-2 flex items-center bg-gray-50 group"},kt=["disabled"],wt={class:"ml-4 md:ml-auto flex items-center gap-2"},$t=["value"],Dt=$e({__name:"MonthlyTaskHeading",props:{selectedMonth:{type:String,required:!0},loading:{type:Boolean,default:!1}},emits:["reloadClick","dayWiseButtonClick","change"],setup(_,{emit:r}){const p=_,g=r;function c(){g("change",me(new Date))}function y(){var b;const[n,t]=(b=p.selectedMonth)==null?void 0:b.split("-").map(Number),o=new Date(n,t,1);o.setMonth(o.getMonth()),g("change",me(o))}function u(){var b;const[n,t]=(b=p.selectedMonth)==null?void 0:b.split("-").map(Number),o=new Date(n,t,1);o.setMonth(o.getMonth()-2),g("change",me(o))}return(n,t)=>(a(),d("div",_t,[t[4]||(t[4]=e("h2",{class:"leading-none font-semibold text-lg"},"Monthly Task",-1)),e("button",{class:"btn-3 mx-4 h-7",onClick:t[0]||(t[0]=S(o=>g("dayWiseButtonClick"),["prevent"]))},"Day Wise"),e("button",{class:"btn-3 mx-4 h-7",onClick:S(c,["prevent"])},"Current Month"),e("button",{class:$(["btn-3 px-2 py-2 mx-4 size-7 disabled:text-gray-300 disabled:border-gray-300",{"animate-spin text-gray-300 border-gray-300 !bg-opacity-0":_.loading}]),onClick:t[1]||(t[1]=S(o=>g("reloadClick"),["prevent"])),disabled:_.loading},t[3]||(t[3]=[e("i",{class:"fas fa-redo-alt"},null,-1)]),10,kt),e("div",wt,[e("button",{class:"btn-2 h-7",onClick:S(u,["prevent"])},"Previous Month"),e("button",{class:"btn-2 h-7",onClick:S(y,["prevent"])},"Next Month"),e("input",{type:"month",value:_.selectedMonth,onInput:t[2]||(t[2]=o=>{var b;return g("change",(b=o.target)==null?void 0:b.value)}),class:"border px-2 rounded"},null,40,$t)])]))}}),Ct={key:0,class:"space-y-6 py-2"},Mt={key:0,class:"fad fa-folder text-xs mr-2"},Lt={key:1,class:"fad fa-file-alt text-xs mr-2"},Tt={key:2,class:"text-center w-full mt-4 text-xs text-gray-600"},xe={__name:"TaskListOnDay",props:{isCurrentMonth:{type:Boolean,default:!1},tasks:{type:Array,default:()=>[]},limit:{type:Number,default:null},tree:{type:Boolean,default:!1}},emits:["clickOnMore"],setup(_,{emit:r}){const p=_,g=r,c=M(()=>{var y;return p.limit?((y=p==null?void 0:p.tasks)==null?void 0:y.slice(0,p.limit))||[]:[...p.tasks]});return(y,u)=>(a(),d("div",null,[_.tree?(a(),d("div",Ct,[(a(!0),d(q,null,O(c.value,(n,t)=>(a(),R(tt,{"hide-buttons":"","hide-assigned-users":"",task:n,key:n.id,index:t,class:"shadow hover:shadow-md border border-blue-300 rounded-md *:border-none"},null,8,["task","index"]))),128))])):(a(),d("ul",{key:1,class:$({"text-gray-500 group-hover:text-gray-900":!_.isCurrentMonth})},[(a(!0),d(q,null,O(c.value,n=>(a(),d("li",{class:"mb-2",key:n.id},[D(k(Fe),{to:`/tasks/${n.id}`,target:"_blank",class:"flex items-center hover:underline hover:text-blue-600"},{default:C(()=>[n.children_task_count>0?(a(),d("i",Mt)):T("",!0),n.children_task_count==0?(a(),d("i",Lt)):T("",!0),e("span",{class:$(["line-clamp-1",{"text-red-800":n.deadline_crossed}])},m(n.title),3)]),_:2},1032,["to"])]))),128))],2)),_.tasks.length-c.value.length>0?(a(),d("div",Tt,[e("button",{onClick:u[0]||(u[0]=S(n=>g("clickOnMore",n),["prevent"])),class:"text-blue-600 hover:underline"}," +"+m(_.tasks.length-c.value.length)+" More Tasks ",1)])):T("",!0)]))}},St={class:"relative"},At={class:"ml-auto"},Rt=["onClick"],Nt={key:0,class:"absolute inset-0 bg-gray-300 bg-opacity-90"},Pt={class:"absolute inset-16 bg-white border border-blue-500 rounded-md z-20 overflow-y-auto"},qt={class:"text-lg font-semibold mb-4 sticky top-0 border-b border-blue-200 px-4 z-30 py-3 bg-white flex items-center"},Et={__name:"TaskInMonth",props:{month:{type:String,required:!0,validator:_=>/^\d{4}-(0[1-9]|1[0-2])$/.test(_)},tasks:{type:Array,required:!0,default:()=>[]}},setup(_){const r=De({day:null,month:null,year:null});function p(n){n.stopPropagation(),r.day=null,r.month=null,r.year=null}function g(n,t,o,b){n.stopPropagation(),r.day=t,r.month=o,r.year=b}const c=(n,t,o)=>{const b=new Date;return n===b.getDate()&&t===b.getMonth()+1&&o===b.getFullYear()},y=(n,t,o)=>n===r.day&&t===r.month&&o===r.year,u=(n,t,o,b)=>{const A=c(n,t,o);return{"bg-green-100 text-green-900 border-blue-500 border-2 scale-105 z-10":A,"border-r border-t hover:border border-blue-200  hover:scale-105 hover:z-20 hover:bg-blue-50":!A,"bg-gray-50":!b}};return(n,t)=>(a(),d("div",St,[_.month?(a(),R(Qe,{key:0,month:_.month,class:"border-t border-blue-200/50 relative"},{date:C(({day:o,month:b,year:A,isCurrentMonth:h})=>[e("div",{tabindex:"0",class:$(["transition origin-center p-2 outline-blue-600 outline-1 cursor-pointer",u(o,b,A,h)])},[e("div",{class:$(["font-bold w-full flex items-center",{"text-gray-300":!h}])},[e("div",null,m(o),1),e("div",At,[y(o,b,A)?T("",!0):(a(),d("button",{key:0,class:"btn-icon",onClick:S(l=>g(l,o,b,A),["prevent"])},t[0]||(t[0]=[e("i",{class:"fas fa-expand-arrows text-gray-400 hover:text-gray-600"},null,-1)]),8,Rt))])],2),D(xe,{"is-current-month":h,tasks:k(fe)(_.tasks,o,b,A),limit:3,class:"text-xs mt-4",onClickOnMore:l=>g(l,o,b,A)},null,8,["is-current-month","tasks","onClickOnMore"])],2)]),"calender-bottom":C(()=>[r.day?(a(),d("div",Nt,[e("div",Pt,[e("div",qt,[L(" Tasks for "+m(r.day)+"/"+m(r.month)+"/"+m(r.year)+" ",1),e("button",{class:"ml-auto",type:"button",onClick:S(p,["prevent"])},t[1]||(t[1]=[e("i",{class:"fas fa-times"},null,-1)]))]),D(xe,{class:"p-4","is-current-month":n.isCurrentMonth,tasks:k(fe)(_.tasks,r.day,r.month,r.year),tree:!0},null,8,["is-current-month","tasks"])])])):T("",!0)]),_:1},8,["month"])):T("",!0)]))}},Bt={class:"bg-opacity-90 relative"},Ot={class:"rounded-md z-20"},jt={class:"text-md sticky top-0 border-b px-4 z-30 py-3 bg-white flex items-center shadow"},Ut={class:"flex justify-between items-center gap-6 w-full"},It={key:0,class:"text-blue-800 bg-blue-100 rounded-full border px-4 py-0.5 text-sm"},Vt={key:1,class:"text-blue-800 bg-blue-100 rounded-full border px-4 py-0.5 text-sm"},Ft={class:"ml-auto flex items-center gap-2"},Wt={key:0,class:"w-32 relative h-8"},Yt={__name:"DailyTask",setup(_){const r=De({day:null,month:null,year:null}),p=B(),g=B(),c=B("loading"),y=Ze(),u=ge(),n=B(""),t=B("day-wise"),o=B("not-completed");Ce(()=>{p.value=pe(new Date),g.value=me(new Date)}),J(p,l=>{const[x,f,j]=l.split("-").map(Number);r.day=j,r.month=f,r.year=x}),J(g,l=>{const[x,f]=l.split("-").map(Number);r.day=1,r.month=f,r.year=x}),J(()=>r.month,async()=>{c.value="loading",await b(),c.value=""}),J(t,l=>{if(l=="month-wise"){const[x,f]=p.value.split("-");g.value=`${x}-${f}`}});async function b(){await y.fetchMyTasks()}const A=async()=>{c.value="loading",await b(),c.value=""},h=M(()=>{var f,j;const l=N=>{var U,I;return n.value?(I=N==null?void 0:N.toUpperCase())==null?void 0:I.includes((U=n.value)==null?void 0:U.toUpperCase()):!0},x=t.value=="day-wise"?{"user-ids":(f=u==null?void 0:u.user)==null?void 0:f.id,status:o.value}:{"user-ids":(j=u==null?void 0:u.user)==null?void 0:j.id};return Xe(fe(y.tasks,r.day,r.month,r.year),x).filter(N=>{var U;return l(N.title)||((U=N.children_tasks)==null?void 0:U.some(I=>l(I==null?void 0:I.title)))}).map(N=>({...N,children_tasks:N.children_tasks.filter(U=>l(U.title))}))});return(l,x)=>(a(),d("div",null,[t.value=="day-wise"?(a(),R(ht,{key:0,loading:c.value=="loading","selected-day":p.value,onChange:x[0]||(x[0]=f=>p.value=f),onReloadClick:A,onMonthWiseButtonClick:x[1]||(x[1]=f=>t.value="month-wise")},null,8,["loading","selected-day"])):T("",!0),t.value=="month-wise"?(a(),R(Dt,{key:1,loading:c.value=="loading","selected-month":g.value,onChange:x[2]||(x[2]=f=>g.value=f),onDayWiseButtonClick:x[3]||(x[3]=f=>t.value="day-wise"),onReloadClick:A},null,8,["loading","selected-month"])):T("",!0),e("div",Bt,[e("div",Ot,[e("div",jt,[e("div",Ut,[t.value=="day-wise"?(a(),d("div",It,m(k(Ge)(p.value)),1)):T("",!0),t.value=="month-wise"?(a(),d("div",Vt,m(k(Je)(g.value)),1)):T("",!0),e("div",Ft,[t.value=="day-wise"?(a(),d("div",Wt,[x[7]||(x[7]=e("label",{class:"absolute text-xs left-3 -top-1.5 bg-slate-100 text-blue-500"},"Status",-1)),ae(e("select",{"onUpdate:modelValue":x[4]||(x[4]=f=>o.value=f),class:"h-8 text-xs px-2 text-gray-600 border-2 border-gray-400 rounded-md w-full"},x[6]||(x[6]=[e("option",{value:""},"--ALL TASKS--",-1),e("option",{value:"not-completed"},"Not Completed",-1)]),512),[[We,o.value]])])):T("",!0),D(Ke,{modelValue:n.value,"onUpdate:modelValue":x[5]||(x[5]=f=>n.value=f),class:"w-full md:w-48 md:ml-auto h-8","debounce-time":0},null,8,["modelValue"])])])]),t.value=="day-wise"?(a(),R(xe,{key:0,class:"p-4 overflow-y-auto",tasks:h.value,tree:!0},null,8,["tasks"])):t.value=="month-wise"?(a(),R(Et,{key:1,tasks:h.value||[],month:g.value,class:"bg-gray-50"},null,8,["tasks","month"])):T("",!0)]),c.value==="loading"?(a(),R(He,{key:0,class:"absolute inset-0 flex items-center justify-center z-20 bg-opacity-70"})):T("",!0)])]))}},zt={class:"bg-white shadow-md rounded-lg"},Ht={class:"overflow-x-auto shadow-md min-h-max"},Kt={class:"min-w-full text-sm text-left text-gray-500 table-fixed"},Gt={class:"text-xs"},Jt={class:"text-sm font-semibold text-blue-800"},Xt={__name:"DashboardLeaveBalance",setup(_){const r=oe(),{userDashboard:p}=X(r);return(g,c)=>{var y,u,n,t;return a(),d("div",zt,[c[4]||(c[4]=e("h2",{class:"text-xl font-semibold py-2 px-4"},"Leave Balance",-1)),e("div",Ht,[e("table",Kt,[e("thead",null,[e("tr",Gt,[c[0]||(c[0]=e("th",{class:"px-2 py-1 font-semibold text-gray-900 border bg-gray-50"},null,-1)),(a(!0),d(q,null,O((y=k(p))==null?void 0:y.leave_balance,o=>(a(),d("th",{class:"px-4 text-center py-1 font-semibold text-gray-900 border bg-gray-50 w-40",key:o.id},m(o.name),1))),128))])]),e("tbody",null,[e("tr",null,[c[1]||(c[1]=e("td",{class:"px-4 py-4 font-medium text-gray-900 border text-xs"},"Total",-1)),(a(!0),d(q,null,O((u=k(p))==null?void 0:u.leave_balance,o=>(a(),d("td",{class:"px-4 text-center py-3 font-medium text-gray-900 border",key:o.id},m(o.annual_quota),1))),128))]),e("tr",null,[c[2]||(c[2]=e("td",{class:"px-4 py-3 font-medium text-gray-900 border text-xs"},"Used",-1)),(a(!0),d(q,null,O((n=k(p))==null?void 0:n.leave_balance,o=>(a(),d("td",{class:"px-4 text-center py-4 font-medium text-gray-900 border",key:o.id},m(o.used_days),1))),128))]),e("tr",Jt,[c[3]||(c[3]=e("td",{class:"px-4 py-3 border text-xs"},"Balance",-1)),(a(!0),d(q,null,O((t=k(p))==null?void 0:t.leave_balance,o=>(a(),d("td",{class:"px-4 text-center py-4 border",key:o.id},m(o.remaining_days),1))),128))])])])])])}}},Zt={class:"flex items-center gap-2 mr-2"},Qt=["onClick"],es=["onClick"],ts={__name:"DashboardMyTodoList",setup(_){const r=Me(),p=be();function g(c){p.push({query:{...r.query,"todos[type]":c.type,"todos[year]":c.year,"todos[month]":c.month,"todos[day]":c.day}})}return(c,y)=>{const u=ye("RouterLink");return a(),R(et,{type:k(r).query["todos[type]"],year:k(r).query["todos[year]"],month:k(r).query["todos[month]"],day:k(r).query["todos[day]"],userRole:"employee",onChangeInput:g},{beforeHeader:C(()=>y[0]||(y[0]=[e("h2",{class:"text-md font-medium"},"Todo List",-1)])),typeSelection:C(({types:n,changeType:t,selected:o})=>{var b,A,h,l;return[e("div",Zt,[e("button",{onClick:S(x=>{var f;return t((f=n[0])==null?void 0:f.value)},["prevent"]),class:$(["rounded text-sm h-[32px] w-20",(o==null?void 0:o.type)==((b=n[0])==null?void 0:b.value)?"btn-2":"btn-3"])},m((A=n[0])==null?void 0:A.label),11,Qt),e("button",{onClick:S(x=>{var f;return t((f=n[1])==null?void 0:f.value)},["prevent"]),class:$(["rounded text-sm h-[32px] w-20",(o==null?void 0:o.type)==((h=n[1])==null?void 0:h.value)?"btn-2 ":"btn-3"])},m((l=n[1])==null?void 0:l.label),11,es),D(u,{to:"/my-personal-activity-report",class:"inline-flex items-center gap-2 rounded-md border border-sky-300 px-3 h-[32px] text-sm text-sky-700 bg-sky-50 hover:bg-sky-100 dark:border-sky-800 dark:text-sky-200 dark:bg-sky-900/20 dark:hover:bg-sky-900/40"},{default:C(()=>y[1]||(y[1]=[e("i",{class:"fas fa-tasks"},null,-1),e("span",{class:"hidden lg:inline"},"Personal Activity Report (PAR)",-1),e("span",{class:"inline lg:hidden"},"PAR",-1)])),_:1,__:[1]})])]}),_:1},8,["type","year","month","day"])}}},ss={class:"bg-white shadow-sm rounded-xl p-3 sm:p-4"},ns=["aria-expanded"],as={class:"flex items-center gap-2"},os={class:"text-[11px] rounded-full bg-yellow-100 text-gray-700 px-2 py-0.5"},ls={key:0,class:"text-xs italic text-center py-4 text-gray-500"},rs={key:1,class:"py-2 space-y-1"},is=["onClick"],ds={class:"min-w-0"},us={class:"text-[13px] text-gray-900 truncate"},cs={class:"font-medium"},ps={class:"opacity-70"},ms={class:"truncate max-w-[10rem]"},ys={key:0,class:"inline-flex items-center gap-1 rounded-md border border-gray-200 bg-gray-50 px-1.5 py-0.5"},vs={key:0,class:"flex justify-center"},fs={class:"mt-4"},xs=["aria-expanded"],gs={class:"flex items-center gap-2"},bs={class:"text-[11px] rounded-full bg-yellow-100 text-gray-700 px-2 py-0.5"},hs={key:0,class:"text-xs italic text-center py-4 text-gray-500"},_s={key:1,class:"py-2 space-y-1"},ks=["onClick"],ws={class:"min-w-0"},$s={class:"text-[13px] text-gray-900 truncate"},Ds={class:"font-medium"},Cs={class:"opacity-70"},Ms={key:0,class:"flex justify-center"},Ls={class:"mt-4"},Ts=["aria-expanded"],Ss={class:"flex items-center gap-2"},As={class:"text-[11px] rounded-full bg-yellow-100 text-gray-700 px-2 py-0.5"},Rs={key:0,class:"text-xs italic text-center py-4 text-gray-500"},Ns={key:1,class:"py-2 space-y-1"},Ps=["onClick"],qs={class:"min-w-0"},Es={class:"text-[13px] text-gray-900 truncate"},Bs={class:"font-medium"},Os={class:"opacity-70"},js={key:0,class:"flex justify-center"},Us={class:"mt-4"},Is=["aria-expanded"],Vs={class:"flex items-center gap-2"},Fs={class:"text-[11px] rounded-full bg-yellow-100 text-gray-700 px-2 py-0.5"},Ws={key:0,class:"text-xs italic text-center py-4 text-gray-500"},Ys={key:1,class:"py-2 space-y-1"},zs=["onClick"],Hs={class:"min-w-0"},Ks={class:"text-[13px] text-gray-900 truncate"},Gs={class:"font-medium"},Js={class:"opacity-70"},Xs={key:0,class:"flex justify-center"},K=5,de="inline-flex items-center rounded-full px-2 py-0.5 text-[11px] font-medium",ue="flex items-center justify-between gap-2",Zs="text-[12px] text-gray-600 flex items-center gap-2 flex-wrap",ce="block w-full text-left rounded-md px-2.5 py-2 hover:bg-slate-50/70 focus:bg-slate-50/90 focus:outline-none transition",Qs={__name:"DashboardRecentApplications",setup(_){const r=se(()=>ne(()=>import("./LeaveApplicationModal-R2KMfVoV.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]))),p=se(()=>ne(()=>import("./ShortLeaveDetailsModal-BIqueGDc.js"),__vite__mapDeps([10,1,2,3,4,5,6,11,7,12,13]))),g=se(()=>ne(()=>import("./ManualAttendanceDetailsModal-EEDkFhxO.js"),__vite__mapDeps([14,1,2,3,4,5,6,7,15,16]))),c=se(()=>ne(()=>import("./ShiftExchangeDetailsModal-Cln-f9qJ.js"),__vite__mapDeps([17,1,2,3,4,5,6,11,7,18,19]))),y=se(()=>ne(()=>import("./OffdayExchangeDetailsModal-BHZlpaTh.js"),__vite__mapDeps([20,1,2,3,4,5,6,11,7,18,21]))),u=oe(),{userDashboard:n}=X(u),t=M(()=>{var i;return((i=n.value)==null?void 0:i.lists)??{}}),o=M(()=>t.value.current_month_leave??[]),b=M(()=>t.value.short_leave??[]),A=M(()=>t.value.exchange??[]),h=M(()=>t.value.manual_attendance??[]),l=i=>i==="Pending"||i===null,x=M(()=>o.value.filter(i=>l(i==null?void 0:i.status)).length),f=M(()=>b.value.filter(i=>l(i==null?void 0:i.status)).length),j=M(()=>A.value.filter(i=>l(i==null?void 0:i.status)).length),N=M(()=>h.value.filter(i=>l(i==null?void 0:i.status)).length),U=M(()=>o.value.slice(0,K)),I=M(()=>b.value.slice(0,K)),Le=M(()=>A.value.slice(0,K)),Te=M(()=>h.value.slice(0,K)),he=M(()=>Math.max(0,o.value.length-K)),_e=M(()=>Math.max(0,b.value.length-K)),ke=M(()=>Math.max(0,A.value.length-K)),we=M(()=>Math.max(0,h.value.length-K)),Se={null:{title:"Handover Waiting",cls:"bg-gray-100 text-gray-800 ring-1 ring-gray-200"},Pending:{title:"Pending",cls:"bg-amber-50 text-amber-700 ring-1 ring-amber-200"},Approved:{title:"Approved",cls:"bg-emerald-50 text-emerald-700 ring-1 ring-emerald-200"},Rejected:{title:"Rejected",cls:"bg-rose-50 text-rose-700 ring-1 ring-rose-200"}},W=i=>Se[i??"null"]??{title:String(i||"Unknown"),cls:"bg-gray-100 text-gray-700 ring-1 ring-gray-200"},Ae=i=>Array.isArray(i)?i.filter(s=>s==null?void 0:s.name).map(s=>`${s.name} (${(s==null?void 0:s.days)??0})`).join(", "):"",Z=B({open:!1,id:null}),Q=B({open:!1,id:null}),ee=B({open:!1,id:null}),Re=i=>{Z.value={open:!0,id:i}},Ne=i=>{Q.value={open:!0,id:i}},Pe=i=>{ee.value={open:!0,id:i}},Y=B({open:!1,id:null,type:null}),qe=i=>{const s=(i==null?void 0:i.exchange_type)==="offday"?"offday":"shift";Y.value={open:!0,id:i.id,type:s}},Ee=M(()=>Y.value.type==="offday"?y:c),Be=M(()=>`${Y.value.type||"x"}-${Y.value.id||"x"}`);function Oe(i){if(!i)return null;const s=String(i).trim();let w=s.match(/^(\d{4})-(\d{2})-(\d{2})$/);return w?new Date(+w[1],+w[2]-1,+w[3],0,0,0):(w=s.match(/^(\d{4})-(\d{2})-(\d{2})[ T](\d{2}):(\d{2})(?::(\d{2}))?$/),w?new Date(+w[1],+w[2]-1,+w[3],+w[4],+w[5],+(w[6]||0)):null)}function z(i){const s=Oe(i);return s?s.toLocaleDateString(void 0,{day:"2-digit",month:"short",year:"numeric"}):""}function je(i){const s=String(i||"").match(/^(\d{4})-(\d{2})-(\d{2})$/);return s?new Date(+s[1],+s[2]-1,+s[3],0,0,0):null}function Ue(i,s){const w=new Date(i);return w.setDate(w.getDate()+s),w}function Ie(i,s){return i&&s&&i.getFullYear()===s.getFullYear()&&i.getMonth()===s.getMonth()&&i.getDate()===s.getDate()}function le(i){const s=i.getFullYear(),w=String(i.getMonth()+1).padStart(2,"0"),v=String(i.getDate()).padStart(2,"0");return`${s}-${w}-${v}`}function Ve(i){const s=Array.isArray(i)?i.slice():[],w=P=>Array.from(new Set(P)).sort(),v=w(s.filter(P=>(P==null?void 0:P.leave_type_id)!=="weekend").map(P=>P.date).filter(Boolean)),V=w(s.filter(P=>(P==null?void 0:P.leave_type_id)==="weekend").map(P=>P.date).filter(Boolean)),F=[];let H=null,G=null;for(const P of v){const te=je(P);if(te){if(!H){H=G=te;continue}Ie(Ue(G,1),te)?G=te:(F.push({from:le(H),to:le(G)}),H=G=te)}}return H&&G&&F.push({from:le(H),to:le(G)}),{ranges:F,weekends:V,leaveCount:v.length}}const E=B({apps:!!x.value,short:!!f.value,exch:!!j.value,manual:!!N.value}),re=i=>{E.value[i]=!E.value[i]};return(i,s)=>{const w=ye("RouterLink");return a(),d("div",ss,[e("section",null,[e("header",{class:"flex items-center justify-between mb-1 cursor-pointer select-none",role:"button","aria-expanded":E.value.apps,onClick:s[1]||(s[1]=v=>re("apps")),tabindex:"0"},[s[14]||(s[14]=Ye('<div class="flex items-center gap-2"><i class="fas fa-file text-gray-600"></i><h2 class="text-sm font-semibold text-gray-900"> Applications <span class="ml-2 align-middle text-[10px] sm:text-[11px] inline-flex items-center gap-1 rounded-full bg-blue-50 text-blue-700 px-2 py-0.5"><i class="far fa-clock"></i> Latest </span></h2></div>',1)),e("div",as,[e("span",os,m(x.value),1),D(w,{to:{name:"MyLeaveApplications"},class:"text-[11px] text-blue-700 hover:underline",onClick:s[0]||(s[0]=S(()=>{},["stop"]))},{default:C(()=>s[13]||(s[13]=[L(" See all ")])),_:1,__:[13]}),e("i",{class:$(["fas fa-chevron-down text-gray-600 transition-transform duration-200",E.value.apps?"rotate-180":""])},null,2)])],8,ns),ae(e("div",null,[s[17]||(s[17]=e("hr",{class:"border-gray-100"},null,-1)),o.value.length===0?(a(),d("div",ls,"No applications")):(a(),d("div",rs,[(a(!0),d(q,null,O(U.value,v=>(a(),d("button",{key:v.id,class:$(ce),onClick:V=>Re(v.id)},[e("div",{class:$(ue)},[e("div",ds,[e("div",us,[e("span",cs,"#"+m(v.id),1),e("span",ps," – "+m(Ae(v.leave_type_counts)||"—"),1)]),e("div",{class:$(Zs)},[(a(!0),d(q,null,O([Ve(v.json_data)],V=>(a(),d(q,{key:"info-"+v.id},[V.leaveCount>1?(a(!0),d(q,{key:0},O(V.ranges,(F,H)=>(a(),d("span",{key:H,class:"inline-flex items-center gap-1 rounded-md border border-gray-200 bg-gray-50 px-1.5 py-0.5"},[s[15]||(s[15]=e("i",{class:"far fa-calendar-minus"},null,-1)),e("span",ms,m(F.from!==F.to?z(F.from)+" – "+z(F.to):z(F.from)),1)]))),128)):(a(),d(q,{key:1},[V.ranges[0]?(a(),d("span",ys,[s[16]||(s[16]=e("i",{class:"far fa-calendar-day"},null,-1)),e("span",null,m(z(V.ranges[0].from)),1)])):T("",!0)],64))],64))),128))])]),e("span",{class:$([de,W(v.status).cls])},m(W(v.status).title),3)])],8,is))),128)),he.value?(a(),d("div",vs,[D(w,{to:{name:"MyLeaveApplications"},class:"text-[12px] text-blue-700 hover:underline"},{default:C(()=>[L(" + "+m(he.value)+" more ",1)]),_:1})])):T("",!0)]))],512),[[ie,E.value.apps]])]),e("section",fs,[e("header",{class:"flex items-center justify-between mb-1 cursor-pointer select-none",role:"button","aria-expanded":E.value.short,onClick:s[3]||(s[3]=v=>re("short")),tabindex:"0"},[s[19]||(s[19]=e("div",{class:"flex items-center gap-2"},[e("i",{class:"fas fa-walking text-gray-600"}),e("h2",{class:"text-sm font-semibold text-gray-900"},"Short Leave")],-1)),e("div",gs,[e("span",bs,m(f.value),1),D(w,{to:{name:"MyShortLeaves"},class:"text-[11px] text-blue-700 hover:underline",onClick:s[2]||(s[2]=S(()=>{},["stop"]))},{default:C(()=>s[18]||(s[18]=[L(" See all ")])),_:1,__:[18]}),e("i",{class:$(["fas fa-chevron-down text-gray-600 transition-transform duration-200",E.value.short?"rotate-180":""])},null,2)])],8,xs),ae(e("div",null,[s[20]||(s[20]=e("hr",{class:"border-gray-100"},null,-1)),b.value.length===0?(a(),d("div",hs,"No short leave")):(a(),d("div",_s,[(a(!0),d(q,null,O(I.value,v=>(a(),d("button",{key:v.id,class:$(ce),onClick:V=>Ne(v.id)},[e("div",{class:$(ue)},[e("div",ws,[e("div",$s,[e("span",Ds,m(z(v.date)),1),e("span",Cs," – "+m(v.type||"—"),1)])]),e("span",{class:$([de,W(v.status).cls])},m(W(v.status).title),3)])],8,ks))),128)),_e.value?(a(),d("div",Ms,[D(w,{to:{name:"MyShortLeaves"},class:"text-[12px] text-blue-700 hover:underline"},{default:C(()=>[L(" + "+m(_e.value)+" more ",1)]),_:1})])):T("",!0)]))],512),[[ie,E.value.short]])]),e("section",Ls,[e("header",{class:"flex items-center justify-between mb-1 cursor-pointer select-none",role:"button","aria-expanded":E.value.exch,onClick:s[6]||(s[6]=v=>re("exch")),tabindex:"0"},[s[23]||(s[23]=e("div",{class:"flex items-center gap-2"},[e("i",{class:"fas fa-exchange-alt text-gray-600"}),e("h2",{class:"text-sm font-semibold text-gray-900"},"Exchange")],-1)),e("div",Ss,[e("span",As,m(j.value),1),D(w,{to:{name:"MyShiftExchangeList"},class:"text-[11px] text-blue-700 hover:underline",onClick:s[4]||(s[4]=S(()=>{},["stop"]))},{default:C(()=>s[21]||(s[21]=[L(" Shift ")])),_:1,__:[21]}),D(w,{to:{name:"MyOffdayExchangeList"},class:"text-[11px] text-blue-700 hover:underline",onClick:s[5]||(s[5]=S(()=>{},["stop"]))},{default:C(()=>s[22]||(s[22]=[L(" Offday ")])),_:1,__:[22]}),e("i",{class:$(["fas fa-chevron-down text-gray-600 transition-transform duration-200",E.value.exch?"rotate-180":""])},null,2)])],8,Ts),ae(e("div",null,[s[24]||(s[24]=e("hr",{class:"border-gray-100"},null,-1)),A.value.length===0?(a(),d("div",Rs,"No exchange")):(a(),d("div",Ns,[(a(!0),d(q,null,O(Le.value,v=>(a(),d("button",{key:v.id,class:$(ce),onClick:V=>qe(v)},[e("div",{class:$(ue)},[e("div",qs,[e("div",Es,[e("span",Bs,m(z(v.current_date)),1),e("span",Os," – "+m(v.exchange_type||"—"),1)])]),e("span",{class:$([de,W(v.status).cls])},m(W(v.status).title),3)])],8,Ps))),128)),ke.value?(a(),d("div",js,[D(w,{to:{name:"MyShiftExchangeList"},class:"text-[12px] text-blue-700 hover:underline"},{default:C(()=>[L(" + "+m(ke.value)+" more ",1)]),_:1})])):T("",!0)]))],512),[[ie,E.value.exch]])]),e("section",Us,[e("header",{class:"flex items-center justify-between mb-1 cursor-pointer select-none",role:"button","aria-expanded":E.value.manual,onClick:s[8]||(s[8]=v=>re("manual")),tabindex:"0"},[s[26]||(s[26]=e("div",{class:"flex items-center gap-2"},[e("i",{class:"fas fa-user-check text-gray-600"}),e("h2",{class:"text-sm font-semibold text-gray-900"},"Manual Attendance")],-1)),e("div",Vs,[e("span",Fs,m(N.value),1),D(w,{to:{name:"MyManualAttendanceList"},class:"text-[11px] text-blue-700 hover:underline",onClick:s[7]||(s[7]=S(()=>{},["stop"]))},{default:C(()=>s[25]||(s[25]=[L(" See all ")])),_:1,__:[25]}),e("i",{class:$(["fas fa-chevron-down text-gray-600 transition-transform duration-200",E.value.manual?"rotate-180":""])},null,2)])],8,Is),ae(e("div",null,[s[27]||(s[27]=e("hr",{class:"border-gray-100"},null,-1)),h.value.length===0?(a(),d("div",Ws,"No manual application")):(a(),d("div",Ys,[(a(!0),d(q,null,O(Te.value,v=>(a(),d("button",{key:v.id,class:$(ce),onClick:V=>Pe(v.id)},[e("div",{class:$(ue)},[e("div",Hs,[e("div",Ks,[e("span",Gs,m(v.check_in?z(v.check_in):z(v.check_out)),1),e("span",Js," – "+m(v.type||"—"),1)])]),e("span",{class:$([de,W(v.status).cls])},m(W(v.status).title),3)])],8,zs))),128)),we.value?(a(),d("div",Xs,[D(w,{to:{name:"MyManualAttendanceList"},class:"text-[12px] text-blue-700 hover:underline"},{default:C(()=>[L(" + "+m(we.value)+" more ",1)]),_:1})])):T("",!0)]))],512),[[ie,E.value.manual]])]),Z.value.open?(a(),R(k(r),{key:0,open:Z.value.open,"onUpdate:open":s[9]||(s[9]=v=>Z.value.open=v),id:Z.value.id},null,8,["open","id"])):T("",!0),Q.value.open?(a(),R(k(p),{key:1,open:Q.value.open,"onUpdate:open":s[10]||(s[10]=v=>Q.value.open=v),id:Q.value.id},null,8,["open","id"])):T("",!0),ee.value.open?(a(),R(k(g),{key:2,open:ee.value.open,"onUpdate:open":s[11]||(s[11]=v=>ee.value.open=v),id:ee.value.id},null,8,["open","id"])):T("",!0),Y.value.open?(a(),R(ze(Ee.value),{key:Be.value,open:Y.value.open,"onUpdate:open":s[12]||(s[12]=v=>Y.value.open=v),id:Y.value.id},null,40,["open","id"])):T("",!0)])}}},en={class:"bg-white shadow-sm rounded-xl p-3"},tn={class:"flex items-center justify-between"},sn={key:0,class:"text-[11px] text-gray-500"},nn={class:"inline-flex items-center gap-1 px-1.5 py-0.5 rounded-full bg-blue-50 text-blue-700"},an={key:0,class:"text-xs italic text-center py-6 text-gray-500"},on={key:1,class:"space-y-2"},ln={class:"flex items-start gap-3 min-w-0"},rn={class:"min-w-0"},dn={class:"text-sm font-medium text-gray-900 truncate"},un={class:"text-[11px] text-gray-500 mt-0.5"},cn={class:"text-base font-semibold text-gray-800 flex items-center gap-2 p-3"},pn={class:"space-y-4 px-3 pb-4"},mn={class:"text-xs text-gray-500 flex items-center gap-2"},yn={class:"flex justify-end gap-2 mt-2"},vn={__name:"DashboardRecentNotices",setup(_){const r=oe(),{userDashboard:p}=X(r),g=be(),c=h=>{if(!h)return"—";const l=new Date(h);return isNaN(+l)?h:new Intl.DateTimeFormat(void 0,{day:"2-digit",month:"short",year:"numeric"}).format(l)},y=h=>{if(!h)return"";const l=new Date(h);if(isNaN(+l))return"";const x=(Date.now()-l.getTime())/1e3,f=new Intl.RelativeTimeFormat(void 0,{numeric:"auto"}),j=[["year",60*60*24*365],["month",60*60*24*30],["week",60*60*24*7],["day",60*60*24],["hour",60*60],["minute",60],["second",1]];for(const[N,U]of j){const I=Math.round(x/U);if(Math.abs(I)>=1)return f.format(-I,N)}return f.format(0,"second")},u=h=>{const l=c(h),x=y(h);return x?`${l} · ${x}`:l},n=M(()=>{var h;return((h=p.value)==null?void 0:h.notices)??[]}),t=M(()=>[...n.value].sort((l,x)=>{const f=l!=null&&l.user_feedback?1:0,j=x!=null&&x.user_feedback?1:0;if(f!==j)return f-j;const N=new Date((l==null?void 0:l.published_at)||0).getTime();return new Date((x==null?void 0:x.published_at)||0).getTime()-N})),o=M(()=>t.value.find(h=>!(h!=null&&h.user_feedback))||null),b=B(!!o.value);J(o,h=>{b.value=!!h});const A=h=>{const l=h||o.value;if(!l)return;const x=l.type===1?`/notice-details/${l.id}`:`/policy-details/${l.id}`;g.push(x)};return(h,l)=>{const x=ye("RouterLink");return a(),d("div",en,[e("div",tn,[l[4]||(l[4]=e("div",{class:"flex items-center gap-1.5"},[e("i",{class:"fas fa-bell"}),e("h2",{class:"text-base font-semibold"},"Notices")],-1)),t.value.length?(a(),d("div",sn,[e("span",nn,[l[3]||(l[3]=e("span",{class:"h-1.5 w-1.5 rounded-full bg-blue-500"},null,-1)),L(" "+m(t.value.filter(f=>!f.user_feedback).length)+" pending ",1)])])):T("",!0)]),l[10]||(l[10]=e("hr",{class:"my-2 border-gray-200"},null,-1)),t.value.length?(a(),d("div",on,[(a(!0),d(q,null,O(t.value,f=>(a(),d("article",{key:f.id,class:"group flex items-center justify-between gap-2 p-3 border border-gray-100 rounded-lg hover:border-blue-200 transition"},[e("div",ln,[e("span",{class:$(["inline-flex items-center gap-1 px-1.5 py-0.5 rounded-full text-[10px] font-medium mt-0.5",f.user_feedback?"bg-emerald-50 text-emerald-700":"bg-rose-50 text-rose-700"])},[e("span",{class:$(["h-2 w-2 rounded-full",f.user_feedback?"bg-emerald-600":"bg-rose-600 animate-pulse"])},null,2)],2),e("div",rn,[e("h3",dn,m(f.title||"Untitled notice"),1),e("p",un,[l[5]||(l[5]=e("i",{class:"fas fa-calendar-alt text-gray-400 mr-1"},null,-1)),L(" "+m(u(f.published_at)),1)])])]),D(x,{to:f.type===1?`/notice-details/${f.id}`:`/policy-details/${f.id}`,class:"shrink-0 inline-flex items-center gap-1 text-blue-600 hover:text-blue-700 text-xs font-semibold"},{default:C(()=>l[6]||(l[6]=[L(" View "),e("i",{class:"fas fa-arrow-right text-[10px]"},null,-1)])),_:2,__:[6]},1032,["to"])]))),128))])):(a(),d("div",an," No pending notice found ")),o.value?(a(),R(st,{key:2,show:b.value,onClose:l[2]||(l[2]=f=>b.value=!1)},{default:C(()=>[e("div",cn,[l[7]||(l[7]=e("i",{class:"fas fa-bell text-blue-600"},null,-1)),L(" "+m(o.value.title||"New notice"),1)]),e("div",pn,[e("p",mn,[l[8]||(l[8]=e("i",{class:"fas fa-calendar-alt text-gray-400"},null,-1)),L(" Published: "+m(u(o.value.published_at)),1)]),l[9]||(l[9]=e("p",{class:"text-sm text-gray-700"}," You must read this notice before proceeding. ",-1)),e("div",yn,[e("button",{onClick:l[0]||(l[0]=f=>b.value=!1),class:"bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium px-3 py-1.5 rounded-md transition text-sm"}," Later "),e("button",{onClick:l[1]||(l[1]=f=>A(o.value)),class:"bg-blue-600 hover:bg-blue-700 text-white font-semibold px-4 py-1.5 rounded-md transition text-sm"}," Read ")])])]),_:1},8,["show"])):T("",!0)])}}},fn={class:"w-full px-6 py-4"},xn={class:"grid lg:grid-cols-4 gap-6 items-start"},gn={class:"gap-0 rounded-md bg-white shadow-md border border-gray-300 col-span-full lg:col-span-3 lg:row-span-2"},bn={class:"flex items-center justify-center gap-4 py-2"},hn={class:"col-span-full lg:col-span-1 grid sm:grid-cols-2 lg:grid-cols-1 gap-6 sticky top-[80px]"},_n={class:"card-bg gap-0 shadow-md border border-gray-300"},kn={class:"card-bg gap-0 shadow-md border border-gray-300"},wn={class:"card-bg gap-0 shadow-md border border-gray-300"},$n={__name:"DashboardEmployeeView",setup(_){const r=B("todos"),p=Me(),g=be();return J(()=>r.value,function(c){c!=="todos"&&g.replace({query:Object.keys(p.query).filter(y=>!y.match(/^todos\[/)).reduce((y,u)=>(y[u]=p.query[u],y),{})})}),(c,y)=>(a(),d("div",fn,[e("div",xn,[e("div",gn,[e("div",bn,[e("button",{onClick:y[0]||(y[0]=S(u=>r.value="todos",["prevent"])),class:$(["!py-0.5 text-sm",{"btn-2":r.value=="todos","btn-3 hover:bg-gray-200 hover:text-blue-500":r.value!="todos"}])}," Todos ",2),e("button",{onClick:y[1]||(y[1]=S(u=>r.value="tasks",["prevent"])),class:$(["!py-0.5 text-sm",{"btn-2":r.value=="tasks","btn-3 hover:bg-gray-200 hover:text-blue-500":r.value!="tasks"}])}," Tasks ",2)]),r.value=="todos"?(a(),R(ts,{key:0})):T("",!0),r.value=="tasks"?(a(),R(Yt,{key:1})):T("",!0)]),e("div",hn,[e("div",_n,[D(Qs)]),e("div",kn,[D(vn)]),e("div",wn,[D(Xt)])])])]))}},Xn={__name:"DashBoard",setup(_){const r=ge(),p=oe(),{userDashboard:g}=X(p),{user:c}=X(r),y=M(()=>{var n;return["admin","super_admin","developer"].includes((n=c==null?void 0:c.value)==null?void 0:n.role)}),u=B(null);return Ce(async()=>{var t,o;c.value||await r.fetchUser(),await p.fetchUserDashboardData(),y.value&&await p.fetchAdminDashboardData();const n=(o=(t=g.value)==null?void 0:t.notices)==null?void 0:o.find(b=>!b.user_feedback);n&&(u.value=n)}),(n,t)=>y.value&&k(r).isAdminMood?(a(),R(vt,{key:0})):(a(),R($n,{key:1}))}};export{Xn as default};
