import{u as I,b as P,r as f,x as T,z as R,c as p,o as m,a as t,f as $,q as x,k as a,h as c,v as z,j as l,t as n,i as J}from"./index-CT_RSInc.js";import{_ as O}from"./AttendanceTable-B0nMzSYR.js";import{_ as G}from"./EmployeeFilter-Dhmt1BTl.js";import{L as K}from"./LoaderView-Diwbo_ea.js";import{u as Q}from"./attendance-Ble_95mm.js";import{u as X}from"./user-DBrQSz22.js";import"./MultiselectDropdown-IXzeN2Or.js";import"./company-BtydAo-N.js";import"./department-0mV3E6aV.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const Y={class:"px-4 space-y-4"},Z={class:"w-full flex flex-wrap gap-4 items-center md:w-auto"},h={key:0,class:"grid md:grid-cols-2 gap-4 text-sm"},ee={class:"card-bg p-4 gap-1"},te={class:"grid md:grid-cols-2"},le={class:"card-bg p-4 gap-1"},ne={class:"flex justify-between items-center"},se={class:"grid md:grid-cols-2"},oe={key:1},ae={key:3,class:"space-y-4"},ke={__name:"EmployeeAttendance",setup(re){const y=I(),r=P(),o=Q(),k=X(),s=f(null),d=f(r.query.date||o.selectedMonth),i=f({company_id:r.query.company_id||"",department_id:r.query.department_id||"all",type:r.query.type||"all",employee_id:r.query.employee_id||"",category:""}),j=async u=>{u?(await k.fetchUser(u),s.value=k.user):s.value=null},g=async()=>{i.value.employee_id&&d.value&&await o.getMonthlyAttendanceByShift(i.value.employee_id,d.value)};T(d,u=>{y.replace({query:{...r.query,date:u}}),g()}),T(()=>i.value.employee_id,async(u,e)=>{u&&u!==e&&(await j(u),await g())});const H=()=>y.go(-1),W=()=>{y.replace({query:{...r.query,company_id:i.value.company_id,department_id:i.value.department_id,type:i.value.type,employee_id:i.value.employee_id}})};return(u,e)=>{var _,A,w,q,b,D,N,S,B,C,E,L,M,U,V;const F=R("router-link");return m(),p("div",Y,[t("div",{class:"flex items-center justify-between gap-2"},[t("button",{class:"btn-3",onClick:H},e[2]||(e[2]=[t("i",{class:"far fa-arrow-left"},null,-1),t("span",{class:"hidden md:flex"},"Back",-1)])),e[3]||(e[3]=t("h1",{class:"title-md md:title-lg flex-wrap text-center"},"Monthly Attendance",-1)),e[4]||(e[4]=t("div",null,null,-1))]),t("div",Z,[x(G,{modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=v=>i.value=v),"initial-value":a(r).query,onFilterChange:W},null,8,["modelValue","initial-value"]),t("div",null,[c(t("input",{id:"monthSelect",type:"month","onUpdate:modelValue":e[1]||(e[1]=v=>d.value=v),onChange:g,class:"input-1"},null,544),[[z,d.value]])])]),s.value?(m(),p("div",h,[t("div",ee,[e[14]||(e[14]=t("h2",{class:"title-md"},"Selected Employee Info",-1)),e[15]||(e[15]=t("hr",null,null,-1)),t("div",te,[t("p",null,[e[5]||(e[5]=t("strong",null,"Name:",-1)),l(" "+n(s.value.name),1)]),t("p",null,[e[6]||(e[6]=t("strong",null,"Designation:",-1)),l(" "+n(((_=s.value.designation)==null?void 0:_.title)||"N/A"),1)]),t("p",null,[e[7]||(e[7]=t("strong",null,"Department:",-1)),l(" "+n(((A=s.value.department)==null?void 0:A.name)||"N/A"),1)]),t("p",null,[e[8]||(e[8]=t("strong",null,"Company:",-1)),l(" "+n(((w=s.value.company)==null?void 0:w.name)||"N/A"),1)]),t("p",null,[e[9]||(e[9]=t("strong",null,"Phone:",-1)),l(" "+n(s.value.phone),1)]),t("p",null,[e[10]||(e[10]=t("strong",null,"Email:",-1)),l(" "+n(s.value.email||"N/A"),1)]),t("p",null,[e[11]||(e[11]=t("strong",null,"Employee ID :",-1)),l(" "+n(s.value.employee_id||"N/A"),1)]),t("p",null,[e[12]||(e[12]=t("strong",null,"Joining Date :",-1)),l(" "+n(s.value.joining_date||"N/A"),1)]),t("p",null,[e[13]||(e[13]=t("strong",null,"Employee ID :",-1)),l(" "+n(s.value.blood||"N/A"),1)])])]),t("div",le,[t("div",ne,[e[17]||(e[17]=t("h2",{class:"title-md"},"Attendance Summary",-1)),x(F,{to:{name:"MonthWiseApplicationLog",query:{...a(r).query}},class:"btn-2",target:"_blank",rel:"noopener noreferrer"},{default:J(()=>e[16]||(e[16]=[l(" Application History ")])),_:1,__:[16]},8,["to"])]),e[24]||(e[24]=t("hr",null,null,-1)),t("div",se,[t("p",null,[e[18]||(e[18]=t("strong",null,"Total Working Days:",-1)),l(" "+n((b=(q=a(o))==null?void 0:q.summary)==null?void 0:b.total_working_days),1)]),t("p",null,[e[19]||(e[19]=t("strong",null,"Present Days:",-1)),l(" "+n((N=(D=a(o))==null?void 0:D.summary)==null?void 0:N.total_present_days),1)]),t("p",null,[e[20]||(e[20]=t("strong",null,"Absent Days:",-1)),l(" "+n((B=(S=a(o))==null?void 0:S.summary)==null?void 0:B.total_absent_days),1)]),t("p",null,[e[21]||(e[21]=t("strong",null,"Late Days:",-1)),l(" "+n((E=(C=a(o))==null?void 0:C.summary)==null?void 0:E.total_late_days),1)]),t("p",null,[e[22]||(e[22]=t("strong",null,"Total Working Hours:",-1)),l(" "+n((M=(L=a(o))==null?void 0:L.summary)==null?void 0:M.total_working_hours),1)]),t("p",null,[e[23]||(e[23]=t("strong",null,"Total Overtime Hours:",-1)),l(" "+n((V=(U=a(o))==null?void 0:U.summary)==null?void 0:V.total_overtime_hours),1)])])])])):(m(),p("div",oe,e[25]||(e[25]=[t("p",{class:"text-gray-400 text-center text-2xl italic"},"Select an employee, please.",-1)]))),a(o).isLoading?(m(),$(K,{key:2})):(m(),p("div",ae,[x(O,{logs:a(o).monthlyLogs},null,8,["logs"])]))])}}};export{ke as default};
