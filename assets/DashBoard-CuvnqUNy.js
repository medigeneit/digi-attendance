const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LeaveApplicationModal-GgTmHCkN.js","assets/index-BvqWzmTV.js","assets/index-B7EiVbu5.css","assets/ApprovalItem-DFy-0kuD.js","assets/AcceptAndRejectHandler-BRvEASBO.js","assets/LoaderView-COdjIr2u.js","assets/_plugin-vue_export-helper-DlAUqK2U.js","assets/ShareComponent-B1GvGuba.js","assets/leave-application-CRIjRyRu.js","assets/LeaveApplicationModal-B7WJltA7.css","assets/ShortLeaveDetailsModal-ykyQheq2.js","assets/ScreenshotCapture-CrCid4Iq.js","assets/short-leave-D_4wd98C.js","assets/ShortLeaveDetailsModal-D4avNQ1k.css","assets/ManualAttendanceDetailsModal-BVVifazH.js","assets/manual-attendance-So-3jp02.js","assets/ManualAttendanceDetailsModal-MS8n2gFL.css","assets/ShiftExchangeDetailsModal-D9lNSPPL.js","assets/exchange-CN5PZEr0.js","assets/ShiftExchangeDetailsModal-BlZsJzAI.css","assets/OffdayExchangeDetailsModal-DWtYc-Zs.js","assets/OffdayExchangeDetailsModal-jTt80Glg.css"])))=>i.map(i=>d[i]);
import{g as ge,D as Z,x as w,p as me,c as d,o,d as D,l as M,a as e,b as T,t as m,m as C,E as $e,w as S,s as $,j as L,F as E,e as I,i as P,R as Ye,G as De,r as B,h as Ce,q as J,k as X,H as Me,f as Le,u as be,I as ne,n as We,J as ie,K as ze,_ as ae}from"./index-BvqWzmTV.js";import{u as oe}from"./user-BkizvUuX.js";import{L as He}from"./LoaderView-COdjIr2u.js";import{_ as Ke}from"./SearchInput-dVF9eU7x.js";import{o as ve,g as pe,a as ye,b as Ge,c as Je}from"./datetime-Du_mcDA9.js";import{m as Xe}from"./task-tree-wODDhwOu.js";import{u as Ze}from"./useTaskStore-DzfxZ6Af.js";import{_ as Qe,a as et}from"./TodoSection-BTVPeG_4.js";import{_ as tt}from"./TaskTreeViewWithSubTable-BgjD1g0_.js";import{O as st}from"./OverlyModal-Cl0Wx0ac.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./requirement-z4F0XhrW.js";import"./useTodoDateStore-S2VEDdHo.js";import"./url-CePbr-gY.js";import"./TodoItemCard-rcHdz0xm.js";import"./DepartmentChip-BOpc-mhP.js";import"./UserChip-BUwSfv28.js";import"./useTodoStore-D2JvtlpJ.js";import"./DraggableList.vue_vue_type_script_setup_true_lang-CCe1Er9R.js";import"./TodoCreateEditShow-qTuYlVU4.js";import"./TaskSelectionInput-zoPfQWCy.js";import"./TaskTitle-BKj5_Ld8.js";import"./TaskUrgentBadge-BDVDS7qw.js";import"./TaskAssignedUsers-Bad4YJZF.js";import"./TaskIsClosedBadge-CvV8gQhA.js";import"./TaskSupervisorAndEmployee-DoixSvCr.js";const nt={class:"grid gap-4 md:grid-cols-3 mt-4 px-4 container mx-auto"},at={class:"text-3xl"},ot={class:"text-3xl"},lt={class:"text-3xl"},rt={class:"text-3xl"},it={class:"text-3xl"},dt={class:"text-3xl"},ut={class:"text-3xl"},ct={class:"text-3xl"},pt={class:"text-3xl"},yt={class:"text-3xl"},mt={class:"text-3xl"},vt={__name:"DashboardAdminView",setup(_){const c=oe();ge();const{dashboardInfo:v,selectedDate:b}=Z(c),f=w(()=>new Date);return(x,y)=>{const l=me("RouterLink");return o(),d("div",nt,[D(l,{to:{name:"TodayAttendanceReport",query:{status:"all"}},class:"main-button"},{default:M(()=>{var t;return[e("span",at,m((t=C(v))==null?void 0:t.totalUsers),1),y[0]||(y[0]=T(" Total Employees "))]}),_:1,__:[0]}),D(l,{to:{name:"TodayAttendanceReport",query:{status:"Present"}},class:"main-button"},{default:M(()=>{var t;return[e("span",ot,m((t=C(v))==null?void 0:t.todayPresents),1),y[1]||(y[1]=T(" Today Present "))]}),_:1,__:[1]}),D(l,{to:{name:"TodayAttendanceReport",query:{status:"Absent"}},class:"main-button"},{default:M(()=>{var t;return[e("span",lt,m((t=C(v))==null?void 0:t.todayAbsents),1),y[2]||(y[2]=T(" Today Absent "))]}),_:1,__:[2]}),D(l,{to:{name:"LeaveApplicationsForDay",query:{applicationType:"today"}},class:"main-button"},{default:M(()=>{var t;return[e("span",rt,m((t=C(v))==null?void 0:t.todayLeaves),1),y[3]||(y[3]=T(" Today Leave "))]}),_:1,__:[3]}),D(l,{to:{name:"LeaveApplicationsForDay",query:{applicationType:"tomorrow"}},class:"main-button"},{default:M(()=>{var t;return[e("span",it,m((t=C(v))==null?void 0:t.tomorrowLeaves),1),y[4]||(y[4]=T(" Tomorrow Leave "))]}),_:1,__:[4]}),D(l,{to:{name:"DateWiseShortLeaveList",query:{date:C(b)}},class:"main-button"},{default:M(()=>{var t;return[e("span",dt,m((t=C(v))==null?void 0:t.todayShortLeaves),1),y[5]||(y[5]=T(" Today Short Leaves "))]}),_:1,__:[5]},8,["to"]),D(l,{to:{name:"DailyLateAttendanceReport",query:{date:C(b)}},class:"main-button"},{default:M(()=>{var t;return[e("span",ut,m((t=C(v))==null?void 0:t.todayLateEntries),1),y[6]||(y[6]=T(" Today Late Report "))]}),_:1,__:[6]},8,["to"]),D(l,{to:{name:"PreviousAfterApplicationList",query:{applicationType:"prev",date:C(b)}},class:"main-button"},{default:M(()=>{var t;return[e("span",ct,m((t=C(v))==null?void 0:t.prevWeekLeaves),1),y[7]||(y[7]=T(" Leave history of previous week "))]}),_:1,__:[7]},8,["to"]),D(l,{to:{name:"PreviousAfterApplicationList",query:{applicationType:"after",date:C(b)}},class:"main-button"},{default:M(()=>{var t;return[e("span",pt,m((t=C(v))==null?void 0:t.nextWeekLeaves),1),y[8]||(y[8]=T(" Upcoming leaves "))]}),_:1,__:[8]},8,["to"]),D(l,{to:{name:"TodoList",query:{day:f.value.getDate(),month:f.value.getMonth()+1,year:f.value.getFullYear(),type:"day-view"}},class:"main-button"},{default:M(()=>{var t;return[e("span",yt,m((t=C(v))==null?void 0:t.todayTotalTodos),1),y[9]||(y[9]=T(" Today Todos "))]}),_:1,__:[9]},8,["to"]),D(l,{to:{name:"TodoList",query:{month:f.value.getMonth()+1,year:f.value.getFullYear(),type:"month-view"}},class:"main-button"},{default:M(()=>{var t;return[e("span",mt,m((t=C(v))==null?void 0:t.thisMonthTotalTodos),1),y[10]||(y[10]=T(" Todos In This Month "))]}),_:1,__:[10]},8,["to"])])}}},fe=(_,c,v,b)=>{const f=new Date(b,v-1,c);return _.filter(x=>{const y=x.deadline?new Date(x.deadline):null,l=ve(new Date);if(x.assigned_at){const t=ve(new Date(x.assigned_at));if(f<t)return!1;let u=null;return x.completed_at&&(u=ve(new Date(x.completed_at))),!(u&&u<f||y&&y<f&&f>l)}return!1}).map(x=>{let y=!1;return x.deadline&&(y=new Date(x.deadline)<f),{...x,deadline_crossed:y}})},ft={class:"px-4 py-2 flex items-center bg-gray-50 group"},xt=["disabled"],gt={class:"ml-4 md:ml-auto flex items-center gap-2"},bt=["value"],ht=$e({__name:"DailyTaskHeading",props:{selectedDay:{type:String,required:!0},loading:{type:Boolean,default:!1}},emits:["change",,"reloadClick","monthWiseButtonClick"],setup(_,{emit:c}){const v=_,b=c;function f(){b("change",pe(new Date))}function x(){const l=new Date(v.selectedDay);l.setDate(l.getDate()+1),b("change",pe(l))}function y(){const l=new Date(v.selectedDay);l.setDate(l.getDate()-1),b("change",pe(l))}return(l,t)=>(o(),d("div",ft,[t[4]||(t[4]=e("h2",{class:"leading-none font-semibold text-lg"},"Daily Task",-1)),e("button",{class:"btn-3 mx-4 h-7",onClick:t[0]||(t[0]=S(u=>b("monthWiseButtonClick"),["prevent"]))},"Month Wise"),e("button",{class:"btn-3 mx-4 h-7",onClick:S(f,["prevent"])},"Today"),e("button",{class:$(["btn-3 px-2 py-2 mx-4 size-7 disabled:text-gray-300 disabled:border-gray-300",{"animate-spin text-gray-300 border-gray-300 !bg-opacity-0":_.loading}]),onClick:t[1]||(t[1]=S(u=>b("reloadClick"),["prevent"])),disabled:_.loading},t[3]||(t[3]=[e("i",{class:"fas fa-redo-alt"},null,-1)]),10,xt),e("div",gt,[e("button",{class:"btn-2 h-7",onClick:S(y,["prevent"])},"Previous Day"),e("button",{class:"btn-2 h-7",onClick:S(x,["prevent"])},"Next Day"),e("input",{type:"date",value:_.selectedDay,onInput:t[2]||(t[2]=u=>{var h;return b("change",(h=u.target)==null?void 0:h.value)}),class:"border px-2 rounded"},null,40,bt)])]))}}),_t={class:"px-4 py-2 flex items-center bg-gray-50 group"},kt=["disabled"],wt={class:"ml-4 md:ml-auto flex items-center gap-2"},$t=["value"],Dt=$e({__name:"MonthlyTaskHeading",props:{selectedMonth:{type:String,required:!0},loading:{type:Boolean,default:!1}},emits:["reloadClick","dayWiseButtonClick","change"],setup(_,{emit:c}){const v=_,b=c;function f(){b("change",ye(new Date))}function x(){var h;const[l,t]=(h=v.selectedMonth)==null?void 0:h.split("-").map(Number),u=new Date(l,t,1);u.setMonth(u.getMonth()),b("change",ye(u))}function y(){var h;const[l,t]=(h=v.selectedMonth)==null?void 0:h.split("-").map(Number),u=new Date(l,t,1);u.setMonth(u.getMonth()-2),b("change",ye(u))}return(l,t)=>(o(),d("div",_t,[t[4]||(t[4]=e("h2",{class:"leading-none font-semibold text-lg"},"Monthly Task",-1)),e("button",{class:"btn-3 mx-4 h-7",onClick:t[0]||(t[0]=S(u=>b("dayWiseButtonClick"),["prevent"]))},"Day Wise"),e("button",{class:"btn-3 mx-4 h-7",onClick:S(f,["prevent"])},"Current Month"),e("button",{class:$(["btn-3 px-2 py-2 mx-4 size-7 disabled:text-gray-300 disabled:border-gray-300",{"animate-spin text-gray-300 border-gray-300 !bg-opacity-0":_.loading}]),onClick:t[1]||(t[1]=S(u=>b("reloadClick"),["prevent"])),disabled:_.loading},t[3]||(t[3]=[e("i",{class:"fas fa-redo-alt"},null,-1)]),10,kt),e("div",wt,[e("button",{class:"btn-2 h-7",onClick:S(y,["prevent"])},"Previous Month"),e("button",{class:"btn-2 h-7",onClick:S(x,["prevent"])},"Next Month"),e("input",{type:"month",value:_.selectedMonth,onInput:t[2]||(t[2]=u=>{var h;return b("change",(h=u.target)==null?void 0:h.value)}),class:"border px-2 rounded"},null,40,$t)])]))}}),Ct={key:0,class:"space-y-6 py-2"},Mt={key:0,class:"fad fa-folder text-xs mr-2"},Lt={key:1,class:"fad fa-file-alt text-xs mr-2"},At={key:2,class:"text-center w-full mt-4 text-xs text-gray-600"},xe={__name:"TaskListOnDay",props:{isCurrentMonth:{type:Boolean,default:!1},tasks:{type:Array,default:()=>[]},limit:{type:Number,default:null},tree:{type:Boolean,default:!1}},emits:["clickOnMore"],setup(_,{emit:c}){const v=_,b=c,f=w(()=>{var x;return v.limit?((x=v==null?void 0:v.tasks)==null?void 0:x.slice(0,v.limit))||[]:[...v.tasks]});return(x,y)=>(o(),d("div",null,[_.tree?(o(),d("div",Ct,[(o(!0),d(E,null,I(f.value,(l,t)=>(o(),P(tt,{"hide-buttons":"","hide-assigned-users":"",task:l,key:l.id,index:t,class:"shadow hover:shadow-md border border-blue-300 rounded-md *:border-none"},null,8,["task","index"]))),128))])):(o(),d("ul",{key:1,class:$({"text-gray-500 group-hover:text-gray-900":!_.isCurrentMonth})},[(o(!0),d(E,null,I(f.value,l=>(o(),d("li",{class:"mb-2",key:l.id},[D(C(Ye),{to:`/tasks/${l.id}`,target:"_blank",class:"flex items-center hover:underline hover:text-blue-600"},{default:M(()=>[l.children_task_count>0?(o(),d("i",Mt)):L("",!0),l.children_task_count==0?(o(),d("i",Lt)):L("",!0),e("span",{class:$(["line-clamp-1",{"text-red-800":l.deadline_crossed}])},m(l.title),3)]),_:2},1032,["to"])]))),128))],2)),_.tasks.length-f.value.length>0?(o(),d("div",At,[e("button",{onClick:y[0]||(y[0]=S(l=>b("clickOnMore",l),["prevent"])),class:"text-blue-600 hover:underline"}," +"+m(_.tasks.length-f.value.length)+" More Tasks ",1)])):L("",!0)]))}},Tt={class:"relative"},St={class:"ml-auto"},Rt=["onClick"],Nt={key:0,class:"absolute inset-0 bg-gray-300 bg-opacity-90"},Pt={class:"absolute inset-16 bg-white border border-blue-500 rounded-md z-20 overflow-y-auto"},Et={class:"text-lg font-semibold mb-4 sticky top-0 border-b border-blue-200 px-4 z-30 py-3 bg-white flex items-center"},jt={__name:"TaskInMonth",props:{month:{type:String,required:!0,validator:_=>/^\d{4}-(0[1-9]|1[0-2])$/.test(_)},tasks:{type:Array,required:!0,default:()=>[]}},setup(_){const c=De({day:null,month:null,year:null});function v(l){l.stopPropagation(),c.day=null,c.month=null,c.year=null}function b(l,t,u,h){l.stopPropagation(),c.day=t,c.month=u,c.year=h}const f=(l,t,u)=>{const h=new Date;return l===h.getDate()&&t===h.getMonth()+1&&u===h.getFullYear()},x=(l,t,u)=>l===c.day&&t===c.month&&u===c.year,y=(l,t,u,h)=>{const A=f(l,t,u);return{"bg-green-100 text-green-900 border-blue-500 border-2 scale-105 z-10":A,"border-r border-t hover:border border-blue-200  hover:scale-105 hover:z-20 hover:bg-blue-50":!A,"bg-gray-50":!h}};return(l,t)=>(o(),d("div",Tt,[_.month?(o(),P(Qe,{key:0,month:_.month,class:"border-t border-blue-200/50 relative"},{date:M(({day:u,month:h,year:A,isCurrentMonth:r})=>[e("div",{tabindex:"0",class:$(["transition origin-center p-2 outline-blue-600 outline-1 cursor-pointer",y(u,h,A,r)])},[e("div",{class:$(["font-bold w-full flex items-center",{"text-gray-300":!r}])},[e("div",null,m(u),1),e("div",St,[x(u,h,A)?L("",!0):(o(),d("button",{key:0,class:"btn-icon",onClick:S(s=>b(s,u,h,A),["prevent"])},t[0]||(t[0]=[e("i",{class:"fas fa-expand-arrows text-gray-400 hover:text-gray-600"},null,-1)]),8,Rt))])],2),D(xe,{"is-current-month":r,tasks:C(fe)(_.tasks,u,h,A),limit:3,class:"text-xs mt-4",onClickOnMore:s=>b(s,u,h,A)},null,8,["is-current-month","tasks","onClickOnMore"])],2)]),"calender-bottom":M(()=>[c.day?(o(),d("div",Nt,[e("div",Pt,[e("div",Et,[T(" Tasks for "+m(c.day)+"/"+m(c.month)+"/"+m(c.year)+" ",1),e("button",{class:"ml-auto",type:"button",onClick:S(v,["prevent"])},t[1]||(t[1]=[e("i",{class:"fas fa-times"},null,-1)]))]),D(xe,{class:"p-4","is-current-month":l.isCurrentMonth,tasks:C(fe)(_.tasks,c.day,c.month,c.year),tree:!0},null,8,["is-current-month","tasks"])])])):L("",!0)]),_:1},8,["month"])):L("",!0)]))}},qt={class:"bg-opacity-90 relative"},Bt={class:"rounded-md z-20"},Ot={class:"text-md sticky top-0 border-b px-4 z-30 py-3 bg-white flex items-center shadow"},It={class:"flex justify-between items-center gap-6 w-full"},Ut={key:0,class:"text-blue-800 bg-blue-100 rounded-full border px-4 py-0.5 text-sm"},Vt={key:1,class:"text-blue-800 bg-blue-100 rounded-full border px-4 py-0.5 text-sm"},Ft={class:"ml-auto flex items-center gap-2"},Yt={key:0,class:"w-32 relative h-8"},Wt={__name:"DailyTask",setup(_){const c=De({day:null,month:null,year:null}),v=B(),b=B(),f=B("loading"),x=Ze(),y=ge(),l=B(""),t=B("day-wise"),u=B("not-completed");Ce(()=>{v.value=pe(new Date),b.value=ye(new Date)}),J(v,s=>{const[a,i,R]=s.split("-").map(Number);c.day=R,c.month=i,c.year=a}),J(b,s=>{const[a,i]=s.split("-").map(Number);c.day=1,c.month=i,c.year=a}),J(()=>c.month,async()=>{f.value="loading",await h(),f.value=""}),J(t,s=>{if(s=="month-wise"){const[a,i]=v.value.split("-");b.value=`${a}-${i}`}});async function h(){await x.fetchMyTasks()}const A=async()=>{f.value="loading",await h(),f.value=""},r=w(()=>{var i,R;const s=N=>{var j,U;return l.value?(U=N==null?void 0:N.toUpperCase())==null?void 0:U.includes((j=l.value)==null?void 0:j.toUpperCase()):!0},a=t.value=="day-wise"?{"user-ids":(i=y==null?void 0:y.user)==null?void 0:i.id,status:u.value}:{"user-ids":(R=y==null?void 0:y.user)==null?void 0:R.id};return Xe(fe(x.tasks,c.day,c.month,c.year),a).filter(N=>{var j;return s(N.title)||((j=N.children_tasks)==null?void 0:j.some(U=>s(U==null?void 0:U.title)))}).map(N=>({...N,children_tasks:N.children_tasks.filter(j=>s(j.title))}))});return(s,a)=>(o(),d("div",null,[t.value=="day-wise"?(o(),P(ht,{key:0,loading:f.value=="loading","selected-day":v.value,onChange:a[0]||(a[0]=i=>v.value=i),onReloadClick:A,onMonthWiseButtonClick:a[1]||(a[1]=i=>t.value="month-wise")},null,8,["loading","selected-day"])):L("",!0),t.value=="month-wise"?(o(),P(Dt,{key:1,loading:f.value=="loading","selected-month":b.value,onChange:a[2]||(a[2]=i=>b.value=i),onDayWiseButtonClick:a[3]||(a[3]=i=>t.value="day-wise"),onReloadClick:A},null,8,["loading","selected-month"])):L("",!0),e("div",qt,[e("div",Bt,[e("div",Ot,[e("div",It,[t.value=="day-wise"?(o(),d("div",Ut,m(C(Ge)(v.value)),1)):L("",!0),t.value=="month-wise"?(o(),d("div",Vt,m(C(Je)(b.value)),1)):L("",!0),e("div",Ft,[t.value=="day-wise"?(o(),d("div",Yt,[a[7]||(a[7]=e("label",{class:"absolute text-xs left-3 -top-1.5 bg-slate-100 text-blue-500"},"Status",-1)),X(e("select",{"onUpdate:modelValue":a[4]||(a[4]=i=>u.value=i),class:"h-8 text-xs px-2 text-gray-600 border-2 border-gray-400 rounded-md w-full"},a[6]||(a[6]=[e("option",{value:""},"--ALL TASKS--",-1),e("option",{value:"not-completed"},"Not Completed",-1)]),512),[[Me,u.value]])])):L("",!0),D(Ke,{modelValue:l.value,"onUpdate:modelValue":a[5]||(a[5]=i=>l.value=i),class:"w-full md:w-48 md:ml-auto h-8","debounce-time":0},null,8,["modelValue"])])])]),t.value=="day-wise"?(o(),P(xe,{key:0,class:"p-4 overflow-y-auto",tasks:r.value,tree:!0},null,8,["tasks"])):t.value=="month-wise"?(o(),P(jt,{key:1,tasks:r.value||[],month:b.value,class:"bg-gray-50"},null,8,["tasks","month"])):L("",!0)]),f.value==="loading"?(o(),P(He,{key:0,class:"absolute inset-0 flex items-center justify-center z-20 bg-opacity-70"})):L("",!0)])]))}},zt={class:"bg-white shadow-md rounded-lg"},Ht={class:"flex flex-wrap items-center justify-between gap-2 py-2 px-4"},Kt={key:0,class:"flex items-center gap-2"},Gt=["value"],Jt={class:"overflow-x-auto shadow-md min-h-max"},Xt={class:"min-w-full text-sm text-left text-gray-500 table-fixed"},Zt={class:"text-xs"},Qt={class:"text-sm font-semibold text-blue-800"},es={__name:"DashboardLeaveBalance",setup(_){const c=oe(),{userDashboard:v}=Z(c),b=B("all"),f=new Date().getFullYear(),x=w(()=>{var r;return((r=v.value)==null?void 0:r.leave_balance)??[]}),y=r=>Number.isInteger(r)&&r>=1990&&r<=f+1,l=r=>{if(!r||typeof r!="object")return null;const s=[r.year,r.leave_year,r.leaveYear];for(const a of s){const i=Number(a);if(y(i))return i}return null},t=r=>!r||typeof r!="object"?null:r.balances||r.items||r.leave_balance||null,u=w(()=>{const r=x.value,s=new Set;return Array.isArray(r)?r.forEach(a=>{const i=l(a);i&&s.add(i);const R=t(a);Array.isArray(R)&&(i&&s.add(i),R.forEach(N=>{const j=l(N);j&&s.add(j)}))}):r&&typeof r=="object"&&Object.keys(r).forEach(a=>{const i=Number(a);y(i)&&s.add(i)}),Array.from(s).sort((a,i)=>i-a)}),h=r=>Array.isArray(r)?r.some(s=>Array.isArray(t(s)))?r.flatMap(s=>t(s)||[]):r:r&&typeof r=="object"?Object.values(r).flatMap(s=>Array.isArray(s)?s:[]):[],A=w(()=>{const r=x.value,s=b.value;if(!r)return[];if(s==="all")return h(r);const a=Number(s);if(!y(a))return h(r);if(Array.isArray(r)){const i=r.find(R=>l(R)===a&&Array.isArray(t(R)));return i?t(i)||[]:r.filter(R=>l(R)===a)}if(typeof r=="object"){const i=r[String(a)];return Array.isArray(i)?i:[]}return[]});return(r,s)=>(o(),d("div",zt,[e("div",Ht,[s[3]||(s[3]=e("h2",{class:"text-xl font-semibold"},"Leave Balance",-1)),u.value.length?(o(),d("div",Kt,[s[2]||(s[2]=e("span",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wide"},"Year",-1)),X(e("select",{"onUpdate:modelValue":s[0]||(s[0]=a=>b.value=a),class:"input-1 py-1 px-2 rounded text-xs font-semibold uppercase tracking-wide text-slate-500 border-slate-200 bg-slate-50"},[s[1]||(s[1]=e("option",{value:"all"},"All",-1)),(o(!0),d(E,null,I(u.value,a=>(o(),d("option",{key:a,value:a},m(a),9,Gt))),128))],512),[[Me,b.value]])])):L("",!0)]),e("div",Jt,[e("table",Xt,[e("thead",null,[e("tr",Zt,[s[4]||(s[4]=e("th",{class:"px-2 py-1 font-semibold text-gray-900 border bg-gray-50"},null,-1)),(o(!0),d(E,null,I(A.value,a=>(o(),d("th",{class:"px-4 text-center py-1 font-semibold text-gray-900 border bg-gray-50 w-40",key:a.id||a.name||a.leave_type},m(a.name),1))),128))])]),e("tbody",null,[e("tr",null,[s[5]||(s[5]=e("td",{class:"px-4 py-4 font-medium text-gray-900 border text-xs"},"Total",-1)),(o(!0),d(E,null,I(A.value,a=>(o(),d("td",{class:"px-4 text-center py-3 font-medium text-gray-900 border",key:a.id||a.name||a.leave_type},m(a.annual_quota),1))),128))]),e("tr",null,[s[6]||(s[6]=e("td",{class:"px-4 py-3 font-medium text-gray-900 border text-xs"},"Used",-1)),(o(!0),d(E,null,I(A.value,a=>(o(),d("td",{class:"px-4 text-center py-4 font-medium text-gray-900 border",key:a.id||a.name||a.leave_type},m(a.used_days),1))),128))]),e("tr",Qt,[s[7]||(s[7]=e("td",{class:"px-4 py-3 border text-xs"},"Balance",-1)),(o(!0),d(E,null,I(A.value,a=>(o(),d("td",{class:"px-4 text-center py-4 border",key:a.id||a.name||a.leave_type},m(a.remaining_days),1))),128))])])])])]))}},ts={class:"flex items-center gap-2 mr-2"},ss=["onClick"],ns=["onClick"],as={__name:"DashboardMyTodoList",setup(_){const c=Le(),v=be();function b(f){v.push({query:{...c.query,"todos[type]":f.type,"todos[year]":f.year,"todos[month]":f.month,"todos[day]":f.day}})}return(f,x)=>{const y=me("RouterLink");return o(),P(et,{type:C(c).query["todos[type]"],year:C(c).query["todos[year]"],month:C(c).query["todos[month]"],day:C(c).query["todos[day]"],userRole:"employee",onChangeInput:b},{beforeHeader:M(()=>x[0]||(x[0]=[e("h2",{class:"text-md font-medium"},"Todo List",-1)])),typeSelection:M(({types:l,changeType:t,selected:u})=>{var h,A,r,s;return[e("div",ts,[e("button",{onClick:S(a=>{var i;return t((i=l[0])==null?void 0:i.value)},["prevent"]),class:$(["rounded text-sm h-[32px] w-20",(u==null?void 0:u.type)==((h=l[0])==null?void 0:h.value)?"btn-2":"btn-3"])},m((A=l[0])==null?void 0:A.label),11,ss),e("button",{onClick:S(a=>{var i;return t((i=l[1])==null?void 0:i.value)},["prevent"]),class:$(["rounded text-sm h-[32px] w-20",(u==null?void 0:u.type)==((r=l[1])==null?void 0:r.value)?"btn-2 ":"btn-3"])},m((s=l[1])==null?void 0:s.label),11,ns),D(y,{to:"/my-personal-activity-report",class:"inline-flex items-center gap-2 rounded-md border border-sky-300 px-3 h-[32px] text-sm text-sky-700 bg-sky-50 hover:bg-sky-100 dark:border-sky-800 dark:text-sky-200 dark:bg-sky-900/20 dark:hover:bg-sky-900/40"},{default:M(()=>x[1]||(x[1]=[e("i",{class:"fas fa-tasks"},null,-1),e("span",{class:"hidden lg:inline"},"Personal Activity Report (PAR)",-1),e("span",{class:"inline lg:hidden"},"PAR",-1)])),_:1,__:[1]})])]}),_:1},8,["type","year","month","day"])}}},os={class:"bg-white shadow-sm rounded-xl p-3 sm:p-4"},ls=["aria-expanded"],rs={class:"flex items-center gap-2"},is={class:"text-[11px] rounded-full bg-yellow-100 text-gray-700 px-2 py-0.5"},ds={key:0,class:"text-xs italic text-center py-4 text-gray-500"},us={key:1,class:"py-2 space-y-1"},cs=["onClick"],ps={class:"min-w-0"},ys={class:"text-[13px] text-gray-900 truncate"},ms={class:"font-medium"},vs={class:"opacity-70"},fs={class:"truncate max-w-[10rem]"},xs={key:0,class:"inline-flex items-center gap-1 rounded-md border border-gray-200 bg-gray-50 px-1.5 py-0.5"},gs={key:0,class:"flex justify-center"},bs={class:"mt-4"},hs=["aria-expanded"],_s={class:"flex items-center gap-2"},ks={class:"text-[11px] rounded-full bg-yellow-100 text-gray-700 px-2 py-0.5"},ws={key:0,class:"text-xs italic text-center py-4 text-gray-500"},$s={key:1,class:"py-2 space-y-1"},Ds=["onClick"],Cs={class:"min-w-0"},Ms={class:"text-[13px] text-gray-900 truncate"},Ls={class:"font-medium"},As={class:"opacity-70"},Ts={key:0,class:"flex justify-center"},Ss={class:"mt-4"},Rs=["aria-expanded"],Ns={class:"flex items-center gap-2"},Ps={class:"text-[11px] rounded-full bg-yellow-100 text-gray-700 px-2 py-0.5"},Es={key:0,class:"text-xs italic text-center py-4 text-gray-500"},js={key:1,class:"py-2 space-y-1"},qs=["onClick"],Bs={class:"min-w-0"},Os={class:"text-[13px] text-gray-900 truncate"},Is={class:"font-medium"},Us={class:"opacity-70"},Vs={key:0,class:"flex justify-center"},Fs={class:"mt-4"},Ys=["aria-expanded"],Ws={class:"flex items-center gap-2"},zs={class:"text-[11px] rounded-full bg-yellow-100 text-gray-700 px-2 py-0.5"},Hs={key:0,class:"text-xs italic text-center py-4 text-gray-500"},Ks={key:1,class:"py-2 space-y-1"},Gs=["onClick"],Js={class:"min-w-0"},Xs={class:"text-[13px] text-gray-900 truncate"},Zs={class:"font-medium"},Qs={class:"opacity-70"},en={key:0,class:"flex justify-center"},K=5,de="inline-flex items-center rounded-full px-2 py-0.5 text-[11px] font-medium",ue="flex items-center justify-between gap-2",tn="text-[12px] text-gray-600 flex items-center gap-2 flex-wrap",ce="block w-full text-left rounded-md px-2.5 py-2 hover:bg-slate-50/70 focus:bg-slate-50/90 focus:outline-none transition",sn={__name:"DashboardRecentApplications",setup(_){const c=ne(()=>ae(()=>import("./LeaveApplicationModal-GgTmHCkN.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]))),v=ne(()=>ae(()=>import("./ShortLeaveDetailsModal-ykyQheq2.js"),__vite__mapDeps([10,1,2,3,4,5,6,11,7,12,13]))),b=ne(()=>ae(()=>import("./ManualAttendanceDetailsModal-BVVifazH.js"),__vite__mapDeps([14,1,2,3,4,5,6,7,15,16]))),f=ne(()=>ae(()=>import("./ShiftExchangeDetailsModal-D9lNSPPL.js"),__vite__mapDeps([17,1,2,3,4,5,6,11,7,18,19]))),x=ne(()=>ae(()=>import("./OffdayExchangeDetailsModal-DWtYc-Zs.js"),__vite__mapDeps([20,1,2,3,4,5,6,11,7,18,21]))),y=oe(),{userDashboard:l}=Z(y),t=w(()=>{var p;return((p=l.value)==null?void 0:p.lists)??{}}),u=w(()=>t.value.current_month_leave??[]),h=w(()=>t.value.short_leave??[]),A=w(()=>t.value.exchange??[]),r=w(()=>t.value.manual_attendance??[]),s=p=>p==="Pending"||p===null,a=w(()=>u.value.filter(p=>s(p==null?void 0:p.status)).length),i=w(()=>h.value.filter(p=>s(p==null?void 0:p.status)).length),R=w(()=>A.value.filter(p=>s(p==null?void 0:p.status)).length),N=w(()=>r.value.filter(p=>s(p==null?void 0:p.status)).length),j=w(()=>u.value.slice(0,K)),U=w(()=>h.value.slice(0,K)),Ae=w(()=>A.value.slice(0,K)),Te=w(()=>r.value.slice(0,K)),he=w(()=>Math.max(0,u.value.length-K)),_e=w(()=>Math.max(0,h.value.length-K)),ke=w(()=>Math.max(0,A.value.length-K)),we=w(()=>Math.max(0,r.value.length-K)),Se={null:{title:"Handover Waiting",cls:"bg-gray-100 text-gray-800 ring-1 ring-gray-200"},Pending:{title:"Pending",cls:"bg-amber-50 text-amber-700 ring-1 ring-amber-200"},Approved:{title:"Approved",cls:"bg-emerald-50 text-emerald-700 ring-1 ring-emerald-200"},Rejected:{title:"Rejected",cls:"bg-rose-50 text-rose-700 ring-1 ring-rose-200"}},Y=p=>Se[p??"null"]??{title:String(p||"Unknown"),cls:"bg-gray-100 text-gray-700 ring-1 ring-gray-200"},Re=p=>Array.isArray(p)?p.filter(n=>n==null?void 0:n.name).map(n=>`${n.name} (${(n==null?void 0:n.days)??0})`).join(", "):"",Q=B({open:!1,id:null}),ee=B({open:!1,id:null}),te=B({open:!1,id:null}),Ne=p=>{Q.value={open:!0,id:p}},Pe=p=>{ee.value={open:!0,id:p}},Ee=p=>{te.value={open:!0,id:p}},W=B({open:!1,id:null,type:null}),je=p=>{const n=(p==null?void 0:p.exchange_type)==="offday"?"offday":"shift";W.value={open:!0,id:p.id,type:n}},qe=w(()=>W.value.type==="offday"?x:f),Be=w(()=>`${W.value.type||"x"}-${W.value.id||"x"}`);function Oe(p){if(!p)return null;const n=String(p).trim();let k=n.match(/^(\d{4})-(\d{2})-(\d{2})$/);return k?new Date(+k[1],+k[2]-1,+k[3],0,0,0):(k=n.match(/^(\d{4})-(\d{2})-(\d{2})[ T](\d{2}):(\d{2})(?::(\d{2}))?$/),k?new Date(+k[1],+k[2]-1,+k[3],+k[4],+k[5],+(k[6]||0)):null)}function z(p){const n=Oe(p);return n?n.toLocaleDateString(void 0,{day:"2-digit",month:"short",year:"numeric"}):""}function Ie(p){const n=String(p||"").match(/^(\d{4})-(\d{2})-(\d{2})$/);return n?new Date(+n[1],+n[2]-1,+n[3],0,0,0):null}function Ue(p,n){const k=new Date(p);return k.setDate(k.getDate()+n),k}function Ve(p,n){return p&&n&&p.getFullYear()===n.getFullYear()&&p.getMonth()===n.getMonth()&&p.getDate()===n.getDate()}function le(p){const n=p.getFullYear(),k=String(p.getMonth()+1).padStart(2,"0"),g=String(p.getDate()).padStart(2,"0");return`${n}-${k}-${g}`}function Fe(p){const n=Array.isArray(p)?p.slice():[],k=q=>Array.from(new Set(q)).sort(),g=k(n.filter(q=>(q==null?void 0:q.leave_type_id)!=="weekend").map(q=>q.date).filter(Boolean)),V=k(n.filter(q=>(q==null?void 0:q.leave_type_id)==="weekend").map(q=>q.date).filter(Boolean)),F=[];let H=null,G=null;for(const q of g){const se=Ie(q);if(se){if(!H){H=G=se;continue}Ve(Ue(G,1),se)?G=se:(F.push({from:le(H),to:le(G)}),H=G=se)}}return H&&G&&F.push({from:le(H),to:le(G)}),{ranges:F,weekends:V,leaveCount:g.length}}const O=B({apps:!!a.value,short:!!i.value,exch:!!R.value,manual:!!N.value}),re=p=>{O.value[p]=!O.value[p]};return(p,n)=>{const k=me("RouterLink");return o(),d("div",os,[e("section",null,[e("header",{class:"flex items-center justify-between mb-1 cursor-pointer select-none",role:"button","aria-expanded":O.value.apps,onClick:n[1]||(n[1]=g=>re("apps")),tabindex:"0"},[n[14]||(n[14]=We('<div class="flex items-center gap-2"><i class="fas fa-file text-gray-600"></i><h2 class="text-sm font-semibold text-gray-900"> Applications <span class="ml-2 align-middle text-[10px] sm:text-[11px] inline-flex items-center gap-1 rounded-full bg-blue-50 text-blue-700 px-2 py-0.5"><i class="far fa-clock"></i> Latest </span></h2></div>',1)),e("div",rs,[e("span",is,m(a.value),1),D(k,{to:{name:"MyLeaveApplications"},class:"text-[11px] text-blue-700 hover:underline",onClick:n[0]||(n[0]=S(()=>{},["stop"]))},{default:M(()=>n[13]||(n[13]=[T(" See all ")])),_:1,__:[13]}),e("i",{class:$(["fas fa-chevron-down text-gray-600 transition-transform duration-200",O.value.apps?"rotate-180":""])},null,2)])],8,ls),X(e("div",null,[n[17]||(n[17]=e("hr",{class:"border-gray-100"},null,-1)),u.value.length===0?(o(),d("div",ds,"No applications")):(o(),d("div",us,[(o(!0),d(E,null,I(j.value,g=>(o(),d("button",{key:g.id,class:$(ce),onClick:V=>Ne(g.id)},[e("div",{class:$(ue)},[e("div",ps,[e("div",ys,[e("span",ms,"#"+m(g.id),1),e("span",vs," – "+m(Re(g.leave_type_counts)||"—"),1)]),e("div",{class:$(tn)},[(o(!0),d(E,null,I([Fe(g.json_data)],V=>(o(),d(E,{key:"info-"+g.id},[V.leaveCount>1?(o(!0),d(E,{key:0},I(V.ranges,(F,H)=>(o(),d("span",{key:H,class:"inline-flex items-center gap-1 rounded-md border border-gray-200 bg-gray-50 px-1.5 py-0.5"},[n[15]||(n[15]=e("i",{class:"far fa-calendar-minus"},null,-1)),e("span",fs,m(F.from!==F.to?z(F.from)+" – "+z(F.to):z(F.from)),1)]))),128)):(o(),d(E,{key:1},[V.ranges[0]?(o(),d("span",xs,[n[16]||(n[16]=e("i",{class:"far fa-calendar-day"},null,-1)),e("span",null,m(z(V.ranges[0].from)),1)])):L("",!0)],64))],64))),128))])]),e("span",{class:$([de,Y(g.status).cls])},m(Y(g.status).title),3)])],8,cs))),128)),he.value?(o(),d("div",gs,[D(k,{to:{name:"MyLeaveApplications"},class:"text-[12px] text-blue-700 hover:underline"},{default:M(()=>[T(" + "+m(he.value)+" more ",1)]),_:1})])):L("",!0)]))],512),[[ie,O.value.apps]])]),e("section",bs,[e("header",{class:"flex items-center justify-between mb-1 cursor-pointer select-none",role:"button","aria-expanded":O.value.short,onClick:n[3]||(n[3]=g=>re("short")),tabindex:"0"},[n[19]||(n[19]=e("div",{class:"flex items-center gap-2"},[e("i",{class:"fas fa-walking text-gray-600"}),e("h2",{class:"text-sm font-semibold text-gray-900"},"Short Leave")],-1)),e("div",_s,[e("span",ks,m(i.value),1),D(k,{to:{name:"MyShortLeaves"},class:"text-[11px] text-blue-700 hover:underline",onClick:n[2]||(n[2]=S(()=>{},["stop"]))},{default:M(()=>n[18]||(n[18]=[T(" See all ")])),_:1,__:[18]}),e("i",{class:$(["fas fa-chevron-down text-gray-600 transition-transform duration-200",O.value.short?"rotate-180":""])},null,2)])],8,hs),X(e("div",null,[n[20]||(n[20]=e("hr",{class:"border-gray-100"},null,-1)),h.value.length===0?(o(),d("div",ws,"No short leave")):(o(),d("div",$s,[(o(!0),d(E,null,I(U.value,g=>(o(),d("button",{key:g.id,class:$(ce),onClick:V=>Pe(g.id)},[e("div",{class:$(ue)},[e("div",Cs,[e("div",Ms,[e("span",Ls,m(z(g.date)),1),e("span",As," – "+m(g.type||"—"),1)])]),e("span",{class:$([de,Y(g.status).cls])},m(Y(g.status).title),3)])],8,Ds))),128)),_e.value?(o(),d("div",Ts,[D(k,{to:{name:"MyShortLeaves"},class:"text-[12px] text-blue-700 hover:underline"},{default:M(()=>[T(" + "+m(_e.value)+" more ",1)]),_:1})])):L("",!0)]))],512),[[ie,O.value.short]])]),e("section",Ss,[e("header",{class:"flex items-center justify-between mb-1 cursor-pointer select-none",role:"button","aria-expanded":O.value.exch,onClick:n[6]||(n[6]=g=>re("exch")),tabindex:"0"},[n[23]||(n[23]=e("div",{class:"flex items-center gap-2"},[e("i",{class:"fas fa-exchange-alt text-gray-600"}),e("h2",{class:"text-sm font-semibold text-gray-900"},"Exchange")],-1)),e("div",Ns,[e("span",Ps,m(R.value),1),D(k,{to:{name:"MyShiftExchangeList"},class:"text-[11px] text-blue-700 hover:underline",onClick:n[4]||(n[4]=S(()=>{},["stop"]))},{default:M(()=>n[21]||(n[21]=[T(" Shift ")])),_:1,__:[21]}),D(k,{to:{name:"MyOffdayExchangeList"},class:"text-[11px] text-blue-700 hover:underline",onClick:n[5]||(n[5]=S(()=>{},["stop"]))},{default:M(()=>n[22]||(n[22]=[T(" Offday ")])),_:1,__:[22]}),e("i",{class:$(["fas fa-chevron-down text-gray-600 transition-transform duration-200",O.value.exch?"rotate-180":""])},null,2)])],8,Rs),X(e("div",null,[n[24]||(n[24]=e("hr",{class:"border-gray-100"},null,-1)),A.value.length===0?(o(),d("div",Es,"No exchange")):(o(),d("div",js,[(o(!0),d(E,null,I(Ae.value,g=>(o(),d("button",{key:g.id,class:$(ce),onClick:V=>je(g)},[e("div",{class:$(ue)},[e("div",Bs,[e("div",Os,[e("span",Is,m(z(g.current_date)),1),e("span",Us," – "+m(g.exchange_type||"—"),1)])]),e("span",{class:$([de,Y(g.status).cls])},m(Y(g.status).title),3)])],8,qs))),128)),ke.value?(o(),d("div",Vs,[D(k,{to:{name:"MyShiftExchangeList"},class:"text-[12px] text-blue-700 hover:underline"},{default:M(()=>[T(" + "+m(ke.value)+" more ",1)]),_:1})])):L("",!0)]))],512),[[ie,O.value.exch]])]),e("section",Fs,[e("header",{class:"flex items-center justify-between mb-1 cursor-pointer select-none",role:"button","aria-expanded":O.value.manual,onClick:n[8]||(n[8]=g=>re("manual")),tabindex:"0"},[n[26]||(n[26]=e("div",{class:"flex items-center gap-2"},[e("i",{class:"fas fa-user-check text-gray-600"}),e("h2",{class:"text-sm font-semibold text-gray-900"},"Manual Attendance")],-1)),e("div",Ws,[e("span",zs,m(N.value),1),D(k,{to:{name:"MyManualAttendanceList"},class:"text-[11px] text-blue-700 hover:underline",onClick:n[7]||(n[7]=S(()=>{},["stop"]))},{default:M(()=>n[25]||(n[25]=[T(" See all ")])),_:1,__:[25]}),e("i",{class:$(["fas fa-chevron-down text-gray-600 transition-transform duration-200",O.value.manual?"rotate-180":""])},null,2)])],8,Ys),X(e("div",null,[n[27]||(n[27]=e("hr",{class:"border-gray-100"},null,-1)),r.value.length===0?(o(),d("div",Hs,"No manual application")):(o(),d("div",Ks,[(o(!0),d(E,null,I(Te.value,g=>(o(),d("button",{key:g.id,class:$(ce),onClick:V=>Ee(g.id)},[e("div",{class:$(ue)},[e("div",Js,[e("div",Xs,[e("span",Zs,m(g.check_in?z(g.check_in):z(g.check_out)),1),e("span",Qs," – "+m(g.type||"—"),1)])]),e("span",{class:$([de,Y(g.status).cls])},m(Y(g.status).title),3)])],8,Gs))),128)),we.value?(o(),d("div",en,[D(k,{to:{name:"MyManualAttendanceList"},class:"text-[12px] text-blue-700 hover:underline"},{default:M(()=>[T(" + "+m(we.value)+" more ",1)]),_:1})])):L("",!0)]))],512),[[ie,O.value.manual]])]),Q.value.open?(o(),P(C(c),{key:0,open:Q.value.open,"onUpdate:open":n[9]||(n[9]=g=>Q.value.open=g),id:Q.value.id},null,8,["open","id"])):L("",!0),ee.value.open?(o(),P(C(v),{key:1,open:ee.value.open,"onUpdate:open":n[10]||(n[10]=g=>ee.value.open=g),id:ee.value.id},null,8,["open","id"])):L("",!0),te.value.open?(o(),P(C(b),{key:2,open:te.value.open,"onUpdate:open":n[11]||(n[11]=g=>te.value.open=g),id:te.value.id},null,8,["open","id"])):L("",!0),W.value.open?(o(),P(ze(qe.value),{key:Be.value,open:W.value.open,"onUpdate:open":n[12]||(n[12]=g=>W.value.open=g),id:W.value.id},null,40,["open","id"])):L("",!0)])}}},nn={class:"bg-white shadow-sm rounded-xl p-3"},an={class:"flex items-center justify-between"},on={key:0,class:"text-[11px] text-gray-500"},ln={class:"inline-flex items-center gap-1 px-1.5 py-0.5 rounded-full bg-blue-50 text-blue-700"},rn={key:0,class:"text-xs italic text-center py-6 text-gray-500"},dn={key:1,class:"space-y-2"},un={class:"flex items-start gap-3 min-w-0"},cn={class:"min-w-0"},pn={class:"text-sm font-medium text-gray-900 truncate"},yn={class:"text-[11px] text-gray-500 mt-0.5"},mn={class:"text-base font-semibold text-gray-800 flex items-center gap-2 p-3"},vn={class:"space-y-4 px-3 pb-4"},fn={class:"text-xs text-gray-500 flex items-center gap-2"},xn={class:"flex justify-end gap-2 mt-2"},gn={__name:"DashboardRecentNotices",setup(_){const c=oe(),{userDashboard:v}=Z(c),b=be(),f=r=>{if(!r)return"—";const s=new Date(r);return isNaN(+s)?r:new Intl.DateTimeFormat(void 0,{day:"2-digit",month:"short",year:"numeric"}).format(s)},x=r=>{if(!r)return"";const s=new Date(r);if(isNaN(+s))return"";const a=(Date.now()-s.getTime())/1e3,i=new Intl.RelativeTimeFormat(void 0,{numeric:"auto"}),R=[["year",60*60*24*365],["month",60*60*24*30],["week",60*60*24*7],["day",60*60*24],["hour",60*60],["minute",60],["second",1]];for(const[N,j]of R){const U=Math.round(a/j);if(Math.abs(U)>=1)return i.format(-U,N)}return i.format(0,"second")},y=r=>{const s=f(r),a=x(r);return a?`${s} · ${a}`:s},l=w(()=>{var r;return((r=v.value)==null?void 0:r.notices)??[]}),t=w(()=>[...l.value].sort((s,a)=>{const i=s!=null&&s.user_feedback?1:0,R=a!=null&&a.user_feedback?1:0;if(i!==R)return i-R;const N=new Date((s==null?void 0:s.published_at)||0).getTime();return new Date((a==null?void 0:a.published_at)||0).getTime()-N})),u=w(()=>t.value.find(r=>!(r!=null&&r.user_feedback))||null),h=B(!!u.value);J(u,r=>{h.value=!!r});const A=r=>{const s=r||u.value;if(!s)return;const a=s.type===1?`/notice-details/${s.id}`:`/policy-details/${s.id}`;b.push(a)};return(r,s)=>{const a=me("RouterLink");return o(),d("div",nn,[e("div",an,[s[4]||(s[4]=e("div",{class:"flex items-center gap-1.5"},[e("i",{class:"fas fa-bell"}),e("h2",{class:"text-base font-semibold"},"Notices")],-1)),t.value.length?(o(),d("div",on,[e("span",ln,[s[3]||(s[3]=e("span",{class:"h-1.5 w-1.5 rounded-full bg-blue-500"},null,-1)),T(" "+m(t.value.filter(i=>!i.user_feedback).length)+" pending ",1)])])):L("",!0)]),s[10]||(s[10]=e("hr",{class:"my-2 border-gray-200"},null,-1)),t.value.length?(o(),d("div",dn,[(o(!0),d(E,null,I(t.value,i=>(o(),d("article",{key:i.id,class:"group flex items-center justify-between gap-2 p-3 border border-gray-100 rounded-lg hover:border-blue-200 transition"},[e("div",un,[e("span",{class:$(["inline-flex items-center gap-1 px-1.5 py-0.5 rounded-full text-[10px] font-medium mt-0.5",i.user_feedback?"bg-emerald-50 text-emerald-700":"bg-rose-50 text-rose-700"])},[e("span",{class:$(["h-2 w-2 rounded-full",i.user_feedback?"bg-emerald-600":"bg-rose-600 animate-pulse"])},null,2)],2),e("div",cn,[e("h3",pn,m(i.title||"Untitled notice"),1),e("p",yn,[s[5]||(s[5]=e("i",{class:"fas fa-calendar-alt text-gray-400 mr-1"},null,-1)),T(" "+m(y(i.published_at)),1)])])]),D(a,{to:i.type===1?`/notice-details/${i.id}`:`/policy-details/${i.id}`,class:"shrink-0 inline-flex items-center gap-1 text-blue-600 hover:text-blue-700 text-xs font-semibold"},{default:M(()=>s[6]||(s[6]=[T(" View "),e("i",{class:"fas fa-arrow-right text-[10px]"},null,-1)])),_:2,__:[6]},1032,["to"])]))),128))])):(o(),d("div",rn," No pending notice found ")),u.value?(o(),P(st,{key:2,show:h.value,onClose:s[2]||(s[2]=i=>h.value=!1)},{default:M(()=>[e("div",mn,[s[7]||(s[7]=e("i",{class:"fas fa-bell text-blue-600"},null,-1)),T(" "+m(u.value.title||"New notice"),1)]),e("div",vn,[e("p",fn,[s[8]||(s[8]=e("i",{class:"fas fa-calendar-alt text-gray-400"},null,-1)),T(" Published: "+m(y(u.value.published_at)),1)]),s[9]||(s[9]=e("p",{class:"text-sm text-gray-700"}," You must read this notice before proceeding. ",-1)),e("div",xn,[e("button",{onClick:s[0]||(s[0]=i=>h.value=!1),class:"bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium px-3 py-1.5 rounded-md transition text-sm"}," Later "),e("button",{onClick:s[1]||(s[1]=i=>A(u.value)),class:"bg-blue-600 hover:bg-blue-700 text-white font-semibold px-4 py-1.5 rounded-md transition text-sm"}," Read ")])])]),_:1},8,["show"])):L("",!0)])}}},bn={class:"w-full px-6 py-4"},hn={class:"grid lg:grid-cols-4 gap-6 items-start"},_n={class:"gap-0 rounded-md bg-white shadow-md border border-gray-300 col-span-full lg:col-span-3 lg:row-span-2"},kn={class:"flex items-center justify-center gap-4 py-2"},wn={class:"col-span-full lg:col-span-1 grid sm:grid-cols-2 lg:grid-cols-1 gap-6 sticky top-[80px]"},$n={class:"card-bg gap-0 shadow-md border border-gray-300"},Dn={class:"card-bg gap-0 shadow-md border border-gray-300"},Cn={class:"card-bg gap-0 shadow-md border border-gray-300"},Mn={__name:"DashboardEmployeeView",setup(_){const c=B("todos"),v=Le(),b=be();return J(()=>c.value,function(f){f!=="todos"&&b.replace({query:Object.keys(v.query).filter(x=>!x.match(/^todos\[/)).reduce((x,y)=>(x[y]=v.query[y],x),{})})}),(f,x)=>(o(),d("div",bn,[e("div",hn,[e("div",_n,[e("div",kn,[e("button",{onClick:x[0]||(x[0]=S(y=>c.value="todos",["prevent"])),class:$(["!py-0.5 text-sm",{"btn-2":c.value=="todos","btn-3 hover:bg-gray-200 hover:text-blue-500":c.value!="todos"}])}," Todos ",2),e("button",{onClick:x[1]||(x[1]=S(y=>c.value="tasks",["prevent"])),class:$(["!py-0.5 text-sm",{"btn-2":c.value=="tasks","btn-3 hover:bg-gray-200 hover:text-blue-500":c.value!="tasks"}])}," Tasks ",2)]),c.value=="todos"?(o(),P(as,{key:0})):L("",!0),c.value=="tasks"?(o(),P(Wt,{key:1})):L("",!0)]),e("div",wn,[e("div",$n,[D(sn)]),e("div",Dn,[D(gn)]),e("div",Cn,[D(es)])])])]))}},ea={__name:"DashBoard",setup(_){const c=ge(),v=oe(),{userDashboard:b}=Z(v),{user:f}=Z(c),x=w(()=>{var l;return["admin","super_admin","developer"].includes((l=f==null?void 0:f.value)==null?void 0:l.role)}),y=B(null);return Ce(async()=>{var t,u;f.value||await c.fetchUser(),await v.fetchUserDashboardData(),x.value&&await v.fetchAdminDashboardData();const l=(u=(t=b.value)==null?void 0:t.notices)==null?void 0:u.find(h=>!h.user_feedback);l&&(y.value=l)}),(l,t)=>x.value&&C(c).isAdminMood?(o(),P(vt,{key:0})):(o(),P(Mn,{key:1}))}};export{ea as default};
