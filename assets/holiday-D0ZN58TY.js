import{J as D,r as i,q as m,K as u}from"./index-Nb0dutxh.js";const I=D("holiday",()=>{const o=i([]),r=i(null),s=i(!1),n=i(null),y=m(()=>{let t=[];return o.value.forEach(l=>{const e=new Date(l.start_date),a=new Date(l.end_date);for(;e<=a;)t.push(e.toISOString().split("T")[0]),e.setDate(e.getDate()+1)}),t});async function h(t={}){var l,e;s.value=!0,n.value=null;try{const a=await u.get("/holidays",{params:t});return o.value=a==null?void 0:a.data,a==null?void 0:a.data}catch(a){n.value=((e=(l=a.response)==null?void 0:l.data)==null?void 0:e.message)||"Failed to fetch holidays"}finally{s.value=!1}}async function v(t){var l,e;s.value=!0,n.value=null;try{const a=await u.get(`/holidays/${t}`);r.value=a.data}catch(a){n.value=((e=(l=a.response)==null?void 0:l.data)==null?void 0:e.message)||`Failed to fetch holiday with ID ${t}`}finally{s.value=!1}}async function f(t){var l,e;s.value=!0,n.value=null;try{const a=await u.post("/holidays",t);o.value.push(a.data.data)}catch(a){n.value=((e=(l=a.response)==null?void 0:l.data)==null?void 0:e.message)||"Failed to create holiday"}finally{s.value=!1}}async function p(t,l){var e,a;s.value=!0,n.value=null;try{const d=await u.put(`/holidays/${t}`,l),c=o.value.findIndex(g=>g.id===t);c!==-1&&(o.value[c]=d.data.data)}catch(d){n.value=((a=(e=d.response)==null?void 0:e.data)==null?void 0:a.message)||`Failed to update holiday with ID ${t}`}finally{s.value=!1}}async function w(t){var l,e;s.value=!0,n.value=null;try{await u.delete(`/holidays/${t}`),o.value=o.value.filter(a=>a.id!==t)}catch(a){n.value=((e=(l=a.response)==null?void 0:l.data)==null?void 0:e.message)||`Failed to delete holiday with ID ${t}`}finally{s.value=!1}}return{holidays:o,holiday:r,loading:s,error:n,holidayDates:y,fetchHolidays:h,fetchHolidayById:v,createHoliday:f,updateHoliday:p,deleteHoliday:w}});export{I as u};
