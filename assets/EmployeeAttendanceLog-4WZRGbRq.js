import{u as M,b as V,r as c,e as F,x as D,c as u,o as r,a as t,f as T,q as h,k as f,h as R,v as I,F as U,n as B,t as s,j as o}from"./index-CDlKFhap.js";import{_ as J}from"./EmployeeFilter-D8iUFk1a.js";import{L as P}from"./LoaderView-C79TZRRE.js";import{u as $}from"./attendance-DYgVNrKg.js";import{u as z}from"./user-ClDFUgpR.js";import"./MultiselectDropdown-COUVBtt5.js";import"./company-DsNdk2jL.js";import"./department-rzi3GA2g.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const G={class:"px-4 space-y-4"},H={class:"flex flex-wrap gap-4"},K={key:1,class:"space-y-4"},O={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},Q={class:"text-sm font-semibold text-blue-700 border-b pb-1 mb-2"},W={class:"flex items-center gap-1 text-gray-700"},X={class:"text-right text-gray-500 bg-blue-100 px-2 py-0.5 rounded text-[10px]"},Y={key:2,class:"flex justify-between gap-4 text-sm"},Z={class:"card-bg p-4 gap-1"},ee={class:"grid md:grid-cols-2"},te={key:3},ye={__name:"EmployeeAttendanceLog",setup(le){const y=M(),i=V(),x=z(),v=$(),l=c(null),d=c(i.query.date||v.selectedMonth),a=c({company_id:i.query.company_id||"",department_id:i.query.department_id||"all",type:i.query.type||"all",employee_id:i.query.employee_id||"",category:""}),b=async n=>{n?(await x.fetchUser(n),l.value=x.user):l.value=null},g=async()=>{a.value.employee_id&&d.value&&await v.getMonthlyAttendanceLog(a.value.employee_id,d.value)};F(async()=>{a.value.employee_id&&(await b(a.value.employee_id),await g())}),D(()=>a.value.employee_id,async(n,e)=>{n&&n!==e&&(await b(n),await g(),y.replace({query:{...i.query,employee_id:n}}))}),D(d,n=>{y.replace({query:{...i.query,date:n}}),g()});const E=()=>y.go(-1),j=n=>new Date(n).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),C=()=>{y.replace({query:{...i.query,company_id:a.value.company_id,department_id:a.value.department_id,type:a.value.type,employee_id:a.value.employee_id}})};return(n,e)=>{var _,w,k,q,A,N;return r(),u("div",G,[t("div",{class:"flex items-center justify-between gap-2"},[t("button",{class:"btn-3",onClick:E},e[2]||(e[2]=[t("i",{class:"far fa-arrow-left"},null,-1),t("span",{class:"hidden md:flex"},"Back",-1)])),e[3]||(e[3]=t("h1",{class:"title-md md:title-lg flex-wrap text-center"},"Attendance Log",-1)),e[4]||(e[4]=t("div",null,null,-1))]),t("div",H,[h(J,{modelValue:a.value,"onUpdate:modelValue":e[0]||(e[0]=p=>a.value=p),"initial-value":f(i).query,onFilterChange:C},null,8,["modelValue","initial-value"]),t("div",null,[R(t("input",{id:"monthSelect",type:"month","onUpdate:modelValue":e[1]||(e[1]=p=>d.value=p),onChange:g,class:"input-1"},null,544),[[I,d.value]])])]),f(v).isLoading?(r(),T(P,{key:0})):(r(),u("div",K,[t("div",O,[(r(!0),u(U,null,B(f(v).attendanceLogs,(p,L)=>(r(),u("div",{key:L,class:"bg-white shadow rounded-lg p-4"},[t("h3",Q,s(L),1),(r(!0),u(U,null,B(p,(m,ne)=>{var S;return r(),u("div",{key:m.id,class:"flex items-center justify-between text-xs mb-1"},[t("div",W,[e[5]||(e[5]=t("i",{class:"far fa-clock text-blue-500"},null,-1)),o(" "+s(j(m.timestamp)),1)]),t("div",X,s(((S=m==null?void 0:m.device)==null?void 0:S.name)||"Unknown"),1)])}),128))]))),128))])])),l.value?(r(),u("div",Y,[t("div",Z,[e[15]||(e[15]=t("h2",{class:"title-md"},"Selected Employee Info",-1)),e[16]||(e[16]=t("hr",null,null,-1)),t("div",ee,[t("p",null,[e[6]||(e[6]=t("strong",null,"Name:",-1)),o(" "+s(l.value.name),1)]),t("p",null,[e[7]||(e[7]=t("strong",null,"Designation:",-1)),o(" "+s(((_=l.value.designation)==null?void 0:_.title)||"N/A"),1)]),t("p",null,[e[8]||(e[8]=t("strong",null,"Department:",-1)),o(" "+s(((w=l.value.department)==null?void 0:w.name)||"N/A"),1)]),t("p",null,[e[9]||(e[9]=t("strong",null,"Company:",-1)),o(" "+s(((k=l.value.company)==null?void 0:k.name)||"N/A"),1)]),t("p",null,[e[10]||(e[10]=t("strong",null,"Phone:",-1)),o(" "+s(l.value.phone),1)]),t("p",null,[e[11]||(e[11]=t("strong",null,"Email:",-1)),o(" "+s(l.value.email||"N/A"),1)]),t("p",null,[e[12]||(e[12]=t("strong",null,"Employee ID:",-1)),o(" "+s(((q=l.value)==null?void 0:q.employee_id)||"N/A"),1)]),t("p",null,[e[13]||(e[13]=t("strong",null,"Joining Date:",-1)),o(" "+s(((A=l.value)==null?void 0:A.joining_date)||"N/A"),1)]),t("p",null,[e[14]||(e[14]=t("strong",null,"Email:",-1)),o(" "+s(((N=l.value)==null?void 0:N.blood)||"N/A"),1)])])])])):(r(),u("div",te,e[17]||(e[17]=[t("p",{class:"text-gray-400 text-center text-2xl italic"},"Select an employee, please.",-1)])))])}}};export{ye as default};
