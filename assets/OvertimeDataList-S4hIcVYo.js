import{r as v,e as T,a2 as q,c as i,o as l,a as e,g as f,t as n,p as m,F as B,G as E,b as P,u as I,d as G,a3 as z,n as K,q as W,f as J,k as w,i as Q}from"./index-Du55oRmQ.js";import{u as D}from"./overtime-nP_UhJIX.js";import{_ as X}from"./AcceptAndRejectHandler-CGjkv-WC.js";import{_ as S}from"./DisplayFormattedWorkingHours-BJ0zCtEY.js";import{_ as Y}from"./TimePickerAsFloatHour-ij-tIbLY.js";const Z={key:0,class:"fixed inset-0 z-50 flex justify-center items-center bg-black/50"},ee={class:"modal-card max-w-sm p-4"},te={class:"grid grid-cols-3 gap-2 border p-3"},se={class:"border-x"},re={class:"col-span-full text-xs md:text-sm border-t pt-3"},oe={class:"flex justify-between gap-2 mt-2"},ne={__name:"DeleteOvertime",props:{overtime:Object,onSuccess:{type:Function,default:null}},setup(r){const c=r,g=D(),u=v(null),y=v(null),p=v(!1),t=async()=>{await g.deleteOvertime(c.overtime.id),c.onSuccess&&await c.onSuccess(),b()},k=()=>{p.value=!0,x()},b=()=>{p.value=!1};function x(){E(()=>{var d;(d=u.value)==null||d.focus()})}function _(d){var a,o;p.value&&(d.key==="ArrowLeft"?(a=y.value)==null||a.focus():d.key==="ArrowRight"&&((o=u.value)==null||o.focus()))}return T(()=>{window.addEventListener("keydown",_)}),q(()=>{window.removeEventListener("keydown",_)}),(d,a)=>(l(),i(B,null,[e("i",{onClick:k,class:"fa fa-trash cursor-pointer text-red-600"}),p.value?(l(),i("div",Z,[e("div",ee,[a[0]||(a[0]=e("h3",{class:"title-lg"},"Delete Overtime",-1)),e("div",te,[e("div",null,[e("b",null,n(new Date(r.overtime.date).toLocaleDateString("en-GB",{day:"2-digit",month:"long",year:"numeric"})),1)]),e("div",se,[e("b",null,n(r.overtime.duty_type),1)]),e("div",null,[e("b",null,[m(S,{workingHours:r.overtime.request_overtime_hours},null,8,["workingHours"])])]),e("div",re,n(r.overtime.work_details),1)]),e("div",oe,[e("button",{type:"button",ref_key:"cancelBtnRef",ref:y,class:"btn-3 focus:ring-2 ring-offset-2",onClick:b}," Cancel ",512),e("button",{type:"button",ref_key:"confirmBtnRef",ref:u,class:"btn-2-red focus:ring-2 ring-offset-2",onClick:t}," Delete ",512)])])])):f("",!0)],64))}},ae={key:0,class:"fixed inset-0 z-50 flex justify-center items-center bg-black/50"},le={class:"modal-card max-w-sm"},ie={class:"flex justify-between gap-2 mt-4"},ce={__name:"UpdateApprovalTime",props:{overtime:Object,onSuccess:{type:Function,default:null}},setup(r){const c=r,g=D(),u=v(null),y=v(null),p=v(!1),t=v(c.overtime.approval_overtime_hours||c.overtime.request_overtime_hours||""),k=async()=>{if(!t.value)return alert("Please set approval time!");await g.updateApprovalTime(c.overtime.id,t.value),c.onSuccess&&await c.onSuccess(),x()},b=()=>{p.value=!0,_()},x=()=>{p.value=!1};function _(){E(()=>{var a;(a=u.value)==null||a.focus()})}function d(a){var o,h;p.value&&(a.key==="ArrowLeft"?(o=y.value)==null||o.focus():a.key==="ArrowRight"&&((h=u.value)==null||h.focus()))}return T(()=>{window.addEventListener("keydown",d)}),q(()=>{window.removeEventListener("keydown",d)}),(a,o)=>(l(),i(B,null,[e("i",{onClick:b,class:"fa fa-edit cursor-pointer text-sky-600"}),p.value?(l(),i("div",ae,[e("div",le,[o[1]||(o[1]=e("h3",{class:"title-lg"},"Update Approval Time",-1)),o[2]||(o[2]=e("hr",{class:"my-2"},null,-1)),m(Y,{modelValue:t.value,"onUpdate:modelValue":o[0]||(o[0]=h=>t.value=h),"minute-interval":5,required:!0,"hour-min":2,"hour-max":16},null,8,["modelValue"]),o[3]||(o[3]=e("hr",{class:"my-2"},null,-1)),e("div",ie,[e("button",{type:"button",ref_key:"cancelBtnRef",ref:y,class:"btn-3 focus:ring-2 ring-offset-2",onClick:x}," Cancel ",512),e("button",{type:"button",ref_key:"confirmBtnRef",ref:u,class:"btn-2-green focus:ring-2 ring-offset-2",onClick:k}," Update Time ",512)])])])):f("",!0)],64))}},de={class:"space-y-4"},ue={class:"card-bg p-4 gap-1"},pe={class:"flex flex-wrap gap-x-8 gap-y-2"},fe={key:0,class:"text-gray-700"},ye={class:"ml-1"},me={key:1,class:"text-gray-700"},ge={class:"ml-1"},be={key:2,class:"text-gray-700"},xe={class:"ml-1"},_e={key:3,class:"text-gray-700"},he={class:"ml-1"},ve={key:4,class:"text-gray-700"},ke={class:"ml-1"},we={class:"overflow-x-auto"},Se={class:"min-w-full table-auto border-collapse border border-gray-200 bg-white rounded-md text-sm"},Be={class:"border border-gray-300 px-2 text-center"},De={class:"border border-gray-300 px-2 text-center"},Ae={class:"border border-gray-300 px-2 text-center"},Re={class:"border border-gray-300 px-2 text-center"},Ce={class:"border border-gray-300 px-2 text-center"},$e={class:"border border-gray-300 px-2 text-center"},Oe={class:"border border-gray-300 px-2 text-center"},Le={class:"border border-gray-300 px-2 text-center"},je={class:"border border-gray-300 px-2 text-center"},Ne={class:"flex items-center justify-center gap-4"},Ue={class:"border border-gray-300 px-2 text-center"},He={class:"border border-gray-300 px-2 text-center"},Me={class:"border border-gray-300 px-2 text-center !py-0.5"},Te={class:"flex items-center justify-center gap-x-4"},qe={key:0,class:"border border-dashed px-4 rounded-xl"},Ee={key:0},ze={__name:"OvertimeDataList",props:{user:Object,onUpdate:{type:Function,default:null}},setup(r){P(),I(),G();const c=D(),g=z(),u=r,y=async()=>{u.onUpdate?await u.onUpdate():await g.fetchCountNotifications()};return(p,t)=>{var b,x,_,d,a,o,h,A,R,C,$,O,L,j,N;const k=K("RouterLink");return l(),i("div",de,[e("div",ue,[e("div",pe,[(b=r.user)!=null&&b.employee_id?(l(),i("p",fe,[t[0]||(t[0]=e("span",{class:"text-gray-400"},"Employee ID:",-1)),e("strong",ye,n(((x=r.user)==null?void 0:x.employee_id)||"N/A"),1)])):f("",!0),(_=r.user)!=null&&_.name?(l(),i("p",me,[t[1]||(t[1]=e("span",{class:"text-gray-400"},"Name:",-1)),e("strong",ge,n((d=r.user)==null?void 0:d.name),1)])):f("",!0),(o=(a=r.user)==null?void 0:a.designation)!=null&&o.title?(l(),i("p",be,[t[2]||(t[2]=e("span",{class:"text-gray-400"},"Designation:",-1)),e("strong",xe,n(((A=(h=r.user)==null?void 0:h.designation)==null?void 0:A.title)||"N/A"),1)])):f("",!0),(C=(R=r.user)==null?void 0:R.department)!=null&&C.name?(l(),i("p",_e,[t[3]||(t[3]=e("span",{class:"text-gray-400"},"Department:",-1)),e("strong",he,n(((O=($=r.user)==null?void 0:$.department)==null?void 0:O.name)||"N/A"),1)])):f("",!0),(L=r.user)!=null&&L.phone?(l(),i("p",ve,[t[4]||(t[4]=e("span",{class:"text-gray-400"},"Phone:",-1)),e("strong",ke,n((j=r.user)==null?void 0:j.phone),1)])):f("",!0)])]),e("div",we,[e("table",Se,[t[7]||(t[7]=e("thead",null,[e("tr",{class:"bg-gray-200 *:py-1"},[e("th",{class:"border border-gray-300 px-2 text-center"},"#"),e("th",{class:"border border-gray-300 px-2 text-center"},"Date"),e("th",{class:"border border-gray-300 px-2 text-center"},"Type"),e("th",{class:"border border-gray-300 px-2 text-center"},"Shift"),e("th",{class:"border border-gray-300 px-2 text-center"},"Check-In"),e("th",{class:"border border-gray-300 px-2 text-center"},"Check-Out"),e("th",{class:"border border-gray-300 px-2 text-center"},"Working (hour)"),e("th",{class:"border border-gray-300 px-2 text-center"},"Request (hour)"),e("th",{class:"border border-gray-300 px-2 text-center"},"Approved (hour)"),e("th",{class:"border border-gray-300 px-2 text-center"},"Details"),e("th",{class:"border border-gray-300 px-2 text-center"},"Status"),e("th",{class:"border border-gray-300 px-2 text-center"},"Action")])],-1)),e("tbody",null,[(l(!0),i(B,null,W(w(c).overtimes,(s,V)=>{var U,H,M;return l(),i("tr",{key:s==null?void 0:s.id,class:"border-b border-gray-200 hover:bg-blue-200 *:py-2"},[e("td",Be,n(V+1),1),e("td",De,n(new Date(s.date).toLocaleDateString("en-GB",{day:"2-digit",month:"long",year:"numeric"})),1),e("td",Ae,n(s.duty_type),1),e("td",Re,n(s.shift),1),e("td",Ce,n(s.check_in||"- : -"),1),e("td",$e,n(s.check_out||"- : -"),1),e("td",Oe,[m(S,{workingHours:s.working_hours},null,8,["workingHours"])]),e("td",Le,[m(S,{workingHours:s.request_overtime_hours},null,8,["workingHours"])]),e("td",je,[e("div",Ne,[m(S,{workingHours:s.approval_overtime_hours},null,8,["workingHours"]),(H=(U=w(g).applicationApprovalPermissions)==null?void 0:U[s.id])!=null&&H.allow_recommend_by?(l(),J(ce,{key:0,overtime:s,onSuccess:y},null,8,["overtime"])):f("",!0)])]),e("td",Ue,n(s.work_details||""),1),e("td",He,n(s.status||"Pending"),1),e("td",Me,[e("div",Te,[s.approval_overtime_hours&&Object.values(((M=w(g).applicationApprovalPermissions)==null?void 0:M[s.id])||{}).some(F=>F)?(l(),i("div",qe,[m(X,{class:"ml-auto",notificationType:"overtime_applications",applicationId:s.id,onSuccess:y,variant:1},null,8,["applicationId"])])):f("",!0),m(k,{to:{name:"MyOvertimeShow",params:{id:s.id}},class:"text-blue-800"},{default:Q(()=>t[5]||(t[5]=[e("i",{class:"far fa-eye text-lg"},null,-1)])),_:2,__:[5]},1032,["to"]),m(ne,{overtime:s,onSuccess:y},null,8,["overtime"])])])])}),128)),((N=w(c).overtimes)==null?void 0:N.length)===0?(l(),i("tr",Ee,t[6]||(t[6]=[e("td",{colspan:"100",class:"p-2 text-center text-red-500"},"No overtimes found",-1)]))):f("",!0)])])])])}}};export{ze as _};
