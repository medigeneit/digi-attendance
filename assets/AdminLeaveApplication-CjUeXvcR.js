import{g as ue,D as G,r as x,x as z,ab as le,q as H,h as oe,c as i,o as d,a as e,i as J,w as re,j as A,k as g,v as q,Q as ie,t as _,F as N,e as W,m as M,ae as O,b as ce,d as C,u as pe,f as ye,p as me,l as Q,Z as ve}from"./index-BgD69JLK.js";import{L as ne}from"./LoaderView-BVoCAHcS.js";import{_ as _e}from"./MultiselectDropdown-DhM24GsW.js";import{u as be}from"./holiday-D8V4Fc4h.js";import{u as de}from"./leave-application-p-Z8f9FL.js";import{u as fe}from"./leave-type-CF4OPpPZ.js";import{u as Z}from"./user-DvJdVg4N.js";import{_ as xe}from"./EmployeeFilter-CiqJMQ0h.js";import{S as he}from"./SelectedEmployeeCard-kPlg1ZO7.js";import{u as ge}from"./company-B21hWMUJ.js";import{_ as we}from"./FlexibleDatePicker-CuaRciex.js";import"./department-Ca1mZFXN.js";import"./EmployeeDropdownInput-CrbuGPrg.js";import"./SelectDropdown-IWwlWtrj.js";import"./UserChip-Bwz473pO.js";const ke={class:"space-y-6 p-4"},$e={class:"space-y-4"},Le={class:"grid grid-cols-1 gap-4 md:grid-cols-2"},Se={class:"space-y-2"},Ue={class:"space-y-2"},De={class:"flex flex-wrap items-center justify-between gap-3 rounded-xl border border-slate-100 bg-slate-50/60 p-4"},Ae={class:"inline-flex items-center gap-2 rounded-full border border-slate-200 bg-white px-4 py-2 shadow-sm"},Ce={key:0,class:"rounded-xl border border-blue-100 bg-blue-50/70 px-4 py-3 text-sm font-medium text-blue-700"},qe={class:"space-y-4 rounded-2xl border border-dashed border-slate-200 p-4"},Ve={class:"flex flex-wrap items-center justify-between gap-3"},Be={class:"rounded-full bg-slate-100 px-3 py-1 text-xs font-semibold text-slate-600"},Te={key:0,class:"rounded-xl border border-slate-100 bg-white/70 p-6 text-center text-sm text-slate-500"},je={key:1,class:"space-y-3"},Me={class:"flex flex-wrap items-center justify-between gap-2"},Fe={class:"text-base font-semibold text-slate-700"},Re={class:"flex flex-wrap gap-2"},Ne=["title"],Ye=["name","value","onUpdate:modelValue","disabled"],Ie={class:"inline-flex items-center gap-1 rounded-full border border-slate-200 px-3 py-1 text-sm font-medium text-slate-600 transition peer-checked:border-blue-500 peer-checked:bg-blue-50 peer-checked:text-blue-600 peer-disabled:opacity-40"},ze={class:"text-xs text-slate-400"},He={class:"cursor-pointer"},We=["name","onUpdate:modelValue"],Ee={class:"cursor-pointer"},Pe=["name","onUpdate:modelValue"],Oe={class:"text-xs uppercase tracking-wide text-slate-400"},Qe={class:"space-y-4 rounded-2xl border border-slate-100 bg-slate-50/50 p-4"},Ge={class:"space-y-2"},Je={key:0,class:"space-y-4"},Ze={class:"space-y-2"},Ke={class:"space-y-2"},Xe={key:0,class:"rounded-xl border border-red-100 bg-red-50 px-4 py-3 text-sm text-red-600"},et={__name:"AdminLeaveApplicationAddForm",props:{userInfo:Object},emits:["close","formSuccessClosed"],setup(V,{emit:F}){const o=V,h=F,S=de();fe();const w=Z(),L=ue(),U=be(),{userLeaveBalance:B}=G(w),T=x(""),k=x(!0),a=x({last_working_date:"",resumption_date:"",reason:"",works_in_hand:"",handover_user_id:"",leave_days:[]}),r=x([]),y=x(!1),$=x(null),n=z(()=>{var c,s,u;return((s=(c=o==null?void 0:o.userInfo)==null?void 0:c.assign_weekend)==null?void 0:s.weekends)||((u=o==null?void 0:o.userInfo)==null?void 0:u.weekends)}),f=z(()=>{const c=a.value.last_working_date,s=a.value.resumption_date;if(!c||!s)return[];const u=new Date(c),v=new Date(s);if(v<=u)return[];const b=[];let m=new Date(u);for(m.setDate(m.getDate()+1);m<v;){const D=m.getFullYear(),P=(m.getMonth()+1).toString().padStart(2,"0"),I=m.getDate().toString().padStart(2,"0");b.push(`${D}-${P}-${I}`),m.setDate(m.getDate()+1)}return b}),R=z(()=>{if(!a.value.last_working_date||!a.value.resumption_date)return"";const c=new Date(a.value.last_working_date);return new Date(a.value.resumption_date)<=c?"Resumption date must be after Last Working Date.":f.value.length===0?"No leave days between the selected dates.":null});le(async()=>{var c;f.value.length&&B.value.length&&(await U.fetchHolidays({company_id:(c=L==null?void 0:L.user)==null?void 0:c.company_id,start_date:f.value[0],end_date:f.value[f.value.length-1]}),f.value.forEach(async(s,u)=>{const v=new Date(s).toLocaleString("en-us",{weekday:"long"}).toLowerCase(),b=v.charAt(0).toUpperCase()+v.slice(1);n.value.includes(b)&&(r.value[u]="weekend"),U.holidayDates.includes(s)&&(r.value[u]="holiday")}))}),H(()=>T.value,c=>{a.value.handover_user_id=c==null?void 0:c.id});const j=async()=>{var c;y.value=!0,$.value=null;try{const s=f.value.map((m,D)=>({date:m,leave_type_id:r.value[D]!=="weekend"&&r.value[D]!=="holiday"?r.value[D]:null})).filter(m=>m.leave_type_id!==null),u=f.value.map((m,D)=>({date:m,leave_type_id:r.value[D]||""})).filter(m=>m.leave_type_id!==null),v={user_id:(c=o==null?void 0:o.userInfo)==null?void 0:c.id,last_working_date:a.value.last_working_date,resumption_date:a.value.resumption_date,reason:a.value.reason,works_in_hand:a.value.works_in_hand,handover_user_id:k.value?null:a.value.handover_user_id,leave_days:s,json_data:u,is_direct_approve:k.value};await S.storeAdminLeaveApplication(v)&&h("formSuccessClosed")}catch(s){$.value=s.message||"Failed to submit leave application"}finally{y.value=!1}};oe(async()=>{le(()=>{var s;const c=(s=o==null?void 0:o.userInfo)==null?void 0:s.id;c&&w.fetchUserLeaveBalances(c)}),await w.fetchTypeWiseEmployees({except:"auth"})});const Y=()=>{h("close")};return(c,s)=>(d(),i("div",ke,[e("header",{class:"flex flex-wrap items-start justify-between gap-3"},[s[6]||(s[6]=e("div",null,[e("p",{class:"text-xs font-semibold uppercase tracking-widest text-slate-500"},"Admin panel"),e("h1",{class:"title-md md:title-lg"},"Leave Application Form")],-1)),e("button",{type:"button",class:"rounded-full border border-slate-200 px-4 py-2 text-sm font-medium text-slate-600 transition hover:border-slate-400 hover:text-slate-800",onClick:Y}," Close ")]),y.value?(d(),J(ne,{key:0})):(d(),i("form",{key:1,onSubmit:re(j,["prevent"]),class:"space-y-6 rounded-2xl border border-slate-100 bg-white/80 p-4 shadow-sm backdrop-blur"},[e("section",$e,[e("div",Le,[e("div",Se,[s[7]||(s[7]=e("label",{class:"text-sm font-semibold text-slate-600"},"Last Working Date",-1)),g(e("input",{type:"date","onUpdate:modelValue":s[0]||(s[0]=u=>a.value.last_working_date=u),class:"input-1 w-full",required:""},null,512),[[q,a.value.last_working_date]])]),e("div",Ue,[s[8]||(s[8]=e("label",{class:"text-sm font-semibold text-slate-600"},"Resumption Date",-1)),g(e("input",{type:"date","onUpdate:modelValue":s[1]||(s[1]=u=>a.value.resumption_date=u),class:"input-1 w-full",required:""},null,512),[[q,a.value.resumption_date]])])]),e("div",De,[s[10]||(s[10]=e("div",null,[e("p",{class:"text-sm font-semibold text-slate-600"},"Approval preference"),e("p",{class:"text-xs text-slate-500"}," Toggle off to assign a handover owner and capture works in hand. ")],-1)),e("label",Ae,[g(e("input",{type:"checkbox","onUpdate:modelValue":s[2]||(s[2]=u=>k.value=u),class:"h-4 w-4 text-blue-600"},null,512),[[ie,k.value]]),s[9]||(s[9]=e("span",{class:"text-sm font-semibold text-slate-700"},"Direct approve",-1))])]),a.value.last_working_date&&a.value.resumption_date&&R.value?(d(),i("div",Ce,_(R.value),1)):A("",!0)]),e("section",qe,[e("div",Ve,[s[11]||(s[11]=e("div",null,[e("p",{class:"text-base font-semibold text-slate-700"},"Day-by-day allocation")],-1)),e("span",Be,_(f.value.length)+" day"+_(f.value.length===1?"":"s"),1)]),f.value.length?(d(),i("div",je,[(d(!0),i(N,null,W(f.value,(u,v)=>(d(),i("div",{key:v,class:"rounded-2xl flex border border-slate-100 bg-white p-2 items-center justify-between shadow-sm transition hover:border-blue-200"},[e("div",Me,[e("p",Fe,_(u),1)]),e("div",Re,[(d(!0),i(N,null,W(M(B),b=>(d(),i("label",{key:b.id,class:"cursor-pointer",title:b.remaining_days===0?"No balance remaining":""},[g(e("input",{type:"radio",name:"leaveType-"+v,value:b.id,"onUpdate:modelValue":m=>r.value[v]=m,class:"peer hidden",disabled:r.value.filter(m=>m===b.id).length>=b.remaining_days},null,8,Ye),[[O,r.value[v]]]),e("span",Ie,[ce(_(b.name)+" ",1),e("span",ze,"("+_(b.remaining_days)+"d)",1)])],8,Ne))),128)),e("label",He,[g(e("input",{type:"radio",name:"leaveType-"+v,value:"weekend","onUpdate:modelValue":b=>r.value[v]=b,class:"peer hidden"},null,8,We),[[O,r.value[v]]]),s[12]||(s[12]=e("span",{class:"inline-flex items-center rounded-full border border-slate-200 px-3 py-1 text-sm font-medium text-slate-600 transition peer-checked:border-amber-500 peer-checked:bg-amber-50 peer-checked:text-amber-600"}," Weekend ",-1))]),e("label",Ee,[g(e("input",{type:"radio",name:"leaveType-"+v,value:"holiday","onUpdate:modelValue":b=>r.value[v]=b,class:"peer hidden"},null,8,Pe),[[O,r.value[v]]]),s[13]||(s[13]=e("span",{class:"inline-flex items-center rounded-full border border-slate-200 px-3 py-1 text-sm font-medium text-slate-600 transition peer-checked:border-emerald-500 peer-checked:bg-emerald-50 peer-checked:text-emerald-600"}," Holiday ",-1))])]),e("p",Oe,_(r.value[v]?"Assigned":"Unassigned"),1)]))),128))])):(d(),i("div",Te," No days calculated yet. Pick a last working date and a resumption date to configure the breakdown. "))]),e("section",Qe,[e("div",Ge,[s[14]||(s[14]=e("label",{class:"text-sm font-semibold text-slate-600"},"Reason",-1)),g(e("textarea",{"onUpdate:modelValue":s[3]||(s[3]=u=>a.value.reason=u),class:"input-1 min-h-[80px] w-full",placeholder:"Summarize why the leave is required"},null,512),[[q,a.value.reason]])]),k.value?A("",!0):(d(),i("div",Je,[e("div",Ze,[s[15]||(s[15]=e("label",{class:"text-sm font-semibold text-slate-600"},"Handover user",-1)),C(_e,{modelValue:T.value,"onUpdate:modelValue":s[4]||(s[4]=u=>T.value=u),options:M(w).users,multiple:!1,label:"label",placeholder:"Select the teammate who will receive the handover",class:"z-50"},null,8,["modelValue","options"])]),e("div",Ke,[s[16]||(s[16]=e("label",{for:"works-in-hand",class:"text-sm font-semibold text-slate-600"},"Works in hand",-1)),g(e("textarea",{id:"works-in-hand","onUpdate:modelValue":s[5]||(s[5]=u=>a.value.works_in_hand=u),class:"input-1 min-h-[100px] w-full",placeholder:"Detail the tasks that will continue while away"},null,512),[[q,a.value.works_in_hand]])])]))]),$.value?(d(),i("div",Xe,_($.value),1)):A("",!0),e("div",{class:"flex flex-wrap items-center justify-end gap-3"},[e("button",{type:"button",class:"rounded-full border border-slate-200 px-5 py-2 text-sm font-semibold text-slate-600 transition hover:border-slate-400",onClick:Y}," Cancel "),s[17]||(s[17]=e("button",{type:"submit",class:"btn-2 rounded-full px-6 py-2"},"Submit request",-1))])],32))]))}},tt={key:0,class:"fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center z-50"},st={class:"bg-white rounded-lg shadow-lg w-full max-w-3xl"},at={class:"px-6 py-4 border-b"},lt={class:"text-lg font-bold"},ot={class:"table-auto w-full border"},rt={class:"p-2"},nt=["onUpdate:modelValue"],dt=["onUpdate:modelValue"],ut={class:"p-2"},it=["onUpdate:modelValue"],ct={class:"p-2"},pt=["onUpdate:modelValue"],yt={__name:"UserLeaveBalanceModal",props:{show:{type:Boolean,required:!0},user:{type:Object,required:!0}},emits:["close"],setup(V,{emit:F}){const o=V,h=F,S=ge(),w=Z(),L=x([]),U=x(!1);H(()=>o.show,async a=>{var r;a&&((r=o.user)!=null&&r.id)&&!U.value&&(await B(),U.value=!0)}),H(()=>{var a;return(a=o.user)==null?void 0:a.id},()=>{U.value=!1,L.value=[]});const B=async()=>{try{const a=await w.fetchUserLeaveTypes(o.user.id);if(a!=null&&a.length)L.value=a;else{const r=await S.fetchCompanyLeaveTypes(o.user.company_id);L.value=r.data.map(y=>({id:y.id,name:y.name,annual_quota:y.annual_quota||0,max_consecutive_days:y.max_consecutive_days||null,type:y.type||"Paid"}))}}catch(a){console.error("Failed to load leave balances or fallback types:",a)}},T=async()=>{try{await w.saveLeaveBalances(o.user.id,L.value),h("close")}catch(a){console.error("Failed to save leave balances:",a)}},k=()=>{h("close")};return(a,r)=>V.show&&V.user?(d(),i("div",tt,[e("div",st,[e("div",at,[e("h3",lt,"Set Leave Balances for "+_(V.user.name),1)]),e("form",{onSubmit:re(T,["prevent"]),class:"p-6 space-y-4"},[e("table",ot,[r[0]||(r[0]=e("thead",{class:"bg-gray-100 text-left"},[e("tr",null,[e("th",{class:"p-2"},"Leave Type"),e("th",{class:"p-2"},"Annual Quota"),e("th",{class:"p-2"},"Max Consecutive Days")])],-1)),e("tbody",null,[(d(!0),i(N,null,W(L.value,(y,$)=>(d(),i("tr",{key:$},[e("td",rt,[g(e("input",{type:"hidden","onUpdate:modelValue":n=>y.id=n,class:"input-1 w-full"},null,8,nt),[[q,y.id]]),g(e("input",{"onUpdate:modelValue":n=>y.name=n,class:"input-1 w-full",disabled:""},null,8,dt),[[q,y.name]])]),e("td",ut,[g(e("input",{"onUpdate:modelValue":n=>y.annual_quota=n,type:"number",min:"0",class:"input-1 w-full"},null,8,it),[[q,y.annual_quota,void 0,{number:!0}]])]),e("td",ct,[g(e("input",{"onUpdate:modelValue":n=>y.max_consecutive_days=n,type:"number",min:"0",class:"input-1 w-full"},null,8,pt),[[q,y.max_consecutive_days,void 0,{number:!0}]])])]))),128))])]),e("div",{class:"flex justify-end gap-2 pt-4 border-t"},[e("button",{type:"button",onClick:k,class:"px-4 py-2 bg-gray-200 rounded hover:bg-gray-300"}," Cancel "),r[1]||(r[1]=e("button",{type:"submit",class:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700"}," Save ",-1))])],32)])])):A("",!0)}},mt={class:"space-y-2 px-4"},vt={class:"flex flex-wrap gap-2 p-3 rounded-2xl border border-white/20 bg-white/60 backdrop-blur-md shadow-sm supports-[backdrop-filter]:bg-white/50 sticky top-14 z-50"},_t={key:0,class:"text-center py-4"},bt={key:1,class:"space-y-4"},ft={key:0,class:"bg-sky-100/30 p-4 rounded-lg shadow mb-6 space-y-6"},xt={class:"grid md:grid-cols-2 gap-6"},ht={class:"bg-white border rounded-lg p-4 shadow"},gt={class:"overflow-x-auto"},wt={class:"min-w-full text-sm text-left text-gray-700 border"},kt={class:"px-4 py-1 text-center font-medium"},$t={class:"px-4 py-1 text-center"},Lt={class:"px-4 py-1 text-center"},St={class:"px-4 py-1 text-center"},Ut={class:"px-4 py-1 text-center"},Dt={class:"overflow-x-auto"},At={class:"min-w-full table-auto border-collapse border border-gray-200 bg-white rounded-md text-sm"},Ct={class:"border border-gray-300 px-2 py-2"},qt={class:"border border-gray-300 px-2 py-2 text-center"},Vt={class:"border border-gray-300 px-2 py-2 text-center"},Bt={class:"border border-gray-300 px-2 py-2 text-center"},Tt={class:"border border-gray-300 px-2 py-2"},jt={class:"border border-gray-300 px-2 py-2"},Mt=["innerHTML"],Ft={class:"border border-gray-300 px-2 py-2 text-center"},Rt={class:"border border-gray-300 px-2 py-2"},Nt={class:"border border-gray-300 px-2"},Yt={class:"flex justify-center gap-2"},It=["onClick"],zt={key:0},Ht={key:0},Wt={class:"text-center py-2",colspan:"6"},Et={key:0,class:"fixed inset-0 z-[1000] bg-black bg-opacity-50 flex items-center justify-center"},Pt={class:"bg-white rounded-lg w-full max-w-4xl max-h-[90vh] overflow-y-auto shadow-lg p-4 relative"},ds={__name:"AdminLeaveApplication",setup(V){const F=pe(),o=ye(),h=de(),S=Z(),{user:w,leave_balances:L,leaveApplications:U,loading:B}=G(h),{userLeaveBalance:T}=G(S),k=x(o.query.year||h.selectedYear),a=x(o.query.search||""),r=new Date,y=x({year:Number(k.value)||r.getFullYear(),month:r.getMonth()+1,day:r.getDate()}),$=z(()=>{var p;return((p=y.value)==null?void 0:p.year)??r.getFullYear()}),n=x({company_id:o.query.company_id||"",department_id:o.query.department_id||"all",line_type:o.query.line_type||"all",employee_id:o.query.employee_id||""}),f=x(!1),R=x(!1),j=async()=>{const p={selectedYear:k.value,selectedStatus:h.selectedStatus,query:a.value};n.value.employee_id?(p.user_id=n.value.employee_id,B.value=!0,await h.fetchYearlyUserLeaveApplications(p),B.value=!1):U.value=[]};oe(async()=>{await j(),o.query.employee_id&&await S.fetchUserLeaveBalances(o.query.employee_id,{year:$.value})}),H(()=>o.query.employee_id,async p=>{p&&await S.fetchUserLeaveBalances(p,{year:$.value})}),H($,async p=>{p&&(k.value=p,await j(),n.value.employee_id&&await S.fetchUserLeaveBalances(n.value.employee_id,{year:p}))});const Y=z(()=>U.value||[]),c=()=>F.go(-1),s=async()=>{F.replace({query:{...o.query,company_id:n.value.company_id,department_id:n.value.department_id,line_type:n.value.line_type,employee_id:n.value.employee_id}}),await j()},u=()=>{R.value=!0},v=async()=>{f.value=!1,await j()},b=new Date().getFullYear(),m=x([]);for(let p=2023;p<=b;p++)m.value.push(p);const D=async p=>{confirm("Are you sure to delete this application?")&&(await h.deleteLeaveApplication(p),await j())},P=()=>{R.value=!1,S.fetchUserLeaveBalances(o.query.employee_id,{year:$.value})},I=p=>p?new Date(p).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):"";return(p,l)=>{var X,ee;const K=me("RouterLink");return d(),i(N,null,[e("div",mt,[e("div",{class:"flex items-center justify-between gap-2"},[e("button",{class:"btn-3",onClick:c},l[8]||(l[8]=[e("i",{class:"far fa-arrow-left"},null,-1),e("span",{class:"hidden md:flex"},"Back",-1)])),l[9]||(l[9]=e("h1",{class:"title-md md:title-lg flex-wrap text-center"},"Annual Leave History",-1)),l[10]||(l[10]=e("div",null,null,-1))]),e("div",vt,[C(xe,{company_id:n.value.company_id,"onUpdate:company_id":l[1]||(l[1]=t=>n.value.company_id=t),department_id:n.value.department_id,"onUpdate:department_id":l[2]||(l[2]=t=>n.value.department_id=t),employee_id:n.value.employee_id,"onUpdate:employee_id":l[3]||(l[3]=t=>n.value.employee_id=t),line_type:n.value.line_type,"onUpdate:line_type":l[4]||(l[4]=t=>n.value.line_type=t),"with-type":!0,"initial-value":p.$route.query,onFilterChange:s},{default:Q(()=>[C(we,{modelValue:y.value,"onUpdate:modelValue":l[0]||(l[0]=t=>y.value=t),"show-year":!0,"show-month":!1,"show-date":!1,label:"Year"},null,8,["modelValue"])]),_:1},8,["company_id","department_id","employee_id","line_type","initial-value"])]),M(h).loading?(d(),i("div",_t,[C(ne)])):(d(),i("div",bt,[(X=n.value)!=null&&X.employee_id?(d(),i("div",ft,[e("div",xt,[C(he,{user:M(w)},null,8,["user"]),e("div",ht,[e("div",{class:"flex justify-between items-start"},[l[11]||(l[11]=e("h3",{class:"text-lg font-semibold text-gray-700 mb-4"},"Leave Balance",-1)),e("button",{onClick:u,type:"button",class:"btn-2"},"Set Leave Balance")]),e("div",gt,[e("table",wt,[l[12]||(l[12]=e("thead",{class:"bg-gray-100 text-xs uppercase"},[e("tr",null,[e("th",{class:"px-4 py-2 text-center"},"Type"),e("th",{class:"px-4 py-2 text-center"},"Total"),e("th",{class:"px-4 py-2 text-center"},"Used"),e("th",{class:"px-4 py-2 text-center"},"Pending"),e("th",{class:"px-4 py-2 text-center"},"Remaining")])],-1)),e("tbody",null,[(d(!0),i(N,null,W(M(T),t=>(d(),i("tr",{key:t.id,class:"border-t hover:bg-gray-50"},[e("td",kt,_(t.name),1),e("td",$t,_(t.annual_quota),1),e("td",Lt,_(t.used_days),1),e("td",St,_(t==null?void 0:t.pending_days),1),e("td",Ut,_(t.remaining_days),1)]))),128))])])])])])])):A("",!0),e("div",Dt,[e("table",At,[l[17]||(l[17]=e("thead",null,[e("tr",{class:"bg-gray-200"},[e("th",{class:"border border-gray-300 px-2 py-1 text-center"},"#"),e("th",{class:"border border-gray-300 px-2 py-1 text-center"},"Created Date"),e("th",{class:"border border-gray-300 px-2 py-1 text-center"},"Last Working Day"),e("th",{class:"border border-gray-300 px-2 py-1 text-center"},"Resumption Date"),e("th",{class:"border border-gray-300 px-2 py-1 text-center"},"Leave Period"),e("th",{class:"border border-gray-300 px-2 py-1 text-center"},"Total Days"),e("th",{class:"border border-gray-300 px-2 py-1 text-center"},"Leave Type"),e("th",{class:"border border-gray-300 px-2 py-1 text-center"},"Status"),e("th",{class:"border border-gray-300 px-2 py-1 text-center"},"Action")])],-1)),e("tbody",null,[(d(!0),i(N,null,W(Y.value,(t,te)=>{var se;return d(),i("tr",{key:te,class:"border-b border-gray-200 hover:bg-blue-200"},[e("td",Ct,_(te+1),1),e("td",qt,_(I(t==null?void 0:t.created_at)),1),e("td",Vt,_(I(t==null?void 0:t.last_working_date)),1),e("td",Bt,_(I(t==null?void 0:t.resumption_date)),1),e("td",Tt,_(t==null?void 0:t.leave_period),1),e("td",jt,[e("div",{innerHTML:(t==null?void 0:t.duration)||(t==null?void 0:t.total_leave_days)},null,8,Mt)]),e("td",Ft,_([...new Set((se=t==null?void 0:t.leave_days)==null?void 0:se.map(E=>{var ae;return(ae=E==null?void 0:E.leave_type)==null?void 0:ae.name}))].join(",")),1),e("td",Rt,_((t==null?void 0:t.status)||"N/A"),1),e("td",Nt,[e("div",Yt,[C(K,{to:{name:"LeaveApplicationShow",params:{id:t==null?void 0:t.id}},class:"btn-icon",target:"_blank"},{default:Q(()=>l[13]||(l[13]=[e("i",{class:"far fa-eye"},null,-1)])),_:2,__:[13]},1032,["to"]),["Approved","Rejected"].includes(t==null?void 0:t.status)?A("",!0):(d(),J(K,{key:0,to:{name:"LeaveApplicationEdit",params:{id:t==null?void 0:t.id}},class:"btn-icon",target:"_blank"},{default:Q(()=>l[14]||(l[14]=[e("i",{class:"far fa-edit text-orange-600"},null,-1)])),_:2,__:[14]},1032,["to"])),e("button",{onClick:E=>D(t==null?void 0:t.id),class:"btn-icon text-red-500"},l[15]||(l[15]=[e("i",{class:"far fa-trash"},null,-1)]),8,It)])])])}),128)),Y.value.length?A("",!0):(d(),i("tr",zt,l[16]||(l[16]=[e("td",{colspan:"7",class:"p-1 text-center text-red-500"},"No application found",-1)])))]),e("tfoot",null,[(ee=n.value)!=null&&ee.employee_id?(d(),i("tr",Ht,[e("th",Wt,[e("button",{onClick:l[5]||(l[5]=t=>f.value=!0),class:"text-white font-semibold px-4 py-2 rounded-full shadow-md bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 transition"}," + Add Application ")])])):A("",!0)])])])]))]),C(yt,{show:R.value,user:M(w),onClose:P},null,8,["show","user"]),(d(),J(ve,{to:"body"},[f.value?(d(),i("div",Et,[e("div",Pt,[e("button",{class:"absolute top-2 right-2 text-gray-500 hover:text-red-500 text-xl font-bold",onClick:l[6]||(l[6]=t=>f.value=!1)}," Ã— "),C(et,{userInfo:M(w),onClose:l[7]||(l[7]=t=>f.value=!1),onFormSuccessClosed:v},null,8,["userInfo"])])])):A("",!0)]))],64)}}};export{ds as default};
