import{J as D,r as d,q as i,K as o,a2 as S}from"./index-DLIEvkXB.js";const b=D("manualAttendance",()=>{const s=d([]),v=d(null),l=d(!1),n=d(null),f=d(new Date().toISOString().substring(0,7)),h=d(""),w=async(e={})=>{var r,t;l.value=!0,n.value=null;try{const a=await o.get("/manual-attendances",{params:e});s.value=a==null?void 0:a.data}catch(a){n.value=((t=(r=a.response)==null?void 0:r.data)==null?void 0:t.message)||"Failed to fetch manual attendances",console.error("Error fetching manual attendances:",a)}finally{l.value=!1}},p=async(e={})=>{var r,t;l.value=!0,n.value=null;try{const a=await o.get("/user-manual-attendances",{params:e});s.value=a.data.data}catch(a){n.value=((t=(r=a.response)==null?void 0:r.data)==null?void 0:t.message)||"Failed to fetch manual attendances",console.error("Error fetching manual attendances:",a)}finally{l.value=!1}},g=async e=>{var r,t;l.value=!0,n.value=null;try{const a=await o.get(`/manual-attendances/${e}`);v.value=a.data,await S().fetchApprovalPermissions("manual_attendance_applications",v.value.id)}catch(a){n.value=((t=(r=a.response)==null?void 0:r.data)==null?void 0:t.message)||`Failed to fetch manual attendance (ID: ${e})`,console.error(`Error fetching manual attendance with id ${e}:`,a)}finally{l.value=!1}},$=async e=>{var r,t;l.value=!0,n.value=null;try{const a=await o.post("/manual-attendances",e);return s.value.push(a.data.data),a.data.data}catch(a){throw n.value=((t=(r=a.response)==null?void 0:r.data)==null?void 0:t.message)||"Failed to create manual attendance",console.error("Error creating manual attendance:",a),new Error(n.value)}finally{l.value=!1}},A=async e=>{var r,t;l.value=!0,n.value=null;try{const a=await o.post("manual-attendance/bulk-store",e);return Array.isArray(a.data.data)&&s.value.push(...a.data.data),a.data}catch(a){throw console.error("Error creating manual attendance:",a),n.value=((t=(r=a.response)==null?void 0:r.data)==null?void 0:t.message)||"Failed to create manual attendance",new Error(n.value)}finally{l.value=!1}},E=async(e,r)=>{var t,a;l.value=!0,n.value=null;try{const c=await o.put(`/manual-attendances/${e}`,r),u=s.value.findIndex(m=>m.id===e);return u!==-1&&(s.value[u]=c.data.data),c.data.data}catch(c){throw n.value=((a=(t=c.response)==null?void 0:t.data)==null?void 0:a.message)||`Failed to update manual attendance (ID: ${e})`,console.error(`Error updating manual attendance with id ${e}:`,c),new Error(n.value)}finally{l.value=!1}},y=async e=>{var r,t;l.value=!0,n.value=null;try{await o.delete(`/manual-attendances/${e}`),s.value=s.value.filter(a=>a.id!==e)}catch(a){throw n.value=((t=(r=a.response)==null?void 0:r.data)==null?void 0:t.message)||`Failed to delete manual attendance (ID: ${e})`,console.error(`Error deleting manual attendance with id ${e}:`,a),new Error(n.value)}finally{l.value=!1}},I=async e=>{var r,t;l.value=!0,n.value=null;try{const a=await o.post(`/manual-attendances/${e==null?void 0:e.id}/in-charge-accept`,e),c=s.value.findIndex(u=>u.id===id);return c!==-1&&(s.value[c]=a.data.data),a.data.data}catch(a){throw n.value=((t=(r=a.response)==null?void 0:r.data)==null?void 0:t.message)||`Failed to accept in-charge for manual attendance (ID: ${id})`,console.error(`Error accepting in-charge for manual attendance with id ${id}:`,a),new Error(n.value)}finally{l.value=!1}},x=async e=>{var r,t;l.value=!0,n.value=null;try{const a=await o.post(`/manual-attendances/${e==null?void 0:e.id}/recommend-by-accept`,e),c=s.value.findIndex(u=>u.id===id);return c!==-1&&(s.value[c]=a.data.data),a.data.data}catch(a){throw n.value=((t=(r=a.response)==null?void 0:r.data)==null?void 0:t.message)||`Failed to accept recommendation for manual attendance (ID: ${id})`,console.error(`Error accepting recommendation for manual attendance with id ${id}:`,a),new Error(n.value)}finally{l.value=!1}},F=async e=>{var r,t;l.value=!0,n.value=null;try{const a=await o.post(`/manual-attendances/${e==null?void 0:e.id}/approved-by-accept`,e),c=s.value.findIndex(u=>u.id===id);return c!==-1&&(s.value[c]=a.data.data),a.data.data}catch(a){throw n.value=((t=(r=a.response)==null?void 0:r.data)==null?void 0:t.message)||`Failed to approve manual attendance (ID: ${e==null?void 0:e.id})`,console.error(`Error approving manual attendance with id ${e==null?void 0:e.id}:`,a),new Error(n.value)}finally{l.value=!1}},M=async(e,r)=>{var t,a;l.value=!0,n.value=null;try{const c=await o.post(`/manual-attendances/${e}/reject`,{rejection_reason:r}),u=s.value.findIndex(m=>m.id===e);return u!==-1&&(s.value[u]=c.data.data),c.data.data}catch(c){throw n.value=((a=(t=c.response)==null?void 0:t.data)==null?void 0:a.message)||`Failed to reject manual attendance (ID: ${e})`,console.error(`Error rejecting manual attendance with id ${e}:`,c),new Error(n.value)}finally{l.value=!1}};return{manualAttendances:i(()=>s.value),manualAttendance:i(()=>v.value),loading:i(()=>l.value),error:i(()=>n.value),selectedMonth:f,selectedStatus:h,fetchManualAttendances:w,fetchManualAttendanceById:g,createManualAttendance:$,updateManualAttendance:E,deleteManualAttendance:y,inChargeAccept:I,recommendByAccept:x,approvedByAccept:F,rejectManualAttendance:M,fetchUserManualAttendances:p,createBulkManualAttendance:A}});export{b as u};
