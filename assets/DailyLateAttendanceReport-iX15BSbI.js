import{u as V,b as B,s as g,r as v,e as U,A as b,c as o,o as d,a as t,g as p,C as M,F as h,y as k,t as n,h as y,l as w,v as N,L as P,x as T}from"./index-B4oGRh81.js";import{L as F}from"./LoaderView-DYQXSjPf.js";import{_ as W}from"./MultiselectDropdown-CwSj4CoB.js";import{u as j}from"./attendance-Bgs9aSht.js";import{u as z}from"./company-0SzHuuR8.js";import{S as E}from"./sweetalert2.esm.all-9Qm2jZ7z.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vue-multiselect.esm-C4rywuoe.js";const K={class:"space-y-2 px-4"},O={class:"flex flex-wrap items-center gap-2"},$=["value"],G={key:0,class:"text-center py-4"},H={key:1,class:"space-y-4"},I={key:0,class:"overflow-x-auto"},J={class:"min-w-full table-auto border-collapse border border-gray-200 bg-white rounded-md text-sm"},Q={class:"border border-gray-300 px-2"},X={class:"border border-gray-300 px-2"},Y={class:"border border-gray-300 px-2"},Z={class:"border border-gray-300 px-2"},ee={class:"border border-gray-300 px-2"},te={class:"border border-gray-300 px-2"},ae={class:"border border-gray-300 px-2"},se={class:"border border-gray-300 px-2"},le={class:"border border-gray-300 px-2"},oe={key:0},de={key:1,class:"text-gray-500 italic text-xs"},ne={class:"border border-gray-300 px-2"},ie={key:1,class:"text-center text-red-500 text-xl italic mt-10"},ge={__name:"DailyLateAttendanceReport",setup(re){const u=V(),i=B(),f=j(),x=z(),{dailyLateLogs:q,isLoading:L,selectedDate:r}=g(f),{companies:S,employees:C}=g(x),l=v(i.query.company_id||""),c=v("");i.query.date&&(r.value=i.query.date),U(async()=>{await x.fetchCompanies(),l.value&&(await x.fetchEmployee(l.value),await m())}),b(l,async a=>{a&&(await x.fetchEmployee(a),c.value=""),u.replace({query:{...i.query,company_id:a||"",employee_id:""}})}),b(c,async a=>{a!=null&&a.id&&await m(),u.replace({query:{...i.query,employee_id:(a==null?void 0:a.id)||""}})}),b(r,a=>{u.replace({query:{...i.query,date:a}})}),b(l,a=>{u.replace({query:{...i.query,date:a}})});const m=async()=>{l.value&&await f.getAttendanceLateReport(l.value,c.value.id,r.value,"daily")},A=async()=>{l.value?await f.lateReportDownloadExcel(l.value,c.value.id,r.value,"daily"):E.fire({icon:"warning",title:"Missing Selection!",text:"Please select Company and Employee first!",confirmButtonText:"OK"})},D=()=>{u.go(-1)},R=a=>a==="Pending"?"text-yellow-700":a==="Approved"?"text-green-700":"text-red-500";return(a,s)=>(d(),o("div",K,[t("div",{class:"flex items-center justify-between gap-2"},[t("button",{class:"btn-3",onClick:D},s[3]||(s[3]=[t("i",{class:"far fa-arrow-left"},null,-1),t("span",{class:"hidden md:flex"},"Back",-1)])),s[5]||(s[5]=t("h1",{class:"title-md md:title-lg flex-wrap text-center"},"Daily Late Reports",-1)),t("div",{class:"flex gap-4"},[t("button",{type:"button",onClick:A,class:"btn-3"},s[4]||(s[4]=[t("i",{class:"far fa-file-excel text-2xl text-green-500"},null,-1)]))])]),t("div",O,[t("div",null,[p(t("select",{id:"user-filter","onUpdate:modelValue":s[0]||(s[0]=e=>l.value=e),class:"input-1"},[s[6]||(s[6]=t("option",{value:""},"Select Company",-1)),(d(!0),o(h,null,k(y(S),e=>(d(),o("option",{key:e.id,value:e.id},n(e.name),9,$))),128))],512),[[M,l.value]])]),t("div",null,[w(W,{modelValue:c.value,"onUpdate:modelValue":s[1]||(s[1]=e=>c.value=e),options:y(C),multiple:!1,label:"label",placeholder:"Please select employee..."},null,8,["modelValue","options"])]),t("div",null,[p(t("input",{id:"user-filter","onUpdate:modelValue":s[2]||(s[2]=e=>P(r)?r.value=e:null),onChange:m,type:"date",class:"input-1"},null,544),[[N,y(r)]])])]),y(L)?(d(),o("div",G,[w(F)])):(d(),o("div",H,[l.value?(d(),o("div",I,[t("table",J,[s[7]||(s[7]=t("thead",null,[t("tr",{class:"bg-gray-200"},[t("th",{class:"border border-gray-300 px-2 text-left"},"#"),t("th",{class:"border border-gray-300 px-2 text-left"},"Date"),t("th",{class:"border border-gray-300 px-2 text-left"},"Weekday"),t("th",{class:"border border-gray-300 px-2 text-left"},"Employee Name"),t("th",{class:"border border-gray-300 px-2 text-left"},"Company"),t("th",{class:"border border-gray-300 px-2 text-left"},"Department"),t("th",{class:"border border-gray-300 px-2 text-left"},"Entry Time"),t("th",{class:"border border-gray-300 px-2 text-left"},"Late Duration"),t("th",{class:"border border-gray-300 px-2 text-left"},"Action"),t("th",{class:"border border-gray-300 px-2 text-left"},"Shift")])],-1)),t("tbody",null,[(d(!0),o(h,null,k(y(q),(e,_)=>(d(),o("tr",{key:e.id||_,class:"border-b border-gray-200 hover:bg-blue-200"},[t("td",Q,n(_+1),1),t("td",X,n(e==null?void 0:e.date),1),t("td",Y,n(e==null?void 0:e.weekday),1),t("td",Z,n((e==null?void 0:e.user_name)||"Unknown"),1),t("td",ee,n((e==null?void 0:e.company_name)||"Unknown"),1),t("td",te,n((e==null?void 0:e.department_name)||"Unknown"),1),t("td",ae,n(e==null?void 0:e.entry_time),1),t("td",se,n(e==null?void 0:e.late_duration),1),t("td",le,[e!=null&&e.short_leave?(d(),o("div",oe,[t("span",{class:T(R(e.short_leave.status))},n(e.short_leave.status||"Waiting"),3)])):(d(),o("div",de,"No Application"))]),t("td",ne,n(e==null?void 0:e.shift_name),1)]))),128))])])])):(d(),o("div",ie," Please select company "))]))]))}};export{ge as default};
