import{u as k,b as S,a2 as U,r as d,e as B,q as O,A as f,c as _,o as n,a as l,f as w,g as V,p as C,k as g,h as L,v as M}from"./index-Cre-8IDm.js";import{_ as b}from"./EmployeeFilter-D21XMyFk.js";import{L as N}from"./LoaderView-CUEGBGwi.js";import{_ as A}from"./OvertimeDataList-B54JFklq.js";import{u as D}from"./overtime-CwCJ5IIv.js";import{u as F}from"./user-CgP7qYLO.js";import"./MultiselectDropdown-DTVNbx1O.js";import"./company-CzA75xz6.js";import"./department-BntmkjyX.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./AcceptAndRejectHandler-BIFghSyv.js";const I={class:"px-4 space-y-4"},R={class:"w-full flex flex-wrap gap-4 items-center md:w-auto"},$={key:2},Y={__name:"OvertimeList",setup(j){const u=k(),o=S(),x=U(),m=D(),c=F(),s=d(null),i=d(o.query.month||new Date().toISOString().slice(0,7)),a=d({company_id:o.query.company_id||"",department_id:o.query.department_id||"all",type:o.query.type||"all",employee_id:o.query.employee_id||"",category:""});B(async()=>{a.value.employee_id&&(await y(a.value.employee_id),await r())});const y=async t=>{t?(await c.fetchUser(t),s.value=c.user):s.value=null},v=O(()=>{var t;return((t=m.overtimes)==null?void 0:t.map(e=>e.id))||[]}),r=async()=>{var t;a.value.employee_id&&i.value&&(await m.fetchUserMonthlyOvertimes(a.value.employee_id,i.value),(t=v.value)!=null&&t.length&&await x.fetchApprovalPermissionsByUserApplicationIds("overtime_applications",v.value))};f(i,t=>{u.replace({query:{...o.query,date:t}}),r()}),f(()=>a.value.employee_id,async(t,e)=>{t&&t!==e&&(await y(t),await r())});const h=()=>u.go(-1),q=()=>{u.replace({query:{...o.query,company_id:a.value.company_id,department_id:a.value.department_id,type:a.value.type,employee_id:a.value.employee_id||o.query.employee_id}})};return(t,e)=>(n(),_("div",I,[l("div",{class:"flex items-center justify-between gap-2"},[l("button",{class:"btn-3",onClick:h},e[2]||(e[2]=[l("i",{class:"far fa-arrow-left"},null,-1),l("span",{class:"hidden md:flex"},"Back",-1)])),e[3]||(e[3]=l("h1",{class:"title-md md:title-lg flex-wrap text-center"},"Monthly Overtime",-1)),e[4]||(e[4]=l("div",null,null,-1))]),l("div",R,[C(b,{modelValue:a.value,"onUpdate:modelValue":e[0]||(e[0]=p=>a.value=p),"initial-value":g(o).query,onFilterChange:q},null,8,["modelValue","initial-value"]),l("div",null,[L(l("input",{id:"monthSelect",type:"month","onUpdate:modelValue":e[1]||(e[1]=p=>i.value=p),onChange:r,class:"input-1"},null,544),[[M,i.value]])])]),g(m).isLoading?(n(),w(N,{key:0})):(n(),w(A,{key:1,user:s.value},null,8,["user"])),s.value?V("",!0):(n(),_("div",$,e[5]||(e[5]=[l("p",{class:"text-gray-400 text-center text-2xl italic"},"Select an employee, please.",-1)])))]))}};export{Y as default};
