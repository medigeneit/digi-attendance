import{B as w,r as l,C as o}from"./index-Cf6qM8w5.js";const C=w("kpiAssignments",()=>{const f=l([]),g=l(null),c=l(!1),u=l(!1),s=l(null),d=l({}),m=e=>{var a,t;return((t=(a=e==null?void 0:e.response)==null?void 0:a.data)==null?void 0:t.message)||(e==null?void 0:e.message)||"Something went wrong"};function _(e={}){const a={company_id:e.company_id?Number(e.company_id):void 0,department_id:e.department_id?Number(e.department_id):void 0,line_type:e.line_type&&e.line_type!=="all"?String(e.line_type):void 0,user_id:e.user_id?Number(e.user_id):e.employee_id?Number(e.employee_id):void 0,per_page:e.per_page?Number(e.per_page):void 0,page:e.page?Number(e.page):void 0};return Object.fromEntries(Object.entries(a).filter(([,t])=>t!=null&&t!==""))}let i;async function p(e={}){var a;c.value=!0,s.value=null;try{(a=i==null?void 0:i.abort)==null||a.call(i)}catch{}i=new AbortController;try{const t=_(e);d.value={...t};const n=await o.get("/assignments",{params:t,signal:i.signal}),r=n==null?void 0:n.data;f.value=(r==null?void 0:r.data)??r??[],g.value=(r==null?void 0:r.meta)??null}catch(t){if(t.name==="CanceledError"||t.code==="ERR_CANCELED")return;throw s.value=m(t),t}finally{c.value=!1}}async function v(e){u.value=!0,s.value=null;try{const a=await o.post("/assignments",e);return await p(d.value),a==null?void 0:a.data}catch(a){throw s.value=m(a),a}finally{u.value=!1}}async function y(e="",a={}){var r;const t={q:e,..._(a)},n=await o.get("/available-criteria",{params:t});return((r=n==null?void 0:n.data)==null?void 0:r.data)||(n==null?void 0:n.data)||[]}async function b(e){u.value=!0,s.value=null;try{const a=await o.post(`/assignments/${e}/close`);return await p(d.value),a==null?void 0:a.data}catch(a){throw s.value=m(a),a}finally{u.value=!1}}return{items:f,meta:g,isLoading:c,isSaving:u,error:s,fetchList:p,create:v,close:b,fetchAvailableCriteria:y}});export{C as u};
