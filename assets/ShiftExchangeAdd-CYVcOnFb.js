import{u as R,r as i,q as A,b as D,c as n,a as t,l as x,m as F,w as H,t as u,h as m,d as f,A as M,F as N,x as j,v as h,e as T,n as W,o as r,k as O,g as $}from"./index-D6cR4M0f.js";import{u as z}from"./exchange-N42w39Fo.js";import{u as G}from"./user-DT2bsl1e.js";import{L as I}from"./LoaderView-DGLPbxxN.js";import{_ as J}from"./MultiselectDropdown-B_fqfxde.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vue-multiselect.esm-bWEHvIZd.js";const K={class:"max-w-3xl mx-auto p-4 space-y-4"},P={class:"flex items-center justify-between gap-2"},Q={key:0,class:"text-center"},X={class:"title-lg text-center"},Y={class:"block text-sm font-medium"},Z=["value"],ee={key:0,class:"text-red-500 text-sm"},ie={__name:"ShiftExchangeAdd",setup(te){const _=$(),C=z(),k=G(),l=R(),p=i(""),s=i({shift_id:"",exchange_type:"shift",selected_date:"",works_in_hand:"",handover_user_id:"",reason:""}),v=i(!1),d=i(null),B=async()=>{var o;v.value=!0,d.value=null;try{const e={user_id:(o=l==null?void 0:l.user)==null?void 0:o.id,shift_id:s.value.shift_id,exchange_type:s.value.exchange_type,current_date:s.value.selected_date,exchange_date:s.value.selected_date,works_in_hand:s.value.works_in_hand,handover_user_id:s.value.handover_user_id,reason:s.value.reason},c=await C.createExchange(e);_.push({name:"ExchangeShow",params:{id:c.id}})}catch(e){d.value=e.message||"Failed to submit shift exchange request"}finally{v.value=!1}};A(()=>p.value,o=>{s.value.handover_user_id=o==null?void 0:o.id}),D(()=>{k.fetchHandoverDepartmentWiseEmployees(),l.fetchUser()});const L=()=>{_.go(-1)};return(o,e)=>{var b,g,w,y,S,E,U,V,q;const c=W("RouterLink");return r(),n("div",K,[t("div",P,[t("button",{class:"btn-3",onClick:L},e[5]||(e[5]=[t("i",{class:"far fa-arrow-left"},null,-1),t("span",{class:"hidden md:flex"},"Back",-1)])),e[7]||(e[7]=t("h1",{class:"title-md md:title-lg flex-wrap text-center"},"Shift Exchange Request",-1)),t("div",null,[x(c,{to:"/",class:"btn-2"},{default:F(()=>e[6]||(e[6]=[O("Home")])),_:1})])]),v.value?(r(),n("div",Q,[x(I)])):(r(),n("form",{key:1,onSubmit:H(B,["prevent"]),class:"space-y-4 card-bg md:p-8 p-4"},[t("div",null,[t("h4",X,u((w=(g=(b=m(l))==null?void 0:b.user)==null?void 0:g.company)==null?void 0:w.name),1),e[8]||(e[8]=t("p",{class:"text-center"},"Shift Change Application",-1))]),t("p",Y,"Current Shift: "+u((E=(S=(y=m(l))==null?void 0:y.user)==null?void 0:S.shift)==null?void 0:E.name),1),t("div",null,[e[10]||(e[10]=t("label",{for:"shift_id",class:"block text-sm font-medium"},"Exchange Shift",-1)),f(t("select",{id:"shift_id","onUpdate:modelValue":e[0]||(e[0]=a=>s.value.shift_id=a),class:"input-1 w-full",required:""},[e[9]||(e[9]=t("option",{value:"",disabled:""},"- Select Shift -",-1)),(r(!0),n(N,null,j((q=(V=(U=m(l))==null?void 0:U.user)==null?void 0:V.company)==null?void 0:q.shifts,a=>(r(),n("option",{key:a.id,value:a.id},u(a==null?void 0:a.name),9,Z))),128))],512),[[M,s.value.shift_id]])]),t("div",null,[e[11]||(e[11]=t("label",{for:"selected-date",class:"block text-sm font-medium"},"Select Date",-1)),f(t("input",{type:"date",id:"selected-date","onUpdate:modelValue":e[1]||(e[1]=a=>s.value.selected_date=a),class:"input-1 w-full",required:""},null,512),[[h,s.value.selected_date]])]),t("div",null,[e[12]||(e[12]=t("label",{for:"works-in-hand",class:"block text-sm font-medium"},"Reason",-1)),f(t("textarea",{id:"works-in-hand","onUpdate:modelValue":e[2]||(e[2]=a=>s.value.reason=a),class:"input-1 w-full",placeholder:"Enter details of reason"},null,512),[[h,s.value.reason]])]),t("div",null,[e[13]||(e[13]=t("label",{for:"works-in-hand",class:"block text-sm font-medium"},"Works in Hand (Optional)",-1)),f(t("textarea",{id:"works-in-hand","onUpdate:modelValue":e[3]||(e[3]=a=>s.value.works_in_hand=a),class:"input-1 w-full",placeholder:"Enter details of works in hand"},null,512),[[h,s.value.works_in_hand]])]),t("div",null,[e[14]||(e[14]=t("label",{for:"handover-user",class:"block text-sm font-medium"},"Handover User",-1)),x(J,{modelValue:p.value,"onUpdate:modelValue":e[4]||(e[4]=a=>p.value=a),options:m(k).handoverUsers,multiple:!1,required:!1,label:"Select User",labelFor:"user"},null,8,["modelValue","options"])]),d.value?(r(),n("div",ee,u(d.value),1)):T("",!0),e[15]||(e[15]=t("div",{class:"flex justify-center"},[t("button",{type:"submit",class:"btn-2"},"Submit")],-1))],32))])}}};export{ie as default};
