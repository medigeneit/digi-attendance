import{r as T,A as Q,x as M,c as v,o as u,h as O,g as f,a as t,B as X,w as h,q as P,F,E as U,y as Z,n as _,t as C,f as I,i as S,j as L,k as x,e as A,G as W,v as q}from"./index-8KAp3d5I.js";import{_ as tt}from"./CalenderView-sIxIsZ_t.js";import{u as V}from"./useTodoStore-BZ-zEk1o.js";import{b as j,g as R}from"./datetime-l2Vm98rT.js";import{O as B}from"./OverlyModal-mxY8Mgei.js";import"./uuid-DzodaSzx.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const et={class:"px-4 py-2 flex items-center bg-gray-50 group gap-2"},ot=["value"],nt=["value"],lt=["disabled"],at={key:4,class:"ml-4 md:ml-auto flex items-center gap-2"},st={key:5,class:"ml-4 md:ml-auto flex items-center gap-2"},it={__name:"TodoHeading",props:{selectedType:{type:String,default:"month-view"},selectedValue:{type:String,default:""},selected:{type:Object,default:()=>({type:"month-view",month:"",day:"",year:"",week:""})},loading:{type:Boolean,default:!1}},emits:["reloadClick","selectViewType","change"],setup(d,{emit:y}){const e=d,n=y,o=T();function r(){n("selectViewType",o.value),n("change",{...e.selected,type:o.value})}Q(()=>{var i;return(i=e.selected)==null?void 0:i.type},i=>o.value=i,{immediate:!0});const s=M(()=>o.value=="month-view"&&e.selected.year&&e.selected.month?[e.selected.year,e.selected.month-1,1]:o.value=="day-view"&&e.selected.year&&e.selected.month&&e.selected.day?[e.selected.year,e.selected.month-1,e.selected.day]:[new Date().getFullYear(),new Date().getMonth(),new Date().getDate()]);function l(){o.value=="month-view"&&p(new Date)}function a(){if(o.value=="month-view"){const i=new Date(...s.value);i.setMonth(i.getMonth()+1),p(i)}}function g(){if(o.value=="month-view"){const i=new Date(...s.value);i.setMonth(i.getMonth()-1),p(i)}}function w(){o.value=="day-view"&&p(new Date)}function c(){if(o.value=="day-view"){const i=new Date(...s.value);i.setDate(i.getDate()+1),p(i)}}function m(){if(o.value=="day-view"){const i=new Date(...s.value);i.setDate(i.getDate()-1),p(i)}}function p(i){n("change",{type:o.value,month:i.getMonth()+1,day:i.getDate(),year:i.getFullYear(),week:i.getDay()})}const D=M(()=>o.value=="month-view"?`${e.selected.year}-${e.selected.month.toString().padStart(2,"0")}`:o.value=="day-view"?`${e.selected.year}-${e.selected.month.toString().padStart(2,"0")}-${e.selected.day.toString().padStart(2,"0")}`:e.selected),k=()=>{var i;if(o.value=="month-view"){const[b,$]=(i=D==null?void 0:D.value)==null?void 0:i.split("-").map(Number),E=new Date(b,$-1,1);p(E)}if(o.value=="day-view"){const b=new Date(D==null?void 0:D.value);p(b)}};return(i,b)=>(u(),v("div",et,[O(t("select",{class:"px-2 h-7 border rounded","onUpdate:modelValue":b[0]||(b[0]=$=>o.value=$),onChange:r},b[2]||(b[2]=[t("option",{value:"day-view"},"Day",-1),t("option",{value:"month-view"},"Month",-1)]),544),[[X,o.value]]),o.value=="month-view"?(u(),v("input",{key:0,type:"month",value:D.value,onInput:k,class:"border px-2 rounded"},null,40,ot)):f("",!0),o.value=="day-view"?(u(),v("input",{key:1,type:"date",value:D.value,onInput:k,class:"border px-2 rounded"},null,40,nt)):f("",!0),o.value=="month-view"?(u(),v("button",{key:2,class:"btn-3 mx-4 h-7",onClick:h(l,["prevent"])}," Current Month ")):f("",!0),o.value=="day-view"?(u(),v("button",{key:3,class:"btn-3 mx-4 h-7",onClick:h(w,["prevent"])}," Today ")):f("",!0),t("button",{class:P(["btn-3 px-2 py-2 mx-4 size-7 disabled:text-gray-300 disabled:border-gray-300",{"animate-spin text-gray-300 border-gray-300 !bg-opacity-0":d.loading}]),onClick:b[1]||(b[1]=h($=>n("reloadClick"),["prevent"])),disabled:d.loading},b[3]||(b[3]=[t("i",{class:"fas fa-redo-alt"},null,-1)]),10,lt),o.value=="month-view"?(u(),v("div",at,[t("button",{class:"btn-2 h-7",onClick:h(g,["prevent"])},"Previous Month"),t("button",{class:"btn-2 h-7",onClick:h(a,["prevent"])},"Next Month")])):f("",!0),o.value=="day-view"?(u(),v("div",st,[t("button",{class:"btn-2 h-7",onClick:h(m,["prevent"])},"Previous Day"),t("button",{class:"btn-2 h-7",onClick:h(c,["prevent"])},"Next Day")])):f("",!0)]))}},dt={key:0,class:"fa fa-exclamation-circle text-red-400",title:"Pending"},rt={key:1,class:"fa fa-exclamation-square text-yellow-400",title:"Wording"},ut={key:2,class:"fa fa-check-square text-green-400",title:"Completed"},Y={__name:"TodoStatusIcon",props:{todo:{type:Object,required:!0}},setup(d){return(y,e)=>(u(),v(F,null,[d.todo.status=="PENDING"?(u(),v("i",dt)):f("",!0),d.todo.status=="WORKING"?(u(),v("i",rt)):f("",!0),d.todo.status=="COMPLETED"?(u(),v("i",ut)):f("",!0)],64))}},ct=["onClick","title"],mt={class:"line-clamp-1"},vt={key:0,class:"text-purple-600 text-center"},K={__name:"TodosInDate",props:{date:{type:String,required:!0},maxItems:{type:[Number,String],default:3}},emits:["clickTodo"],setup(d,{emit:y}){const e=d,n=y,{getTodosByDate:o}=V(),r=M(()=>{let s=[],l=!1,a=[];if(typeof o=="function"){const g=o(e.date);if(a=Array.isArray(g)?g:[],e.maxItems==="all")return{all:a,items:a,moreItemsCount:0};s=a.slice(0,e.maxItems),l=a.length-s.length}return{all:a,items:s,moreItemsCount:l}});return(s,l)=>(u(),v("div",null,[r.value.items.length===0?U(s.$slots,"noTodos",{key:0},()=>[l[0]||(l[0]=t("div",{class:"text-gray-400 text-center"},"No todos",-1))]):(u(),v(F,{key:1},[(u(!0),v(F,null,Z(r.value.items,a=>U(s.$slots,"todoItem",{key:a.id,todo:a,moreItemsCount:r.value.moreItemsCount},()=>[t("div",{class:P(["px-1 mb-2 text-sm rounded cursor-pointer flex items-center gap-2",{"bg-sky-50 text-sky-900 hover:bg-sky-700 hover:text-white border border-sky-300":a.status!=="COMPLETED","bg-green-500 text-white":a.status==="COMPLETED"}]),onClick:h(g=>n("clickTodo",a),["prevent","stop"]),title:a.title},[_(Y,{todo:a,class:"text-sm"},null,8,["todo"]),t("div",mt,C(a.title),1)],10,ct)])),128)),r.value.moreItemsCount>0?(u(),v("div",vt," + "+C(r.value.moreItemsCount)+" more todo"+C(r.value.moreItemsCount>1?"s":""),1)):f("",!0)],64))]))}},yt={class:"relative"},pt=["onClick"],ft=["onClick"],bt={__name:"TodosInCalenderView",props:{month:{type:String,required:!0,validator:d=>/^\d{4}-(0[1-9]|1[0-2])$/.test(d)}},emits:["dateClick","clickTodo","clickDateCell"],setup(d,{emit:y}){const e=y;return(n,o)=>(u(),v("div",yt,[d.month?(u(),I(tt,{key:0,month:d.month,class:"border-t border-blue-200/50 relative"},{date:S(({day:r,yearMonthDate:s,isCurrentMonth:l})=>[t("div",{class:"border p-3 hover:bg-sky-50 cursor-pointer",onClick:h(a=>e("clickDateCell",s),["prevent"])},[t("button",{class:P([{"text-gray-300":!l,"text-sky-400":l},"text-center mb-2 font-semibold hover:bg-sky-200 w-full rounded"]),onClick:h(a=>e("dateClick",s),["prevent","stop"])},C(r),11,ft),t("div",null,[_(K,{date:s,onClickTodo:o[0]||(o[0]=a=>e("clickTodo",a))},{noTodos:S(()=>o[1]||(o[1]=[t("span",null,null,-1)])),_:2},1032,["date"])])],8,pt)]),_:1},8,["month"])):f("",!0)]))}},kt={class:"relative bg-white p-4"},gt={class:"max-w-6xl mx-auto border rounded my-10"},ht={class:"text-lg font-semibold mb-4 text-gray-700 border-b py-2 px-4 flex items-center"},xt={class:"ml-auto"},Ct=["onClick"],wt={class:"line-clamp-2 ml-2"},$t={class:"ml-auto"},_t=["onClick"],Dt={__name:"TodosInDailyView",props:{date:{type:String,required:!0}},emits:["clickTodo","clickAdd","clickEdit"],setup(d,{emit:y}){const e=d,n=y,o=M(()=>new Date(e.date));return(r,s)=>(u(),v("div",kt,[t("div",gt,[t("div",ht,[L(C(x(j)(o.value,{weekDay:"long"}))+" ",1),t("div",xt,[t("button",{class:"btn btn-icon",onClick:s[0]||(s[0]=h(l=>n("clickAdd"),["prevent"]))},s[1]||(s[1]=[t("i",{class:"fas fa-plus"},null,-1)]))])]),_(K,{date:d.date,"max-items":10,class:"my-8 w-full px-4"},{todoItem:S(({todo:l})=>[t("div",{class:"border rounded px-4 py-3 my-4 hover:bg-sky-50 cursor-pointer flex items-center",onClick:h(a=>n("clickTodo",l),["prevent"])},[_(Y,{todo:l},null,8,["todo"]),t("div",wt,C(l.title),1),t("div",$t,[t("button",{class:"btn-icon bg-sky-700 hover:bg-sky-800 hover:text-white",onClick:h(a=>n("clickEdit",l),["prevent","stop"])},s[2]||(s[2]=[t("i",{class:"fas fa-pen"},null,-1)]),8,_t)])],8,Ct)]),noTodos:S(()=>s[3]||(s[3]=[t("div",{class:"flex min-h-[38vh] items-center justify-center text-gray-400 text-center rounded-md"}," No Todos ",-1)])),_:1},8,["date"])])]))}},Tt={class:"bg-white border-t px-4 py-4 sticky bottom-0 rounded-b-md"},St={key:0,class:"mb-4 text-red-500 font-medium"},Mt={key:1,class:"mb-4 text-blue-500 font-medium"},Et={class:"flex justify-between items-center gap-4"},It=["disabled"],J={__name:"FormHandler",props:{isSubmitting:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},error:{type:String,default:""}},emits:["submit","clickCancel"],setup(d,{emit:y}){const e=y;return(n,o)=>(u(),v("form",{onSubmit:o[1]||(o[1]=h(r=>e("submit"),["prevent"]))},[U(n.$slots,"default"),t("div",Tt,[d.error?(u(),v("div",St,C(d.error),1)):f("",!0),d.isSubmitting?(u(),v("div",Mt,"Saving changes...")):f("",!0),U(n.$slots,"footer",{},()=>[t("div",Et,[t("button",{type:"button",onClick:o[0]||(o[0]=r=>e("clickCancel")),class:"btn-3"},"Cancel"),t("button",{disabled:d.isSubmitting||d.isLoading,type:"submit",class:"btn-2"},C(d.isSubmitting?"Saving...":"Save"),9,It)])])])],32))}},Nt={class:"p-4"},Ot={class:"mb-2"},Vt={class:"mb-4"},Ft={class:"mb-4"},Ut={__name:"TodoAddForm",props:{date:{type:String,default:R(new Date)}},emits:["update","cancelClick"],setup(d,{emit:y}){const e=d,n=T(),o=T(),r=V(),s=y,l=T({title:"",date:e.date||"",task_id:""});async function a(){n.value="submitting",await r.createTodo(l.value),console.log(l.value),n.value="",s("update")}const g=M(()=>new Date(e.date));return A(async()=>{var w;await W(),(w=o.value)==null||w.focus()}),(w,c)=>(u(),v("div",null,[_(J,{onSubmit:a,onClickCancel:c[2]||(c[2]=m=>s("cancelClick")),isSubmitting:n.value=="submitting",error:x(r).error},{default:S(()=>[c[6]||(c[6]=t("div",{class:"border-b py-2 px-4"},[t("h2",{class:"text-xl font-semibold"},"Add Todo")],-1)),t("div",Nt,[t("div",Ot,[c[3]||(c[3]=t("span",{class:"font-semibold"}," Date ",-1)),t("span",null,C(x(j)(g.value,{weekDay:"long"})),1)]),t("div",Vt,[c[4]||(c[4]=t("label",{class:"block text-gray-700 font-medium mb-2"},"Title",-1)),O(t("input",{ref_key:"titleRef",ref:o,"onUpdate:modelValue":c[0]||(c[0]=m=>l.value.title=m),required:"",placeholder:"Enter todo title",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[q,l.value.title]])]),t("div",Ft,[c[5]||(c[5]=t("label",{class:"block text-gray-700 font-medium mb-2"},"Task ID (optional)",-1)),O(t("input",{"onUpdate:modelValue":c[1]||(c[1]=m=>l.value.task_id=m),placeholder:"Enter a task id",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[q,l.value.task_id]])])])]),_:1,__:[6]},8,["isSubmitting","error"])]))}},qt={class:"p-4"},At={class:"mb-2"},jt={class:"mb-4"},Bt={class:"mb-4"},Lt={__name:"TodoEditForm",props:{date:{type:String,default:R(new Date)},todo:{type:Object,default:()=>{}}},emits:["update","cancelClick"],setup(d,{emit:y}){const e=d,n=T(),o=T(),r=V(),s=y,l=T({title:"",task_id:""});async function a(){var c,m,p;await r.fetchTodo((c=e.todo)==null?void 0:c.id),l.value.title=(m=r.todo)==null?void 0:m.title,l.value.task_id=(p=r.todo)==null?void 0:p.task_id}async function g(){n.value="submitting",await r.createTodo(l.value),n.value="",s("update")}const w=M(()=>new Date(e.date));return A(async()=>{var c;await a(),await W(),(c=o.value)==null||c.focus()}),(c,m)=>(u(),v("div",null,[_(J,{onSubmit:g,onClickCancel:m[2]||(m[2]=p=>s("cancelClick")),isSubmitting:n.value=="submitting",error:x(r).error},{default:S(()=>[m[6]||(m[6]=t("div",{class:"border-b py-2 px-4"},[t("h2",{class:"text-xl font-semibold"},"Edit Todo")],-1)),t("div",qt,[t("div",At,[m[3]||(m[3]=t("span",{class:"font-semibold"}," Date ",-1)),t("span",null,C(x(j)(w.value,{weekDay:"long"})),1)]),t("div",jt,[m[4]||(m[4]=t("label",{class:"block text-gray-700 font-medium mb-2"},"Title",-1)),O(t("input",{ref_key:"titleRef",ref:o,"onUpdate:modelValue":m[0]||(m[0]=p=>l.value.title=p),required:"",placeholder:"Enter todo title",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[q,l.value.title]])]),t("div",Bt,[m[5]||(m[5]=t("label",{class:"block text-gray-700 font-medium mb-2"},"Task ID (optional)",-1)),O(t("input",{"onUpdate:modelValue":m[1]||(m[1]=p=>l.value.task_id=p),placeholder:"Enter a task id",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[q,l.value.task_id]])])])]),_:1,__:[6]},8,["isSubmitting","error"])]))}},Pt={class:"min-h-[20vh] p-4"},Rt={class:"mb-4"},Yt={class:"mb-4"},Gt={class:"flex justify-between items-center gap-4 py-4 px-4 border-t"},Ht=["disabled"],zt={__name:"TodoShow",props:{date:{type:String,default:R(new Date)},todo:{type:Object,default:()=>{}}},emits:["cancelClick","clickEdit"],setup(d,{emit:y}){const e=d,n=V(),o=y;async function r(){var l;await n.fetchTodo((l=e.todo)==null?void 0:l.id)}const s=M(()=>{var l,a;return(l=n.todo)!=null&&l.date?new Date((a=n.todo)==null?void 0:a.date):null});return A(async()=>{await r()}),(l,a)=>{var g,w,c,m;return u(),v("div",null,[t("div",null,[a[5]||(a[5]=t("div",{class:"border-b py-2 px-4"},[t("h2",{class:"text-xl font-semibold"},"Show Todo")],-1)),t("div",Pt,[t("div",Rt,[a[2]||(a[2]=t("div",{class:"font-semibold text-xs text-gray-500"},"Date",-1)),t("span",null,C(x(j)(s.value,{weekDay:"long"})),1)]),t("div",Yt,[a[3]||(a[3]=t("div",{class:"text-xs text-gray-500"},"Todo",-1)),L(" "+C((g=x(n).todo)==null?void 0:g.title),1)]),t("div",null,[a[4]||(a[4]=t("div",{class:"text-xs text-gray-500"},"Status",-1)),t("div",null,[(w=x(n))!=null&&w.todo?(u(),I(Y,{key:0,todo:(c=x(n))==null?void 0:c.todo},null,8,["todo"])):f("",!0),L(" "+C((m=x(n).todo)==null?void 0:m.status),1)])])])]),t("div",Gt,[t("button",{type:"button",onClick:a[0]||(a[0]=p=>o("cancelClick")),class:"btn-3"},"Cancel"),t("button",{disabled:x(n).loading,onClick:a[1]||(a[1]=p=>o("clickEdit",e.todo)),class:"btn-2"}," Edit ",8,Ht)])])}}},Wt={__name:"TodoCreateEditShow",props:{todoModal:{type:Object,required:!0}},emits:["cancelClick","update","clickEdit"],setup(d,{emit:y}){const e=y;function n(){e("update")}return(o,r)=>(u(),v(F,null,[d.todoModal.action=="add"?(u(),I(B,{key:0},{default:S(()=>{var s;return[_(Ut,{onCancelClick:r[0]||(r[0]=l=>e("cancelClick")),onUpdate:n,date:(s=d.todoModal)==null?void 0:s.date},null,8,["date"])]}),_:1})):f("",!0),d.todoModal.action=="edit"?(u(),I(B,{key:1},{default:S(()=>{var s;return[_(Lt,{onCancelClick:r[1]||(r[1]=l=>e("cancelClick")),onUpdate:n,todo:(s=d.todoModal)==null?void 0:s.todo},null,8,["todo"])]}),_:1})):f("",!0),d.todoModal.action=="show"?(u(),I(B,{key:2},{default:S(()=>{var s;return[_(zt,{onCancelClick:r[2]||(r[2]=l=>e("cancelClick")),onUpdate:n,onClickEdit:r[3]||(r[3]=l=>e("clickEdit",l)),todo:(s=d.todoModal)==null?void 0:s.todo},null,8,["todo"])]}),_:1})):f("",!0)],64))}},Kt={class:"container mx-auto p-6"},Jt={key:0,class:"text-center py-4 text-gray-500"},Qt={key:1,class:"text-center py-4 text-red-500"},Xt={class:"border bg-white"},se={__name:"TodoList",setup(d){const y=new Date,e=T({type:"month-view",month:y.getMonth()+1,day:y.getDate(),year:y.getFullYear(),week:y.getDay()}),n=T({action:null}),o=V();async function r(){await o.fetchTodos()}async function s(){n.value={...n.value,action:""},await o.fetchTodos()}function l(k){e.value={...e.value,...k}}function a(k){const[i,b,$]=k.split("-").map(Number);e.value={...e.value,type:"day-view",year:i,month:b,day:$}}function g(k){n.value={...n.value,action:"show",todo:k}}function w(k){console.log({todo:k}),n.value={...n.value,action:"edit",todo:k}}function c(k){n.value={...n.value,action:"add",date:k}}function m(){n.value={action:null,todo:null}}const p=M(()=>{var $,E,N,G,H,z;const k=(E=($=e.value)==null?void 0:$.year)==null?void 0:E.toString(),i=(G=(N=e.value)==null?void 0:N.month)==null?void 0:G.toString().padStart(2,"0"),b=(z=(H=e.value)==null?void 0:H.day)==null?void 0:z.toString().padStart(2,"0");return`${k}-${i}-${b}`}),D=M(()=>{var b,$,E,N;const k=($=(b=e.value)==null?void 0:b.year)==null?void 0:$.toString(),i=(N=(E=e.value)==null?void 0:E.month)==null?void 0:N.toString().padStart(2,"0");return`${k}-${i}`});return A(async()=>{await o.fetchTodos()}),(k,i)=>(u(),v("div",Kt,[i[0]||(i[0]=t("h2",{class:"text-2xl font-bold mb-6"},"Todo List",-1)),x(o).loading?(u(),v("div",Jt,"Loading...")):x(o).error?(u(),v("div",Qt,C(x(o).error),1)):f("",!0),t("div",Xt,[_(it,{selected:e.value,onChange:l,onReloadClick:r},null,8,["selected"]),e.value.type=="month-view"?(u(),I(bt,{key:0,month:D.value,class:"bg-white",onDateClick:a,onClickTodo:g,onClickDateCell:c},null,8,["month"])):f("",!0),e.value.type=="day-view"?(u(),I(Dt,{key:1,date:p.value,onClickTodo:g,onClickEdit:w,onClickAdd:c},null,8,["date"])):f("",!0)]),_(Wt,{todoModal:n.value,onCancelClick:m,onUpdateTodo:s,onClickEdit:w},null,8,["todoModal"])]))}};export{se as default};
