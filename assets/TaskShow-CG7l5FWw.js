import{r as g,b as V,c as l,a as o,h as a,F as S,t as d,x as q,q as L,m as u,n as x,l as p,f as F,p as N,o as i,g as H}from"./index-4M3zh5Wr.js";import{u as $}from"./useTaskStore-JQQ5kKMZ.js";import{_ as j}from"./CommentModal-BQ9pTWMQ.js";import"./useCommentStore-DOwF1Rvp.js";const z={class:"container mx-auto p-6"},K={class:"max-w-3xl mx-auto bg-white shadow-lg rounded-lg p-6"},W={key:0,class:"text-center py-4 text-gray-500"},J={class:"hover:bg-gray-50 grid grid-cols-2"},Q={class:"py-2 font-medium col-span-full text-xl"},X={class:"py-2 font-medium mb-4 col-span-full"},Y={class:"flex gap-2 flex-wrap"},Z={class:"py-2"},h={class:"py-2"},ss={class:"px-4 py-2 flex justify-center items-center gap-2 col-span-full"},ts={key:2,class:"text-center py-4 text-red-500"},is={__name:"TaskShow",setup(os){const t=$(),A=F(),D=H(),m=g(null),k=g(!1),M=A.params.id;g(!1),V(async()=>{await t.fetchTask(M)});const B=r=>{event.stopPropagation(),D.push({name:"TaskEdit",params:{id:r}})},O=r=>{event.stopPropagation(),m.value=r,k.value=!0},G=()=>{k.value=!1,m.value=null};return(r,s)=>{var y,c,b,v,C,w,T,_,E,P,I,R;const f=N("RouterLink"),U=N("router-view");return i(),l("div",z,[o("div",K,[a(t).loading?(i(),l("div",W,"Loading task details...")):a(t).task?(i(),l(S,{key:1},[o("section",J,[o("div",Q,d(a(t).task.title),1),o("div",X,[s[7]||(s[7]=o("div",{class:"text-xs mb-0.5 text-gray-600 uppercase"},"Assigns",-1)),o("div",Y,[(i(!0),l(S,null,q(a(t).task.users,e=>(i(),l("span",{onClick:s[0]||(s[0]=n=>n.stopPropagation()),key:e.id,class:"btn-1 !inline-flex flex-shrink-0"},[s[6]||(s[6]=o("i",{class:"fad fa-user"},null,-1)),p(" "+d(e==null?void 0:e.name),1)]))),128))])]),o("div",Z,[s[8]||(s[8]=o("div",{class:"text-xs mb-0.5 text-gray-600 uppercase"},"Priority",-1)),o("span",{class:L([{"text-green-600":((y=a(t).task)==null?void 0:y.priority)==="LOW","text-yellow-600":((c=a(t).task)==null?void 0:c.priority)==="MEDIUM","text-orange-600":((b=a(t).task)==null?void 0:b.priority)==="HIGH","text-red-600":((v=a(t).task)==null?void 0:v.priority)==="CRITICAL"},"font-semibold"])},d(a(t).task.priority),3)]),o("div",h,[s[9]||(s[9]=o("div",{class:"text-xs mb-0.5 text-gray-600 uppercase"},"Status",-1)),o("span",{class:L([{"bg-gray-200":((C=a(t).task)==null?void 0:C.status)==="PENDING","bg-blue-200":((w=a(t).task)==null?void 0:w.status)==="IN_PROGRESS","bg-green-200":((T=a(t).task)==null?void 0:T.status)==="COMPLETED","bg-red-200":((_=a(t).task)==null?void 0:_.status)==="BLOCKED"},"px-3 py-0.5 rounded-full"])},d((E=a(t).task)==null?void 0:E.status),3)]),s[14]||(s[14]=o("hr",{class:"my-3 col-span-full"},null,-1)),o("div",ss,[o("button",{onClick:s[1]||(s[1]=e=>{var n;return B((n=a(t).task)==null?void 0:n.id)}),class:"btn-2"},"Edit"),u(f,{to:{name:"TaskUserAssign",params:{id:(P=a(t).task)==null?void 0:P.id}},class:"bg-indigo-500 hover:bg-indigo-600 text-white font-semibold px-3 py-1 rounded-full transition",onClick:s[2]||(s[2]=e=>e.stopPropagation())},{default:x(()=>s[10]||(s[10]=[o("i",{class:"fas fa-user-plus"},null,-1),p(" Assign Users ")])),_:1},8,["to"]),o("button",{onClick:s[3]||(s[3]=e=>{var n;return O(e,(n=a(t).task)==null?void 0:n.id)}),class:"bg-indigo-500 text-white px-3 py-1 rounded-full"},s[11]||(s[11]=[o("i",{class:"fas fa-plus"},null,-1),p(" Comment ")])),u(f,{to:{name:"TaskAdd",query:{parent_id:(I=a(t).task)==null?void 0:I.id}},onClick:s[4]||(s[4]=e=>e.stopPropagation()),class:"py-1 btn-3 ml-auto"},{default:x(()=>s[12]||(s[12]=[o("i",{class:"fas fa-plus"},null,-1),p(" Sub Task")])),_:1},8,["to"]),u(f,{to:{name:"TaskReports",params:{id:(R=a(t).task)==null?void 0:R.id}},onClick:s[5]||(s[5]=e=>e.stopPropagation()),class:"py-1 btn-3"},{default:x(()=>s[13]||(s[13]=[o("i",{class:"fal fa-file-alt"},null,-1),p(" Reports")])),_:1},8,["to"])])]),u(U)],64)):(i(),l("div",ts,d(a(t).error||"Task not found."),1))]),u(j,{show:k.value,"commentable-id":m.value,"commentable-type":"task","user-id":r.userId,"on-close":G,onSubmitted:a(t).fetchTasks},null,8,["show","commentable-id","user-id","onSubmitted"])])}}};export{is as default};
