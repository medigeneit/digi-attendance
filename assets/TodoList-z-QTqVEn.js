import{L as R}from"./LoaderView-CiljVQ-Z.js";import{r as E,A as ot,x as M,c as y,o as r,h as j,g as b,a as t,B as nt,w as x,q as U,E as B,F as W,y as lt,n as _,t as C,f as T,i as D,k as g,e as G,G as X,j as S,v as q}from"./index-C2mX-CvJ.js";import{_ as at}from"./CalenderView-CBRzjhoZ.js";import{u as V}from"./useTodoStore-CvYKG1Ld.js";import{b as K,g as Z}from"./datetime-l2Vm98rT.js";import{O as z}from"./OverlyModal-qHoA-PV4.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const st={class:"px-4 py-2 flex items-center bg-gray-50 group gap-2"},it=["value"],dt=["value"],rt=["disabled"],ut={key:4,class:"ml-4 md:ml-auto flex items-center gap-2"},ct={key:5,class:"ml-4 md:ml-auto flex items-center gap-2"},mt={__name:"TodoHeading",props:{selectedType:{type:String,default:"month-view"},selectedValue:{type:String,default:""},selected:{type:Object,default:()=>({type:"month-view",month:"",day:"",year:"",week:""})},loading:{type:Boolean,default:!1}},emits:["reloadClick","selectViewType","change"],setup(u,{emit:f}){const l=u,e=f,o=E();function a(){e("selectViewType",o.value),e("change",{...l.selected,type:o.value})}ot(()=>{var c;return(c=l.selected)==null?void 0:c.type},c=>o.value=c,{immediate:!0});const v=M(()=>o.value=="month-view"&&l.selected.year&&l.selected.month?[l.selected.year,l.selected.month-1,1]:o.value=="day-view"&&l.selected.year&&l.selected.month&&l.selected.day?[l.selected.year,l.selected.month-1,l.selected.day]:[new Date().getFullYear(),new Date().getMonth(),new Date().getDate()]);function s(){o.value=="month-view"&&k(new Date)}function i(){if(o.value=="month-view"){const c=new Date(...v.value);c.setMonth(c.getMonth()+1),k(c)}}function d(){if(o.value=="month-view"){const c=new Date(...v.value);c.setMonth(c.getMonth()-1),k(c)}}function n(){o.value=="day-view"&&k(new Date)}function m(){if(o.value=="day-view"){const c=new Date(...v.value);c.setDate(c.getDate()+1),k(c)}}function p(){if(o.value=="day-view"){const c=new Date(...v.value);c.setDate(c.getDate()-1),k(c)}}function k(c){e("change",{type:o.value,month:c.getMonth()+1,day:c.getDate(),year:c.getFullYear(),week:c.getDay()})}const I=M(()=>o.value=="month-view"?`${l.selected.year}-${l.selected.month.toString().padStart(2,"0")}`:o.value=="day-view"?`${l.selected.year}-${l.selected.month.toString().padStart(2,"0")}-${l.selected.day.toString().padStart(2,"0")}`:l.selected),N=c=>{var w,L;if(o.value=="month-view"){const[h,$]=(w=c.target.value)==null?void 0:w.split("-").map(Number),O=new Date(h,$-1,1);k(O)}if(o.value=="day-view"){const h=new Date((L=c.target)==null?void 0:L.value);k(h)}};return(c,w)=>(r(),y("div",st,[j(t("select",{class:"px-2 h-7 border rounded","onUpdate:modelValue":w[0]||(w[0]=L=>o.value=L),onChange:a},w[2]||(w[2]=[t("option",{value:"day-view"},"Day",-1),t("option",{value:"month-view"},"Month",-1)]),544),[[nt,o.value]]),o.value=="month-view"?(r(),y("input",{key:0,type:"month",value:I.value,onInput:N,class:"border px-2 rounded"},null,40,it)):b("",!0),o.value=="day-view"?(r(),y("input",{key:1,type:"date",value:I.value,onInput:N,class:"border px-2 rounded"},null,40,dt)):b("",!0),o.value=="month-view"?(r(),y("button",{key:2,class:"btn-3 mx-4 h-7",onClick:x(s,["prevent"])}," Current Month ")):b("",!0),o.value=="day-view"?(r(),y("button",{key:3,class:"btn-3 mx-4 h-7",onClick:x(n,["prevent"])}," Today ")):b("",!0),t("button",{class:U(["btn-3 px-2 py-2 mx-4 size-7 disabled:text-gray-300 disabled:border-gray-300",{"animate-spin text-gray-300 border-gray-300 !bg-opacity-0":u.loading}]),onClick:w[1]||(w[1]=x(L=>e("reloadClick"),["prevent"])),disabled:u.loading},w[3]||(w[3]=[t("i",{class:"fas fa-redo-alt"},null,-1)]),10,rt),o.value=="month-view"?(r(),y("div",ut,[t("button",{class:"btn-2 h-7",onClick:x(d,["prevent"])},"Previous Month"),t("button",{class:"btn-2 h-7",onClick:x(i,["prevent"])},"Next Month")])):b("",!0),o.value=="day-view"?(r(),y("div",ct,[t("button",{class:"btn-2 h-7",onClick:x(p,["prevent"])},"Previous Day"),t("button",{class:"btn-2 h-7",onClick:x(m,["prevent"])},"Next Day")])):b("",!0)]))}},vt={key:0,class:"fa fa-exclamation-circle",title:"Pending"},yt={key:1,class:"fa fa-exclamation-square",title:"Wording"},pt={key:2,class:"fa fa-check-square",title:"Completed"},Y={__name:"TodoStatusIcon",props:{todo:{type:Object,required:!0}},setup(u){const f=u,l=M(()=>{switch(f.todo.status){case"PENDING":return"text-red-400";case"WORKING":return"text-yellow-400";case"COMPLETED":return"text-green-400"}return""});return(e,o)=>(r(),y("span",{class:U(l.value)},[u.todo.status=="PENDING"?(r(),y("i",vt)):b("",!0),u.todo.status=="WORKING"?(r(),y("i",yt)):b("",!0),u.todo.status=="COMPLETED"?(r(),y("i",pt)):b("",!0)],2))}},ft=["onClick","title"],bt={class:"line-clamp-1"},gt={key:0,class:"text-purple-600 text-center"},tt={__name:"TodosInDate",props:{date:{type:String,required:!0},maxItems:{type:[Number,String],default:3}},emits:["clickTodo"],setup(u,{emit:f}){const l=u,e=f,{getTodosByDate:o}=V(),a=M(()=>{let v=[],s=!1,i=[];if(typeof o=="function"){const d=o(l.date);if(i=Array.isArray(d)?d:[],l.maxItems==="all")return{all:i,items:i,moreItemsCount:0};v=i.slice(0,l.maxItems),s=i.length-v.length}return{all:i,items:v,moreItemsCount:s}});return(v,s)=>(r(),y("div",null,[a.value.items.length===0?B(v.$slots,"noTodos",{key:0},()=>[s[0]||(s[0]=t("div",{class:"text-gray-400 text-center"},"No todos",-1))]):(r(),y(W,{key:1},[(r(!0),y(W,null,lt(a.value.items,i=>B(v.$slots,"todoItem",{key:i.id,todo:i,moreItemsCount:a.value.moreItemsCount},()=>[t("div",{class:U(["px-1 mb-2 text-sm rounded cursor-pointer flex items-center gap-2",{"bg-sky-50 text-sky-900 hover:bg-sky-700 hover:text-white border border-sky-300":i.status!=="COMPLETED","bg-green-500 text-white":i.status==="COMPLETED"}]),onClick:x(d=>e("clickTodo",i),["prevent","stop"]),title:i.title},[_(Y,{todo:i,class:U(["text-sm",[i.status=="COMPLETED"?"!text-white":""]])},null,8,["todo","class"]),t("div",bt,C(i.title),1)],10,ft)])),128)),a.value.moreItemsCount>0?(r(),y("div",gt," + "+C(a.value.moreItemsCount)+" more todo"+C(a.value.moreItemsCount>1?"s":""),1)):b("",!0)],64))]))}},kt={class:"relative"},ht=["onClick","onKeypress"],xt=["onClick"],Ct={__name:"TodosInCalenderView",props:{month:{type:String,required:!0,validator:u=>/^\d{4}-(0[1-9]|1[0-2])$/.test(u)}},emits:["dateClick","clickTodo","clickDateCell"],setup(u,{emit:f}){const l=f;function e(o,a){o.isTrusted&&o.ctrlKey&&o.which==10&&l("clickDateCell",a)}return(o,a)=>(r(),y("div",kt,[u.month?(r(),T(at,{key:0,month:u.month,class:"border-t border-blue-200/50 relative"},{date:D(({day:v,yearMonthDate:s,isCurrentMonth:i})=>[t("div",{tabindex:"0",class:"border p-4 hover:bg-sky-50 focus:bg-sky-50 hover:border-blue-300 focus:outline-blue-400 cursor-pointer group/date relative",onClick:d=>l("clickDateCell",s),onKeypress:x(d=>e(d,s),["prevent"])},[t("button",{tabindex:"1",class:U([{"text-gray-300":!i,"text-sky-400":i},"text-center mb-2 font-semibold hover:bg-sky-200 w-full rounded"]),onClick:x(d=>l("dateClick",s),["prevent","stop"])},C(v),11,xt),t("div",null,[_(tt,{date:s,onClickTodo:a[0]||(a[0]=d=>l("clickTodo",d))},{noTodos:D(()=>a[1]||(a[1]=[t("span",null,null,-1)])),_:2},1032,["date"])]),a[2]||(a[2]=t("div",{class:"absolute bottom-0 left-0 right-0 text-center hidden group-hover/date:block text-sm text-red-800/40"}," Click to add todo ",-1))],40,ht)]),_:1},8,["month"])):b("",!0)]))}},wt={class:"relative bg-white p-4"},Dt={class:"max-w-6xl mx-auto border rounded my-10"},$t={class:"mb-4 text-gray-700 border-b py-2 px-4 flex items-center"},_t={class:"text-lg font-semibold"},Tt={class:"ml-auto"},St=["onClick"],Et={class:"line-clamp-2 ml-2"},Mt={key:0,class:"line-clamp-2 ml-2 text-gray-500"},It={class:"ml-auto flex items-center gap-2"},Nt=["onClick"],Ot=["onClick"],Lt=["onClick"],Pt={__name:"TodosInDailyView",props:{date:{type:String,required:!0}},emits:["clickTodo","clickAdd","clickEdit","clickDelete","clickChangeStatus","backClick","update"],setup(u,{emit:f}){const l=u,e=f,o=M(()=>new Date(l.date)),a=V();async function v(i){confirm(`Are your sure want to delete todo
'${i==null?void 0:i.title}'`)&&(await a.deleteTodo(i.id),e("update"))}async function s(i){confirm(`Are your sure want to compete todo
'${i==null?void 0:i.title}'`)&&(await a.updateTodoStatus(i.id,"COMPLETED"),e("update"))}return(i,d)=>(r(),y("div",wt,[t("div",Dt,[t("div",$t,[t("button",{class:"fa fa-arrow-left btn-icon mr-2",onClick:d[0]||(d[0]=x(n=>e("backClick"),["prevent"]))}),t("div",_t,C(g(K)(o.value,{weekDay:"long"})),1),t("div",Tt,[t("button",{class:"btn btn-icon",onClick:d[1]||(d[1]=x(n=>e("clickAdd",l.date),["prevent"]))},d[2]||(d[2]=[t("i",{class:"fas fa-plus"},null,-1)]))])]),_(tt,{date:u.date,"max-items":10,class:"my-8 w-full px-4"},{todoItem:D(({todo:n})=>[t("div",{class:"border rounded px-4 py-3 my-4 hover:bg-sky-50 cursor-pointer flex items-center",onClick:x(m=>e("clickTodo",n),["prevent"])},[_(Y,{todo:n},null,8,["todo"]),t("div",Et,C(n.title),1),n.todo_type&&n.todo_type_id?(r(),y("div",Mt,C(n.todo_type)+" id "+C(n.todo_type_id),1)):b("",!0),t("div",It,[n.status!=="COMPLETED"?(r(),y("button",{key:0,class:"btn-icon bg-green-400 text-white hover:bg-green-600 hover:text-white",onClick:x(()=>s(n),["prevent","stop"])},d[3]||(d[3]=[t("i",{class:"fas fa-check"},null,-1)]),8,Nt)):b("",!0),t("button",{class:"btn-icon bg-sky-400 text-white hover:bg-sky-600 hover:text-white",onClick:x(m=>e("clickEdit",n),["prevent","stop"])},d[4]||(d[4]=[t("i",{class:"fas fa-pen"},null,-1)]),8,Ot),t("button",{class:"btn-icon bg-red-400 text-white hover:bg-red-600 hover:text-white",onClick:x(()=>v(n),["prevent","stop"])},d[5]||(d[5]=[t("i",{class:"fas fa-trash-alt"},null,-1)]),8,Lt)])],8,St)]),noTodos:D(()=>d[6]||(d[6]=[t("div",{class:"flex min-h-[38vh] items-center justify-center text-gray-400 text-center rounded-md"}," No Todos ",-1)])),_:1},8,["date"])])]))}},Vt={class:"bg-white border-t px-4 py-4 sticky bottom-0 rounded-b-md"},At={key:0,class:"mb-4 text-red-500 font-medium"},Ft={key:1,class:"mb-4 text-blue-500 font-medium"},jt={class:"flex justify-between items-center gap-4"},Ut=["disabled"],et={__name:"FormHandler",props:{isSubmitting:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},error:{type:String,default:""}},emits:["submit","clickCancel"],setup(u,{emit:f}){const l=f;return(e,o)=>(r(),y("form",{onSubmit:o[1]||(o[1]=x(a=>l("submit"),["prevent"]))},[B(e.$slots,"default"),t("div",Vt,[u.error?(r(),y("div",At,C(u.error),1)):b("",!0),u.isSubmitting?(r(),y("div",Ft,"Saving changes...")):b("",!0),B(e.$slots,"footer",{},()=>[t("div",jt,[t("button",{type:"button",onClick:o[0]||(o[0]=a=>l("clickCancel")),class:"btn-3"},"Cancel"),t("button",{disabled:u.isSubmitting||u.isLoading,type:"submit",class:"btn-2"},C(u.isSubmitting?"Saving...":"Save"),9,Ut)])])])],32))}},Bt={class:"relative"},qt={class:"p-4"},Rt={class:"mb-2"},Gt={class:"mb-4"},Kt={class:"mb-4"},zt={__name:"TodoAddForm",props:{date:{type:String,default:Z(new Date)}},emits:["update","cancelClick"],setup(u,{emit:f}){const l=u,e=E(),o=E(),a=V(),v=f,s=E({title:"",date:l.date||"",task_id:""});async function i(){e.value="submitting",await a.createTodo(s.value),console.log(s.value),e.value="",v("update")}const d=M(()=>new Date(l.date));return G(async()=>{var n;await X(),(n=o.value)==null||n.focus()}),(n,m)=>(r(),y("div",Bt,[g(a).loading?(r(),T(R,{key:0,class:"absolute inset-0 bg-opacity-80 text-center py-4 text-gray-500 z-10 flex items-center justify-center"},{default:D(()=>m[3]||(m[3]=[S(" Loading... ")])),_:1,__:[3]})):b("",!0),_(et,{onSubmit:i,onClickCancel:m[2]||(m[2]=p=>v("cancelClick")),isSubmitting:e.value=="submitting",error:g(a).error},{default:D(()=>[m[7]||(m[7]=t("div",{class:"border-b py-2 px-4"},[t("h2",{class:"text-xl font-semibold"},"Add Todo")],-1)),t("div",qt,[t("div",Rt,[m[4]||(m[4]=t("span",{class:"font-semibold"}," Date ",-1)),t("span",null,C(g(K)(d.value,{weekDay:"long"})),1)]),t("div",Gt,[m[5]||(m[5]=t("label",{class:"block text-gray-700 font-medium mb-2"},"Title",-1)),j(t("input",{ref_key:"titleRef",ref:o,"onUpdate:modelValue":m[0]||(m[0]=p=>s.value.title=p),required:"",placeholder:"Enter todo title",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[q,s.value.title]])]),t("div",Kt,[m[6]||(m[6]=t("label",{class:"block text-gray-700 font-medium mb-2"},"Task ID (optional)",-1)),j(t("input",{"onUpdate:modelValue":m[1]||(m[1]=p=>s.value.task_id=p),placeholder:"Enter a task id",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[q,s.value.task_id]])])])]),_:1,__:[7]},8,["isSubmitting","error"])]))}},Wt={class:"relative"},Yt={class:"p-4"},Ht={class:"mb-2"},Jt={class:"mb-4"},Qt={class:"mb-4"},Xt={__name:"TodoEditForm",props:{date:{type:String,default:Z(new Date)},todo:{type:Object,default:()=>{}}},emits:["update","cancelClick"],setup(u,{emit:f}){const l=u,e=E(),o=E(),a=V(),v=f,s=E({title:"",todo_type:"task",todo_type_id:""});async function i(){var m,p,k;await a.fetchTodo((m=l.todo)==null?void 0:m.id),s.value.title=(p=a.todo)==null?void 0:p.title,s.value.todo_type_id=(k=a.todo)==null?void 0:k.todoable_id}async function d(){e.value="submitting";try{await a.updateTodo(l.todo.id,s.value),v("update")}finally{e.value=""}}const n=M(()=>new Date(l.date));return G(async()=>{var m;await i(),await X(),(m=o.value)==null||m.focus()}),(m,p)=>(r(),y("div",Wt,[g(a).loading?(r(),T(R,{key:0,class:"absolute inset-0 bg-opacity-80 text-center py-4 text-gray-500 z-10 flex items-center justify-center"},{default:D(()=>p[3]||(p[3]=[S(" Loading... ")])),_:1,__:[3]})):b("",!0),_(et,{onSubmit:d,onClickCancel:p[2]||(p[2]=k=>v("cancelClick")),isSubmitting:e.value=="submitting",isLoading:g(a).loading,error:g(a).error},{default:D(()=>[p[7]||(p[7]=t("div",{class:"border-b py-2 px-4"},[t("h2",{class:"text-xl font-semibold"},"Edit Todo")],-1)),t("div",Yt,[t("div",Ht,[p[4]||(p[4]=t("span",{class:"font-semibold"}," Date ",-1)),t("span",null,C(g(K)(n.value,{weekDay:"long"})),1)]),t("div",Jt,[p[5]||(p[5]=t("label",{class:"block text-gray-700 font-medium mb-2"},"Title",-1)),j(t("input",{ref_key:"titleRef",ref:o,"onUpdate:modelValue":p[0]||(p[0]=k=>s.value.title=k),required:"",placeholder:"Enter todo title",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[q,s.value.title]])]),t("div",Qt,[p[6]||(p[6]=t("label",{class:"block text-gray-700 font-medium mb-2"},"Task ID (optional)",-1)),j(t("input",{"onUpdate:modelValue":p[1]||(p[1]=k=>s.value.todo_type_id=k),placeholder:"Enter a task id",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[q,s.value.todo_type_id]])])])]),_:1,__:[7]},8,["isSubmitting","isLoading","error"])]))}},Zt={class:"relative"},te={class:"min-h-[20vh] p-4"},ee={class:"mb-4"},oe={class:"mb-4"},ne={class:"flex items-center gap-4"},le={key:0,class:"flex items-center gap-2"},ae={class:"flex justify-between items-center gap-4 py-4 px-4 border-t"},se={class:"ml-auto flex items-center gap-2"},ie={__name:"TodoShow",props:{todo:{type:Object,default:()=>{}}},emits:["cancelClick","clickEdit","update"],setup(u,{emit:f}){const l=u,e=V(),o=f;async function a(){var d;await e.fetchTodo((d=l.todo)==null?void 0:d.id)}const v=M(()=>{var d,n;return(d=e.todo)!=null&&d.date?new Date((n=e.todo)==null?void 0:n.date):null});async function s(d){var n;confirm(`Are your sure want to delete todo
'${(n=e.todo)==null?void 0:n.title}'`)&&(await e.deleteTodo(d.id),o("update"))}async function i(d,n){var m;confirm(`Are your sure want to compete todo
'${(m=e.todo)==null?void 0:m.title}'`)&&(await e.updateTodoStatus(d.id,n),o("update"))}return G(async()=>{await a()}),(d,n)=>{var m,p,k,I,N,c;return r(),y("div",Zt,[g(e).loading?(r(),T(R,{key:0,class:"absolute inset-0 bg-opacity-80 text-center py-4 text-gray-500 z-10 flex items-center justify-center"},{default:D(()=>n[5]||(n[5]=[S(" Loading... ")])),_:1,__:[5]})):b("",!0),t("div",null,[n[11]||(n[11]=t("div",{class:"border-b py-2 px-4"},[t("h2",{class:"text-xl font-semibold"},"Show Todo")],-1)),t("div",te,[t("div",ee,[n[6]||(n[6]=t("div",{class:"font-semibold text-xs text-gray-500"},"Date",-1)),t("span",null,C(g(K)(v.value,{weekDay:"long"})),1)]),t("div",oe,[n[7]||(n[7]=t("div",{class:"text-xs text-gray-500"},"Todo",-1)),S(" "+C((m=g(e).todo)==null?void 0:m.title),1)]),t("div",null,[n[10]||(n[10]=t("div",{class:"text-xs text-gray-500"},"Status",-1)),t("div",ne,[t("div",null,[(p=g(e))!=null&&p.todo?(r(),T(Y,{key:0,todo:(k=g(e))==null?void 0:k.todo},null,8,["todo"])):b("",!0),S(" "+C((I=g(e).todo)==null?void 0:I.status),1)]),g(e).loading?b("",!0):(r(),y("div",le,[((N=g(e).todo)==null?void 0:N.status)==="PENDING"?(r(),y("button",{key:0,class:"btn-2 from-yellow-700 to-yellow-500 text-white hover:bg-green-600 hover:text-white",onClick:n[0]||(n[0]=x(()=>i(g(e).todo,"WORKING"),["prevent","stop"]))},n[8]||(n[8]=[t("i",{class:"fas fa-exclamation-circle"},null,-1),S(" Change to Working ")]))):b("",!0),((c=g(e).todo)==null?void 0:c.status)==="WORKING"?(r(),y("button",{key:1,class:"btn-2 from-green-700 to-green-300 text-white hover:bg-green-600 hover:text-white",onClick:n[1]||(n[1]=x(()=>i(g(e).todo,"COMPLETED"),["prevent","stop"]))},n[9]||(n[9]=[t("i",{class:"fas fa-check"},null,-1),S(" Make Complete ")]))):b("",!0)]))])])])]),t("div",ae,[t("button",{type:"button",onClick:n[2]||(n[2]=w=>o("cancelClick")),class:"btn-3"},"Cancel"),t("div",se,[t("button",{class:"btn-2 bg-sky-400 text-white hover:bg-sky-600 hover:text-white",onClick:n[3]||(n[3]=x(w=>o("clickEdit",g(e).todo),["prevent","stop"]))},n[12]||(n[12]=[t("i",{class:"fas fa-pen"},null,-1),S(" Edit ")])),t("button",{class:"btn-2-red",onClick:n[4]||(n[4]=x(()=>s(g(e).todo),["prevent","stop"]))},n[13]||(n[13]=[t("i",{class:"fas fa-trash-alt"},null,-1),S(" Delete ")]))])])])}}},de={__name:"TodoCreateEditShow",props:{todoModal:{type:Object,required:!0}},emits:["cancelClick","update","clickEdit","clickDelete","clickChangeStatus"],setup(u,{emit:f}){const l=f;function e(){l("update")}return(o,a)=>(r(),y(W,null,[u.todoModal.action=="add"?(r(),T(z,{key:0},{default:D(()=>{var v;return[_(zt,{onCancelClick:a[0]||(a[0]=s=>l("cancelClick")),onUpdate:e,date:(v=u.todoModal)==null?void 0:v.date},null,8,["date"])]}),_:1})):b("",!0),u.todoModal.action=="edit"?(r(),T(z,{key:1},{default:D(()=>{var v;return[_(Xt,{onCancelClick:a[1]||(a[1]=s=>l("cancelClick")),onUpdate:e,todo:(v=u.todoModal)==null?void 0:v.todo},null,8,["todo"])]}),_:1})):b("",!0),u.todoModal.action=="show"?(r(),T(z,{key:2},{default:D(()=>{var v;return[_(ie,{onCancelClick:a[2]||(a[2]=s=>l("cancelClick")),onUpdate:e,onClickEdit:a[3]||(a[3]=s=>l("clickEdit",s)),onClickDelete:a[4]||(a[4]=s=>l("clickDelete",s)),onClickChangeStatus:a[5]||(a[5]=(s,i)=>l("clickChangeStatus",s,i)),todo:(v=u.todoModal)==null?void 0:v.todo},null,8,["todo"])]}),_:1})):b("",!0)],64))}},re={class:"border bg-white relative"},ue={__name:"TodoSection",props:{year:{type:Number,default:()=>new Date().getFullYear()},month:{type:Number,default:()=>new Date().getMonth()+1},day:{type:Number,default:()=>new Date().getDate()},week:{type:Number,default:()=>new Date().getDay()},viewType:{type:String,default:"month-view"}},setup(u){const f=new Date,l=u,e=E({type:"month-view",month:f.getMonth()+1,day:f.getDate(),year:f.getFullYear(),week:f.getDay()}),o=E({action:null}),a=V();async function v(){await a.fetchTodos()}function s(){o.value={...o.value,action:""}}async function i(h,$){await a.updateTodoStatus(h,$)}async function d(h){await a.deleteTodo(h)}function n(){e.value={...e.value,type:"month-view"}}function m(h){e.value={...e.value,...h}}function p(h){const[$,O,P]=h.split("-").map(Number);e.value={...e.value,type:"day-view",year:$,month:O,day:P}}function k(h){o.value={...o.value,action:"show",todo:h}}function I(h){o.value={...o.value,action:"edit",todo:h}}function N(h){o.value={...o.value,action:"add",date:h}}function c(){o.value={action:null,todo:null}}const w=M(()=>{var P,A,F,H,J,Q;const h=(A=(P=e.value)==null?void 0:P.year)==null?void 0:A.toString(),$=(H=(F=e.value)==null?void 0:F.month)==null?void 0:H.toString().padStart(2,"0"),O=(Q=(J=e.value)==null?void 0:J.day)==null?void 0:Q.toString().padStart(2,"0");return`${h}-${$}-${O}`}),L=M(()=>{var O,P,A,F;const h=(P=(O=e.value)==null?void 0:O.year)==null?void 0:P.toString(),$=(F=(A=e.value)==null?void 0:A.month)==null?void 0:F.toString().padStart(2,"0");return`${h}-${$}`});return G(async()=>{await a.fetchTodos(),console.log({props:l})}),(h,$)=>(r(),y("div",null,[t("div",re,[g(a).loading?(r(),T(R,{key:0,class:"absolute inset-0 bg-opacity-80 text-center py-4 text-gray-500 z-10 flex items-center justify-center"},{default:D(()=>$[0]||($[0]=[S(" Loading... ")])),_:1,__:[0]})):b("",!0),_(mt,{selected:e.value,class:"border-b shadow z-20",onChange:m,onReloadClick:v},null,8,["selected"]),e.value.type=="month-view"?(r(),T(Ct,{key:1,month:L.value,class:"bg-white",onDateClick:p,onClickTodo:k,onClickDateCell:N},null,8,["month"])):b("",!0),e.value.type=="day-view"?(r(),T(Pt,{key:2,date:w.value,onClickTodo:k,onClickEdit:I,onClickAdd:N,onClickDelete:d,onClickChangeStatus:i,onBackClick:n,onUpdate:s},null,8,["date"])):b("",!0)]),_(de,{todoModal:o.value,onCancelClick:c,onUpdate:s,onClickEdit:I},null,8,["todoModal"])]))}},ce={class:"container mx-auto p-6"},me={key:0,class:"text-center py-4 text-red-500"},he={__name:"TodoList",setup(u){const f=new Date,l=E({type:"month-view",month:f.getMonth()+1,day:f.getDate(),year:f.getFullYear(),week:f.getDay()}),e=V();return(o,a)=>(r(),y("div",ce,[a[0]||(a[0]=t("h2",{class:"text-2xl font-bold mb-6"},"Todo List",-1)),g(e).error&&!g(e).loading?(r(),y("div",me,C(g(e).error),1)):b("",!0),_(ue,{year:l.value.year,month:l.value.month,day:l.value.day,viewType:l.value.type},null,8,["year","month","day","viewType"])]))}};export{he as default};
