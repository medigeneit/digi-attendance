import{u as S,b as M,r as m,s as T,x as C,A as U,e as A,c as s,o,a as t,h as B,v as R,g as v,k,F as V,y as j,t as l}from"./index-B00qadZM.js";import{u as P}from"./notice-CWEAEpYN.js";const q={class:"space-y-6"},z={class:"flex flex-col sm:flex-row justify-center items-center gap-4 mb-4"},I={class:"bg-white max-w-6xl mx-auto rounded-lg shadow-md p-6 space-y-4"},Q={key:0,class:"text-center text-gray-500"},G={key:1},H={key:0},J={class:"overflow-x-auto bg-white rounded-xl shadow-md"},K={class:"min-w-full text-sm text-left text-gray-700"},O={class:"divide-y divide-gray-200"},W={class:"px-6 py-4 whitespace-nowrap font-medium"},X={class:"px-6 py-4 whitespace-nowrap"},Y={class:"px-6 py-4 whitespace-nowrap"},Z={class:"px-6 py-4 whitespace-nowrap"},$={class:"px-6 py-4"},ee={class:"px-6 py-4 whitespace-nowrap"},te={key:0},ae={key:1,class:"text-center text-gray-400 italic"},se={key:2,class:"flex justify-center mt-6"},w=20,le={__name:"NoticeFeedbackList",props:{noticeId:{type:[String,Number],required:!0}},setup(oe){S();const n=M(),h=P();function F(c,a=300){let e;return function(...u){clearTimeout(e),e=setTimeout(()=>{c.apply(this,u)},a)}}const d=m(""),i=m(1),r=m(!1),{feedbacks:p,totalFeedbacks:N}=T(h),y=async(c=!1)=>{var a;try{r.value=!0,c&&(p.value=[],i.value=1),await h.fetchFeedbacks((a=n==null?void 0:n.params)==null?void 0:a.id,{params:{page:i.value,per_page:w,search:d.value}})}catch(e){console.error("Error fetching feedbacks:",e)}finally{r.value=!1}},x=C(()=>p.value.length<N.value),E=()=>{x.value&&(i.value++,y())},L=F(()=>{y(!0)},400);U(d,()=>{L()}),A(()=>{y()});const D=async()=>{var c;await h.downloadFeedbackUserExcel((c=n==null?void 0:n.params)==null?void 0:c.id,{page:i.value,per_page:w,search:d.value})};return(c,a)=>(o(),s("div",q,[t("div",z,[B(t("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>d.value=e),type:"text",placeholder:"Search by User Name...",class:"border border-gray-300 rounded-lg p-2 w-full max-w-md focus:outline-none focus:ring-2 focus:ring-blue-400"},null,512),[[R,d.value]]),t("button",{onClick:D,class:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg"}," Export to Excel ")]),t("div",I,[a[2]||(a[2]=t("h3",{class:"title-md text-center mb-4"},"Employee Feedbacks",-1)),r.value?(o(),s("div",Q,"Loading...")):(o(),s("div",G,[k(p).length?(o(),s("div",H,[t("div",J,[t("table",K,[a[1]||(a[1]=t("thead",{class:"bg-gray-100 text-gray-900 sticky top-0 z-10"},[t("tr",null,[t("th",{class:"px-6 py-3"},"#"),t("th",{class:"px-6 py-3"},"User"),t("th",{class:"px-6 py-3"},"Company"),t("th",{class:"px-6 py-3"},"Department"),t("th",{class:"px-6 py-3"},"Feedback"),t("th",{class:"px-6 py-3"},"Date")])],-1)),t("tbody",O,[(o(!0),s(V,null,j(k(p),(e,u)=>{var b,_,f,g;return o(),s("tr",{key:e.id,class:"hover:bg-blue-50 transition"},[t("td",W,l(u+1),1),t("td",X,l(e==null?void 0:e.name),1),t("td",Y,l(((b=e==null?void 0:e.company)==null?void 0:b.name)||"N/A"),1),t("td",Z,l(((_=e==null?void 0:e.department)==null?void 0:_.name)||"N/A"),1),t("td",$,l((f=e==null?void 0:e.feedback)==null?void 0:f.feedback),1),t("td",ee,[e!=null&&e.feedback?(o(),s("div",te,l(new Date((g=e==null?void 0:e.feedback)==null?void 0:g.submitted_at).toLocaleDateString()),1)):v("",!0)])])}),128))])])])])):(o(),s("div",ae,"No feedbacks found.")),x.value&&!r.value?(o(),s("div",se,[t("button",{onClick:E,class:"bg-blue-500 hover:bg-blue-600 text-white px-6 py-2 rounded-lg"}," Load More ")])):v("",!0)]))])]))}};export{le as default};
