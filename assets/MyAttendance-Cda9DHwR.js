import{u as F,r as z,p as I,b as O,q as G,c as d,a as t,t as r,d as J,v as K,k as a,h as n,j as h,F as Q,x as X,g as Y,o,y as m,e as _,m as H,n as Z}from"./index-CuK2VTzH.js";import{L as tt}from"./LoaderView-BDRFG2Vv.js";import{u as et}from"./attendance-CPfbJpn9.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const st={class:"px-4 space-y-4"},rt={class:"md:flex items-center justify-between gap-2"},at={class:"title-lg md:title-lg flex-wrap text-center"},nt={class:"flex gap-4"},lt={class:"grid md:grid-cols-2 gap-4 text-sm"},ot={class:"card-bg p-4 gap-1"},it={class:"grid md:grid-cols-2"},dt={class:"card-bg p-4 gap-1"},ut={class:"grid md:grid-cols-2"},pt={key:1,class:"space-y-4"},_t={class:"overflow-x-auto card-bg"},mt={class:"min-w-full table-auto border-collapse border border-gray-300 bg-white"},yt={class:"text-center text-xs"},ct={class:"border px-1 py-0.5"},ht={class:"border px-1 py-0.5"},vt=["title"],ft=["title"],bt=["title"],xt={class:"border px-1 py-0.5"},kt={key:0},gt={key:0},wt=["title"],At={key:0},Dt={key:0,class:"px-2"},St=["title"],Tt={__name:"MyAttendance",setup(Lt){const v=Y(),i=F(),l=et(),u=z(l.selectedMonth),R=I(()=>{if(!u.value)return"";const[p,e]=u.value.split("-");return new Date(p,e-1).toLocaleDateString("en-US",{month:"long",year:"numeric"})}),y=async()=>{var p;(p=i.user)!=null&&p.id&&u.value&&await l.getMonthlyAttendanceByShift(i.user.id,u.value)};O(async()=>{i.isAuthenticated?(await i.fetchUser(),y()):v.push("/login")}),G(u,async p=>{l.selectedMonth=p,await y()});const W=()=>v.go(-1);return(p,e)=>{var f,b,x,k,g,w,A,D,S,L,M,B,C,E,T,N,P,V,j,U,$,q;const c=Z("router-link");return o(),d("div",st,[t("div",rt,[t("button",{class:"btn-3",onClick:W},e[1]||(e[1]=[t("i",{class:"far fa-arrow-left"},null,-1),t("span",{class:"hidden md:flex"},"Back",-1)])),t("h1",at," My Attendance of "+r(R.value),1),t("div",nt,[t("div",null,[J(t("input",{id:"monthSelect",type:"month","onUpdate:modelValue":e[0]||(e[0]=s=>u.value=s),onChange:y,class:"input-1"},null,544),[[K,u.value]])])])]),t("div",lt,[t("div",ot,[e[8]||(e[8]=t("h2",{class:"title-md"},"User Info",-1)),e[9]||(e[9]=t("hr",null,null,-1)),t("div",it,[t("p",null,[e[2]||(e[2]=t("strong",null,"Name:",-1)),a(" "+r((f=n(i).user)==null?void 0:f.name),1)]),t("p",null,[e[3]||(e[3]=t("strong",null,"Designation:",-1)),a(" "+r((x=(b=n(i).user)==null?void 0:b.designation)==null?void 0:x.title),1)]),t("p",null,[e[4]||(e[4]=t("strong",null,"Department:",-1)),a(" "+r((g=(k=n(i).user)==null?void 0:k.department)==null?void 0:g.name),1)]),t("p",null,[e[5]||(e[5]=t("strong",null,"Company:",-1)),a(" "+r((A=(w=n(i).user)==null?void 0:w.company)==null?void 0:A.name),1)]),t("p",null,[e[6]||(e[6]=t("strong",null,"Phone:",-1)),a(" "+r((D=n(i).user)==null?void 0:D.phone),1)]),t("p",null,[e[7]||(e[7]=t("strong",null,"Email:",-1)),a(" "+r((S=n(i).user)==null?void 0:S.email),1)])])]),t("div",dt,[e[16]||(e[16]=t("h2",{class:"title-md"},"Attendance Summary",-1)),e[17]||(e[17]=t("hr",null,null,-1)),t("div",ut,[t("p",null,[e[10]||(e[10]=t("strong",null,"Total Working Days:",-1)),a(" "+r((M=(L=n(l))==null?void 0:L.summary)==null?void 0:M.total_working_days),1)]),t("p",null,[e[11]||(e[11]=t("strong",null,"Present Days:",-1)),a(" "+r((C=(B=n(l))==null?void 0:B.summary)==null?void 0:C.total_present_days),1)]),t("p",null,[e[12]||(e[12]=t("strong",null,"Absent Days:",-1)),a(" "+r((T=(E=n(l))==null?void 0:E.summary)==null?void 0:T.total_absent_days),1)]),t("p",null,[e[13]||(e[13]=t("strong",null,"Late Days:",-1)),a(" "+r((P=(N=n(l))==null?void 0:N.summary)==null?void 0:P.total_late_days),1)]),t("p",null,[e[14]||(e[14]=t("strong",null,"Total Working Hours:",-1)),a(" "+r((j=(V=n(l))==null?void 0:V.summary)==null?void 0:j.total_working_hours),1)]),t("p",null,[e[15]||(e[15]=t("strong",null,"Total Overtime Hours:",-1)),a(" "+r(($=(U=n(l))==null?void 0:U.summary)==null?void 0:$.total_overtime_hours),1)])])])]),n(l).isLoading?(o(),h(tt,{key:0})):(o(),d("div",pt,[t("div",_t,[t("table",mt,[e[20]||(e[20]=t("thead",null,[t("tr",{class:"bg-gray-200 text-xs"},[t("th",{class:"border p-1"},"Date"),t("th",{class:"border p-1"},"Day"),t("th",{class:"border p-1"},"Shift"),t("th",{class:"border p-1"},"Entry Time"),t("th",{class:"border p-1"},"Exit Time"),t("th",{class:"border p-1"},"Working Hours"),t("th",{class:"border p-1"},"Late Entry"),t("th",{class:"border p-1"},"Early Leave"),t("th",{class:"border p-1"},"Status")])],-1)),t("tbody",yt,[(o(!0),d(Q,null,X((q=n(l))==null?void 0:q.monthlyLogs,s=>(o(),d("tr",{key:s==null?void 0:s.date,class:"hover:border-b-2 hover:border-gray-200 hover:bg-blue-200"},[t("td",ct,r(s.date),1),t("td",ht,r(s.weekday),1),t("td",{class:"border px-1 py-0.5",title:`${s.shift_start_time} to ${s.shift_end_time}`},r(s.shift_name),9,vt),t("td",{class:"border px-1 py-0.5",title:`Device: ${s.entry_device}`},r(s.entry_time),9,ft),t("td",{class:"border px-1 py-0.5",title:`Device: ${s.exit_device}`},r(s.exit_time),9,bt),t("td",xt,r(s.working_hours),1),t("td",{class:m(["border px-1 py-0.5",{"bg-red-100":s.late_duration}])},[s.late_duration?(o(),d("div",kt,[a(r(s.late_duration)+" ",1),s.first_short_leave?(o(),d("span",gt,[t("i",{class:m({"fas fa-check-circle text-green-500":s.first_short_leave==="Approved","fas fa-hourglass-half text-yellow-500":s.first_short_leave==="Pending","fas fa-times-circle text-red-500":s.first_short_leave==="Rejected"}),title:s.first_short_leave},null,10,wt)])):_("",!0),s.late_duration&&!s.first_short_leave?(o(),h(c,{key:1,to:{name:"ShortLeaveAdd",query:{type:"Delay",start_time:s.shift_start_time,end_time:s.entry_time}},class:"btn-link"},{default:H(()=>e[18]||(e[18]=[a(" (Apply) ")])),_:2},1032,["to"])):_("",!0)])):_("",!0)],2),t("td",{class:m(["border px-1 py-0.5",{"bg-red-100":s.early_leave_duration}])},[s.early_leave_duration?(o(),d("div",At,[a(r(s.early_leave_duration)+" ",1),s.last_short_leave?(o(),d("span",Dt,[t("i",{class:m({"fas fa-check-circle text-green-500 text-lg":s.last_short_leave==="Approved","fas fa-hourglass-half text-yellow-500 text-lg":s.last_short_leave==="Pending","fas fa-times-circle text-red-500 text-lg":s.last_short_leave==="Rejected"}),title:s.last_short_leave},null,10,St)])):_("",!0),s.early_leave_duration&&!s.last_short_leave?(o(),h(c,{key:1,to:{name:"ShortLeaveAdd",query:{type:"Early",start_time:s.exit_time,end_time:s.shift_end_time}},class:"btn-link"},{default:H(()=>e[19]||(e[19]=[a(" (Apply) ")])),_:2},1032,["to"])):_("",!0)])):_("",!0)],2),t("td",{class:m(["border px-1 py-0.5",{"text-red-600":s.status==="Absent","text-green-600":s.status==="Present"}])},r(s.status),3)]))),128))])])])]))])}}};export{Tt as default};
