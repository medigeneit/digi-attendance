import{S as j,u as R,D as V,r as P,G as B,h as F,q as G,x as O,p as $,c as a,o as i,a as t,b as d,w as W,l,v as r,k as _,H as p,F as u,e as b,t as v,n as c,i as Y,d as h,aa as H,s as z,m as J}from"./index-ombHs5Us.js";import{_ as K}from"./WeekendAssignModal-B6bLCDD_.js";import{u as Q}from"./company-CqTE02VT.js";import{u as X}from"./department-sHpy9hhm.js";import{u as Z}from"./designation-D49CvdSh.js";import{u as ee}from"./leave-approval-elRpT9F2.js";import{u as te}from"./user-DXoWOCiD.js";import{d as se}from"./dayjs.min-Ckry7HFI.js";const oe={class:"my-container space-y-2"},le={class:"card-bg md:p-8 p-4 mx-4"},ae={class:"grid gap-4"},ie={class:"border p-4 rounded-md bg-gray-100"},ne={class:"grid md:grid-cols-2 gap-4"},de={class:"space-y-1"},re={class:"space-y-1"},pe={class:"space-y-1"},ue={class:"space-y-1"},me={class:"space-y-1"},ve={class:"space-y-1"},ye={class:"space-y-1"},be={class:"border p-4 rounded-md bg-gray-100"},xe={class:"grid md:grid-cols-2 gap-4"},ge={class:"space-y-1"},fe=["value"],_e={class:"space-y-1"},ce=["value"],ke={class:"space-y-1"},Se=["value"],Ue={class:"space-y-1"},we={class:"space-y-1"},De={class:"space-y-1"},Ve={class:"space-y-1"},Pe={class:"space-y-1"},Ce={class:""},Me={key:0,class:"flex gap-2 md:gap-4 bg-white p-2 border rounded mt-1"},Ae={class:"space-y-1"},Ye=["value"],he={class:"space-y-1"},Ne=["value"],Te={class:"space-y-1"},Ee={class:"border p-4 rounded-md bg-gray-100"},Le={class:"grid md:grid-cols-4 gap-4"},qe={class:"space-y-1"},Ie={class:"space-y-1"},je={class:"space-y-1"},Re={class:"space-y-1"},Be={class:"relative"},Fe=["type"],Ge={class:"flex justify-center gap-4"},Ze={__name:"UserAdd",setup(Oe){const k=j(),N=R(),S=te(),U=Q(),C=X(),M=Z(),w=ee(),{designations:T}=V(M),{companies:E}=V(U),{error:A}=V(S),x=P(!1),D=P(!1),o=B({name:"",bn_name:"",phone:"",email:"",password:"",role:"employee",type:"",address:"",device_user_id:null,is_active:!0,company_id:"",department_id:"",designation_id:"",shift_id:"",nid:"",date_of_birth:"",joining_date:"",employment_type:"Probationary",provisional_month:0,extended_provisional_month:0,employee_id:"",weekends:[],leave_approval_id:"",other_approval_id:""}),m=P({weekends:[],start_month:se(new Date).format("YYYY-MM")||"",end_month:""});F(async()=>{await U.fetchCompanies(),await w.fetchLeaveApprovals()}),G(()=>o.company_id,async n=>{n&&(await C.fetchDepartments(n),await M.fetchDesignations(n),o.department_id="",o.designation_id="",o.shift_id="")});const L=n=>{m.value=n},q=async()=>{var n,e,y,s;try{const g=((e=(n=m.value)==null?void 0:n.weekends)==null?void 0:e.length)>0?{...m.value}:null,f={name:o.name,bn_name:o.bn_name,phone:o.phone,email:o.email,password:o.password,role:o.role,type:o.type,address:o.address,device_user_id:o.device_user_id,is_active:o.is_active,company_id:o.company_id,department_id:o.department_id,designation_id:o.designation_id,nid:o.nid,date_of_birth:o.date_of_birth,joining_date:o.joining_date,employee_id:o.employee_id,employment_type:o.employment_type,provisional_month:o.provisional_month,extended_provisional_month:o.extended_provisional_month,weekends:o.weekends,...g?{selected_weekend:g}:{},leave_approval_id:o.leave_approval_id,other_approval_id:o.other_approval_id};await S.createUser(f),A.value?k.error(A.value):(k.success("User created successfully"),await S.fetchUsers(),N.replace("/settings/user-list"))}catch(g){const f=((s=(y=g.response)==null?void 0:y.data)==null?void 0:s.message)||"Failed to save user";k.error(f),console.error(f)}},I=O(()=>{var e;const n=(e=U.companies.find(y=>y.id===o.company_id))==null?void 0:e.name;return n?T.value[n]||[]:[]});return(n,e)=>{const y=$("RouterLink");return i(),a("div",oe,[t("div",le,[e[66]||(e[66]=t("h2",{class:"title-lg text-center"},"Add Employee",-1)),e[67]||(e[67]=t("p",{class:"text-sm text-gray-500 text-center mb-3"},[d(" Fields marked "),t("span",{class:"text-red-600"},"*"),d(" are required. ")],-1)),t("form",{onSubmit:W(q,["prevent"]),class:"space-y-4"},[t("div",ae,[t("div",ie,[e[32]||(e[32]=t("p",{class:"title-md"},"Personal Info",-1)),e[33]||(e[33]=t("hr",{class:"my-2"},null,-1)),t("div",ne,[t("div",de,[e[25]||(e[25]=t("label",{class:"block text-sm font-semibold text-gray-700"},[d(" Name "),t("span",{class:"text-red-600"},"*")],-1)),l(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>o.name=s),type:"text",class:"input-light",placeholder:"Enter full name",required:""},null,512),[[r,o.name]])]),t("div",re,[e[26]||(e[26]=t("label",{class:"block text-sm font-semibold text-gray-700"},"Bangla Name",-1)),l(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>o.bn_name=s),type:"text",class:"input-light",placeholder:"বাংলায় নাম লিখুন"},null,512),[[r,o.bn_name]])]),t("div",pe,[e[27]||(e[27]=t("label",{class:"block text-sm font-semibold text-gray-700"},[d(" Phone "),t("span",{class:"text-red-600"},"*")],-1)),l(t("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>o.phone=s),type:"text",class:"input-light",placeholder:"01xxxxxxxxx",required:""},null,512),[[r,o.phone]])]),t("div",ue,[e[28]||(e[28]=t("label",{class:"block text-sm font-semibold text-gray-700"},"Email",-1)),l(t("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>o.email=s),type:"email",class:"input-light",placeholder:"name@example.com"},null,512),[[r,o.email]])]),t("div",me,[e[29]||(e[29]=t("label",{class:"block text-sm font-semibold text-gray-700"},"Address",-1)),l(t("input",{"onUpdate:modelValue":e[4]||(e[4]=s=>o.address=s),type:"text",class:"input-light",placeholder:"House / Road / City"},null,512),[[r,o.address]])]),t("div",ve,[e[30]||(e[30]=t("label",{class:"block text-sm font-semibold text-gray-700"},"NID",-1)),l(t("input",{"onUpdate:modelValue":e[5]||(e[5]=s=>o.nid=s),type:"text",class:"input-light",placeholder:"National ID or passport"},null,512),[[r,o.nid]])]),t("div",ye,[e[31]||(e[31]=t("label",{class:"block text-sm font-semibold text-gray-700"},"Date of Birth",-1)),l(t("input",{"onUpdate:modelValue":e[6]||(e[6]=s=>o.date_of_birth=s),type:"date",class:"input-light",placeholder:"YYYY-MM-DD"},null,512),[[r,o.date_of_birth]])])])]),t("div",be,[e[55]||(e[55]=t("p",{class:"title-md"},"Professional Info",-1)),e[56]||(e[56]=t("hr",{class:"my-2"},null,-1)),t("div",xe,[t("div",ge,[e[35]||(e[35]=t("label",{class:"block text-sm font-semibold text-gray-700"},[d(" Company "),t("span",{class:"text-red-600"},"*")],-1)),l(t("select",{id:"company_id","onUpdate:modelValue":e[7]||(e[7]=s=>o.company_id=s),class:"input-light",required:""},[e[34]||(e[34]=t("option",{value:"",disabled:""},"Select a company",-1)),(i(!0),a(u,null,b(c(E),s=>(i(),a("option",{key:s==null?void 0:s.id,value:s==null?void 0:s.id},v(s==null?void 0:s.name),9,fe))),128))],512),[[p,o.company_id]])]),t("div",_e,[e[37]||(e[37]=t("label",{class:"block text-sm font-semibold text-gray-700"},"Department",-1)),l(t("select",{"onUpdate:modelValue":e[8]||(e[8]=s=>o.department_id=s),class:"input-light"},[e[36]||(e[36]=t("option",{value:"",disabled:""},"Select a department",-1)),(i(!0),a(u,null,b(c(C).departments,s=>(i(),a("option",{key:s==null?void 0:s.id,value:s==null?void 0:s.id},v(s==null?void 0:s.name),9,ce))),128))],512),[[p,o.department_id]])]),t("div",ke,[e[39]||(e[39]=t("label",{class:"block text-sm font-semibold text-gray-700"},"Designation",-1)),l(t("select",{"onUpdate:modelValue":e[9]||(e[9]=s=>o.designation_id=s),class:"input-light"},[e[38]||(e[38]=t("option",{value:"",disabled:""},"Select a designation",-1)),(i(!0),a(u,null,b(I.value,s=>(i(),a("option",{key:s==null?void 0:s.id,value:s==null?void 0:s.id},v(s==null?void 0:s.title),9,Se))),128))],512),[[p,o.designation_id]])]),t("div",Ue,[e[41]||(e[41]=t("label",{class:"block text-sm font-semibold text-gray-700"},"Employment Type",-1)),l(t("select",{"onUpdate:modelValue":e[10]||(e[10]=s=>o.employment_type=s),class:"input-light"},e[40]||(e[40]=[Y('<option value="Probationary">Probationary</option><option value="Permanent">Permanent</option><option value="Part_Time">Part Time</option><option value="Remote">Remote</option><option value="Contract">Contract</option><option value="Freelance">Freelance</option><option value="Intern">Intern</option>',7)]),512),[[p,o.employment_type]])]),o.employment_type==="Probationary"?(i(),a(u,{key:0},[t("div",we,[e[42]||(e[42]=t("label",{class:"block text-sm font-semibold text-gray-700"}," Probationary (month) ",-1)),l(t("input",{"onUpdate:modelValue":e[11]||(e[11]=s=>o.provisional_month=s),type:"number",class:"input-light",placeholder:"Number of months"},null,512),[[r,o.provisional_month]])]),t("div",De,[e[43]||(e[43]=t("label",{class:"block text-sm font-semibold text-gray-700"}," Extended Probationary (month) ",-1)),l(t("input",{"onUpdate:modelValue":e[12]||(e[12]=s=>o.extended_provisional_month=s),type:"number",class:"input-light",placeholder:"Additional months"},null,512),[[r,o.extended_provisional_month]])])],64)):_("",!0),t("div",Ve,[e[45]||(e[45]=t("label",{class:"block text-sm font-semibold text-gray-700"},[d(" Line Type "),t("span",{class:"text-red-600"},"*")],-1)),l(t("select",{"onUpdate:modelValue":e[13]||(e[13]=s=>o.type=s),class:"input-light",required:""},e[44]||(e[44]=[Y('<option value="">Select Line Type</option><option value="executive">Executive</option><option value="support_staff">Support Staff</option><option value="doctor">Doctor</option><option value="academy_body">Academy Body</option>',5)]),512),[[p,o.type]])]),t("div",Pe,[e[46]||(e[46]=t("label",{class:"block text-sm font-semibold text-gray-700"},"Joining Date",-1)),l(t("input",{"onUpdate:modelValue":e[14]||(e[14]=s=>o.joining_date=s),type:"date",class:"input-light",placeholder:"YYYY-MM-DD"},null,512),[[r,o.joining_date]])]),t("div",Ce,[t("button",{type:"button",class:"btn-2",onClick:e[15]||(e[15]=s=>D.value=!0)}," Select Weekends "),m.value?(i(),a("div",Me,[t("p",null,[e[47]||(e[47]=t("strong",null,"Weekends:",-1)),d(" "+v(m.value.weekends.join(", ")),1)]),t("p",null,[e[48]||(e[48]=t("strong",null,"Start Date:",-1)),d(" "+v(m.value.start_month),1)])])):_("",!0),h(K,{isOpen:D.value,hasShift:m.value,onClose:e[16]||(e[16]=s=>D.value=!1),onUpdate:L},null,8,["isOpen","hasShift"])]),t("div",Ae,[e[50]||(e[50]=t("label",{class:"block text-sm font-semibold text-gray-700"}," Leave Approval Group ",-1)),l(t("select",{"onUpdate:modelValue":e[17]||(e[17]=s=>o.leave_approval_id=s),class:"input-light"},[e[49]||(e[49]=t("option",{value:"",disabled:""},"Select Leave Approval Group",-1)),(i(!0),a(u,null,b(c(w).leaveApprovals,s=>(i(),a(u,{key:s.id},[s.type==="leave"?(i(),a("option",{key:0,value:s.id},v(s.name),9,Ye)):_("",!0)],64))),128))],512),[[p,o.leave_approval_id]])]),t("div",he,[e[52]||(e[52]=t("label",{class:"block text-sm font-semibold text-gray-700"}," Other Approval Group ",-1)),l(t("select",{"onUpdate:modelValue":e[18]||(e[18]=s=>o.other_approval_id=s),class:"input-light"},[e[51]||(e[51]=t("option",{value:"",disabled:""},"Select Other Approval Group",-1)),(i(!0),a(u,null,b(c(w).leaveApprovals,s=>(i(),a(u,{key:s.id},[s.type==="other"?(i(),a("option",{key:0,value:s.id},v(s.name),9,Ne)):_("",!0)],64))),128))],512),[[p,o.other_approval_id]])]),t("div",Te,[e[54]||(e[54]=t("label",{class:"block text-sm font-semibold text-gray-700"},"Active Status",-1)),l(t("select",{"onUpdate:modelValue":e[19]||(e[19]=s=>o.is_active=s),class:"input-light"},e[53]||(e[53]=[t("option",{value:!0},"Active",-1),t("option",{value:!1},"Inactive",-1)]),512),[[p,o.is_active]])])])]),t("div",Ee,[e[62]||(e[62]=t("p",{class:"title-md"},"Technical Info",-1)),e[63]||(e[63]=t("hr",{class:"my-2"},null,-1)),t("div",Le,[t("div",qe,[e[58]||(e[58]=t("label",{class:"block text-sm font-semibold text-gray-700"},[d(" Role "),t("span",{class:"text-red-600"},"*")],-1)),l(t("select",{"onUpdate:modelValue":e[20]||(e[20]=s=>o.role=s),class:"input-light",required:""},e[57]||(e[57]=[t("option",{value:"employee"},"Employee",-1),t("option",{value:"admin"},"Admin",-1),t("option",{value:"super_admin"},"Super Admin",-1),t("option",{value:"developer"},"Developer",-1)]),512),[[p,o.role]])]),t("div",Ie,[e[59]||(e[59]=t("label",{class:"block text-sm font-semibold text-gray-700"},"Device User ID",-1)),l(t("input",{"onUpdate:modelValue":e[21]||(e[21]=s=>o.device_user_id=s),type:"number",placeholder:"1353",class:"input-light"},null,512),[[r,o.device_user_id]])]),t("div",je,[e[60]||(e[60]=t("label",{class:"block text-sm font-semibold text-gray-700"},[d(" Employee ID "),t("span",{class:"text-red-600"},"*")],-1)),l(t("input",{"onUpdate:modelValue":e[22]||(e[22]=s=>o.employee_id=s),type:"text",placeholder:"Employee ID : M123567",class:"input-light",required:""},null,512),[[r,o.employee_id]])]),t("div",Re,[e[61]||(e[61]=t("label",{class:"block text-sm font-semibold text-gray-700"},[d(" Password "),t("span",{class:"text-red-600"},"*")],-1)),t("div",Be,[l(t("input",{"onUpdate:modelValue":e[23]||(e[23]=s=>o.password=s),type:x.value?"text":"password",class:"input-light",placeholder:"Create a secure password",required:""},null,8,Fe),[[H,o.password]]),t("span",{class:"absolute inset-y-0 right-3 flex items-center cursor-pointer text-gray-500",onClick:e[24]||(e[24]=s=>x.value=!x.value)},[t("i",{class:z(x.value?"fas fa-eye-slash":"fas fa-eye")},null,2)])])])])])]),t("div",Ge,[h(y,{to:{name:"UserList"},type:"button",class:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600"},{default:J(()=>e[64]||(e[64]=[d(" Cancel ")])),_:1,__:[64]}),e[65]||(e[65]=t("button",{type:"submit",class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600"}," Save ",-1))])],32)])])}}};export{Ze as default};
