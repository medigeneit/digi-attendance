const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LeaveApplicationModal-Ckgyfcfd.js","assets/index-DBoenVRM.js","assets/index-JIFKTdl6.css","assets/ApprovalItem-Srj1DXPm.js","assets/AcceptAndRejectHandler-BuBFfzkB.js","assets/LoaderView-Beah4jQ5.js","assets/_plugin-vue_export-helper-DlAUqK2U.js","assets/ShareComponent-Bc0EiexD.js","assets/leave-application-B_n_ZxXf.js","assets/LeaveApplicationModal-B7WJltA7.css","assets/ShortLeaveDetailsModal-uxPD4UGb.js","assets/ScreenshotCapture-C63GF0k-.js","assets/short-leave-kAyix5Bs.js","assets/ShortLeaveDetailsModal-D4avNQ1k.css","assets/ManualAttendanceDetailsModal-83VKMLn2.js","assets/manual-attendance-Cqg5_gCo.js","assets/ManualAttendanceDetailsModal-MS8n2gFL.css","assets/ShiftExchangeDetailsModal-CUqti4ZO.js","assets/exchange-DcgWUyzJ.js","assets/ShiftExchangeDetailsModal-BlZsJzAI.css","assets/OffdayExchangeDetailsModal-gjX8un1H.js","assets/OffdayExchangeDetailsModal-jTt80Glg.css"])))=>i.map(i=>d[i]);
import{u as ee}from"./user-94mWFQVR.js";import{s as K,m as re,c as r,o as s,n as D,i as C,a as e,j as $,t as x,k,p as de,w as S,q as L,x as B,g as M,F as q,y as U,f as R,R as $e,z as ue,r as j,d as ce,e as pe,A as H,h as De,B as Ce,b as ye,u as ie,C as J,D as Me,_ as X}from"./index-DBoenVRM.js";import{L as Le}from"./LoaderView-Beah4jQ5.js";import{m as Te,_ as Ae}from"./task-tree-C_aZjW50.js";import{o as oe,g as se,a as ne,b as Se,c as Re}from"./datetime-DcVwRp76.js";import{u as Ne}from"./useTaskStore-CsA_sqbF.js";import{_ as qe,a as Oe}from"./TodoSection-B8-Szkt8.js";import{_ as Ee}from"./TaskTreeViewWithSubTable-Bw_Gcgjn.js";import{O as Pe}from"./OverlyModal-Brtwwhx-.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useTodoStore-DZX_97Iu.js";import"./DraggableList.vue_vue_type_script_setup_true_lang-B8nlhN6l.js";import"./UserChip-CKu2a8Yl.js";import"./TaskSupervisorAndEmployee-vN8goQwu.js";import"./TaskStatus-y8lQT4WM.js";import"./url-CePbr-gY.js";const Be={class:"grid gap-4 md:grid-cols-3 mt-4 container mx-auto"},Ue={class:"text-3xl"},je={class:"text-3xl"},Ve={class:"text-3xl"},Fe={class:"text-3xl"},Ie={class:"text-3xl"},We={class:"text-3xl"},ze={class:"text-3xl"},Ye={class:"text-3xl"},He={class:"text-3xl"},Ke={__name:"DashboardAdminView",setup(h){const i=ee(),{dashboardInfo:y,selectedDate:f}=K(i);return(c,a)=>{const p=re("RouterLink");return s(),r("div",Be,[D(p,{to:{name:"TodayAttendanceReport",query:{status:"all"}},class:"main-button"},{default:C(()=>{var t;return[e("span",Ue,x((t=k(y))==null?void 0:t.totalUsers),1),a[0]||(a[0]=$(" Total Employees "))]}),_:1,__:[0]}),D(p,{to:{name:"TodayAttendanceReport",query:{status:"Present"}},class:"main-button"},{default:C(()=>{var t;return[e("span",je,x((t=k(y))==null?void 0:t.todayPresents),1),a[1]||(a[1]=$(" Today Present "))]}),_:1,__:[1]}),D(p,{to:{name:"TodayAttendanceReport",query:{status:"Absent"}},class:"main-button"},{default:C(()=>{var t;return[e("span",Ve,x((t=k(y))==null?void 0:t.todayAbsents),1),a[2]||(a[2]=$(" Today Absent "))]}),_:1,__:[2]}),D(p,{to:{name:"LeaveApplicationsForDay",query:{applicationType:"today"}},class:"main-button"},{default:C(()=>{var t;return[e("span",Fe,x((t=k(y))==null?void 0:t.todayLeaves),1),a[3]||(a[3]=$(" Today Leave "))]}),_:1,__:[3]}),D(p,{to:{name:"LeaveApplicationsForDay",query:{applicationType:"tomorrow"}},class:"main-button"},{default:C(()=>{var t;return[e("span",Ie,x((t=k(y))==null?void 0:t.tomorrowLeaves),1),a[4]||(a[4]=$(" Tomorrow Leave "))]}),_:1,__:[4]}),D(p,{to:{name:"DateWiseShortLeaveList",query:{date:k(f)}},class:"main-button"},{default:C(()=>{var t;return[e("span",We,x((t=k(y))==null?void 0:t.todayShortLeaves),1),a[5]||(a[5]=$(" Today Short Leaves "))]}),_:1,__:[5]},8,["to"]),D(p,{to:{name:"DailyLateAttendanceReport",query:{date:k(f)}},class:"main-button"},{default:C(()=>{var t;return[e("span",ze,x((t=k(y))==null?void 0:t.todayLateEntries),1),a[6]||(a[6]=$(" Today Late Report "))]}),_:1,__:[6]},8,["to"]),D(p,{to:{name:"PreviousAfterApplicationList",query:{applicationType:"prev",date:k(f)}},class:"main-button"},{default:C(()=>{var t;return[e("span",Ye,x((t=k(y))==null?void 0:t.prevWeekLeaves),1),a[7]||(a[7]=$(" Leave history of previous week "))]}),_:1,__:[7]},8,["to"]),D(p,{to:{name:"PreviousAfterApplicationList",query:{applicationType:"after",date:k(f)}},class:"main-button"},{default:C(()=>{var t;return[e("span",He,x((t=k(y))==null?void 0:t.nextWeekLeaves),1),a[8]||(a[8]=$(" Upcoming leaves "))]}),_:1,__:[8]},8,["to"]),D(p,{to:{name:"TodoList",query:{applicationType:"after",date:k(f)}},class:"main-button"},{default:C(()=>a[9]||(a[9]=[$(" Todos ")])),_:1,__:[9]},8,["to"])])}}},ae=(h,i,y,f)=>{const c=new Date(f,y-1,i);return h.filter(a=>{const p=a.deadline?new Date(a.deadline):null,t=oe(new Date);if(a.assigned_at){const n=oe(new Date(a.assigned_at));if(c<n)return!1;let l=null;return a.completed_at&&(l=oe(new Date(a.completed_at))),!(l&&l<c||p&&p<c&&c>t)}return!1}).map(a=>{let p=!1;return a.deadline&&(p=new Date(a.deadline)<c),{...a,deadline_crossed:p}})},Ge={class:"px-4 py-2 flex items-center bg-gray-50 group"},Je=["disabled"],Xe={class:"ml-4 md:ml-auto flex items-center gap-2"},Ze=["value"],Qe=de({__name:"DailyTaskHeading",props:{selectedDay:{type:String,required:!0},loading:{type:Boolean,default:!1}},emits:["change",,"reloadClick","monthWiseButtonClick"],setup(h,{emit:i}){const y=h,f=i;function c(){f("change",se(new Date))}function a(){const t=new Date(y.selectedDay);t.setDate(t.getDate()+1),f("change",se(t))}function p(){const t=new Date(y.selectedDay);t.setDate(t.getDate()-1),f("change",se(t))}return(t,n)=>(s(),r("div",Ge,[n[4]||(n[4]=e("h2",{class:"leading-none font-semibold text-lg"},"Daily Task",-1)),e("button",{class:"btn-3 mx-4 h-7",onClick:n[0]||(n[0]=S(l=>f("monthWiseButtonClick"),["prevent"]))},"Month Wise"),e("button",{class:"btn-3 mx-4 h-7",onClick:S(c,["prevent"])},"Today"),e("button",{class:L(["btn-3 px-2 py-2 mx-4 size-7 disabled:text-gray-300 disabled:border-gray-300",{"animate-spin text-gray-300 border-gray-300 !bg-opacity-0":h.loading}]),onClick:n[1]||(n[1]=S(l=>f("reloadClick"),["prevent"])),disabled:h.loading},n[3]||(n[3]=[e("i",{class:"fas fa-redo-alt"},null,-1)]),10,Je),e("div",Xe,[e("button",{class:"btn-2 h-7",onClick:S(p,["prevent"])},"Previous Day"),e("button",{class:"btn-2 h-7",onClick:S(a,["prevent"])},"Next Day"),e("input",{type:"date",value:h.selectedDay,onInput:n[2]||(n[2]=l=>{var v;return f("change",(v=l.target)==null?void 0:v.value)}),class:"border px-2 rounded"},null,40,Ze)])]))}}),et={class:"px-4 py-2 flex items-center bg-gray-50 group"},tt=["disabled"],st={class:"ml-4 md:ml-auto flex items-center gap-2"},nt=["value"],ot=de({__name:"MonthlyTaskHeading",props:{selectedMonth:{type:String,required:!0},loading:{type:Boolean,default:!1}},emits:["reloadClick","dayWiseButtonClick","change"],setup(h,{emit:i}){const y=h,f=i;function c(){f("change",ne(new Date))}function a(){var v;const[t,n]=(v=y.selectedMonth)==null?void 0:v.split("-").map(Number),l=new Date(t,n,1);l.setMonth(l.getMonth()),f("change",ne(l))}function p(){var v;const[t,n]=(v=y.selectedMonth)==null?void 0:v.split("-").map(Number),l=new Date(t,n,1);l.setMonth(l.getMonth()-2),f("change",ne(l))}return(t,n)=>(s(),r("div",et,[n[4]||(n[4]=e("h2",{class:"leading-none font-semibold text-lg"},"Monthly Task",-1)),e("button",{class:"btn-3 mx-4 h-7",onClick:n[0]||(n[0]=S(l=>f("dayWiseButtonClick"),["prevent"]))},"Day Wise"),e("button",{class:"btn-3 mx-4 h-7",onClick:S(c,["prevent"])},"Current Month"),e("button",{class:L(["btn-3 px-2 py-2 mx-4 size-7 disabled:text-gray-300 disabled:border-gray-300",{"animate-spin text-gray-300 border-gray-300 !bg-opacity-0":h.loading}]),onClick:n[1]||(n[1]=S(l=>f("reloadClick"),["prevent"])),disabled:h.loading},n[3]||(n[3]=[e("i",{class:"fas fa-redo-alt"},null,-1)]),10,tt),e("div",st,[e("button",{class:"btn-2 h-7",onClick:S(p,["prevent"])},"Previous Month"),e("button",{class:"btn-2 h-7",onClick:S(a,["prevent"])},"Next Month"),e("input",{type:"month",value:h.selectedMonth,onInput:n[2]||(n[2]=l=>{var v;return f("change",(v=l.target)==null?void 0:v.value)}),class:"border px-2 rounded"},null,40,nt)])]))}}),at={key:0,class:"space-y-6 py-2"},lt={key:0,class:"fad fa-folder text-xs mr-2"},rt={key:1,class:"fad fa-file-alt text-xs mr-2"},it={key:2,class:"text-center w-full mt-4 text-xs text-gray-600"},le={__name:"TaskListOnDay",props:{isCurrentMonth:{type:Boolean,default:!1},tasks:{type:Array,default:()=>[]},limit:{type:Number,default:null},tree:{type:Boolean,default:!1}},emits:["clickOnMore"],setup(h,{emit:i}){const y=h,f=i,c=B(()=>{var a;return y.limit?((a=y==null?void 0:y.tasks)==null?void 0:a.slice(0,y.limit))||[]:[...y.tasks]});return(a,p)=>(s(),r("div",null,[h.tree?(s(),r("div",at,[(s(!0),r(q,null,U(c.value,(t,n)=>(s(),R(Ee,{"hide-buttons":"","hide-assigned-users":"",task:t,key:t.id,index:n,class:"shadow hover:shadow-md border border-blue-300 rounded-md *:border-none"},null,8,["task","index"]))),128))])):(s(),r("ul",{key:1,class:L({"text-gray-500 group-hover:text-gray-900":!h.isCurrentMonth})},[(s(!0),r(q,null,U(c.value,t=>(s(),r("li",{class:"mb-2",key:t.id},[D(k($e),{to:`/tasks/${t.id}`,target:"_blank",class:"flex items-center hover:underline hover:text-blue-600"},{default:C(()=>[t.children_task_count>0?(s(),r("i",lt)):M("",!0),t.children_task_count==0?(s(),r("i",rt)):M("",!0),e("span",{class:L(["line-clamp-1",{"text-red-800":t.deadline_crossed}])},x(t.title),3)]),_:2},1032,["to"])]))),128))],2)),h.tasks.length-c.value.length>0?(s(),r("div",it,[e("button",{onClick:p[0]||(p[0]=S(t=>f("clickOnMore",t),["prevent"])),class:"text-blue-600 hover:underline"}," +"+x(h.tasks.length-c.value.length)+" More Tasks ",1)])):M("",!0)]))}},dt={class:"relative"},ut={class:"ml-auto"},ct=["onClick"],pt={key:0,class:"absolute inset-0 bg-gray-300 bg-opacity-90"},yt={class:"absolute inset-16 bg-white border border-blue-500 rounded-md z-20 overflow-y-auto"},mt={class:"text-lg font-semibold mb-4 sticky top-0 border-b border-blue-200 px-4 z-30 py-3 bg-white flex items-center"},ft={__name:"TaskInMonth",props:{month:{type:String,required:!0,validator:h=>/^\d{4}-(0[1-9]|1[0-2])$/.test(h)},tasks:{type:Array,required:!0,default:()=>[]}},setup(h){const i=ue({day:null,month:null,year:null});function y(t){t.stopPropagation(),i.day=null,i.month=null,i.year=null}function f(t,n,l,v){t.stopPropagation(),i.day=n,i.month=l,i.year=v}const c=(t,n,l)=>{const v=new Date;return t===v.getDate()&&n===v.getMonth()+1&&l===v.getFullYear()},a=(t,n,l)=>t===i.day&&n===i.month&&l===i.year,p=(t,n,l,v)=>{const T=c(t,n,l);return{"bg-green-100 text-green-900 border-blue-500 border-2 scale-105 z-10":T,"border-r border-t hover:border border-blue-200  hover:scale-105 hover:z-20 hover:bg-blue-50":!T,"bg-gray-50":!v}};return(t,n)=>(s(),r("div",dt,[h.month?(s(),R(qe,{key:0,month:h.month,class:"border-t border-blue-200/50 relative"},{date:C(({day:l,month:v,year:T,isCurrentMonth:_})=>[e("div",{tabindex:"0",class:L(["transition origin-center p-2 outline-blue-600 outline-1 cursor-pointer",p(l,v,T,_)])},[e("div",{class:L(["font-bold w-full flex items-center",{"text-gray-300":!_}])},[e("div",null,x(l),1),e("div",ut,[a(l,v,T)?M("",!0):(s(),r("button",{key:0,class:"btn-icon",onClick:S(d=>f(d,l,v,T),["prevent"])},n[0]||(n[0]=[e("i",{class:"fas fa-expand-arrows text-gray-400 hover:text-gray-600"},null,-1)]),8,ct))])],2),D(le,{"is-current-month":_,tasks:k(ae)(h.tasks,l,v,T),limit:3,class:"text-xs mt-4",onClickOnMore:d=>f(d,l,v,T)},null,8,["is-current-month","tasks","onClickOnMore"])],2)]),"calender-bottom":C(()=>[i.day?(s(),r("div",pt,[e("div",yt,[e("div",mt,[$(" Tasks for "+x(i.day)+"/"+x(i.month)+"/"+x(i.year)+" ",1),e("button",{class:"ml-auto",type:"button",onClick:S(y,["prevent"])},n[1]||(n[1]=[e("i",{class:"fas fa-times"},null,-1)]))]),D(le,{class:"p-4","is-current-month":t.isCurrentMonth,tasks:k(ae)(h.tasks,i.day,i.month,i.year),tree:!0},null,8,["is-current-month","tasks"])])])):M("",!0)]),_:1},8,["month"])):M("",!0)]))}},xt={class:"bg-opacity-90 relative"},vt={class:"rounded-md z-20"},gt={class:"text-md sticky top-0 border-b px-4 z-30 py-3 bg-white flex items-center shadow"},bt={class:"flex justify-between items-center gap-6 w-full"},_t={key:0,class:"text-blue-800 bg-blue-100 rounded-full border px-4 py-0.5 text-sm"},ht={key:1,class:"text-blue-800 bg-blue-100 rounded-full border px-4 py-0.5 text-sm"},kt={class:"ml-auto flex items-center gap-2"},wt={key:0,class:"w-32 relative h-8"},$t={__name:"DailyTask",setup(h){const i=ue({day:null,month:null,year:null}),y=j(),f=j(),c=j("loading"),a=Ne(),p=ce(),t=j(""),n=j("day-wise"),l=j("not-completed");pe(()=>{y.value=se(new Date),f.value=ne(new Date)}),H(y,d=>{const[u,b,O]=d.split("-").map(Number);i.day=O,i.month=b,i.year=u}),H(f,d=>{const[u,b]=d.split("-").map(Number);i.day=1,i.month=b,i.year=u}),H(()=>i.month,async()=>{c.value="loading",await v(),c.value=""}),H(n,d=>{if(d=="month-wise"){const[u,b]=y.value.split("-");f.value=`${u}-${b}`}});async function v(){await a.fetchMyTasks()}const T=async()=>{c.value="loading",await v(),c.value=""},_=B(()=>{var b,O;const d=A=>{var N,F;return t.value?(F=A==null?void 0:A.toUpperCase())==null?void 0:F.includes((N=t.value)==null?void 0:N.toUpperCase()):!0},u=n.value=="day-wise"?{"user-ids":(b=p==null?void 0:p.user)==null?void 0:b.id,status:l.value}:{"user-ids":(O=p==null?void 0:p.user)==null?void 0:O.id};return Te(ae(a.tasks,i.day,i.month,i.year),u).filter(A=>{var N;return d(A.title)||((N=A.children_tasks)==null?void 0:N.some(F=>d(F==null?void 0:F.title)))}).map(A=>({...A,children_tasks:A.children_tasks.filter(N=>d(N.title))}))});return(d,u)=>(s(),r("div",null,[n.value=="day-wise"?(s(),R(Qe,{key:0,loading:c.value=="loading","selected-day":y.value,onChange:u[0]||(u[0]=b=>y.value=b),onReloadClick:T,onMonthWiseButtonClick:u[1]||(u[1]=b=>n.value="month-wise")},null,8,["loading","selected-day"])):M("",!0),n.value=="month-wise"?(s(),R(ot,{key:1,loading:c.value=="loading","selected-month":f.value,onChange:u[2]||(u[2]=b=>f.value=b),onDayWiseButtonClick:u[3]||(u[3]=b=>n.value="day-wise"),onReloadClick:T},null,8,["loading","selected-month"])):M("",!0),e("div",xt,[e("div",vt,[e("div",gt,[e("div",bt,[n.value=="day-wise"?(s(),r("div",_t,x(k(Se)(y.value)),1)):M("",!0),n.value=="month-wise"?(s(),r("div",ht,x(k(Re)(f.value)),1)):M("",!0),e("div",kt,[n.value=="day-wise"?(s(),r("div",wt,[u[7]||(u[7]=e("label",{class:"absolute text-xs left-3 -top-1.5 bg-slate-100 text-blue-500"},"Status",-1)),De(e("select",{"onUpdate:modelValue":u[4]||(u[4]=b=>l.value=b),class:"h-8 text-xs px-2 text-gray-600 border-2 border-gray-400 rounded-md w-full"},u[6]||(u[6]=[e("option",{value:""},"--ALL TASKS--",-1),e("option",{value:"not-completed"},"Not Completed",-1)]),512),[[Ce,l.value]])])):M("",!0),D(Ae,{modelValue:t.value,"onUpdate:modelValue":u[5]||(u[5]=b=>t.value=b),class:"w-full md:w-48 md:ml-auto h-8","debounce-time":0},null,8,["modelValue"])])])]),n.value=="day-wise"?(s(),R(le,{key:0,class:"p-4 overflow-y-auto",tasks:_.value,tree:!0},null,8,["tasks"])):n.value=="month-wise"?(s(),R(ft,{key:1,tasks:_.value||[],month:f.value,class:"bg-gray-50"},null,8,["tasks","month"])):M("",!0)]),c.value==="loading"?(s(),R(Le,{key:0,class:"absolute inset-0 flex items-center justify-center z-20 bg-opacity-70"})):M("",!0)])]))}},Dt={class:"bg-white shadow-md rounded-lg"},Ct={class:"overflow-x-auto shadow-md min-h-max"},Mt={class:"min-w-full text-sm text-left text-gray-500 table-fixed"},Lt={class:"text-xs"},Tt={class:"text-sm font-semibold text-blue-800"},At={__name:"DashboardLeaveBalance",setup(h){const i=ee(),{userDashboard:y}=K(i);return(f,c)=>{var a,p,t,n;return s(),r("div",Dt,[c[4]||(c[4]=e("h2",{class:"text-xl font-semibold py-2 px-4"},"Leave Balance",-1)),e("div",Ct,[e("table",Mt,[e("thead",null,[e("tr",Lt,[c[0]||(c[0]=e("th",{class:"px-2 py-1 font-semibold text-gray-900 border bg-gray-50"},null,-1)),(s(!0),r(q,null,U((a=k(y))==null?void 0:a.leave_balance,l=>(s(),r("th",{class:"px-4 text-center py-1 font-semibold text-gray-900 border bg-gray-50 w-40",key:l.id},x(l.name),1))),128))])]),e("tbody",null,[e("tr",null,[c[1]||(c[1]=e("td",{class:"px-4 py-4 font-medium text-gray-900 border text-xs"},"Total",-1)),(s(!0),r(q,null,U((p=k(y))==null?void 0:p.leave_balance,l=>(s(),r("td",{class:"px-4 text-center py-3 font-medium text-gray-900 border",key:l.id},x(l.annual_quota),1))),128))]),e("tr",null,[c[2]||(c[2]=e("td",{class:"px-4 py-3 font-medium text-gray-900 border text-xs"},"Used",-1)),(s(!0),r(q,null,U((t=k(y))==null?void 0:t.leave_balance,l=>(s(),r("td",{class:"px-4 text-center py-4 font-medium text-gray-900 border",key:l.id},x(l.used_days),1))),128))]),e("tr",Tt,[c[3]||(c[3]=e("td",{class:"px-4 py-3 border text-xs"},"Balance",-1)),(s(!0),r(q,null,U((n=k(y))==null?void 0:n.leave_balance,l=>(s(),r("td",{class:"px-4 text-center py-4 border",key:l.id},x(l.remaining_days),1))),128))])])])])])}}},St={class:"flex items-center gap-2 mr-2"},Rt=["onClick"],Nt=["onClick"],qt={__name:"DashboardMyTodoList",setup(h){const i=ye(),y=ie();function f(c){y.push({query:{...i.query,"todos[type]":c.type,"todos[year]":c.year,"todos[month]":c.month,"todos[day]":c.day}})}return(c,a)=>(s(),R(Oe,{type:k(i).query["todos[type]"],year:k(i).query["todos[year]"],month:k(i).query["todos[month]"],day:k(i).query["todos[day]"],userRole:"employee",onChangeInput:f},{beforeHeader:C(()=>a[0]||(a[0]=[e("h2",{class:"text-md font-medium"},"Todo List",-1)])),typeSelection:C(({types:p,changeType:t,selected:n})=>{var l,v,T,_;return[e("div",St,[e("button",{onClick:S(d=>{var u;return t((u=p[0])==null?void 0:u.value)},["prevent"]),class:L(["rounded text-sm h-[32px] w-20",(n==null?void 0:n.type)==((l=p[0])==null?void 0:l.value)?"btn-2":"btn-3"])},x((v=p[0])==null?void 0:v.label),11,Rt),e("button",{onClick:S(d=>{var u;return t((u=p[1])==null?void 0:u.value)},["prevent"]),class:L(["rounded text-sm h-[32px] w-20",(n==null?void 0:n.type)==((T=p[1])==null?void 0:T.value)?"btn-2 ":"btn-3"])},x((_=p[1])==null?void 0:_.label),11,Nt)])]}),_:1},8,["type","year","month","day"]))}},Ot={class:"bg-white shadow-sm rounded-xl p-4"},Et={class:"flex items-center justify-between mb-1"},Pt={key:0,class:"text-xs italic text-center py-4 text-gray-500 mt-2"},Bt={key:1,class:"py-3 divide-y divide-gray-100"},Ut=["onClick"],jt={class:"flex justify-between items-center py-2 rounded hover:bg-sky-50/60 transition-colors"},Vt={class:"text-sm text-gray-900 min-w-0"},Ft={class:"font-medium"},It={class:"opacity-70"},Wt={key:0,class:"fas fa-clock mr-1.5"},zt={key:1,class:"fas fa-hourglass-half mr-1.5"},Yt={key:2,class:"fas fa-check-circle mr-1.5"},Ht={key:3,class:"fas fa-times-circle mr-1.5"},Kt={class:"mb-1 text-gray-700 flex flex-wrap items-center gap-x-2.5 gap-y-1"},Gt=["title"],Jt={class:"truncate max-w-[9.5rem] sm:max-w-none"},Xt={class:"truncate max-w-[9.5rem] sm:max-w-none"},Zt={key:1,class:"truncate max-w-[10rem] sm:max-w-none"},Qt=["title"],es={class:"mt-6"},ts={class:"flex items-center justify-between mb-1"},ss={key:0,class:"text-xs italic text-center py-4 text-gray-500 mt-2"},ns={key:1,class:"py-3 divide-y divide-gray-100"},os=["onClick"],as={class:"flex justify-between items-center py-2 rounded hover:bg-sky-50/60 transition-colors"},ls={class:"text-sm text-gray-900 min-w-0"},rs={class:"opacity-80"},is={class:"mt-6"},ds={class:"flex items-center justify-between mb-1"},us={class:"flex items-center gap-3"},cs={key:0,class:"text-xs italic text-center py-4 text-gray-500 mt-2"},ps={key:1,class:"py-3 divide-y divide-gray-100"},ys=["onClick"],ms={class:"flex justify-between items-center py-2 rounded hover:bg-sky-50/60 transition-colors"},fs={class:"text-sm text-gray-900 min-w-0"},xs={class:"opacity-80"},vs={class:"mt-6"},gs={class:"flex items-center justify-between mb-1"},bs={key:0,class:"text-xs italic text-center py-4 text-gray-500 mt-2"},_s={key:1,class:"py-3 divide-y divide-gray-100"},hs=["onClick"],ks={class:"flex justify-between items-center py-2 rounded hover:bg-sky-50/60 transition-colors"},ws={class:"text-sm text-gray-900 min-w-0"},$s={class:"opacity-80"},Z="inline-flex items-center rounded-full border px-2 py-0.5 text-[12px]",Q="border-gray-300 bg-gray-50 text-gray-800",Ds={__name:"DashboardRecentApplications",setup(h){const i=J(()=>X(()=>import("./LeaveApplicationModal-Ckgyfcfd.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]))),y=J(()=>X(()=>import("./ShortLeaveDetailsModal-uxPD4UGb.js"),__vite__mapDeps([10,1,2,3,4,5,6,11,7,12,13]))),f=J(()=>X(()=>import("./ManualAttendanceDetailsModal-83VKMLn2.js"),__vite__mapDeps([14,1,2,3,4,5,6,7,15,16]))),c=J(()=>X(()=>import("./ShiftExchangeDetailsModal-CUqti4ZO.js"),__vite__mapDeps([17,1,2,3,4,5,6,11,7,18,19]))),a=J(()=>X(()=>import("./OffdayExchangeDetailsModal-gjX8un1H.js"),__vite__mapDeps([20,1,2,3,4,5,6,11,7,18,21]))),p=ee(),{userDashboard:t}=K(p),n=B(()=>{var g;return((g=t.value)==null?void 0:g.lists)??{}}),l=B(()=>n.value.current_month_leave??[]),v=B(()=>n.value.short_leave??[]),T=B(()=>n.value.exchange??[]),_=B(()=>n.value.manual_attendance??[]),d={null:{title:"Handover Waiting",cls:"bg-gray-500 text-white"},Pending:{title:"Pending",cls:"bg-yellow-500 text-white"},Approved:{title:"Approved",cls:"bg-green-500 text-white"},Rejected:{title:"Rejected",cls:"bg-red-500 text-white"}},u=g=>d[g??"null"]??{title:String(g||"Unknown"),cls:"bg-gray-400 text-white"},b=g=>Array.isArray(g)?g.filter(o=>o==null?void 0:o.name).map(o=>`${o.name} (${(o==null?void 0:o.days)??0})`).join(", "):"",O=j({open:!1,id:null}),A=j({open:!1,id:null}),N=j({open:!1,id:null}),F=g=>{O.value={open:!0,id:g}},me=g=>{A.value={open:!0,id:g}},fe=g=>{N.value={open:!0,id:g}},W=j({open:!1,id:null,type:null}),xe=g=>{const o=(g==null?void 0:g.exchange_type)==="offday"?"offday":"shift";W.value={open:!0,id:g.id,type:o}},ve=B(()=>W.value.type==="offday"?a:c),ge=B(()=>`${W.value.type||"x"}-${W.value.id||"x"}`);function be(g){if(!g)return null;const o=String(g).trim();let w=o.match(/^(\d{4})-(\d{2})-(\d{2})$/);return w?new Date(+w[1],+w[2]-1,+w[3],0,0,0):(w=o.match(/^(\d{4})-(\d{2})-(\d{2})[ T](\d{2}):(\d{2})(?::(\d{2}))?$/),w?new Date(+w[1],+w[2]-1,+w[3],+w[4],+w[5],+(w[6]||0)):null)}function V(g){const o=be(g);return o?o.toLocaleDateString(void 0,{day:"2-digit",month:"short",year:"numeric"}):""}function _e(g){const o=String(g||"").match(/^(\d{4})-(\d{2})-(\d{2})$/);return o?new Date(+o[1],+o[2]-1,+o[3],0,0,0):null}function he(g,o){const w=new Date(g);return w.setDate(w.getDate()+o),w}function ke(g,o){return g&&o&&g.getFullYear()===o.getFullYear()&&g.getMonth()===o.getMonth()&&g.getDate()===o.getDate()}function te(g){const o=g.getFullYear(),w=String(g.getMonth()+1).padStart(2,"0"),m=String(g.getDate()).padStart(2,"0");return`${o}-${w}-${m}`}function we(g){const o=Array.isArray(g)?g.slice():[],w=E=>Array.from(new Set(E)).sort(),m=w(o.filter(E=>(E==null?void 0:E.leave_type_id)!=="weekend").map(E=>E.date).filter(Boolean)),I=w(o.filter(E=>(E==null?void 0:E.leave_type_id)==="weekend").map(E=>E.date).filter(Boolean)),P=[];let z=null,Y=null;for(const E of m){const G=_e(E);if(G){if(!z){z=Y=G;continue}ke(he(Y,1),G)?Y=G:(P.push({from:te(z),to:te(Y)}),z=Y=G)}}return z&&Y&&P.push({from:te(z),to:te(Y)}),{ranges:P,weekends:I,leaveCount:m.length}}return(g,o)=>{const w=re("RouterLink");return s(),r("div",Ot,[e("section",null,[e("header",Et,[o[5]||(o[5]=e("div",{class:"flex items-center gap-2"},[e("i",{class:"fas fa-file h-5 w-5 text-gray-600"}),e("h2",{class:"text-lg font-semibold text-gray-900"},[$("Applications "),e("span",{class:"text-xs ml-2 text-green-600 font-medium"},"Latest")])],-1)),D(w,{to:{name:"MyLeaveApplications"},class:"text-xs text-blue-600 hover:underline"},{default:C(()=>o[4]||(o[4]=[$(" See more ")])),_:1,__:[4]})]),o[9]||(o[9]=e("hr",{class:"border-gray-200"},null,-1)),l.value.length===0?(s(),r("div",Pt," No applications ")):(s(),r("div",Bt,[(s(!0),r(q,null,U(l.value,m=>(s(),r("button",{key:m.id,class:"block w-full text-left",onClick:I=>F(m.id)},[e("div",jt,[e("h3",Vt,[e("span",Ft,"#"+x(m.id),1),e("span",It," ("+x(b(m.leave_type_counts))+")",1)]),e("span",{class:L(["font-medium flex items-center whitespace-nowrap text-[11px] px-2 py-0.5 rounded-full",u(m.status).cls])},[m.status===null?(s(),r("i",Wt)):m.status==="Pending"?(s(),r("i",zt)):m.status==="Approved"?(s(),r("i",Yt)):(s(),r("i",Ht)),$(" "+x(u(m.status).title),1)],2)]),e("div",Kt,[(s(!0),r(q,null,U([we(m.json_data)],I=>(s(),r(q,{key:"info-"+m.id},[I.leaveCount>1?(s(!0),r(q,{key:0},U(I.ranges,(P,z)=>(s(),r("span",{key:z,class:L([Z,Q]),title:P.from===P.to?V(P.from):V(P.from)+" – "+V(P.to)},[o[7]||(o[7]=e("i",{class:"far fa-calendar-minus mr-1"},null,-1)),P.from!==P.to?(s(),r(q,{key:0},[e("span",Jt,x(V(P.from)),1),o[6]||(o[6]=e("span",{class:"mx-1"},"–",-1)),e("span",Xt,x(V(P.to)),1)],64)):(s(),r("span",Zt,x(V(P.from)),1))],10,Gt))),128)):(s(),r(q,{key:1},[I.ranges[0]?(s(),r("span",{key:0,class:L([Z,Q]),title:V(I.ranges[0].from)},[o[8]||(o[8]=e("i",{class:"far fa-calendar-day mr-1"},null,-1)),$(" "+x(V(I.ranges[0].from)),1)],10,Qt)):M("",!0)],64))],64))),128))])],8,Ut))),128))]))]),e("section",es,[e("header",ts,[o[11]||(o[11]=e("div",{class:"flex items-center gap-2"},[e("i",{class:"fas fa-walking h-5 w-5 text-gray-600"}),e("h2",{class:"text-base font-semibold text-gray-900"},"Short Leave")],-1)),D(w,{to:{name:"MyShortLeaves"},class:"text-xs text-blue-600 hover:underline"},{default:C(()=>o[10]||(o[10]=[$("See more")])),_:1,__:[10]})]),o[12]||(o[12]=e("hr",{class:"border-gray-200"},null,-1)),v.value.length===0?(s(),r("div",ss," No short leave ")):(s(),r("div",ns,[(s(!0),r(q,null,U(v.value,m=>(s(),r("button",{key:m.id,class:"w-full text-left",onClick:I=>me(m.id)},[e("div",as,[e("h3",ls,[e("span",{class:L([Z,Q,"text-xs mr-1"])},x(V(m.date)),3),e("span",rs,"("+x(m.type||"—")+")",1)]),e("span",{class:L(["text-[11px] px-2 py-0.5 rounded-full",u(m.status).cls])},x(u(m.status).title),3)])],8,os))),128))]))]),e("section",is,[e("header",ds,[o[15]||(o[15]=e("div",{class:"flex items-center gap-2"},[e("i",{class:"fas fa-exchange-alt h-5 w-5 text-gray-600"}),e("h2",{class:"text-base font-semibold text-gray-900"},"Exchange")],-1)),e("div",us,[D(w,{to:{name:"MyShiftExchangeList"},class:"text-xs text-blue-600 hover:underline"},{default:C(()=>o[13]||(o[13]=[$("Shift")])),_:1,__:[13]}),D(w,{to:{name:"MyOffdayExchangeList"},class:"text-xs text-blue-600 hover:underline"},{default:C(()=>o[14]||(o[14]=[$("Offday")])),_:1,__:[14]})])]),o[16]||(o[16]=e("hr",{class:"border-gray-200"},null,-1)),T.value.length===0?(s(),r("div",cs," No exchange ")):(s(),r("div",ps,[(s(!0),r(q,null,U(T.value,m=>(s(),r("button",{key:m.id,class:"block w-full text-left",onClick:I=>xe(m)},[e("div",ms,[e("h3",fs,[e("span",{class:L([Z,Q,"text-xs mr-1"])},x(V(m.current_date)),3),e("span",xs,"("+x(m.exchange_type||"—")+")",1)]),e("span",{class:L(["text-[11px] px-2 py-0.5 rounded-full",u(m.status).cls])},x(u(m.status).title),3)])],8,ys))),128))]))]),e("section",vs,[e("header",gs,[o[18]||(o[18]=e("div",{class:"flex items-center gap-2"},[e("i",{class:"fas fa-user-check h-5 w-5 text-gray-600"}),e("h2",{class:"text-base font-semibold text-gray-900"},"Manual Attendance")],-1)),D(w,{to:{name:"MyManualAttendanceList"},class:"text-xs text-blue-600 hover:underline"},{default:C(()=>o[17]||(o[17]=[$("See more")])),_:1,__:[17]})]),o[19]||(o[19]=e("hr",{class:"border-gray-200"},null,-1)),_.value.length===0?(s(),r("div",bs," No manual application ")):(s(),r("div",_s,[(s(!0),r(q,null,U(_.value,m=>(s(),r("button",{key:m.id,class:"block w-full text-left",onClick:I=>fe(m.id)},[e("div",ks,[e("h3",ws,[e("span",{class:L([Z,Q,"text-xs mr-1"])},x(m.check_in?V(m.check_in):V(m.check_out)),3),e("span",$s,"("+x(m.type||"—")+")",1)]),e("span",{class:L(["text-[11px] px-2 py-0.5 rounded-full",u(m.status).cls])},x(u(m.status).title),3)])],8,hs))),128))]))]),O.value.open?(s(),R(k(i),{key:0,open:O.value.open,"onUpdate:open":o[0]||(o[0]=m=>O.value.open=m),id:O.value.id},null,8,["open","id"])):M("",!0),A.value.open?(s(),R(k(y),{key:1,open:A.value.open,"onUpdate:open":o[1]||(o[1]=m=>A.value.open=m),id:A.value.id},null,8,["open","id"])):M("",!0),N.value.open?(s(),R(k(f),{key:2,open:N.value.open,"onUpdate:open":o[2]||(o[2]=m=>N.value.open=m),id:N.value.id},null,8,["open","id"])):M("",!0),W.value.open?(s(),R(Me(ve.value),{key:ge.value,open:W.value.open,"onUpdate:open":o[3]||(o[3]=m=>W.value.open=m),id:W.value.id},null,40,["open","id"])):M("",!0)])}}},Cs={class:"bg-white shadow-sm rounded-xl p-3"},Ms={class:"flex items-center justify-between"},Ls={key:0,class:"text-[11px] text-gray-500"},Ts={class:"inline-flex items-center gap-1 px-1.5 py-0.5 rounded-full bg-blue-50 text-blue-700"},As={key:0,class:"text-xs italic text-center py-6 text-gray-500"},Ss={key:1,class:"space-y-2"},Rs={class:"flex items-start gap-3 min-w-0"},Ns={class:"min-w-0"},qs={class:"text-sm font-medium text-gray-900 truncate"},Os={class:"text-[11px] text-gray-500 mt-0.5"},Es={class:"text-base font-semibold text-gray-800 flex items-center gap-2 p-3"},Ps={class:"space-y-4 px-3 pb-4"},Bs={class:"text-xs text-gray-500 flex items-center gap-2"},Us={class:"flex justify-end gap-2 mt-2"},js={__name:"DashboardRecentNotices",setup(h){const i=ee(),{userDashboard:y}=K(i),f=ie(),c=_=>{if(!_)return"—";const d=new Date(_);return isNaN(+d)?_:new Intl.DateTimeFormat(void 0,{day:"2-digit",month:"short",year:"numeric"}).format(d)},a=_=>{if(!_)return"";const d=new Date(_);if(isNaN(+d))return"";const u=(Date.now()-d.getTime())/1e3,b=new Intl.RelativeTimeFormat(void 0,{numeric:"auto"}),O=[["year",60*60*24*365],["month",60*60*24*30],["week",60*60*24*7],["day",60*60*24],["hour",60*60],["minute",60],["second",1]];for(const[A,N]of O){const F=Math.round(u/N);if(Math.abs(F)>=1)return b.format(-F,A)}return b.format(0,"second")},p=_=>{const d=c(_),u=a(_);return u?`${d} · ${u}`:d},t=B(()=>{var _;return((_=y.value)==null?void 0:_.notices)??[]}),n=B(()=>[...t.value].sort((d,u)=>{const b=d!=null&&d.user_feedback?1:0,O=u!=null&&u.user_feedback?1:0;if(b!==O)return b-O;const A=new Date((d==null?void 0:d.published_at)||0).getTime();return new Date((u==null?void 0:u.published_at)||0).getTime()-A})),l=B(()=>n.value.find(_=>!(_!=null&&_.user_feedback))||null),v=j(!!l.value);H(l,_=>{v.value=!!_});const T=_=>{const d=_||l.value;if(!d)return;const u=d.type===1?`/notice-details/${d.id}`:`/policy-details/${d.id}`;f.push(u)};return(_,d)=>{const u=re("RouterLink");return s(),r("div",Cs,[e("div",Ms,[d[4]||(d[4]=e("div",{class:"flex items-center gap-1.5"},[e("i",{class:"fas fa-bell"}),e("h2",{class:"text-base font-semibold"},"Notices")],-1)),n.value.length?(s(),r("div",Ls,[e("span",Ts,[d[3]||(d[3]=e("span",{class:"h-1.5 w-1.5 rounded-full bg-blue-500"},null,-1)),$(" "+x(n.value.filter(b=>!b.user_feedback).length)+" pending ",1)])])):M("",!0)]),d[10]||(d[10]=e("hr",{class:"my-2 border-gray-200"},null,-1)),n.value.length?(s(),r("div",Ss,[(s(!0),r(q,null,U(n.value,b=>(s(),r("article",{key:b.id,class:"group flex items-center justify-between gap-2 p-3 border border-gray-100 rounded-lg hover:border-blue-200 transition"},[e("div",Rs,[e("span",{class:L(["inline-flex items-center gap-1 px-1.5 py-0.5 rounded-full text-[10px] font-medium mt-0.5",b.user_feedback?"bg-emerald-50 text-emerald-700":"bg-rose-50 text-rose-700"])},[e("span",{class:L(["h-2 w-2 rounded-full",b.user_feedback?"bg-emerald-600":"bg-rose-600 animate-pulse"])},null,2)],2),e("div",Ns,[e("h3",qs,x(b.title||"Untitled notice"),1),e("p",Os,[d[5]||(d[5]=e("i",{class:"fas fa-calendar-alt text-gray-400 mr-1"},null,-1)),$(" "+x(p(b.published_at)),1)])])]),D(u,{to:b.type===1?`/notice-details/${b.id}`:`/policy-details/${b.id}`,class:"shrink-0 inline-flex items-center gap-1 text-blue-600 hover:text-blue-700 text-xs font-semibold"},{default:C(()=>d[6]||(d[6]=[$(" View "),e("i",{class:"fas fa-arrow-right text-[10px]"},null,-1)])),_:2,__:[6]},1032,["to"])]))),128))])):(s(),r("div",As," No pending notice found ")),l.value?(s(),R(Pe,{key:2,show:v.value,onClose:d[2]||(d[2]=b=>v.value=!1)},{default:C(()=>[e("div",Es,[d[7]||(d[7]=e("i",{class:"fas fa-bell text-blue-600"},null,-1)),$(" "+x(l.value.title||"New notice"),1)]),e("div",Ps,[e("p",Bs,[d[8]||(d[8]=e("i",{class:"fas fa-calendar-alt text-gray-400"},null,-1)),$(" Published: "+x(p(l.value.published_at)),1)]),d[9]||(d[9]=e("p",{class:"text-sm text-gray-700"}," You must read this notice before proceeding. ",-1)),e("div",Us,[e("button",{onClick:d[0]||(d[0]=b=>v.value=!1),class:"bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium px-3 py-1.5 rounded-md transition text-sm"}," Later "),e("button",{onClick:d[1]||(d[1]=b=>T(l.value)),class:"bg-blue-600 hover:bg-blue-700 text-white font-semibold px-4 py-1.5 rounded-md transition text-sm"}," Read ")])])]),_:1},8,["show"])):M("",!0)])}}},Vs={class:"w-full px-6 py-4"},Fs={class:"grid lg:grid-cols-4 gap-6 items-start"},Is={class:"gap-0 rounded-md bg-white shadow-md border border-gray-300 col-span-full lg:col-span-3 lg:row-span-2"},Ws={class:"flex items-center justify-center gap-4 py-2"},zs={class:"col-span-full lg:col-span-1 grid sm:grid-cols-2 lg:grid-cols-1 gap-6 sticky top-[80px]"},Ys={class:"card-bg gap-0 shadow-md border border-gray-300"},Hs={class:"card-bg gap-0 shadow-md border border-gray-300"},Ks={class:"card-bg gap-0 shadow-md border border-gray-300"},Gs={__name:"DashboardEmployeeView",setup(h){const i=j("todos"),y=ye(),f=ie();return H(()=>i.value,function(c){c!=="todos"&&f.replace({query:Object.keys(y.query).filter(a=>!a.match(/^todos\[/)).reduce((a,p)=>(a[p]=y.query[p],a),{})})}),(c,a)=>(s(),r("div",Vs,[e("div",Fs,[e("div",Is,[e("div",Ws,[e("button",{onClick:a[0]||(a[0]=S(p=>i.value="todos",["prevent"])),class:L(["!py-0.5 text-sm",{"btn-2":i.value=="todos","btn-3 hover:bg-gray-200 hover:text-blue-500":i.value!="todos"}])}," Todos ",2),e("button",{onClick:a[1]||(a[1]=S(p=>i.value="tasks",["prevent"])),class:L(["!py-0.5 text-sm",{"btn-2":i.value=="tasks","btn-3 hover:bg-gray-200 hover:text-blue-500":i.value!="tasks"}])}," Tasks ",2)]),i.value=="todos"?(s(),R(qt,{key:0})):M("",!0),i.value=="tasks"?(s(),R($t,{key:1})):M("",!0)]),e("div",zs,[e("div",Ys,[D(Ds)]),e("div",Hs,[D(js)]),e("div",Ks,[D(At)])])])]))}},yn={__name:"DashBoard",setup(h){const i=ce(),y=ee(),{userDashboard:f}=K(y),{user:c}=K(i),a=B(()=>{var t;return["admin","super_admin","developer"].includes((t=c==null?void 0:c.value)==null?void 0:t.role)}),p=j(null);return pe(async()=>{var n,l;c.value||await i.fetchUser(),await y.fetchUserDashboardData(),a.value&&await y.fetchAdminDashboardData();const t=(l=(n=f.value)==null?void 0:n.notices)==null?void 0:l.find(v=>!v.user_feedback);t&&(p.value=t)}),(t,n)=>a.value&&k(i).isAdminMood?(s(),R(Ke,{key:0})):(s(),R(Gs,{key:1}))}};export{yn as default};
