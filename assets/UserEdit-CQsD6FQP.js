import{A as I,i as q,s as P,r as E,b as G,q as O,p as M,c as r,a as o,j as W,w as z,d as s,v as u,z as i,F as v,x as b,h as x,B as _,C as m,k as p,D as H,y as J,l as $,m as K,f as Q,g as X,n as Y,o as n,t as f}from"./index-BXrlqugj.js";import{L as Z}from"./LoaderView-BUFtqNWw.js";import{u as c}from"./company-9pCdCAig.js";import{u as h}from"./department-BDZTZ7x2.js";import{u as ee}from"./designation-B5MBfYWZ.js";import{u as le}from"./leave-approval-Bubh36HG.js";import{u as oe}from"./shift-DIMFh35_.js";import{u as te}from"./user-DSD79H5Z.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const se={class:"my-container space-y-2"},de={class:"card-bg md:p-8 p-4 mx-4"},ne={class:"grid gap-4"},re={class:"border p-4 rounded-md bg-gray-100"},ae={class:"grid md:grid-cols-2 gap-4"},ie={class:"border p-4 rounded-md bg-gray-100"},ue={class:"grid md:grid-cols-2 gap-4"},pe=["value"],me=["value"],ve=["value"],be=["value"],fe={class:""},ye={class:"flex flex-wrap gap-2 md:gap-4 bg-white p-2 border rounded"},we={class:"flex items-center gap-1.5 md:gap-2"},ge={class:"flex items-center gap-1.5 md:gap-2"},xe={class:"flex items-center gap-1.5 md:gap-2"},ke={class:"flex items-center gap-1.5 md:gap-2"},Ue={class:"flex items-center gap-1.5 md:gap-2"},Se={class:"flex items-center gap-1.5 md:gap-2"},Ve={class:"flex items-center gap-1.5 md:gap-2"},De=["value"],Te=["value"],Ae={class:"border p-4 rounded-md bg-gray-100"},Le={class:"grid md:grid-cols-3 gap-4"},Pe={class:"relative"},Ee=["type"],Me={class:"flex justify-center gap-4"},We={__name:"UserEdit",setup(Ne){const k=le(),t=I({name:"",phone:"",email:"",password:"",role:"employee",type:"executive",address:"",device_user_id:null,is_active:!0,company_id:"",department_id:"",designation_id:"",shift_id:"",nid:"",date_of_birth:"",joining_date:"",employment_type:"Provisional",weekends:[],leave_approval_id:"",other_approval_id:""}),V=te(),y=c(),D=h(),T=ee(),A=oe(),U=q(),S=Q(),L=X(),{designations:N}=P(T),w=E(!1),g=E(!1),{shifts:C}=P(A);G(async()=>{g.value=!0,await y.fetchCompanies(),await k.fetchLeaveApprovals(),await R(),g.value=!1}),O(()=>t.company_id,async d=>{d&&(await D.fetchDepartments(d),await T.fetchDesignations(d),await A.fetchShifts(d),g.value=!1)});const R=async()=>{var d,e;try{const a=S.params.id,l=await V.fetchUser(a);t.name=l.name,t.phone=l.phone,t.email=l.email,t.address=l.address,t.nid=l.nid,t.date_of_birth=l.date_of_birth,t.joining_date=l.joining_date,t.employment_type=l.employment_type,t.weekends=l.weekends||[],t.is_active=l.is_active,t.company_id=l.company_id,t.department_id=l.department_id,t.designation_id=l.designation_id,t.shift_id=l.shift_id,t.role=l.role,t.type=l.type,t.device_user_id=l.device_user_id,t.leave_approval_id=l.leave_approval_id,t.other_approval_id=l.other_approval_id}catch(a){const l=((e=(d=a.response)==null?void 0:d.data)==null?void 0:e.message)||"Failed to load user data";U.error(l),console.error(l),L.push({name:"UserList"})}},B=async()=>{var d,e;try{const a={...t};await V.updateUser(S.params.id,a),U.success("User updated successfully"),L.push({name:"UserShow",params:{id:S.params.id}})}catch(a){const l=((e=(d=a.response)==null?void 0:d.data)==null?void 0:e.message)||"Failed to update user";U.error(l),console.error(l)}},F=M(()=>{var e;const d=(e=y.companies.find(a=>a.id===t.company_id))==null?void 0:e.name;return d?C.value[d]||[]:[]}),j=M(()=>{var e;const d=(e=y.companies.find(a=>a.id===t.company_id))==null?void 0:e.name;return d?N.value[d]||[]:[]});return(d,e)=>{const a=Y("RouterLink");return n(),r("div",se,[o("div",de,[e[72]||(e[72]=o("h2",{class:"title-lg text-center"},"Edit Employee",-1)),g.value?(n(),W(Z,{key:0,class:"bg-gray-100 border shadow-none"})):(n(),r("form",{key:1,onSubmit:z(B,["prevent"]),class:"space-y-4"},[o("div",ne,[o("div",re,[e[33]||(e[33]=o("p",{class:"title-md"},"Personal Info",-1)),e[34]||(e[34]=o("hr",{class:"my-2"},null,-1)),o("div",ae,[o("div",null,[e[27]||(e[27]=o("label",null,"Name",-1)),s(o("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>t.name=l),type:"text",class:"w-full p-2 border rounded",required:""},null,512),[[u,t.name]])]),o("div",null,[e[28]||(e[28]=o("label",null,"Phone",-1)),s(o("input",{"onUpdate:modelValue":e[1]||(e[1]=l=>t.phone=l),type:"text",class:"w-full p-2 border rounded",required:""},null,512),[[u,t.phone]])]),o("div",null,[e[29]||(e[29]=o("label",null,"Email",-1)),s(o("input",{"onUpdate:modelValue":e[2]||(e[2]=l=>t.email=l),type:"email",class:"w-full p-2 border rounded"},null,512),[[u,t.email]])]),o("div",null,[e[30]||(e[30]=o("label",null,"Address",-1)),s(o("input",{"onUpdate:modelValue":e[3]||(e[3]=l=>t.address=l),type:"text",class:"w-full p-2 border rounded"},null,512),[[u,t.address]])]),o("div",null,[e[31]||(e[31]=o("label",null,"NID",-1)),s(o("input",{"onUpdate:modelValue":e[4]||(e[4]=l=>t.nid=l),type:"text",class:"w-full p-2 border rounded"},null,512),[[u,t.nid]])]),o("div",null,[e[32]||(e[32]=o("label",null,"Date of Birth",-1)),s(o("input",{"onUpdate:modelValue":e[5]||(e[5]=l=>t.date_of_birth=l),type:"date",class:"w-full p-2 border rounded"},null,512),[[u,t.date_of_birth]])])])]),o("div",ie,[e[62]||(e[62]=o("p",{class:"title-md"},"Professional Info",-1)),e[63]||(e[63]=o("hr",{class:"my-2"},null,-1)),o("div",ue,[o("div",null,[e[36]||(e[36]=o("label",null,"Company",-1)),s(o("select",{id:"company_id","onUpdate:modelValue":e[6]||(e[6]=l=>t.company_id=l),class:"w-full border rounded px-3 py-2",required:""},[e[35]||(e[35]=o("option",{value:"",disabled:""},"Select a company",-1)),(n(!0),r(v,null,b(x(y).companies,l=>(n(),r("option",{key:l==null?void 0:l.id,value:l==null?void 0:l.id},f(l==null?void 0:l.name),9,pe))),128))],512),[[i,t.company_id]])]),o("div",null,[e[38]||(e[38]=o("label",null,"Department",-1)),s(o("select",{"onUpdate:modelValue":e[7]||(e[7]=l=>t.department_id=l),class:"w-full p-2 border rounded"},[e[37]||(e[37]=o("option",{value:"",disabled:""},"Select a department",-1)),(n(!0),r(v,null,b(x(D).departments,l=>(n(),r("option",{key:l==null?void 0:l.id,value:l==null?void 0:l.id},f(l==null?void 0:l.name),9,me))),128))],512),[[i,t.department_id]])]),o("div",null,[e[40]||(e[40]=o("label",null,"Designation",-1)),s(o("select",{"onUpdate:modelValue":e[8]||(e[8]=l=>t.designation_id=l),class:"w-full p-2 border rounded"},[e[39]||(e[39]=o("option",{value:"",disabled:""},"Select a designation",-1)),(n(!0),r(v,null,b(j.value,l=>(n(),r("option",{key:l==null?void 0:l.id,value:l==null?void 0:l.id},f(l==null?void 0:l.title),9,ve))),128))],512),[[i,t.designation_id]])]),o("div",null,[e[42]||(e[42]=o("label",null,"Shift",-1)),s(o("select",{"onUpdate:modelValue":e[9]||(e[9]=l=>t.shift_id=l),class:"w-full p-2 border rounded"},[e[41]||(e[41]=o("option",{value:"",disabled:""},"Select a shift",-1)),(n(!0),r(v,null,b(F.value,l=>(n(),r("option",{key:l==null?void 0:l.id,value:l==null?void 0:l.id},f(l==null?void 0:l.name),9,be))),128))],512),[[i,t.shift_id]])]),o("div",null,[e[44]||(e[44]=o("label",null,"Employment Type",-1)),s(o("select",{"onUpdate:modelValue":e[10]||(e[10]=l=>t.employment_type=l),class:"w-full p-2 border rounded"},e[43]||(e[43]=[_('<option value="Provisional">Provisional</option><option value="Permanent">Permanent</option><option value="Part_Time">Part Time</option><option value="Remote">Remote</option><option value="Contract">Contract</option><option value="Freelance">Freelance</option><option value="Intern">Intern</option>',7)]),512),[[i,t.employment_type]])]),o("div",null,[e[46]||(e[46]=o("label",null,"Line Type",-1)),s(o("select",{"onUpdate:modelValue":e[11]||(e[11]=l=>t.type=l),class:"w-full p-2 border rounded",required:""},e[45]||(e[45]=[o("option",{value:"executive"},"Executive",-1),o("option",{value:"support_staff"},"Support Staff",-1),o("option",{value:"doctor"},"Doctor",-1),o("option",{value:"academy_body"},"Academy Body",-1)]),512),[[i,t.type]])]),o("div",null,[e[47]||(e[47]=o("label",null,"Joining Date",-1)),s(o("input",{"onUpdate:modelValue":e[12]||(e[12]=l=>t.joining_date=l),type:"date",class:"w-full p-2 border rounded"},null,512),[[u,t.joining_date]])]),o("div",fe,[e[55]||(e[55]=o("p",{class:""},"Select Weekends",-1)),o("div",ye,[o("label",we,[s(o("input",{type:"checkbox",value:"Saturday","onUpdate:modelValue":e[13]||(e[13]=l=>t.weekends=l),class:"form-checkbox"},null,512),[[m,t.weekends]]),e[48]||(e[48]=p(" SAT "))]),o("label",ge,[s(o("input",{type:"checkbox",value:"Sunday","onUpdate:modelValue":e[14]||(e[14]=l=>t.weekends=l),class:"form-checkbox"},null,512),[[m,t.weekends]]),e[49]||(e[49]=p(" SUN "))]),o("label",xe,[s(o("input",{type:"checkbox",value:"Monday","onUpdate:modelValue":e[15]||(e[15]=l=>t.weekends=l),class:"form-checkbox"},null,512),[[m,t.weekends]]),e[50]||(e[50]=p(" MON "))]),o("label",ke,[s(o("input",{type:"checkbox",value:"Tuesday","onUpdate:modelValue":e[16]||(e[16]=l=>t.weekends=l),class:"form-checkbox"},null,512),[[m,t.weekends]]),e[51]||(e[51]=p(" TUE "))]),o("label",Ue,[s(o("input",{type:"checkbox",value:"Wednesday","onUpdate:modelValue":e[17]||(e[17]=l=>t.weekends=l),class:"form-checkbox"},null,512),[[m,t.weekends]]),e[52]||(e[52]=p(" WED "))]),o("label",Se,[s(o("input",{type:"checkbox",value:"Thursday","onUpdate:modelValue":e[18]||(e[18]=l=>t.weekends=l),class:"form-checkbox"},null,512),[[m,t.weekends]]),e[53]||(e[53]=p(" THU "))]),o("label",Ve,[s(o("input",{type:"checkbox",value:"Friday","onUpdate:modelValue":e[19]||(e[19]=l=>t.weekends=l),class:"form-checkbox"},null,512),[[m,t.weekends]]),e[54]||(e[54]=p(" FRI "))])])]),o("div",null,[e[57]||(e[57]=o("label",null,"Leave Approval Group",-1)),s(o("select",{"onUpdate:modelValue":e[20]||(e[20]=l=>t.leave_approval_id=l),class:"w-full p-2 border rounded"},[e[56]||(e[56]=o("option",{value:"",disabled:""},"Select Leave Approval Group",-1)),(n(!0),r(v,null,b(x(k).leaveApprovals,l=>(n(),r("option",{key:l.id,value:l.id},f(l.name),9,De))),128))],512),[[i,t.leave_approval_id]])]),o("div",null,[e[59]||(e[59]=o("label",null,"Other Approval Group",-1)),s(o("select",{"onUpdate:modelValue":e[21]||(e[21]=l=>t.other_approval_id=l),class:"w-full p-2 border rounded"},[e[58]||(e[58]=o("option",{value:"",disabled:""},"Select Other Approval Group",-1)),(n(!0),r(v,null,b(x(k).leaveApprovals,l=>(n(),r("option",{key:l.id,value:l.id},f(l.name),9,Te))),128))],512),[[i,t.other_approval_id]])]),o("div",null,[e[61]||(e[61]=o("label",null,"Active Status",-1)),s(o("select",{"onUpdate:modelValue":e[22]||(e[22]=l=>t.is_active=l),class:"w-full p-2 border rounded"},e[60]||(e[60]=[o("option",{value:!0},"Active",-1),o("option",{value:!1},"Inactive",-1)]),512),[[i,t.is_active]])])])]),o("div",Ae,[e[68]||(e[68]=o("p",{class:"title-md"},"Technical Info",-1)),e[69]||(e[69]=o("hr",{class:"my-2"},null,-1)),o("div",Le,[o("div",null,[e[65]||(e[65]=o("label",null,"Role",-1)),s(o("select",{"onUpdate:modelValue":e[23]||(e[23]=l=>t.role=l),class:"w-full p-2 border rounded",required:""},e[64]||(e[64]=[o("option",{value:"employee"},"Employee",-1),o("option",{value:"admin"},"Admin",-1),o("option",{value:"super_admin"},"Super Admin",-1),o("option",{value:"developer"},"Developer",-1)]),512),[[i,t.role]])]),o("div",null,[e[66]||(e[66]=o("label",null,"Biometric Device User ID",-1)),s(o("input",{"onUpdate:modelValue":e[24]||(e[24]=l=>t.device_user_id=l),type:"number",class:"w-full p-2 border rounded"},null,512),[[u,t.device_user_id]])]),o("div",null,[e[67]||(e[67]=o("label",null,"Password",-1)),o("div",Pe,[s(o("input",{"onUpdate:modelValue":e[25]||(e[25]=l=>t.password=l),type:w.value?"text":"password",class:"w-full p-2 border rounded"},null,8,Ee),[[H,t.password]]),o("span",{class:"absolute inset-y-0 right-3 flex items-center cursor-pointer",onClick:e[26]||(e[26]=l=>w.value=!w.value)},[o("i",{class:J(w.value?"fas fa-eye-slash":"fas fa-eye")},null,2)])])])])])]),o("div",Me,[$(a,{to:{name:"UserList"},type:"button",class:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600"},{default:K(()=>e[70]||(e[70]=[p(" Cancel ")])),_:1}),e[71]||(e[71]=o("button",{type:"submit",class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600"}," Save ",-1))])],32))])])}}};export{We as default};
