import{u as S}from"./company-B4XU3rNv.js";import{r as g,z as E,A as V,c as f,g as N,o as y,a as e,t as m,w as q,h as p,v as h,B as D,N as U,e as F,n as _,k as v,F as j,y as B}from"./index-DK6hEot4.js";import{_ as L}from"./DeleteModal-Be2Wt88i.js";import{_ as I}from"./HeaderWithButtons-DZ_CWF6y.js";import{L as O}from"./LoaderView-oU8U-q3u.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const P={key:0,class:"modal-bg"},T={class:"modal-card"},z={class:"text-lg font-semibold mb-4"},G={class:"mb-4"},H={class:"mb-4"},J={class:"mb-4"},K={class:"mb-4"},Q={class:"mb-4"},R={class:"mb-4"},W={class:"flex justify-end"},X={type:"submit",class:"bg-blue-500 text-white px-4 py-2 rounded"},Y={__name:"CompanyModal",props:{show:{type:Boolean,required:!0},company:{type:Object,default:null}},emits:["close","save"],setup(w,{emit:a}){const r=w,c=a,i=g(!1),t=E({id:null,name:"",short_name:"",address:"",phone:"",email:"",status:"Active"}),k=()=>{i.value=!1,t.id=null,t.name="",t.short_name="",t.address="",t.phone="",t.email="",t.status="Active"};V(()=>r.company,o=>{o&&typeof o=="object"&&Object.keys(o).length>0?(i.value=!0,t.id=o.id||null,t.name=o.name||"",t.short_name=o.short_name||"",t.address=o.address||"",t.phone=o.phone||"",t.email=o.email||"",t.status=o.status||"Active"):k()},{immediate:!0,deep:!0});const x=()=>{c("save",{...t}),b()},b=()=>{c("close")};return(o,s)=>w.show?(y(),f("div",P,[e("div",T,[e("h2",z,m(i.value?"Edit Company":"Add Company"),1),e("form",{onSubmit:q(x,["prevent"])},[e("div",G,[s[6]||(s[6]=e("label",{for:"name",class:"block text-sm font-medium mb-2"},"Name",-1)),p(e("input",{id:"name","onUpdate:modelValue":s[0]||(s[0]=l=>t.name=l),type:"text",class:"w-full border rounded px-3 py-2",placeholder:"Enter company name",required:""},null,512),[[h,t.name]])]),e("div",H,[s[7]||(s[7]=e("label",{for:"short_name",class:"block text-sm font-medium mb-2"},"Short Name",-1)),p(e("input",{id:"short_name","onUpdate:modelValue":s[1]||(s[1]=l=>t.short_name=l),type:"text",class:"w-full border rounded px-3 py-2",placeholder:"Enter short name",required:""},null,512),[[h,t.short_name]])]),e("div",J,[s[8]||(s[8]=e("label",{for:"address",class:"block text-sm font-medium mb-2"},"Address",-1)),p(e("input",{id:"address","onUpdate:modelValue":s[2]||(s[2]=l=>t.address=l),type:"text",class:"w-full border rounded px-3 py-2",placeholder:"Enter address",required:""},null,512),[[h,t.address]])]),e("div",K,[s[9]||(s[9]=e("label",{for:"phone",class:"block text-sm font-medium mb-2"},"Phone",-1)),p(e("input",{id:"phone","onUpdate:modelValue":s[3]||(s[3]=l=>t.phone=l),type:"text",class:"w-full border rounded px-3 py-2",placeholder:"Enter phone number",required:""},null,512),[[h,t.phone]])]),e("div",Q,[s[10]||(s[10]=e("label",{for:"email",class:"block text-sm font-medium mb-2"},"Email",-1)),p(e("input",{id:"email","onUpdate:modelValue":s[4]||(s[4]=l=>t.email=l),type:"email",class:"w-full border rounded px-3 py-2",placeholder:"Enter email",required:""},null,512),[[h,t.email]])]),e("div",R,[s[12]||(s[12]=e("label",{for:"status",class:"block text-sm font-medium mb-2"},"Status",-1)),p(e("select",{id:"status","onUpdate:modelValue":s[5]||(s[5]=l=>t.status=l),class:"w-full border rounded px-3 py-2",required:""},s[11]||(s[11]=[e("option",{value:"Active"},"Active",-1),e("option",{value:"Inactive"},"Inactive",-1)]),512),[[D,t.status]])]),e("div",W,[e("button",{type:"button",onClick:b,class:"bg-gray-300 text-gray-700 px-4 py-2 rounded mr-2"}," Cancel "),e("button",X,m(i.value?"Update":"Create"),1)])],32)])])):N("",!0)}},Z={class:"my-container space-y-2"},ee={class:"overflow-x-auto"},te={class:"min-w-full table-auto bg-white shadow-md rounded-lg overflow-hidden"},se={class:"text-gray-600 text-sm"},oe={key:0,class:"hover:bg-gray-200"},le={colspan:"6"},ae={class:"py-3 px-2 text-left"},ne={class:"font-medium"},de={class:"py-3 px-2 text-left"},re={class:"font-medium"},ie={class:"py-3 px-2 text-left whitespace-nowrap"},ue={class:"font-medium"},me={class:"py-3 px-2 text-center"},ce={class:"font-medium"},pe={class:"py-3 px-2 text-center"},fe={class:"font-medium"},ye={class:"py-3 px-2 text-center"},he={class:"font-medium"},xe={class:"py-3 px-2 text-center"},be={class:"flex item-center justify-center gap-4"},_e=["onClick"],ve=["onClick"],ge={key:2},Se={__name:"CompanyList",setup(w){const a=S(),r=U(),c=g(!1),i=g(!1),t=g(null),k=()=>{t.value=null,c.value=!0},x=()=>{c.value=!1},b=n=>{t.value=n,c.value=!0},o=n=>{t.value=n,i.value=!0},s=()=>{i.value=!1},l=async n=>{try{n.id?(await a.updateCompany(n.id,n),r.success("Company updated successfully!")):(await a.createCompany(n),r.success("Company added successfully!"))}catch{r.error(a.error||"Failed to save company!")}finally{x()}},$=async()=>{if(!t.value||!t.value.id){r.error("Invalid company selected for deletion!");return}try{await a.deleteCompany(t.value.id),r.success("Company deleted successfully!")}catch{r.error(a.error||"Failed to delete company!")}finally{s()}};return F(async()=>{await a.fetchCompanies()}),(n,d)=>{var C;return y(),f("div",Z,[_(I,{title:"Company List",onAdd:k}),e("div",ee,[e("table",te,[d[3]||(d[3]=e("thead",null,[e("tr",{class:"bg-gray-200 text-gray-700 text-sm leading-normal"},[e("th",{class:"py-3 px-2 text-left"},"#"),e("th",{class:"py-3 px-2 text-left"},"Name"),e("th",{class:"py-3 px-2 text-left"},"Short Name"),e("th",{class:"py-3 px-2 text-center"},"Phone"),e("th",{class:"py-3 px-2 text-center"},"Email"),e("th",{class:"py-3 px-2 text-center"},"Status"),e("th",{class:"py-3 px-2 text-center"},"Action")])],-1)),e("tbody",se,[v(a).loading?(y(),f("tr",oe,[e("td",le,[_(O)])])):v(a).companies&&v(a).companies.length?(y(!0),f(j,{key:1},B(v(a).companies,(u,M)=>(y(),f("tr",{key:u.id,class:"border-b border-gray-200 hover:bg-blue-200"},[e("td",ae,[e("p",ne,m(M+=1),1)]),e("td",de,[e("p",re,m(u.name),1)]),e("td",ie,[e("p",ue,m(u.short_name),1)]),e("td",me,[e("p",ce,m(u.phone),1)]),e("td",pe,[e("p",fe,m(u.email),1)]),e("td",ye,[e("p",he,m(u.status),1)]),e("td",xe,[e("div",be,[e("button",{onClick:A=>b(u),class:"text-blue-600 hover:text-blue-800"},d[0]||(d[0]=[e("i",{class:"fas fa-edit"},null,-1)]),8,_e),e("button",{onClick:A=>o(u),class:"text-red-600 hover:text-red-800"},d[1]||(d[1]=[e("i",{class:"fas fa-trash"},null,-1)]),8,ve)])])]))),128)):(y(),f("tr",ge,d[2]||(d[2]=[e("td",{colspan:"6",class:"text-center text-red-500 py-4"},"No companies found",-1)])))])])]),_(Y,{show:c.value,company:t.value,onClose:x,onSave:l},null,8,["show","company"]),_(L,{show:i.value,title:"Delete Company",message:`Are you sure you want to delete ${(C=t.value)==null?void 0:C.name}?`,onClose:s,onConfirm:$},null,8,["show","message"])])}}};export{Se as default};
