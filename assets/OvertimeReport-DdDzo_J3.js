import{u as w,b as R,B as D,r as f,e as O,C as B,c as r,o as i,a as e,y as v,h as E,v as L,k as m,F as N,x as A,t as d,i as F}from"./index-DiESLpog.js";import{_ as M}from"./EmployeeFilter-Dg37eKx2.js";import{L as U}from"./LoaderView-o4U_hC1a.js";import{u as T}from"./overtime-DZUuBhwo.js";import"./company-DqNTqRQZ.js";import"./department-CFFYOPBo.js";import"./EmployeeDropdownInput-BVHo0mwj.js";import"./SelectDropdown-BkVWxYpJ.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./UserChip-vOAB0BEX.js";const V={class:"space-y-2 px-4"},P={class:"flex flex-wrap items-center gap-2"},S={key:0,class:"text-center py-4"},$={key:1,class:"space-y-4"},j={key:0,class:"overflow-x-auto"},H={class:"table-auto w-full border text-sm bg-white"},z={class:"border p-2"},G={class:"border p-2"},I={class:"border p-2"},J={class:"border p-2"},K={class:"border p-2 text-center"},Q={class:"border p-2 text-center"},W={class:"border p-2 text-center"},X={class:"border p-2 text-center print:hidden"},Y={class:"flex justify-center items-center gap-4"},Z={key:1,class:"text-center text-red-500 text-xl italic mt-10"},ue={__name:"OvertimeReport",setup(ee){const c=w(),s=R(),n=T(),{reports:_,loading:x,selectedMonth:b}=D(n),o=f(s.query.date||b.value),l=f({company_id:s.query.company_id||"",department_id:s.query.department_id||"all",line_type:s.query.line_type||"all",employee_id:s.query.employee_id||""}),h=async()=>{var p,t,u,a;c.replace({query:{...s.query,company_id:(p=l.value)==null?void 0:p.company_id,department_id:(t=l.value)==null?void 0:t.department_id,line_type:(u=l.value)==null?void 0:u.line_type,employee_id:(a=l.value)==null?void 0:a.employee_id}}),l.value.company_id&&o.value&&n.getCompanyDepartmentOvertimeReport(o.value,l.value)},g=()=>{c.replace({query:{...s.query,date:o.value}}),l.value.company_id&&o.value&&n.getCompanyDepartmentOvertimeReport(o.value,l.value)},C=()=>c.go(-1),k=()=>{o.value&&n.exportCompanyDepartmentOvertimeExcel(o.value,l.value)},q=()=>{o.value&&n.exportCompanyDepartmentOvertimePdf(o.value,l.value)};return O(()=>{l.value.company_id&&o.value&&n.getCompanyDepartmentOvertimeReport(o.value,l.value)}),(p,t)=>{const u=B("RouterLink");return i(),r("div",V,[e("div",{class:"flex items-center justify-between gap-2"},[e("button",{class:"btn-3",onClick:C},t[6]||(t[6]=[e("i",{class:"far fa-arrow-left"},null,-1),e("span",{class:"hidden md:flex"},"Back",-1)])),t[9]||(t[9]=e("h1",{class:"title-md md:title-lg flex-wrap text-center"},"Monthly Overtime Report",-1)),e("div",{class:"flex gap-2"},[e("button",{onClick:k,class:"btn-3",title:"Download Excel"},t[7]||(t[7]=[e("i",{class:"far fa-file-excel text-2xl text-green-500"},null,-1)])),e("button",{onClick:q,class:"btn-3",title:"Download PDF"},t[8]||(t[8]=[e("i",{class:"far fa-file-pdf text-2xl text-red-500"},null,-1)]))])]),e("div",P,[v(M,{company_id:l.value.company_id,"onUpdate:company_id":t[0]||(t[0]=a=>l.value.company_id=a),department_id:l.value.department_id,"onUpdate:department_id":t[1]||(t[1]=a=>l.value.department_id=a),employee_id:l.value.employee_id,"onUpdate:employee_id":t[2]||(t[2]=a=>l.value.employee_id=a),line_type:l.value.line_type,"onUpdate:line_type":t[3]||(t[3]=a=>l.value.line_type=a),"with-type":!0,"initial-value":p.$route.query,onFilterChange:h},null,8,["company_id","department_id","employee_id","line_type","initial-value"]),e("div",null,[E(e("input",{id:"user-filter","onUpdate:modelValue":t[4]||(t[4]=a=>o.value=a),onChange:g,type:"month",class:"input-1"},null,544),[[L,o.value]])]),e("div",null,[e("button",{onClick:t[5]||(t[5]=a=>m(n).getCompanyDepartmentOvertimeReport(o.value,l.value)),class:"btn-3"},t[10]||(t[10]=[e("i",{class:"far fa-sync"},null,-1),e("span",null,"Refresh",-1)]))])]),m(x)?(i(),r("div",S,[v(U)])):(i(),r("div",$,[m(_).length?(i(),r("div",j,[e("table",H,[t[12]||(t[12]=e("thead",{class:"bg-gray-100"},[e("tr",null,[e("th",{class:"border p-2 text-left"},"#"),e("th",{class:"border p-2 text-left"},"Employee"),e("th",{class:"border p-2 text-left"},"Company"),e("th",{class:"border p-2 text-left"},"Department"),e("th",{class:"border p-2 text-center"},"Overtime Entries"),e("th",{class:"border p-2 text-center"},"Total Request Hours"),e("th",{class:"border p-2 text-center"},"Total Approval Hours"),e("th",{class:"border p-2 text-center print:hidden"},"Action")])],-1)),e("tbody",null,[(i(!0),r(N,null,A(m(_),(a,y)=>(i(),r("tr",{key:y,class:"hover:bg-blue-50"},[e("td",z,d(y+1),1),e("td",G,d(a.user_name||"N/A"),1),e("td",I,d(a.company_name||"N/A"),1),e("td",J,d(a.department_name||"N/A"),1),e("td",K,d(a.total_overtime_entries),1),e("td",Q,d(a.total_request_overtime_hours),1),e("td",W,d(a.total_approval_overtime_hours),1),e("td",X,[e("div",Y,[v(u,{to:{name:"OvertimeList",query:{...l.value,employee_id:a.user_id,date:o.value}},class:"text-blue-800"},{default:F(()=>t[11]||(t[11]=[e("i",{class:"far fa-eye text-lg"},null,-1)])),_:2,__:[11]},1032,["to"])])])]))),128))])])])):(i(),r("div",Z," No data available for this month. "))]))])}}};export{ue as default};
