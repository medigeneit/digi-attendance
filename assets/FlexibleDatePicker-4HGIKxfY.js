import{r as $,x as d,c as h,o as b,a as o,t as v,j as P,k as q,H as z,F as G,e as K}from"./index-B6ZZSGsw.js";const Q={class:"flex flex-col gap-1 relative"},T={for:"",class:"top-label -top-1 text-[11px] font-semibold tracking-wide"},W={class:"flex flex-wrap items-center gap-2"},X={class:"flex items-center gap-1"},Z=["disabled"],ee=["disabled"],te=["disabled"],ae=["value"],ne={key:0,class:"relative"},se=["disabled"],oe=["value"],le={key:1,class:"relative"},re=["disabled"],ie=["value"],de={__name:"FlexibleDatePicker",props:{modelValue:{type:Object,default:()=>({year:null,month:null,day:null})},yearOptions:{type:Array,default:()=>[]},label:{type:String,default:"Period"},disabled:{type:Boolean,default:!1},showSummary:{type:Boolean,default:!0},showYear:{type:Boolean,default:!0},showMonth:{type:Boolean,default:!0},showDate:{type:Boolean,default:!0}},emits:["update:modelValue","change"],setup(i,{emit:F}){const l=i,Y=F,g=$(null),x=$(null),M=new Date,y=M.getFullYear(),w=M.getMonth()+1,k=M.getDate();function m(e,t){return new Date(e,t,0).getDate()}const r=d({get(){var e;return((e=l.modelValue)==null?void 0:e.year)||y},set(e){const t=Number(e)||y,a=c.value,n=Math.min(u.value,m(t,a));p({year:t,month:a,day:n})}}),c=d({get(){var e;return((e=l.modelValue)==null?void 0:e.month)||w},set(e){const t=Number(e)||w,a=r.value,n=Math.min(u.value,m(a,t));p({year:a,month:t,day:n})}}),u=d({get(){var e;return((e=l.modelValue)==null?void 0:e.day)||k},set(e){const t=Number(e)||k,a=r.value,n=c.value,s=m(a,n);p({year:a,month:n,day:Math.min(t,s)})}}),j=d(()=>{if(l.yearOptions&&l.yearOptions.length)return l.yearOptions;const e=y,t=[];for(let a=e-3;a<=e+1;a++)t.push(a);return t}),C=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],S=d(()=>{const e=Number(c.value)-1;return e<0||e>11?"Month":C[e]}),O=d(()=>{const e=u.value;return e?String(e).padStart(2,"0"):"Day"}),I=d(()=>{const e=r.value,t=String(c.value).padStart(2,"0");return`${e}-${t}`}),L=d(()=>{const e=r.value,t=String(c.value).padStart(2,"0"),a=String(u.value).padStart(2,"0");return`${e}-${t}-${a}`});d(()=>{const e=r.value,t=S.value,a=u.value,n=[];return l.showDate&&n.push(String(a).padStart(2,"0")),l.showMonth&&n.push(t),l.showYear&&n.push(String(e)),n.length?n.join(" "):`${String(a).padStart(2,"0")} ${t} ${e}`});function R(){!l.showMonth||!g.value||l.disabled||(typeof g.value.showPicker=="function"?g.value.showPicker():g.value.click())}function A(){!l.showDate||!x.value||l.disabled||(typeof x.value.showPicker=="function"?x.value.showPicker():x.value.click())}function J(e){var D;const t=((D=e==null?void 0:e.target)==null?void 0:D.value)||"";if(!t)return;const[a,n]=t.split("-"),s=Number(a)||y,f=Number(n)||w,N=Math.min(u.value,m(s,f));p({year:s,month:f,day:N})}function E(e){var V;const t=((V=e==null?void 0:e.target)==null?void 0:V.value)||"";if(!t)return;const[a,n,s]=t.split("-"),f=Number(a)||y,N=Number(n)||w,D=Number(s)||k;p({year:f,month:N,day:D})}function p(e){const t={year:e.year||y,month:e.month||w,day:e.day||k};Y("update:modelValue",t),Y("change",t)}function H(e){const t=r.value,a=c.value,n=u.value,s=new Date(t,a-1,n);s.setDate(s.getDate()+e),p({year:s.getFullYear(),month:s.getMonth()+1,day:s.getDate()})}function U(e){const t=r.value,a=c.value,n=u.value,s=new Date(t,a-1+e,1),f=m(s.getFullYear(),s.getMonth()+1);p({year:s.getFullYear(),month:s.getMonth()+1,day:Math.min(n,f)})}function _(e){const t=r.value+e,a=c.value,n=u.value,s=m(t,a);p({year:t,month:a,day:Math.min(n,s)})}function B(e){if(!l.disabled){if(l.showDate){H(e);return}if(l.showMonth){U(e);return}l.showYear&&_(e)}}return(e,t)=>(b(),h("div",Q,[o("label",T,v(i.label),1),o("div",W,[o("div",X,[o("button",{type:"button","aria-label":"Previous",onClick:t[0]||(t[0]=a=>B(-1)),disabled:i.disabled,class:"input-1 inline-flex h-8 w-8 items-center justify-center rounded text-xs font-semibold uppercase tracking-wide text-slate-500 border-slate-200 bg-white shadow-sm disabled:opacity-50"},t[3]||(t[3]=[o("span",{class:"text-[12px] text-slate-400"},"<",-1)]),8,Z),o("button",{type:"button","aria-label":"Next",onClick:t[1]||(t[1]=a=>B(1)),disabled:i.disabled,class:"input-1 inline-flex h-8 w-8 items-center justify-center rounded text-xs font-semibold uppercase tracking-wide text-slate-500 border-slate-200 bg-white shadow-sm disabled:opacity-50"},t[4]||(t[4]=[o("span",{class:"text-[12px] text-slate-400"},">",-1)]),8,ee)]),o("div",null,[i.showYear?q((b(),h("select",{key:0,"onUpdate:modelValue":t[2]||(t[2]=a=>r.value=a),disabled:i.disabled,class:"input-1 py-1.5 px-3 rounded text-xs font-semibold uppercase tracking-wide text-slate-500 border-slate-200 bg-slate-50 disabled:opacity-50"},[(b(!0),h(G,null,K(j.value,a=>(b(),h("option",{key:a,value:a},v(a),9,ae))),128))],8,te)),[[z,r.value]]):P("",!0)]),i.showMonth?(b(),h("div",ne,[o("button",{type:"button",onClick:R,disabled:i.disabled,class:"input-1 flex items-center justify-between gap-2 px-3 py-2 rounded text-xs font-semibold uppercase tracking-wide text-slate-500 border-slate-200 bg-white shadow-sm disabled:opacity-50"},[t[5]||(t[5]=o("i",{class:"far fa-calendar-alt text-slate-400"},null,-1)),o("span",null,v(S.value)+" - "+v(r.value),1),t[6]||(t[6]=o("i",{class:"far fa-chevron-down text-[10px] text-slate-400"},null,-1))],8,se),o("input",{ref_key:"monthPickerRef",ref:g,type:"month",class:"pointer-events-none absolute inset-0 opacity-0",value:I.value,onChange:J},null,40,oe)])):P("",!0),i.showDate?(b(),h("div",le,[o("button",{type:"button",onClick:A,disabled:i.disabled,class:"input-1 flex items-center justify-between gap-2 px-5 py-2 rounded text-xs font-semibold uppercase tracking-wide text-slate-500 border-slate-200 bg-white shadow-sm disabled:opacity-50"},[t[7]||(t[7]=o("i",{class:"far fa-calendar text-slate-400"},null,-1)),o("span",null,v(O.value)+" - "+v(S.value),1),t[8]||(t[8]=o("i",{class:"far fa-chevron-down text-[10px] text-slate-400"},null,-1))],8,re),o("input",{ref_key:"datePickerRef",ref:x,type:"date",class:"pointer-events-none absolute inset-0 opacity-0",value:L.value,onChange:E},null,40,ie)])):P("",!0)])]))}};export{de as _};
