import{u as N,r as D,x as n,q as B,p as V,c as r,o as i,a as e,b as p,t as o,d as c,l as R,m as _,H as Y,F as h,e as v,n as F,s as j,k as q}from"./index-BJdyemsR.js";import{L as P}from"./LoaderView-XO8uSF86.js";import{u as T}from"./manual-attendance-XkaHokmC.js";const z={class:"space-y-6 px-4 py-5"},O={class:"rounded-2xl border border-slate-200 bg-white px-4 py-4 shadow-sm md:px-6"},U={class:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between"},E={class:"space-y-1"},G={class:"text-sm text-slate-500"},H={class:"flex flex-wrap items-center gap-2"},I=["value"],$={key:0,class:"text-center py-10"},J={key:1,class:"space-y-4"},K={key:0,class:"rounded-2xl border border-dashed border-slate-300 bg-slate-50 p-6 text-center text-slate-600"},Q={class:"text-sm text-slate-500"},W={key:1,class:"rounded-2xl border border-slate-200 bg-white shadow-sm"},X={class:"flex items-center justify-between border-b border-slate-100 px-5 py-3"},Z={class:"text-sm font-semibold text-slate-600"},ee={class:"overflow-x-auto"},se={class:"min-w-full divide-y divide-slate-100 text-sm"},te={class:"divide-y divide-slate-100"},le={class:"px-4 py-3 font-semibold text-slate-600"},oe={class:"px-4 py-3 text-slate-700"},re={class:"px-4 py-3 text-slate-700"},ie={class:"px-4 py-3 text-slate-700"},de={class:"px-4 py-3 text-slate-700"},ae={class:"px-4 py-3 text-slate-700"},ue={class:"px-4 py-3"},ne={class:"px-4 py-3"},pe={class:"flex items-center justify-end gap-2"},xe=["onClick"],_e={__name:"MyManualAttendanceList",setup(ce){const g=N(),a=T(),f=new Date,u=D(String(f.getFullYear())),w=n(()=>{const l=f.getFullYear(),t=[];for(let d=l+1;d>=l-6;d--)t.push(String(d));return t}),k=l=>{a.fetchUserManualAttendances({year:l})};B(u,l=>{l&&k(l)},{immediate:!0});const x=n(()=>a.manualAttendances||[]),m=n(()=>Array.isArray(x.value)?x.value.length:0),b=n(()=>u.value||"Year"),A=l=>l?new Date(l).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):"N/A",C=l=>{const t=(l||"").toLowerCase();return["approved","accepted"].includes(t)?"border border-emerald-200 bg-emerald-50 text-emerald-700":["rejected","declined","cancelled"].includes(t)?"border border-red-200 bg-red-50 text-red-700":t==="pending"||!t?"border border-amber-200 bg-amber-50 text-amber-800":"border border-slate-200 bg-slate-50 text-slate-800"},M=()=>g.go(-1);function S(l){confirm("Are you sure you want to delete this application?")&&a.deleteManualAttendance(l)}return(l,t)=>{var y;const d=V("RouterLink");return i(),r("div",z,[e("div",O,[e("div",U,[e("div",null,[e("button",{class:"btn-3",onClick:M},t[1]||(t[1]=[e("i",{class:"far fa-arrow-left"},null,-1),e("span",{class:"hidden md:inline-flex"},"Back",-1)]))]),e("div",E,[t[3]||(t[3]=e("p",{class:"text-2xl font-semibold text-slate-900"},"Manual Attendances Records",-1)),e("p",G,[t[2]||(t[2]=p("Filtered by year: ")),e("b",null,o(b.value),1)])]),e("div",H,[c(d,{to:{name:"ManualAttendanceAdd"},class:"btn-2 rounded"},{default:_(()=>t[4]||(t[4]=[e("i",{class:"far fa-plus mr-1"},null,-1),p(" Request ")])),_:1,__:[4]}),R(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>u.value=s),class:"input-1 w-[140px]","aria-label":"Year"},[(i(!0),r(h,null,v(w.value,s=>(i(),r("option",{key:s,value:s},o(s),9,I))),128))],512),[[Y,u.value]])])])]),(y=F(a))!=null&&y.loading?(i(),r("div",$,[c(P)])):(i(),r("div",J,[m.value===0?(i(),r("div",K,[t[5]||(t[5]=e("p",{class:"text-lg font-semibold text-slate-800"},"No manual attendances yet",-1)),e("p",Q,"Submit your first request for "+o(b.value),1)])):(i(),r("div",W,[e("div",X,[e("p",Z,"Showing "+o(m.value)+" requests",1),t[6]||(t[6]=e("span",{class:"text-xs text-slate-500"},"Auto-updated",-1))]),e("div",ee,[e("table",se,[t[9]||(t[9]=e("thead",{class:"bg-slate-50 text-[11px] uppercase tracking-wider text-slate-500"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left"},"#"),e("th",{class:"px-4 py-3 text-left"},"Created Date"),e("th",{class:"px-4 py-3 text-left"},"Type"),e("th",{class:"px-4 py-3 text-left"},"Punch/Offsite Type"),e("th",{class:"px-4 py-3 text-left"},"Check-In"),e("th",{class:"px-4 py-3 text-left"},"Check-Out"),e("th",{class:"px-4 py-3 text-left"},"Status"),e("th",{class:"px-4 py-3 text-right"},"Actions")])],-1)),e("tbody",te,[(i(!0),r(h,null,v(x.value,(s,L)=>(i(),r("tr",{key:s==null?void 0:s.id,class:"hover:bg-slate-50 transition"},[e("td",le,o(L+1),1),e("td",oe,o(A(s==null?void 0:s.created_at)),1),e("td",re,o((s==null?void 0:s.type)||"Manual"),1),e("td",ie,o((s==null?void 0:s.punch_type)||(s==null?void 0:s.offside_type)||"N/A"),1),e("td",de,o((s==null?void 0:s.check_in)||"N/A"),1),e("td",ae,o((s==null?void 0:s.check_out)||"N/A"),1),e("td",ue,[e("span",{class:j(["inline-flex items-center rounded-full px-3 py-1 text-[11px] font-semibold tracking-wide",C(s==null?void 0:s.status)])},o((s==null?void 0:s.status)||"Pending"),3)]),e("td",ne,[e("div",pe,[c(d,{to:{name:"ManualAttendanceShow",params:{id:s==null?void 0:s.id}},class:"inline-flex items-center rounded-full border border-slate-200 px-3 py-1.5 text-xs font-semibold text-slate-600 transition hover:border-indigo-200 hover:text-indigo-700"},{default:_(()=>t[7]||(t[7]=[e("i",{class:"far fa-eye mr-1"},null,-1),p(" View ")])),_:2,__:[7]},1032,["to"]),s.status=="Pending"||!s.status?(i(),r("button",{key:0,type:"button",onClick:fe=>S(s==null?void 0:s.id),class:"inline-flex items-center rounded-full border border-red-200 px-3 py-1.5 text-xs font-semibold text-red-600 transition hover:border-red-300 hover:text-red-700"},t[8]||(t[8]=[e("i",{class:"far fa-trash mr-1"},null,-1),p(" Delete ")]),8,xe)):q("",!0)])])]))),128))])])])]))]))])}}};export{_e as default};
