const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LeaveApplicationModal-BXoTlcsr.js","assets/index-DTWB89sk.js","assets/index-DI4tfH88.css","assets/ApprovalItem-HMSn40qc.js","assets/AcceptAndRejectHandler-tWrI79oG.js","assets/LoaderView-BoIktWu4.js","assets/_plugin-vue_export-helper-DlAUqK2U.js","assets/ShareComponent-Dyv5OYp3.js","assets/leave-application-BALkPT-r.js","assets/LeaveApplicationModal-B7WJltA7.css","assets/ShortLeaveDetailsModal-BV32yZNi.js","assets/ScreenshotCapture-K43tQMqW.js","assets/short-leave-gQv3DDvk.js","assets/ShortLeaveDetailsModal-D4avNQ1k.css","assets/ManualAttendanceDetailsModal-C6plUOzM.js","assets/manual-attendance-CefytF0L.js","assets/ManualAttendanceDetailsModal-MS8n2gFL.css","assets/ShiftExchangeDetailsModal-Cm1DMAxO.js","assets/exchange-Cp4KpW19.js","assets/ShiftExchangeDetailsModal-BlZsJzAI.css","assets/OffdayExchangeDetailsModal-CctB62pP.js","assets/OffdayExchangeDetailsModal-jTt80Glg.css"])))=>i.map(i=>d[i]);
import{g as xe,D as X,x as M,p as ge,c as u,o as n,d as D,l as C,a as e,b as L,t as m,m as k,E as $e,w as S,s as $,j as T,F as P,e as O,i as R,R as Fe,G as De,r as B,h as Ce,q as J,k as ae,H as We,f as Me,u as be,I as se,n as Ye,J as ie,K as ze,_ as ne}from"./index-DTWB89sk.js";import{u as oe}from"./user-rO9qiafU.js";import{L as He}from"./LoaderView-BoIktWu4.js";import{_ as Ke}from"./SearchInput-C3e-gqf7.js";import{o as ye,g as pe,a as me,b as Ge,c as Je}from"./datetime-BEfC2TVK.js";import{m as Xe}from"./task-tree-wODDhwOu.js";import{u as Ze}from"./useTaskStore-D8yN_U_W.js";import{_ as Qe,a as et}from"./TodoSection-RSxqkon2.js";import{_ as tt}from"./TaskTreeViewWithSubTable-DCoQBDMu.js";import{O as st}from"./OverlyModal-Cf--vj5C.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./requirement-l5FbRehC.js";import"./useTodoDateStore-Luha2xHD.js";import"./url-CePbr-gY.js";import"./TodoItemCard-DHMEmUWN.js";import"./DepartmentChip-BQstM8Tl.js";import"./UserChip-7Jb8R5_-.js";import"./useTodoStore-B4E-ECp2.js";import"./DraggableList.vue_vue_type_script_setup_true_lang-DHjWkEPa.js";import"./TodoCreateEditShow-Mb2UsvDA.js";import"./TaskSelectionInput-CTlDWiK-.js";import"./TaskTitle-DV1yaXDY.js";import"./TaskUrgentBadge-C2-4p0E8.js";import"./TaskAssignedUsers-2l4Pg2uu.js";import"./TaskIsClosedBadge-CvF_zkSW.js";import"./TaskSupervisorAndEmployee-B_PytyHd.js";const nt={class:"grid gap-4 md:grid-cols-3 mt-4 px-4 container mx-auto"},at={class:"text-3xl"},ot={class:"text-3xl"},lt={class:"text-3xl"},rt={class:"text-3xl"},it={class:"text-3xl"},dt={class:"text-3xl"},ut={class:"text-3xl"},ct={class:"text-3xl"},pt={class:"text-3xl"},mt={class:"text-3xl"},yt={class:"text-3xl"},vt={__name:"DashboardAdminView",setup(_){const i=oe();xe();const{dashboardInfo:p,selectedDate:x}=X(i),c=M(()=>new Date);return(f,l)=>{const a=ge("RouterLink");return n(),u("div",nt,[D(a,{to:{name:"TodayAttendanceReport",query:{status:"all"}},class:"main-button"},{default:C(()=>{var t;return[e("span",at,m((t=k(p))==null?void 0:t.totalUsers),1),l[0]||(l[0]=L(" Total Employees "))]}),_:1,__:[0]}),D(a,{to:{name:"TodayAttendanceReport",query:{status:"Present"}},class:"main-button"},{default:C(()=>{var t;return[e("span",ot,m((t=k(p))==null?void 0:t.todayPresents),1),l[1]||(l[1]=L(" Today Present "))]}),_:1,__:[1]}),D(a,{to:{name:"TodayAttendanceReport",query:{status:"Absent"}},class:"main-button"},{default:C(()=>{var t;return[e("span",lt,m((t=k(p))==null?void 0:t.todayAbsents),1),l[2]||(l[2]=L(" Today Absent "))]}),_:1,__:[2]}),D(a,{to:{name:"LeaveApplicationsForDay",query:{applicationType:"today"}},class:"main-button"},{default:C(()=>{var t;return[e("span",rt,m((t=k(p))==null?void 0:t.todayLeaves),1),l[3]||(l[3]=L(" Today Leave "))]}),_:1,__:[3]}),D(a,{to:{name:"LeaveApplicationsForDay",query:{applicationType:"tomorrow"}},class:"main-button"},{default:C(()=>{var t;return[e("span",it,m((t=k(p))==null?void 0:t.tomorrowLeaves),1),l[4]||(l[4]=L(" Tomorrow Leave "))]}),_:1,__:[4]}),D(a,{to:{name:"DateWiseShortLeaveList",query:{date:k(x)}},class:"main-button"},{default:C(()=>{var t;return[e("span",dt,m((t=k(p))==null?void 0:t.todayShortLeaves),1),l[5]||(l[5]=L(" Today Short Leaves "))]}),_:1,__:[5]},8,["to"]),D(a,{to:{name:"DailyLateAttendanceReport",query:{date:k(x)}},class:"main-button"},{default:C(()=>{var t;return[e("span",ut,m((t=k(p))==null?void 0:t.todayLateEntries),1),l[6]||(l[6]=L(" Today Late Report "))]}),_:1,__:[6]},8,["to"]),D(a,{to:{name:"PreviousAfterApplicationList",query:{applicationType:"prev",date:k(x)}},class:"main-button"},{default:C(()=>{var t;return[e("span",ct,m((t=k(p))==null?void 0:t.prevWeekLeaves),1),l[7]||(l[7]=L(" Leave history of previous week "))]}),_:1,__:[7]},8,["to"]),D(a,{to:{name:"PreviousAfterApplicationList",query:{applicationType:"after",date:k(x)}},class:"main-button"},{default:C(()=>{var t;return[e("span",pt,m((t=k(p))==null?void 0:t.nextWeekLeaves),1),l[8]||(l[8]=L(" Upcoming leaves "))]}),_:1,__:[8]},8,["to"]),D(a,{to:{name:"TodoList",query:{day:c.value.getDate(),month:c.value.getMonth()+1,year:c.value.getFullYear(),type:"day-view"}},class:"main-button"},{default:C(()=>{var t;return[e("span",mt,m((t=k(p))==null?void 0:t.todayTotalTodos),1),l[9]||(l[9]=L(" Today Todos "))]}),_:1,__:[9]},8,["to"]),D(a,{to:{name:"TodoList",query:{month:c.value.getMonth()+1,year:c.value.getFullYear(),type:"month-view"}},class:"main-button"},{default:C(()=>{var t;return[e("span",yt,m((t=k(p))==null?void 0:t.thisMonthTotalTodos),1),l[10]||(l[10]=L(" Todos In This Month "))]}),_:1,__:[10]},8,["to"])])}}},ve=(_,i,p,x)=>{const c=new Date(x,p-1,i);return _.filter(f=>{const l=f.deadline?new Date(f.deadline):null,a=ye(new Date);if(f.assigned_at){const t=ye(new Date(f.assigned_at));if(c<t)return!1;let o=null;return f.completed_at&&(o=ye(new Date(f.completed_at))),!(o&&o<c||l&&l<c&&c>a)}return!1}).map(f=>{let l=!1;return f.deadline&&(l=new Date(f.deadline)<c),{...f,deadline_crossed:l}})},ft={class:"px-4 py-2 flex items-center bg-gray-50 group"},xt=["disabled"],gt={class:"ml-4 md:ml-auto flex items-center gap-2"},bt=["value"],ht=$e({__name:"DailyTaskHeading",props:{selectedDay:{type:String,required:!0},loading:{type:Boolean,default:!1}},emits:["change",,"reloadClick","monthWiseButtonClick"],setup(_,{emit:i}){const p=_,x=i;function c(){x("change",pe(new Date))}function f(){const a=new Date(p.selectedDay);a.setDate(a.getDate()+1),x("change",pe(a))}function l(){const a=new Date(p.selectedDay);a.setDate(a.getDate()-1),x("change",pe(a))}return(a,t)=>(n(),u("div",ft,[t[4]||(t[4]=e("h2",{class:"leading-none font-semibold text-lg"},"Daily Task",-1)),e("button",{class:"btn-3 mx-4 h-7",onClick:t[0]||(t[0]=S(o=>x("monthWiseButtonClick"),["prevent"]))},"Month Wise"),e("button",{class:"btn-3 mx-4 h-7",onClick:S(c,["prevent"])},"Today"),e("button",{class:$(["btn-3 px-2 py-2 mx-4 size-7 disabled:text-gray-300 disabled:border-gray-300",{"animate-spin text-gray-300 border-gray-300 !bg-opacity-0":_.loading}]),onClick:t[1]||(t[1]=S(o=>x("reloadClick"),["prevent"])),disabled:_.loading},t[3]||(t[3]=[e("i",{class:"fas fa-redo-alt"},null,-1)]),10,xt),e("div",gt,[e("button",{class:"btn-2 h-7",onClick:S(l,["prevent"])},"Previous Day"),e("button",{class:"btn-2 h-7",onClick:S(f,["prevent"])},"Next Day"),e("input",{type:"date",value:_.selectedDay,onInput:t[2]||(t[2]=o=>{var g;return x("change",(g=o.target)==null?void 0:g.value)}),class:"border px-2 rounded"},null,40,bt)])]))}}),_t={class:"px-4 py-2 flex items-center bg-gray-50 group"},kt=["disabled"],wt={class:"ml-4 md:ml-auto flex items-center gap-2"},$t=["value"],Dt=$e({__name:"MonthlyTaskHeading",props:{selectedMonth:{type:String,required:!0},loading:{type:Boolean,default:!1}},emits:["reloadClick","dayWiseButtonClick","change"],setup(_,{emit:i}){const p=_,x=i;function c(){x("change",me(new Date))}function f(){var g;const[a,t]=(g=p.selectedMonth)==null?void 0:g.split("-").map(Number),o=new Date(a,t,1);o.setMonth(o.getMonth()),x("change",me(o))}function l(){var g;const[a,t]=(g=p.selectedMonth)==null?void 0:g.split("-").map(Number),o=new Date(a,t,1);o.setMonth(o.getMonth()-2),x("change",me(o))}return(a,t)=>(n(),u("div",_t,[t[4]||(t[4]=e("h2",{class:"leading-none font-semibold text-lg"},"Monthly Task",-1)),e("button",{class:"btn-3 mx-4 h-7",onClick:t[0]||(t[0]=S(o=>x("dayWiseButtonClick"),["prevent"]))},"Day Wise"),e("button",{class:"btn-3 mx-4 h-7",onClick:S(c,["prevent"])},"Current Month"),e("button",{class:$(["btn-3 px-2 py-2 mx-4 size-7 disabled:text-gray-300 disabled:border-gray-300",{"animate-spin text-gray-300 border-gray-300 !bg-opacity-0":_.loading}]),onClick:t[1]||(t[1]=S(o=>x("reloadClick"),["prevent"])),disabled:_.loading},t[3]||(t[3]=[e("i",{class:"fas fa-redo-alt"},null,-1)]),10,kt),e("div",wt,[e("button",{class:"btn-2 h-7",onClick:S(l,["prevent"])},"Previous Month"),e("button",{class:"btn-2 h-7",onClick:S(f,["prevent"])},"Next Month"),e("input",{type:"month",value:_.selectedMonth,onInput:t[2]||(t[2]=o=>{var g;return x("change",(g=o.target)==null?void 0:g.value)}),class:"border px-2 rounded"},null,40,$t)])]))}}),Ct={key:0,class:"space-y-6 py-2"},Mt={key:0,class:"fad fa-folder text-xs mr-2"},Lt={key:1,class:"fad fa-file-alt text-xs mr-2"},Tt={key:2,class:"text-center w-full mt-4 text-xs text-gray-600"},fe={__name:"TaskListOnDay",props:{isCurrentMonth:{type:Boolean,default:!1},tasks:{type:Array,default:()=>[]},limit:{type:Number,default:null},tree:{type:Boolean,default:!1}},emits:["clickOnMore"],setup(_,{emit:i}){const p=_,x=i,c=M(()=>{var f;return p.limit?((f=p==null?void 0:p.tasks)==null?void 0:f.slice(0,p.limit))||[]:[...p.tasks]});return(f,l)=>(n(),u("div",null,[_.tree?(n(),u("div",Ct,[(n(!0),u(P,null,O(c.value,(a,t)=>(n(),R(tt,{"hide-buttons":"","hide-assigned-users":"",task:a,key:a.id,index:t,class:"shadow hover:shadow-md border border-blue-300 rounded-md *:border-none"},null,8,["task","index"]))),128))])):(n(),u("ul",{key:1,class:$({"text-gray-500 group-hover:text-gray-900":!_.isCurrentMonth})},[(n(!0),u(P,null,O(c.value,a=>(n(),u("li",{class:"mb-2",key:a.id},[D(k(Fe),{to:`/tasks/${a.id}`,target:"_blank",class:"flex items-center hover:underline hover:text-blue-600"},{default:C(()=>[a.children_task_count>0?(n(),u("i",Mt)):T("",!0),a.children_task_count==0?(n(),u("i",Lt)):T("",!0),e("span",{class:$(["line-clamp-1",{"text-red-800":a.deadline_crossed}])},m(a.title),3)]),_:2},1032,["to"])]))),128))],2)),_.tasks.length-c.value.length>0?(n(),u("div",Tt,[e("button",{onClick:l[0]||(l[0]=S(a=>x("clickOnMore",a),["prevent"])),class:"text-blue-600 hover:underline"}," +"+m(_.tasks.length-c.value.length)+" More Tasks ",1)])):T("",!0)]))}},St={class:"relative"},At={class:"ml-auto"},Rt=["onClick"],Nt={key:0,class:"absolute inset-0 bg-gray-300 bg-opacity-90"},qt={class:"absolute inset-16 bg-white border border-blue-500 rounded-md z-20 overflow-y-auto"},Pt={class:"text-lg font-semibold mb-4 sticky top-0 border-b border-blue-200 px-4 z-30 py-3 bg-white flex items-center"},Et={__name:"TaskInMonth",props:{month:{type:String,required:!0,validator:_=>/^\d{4}-(0[1-9]|1[0-2])$/.test(_)},tasks:{type:Array,required:!0,default:()=>[]}},setup(_){const i=De({day:null,month:null,year:null});function p(a){a.stopPropagation(),i.day=null,i.month=null,i.year=null}function x(a,t,o,g){a.stopPropagation(),i.day=t,i.month=o,i.year=g}const c=(a,t,o)=>{const g=new Date;return a===g.getDate()&&t===g.getMonth()+1&&o===g.getFullYear()},f=(a,t,o)=>a===i.day&&t===i.month&&o===i.year,l=(a,t,o,g)=>{const A=c(a,t,o);return{"bg-green-100 text-green-900 border-blue-500 border-2 scale-105 z-10":A,"border-r border-t hover:border border-blue-200  hover:scale-105 hover:z-20 hover:bg-blue-50":!A,"bg-gray-50":!g}};return(a,t)=>(n(),u("div",St,[_.month?(n(),R(Qe,{key:0,month:_.month,class:"border-t border-blue-200/50 relative"},{date:C(({day:o,month:g,year:A,isCurrentMonth:h})=>[e("div",{tabindex:"0",class:$(["transition origin-center p-2 outline-blue-600 outline-1 cursor-pointer",l(o,g,A,h)])},[e("div",{class:$(["font-bold w-full flex items-center",{"text-gray-300":!h}])},[e("div",null,m(o),1),e("div",At,[f(o,g,A)?T("",!0):(n(),u("button",{key:0,class:"btn-icon",onClick:S(r=>x(r,o,g,A),["prevent"])},t[0]||(t[0]=[e("i",{class:"fas fa-expand-arrows text-gray-400 hover:text-gray-600"},null,-1)]),8,Rt))])],2),D(fe,{"is-current-month":h,tasks:k(ve)(_.tasks,o,g,A),limit:3,class:"text-xs mt-4",onClickOnMore:r=>x(r,o,g,A)},null,8,["is-current-month","tasks","onClickOnMore"])],2)]),"calender-bottom":C(()=>[i.day?(n(),u("div",Nt,[e("div",qt,[e("div",Pt,[L(" Tasks for "+m(i.day)+"/"+m(i.month)+"/"+m(i.year)+" ",1),e("button",{class:"ml-auto",type:"button",onClick:S(p,["prevent"])},t[1]||(t[1]=[e("i",{class:"fas fa-times"},null,-1)]))]),D(fe,{class:"p-4","is-current-month":a.isCurrentMonth,tasks:k(ve)(_.tasks,i.day,i.month,i.year),tree:!0},null,8,["is-current-month","tasks"])])])):T("",!0)]),_:1},8,["month"])):T("",!0)]))}},Bt={class:"bg-opacity-90 relative"},Ot={class:"rounded-md z-20"},jt={class:"text-md sticky top-0 border-b px-4 z-30 py-3 bg-white flex items-center shadow"},Ut={class:"flex justify-between items-center gap-6 w-full"},It={key:0,class:"text-blue-800 bg-blue-100 rounded-full border px-4 py-0.5 text-sm"},Vt={key:1,class:"text-blue-800 bg-blue-100 rounded-full border px-4 py-0.5 text-sm"},Ft={class:"ml-auto flex items-center gap-2"},Wt={key:0,class:"w-32 relative h-8"},Yt={__name:"DailyTask",setup(_){const i=De({day:null,month:null,year:null}),p=B(),x=B(),c=B("loading"),f=Ze(),l=xe(),a=B(""),t=B("day-wise"),o=B("not-completed");Ce(()=>{p.value=pe(new Date),x.value=me(new Date)}),J(p,r=>{const[y,b,j]=r.split("-").map(Number);i.day=j,i.month=b,i.year=y}),J(x,r=>{const[y,b]=r.split("-").map(Number);i.day=1,i.month=b,i.year=y}),J(()=>i.month,async()=>{c.value="loading",await g(),c.value=""}),J(t,r=>{if(r=="month-wise"){const[y,b]=p.value.split("-");x.value=`${y}-${b}`}});async function g(){await f.fetchMyTasks()}const A=async()=>{c.value="loading",await g(),c.value=""},h=M(()=>{var b,j;const r=N=>{var U,I;return a.value?(I=N==null?void 0:N.toUpperCase())==null?void 0:I.includes((U=a.value)==null?void 0:U.toUpperCase()):!0},y=t.value=="day-wise"?{"user-ids":(b=l==null?void 0:l.user)==null?void 0:b.id,status:o.value}:{"user-ids":(j=l==null?void 0:l.user)==null?void 0:j.id};return Xe(ve(f.tasks,i.day,i.month,i.year),y).filter(N=>{var U;return r(N.title)||((U=N.children_tasks)==null?void 0:U.some(I=>r(I==null?void 0:I.title)))}).map(N=>({...N,children_tasks:N.children_tasks.filter(U=>r(U.title))}))});return(r,y)=>(n(),u("div",null,[t.value=="day-wise"?(n(),R(ht,{key:0,loading:c.value=="loading","selected-day":p.value,onChange:y[0]||(y[0]=b=>p.value=b),onReloadClick:A,onMonthWiseButtonClick:y[1]||(y[1]=b=>t.value="month-wise")},null,8,["loading","selected-day"])):T("",!0),t.value=="month-wise"?(n(),R(Dt,{key:1,loading:c.value=="loading","selected-month":x.value,onChange:y[2]||(y[2]=b=>x.value=b),onDayWiseButtonClick:y[3]||(y[3]=b=>t.value="day-wise"),onReloadClick:A},null,8,["loading","selected-month"])):T("",!0),e("div",Bt,[e("div",Ot,[e("div",jt,[e("div",Ut,[t.value=="day-wise"?(n(),u("div",It,m(k(Ge)(p.value)),1)):T("",!0),t.value=="month-wise"?(n(),u("div",Vt,m(k(Je)(x.value)),1)):T("",!0),e("div",Ft,[t.value=="day-wise"?(n(),u("div",Wt,[y[7]||(y[7]=e("label",{class:"absolute text-xs left-3 -top-1.5 bg-slate-100 text-blue-500"},"Status",-1)),ae(e("select",{"onUpdate:modelValue":y[4]||(y[4]=b=>o.value=b),class:"h-8 text-xs px-2 text-gray-600 border-2 border-gray-400 rounded-md w-full"},y[6]||(y[6]=[e("option",{value:""},"--ALL TASKS--",-1),e("option",{value:"not-completed"},"Not Completed",-1)]),512),[[We,o.value]])])):T("",!0),D(Ke,{modelValue:a.value,"onUpdate:modelValue":y[5]||(y[5]=b=>a.value=b),class:"w-full md:w-48 md:ml-auto h-8","debounce-time":0},null,8,["modelValue"])])])]),t.value=="day-wise"?(n(),R(fe,{key:0,class:"p-4 overflow-y-auto",tasks:h.value,tree:!0},null,8,["tasks"])):t.value=="month-wise"?(n(),R(Et,{key:1,tasks:h.value||[],month:x.value,class:"bg-gray-50"},null,8,["tasks","month"])):T("",!0)]),c.value==="loading"?(n(),R(He,{key:0,class:"absolute inset-0 flex items-center justify-center z-20 bg-opacity-70"})):T("",!0)])]))}},zt={class:"bg-white shadow-md rounded-lg"},Ht={class:"overflow-x-auto shadow-md min-h-max"},Kt={class:"min-w-full text-sm text-left text-gray-500 table-fixed"},Gt={class:"text-xs"},Jt={class:"text-sm font-semibold text-blue-800"},Xt={__name:"DashboardLeaveBalance",setup(_){const i=oe(),{userDashboard:p}=X(i);return(x,c)=>{var f,l,a,t;return n(),u("div",zt,[c[4]||(c[4]=e("h2",{class:"text-xl font-semibold py-2 px-4"},"Leave Balance",-1)),e("div",Ht,[e("table",Kt,[e("thead",null,[e("tr",Gt,[c[0]||(c[0]=e("th",{class:"px-2 py-1 font-semibold text-gray-900 border bg-gray-50"},null,-1)),(n(!0),u(P,null,O((f=k(p))==null?void 0:f.leave_balance,o=>(n(),u("th",{class:"px-4 text-center py-1 font-semibold text-gray-900 border bg-gray-50 w-40",key:o.id},m(o.name),1))),128))])]),e("tbody",null,[e("tr",null,[c[1]||(c[1]=e("td",{class:"px-4 py-4 font-medium text-gray-900 border text-xs"},"Total",-1)),(n(!0),u(P,null,O((l=k(p))==null?void 0:l.leave_balance,o=>(n(),u("td",{class:"px-4 text-center py-3 font-medium text-gray-900 border",key:o.id},m(o.annual_quota),1))),128))]),e("tr",null,[c[2]||(c[2]=e("td",{class:"px-4 py-3 font-medium text-gray-900 border text-xs"},"Used",-1)),(n(!0),u(P,null,O((a=k(p))==null?void 0:a.leave_balance,o=>(n(),u("td",{class:"px-4 text-center py-4 font-medium text-gray-900 border",key:o.id},m(o.used_days),1))),128))]),e("tr",Jt,[c[3]||(c[3]=e("td",{class:"px-4 py-3 border text-xs"},"Balance",-1)),(n(!0),u(P,null,O((t=k(p))==null?void 0:t.leave_balance,o=>(n(),u("td",{class:"px-4 text-center py-4 border",key:o.id},m(o.remaining_days),1))),128))])])])])])}}},Zt={class:"flex items-center gap-2 mr-2"},Qt=["onClick"],es=["onClick"],ts={__name:"DashboardMyTodoList",setup(_){const i=Me(),p=be();function x(c){p.push({query:{...i.query,"todos[type]":c.type,"todos[year]":c.year,"todos[month]":c.month,"todos[day]":c.day}})}return(c,f)=>(n(),R(et,{type:k(i).query["todos[type]"],year:k(i).query["todos[year]"],month:k(i).query["todos[month]"],day:k(i).query["todos[day]"],userRole:"employee",onChangeInput:x},{beforeHeader:C(()=>f[0]||(f[0]=[e("h2",{class:"text-md font-medium"},"Todo List",-1)])),typeSelection:C(({types:l,changeType:a,selected:t})=>{var o,g,A,h;return[e("div",Zt,[e("button",{onClick:S(r=>{var y;return a((y=l[0])==null?void 0:y.value)},["prevent"]),class:$(["rounded text-sm h-[32px] w-20",(t==null?void 0:t.type)==((o=l[0])==null?void 0:o.value)?"btn-2":"btn-3"])},m((g=l[0])==null?void 0:g.label),11,Qt),e("button",{onClick:S(r=>{var y;return a((y=l[1])==null?void 0:y.value)},["prevent"]),class:$(["rounded text-sm h-[32px] w-20",(t==null?void 0:t.type)==((A=l[1])==null?void 0:A.value)?"btn-2 ":"btn-3"])},m((h=l[1])==null?void 0:h.label),11,es)])]}),_:1},8,["type","year","month","day"]))}},ss={class:"bg-white shadow-sm rounded-xl p-3 sm:p-4"},ns=["aria-expanded"],as={class:"flex items-center gap-2"},os={class:"text-[11px] rounded-full bg-yellow-100 text-gray-700 px-2 py-0.5"},ls={key:0,class:"text-xs italic text-center py-4 text-gray-500"},rs={key:1,class:"py-2 space-y-1"},is=["onClick"],ds={class:"min-w-0"},us={class:"text-[13px] text-gray-900 truncate"},cs={class:"font-medium"},ps={class:"opacity-70"},ms={class:"truncate max-w-[10rem]"},ys={key:0,class:"inline-flex items-center gap-1 rounded-md border border-gray-200 bg-gray-50 px-1.5 py-0.5"},vs={key:0,class:"flex justify-center"},fs={class:"mt-4"},xs=["aria-expanded"],gs={class:"flex items-center gap-2"},bs={class:"text-[11px] rounded-full bg-yellow-100 text-gray-700 px-2 py-0.5"},hs={key:0,class:"text-xs italic text-center py-4 text-gray-500"},_s={key:1,class:"py-2 space-y-1"},ks=["onClick"],ws={class:"min-w-0"},$s={class:"text-[13px] text-gray-900 truncate"},Ds={class:"font-medium"},Cs={class:"opacity-70"},Ms={key:0,class:"flex justify-center"},Ls={class:"mt-4"},Ts=["aria-expanded"],Ss={class:"flex items-center gap-2"},As={class:"text-[11px] rounded-full bg-yellow-100 text-gray-700 px-2 py-0.5"},Rs={key:0,class:"text-xs italic text-center py-4 text-gray-500"},Ns={key:1,class:"py-2 space-y-1"},qs=["onClick"],Ps={class:"min-w-0"},Es={class:"text-[13px] text-gray-900 truncate"},Bs={class:"font-medium"},Os={class:"opacity-70"},js={key:0,class:"flex justify-center"},Us={class:"mt-4"},Is=["aria-expanded"],Vs={class:"flex items-center gap-2"},Fs={class:"text-[11px] rounded-full bg-yellow-100 text-gray-700 px-2 py-0.5"},Ws={key:0,class:"text-xs italic text-center py-4 text-gray-500"},Ys={key:1,class:"py-2 space-y-1"},zs=["onClick"],Hs={class:"min-w-0"},Ks={class:"text-[13px] text-gray-900 truncate"},Gs={class:"font-medium"},Js={class:"opacity-70"},Xs={key:0,class:"flex justify-center"},K=5,de="inline-flex items-center rounded-full px-2 py-0.5 text-[11px] font-medium",ue="flex items-center justify-between gap-2",Zs="text-[12px] text-gray-600 flex items-center gap-2 flex-wrap",ce="block w-full text-left rounded-md px-2.5 py-2 hover:bg-slate-50/70 focus:bg-slate-50/90 focus:outline-none transition",Qs={__name:"DashboardRecentApplications",setup(_){const i=se(()=>ne(()=>import("./LeaveApplicationModal-BXoTlcsr.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]))),p=se(()=>ne(()=>import("./ShortLeaveDetailsModal-BV32yZNi.js"),__vite__mapDeps([10,1,2,3,4,5,6,11,7,12,13]))),x=se(()=>ne(()=>import("./ManualAttendanceDetailsModal-C6plUOzM.js"),__vite__mapDeps([14,1,2,3,4,5,6,7,15,16]))),c=se(()=>ne(()=>import("./ShiftExchangeDetailsModal-Cm1DMAxO.js"),__vite__mapDeps([17,1,2,3,4,5,6,11,7,18,19]))),f=se(()=>ne(()=>import("./OffdayExchangeDetailsModal-CctB62pP.js"),__vite__mapDeps([20,1,2,3,4,5,6,11,7,18,21]))),l=oe(),{userDashboard:a}=X(l),t=M(()=>{var d;return((d=a.value)==null?void 0:d.lists)??{}}),o=M(()=>t.value.current_month_leave??[]),g=M(()=>t.value.short_leave??[]),A=M(()=>t.value.exchange??[]),h=M(()=>t.value.manual_attendance??[]),r=d=>d==="Pending"||d===null,y=M(()=>o.value.filter(d=>r(d==null?void 0:d.status)).length),b=M(()=>g.value.filter(d=>r(d==null?void 0:d.status)).length),j=M(()=>A.value.filter(d=>r(d==null?void 0:d.status)).length),N=M(()=>h.value.filter(d=>r(d==null?void 0:d.status)).length),U=M(()=>o.value.slice(0,K)),I=M(()=>g.value.slice(0,K)),Le=M(()=>A.value.slice(0,K)),Te=M(()=>h.value.slice(0,K)),he=M(()=>Math.max(0,o.value.length-K)),_e=M(()=>Math.max(0,g.value.length-K)),ke=M(()=>Math.max(0,A.value.length-K)),we=M(()=>Math.max(0,h.value.length-K)),Se={null:{title:"Handover Waiting",cls:"bg-gray-100 text-gray-800 ring-1 ring-gray-200"},Pending:{title:"Pending",cls:"bg-amber-50 text-amber-700 ring-1 ring-amber-200"},Approved:{title:"Approved",cls:"bg-emerald-50 text-emerald-700 ring-1 ring-emerald-200"},Rejected:{title:"Rejected",cls:"bg-rose-50 text-rose-700 ring-1 ring-rose-200"}},W=d=>Se[d??"null"]??{title:String(d||"Unknown"),cls:"bg-gray-100 text-gray-700 ring-1 ring-gray-200"},Ae=d=>Array.isArray(d)?d.filter(s=>s==null?void 0:s.name).map(s=>`${s.name} (${(s==null?void 0:s.days)??0})`).join(", "):"",Z=B({open:!1,id:null}),Q=B({open:!1,id:null}),ee=B({open:!1,id:null}),Re=d=>{Z.value={open:!0,id:d}},Ne=d=>{Q.value={open:!0,id:d}},qe=d=>{ee.value={open:!0,id:d}},Y=B({open:!1,id:null,type:null}),Pe=d=>{const s=(d==null?void 0:d.exchange_type)==="offday"?"offday":"shift";Y.value={open:!0,id:d.id,type:s}},Ee=M(()=>Y.value.type==="offday"?f:c),Be=M(()=>`${Y.value.type||"x"}-${Y.value.id||"x"}`);function Oe(d){if(!d)return null;const s=String(d).trim();let w=s.match(/^(\d{4})-(\d{2})-(\d{2})$/);return w?new Date(+w[1],+w[2]-1,+w[3],0,0,0):(w=s.match(/^(\d{4})-(\d{2})-(\d{2})[ T](\d{2}):(\d{2})(?::(\d{2}))?$/),w?new Date(+w[1],+w[2]-1,+w[3],+w[4],+w[5],+(w[6]||0)):null)}function z(d){const s=Oe(d);return s?s.toLocaleDateString(void 0,{day:"2-digit",month:"short",year:"numeric"}):""}function je(d){const s=String(d||"").match(/^(\d{4})-(\d{2})-(\d{2})$/);return s?new Date(+s[1],+s[2]-1,+s[3],0,0,0):null}function Ue(d,s){const w=new Date(d);return w.setDate(w.getDate()+s),w}function Ie(d,s){return d&&s&&d.getFullYear()===s.getFullYear()&&d.getMonth()===s.getMonth()&&d.getDate()===s.getDate()}function le(d){const s=d.getFullYear(),w=String(d.getMonth()+1).padStart(2,"0"),v=String(d.getDate()).padStart(2,"0");return`${s}-${w}-${v}`}function Ve(d){const s=Array.isArray(d)?d.slice():[],w=q=>Array.from(new Set(q)).sort(),v=w(s.filter(q=>(q==null?void 0:q.leave_type_id)!=="weekend").map(q=>q.date).filter(Boolean)),V=w(s.filter(q=>(q==null?void 0:q.leave_type_id)==="weekend").map(q=>q.date).filter(Boolean)),F=[];let H=null,G=null;for(const q of v){const te=je(q);if(te){if(!H){H=G=te;continue}Ie(Ue(G,1),te)?G=te:(F.push({from:le(H),to:le(G)}),H=G=te)}}return H&&G&&F.push({from:le(H),to:le(G)}),{ranges:F,weekends:V,leaveCount:v.length}}const E=B({apps:!!y.value,short:!!b.value,exch:!!j.value,manual:!!N.value}),re=d=>{E.value[d]=!E.value[d]};return(d,s)=>{const w=ge("RouterLink");return n(),u("div",ss,[e("section",null,[e("header",{class:"flex items-center justify-between mb-1 cursor-pointer select-none",role:"button","aria-expanded":E.value.apps,onClick:s[1]||(s[1]=v=>re("apps")),tabindex:"0"},[s[14]||(s[14]=Ye('<div class="flex items-center gap-2"><i class="fas fa-file text-gray-600"></i><h2 class="text-sm font-semibold text-gray-900"> Applications <span class="ml-2 align-middle text-[10px] sm:text-[11px] inline-flex items-center gap-1 rounded-full bg-blue-50 text-blue-700 px-2 py-0.5"><i class="far fa-clock"></i> Latest </span></h2></div>',1)),e("div",as,[e("span",os,m(y.value),1),D(w,{to:{name:"MyLeaveApplications"},class:"text-[11px] text-blue-700 hover:underline",onClick:s[0]||(s[0]=S(()=>{},["stop"]))},{default:C(()=>s[13]||(s[13]=[L(" See all ")])),_:1,__:[13]}),e("i",{class:$(["fas fa-chevron-down text-gray-600 transition-transform duration-200",E.value.apps?"rotate-180":""])},null,2)])],8,ns),ae(e("div",null,[s[17]||(s[17]=e("hr",{class:"border-gray-100"},null,-1)),o.value.length===0?(n(),u("div",ls,"No applications")):(n(),u("div",rs,[(n(!0),u(P,null,O(U.value,v=>(n(),u("button",{key:v.id,class:$(ce),onClick:V=>Re(v.id)},[e("div",{class:$(ue)},[e("div",ds,[e("div",us,[e("span",cs,"#"+m(v.id),1),e("span",ps," – "+m(Ae(v.leave_type_counts)||"—"),1)]),e("div",{class:$(Zs)},[(n(!0),u(P,null,O([Ve(v.json_data)],V=>(n(),u(P,{key:"info-"+v.id},[V.leaveCount>1?(n(!0),u(P,{key:0},O(V.ranges,(F,H)=>(n(),u("span",{key:H,class:"inline-flex items-center gap-1 rounded-md border border-gray-200 bg-gray-50 px-1.5 py-0.5"},[s[15]||(s[15]=e("i",{class:"far fa-calendar-minus"},null,-1)),e("span",ms,m(F.from!==F.to?z(F.from)+" – "+z(F.to):z(F.from)),1)]))),128)):(n(),u(P,{key:1},[V.ranges[0]?(n(),u("span",ys,[s[16]||(s[16]=e("i",{class:"far fa-calendar-day"},null,-1)),e("span",null,m(z(V.ranges[0].from)),1)])):T("",!0)],64))],64))),128))])]),e("span",{class:$([de,W(v.status).cls])},m(W(v.status).title),3)])],8,is))),128)),he.value?(n(),u("div",vs,[D(w,{to:{name:"MyLeaveApplications"},class:"text-[12px] text-blue-700 hover:underline"},{default:C(()=>[L(" + "+m(he.value)+" more ",1)]),_:1})])):T("",!0)]))],512),[[ie,E.value.apps]])]),e("section",fs,[e("header",{class:"flex items-center justify-between mb-1 cursor-pointer select-none",role:"button","aria-expanded":E.value.short,onClick:s[3]||(s[3]=v=>re("short")),tabindex:"0"},[s[19]||(s[19]=e("div",{class:"flex items-center gap-2"},[e("i",{class:"fas fa-walking text-gray-600"}),e("h2",{class:"text-sm font-semibold text-gray-900"},"Short Leave")],-1)),e("div",gs,[e("span",bs,m(b.value),1),D(w,{to:{name:"MyShortLeaves"},class:"text-[11px] text-blue-700 hover:underline",onClick:s[2]||(s[2]=S(()=>{},["stop"]))},{default:C(()=>s[18]||(s[18]=[L(" See all ")])),_:1,__:[18]}),e("i",{class:$(["fas fa-chevron-down text-gray-600 transition-transform duration-200",E.value.short?"rotate-180":""])},null,2)])],8,xs),ae(e("div",null,[s[20]||(s[20]=e("hr",{class:"border-gray-100"},null,-1)),g.value.length===0?(n(),u("div",hs,"No short leave")):(n(),u("div",_s,[(n(!0),u(P,null,O(I.value,v=>(n(),u("button",{key:v.id,class:$(ce),onClick:V=>Ne(v.id)},[e("div",{class:$(ue)},[e("div",ws,[e("div",$s,[e("span",Ds,m(z(v.date)),1),e("span",Cs," – "+m(v.type||"—"),1)])]),e("span",{class:$([de,W(v.status).cls])},m(W(v.status).title),3)])],8,ks))),128)),_e.value?(n(),u("div",Ms,[D(w,{to:{name:"MyShortLeaves"},class:"text-[12px] text-blue-700 hover:underline"},{default:C(()=>[L(" + "+m(_e.value)+" more ",1)]),_:1})])):T("",!0)]))],512),[[ie,E.value.short]])]),e("section",Ls,[e("header",{class:"flex items-center justify-between mb-1 cursor-pointer select-none",role:"button","aria-expanded":E.value.exch,onClick:s[6]||(s[6]=v=>re("exch")),tabindex:"0"},[s[23]||(s[23]=e("div",{class:"flex items-center gap-2"},[e("i",{class:"fas fa-exchange-alt text-gray-600"}),e("h2",{class:"text-sm font-semibold text-gray-900"},"Exchange")],-1)),e("div",Ss,[e("span",As,m(j.value),1),D(w,{to:{name:"MyShiftExchangeList"},class:"text-[11px] text-blue-700 hover:underline",onClick:s[4]||(s[4]=S(()=>{},["stop"]))},{default:C(()=>s[21]||(s[21]=[L(" Shift ")])),_:1,__:[21]}),D(w,{to:{name:"MyOffdayExchangeList"},class:"text-[11px] text-blue-700 hover:underline",onClick:s[5]||(s[5]=S(()=>{},["stop"]))},{default:C(()=>s[22]||(s[22]=[L(" Offday ")])),_:1,__:[22]}),e("i",{class:$(["fas fa-chevron-down text-gray-600 transition-transform duration-200",E.value.exch?"rotate-180":""])},null,2)])],8,Ts),ae(e("div",null,[s[24]||(s[24]=e("hr",{class:"border-gray-100"},null,-1)),A.value.length===0?(n(),u("div",Rs,"No exchange")):(n(),u("div",Ns,[(n(!0),u(P,null,O(Le.value,v=>(n(),u("button",{key:v.id,class:$(ce),onClick:V=>Pe(v)},[e("div",{class:$(ue)},[e("div",Ps,[e("div",Es,[e("span",Bs,m(z(v.current_date)),1),e("span",Os," – "+m(v.exchange_type||"—"),1)])]),e("span",{class:$([de,W(v.status).cls])},m(W(v.status).title),3)])],8,qs))),128)),ke.value?(n(),u("div",js,[D(w,{to:{name:"MyShiftExchangeList"},class:"text-[12px] text-blue-700 hover:underline"},{default:C(()=>[L(" + "+m(ke.value)+" more ",1)]),_:1})])):T("",!0)]))],512),[[ie,E.value.exch]])]),e("section",Us,[e("header",{class:"flex items-center justify-between mb-1 cursor-pointer select-none",role:"button","aria-expanded":E.value.manual,onClick:s[8]||(s[8]=v=>re("manual")),tabindex:"0"},[s[26]||(s[26]=e("div",{class:"flex items-center gap-2"},[e("i",{class:"fas fa-user-check text-gray-600"}),e("h2",{class:"text-sm font-semibold text-gray-900"},"Manual Attendance")],-1)),e("div",Vs,[e("span",Fs,m(N.value),1),D(w,{to:{name:"MyManualAttendanceList"},class:"text-[11px] text-blue-700 hover:underline",onClick:s[7]||(s[7]=S(()=>{},["stop"]))},{default:C(()=>s[25]||(s[25]=[L(" See all ")])),_:1,__:[25]}),e("i",{class:$(["fas fa-chevron-down text-gray-600 transition-transform duration-200",E.value.manual?"rotate-180":""])},null,2)])],8,Is),ae(e("div",null,[s[27]||(s[27]=e("hr",{class:"border-gray-100"},null,-1)),h.value.length===0?(n(),u("div",Ws,"No manual application")):(n(),u("div",Ys,[(n(!0),u(P,null,O(Te.value,v=>(n(),u("button",{key:v.id,class:$(ce),onClick:V=>qe(v.id)},[e("div",{class:$(ue)},[e("div",Hs,[e("div",Ks,[e("span",Gs,m(v.check_in?z(v.check_in):z(v.check_out)),1),e("span",Js," – "+m(v.type||"—"),1)])]),e("span",{class:$([de,W(v.status).cls])},m(W(v.status).title),3)])],8,zs))),128)),we.value?(n(),u("div",Xs,[D(w,{to:{name:"MyManualAttendanceList"},class:"text-[12px] text-blue-700 hover:underline"},{default:C(()=>[L(" + "+m(we.value)+" more ",1)]),_:1})])):T("",!0)]))],512),[[ie,E.value.manual]])]),Z.value.open?(n(),R(k(i),{key:0,open:Z.value.open,"onUpdate:open":s[9]||(s[9]=v=>Z.value.open=v),id:Z.value.id},null,8,["open","id"])):T("",!0),Q.value.open?(n(),R(k(p),{key:1,open:Q.value.open,"onUpdate:open":s[10]||(s[10]=v=>Q.value.open=v),id:Q.value.id},null,8,["open","id"])):T("",!0),ee.value.open?(n(),R(k(x),{key:2,open:ee.value.open,"onUpdate:open":s[11]||(s[11]=v=>ee.value.open=v),id:ee.value.id},null,8,["open","id"])):T("",!0),Y.value.open?(n(),R(ze(Ee.value),{key:Be.value,open:Y.value.open,"onUpdate:open":s[12]||(s[12]=v=>Y.value.open=v),id:Y.value.id},null,40,["open","id"])):T("",!0)])}}},en={class:"bg-white shadow-sm rounded-xl p-3"},tn={class:"flex items-center justify-between"},sn={key:0,class:"text-[11px] text-gray-500"},nn={class:"inline-flex items-center gap-1 px-1.5 py-0.5 rounded-full bg-blue-50 text-blue-700"},an={key:0,class:"text-xs italic text-center py-6 text-gray-500"},on={key:1,class:"space-y-2"},ln={class:"flex items-start gap-3 min-w-0"},rn={class:"min-w-0"},dn={class:"text-sm font-medium text-gray-900 truncate"},un={class:"text-[11px] text-gray-500 mt-0.5"},cn={class:"text-base font-semibold text-gray-800 flex items-center gap-2 p-3"},pn={class:"space-y-4 px-3 pb-4"},mn={class:"text-xs text-gray-500 flex items-center gap-2"},yn={class:"flex justify-end gap-2 mt-2"},vn={__name:"DashboardRecentNotices",setup(_){const i=oe(),{userDashboard:p}=X(i),x=be(),c=h=>{if(!h)return"—";const r=new Date(h);return isNaN(+r)?h:new Intl.DateTimeFormat(void 0,{day:"2-digit",month:"short",year:"numeric"}).format(r)},f=h=>{if(!h)return"";const r=new Date(h);if(isNaN(+r))return"";const y=(Date.now()-r.getTime())/1e3,b=new Intl.RelativeTimeFormat(void 0,{numeric:"auto"}),j=[["year",60*60*24*365],["month",60*60*24*30],["week",60*60*24*7],["day",60*60*24],["hour",60*60],["minute",60],["second",1]];for(const[N,U]of j){const I=Math.round(y/U);if(Math.abs(I)>=1)return b.format(-I,N)}return b.format(0,"second")},l=h=>{const r=c(h),y=f(h);return y?`${r} · ${y}`:r},a=M(()=>{var h;return((h=p.value)==null?void 0:h.notices)??[]}),t=M(()=>[...a.value].sort((r,y)=>{const b=r!=null&&r.user_feedback?1:0,j=y!=null&&y.user_feedback?1:0;if(b!==j)return b-j;const N=new Date((r==null?void 0:r.published_at)||0).getTime();return new Date((y==null?void 0:y.published_at)||0).getTime()-N})),o=M(()=>t.value.find(h=>!(h!=null&&h.user_feedback))||null),g=B(!!o.value);J(o,h=>{g.value=!!h});const A=h=>{const r=h||o.value;if(!r)return;const y=r.type===1?`/notice-details/${r.id}`:`/policy-details/${r.id}`;x.push(y)};return(h,r)=>{const y=ge("RouterLink");return n(),u("div",en,[e("div",tn,[r[4]||(r[4]=e("div",{class:"flex items-center gap-1.5"},[e("i",{class:"fas fa-bell"}),e("h2",{class:"text-base font-semibold"},"Notices")],-1)),t.value.length?(n(),u("div",sn,[e("span",nn,[r[3]||(r[3]=e("span",{class:"h-1.5 w-1.5 rounded-full bg-blue-500"},null,-1)),L(" "+m(t.value.filter(b=>!b.user_feedback).length)+" pending ",1)])])):T("",!0)]),r[10]||(r[10]=e("hr",{class:"my-2 border-gray-200"},null,-1)),t.value.length?(n(),u("div",on,[(n(!0),u(P,null,O(t.value,b=>(n(),u("article",{key:b.id,class:"group flex items-center justify-between gap-2 p-3 border border-gray-100 rounded-lg hover:border-blue-200 transition"},[e("div",ln,[e("span",{class:$(["inline-flex items-center gap-1 px-1.5 py-0.5 rounded-full text-[10px] font-medium mt-0.5",b.user_feedback?"bg-emerald-50 text-emerald-700":"bg-rose-50 text-rose-700"])},[e("span",{class:$(["h-2 w-2 rounded-full",b.user_feedback?"bg-emerald-600":"bg-rose-600 animate-pulse"])},null,2)],2),e("div",rn,[e("h3",dn,m(b.title||"Untitled notice"),1),e("p",un,[r[5]||(r[5]=e("i",{class:"fas fa-calendar-alt text-gray-400 mr-1"},null,-1)),L(" "+m(l(b.published_at)),1)])])]),D(y,{to:b.type===1?`/notice-details/${b.id}`:`/policy-details/${b.id}`,class:"shrink-0 inline-flex items-center gap-1 text-blue-600 hover:text-blue-700 text-xs font-semibold"},{default:C(()=>r[6]||(r[6]=[L(" View "),e("i",{class:"fas fa-arrow-right text-[10px]"},null,-1)])),_:2,__:[6]},1032,["to"])]))),128))])):(n(),u("div",an," No pending notice found ")),o.value?(n(),R(st,{key:2,show:g.value,onClose:r[2]||(r[2]=b=>g.value=!1)},{default:C(()=>[e("div",cn,[r[7]||(r[7]=e("i",{class:"fas fa-bell text-blue-600"},null,-1)),L(" "+m(o.value.title||"New notice"),1)]),e("div",pn,[e("p",mn,[r[8]||(r[8]=e("i",{class:"fas fa-calendar-alt text-gray-400"},null,-1)),L(" Published: "+m(l(o.value.published_at)),1)]),r[9]||(r[9]=e("p",{class:"text-sm text-gray-700"}," You must read this notice before proceeding. ",-1)),e("div",yn,[e("button",{onClick:r[0]||(r[0]=b=>g.value=!1),class:"bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium px-3 py-1.5 rounded-md transition text-sm"}," Later "),e("button",{onClick:r[1]||(r[1]=b=>A(o.value)),class:"bg-blue-600 hover:bg-blue-700 text-white font-semibold px-4 py-1.5 rounded-md transition text-sm"}," Read ")])])]),_:1},8,["show"])):T("",!0)])}}},fn={class:"w-full px-6 py-4"},xn={class:"grid lg:grid-cols-4 gap-6 items-start"},gn={class:"gap-0 rounded-md bg-white shadow-md border border-gray-300 col-span-full lg:col-span-3 lg:row-span-2"},bn={class:"flex items-center justify-center gap-4 py-2"},hn={class:"col-span-full lg:col-span-1 grid sm:grid-cols-2 lg:grid-cols-1 gap-6 sticky top-[80px]"},_n={class:"card-bg gap-0 shadow-md border border-gray-300"},kn={class:"card-bg gap-0 shadow-md border border-gray-300"},wn={class:"card-bg gap-0 shadow-md border border-gray-300"},$n={__name:"DashboardEmployeeView",setup(_){const i=B("todos"),p=Me(),x=be();return J(()=>i.value,function(c){c!=="todos"&&x.replace({query:Object.keys(p.query).filter(f=>!f.match(/^todos\[/)).reduce((f,l)=>(f[l]=p.query[l],f),{})})}),(c,f)=>(n(),u("div",fn,[e("div",xn,[e("div",gn,[e("div",bn,[e("button",{onClick:f[0]||(f[0]=S(l=>i.value="todos",["prevent"])),class:$(["!py-0.5 text-sm",{"btn-2":i.value=="todos","btn-3 hover:bg-gray-200 hover:text-blue-500":i.value!="todos"}])}," Todos ",2),e("button",{onClick:f[1]||(f[1]=S(l=>i.value="tasks",["prevent"])),class:$(["!py-0.5 text-sm",{"btn-2":i.value=="tasks","btn-3 hover:bg-gray-200 hover:text-blue-500":i.value!="tasks"}])}," Tasks ",2)]),i.value=="todos"?(n(),R(ts,{key:0})):T("",!0),i.value=="tasks"?(n(),R(Yt,{key:1})):T("",!0)]),e("div",hn,[e("div",_n,[D(Qs)]),e("div",kn,[D(vn)]),e("div",wn,[D(Xt)])])])]))}},Xn={__name:"DashBoard",setup(_){const i=xe(),p=oe(),{userDashboard:x}=X(p),{user:c}=X(i),f=M(()=>{var a;return["admin","super_admin","developer"].includes((a=c==null?void 0:c.value)==null?void 0:a.role)}),l=B(null);return Ce(async()=>{var t,o;c.value||await i.fetchUser(),await p.fetchUserDashboardData(),f.value&&await p.fetchAdminDashboardData();const a=(o=(t=x.value)==null?void 0:t.notices)==null?void 0:o.find(g=>!g.user_feedback);a&&(l.value=a)}),(a,t)=>f.value&&k(i).isAdminMood?(n(),R(vt,{key:0})):(n(),R($n,{key:1}))}};export{Xn as default};
