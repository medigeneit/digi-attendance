import{M as D,r as p,m as U,D as n}from"./index-Dgu37sY7.js";const I=D("device",()=>{const i=p([]),v=p(null),c=p(!1),o=p(null),f=async()=>{var s,r;c.value=!0,o.value=null;try{const e=await n.get("/devices");i.value=e.data}catch(e){o.value=((r=(s=e.response)==null?void 0:s.data)==null?void 0:r.message)||"ডিভাইস লোড করতে ব্যর্থ হয়েছে।",console.error("Error fetching devices:",e)}finally{c.value=!1}},y=async s=>{var r,e;c.value=!0,o.value=null;try{const t=await n.get(`/devices/${s}`);v.value=t.data}catch(t){o.value=((e=(r=t.response)==null?void 0:r.data)==null?void 0:e.message)||`ডিভাইস (ID: ${s}) লোড করতে ব্যর্থ হয়েছে।`,console.error(`Error fetching device with id ${s}:`,t)}finally{c.value=!1}},h=async s=>{var r,e;c.value=!0,o.value=null;try{const t=await n.post("/devices",s);return i.value.push(t.data),t.data}catch(t){o.value=((e=(r=t.response)==null?void 0:r.data)==null?void 0:e.message)||"ডিভাইস তৈরি করতে ব্যর্থ হয়েছে।",console.error("Error creating device:",t)}finally{c.value=!1}},w=async(s,r)=>{var e,t;c.value=!0,o.value=null;try{const a=await n.put(`/devices/${s}`,r),d=i.value.findIndex(m=>m.id===s);return d!==-1&&(i.value[d]=a.data),a.data}catch(a){o.value=((t=(e=a.response)==null?void 0:e.data)==null?void 0:t.message)||`ডিভাইস (ID: ${s}) আপডেট করতে ব্যর্থ হয়েছে।`,console.error(`Error updating device with id ${s}:`,a)}finally{c.value=!1}},g=async s=>{var r,e;c.value=!0,o.value=null;try{await n.delete(`/devices/${s}`),i.value=i.value.filter(t=>t.id!==s)}catch(t){o.value=((e=(r=t.response)==null?void 0:r.data)==null?void 0:e.message)||`ডিভাইস (ID: ${s}) মুছতে ব্যর্থ হয়েছে।`,console.error(`Error deleting device with id ${s}:`,t)}finally{c.value=!1}},$=async s=>{try{return await n.get(`/check-device-connection/${s}`),!0}catch(r){return console.error(r),!1}},l=async s=>{try{return c.value=!0,await n.post(`/devices/${s}/sync-catchup`),!0}catch(r){return console.error(r),!1}finally{c.value=!1}},u=async()=>{try{return c.value=!0,await n.post("/devices/sync-all"),!0}catch(s){return console.error(s),!1}finally{c.value=!1}};return{devices:U(()=>i.value),device:U(()=>v.value),loading:U(()=>c.value),error:U(()=>o.value),fetchDevices:f,fetchDevice:y,createDevice:h,updateDevice:w,deleteDevice:g,checkDeviceConnection:$,syncCatchup:l,syncAll:u}}),R=D("zkUser",()=>{const i=p([]),v=p(!1),c=p(null);async function o(){var r,e;v.value=!0,c.value=null;try{const t=await n.get("/zk-users");i.value=t.data}catch(t){c.value=((e=(r=t.response)==null?void 0:r.data)==null?void 0:e.message)||t.message}finally{v.value=!1}}async function f(r){var e;try{const t=await n.post("/zk-users",r);return await o(),t.data}catch(t){throw((e=t.response)==null?void 0:e.data)||t}}async function y(r,e){var t;try{const a=await n.put(`/zk-users/${r}`,e);return await o(),a.data}catch(a){throw((t=a.response)==null?void 0:t.data)||a}}async function h(r){var e;try{const t=await n.delete(`/zk-users/${r}`);return await o(),t.data}catch(t){throw((e=t.response)==null?void 0:e.data)||t}}async function w(r){var e;try{const{data:t}=await n.post(`/users/${encodeURIComponent(r)}/push`);return t}catch(t){throw((e=t.response)==null?void 0:e.data)||t}}async function g(r,{deviceIds:e=[],diff:t=!0}={}){var a;try{const d={device_ids:e,diff:t},{data:m}=await n.post(`/users/${encodeURIComponent(r)}/push-user`,d);return m}catch(d){throw((a=d.response)==null?void 0:a.data)||d}}async function $(r,e,{diff:t=!0}={}){var a;try{const d=t?"?diff=true":"?diff=false",{data:m}=await n.post(`/devices/${encodeURIComponent(r)}/users/${encodeURIComponent(e)}/push-user${d}`);return m}catch(d){throw((a=d.response)==null?void 0:a.data)||d}}async function l(r){var e;try{const{data:t}=await n.post(`/devices/${r}/pull-users`);return await o(),t}catch(t){throw((e=t.response)==null?void 0:e.data)||t}}async function u(r,{diff:e=!0}={}){var t;try{const a=e?"?diff=true":"?diff=false",{data:d}=await n.post(`/devices/${r}/sync-catchup${a}`);return d}catch(a){throw((t=a.response)==null?void 0:t.data)||a}}async function s(r){var e;try{const{data:t}=await n.get(`/devices/${encodeURIComponent(r)}/user-count`);return t}catch(t){throw((e=t.response)==null?void 0:e.data)||t}}return{users:i,loading:v,error:c,fetchUsers:o,createUser:f,updateUser:y,deleteUser:h,pushUser:w,pushUserToDevices:g,pushUserToDevice:$,pullUsersFromDevice:l,syncCatchupUsers:u,getDeviceUserCount:s}}),F=D("zkFinger",()=>{const i=p(!1),v=p(null),c=p(null),o=p(null);async function f(l,{limit:u=null,offset:s=null}={}){var r;try{const e=new URLSearchParams;u!==null&&e.append("limit",String(u)),s!==null&&e.append("offset",String(s));const t=e.toString().length>0?`/devices/${l}/pull-fingerprints?`+e.toString():`/devices/${l}/pull-fingerprints`,{data:a}=await n.post(t);return o.value=a,a}catch(e){throw((r=e.response)==null?void 0:r.data)||e}}async function y(l,{diff:u=!0}={}){var s;try{const r=u?"?diff=true":"?diff=false",{data:e}=await n.post(`/devices/${l}/push-fingerprints${r}`);return e}catch(r){throw((s=r.response)==null?void 0:s.data)||r}}async function h(l,u){var s;try{const{data:r}=await n.post(`/devices/${l}/users/${encodeURIComponent(u)}/pull-fingers`);return o.value=r,r}catch(r){throw((s=r.response)==null?void 0:s.data)||r}}async function w(l,{deviceIds:u=[],diff:s=!0}={}){var r;try{const e={device_ids:u,diff:s},{data:t}=await n.post(`/users/${encodeURIComponent(l)}/push-fingers`,e);return t}catch(e){throw((r=e.response)==null?void 0:r.data)||e}}async function g(l,u,{diff:s=!0}={}){var r;try{const e=s?"?diff=true":"?diff=false",{data:t}=await n.post(`/devices/${l}/users/${encodeURIComponent(u)}/push-fingers${e}`);return t}catch(e){throw((r=e.response)==null?void 0:r.data)||e}}async function $(l){var u,s,r;i.value=!0,v.value=null;try{const{data:e}=await n.get(`/users/${encodeURIComponent(l)}/verify`);return c.value=e,e}catch(e){throw v.value=((s=(u=e.response)==null?void 0:u.data)==null?void 0:s.message)||e.message,((r=e.response)==null?void 0:r.data)||e}finally{i.value=!1}}return{loading:i,error:v,verifyResult:c,lastPullSummary:o,pullFingerprintsFromDevice:f,pushFingerprintsToDevice:y,pullUserFingersFromDevice:h,verifyUser:$,pushUserFingersToDevices:w,pushUserFingersToDevice:g}});export{R as a,F as b,I as u};
