import{r as i,x as p,c as u,g as d,o as c,a as s,h as w,v as h,k as b,t as v}from"./index-DzEmXLmZ.js";import{u as y}from"./useCommentStore-D72X3C3B.js";const C={key:0,class:"fixed inset-0 bg-black/40 flex items-center justify-center z-50"},k={class:"bg-white p-6 w-full max-w-md rounded-lg shadow-lg relative"},_={key:0,class:"text-red-500 mb-2"},S=["disabled"],N={__name:"CommentModal",props:{show:Boolean,onClose:Function,commentableId:Number,commentableType:String,userId:Number},emits:["submitted"],setup(a,{emit:x}){const t=a,f=x,l=y(),o=i(""),n=i(!1);p(()=>t.show,m=>{m&&(o.value="")});const g=async()=>{n.value=!0,await l.createComment({commentable_id:t.commentableId,commentable_type:t.commentableType,user_id:t.userId,message:o.value}),n.value=!1,l.error||(f("submitted"),t.onClose())};return(m,e)=>a.show?(c(),u("div",C,[s("div",k,[s("button",{onClick:e[0]||(e[0]=(...r)=>a.onClose&&a.onClose(...r)),class:"absolute top-2 right-2 text-gray-500 hover:text-red-600 text-xl"}," Ã— "),e[2]||(e[2]=s("h2",{class:"text-lg font-semibold mb-4"},"Add Comment",-1)),w(s("textarea",{"onUpdate:modelValue":e[1]||(e[1]=r=>o.value=r),placeholder:"Write your comment...",class:"w-full border rounded px-3 py-2 mb-2",rows:"4"},null,512),[[h,o.value]]),b(l).error?(c(),u("div",_,v(b(l).error),1)):d("",!0),s("button",{onClick:g,disabled:n.value||!o.value,class:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded w-full"},v(n.value?"Saving...":"Submit Comment"),9,S)])])):d("",!0)}};export{N as _};
