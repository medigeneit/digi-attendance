import{u as C,d as F,z as U,q,r as x,C as R,c as s,o as u,a as e,y as g,i as B,j as D,w as O,g as a,h as i,v as r,A as w,t as T}from"./index-w2t8SdXS.js";import{L as $}from"./LoaderView-oBFNM-89.js";import{u as E}from"./manual-attendance-eagaDOXN.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const I={class:"max-w-3xl mx-auto p-4 space-y-4"},L={class:"flex items-center justify-between gap-2"},N={key:0,class:"text-center"},j={key:0},H={key:1},W={key:2},z={key:3},G={key:4},J={key:5,class:"text-red-500 text-sm"},tt={__name:"ManualAttendanceAdd",setup(K){const c=C(),_=E(),m=F(),y=l=>{if(!l)return null;const t=l.match(/(\d+):(\d+)\s*(AM|PM)/i);if(!t)return null;let[p,o,S,h]=t;return o=parseInt(o,10),h.toUpperCase()==="PM"&&o<12&&(o+=12),h.toUpperCase()==="AM"&&o===12&&(o=0),`${o.toString().padStart(2,"0")}:${S}`},{date:k,type:A,entry_time:v,exit_time:b}=c.currentRoute.value.query,M=k||new Date().toISOString().split("T")[0],n=U({date:M,type:A||"",check_in:v?y(v):"",check_out:b?y(b):"",description:"",punch_type:""});q(()=>n.type,l=>{console.log(l),l!=="Forget Punch"&&(n.punch_type="")});const f=x(!1),d=x(null),V=async()=>{var l;f.value=!0,d.value=null;try{const t={user_id:(l=m==null?void 0:m.user)==null?void 0:l.id,...n,check_in:n.check_in?`${n.date} ${n.check_in}:00`:null,check_out:n.check_out?`${n.date} ${n.check_out}:00`:null},p=await _.createManualAttendance(t);c.push({name:"ManualAttendanceShow",params:{id:p.id}})}catch(t){d.value=t.message||"Failed to submit manual attendance request."}finally{f.value=!1}},P=()=>{c.go(-1)};return(l,t)=>{const p=R("RouterLink");return u(),s("div",I,[e("div",L,[e("button",{class:"btn-3",onClick:P},t[8]||(t[8]=[e("i",{class:"far fa-arrow-left"},null,-1),e("span",{class:"hidden md:flex"},"Back",-1)])),t[10]||(t[10]=e("h1",{class:"title-md md:title-lg flex-wrap text-center"},"Manual Attendance Request Form",-1)),e("div",null,[g(p,{to:"/",class:"btn-2"},{default:B(()=>t[9]||(t[9]=[D("Home")])),_:1,__:[9]})])]),f.value?(u(),s("div",N,[g($)])):(u(),s("form",{key:1,onSubmit:O(V,["prevent"]),class:"space-y-4 card-bg md:p-8 p-4"},[e("div",null,[t[11]||(t[11]=e("label",{for:"date",class:"block text-sm font-medium"},"Date",-1)),i(e("input",{type:"date",id:"date","onUpdate:modelValue":t[0]||(t[0]=o=>n.date=o),class:"input-1 w-full",required:""},null,512),[[r,n.date]])]),e("div",null,[t[13]||(t[13]=e("label",{for:"type",class:"block text-sm font-medium"},"Type",-1)),i(e("select",{id:"type","onUpdate:modelValue":t[1]||(t[1]=o=>n.type=o),class:"input-1 w-full",required:""},t[12]||(t[12]=[e("option",{value:""},"Select Type",-1),e("option",{value:"Home Office"},"Home Office",-1),e("option",{value:"Remote Work"},"Remote Work",-1),e("option",{value:"Forget Punch"},"Forget Punch",-1)]),512),[[w,n.type]])]),n.type==="Forget Punch"?(u(),s("div",j,[t[15]||(t[15]=e("label",{for:"type",class:"block text-sm font-medium"},"Forget Punch Type",-1)),i(e("select",{id:"type","onUpdate:modelValue":t[2]||(t[2]=o=>n.punch_type=o),class:"input-1 w-full",required:""},t[14]||(t[14]=[e("option",{value:""},"Select One",-1),e("option",{value:"entry"},"Entry",-1),e("option",{value:"exit"},"Exit",-1),e("option",{value:"both"},"Both",-1)]),512),[[w,n.punch_type]])])):a("",!0),n.type!=="Forget Punch"||n.punch_type==="both"?(u(),s("div",H,[t[16]||(t[16]=e("label",{for:"check-in",class:"block text-sm font-medium"},"Check-In",-1)),i(e("input",{type:"time",id:"check-in","onUpdate:modelValue":t[3]||(t[3]=o=>n.check_in=o),class:"input-1 w-full"},null,512),[[r,n.check_in]])])):a("",!0),n.type!=="Forget Punch"||n.punch_type==="both"?(u(),s("div",W,[t[17]||(t[17]=e("label",{for:"check-out",class:"block text-sm font-medium"},"Check-Out",-1)),i(e("input",{type:"time",id:"check-out","onUpdate:modelValue":t[4]||(t[4]=o=>n.check_out=o),class:"input-1 w-full"},null,512),[[r,n.check_out]])])):a("",!0),n.type==="Forget Punch"&&n.punch_type==="entry"?(u(),s("div",z,[t[18]||(t[18]=e("label",{for:"check-in",class:"block text-sm font-medium"},"Check-In",-1)),i(e("input",{type:"time",id:"check-in","onUpdate:modelValue":t[5]||(t[5]=o=>n.check_in=o),class:"input-1 w-full"},null,512),[[r,n.check_in]])])):a("",!0),n.type==="Forget Punch"&&n.punch_type==="exit"?(u(),s("div",G,[t[19]||(t[19]=e("label",{for:"check-out",class:"block text-sm font-medium"},"Check-Out",-1)),i(e("input",{type:"time",id:"check-out","onUpdate:modelValue":t[6]||(t[6]=o=>n.check_out=o),class:"input-1 w-full"},null,512),[[r,n.check_out]])])):a("",!0),e("div",null,[t[20]||(t[20]=e("label",{for:"description",class:"block text-sm font-medium"},"Description",-1)),i(e("textarea",{id:"description","onUpdate:modelValue":t[7]||(t[7]=o=>n.description=o),class:"input-1 w-full",placeholder:"Enter a description of the reason for manual attendance",required:""},null,512),[[r,n.description]])]),d.value?(u(),s("div",J,T(d.value),1)):a("",!0),t[21]||(t[21]=e("div",{class:"flex justify-center"},[e("button",{type:"submit",class:"btn-2"},"Submit")],-1))],32))])}}};export{tt as default};
