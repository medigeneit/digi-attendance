import{u as U,b as R,r as D,e as j,A as B,n as F,c as o,o as l,a as t,f as O,g,p as m,k as C,h as G,v as I,j as r,t as s,F as x,x as v,i as A}from"./index-DHz7ni4_.js";import{_ as W}from"./EmployeeFilter-NJ5Kaf_o.js";import{L as z}from"./LoaderView-uU4GutIQ.js";import{u as J}from"./leave-application-Crx0VX-m.js";import{u as P}from"./user-DLLncWTs.js";import"./MultiselectDropdown-C-a1oLOo.js";import"./company-ykiwKHyR.js";import"./department-B94riwJu.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const H={class:"px-4 space-y-4"},Q={class:"flex flex-wrap gap-4"},X={key:0,class:"flex justify-between gap-4 text-sm"},Y={class:"card-bg p-4 gap-1"},Z={class:"grid md:grid-cols-2"},K={key:1},tt={class:"space-y-5"},et={class:"text-base font-semibold text-blue-400 mb-2 text-center capitalize"},st={class:"text-gray-500"},at={key:0,class:"overflow-x-auto rounded border bg-white"},lt={class:"min-w-full text-sm text-left"},ot={class:"p-2"},nt={class:"p-2"},rt={class:"p-2"},it={class:"p-2"},dt={class:"p-2 whitespace-pre-line"},pt={class:"p-2 whitespace-pre-line"},ct={class:"p-2 text-sm text-gray-600"},ut={key:1,class:"overflow-x-auto rounded border bg-white"},ht={class:"min-w-full text-sm text-left"},_t={class:"p-2"},yt={class:"p-2"},ft={class:"p-2"},gt={class:"p-2"},mt={class:"p-2 whitespace-pre-line"},xt={class:"p-2 whitespace-pre-line"},vt={class:"p-2 whitespace-pre-line"},bt={class:"p-2 whitespace-pre-line text-center"},wt=["href"],kt={key:1,class:"text-gray-400"},At={class:"p-2 whitespace-pre-line"},St={class:"p-2 text-sm text-gray-600"},Dt={key:2,class:"overflow-x-auto rounded border bg-white"},Ct={class:"min-w-full text-sm text-left"},Lt={class:"p-2"},Nt={class:"p-2"},qt={class:"p-2"},Vt={class:"p-2"},$t={class:"p-2 whitespace-pre-line"},Bt={class:"p-2 whitespace-pre-line"},Mt={class:"p-2 text-sm text-gray-600"},Tt={key:3,class:"overflow-x-auto rounded border bg-white"},Et={class:"min-w-full text-sm text-left"},Ut={class:"p-2"},Rt={class:"p-2"},jt={class:"p-2"},Ft={class:"p-2"},Ot={class:"p-2"},Gt={class:"p-2"},It={class:"p-2 whitespace-pre-line"},Wt={class:"p-2 text-sm text-gray-600"},ee={__name:"MonthWiseApplicationLog",setup(zt){const b=U(),u=R(),L=P(),w=J(),i=D(null),_=D(u.query.date||w.selectedMonth),d=D({company_id:u.query.company_id||"",department_id:u.query.department_id||"all",type:u.query.type||"all",employee_id:u.query.employee_id||"",category:""}),N=async n=>{n?(await L.fetchUser(n),i.value=L.user):i.value=null},S=async()=>{d.value.employee_id&&_.value&&await w.getMonthlyApplicationLog(d.value.employee_id,_.value)};j(async()=>{d.value.employee_id&&await N(d.value.employee_id)}),B(()=>d.value.employee_id,async(n,e)=>{n&&n!==e&&(await N(n),await S(),b.replace({query:{...u.query,employee_id:n}}))}),B(_,n=>{b.replace({query:{...u.query,date:n}}),S()});const M=()=>b.go(-1),k=n=>new Date(n).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),y=n=>`${new Date(n).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})}`,T=()=>{b.replace({query:{...u.query,company_id:d.value.company_id,department_id:d.value.department_id,type:d.value.type,employee_id:d.value.employee_id}})},E={exchange_shift:"ExchangeShiftShow",exchange_offday:"ExchangeOffdayShow"};return(n,e)=>{var q,V,$;const f=F("RouterLink");return l(),o("div",H,[t("div",{class:"flex items-center justify-between gap-2"},[t("button",{class:"btn-3",onClick:M},e[2]||(e[2]=[t("i",{class:"far fa-arrow-left"},null,-1),t("span",{class:"hidden md:flex"},"Back",-1)])),e[3]||(e[3]=t("h1",{class:"title-md md:title-lg flex-wrap text-center"},"Monthly Application Log",-1)),e[4]||(e[4]=t("div",null,null,-1))]),t("div",Q,[m(W,{modelValue:d.value,"onUpdate:modelValue":e[0]||(e[0]=h=>d.value=h),"initial-value":C(u).query,onFilterChange:T},null,8,["modelValue","initial-value"]),t("div",null,[G(t("input",{id:"monthSelect",type:"month","onUpdate:modelValue":e[1]||(e[1]=h=>_.value=h),onChange:S,class:"input-1"},null,544),[[I,_.value]])])]),i.value?(l(),o("div",X,[t("div",Y,[e[13]||(e[13]=t("h2",{class:"title-md"},"Selected Employee Info",-1)),e[14]||(e[14]=t("hr",null,null,-1)),t("div",Z,[t("p",null,[e[5]||(e[5]=t("strong",null,"Name:",-1)),r(" "+s(i.value.name),1)]),t("p",null,[e[6]||(e[6]=t("strong",null,"Designation:",-1)),r(" "+s(((q=i.value.designation)==null?void 0:q.title)||"N/A"),1)]),t("p",null,[e[7]||(e[7]=t("strong",null,"Department:",-1)),r(" "+s(((V=i.value.department)==null?void 0:V.name)||"N/A"),1)]),t("p",null,[e[8]||(e[8]=t("strong",null,"Company:",-1)),r(" "+s((($=i.value.company)==null?void 0:$.name)||"N/A"),1)]),t("p",null,[e[9]||(e[9]=t("strong",null,"Phone:",-1)),r(" "+s(i.value.phone),1)]),t("p",null,[e[10]||(e[10]=t("strong",null,"Email:",-1)),r(" "+s(i.value.email||"N/A"),1)]),t("p",null,[e[11]||(e[11]=t("strong",null,"Blood Group:",-1)),r(" "+s(i.value.blood||"N/A"),1)]),t("p",null,[e[12]||(e[12]=t("strong",null,"Joining Date:",-1)),r(" "+s(i.value.joining_date||"N/A"),1)])])])])):(l(),o("div",K,e[15]||(e[15]=[t("p",{class:"text-gray-400 text-center text-2xl italic"},"Select an employee, please.",-1)]))),C(w).loading?(l(),O(z,{key:2})):g("",!0),t("div",tt,[(l(!0),o(x,null,v(C(w).applicationLog,(h,p)=>(l(),o("div",{key:p,class:"bg-gray-50 p-4 rounded shadow"},[t("h2",et,[r(s(p.replaceAll("_"," "))+" ",1),t("span",st,"("+s(h.length)+")",1)]),p==="leave_application"?(l(),o("div",at,[t("table",lt,[e[17]||(e[17]=t("thead",{class:"bg-gray-100 text-gray-700 text-xs uppercase"},[t("tr",null,[t("th",{class:"p-2"},"#"),t("th",{class:"p-2"},"Create Date"),t("th",{class:"p-2"},"Last Working Date"),t("th",{class:"p-2"},"Resumption Date"),t("th",{class:"p-2"},"Type"),t("th",{class:"p-2"},"Status"),t("th",{class:"p-2"},"Action")])],-1)),t("tbody",null,[(l(!0),o(x,null,v(h,(a,c)=>(l(),o("tr",{key:`${p}-${c}`,class:"border-t hover:bg-gray-50 text-sm"},[t("td",ot,s(c+=1),1),t("td",nt,s(y(a.create_date)),1),t("td",rt,s(a.from),1),t("td",it,s(a.to),1),t("td",dt,s(a.application_types),1),t("td",pt,s(a.status),1),t("td",ct,[m(f,{to:{name:"LeaveApplicationShow",params:{id:a.id}},class:"inline-flex items-center gap-1 text-blue-600 hover:underline"},{default:A(()=>e[16]||(e[16]=[t("i",{class:"far fa-eye"},null,-1),r(" View ")])),_:2,__:[16]},1032,["to"])])]))),128))])])])):g("",!0),p==="short_leave"?(l(),o("div",ut,[t("table",ht,[e[20]||(e[20]=t("thead",{class:"bg-gray-100 text-gray-700 text-xs uppercase"},[t("tr",null,[t("th",{class:"p-2"},"#"),t("th",{class:"p-2"},"Create Date"),t("th",{class:"p-2"},"Type"),t("th",{class:"p-2"},"Date"),t("th",{class:"p-2"},"Check In"),t("th",{class:"p-2"},"Check Out"),t("th",{class:"p-2"},"Duration"),t("th",{class:"p-2"},"Attachment"),t("th",{class:"p-2"},"Status"),t("th",{class:"p-2"},"Action")])],-1)),t("tbody",null,[(l(!0),o(x,null,v(h,(a,c)=>(l(),o("tr",{key:`${p}-${c}`,class:"border-t hover:bg-gray-50 text-sm"},[t("td",_t,s(c+=1),1),t("td",yt,s(y(a.create_date)),1),t("td",ft,s(a.application_types),1),t("td",gt,s(a.date),1),t("td",mt,s(k(a.start_time)),1),t("td",xt,s(k(a.end_time)),1),t("td",vt,s(a.duration)+" m ",1),t("td",bt,[a.attachment?(l(),o("a",{key:0,href:a.attachment,target:"_blank",rel:"noopener",class:"text-blue-600 hover:underline"},e[18]||(e[18]=[t("i",{class:"far fa-eye"},null,-1)]),8,wt)):(l(),o("span",kt,"No file"))]),t("td",At,s(a.status),1),t("td",St,[m(f,{to:{name:"ShortLeaveShow",params:{id:a.id}},class:"inline-flex items-center gap-1 text-blue-600 hover:underline"},{default:A(()=>e[19]||(e[19]=[t("i",{class:"far fa-eye"},null,-1),r(" View ")])),_:2,__:[19]},1032,["to"])])]))),128))])])])):g("",!0),p==="exchange_offday"||p==="exchange_shift"?(l(),o("div",Dt,[t("table",Ct,[e[22]||(e[22]=t("thead",{class:"bg-gray-100 text-gray-700 text-xs uppercase"},[t("tr",null,[t("th",{class:"p-2"},"#"),t("th",{class:"p-2"},"Create Date"),t("th",{class:"p-2"},"Current Date"),t("th",{class:"p-2"},"Exchange Date"),t("th",{class:"p-2"},"Shift"),t("th",{class:"p-2"},"Status"),t("th",{class:"p-2"},"Action")])],-1)),t("tbody",null,[(l(!0),o(x,null,v(h,(a,c)=>(l(),o("tr",{key:`${p}-${c}`,class:"border-t hover:bg-gray-50 text-sm"},[t("td",Lt,s(c+=1),1),t("td",Nt,s(y(a.create_date)),1),t("td",qt,s(a.current_date),1),t("td",Vt,s(a.exchange_date),1),t("td",$t,s((a==null?void 0:a.shift)||"N/A"),1),t("td",Bt,s(a.status),1),t("td",Mt,[m(f,{to:{name:E[a.type],params:{id:a.id}},class:"inline-flex items-center gap-1 text-blue-600 hover:underline"},{default:A(()=>e[21]||(e[21]=[t("i",{class:"far fa-eye"},null,-1),r(" View ")])),_:2,__:[21]},1032,["to"])])]))),128))])])])):g("",!0),p==="manual_attendance"?(l(),o("div",Tt,[t("table",Et,[e[24]||(e[24]=t("thead",{class:"bg-gray-100 text-gray-700 text-xs uppercase"},[t("tr",null,[t("th",{class:"p-2"},"#"),t("th",{class:"p-2"},"Create Date"),t("th",{class:"p-2"},"Date"),t("th",{class:"p-2"},"Type"),t("th",{class:"p-2"},"Check In"),t("th",{class:"p-2"},"Check Out"),t("th",{class:"p-2"},"Status"),t("th",{class:"p-2"},"Action")])],-1)),t("tbody",null,[(l(!0),o(x,null,v(h,(a,c)=>(l(),o("tr",{key:`${p}-${c}`,class:"border-t hover:bg-gray-50 text-sm"},[t("td",Ut,s(c+=1),1),t("td",Rt,s(y(a.create_date)),1),t("td",jt,s(y(a.check_in||a.check_out)),1),t("td",Ft,s(a.application_types),1),t("td",Ot,s(k(a.check_in)||"N/A"),1),t("td",Gt,s(k(a.check_out)||"N/A"),1),t("td",It,s(a.status),1),t("td",Wt,[m(f,{to:{name:"ManualAttendanceShow",params:{id:a.id}},class:"inline-flex items-center gap-1 text-blue-600 hover:underline"},{default:A(()=>e[23]||(e[23]=[t("i",{class:"far fa-eye"},null,-1),r(" View ")])),_:2,__:[23]},1032,["to"])])]))),128))])])])):g("",!0)]))),128))])])}}};export{ee as default};
