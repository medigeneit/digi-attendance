import{M as $,r,m as c,D as d}from"./index-Buk37k2d.js";const S=$("todo",()=>{const u=r([]),v=r(null),l=r(!1),s=r(null),p=async()=>{var o,a;l.value=!0,s.value=null;try{const e=await d.get("/todos");u.value=e.data}catch(e){s.value=((a=(o=e.response)==null?void 0:o.data)==null?void 0:a.message)||"Todos load failed"}finally{l.value=!1}},i=async()=>{var o,a;l.value=!0,s.value=null;try{const e=await d.get("/my-todos");u.value=e.data}catch(e){s.value=((a=(o=e.response)==null?void 0:o.data)==null?void 0:a.message)||"Todos load failed"}finally{l.value=!1}},y=async o=>{var a,e;l.value=!0,s.value=null;try{const t=await d.get(`/todos/${o}`);v.value=t.data}catch(t){s.value=((e=(a=t.response)==null?void 0:a.data)==null?void 0:e.message)||"Todo load failed"}finally{l.value=!1}},T=async o=>{var a,e;l.value=!0,s.value=null;try{const t=await d.post("/todos",o);return u.value.push(t.data),t.data}catch(t){s.value=((e=(a=t.response)==null?void 0:a.data)==null?void 0:e.message)||"Todo create failed"}finally{l.value=!1}},g=async(o,a)=>{var e,t;l.value=!0,s.value=null;try{const n=await d.put(`/todos/${o}`,a),f=u.value.findIndex(w=>w.id===o);return f!==-1&&(u.value[f]=n.data),n.data}catch(n){s.value=((t=(e=n.response)==null?void 0:e.data)==null?void 0:t.message)||"Todo update failed"}finally{l.value=!1}},m=async(o,a)=>{var e,t;l.value=!0,s.value=null;try{await d.put(`/todos/status/${o}`,{status:a}),i()}catch(n){s.value=((t=(e=n.response)==null?void 0:e.data)==null?void 0:t.message)||"Failed to update todo status"}finally{l.value=!1}},h=async o=>{var a,e;l.value=!0,s.value=null;try{await d.delete(`/todos/${o}`),u.value=u.value.filter(t=>t.id!==o)}catch(t){s.value=((e=(a=t.response)==null?void 0:a.data)==null?void 0:e.message)||"Todo delete failed"}finally{l.value=!1}};return{todos:c(()=>u.value),todo:c(()=>v.value),loading:c(()=>l.value),error:c(()=>s.value),fetchTodos:p,fetchTodo:y,createTodo:T,updateTodo:g,deleteTodo:h,fetchMyTodos:i,updateTodoStatus:m}});export{S as u};
