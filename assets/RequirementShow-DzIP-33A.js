import{r as x,e as F,c as o,o as n,a as e,f as T,g as c,w as $,F as j,h as U,j as D,p as R,v as P,i as I,B as Ze,t as k,k as G,d as it,m as K,n as Q,y as J,x as V,N as lt,K as et,J as ot,b as at,u as dt,z as O}from"./index-BaOyklmU.js";import{L as z}from"./LoaderView-D8Vz0Msv.js";import{O as M}from"./OverlyModal-_Rdjxm_j.js";import{_ as ut}from"./ShareComponent-B7fNP22M.js";import{_ as H}from"./DescriptionView-VZNb8GBI.js";import{R as tt}from"./RequiredIcon-DdnWNjs8.js";import{f as Y,s as mt}from"./requirement-DA_kxdj7.js";import{a as pt,f as X,d as ct,u as vt,b as bt,_ as ft}from"./TaskAddForm-BMN0EOiH.js";import{u as xt}from"./department-DjIUisR4.js";import{S as st}from"./SelectDropdown-C35nhqyK.js";import{_ as W}from"./UserChip-Cr31vCoJ.js";import{u as nt}from"./user-DdRZ1ZH4.js";import{_ as yt}from"./TaskUserChip-DptGxbZq.js";import{u as gt}from"./useTaskStore-C_4TXOyu.js";import{_ as kt}from"./TaskSelectionInput-mIda6GNO.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./company-D4SKdFnR.js";import"./url-CePbr-gY.js";import"./CompanyDepartmentSelectInput-Bv3pgpVU.js";import"./SectionLoading-CQFO-voP.js";import"./TextWithHr-CQuQIi4Z.js";import"./TaskUrgencyInput-qfc8BT_q.js";const _t={class:"sticky top-0 pt-4 bg-white z-10"},wt={class:"mb-4"},ht={class:"block text-gray-600 text-sm mb-1 font-medium"},qt={class:"mb-4"},$t={class:"mb-4"},Ct={class:"mb-4"},Rt={class:"mb-4"},It={class:"sticky bottom-0 bg-white py-4 border-t -mx-6 px-6"},St={key:0,class:"mb-4 text-red-500 font-medium"},Tt={key:1,class:"mb-4"},Dt={class:"flex items-center justify-between gap-4"},Nt=["disabled"],At={__name:"RequirementDetailAddForm",props:{requirementId:{type:[Number,String],required:!0}},emits:["create","closeClick","error"],setup(b,{emit:N}){const y=b,f=N,l=xt(),_=x(),d=x(""),u=x(),p=x({title:"",description:"",priority:"",better_to_complete_on:"",supervisor_id:null}),a=x([]);async function v(){var t,r;d.value="submitting";const s={...p.value};console.log({payload:s});try{const C=await pt(y.requirementId,s);f("create",C),d.value="create"}catch(C){d.value="error",u.value=((r=(t=C.response)==null?void 0:t.data)==null?void 0:r.message)||"Failed to create requirement detail",f("error",u.value)}}return F(async()=>{var t;const s=((t=(await Y(y.requirementId)).data)==null?void 0:t.requirement)||{};a.value=await l.fetchDepartmentEmployee([s.from_department_id])}),(s,t)=>(n(),o("div",{class:"max-h-[90vh] overflow-auto w-full mx-auto bg-white shadow-lg rounded-lg p-6 pb-0 pt-0 relative",ref_key:"formContainerRef",ref:_},[e("div",_t,[t[7]||(t[7]=e("h2",{class:"text-2xl font-semibold text-gray-800"},"Add Requirement",-1)),t[8]||(t[8]=e("hr",{class:"mb-4"},null,-1)),e("div",{class:"text-purple-600/80 mb-4 text-xs border-b border-dashed",onClick:t[0]||(t[0]=$(r=>f("ok"),["prevent"]))}," Fields that must be filled in will be marked with an asterisk. ")]),e("form",{onSubmit:$(v,["prevent"]),class:"z-0"},[d.value!=="loading"?(n(),o(j,{key:0},[e("div",wt,[e("label",ht,[t[9]||(t[9]=D("Title ")),R(tt)]),U(e("input",{"onUpdate:modelValue":t[1]||(t[1]=r=>p.value.title=r),required:"",placeholder:"EnderRequirement detail title",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[P,p.value.title]])]),e("div",qt,[t[10]||(t[10]=e("label",{class:"block text-gray-600 text-sm mb-1 font-medium"},"Details",-1)),U(e("textarea",{rows:"10","onUpdate:modelValue":t[2]||(t[2]=r=>p.value.description=r),placeholder:"Enter requirement description",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[P,p.value.description]])]),e("div",$t,[t[12]||(t[12]=e("label",{class:"block text-gray-600 text-sm mb-1 font-medium"},"Supervisor",-1)),R(st,{modelValue:p.value.supervisor_id,"onUpdate:modelValue":t[3]||(t[3]=r=>p.value.supervisor_id=r),options:a.value,placeholder:"--NO SUPERVISOR--",containment:_.value,clearable:"",class:"h-10"},{"list-header":I(()=>t[11]||(t[11]=[e("div",{class:"px-3 pt-2 pb-1 shadow-md text-xs uppercase bg-gray-50 text-gray-500"}," Employees ",-1)])),option:I(({option:r})=>[R(W,{user:r||{},class:"pr-5 -mx-1"},null,8,["user"])]),"selected-option":I(({option:r})=>[r?(n(),T(W,{key:0,user:r||{},class:"pr-4"},null,8,["user"])):c("",!0)]),_:1},8,["modelValue","options","containment"])]),e("div",Ct,[t[14]||(t[14]=e("label",{class:"block text-gray-600 text-sm mb-1 font-medium"},"Priority ",-1)),U(e("select",{class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500","onUpdate:modelValue":t[4]||(t[4]=r=>p.value.priority=r)},t[13]||(t[13]=[e("option",{value:""},"NORMAL",-1),e("option",null,"IMPORTANT",-1),e("option",null,"URGENT",-1)]),512),[[Ze,p.value.priority]])]),e("div",Rt,[t[15]||(t[15]=e("label",{class:"block text-gray-600 text-sm mb-1 font-medium"},"Better to Complete ",-1)),U(e("input",{type:"date","onUpdate:modelValue":t[5]||(t[5]=r=>p.value.better_to_complete_on=r),placeholder:"EnderRequirement detail title",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[P,p.value.better_to_complete_on]])])],64)):c("",!0),e("div",It,[u.value?(n(),o("div",St,k(u.value),1)):c("",!0),u.value?(n(),o("hr",Tt)):c("",!0),e("div",Dt,[e("button",{type:"button",onClick:t[6]||(t[6]=$(r=>f("closeClick"),["prevent"])),class:"bg-gray-200 hover:bg-gray-300 text-gray-700 font-semibold px-5 py-2 rounded transition"}," Cancel "),e("button",{disabled:d.value=="loading"||d.value=="submitting",type:"submit",class:"bg-blue-500 hover:bg-blue-600 text-white font-semibold px-5 py-2 rounded transition"},k(d.value=="submitting"?"Saving...":"Add Requirement"),9,Nt)])])],32),d.value==="loading"||d.value==="submitting"?(n(),T(z,{key:0,class:"z-20 absolute inset-0 flex items-center justify-center bg-opacity-30"})):c("",!0)],512))}},Et={class:"max-h-[90vh] overflow-auto w-full mx-auto bg-white shadow-lg rounded-lg p-6 pb-0 pt-0 relative"},jt={class:"mb-4"},Ut={class:"font-semibold"},Pt={class:"mb-4"},Lt={class:"line-clamp-2"},Vt={key:1,class:"min-h-40"},Ft={class:"sticky bottom-0 bg-white py-4 border-t -mx-6 px-6"},Ot={key:0,class:"mb-4 text-red-500 font-medium"},Mt={key:1,class:"mb-4"},zt={class:"flex items-center justify-between gap-4"},Bt=["disabled"],Gt={__name:"RequirementDetailDeleteForm",props:{requirementId:{type:[Number,String],required:!0},detailId:{type:[Number,String],required:!0}},emits:["delete","closeClick","error"],setup(b,{emit:N}){const y=b,f=N,l=nt(),_=x(null),d=x(""),u=x(),p=x([]);async function a(){var v,s;d.value="submitting";try{const t=await ct(y.requirementId,y.detailId);f("delete",t),d.value="create"}catch(t){d.value="error",u.value=((s=(v=t.response)==null?void 0:v.data)==null?void 0:s.message)||"Failed to update requirement detail: "+t,f("error",u.value)}}return F(async()=>{var v,s,t;d.value="loading";try{p.value=await l.fetchDepartmentWiseEmployees(),_.value=(v=(await X(y.requirementId,y.detailId)).data)==null?void 0:v.detail}catch(r){u.value=((t=(s=r.response)==null?void 0:s.data)==null?void 0:t.message)||"Failed to fetch requirement detail"}finally{d.value=""}}),(v,s)=>{var t,r;return n(),o("div",Et,[s[4]||(s[4]=e("div",{class:"sticky top-0 -mx-6 px-6 z-10 bg-gray-50"},[e("h2",{class:"text-xl font-semibold text-gray-800 py-2"},"Delete Requirement Details"),e("hr",{class:"mb-4 -mx-6"})],-1)),e("form",{onSubmit:$(a,["prevent"]),class:"z-0"},[d.value!=="loading"?(n(),o(j,{key:0},[e("div",jt,[s[1]||(s[1]=e("div",{class:"block text-gray-600 text-sm mb-1 font-medium"},"Title",-1)),e("div",Ut,k((t=_.value)==null?void 0:t.title),1)]),e("div",Pt,[s[2]||(s[2]=e("div",{class:"block text-gray-600 text-sm mb-1 font-medium"},"Description",-1)),e("div",Lt,k((r=_.value)==null?void 0:r.description),1)]),s[3]||(s[3]=e("div",{class:"my-8 text-center text-xl text-red-600"},"Are you sure want to delete?",-1))],64)):(n(),o("div",Vt)),e("div",Ft,[u.value?(n(),o("div",Ot,k(u.value),1)):c("",!0),u.value?(n(),o("hr",Mt)):c("",!0),e("div",zt,[e("button",{type:"button",onClick:s[0]||(s[0]=$(C=>f("closeClick"),["prevent"])),class:"bg-gray-200 hover:bg-gray-300 text-gray-700 font-semibold px-5 py-2 rounded transition"}," Cancel "),e("button",{disabled:d.value=="loading"||d.value=="submitting",type:"submit",class:"bg-red-700 hover:bg-red-500 text-white font-semibold px-5 py-2 rounded transition"},k(d.value=="submitting"?"Deleting...":"Delete"),9,Bt)])])],32),d.value==="loading"||d.value==="submitting"?(n(),T(z,{key:0,class:"z-20 absolute inset-0 flex items-center justify-center bg-opacity-30"})):c("",!0)])}}},Ht={class:"sticky top-0 pt-4 bg-white z-10"},Wt={class:"mb-4"},Kt={class:"block text-gray-600 text-sm mb-1 font-medium"},Qt={class:"mb-4"},Jt={class:"mb-4"},Yt={key:0,class:"relative w-full"},Xt={key:0,class:"absolute right-1 text-xl top-0 bottom-0 flex items-center"},Zt={class:"mb-4"},es={class:"mb-4"},ts={class:"sticky bottom-0 bg-white py-4 border-t -mx-6 px-6"},ss={key:0,class:"mb-4 text-red-500 font-medium"},ns={key:1,class:"mb-4"},rs={class:"flex items-center justify-between gap-4"},is=["disabled"],ls={__name:"RequirementDetailEditForm",props:{requirementId:{type:[Number,String],required:!0},detailId:{type:[Number,String],required:!0}},emits:["update","closeClick","error"],setup(b,{emit:N}){const y=b,f=N,l=x(),_=nt(),d=x(null),u=x(""),p=x(),a=x({title:"",description:"",priority:"",better_to_complete_on:"",supervisor_id:null}),v=x([]);async function s(){var r,C;u.value="submitting";const t={...a.value};try{const g=await vt(y.requirementId,y.detailId,t);f("update",g),u.value="create"}catch(g){u.value="error",p.value=((C=(r=g.response)==null?void 0:r.data)==null?void 0:C.message)||"Failed to update requirement detail",f("error",p.value)}}return F(async()=>{var t,r,C,g,A,E,m;u.value="loading";try{v.value=await _.fetchDepartmentWiseEmployees(),await _.fetchTypeWiseEmployees({type:"academy_body,doctor,executive"}),d.value=(t=(await X(y.requirementId,y.detailId)).data)==null?void 0:t.detail,a.value={title:(r=d.value)==null?void 0:r.title,description:(C=d.value)==null?void 0:C.description,priority:(g=d.value)==null?void 0:g.priority,supervisor_id:(A=d.value)==null?void 0:A.supervisor_id};const w=new Date(d.value.better_to_complete_on);a.value.better_to_complete_on=w.toISOString().split("T")[0]}catch(w){p.value=((m=(E=w.response)==null?void 0:E.data)==null?void 0:m.message)||"Failed to fetch requirement detail"}finally{u.value=""}}),(t,r)=>{var C;return n(),o("div",{ref_key:"formContainerRef",ref:l,class:"max-h-[90vh] w-full mx-auto overflow-auto bg-white shadow-lg rounded-lg p-6 pb-0 pt-0 relative"},[e("div",Ht,[r[8]||(r[8]=e("h2",{class:"text-2xl font-semibold text-gray-800"},"Edit Requirement",-1)),r[9]||(r[9]=e("hr",{class:"mb-4"},null,-1)),e("div",{class:"text-purple-600/80 mb-4 text-xs border-b border-dashed",onClick:r[0]||(r[0]=$(g=>f("ok"),["prevent"]))}," Fields that must be filled in will be marked with an asterisk. ")]),e("form",{onSubmit:$(s,["prevent"]),class:"z-0"},[u.value!=="loading"?(n(),o(j,{key:0},[e("div",Wt,[e("label",Kt,[r[10]||(r[10]=D("Title ")),R(tt)]),U(e("input",{"onUpdate:modelValue":r[1]||(r[1]=g=>a.value.title=g),required:"",placeholder:"EnderRequirement detail title",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[P,a.value.title]])]),e("div",Qt,[r[11]||(r[11]=e("label",{class:"block text-gray-600 text-sm mb-1 font-medium"},"Description",-1)),U(e("textarea",{rows:"10","onUpdate:modelValue":r[2]||(r[2]=g=>a.value.description=g),placeholder:"Enter requirement description",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[P,a.value.description]])]),e("div",Jt,[r[12]||(r[12]=e("label",{class:"block text-gray-600 text-sm mb-1 font-medium"},"Supervisor",-1)),R(st,{modelValue:a.value.supervisor_id,"onUpdate:modelValue":r[4]||(r[4]=g=>a.value.supervisor_id=g),options:[...G(_).users||[],...(G(_).users||[]).find(g=>{var A,E;return g.id==((E=(A=d.value)==null?void 0:A.supervisor)==null?void 0:E.id)})?[]:[(C=d.value)==null?void 0:C.supervisor]],containment:l.value,placeholder:"--NO SUPERVISOR--",class:"h-10"},{option:I(({option:g})=>[R(W,{user:g||{}},null,8,["user"])]),"selected-option":I(({option:g})=>[g?(n(),o("div",Yt,[R(W,{user:g||{}},null,8,["user"]),a.value.supervisor_id?(n(),o("div",Xt,[e("button",{onClick:r[3]||(r[3]=$(A=>a.value.supervisor_id=null,["prevent"])),class:"text-gray-6 font-semibold 00 hover:text-red-700"}," × ")])):c("",!0)])):c("",!0)]),_:1},8,["modelValue","options","containment"])]),e("div",Zt,[r[14]||(r[14]=e("label",{class:"block text-gray-600 text-sm mb-1 font-medium"},"Priority ",-1)),U(e("select",{class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500","onUpdate:modelValue":r[5]||(r[5]=g=>a.value.priority=g)},r[13]||(r[13]=[e("option",{value:null},"NORMAL",-1),e("option",null,"IMPORTANT",-1),e("option",null,"URGENT",-1)]),512),[[Ze,a.value.priority]])]),e("div",es,[r[15]||(r[15]=e("label",{class:"block text-gray-600 text-sm mb-1 font-medium"},"Better to Complete ",-1)),U(e("input",{type:"date","onUpdate:modelValue":r[6]||(r[6]=g=>a.value.better_to_complete_on=g),placeholder:"EnderRequirement detail title",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[P,a.value.better_to_complete_on]])])],64)):c("",!0),e("div",ts,[p.value?(n(),o("div",ss,k(p.value),1)):c("",!0),p.value?(n(),o("hr",ns)):c("",!0),e("div",rs,[e("button",{type:"button",onClick:r[7]||(r[7]=$(g=>f("closeClick"),["prevent"])),class:"btn-3"},"Cancel"),e("button",{disabled:u.value=="loading"||u.value=="submitting",type:"submit",class:"btn-2"},k(u.value=="submitting"?"Saving...":"Edit"),9,is)])])],32),u.value==="loading"||u.value==="submitting"?(n(),T(z,{key:0,class:"z-20 absolute inset-0 flex items-center justify-center bg-opacity-30"})):c("",!0)],512)}}},os=["rowspan"],as={class:"text-2xl font-medium"},ds=["rowspan"],us={class:"text-lg font-semibold mb-2 flex items-start gap-3"},ms={key:0},ps={key:0,class:"mb-5"},cs=["innerHTML"],vs={class:"flex items-end"},bs={key:0,class:"mt-4 flex justify-between items-end print:pb-0"},fs={class:""},xs={key:1,class:"ml-auto flex gap-6 items-center"},ys=["rowspan"],gs={class:"text-center print:text-xs"},ks={class:"border-2 border-gray-700 p-3 text-center"},_s=["title"],ws={class:"border-2 border-gray-700 p-3"},hs={class:"whitespace-nowrap text-center print:whitespace-break-spaces"},qs={key:0,class:"print:text-xs"},$s={key:1,class:"text-gray-500"},Cs={key:0,colspan:"2",class:"border-2 border-gray-700 p-3 text-center"},Rs={key:1,class:"text-red-400"},Is={key:2,class:"text-blue-400"},Ss={key:0},Ts={colspan:"2",class:"border-2 border-gray-700 p-3 text-center"},Ds={key:1,class:"text-red-400"},Ns={key:2,class:"text-blue-400"},As={__name:"RequirementDetailTableRow",props:{detail:{type:Object},requirement:{type:Object},serial:{type:Number},isPrinting:{type:Boolean}},emits:["editClick","deleteClick","taskCreateClick"],setup(b,{emit:N}){const y=b,f=N,l=it(),_=x(""),d=K(()=>{var p,a,v;return((a=(p=y.detail)==null?void 0:p.tasks)==null?void 0:a.length)>0?(v=y.detail)==null?void 0:v.tasks:[{id:0}]});function u(){var p,a,v,s,t;if(l.user.role!=="super_admin"&&((p=l.user)==null?void 0:p.id)!==((v=(a=y.requirement)==null?void 0:a.to_department)==null?void 0:v.incharge_id))return alert(`You can't create or assign task for this requirement. 
Only ${(t=(s=y.requirement)==null?void 0:s.to_department)==null?void 0:t.name}'s In charge can create or assign.`);f("taskCreateClick",y.detail)}return(p,a)=>{const v=Q("RouterLink");return n(),o(j,null,[(n(!0),o(j,null,J(d.value,(s,t)=>{var r,C,g,A,E,m,w,S,q;return n(),o("tr",{key:s.id,class:"group/item border text-gray-800 py-4 shadow-sm mb-4 px-4 rounded-md hover:bg-blue-50"},[t===0?(n(),o(j,{key:0},[e("td",{class:"border-2 border-gray-700 p-3 align-top",rowspan:(((C=(r=b.detail)==null?void 0:r.tasks)==null?void 0:C.length)||1)+(b.isPrinting?0:1)},[e("span",as,k(b.serial),1)],8,os),e("td",{class:"border-2 border-gray-700 p-3",rowspan:(((A=(g=b.detail)==null?void 0:g.tasks)==null?void 0:A.length)||1)+(b.isPrinting?0:1)},[e("div",null,[e("div",us,[R(H,{"line-clamp":"3",class:"grow"},{default:I(()=>[D(k(b.detail.title),1)]),btnText:I(({lineClampClass:i})=>[D(k(i?"More":"Less"),1)]),_:1}),b.detail.priority?(n(),o("div",ms,[e("span",{class:V(["font-semibold text-sm",{"text-yellow-600 ":b.detail.priority=="IMPORTANT","text-red-700 ":b.detail.priority=="URGENT"}])},k(b.detail.priority),3)])):c("",!0)]),a[3]||(a[3]=e("hr",{class:"mb-4 -mx-4"},null,-1)),b.detail.description?(n(),o("div",ps,[a[2]||(a[2]=e("div",{class:"text-gray-400 mr-2 text-xs uppercase font-semibold"},"Description",-1)),R(H,{"line-clamp":4,"class-name":{button:"group-hover/item:underline"}},{default:I(()=>[e("p",{innerHTML:b.detail.description,class:"text-justify"},null,8,cs)]),_:1})])):c("",!0)]),e("div",vs,[b.detail.supervisor?(n(),o("div",bs,[e("div",fs,[a[4]||(a[4]=e("div",{class:"text-gray-400 mr-2 text-xs uppercase font-semibold"},"Supervisor:",-1)),R(yt,{user:b.detail.supervisor},null,8,["user"])])])):c("",!0),_.value!="loading"&&!((E=b.requirement)!=null&&E.status)||((w=(m=G(l))==null?void 0:m.user)==null?void 0:w.role)=="super_admin"?(n(),o("div",xs,[e("button",{class:"btn-2",onClick:a[0]||(a[0]=$(i=>f("editClick",b.detail),["prevent"]))},a[5]||(a[5]=[e("i",{class:"fas fa-edit"},null,-1),D("Edit ")])),e("button",{class:"btn-2-red",onClick:a[1]||(a[1]=$(i=>f("deleteClick",b.detail),["prevent"]))},a[6]||(a[6]=[e("i",{class:"fas fa-trash-alt"},null,-1),D("Delete ")]))])):c("",!0)])],8,ds),e("td",{class:"border-2 border-gray-700 p-3 whitespace-nowrap print:whitespace-break-spaces print:px-0",rowspan:(((q=(S=b.detail)==null?void 0:S.tasks)==null?void 0:q.length)||1)+(b.isPrinting?0:1)},[e("div",gs,k(new Date(b.detail.better_to_complete_on).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",weekday:"short"})),1)],8,ys)],64)):c("",!0),s.id?(n(),o(j,{key:1},[e("td",ks,[R(v,{title:s.title,to:{name:"RequirementTaskShow",params:{id:s.id}},class:"hover:underline text-gray-900 hover:text-blue-600 whitespace-nowrap block",target:"_blank"},{default:I(()=>[D(k(s.id)+" ",1),e("i",{title:s.status,class:V(["ml-1",{"fad fa-exclamation-circle text-red-600":s.status=="PENDING","fad fa-exclamation-square text-yellow-600":s.status=="IN_PROGRESS","fad fa-check-circle text-green-600":s.status=="COMPLETED"}])},null,10,_s)]),_:2},1032,["title","to"])]),e("td",ws,[e("div",hs,[s.deadline?(n(),o("div",qs,k(new Date(s.deadline).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",weekday:"short"})),1)):(n(),o("div",$s,"-"))])])],64)):(n(),o(j,{key:2},[b.isPrinting?(n(),o("td",Cs,[b.requirement.status=="approved"?(n(),o("button",{key:0,onClick:$(u,["prevent"]),class:"print:hidden border-2 border-transparent group-hover/item:bg-blue-200 hover:border-blue-700 text-blue-500 hover:text-white hover:!bg-blue-500 rounded-md px-4 py-1 whitespace-nowrap"},a[7]||(a[7]=[e("i",{class:"fas fa-plus-circle"},null,-1),D(" Create / Assign Task ")]))):b.requirement.status=="rejected"?(n(),o("div",Rs,"Task Rejected")):(n(),o("div",Is,"Approval Pending"))])):c("",!0)],64))])}),128)),b.isPrinting?c("",!0):(n(),o("tr",Ss,[e("td",Ts,[b.requirement.status=="approved"?(n(),o("button",{key:0,onClick:$(u,["prevent"]),class:"print:hidden border-2 border-transparent group-hover/item:bg-blue-200 hover:border-blue-700 text-blue-500 hover:text-white hover:!bg-blue-500 rounded-md px-4 py-1 whitespace-nowrap"},a[8]||(a[8]=[e("i",{class:"fas fa-plus-circle"},null,-1),D(" Create / Assign Task ")]))):b.requirement.status=="rejected"?(n(),o("div",Ds,"Task Rejected")):(n(),o("div",Ns,"Approval Pending"))])]))],64)}}},Es={class:"sticky top-0 pt-4 bg-white z-10"},js={class:"mb-4"},Us={class:"mb-4"},Ps={class:"sticky bottom-0 bg-white py-4 border-t -mx-6 px-6"},Ls={key:0,class:"mb-4 text-red-500 font-medium"},Vs={key:1,class:"mb-4"},Fs={class:"flex items-center justify-between gap-4"},Os=["disabled"],Ms={__name:"RequirementFeedbackEditForm",props:{requirementId:{type:[Number,String],required:!0},detailId:{type:[Number,String],required:!0}},emits:["update","closeClick","error"],setup(b,{emit:N}){const y=b,f=N,l=x(),_=x(null),d=x(""),u=x(),p=x({feedback:""});async function a(){var v,s;d.value="submitting";try{const t=await bt(y.requirementId,y.detailId,p.value.feedback);f("update",t),d.value="create"}catch(t){d.value="error",u.value=((s=(v=t.response)==null?void 0:v.data)==null?void 0:s.message)||"Failed to update requirement detail",f("error",u.value)}}return F(async()=>{var v,s,t,r;d.value="loading";try{await Y(y.requirementId),_.value=(v=(await X(y.requirementId,y.detailId)).data)==null?void 0:v.detail,p.value={feedback:(s=_.value)==null?void 0:s.feedback}}catch(C){u.value=((r=(t=C.response)==null?void 0:t.data)==null?void 0:r.message)||"Failed to fetch requirement detail"}finally{d.value=""}}),(v,s)=>{var t;return n(),o("div",{ref_key:"formContainerRef",ref:l,class:"max-h-[90vh] w-full mx-auto overflow-auto bg-white shadow-lg rounded-lg p-6 pb-0 pt-0 relative"},[e("div",Es,[s[3]||(s[3]=e("h2",{class:"text-2xl font-semibold text-gray-800"},"Requirement Feedback",-1)),s[4]||(s[4]=e("hr",{class:"mb-4"},null,-1)),e("div",{class:"text-purple-600/80 mb-4 text-xs border-b border-dashed",onClick:s[0]||(s[0]=$(r=>f("ok"),["prevent"]))}," Fields that must be filled in will be marked with an asterisk. ")]),e("form",{onSubmit:$(a,["prevent"]),class:"z-0"},[d.value!=="loading"?(n(),o(j,{key:0},[e("div",js,[s[5]||(s[5]=e("label",{class:"block text-gray-600 text-sm font-medium"},"Title ",-1)),R(H,{"line-clamp":"1",className:{paragraph:"whitespace-pre-wrap text-justify ",button:"mt-0"}},{default:I(()=>{var r;return[D(k((r=_.value)==null?void 0:r.title),1)]}),_:1})]),e("div",Us,[s[6]||(s[6]=e("label",{class:"block text-gray-600 text-sm mb-1 font-medium"},"Feedback",-1)),U(e("textarea",{rows:"5","onUpdate:modelValue":s[1]||(s[1]=r=>p.value.feedback=r),placeholder:"Enter requirement feedback",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[P,p.value.feedback]])])],64)):c("",!0),e("div",Ps,[u.value?(n(),o("div",Ls,k(u.value),1)):c("",!0),u.value?(n(),o("hr",Vs)):c("",!0),e("div",Fs,[e("button",{type:"button",onClick:s[2]||(s[2]=$(r=>f("closeClick"),["prevent"])),class:"btn-3"},"Cancel"),e("button",{disabled:d.value=="loading"||d.value=="submitting",type:"submit",class:"btn-2"},k(d.value=="submitting"?"Saving...":(t=_.value)!=null&&t.feedback?"Update Feedback":"Add Feedback"),9,Os)])])],32),d.value==="loading"||d.value==="submitting"?(n(),T(z,{key:0,class:"z-20 absolute inset-0 flex items-center justify-center bg-opacity-30"})):c("",!0)],512)}}},zs={class:"flex justify-center items-center"},Bs={class:"modal-card"},Gs=["required"],Hs={class:"flex"},Ws={class:"flex justify-between gap-2 mt-4"},Ks=["disabled"],Qs=["disabled"],Js={__name:"RequirementSubmissionHandler",props:{requirementId:{type:[String,Number],required:!0}},emits:["loading","success","error"],setup(b,{emit:N}){const y=b,f=N,l=x(255),_=K(()=>l.value-v.value.length),d=lt(),u=x(null),p=x(null),a=x(null),v=x(""),s=x(!1),t=K(()=>a.value!==null);function r(m){a.value=m,v.value="",E()}function C(){a.value=null,v.value=""}async function g(){var m,w;if(a.value==="reject"&&!v.value)return d.error("Rejection Reason is required!");if(typeof y.onSubmit=="function")return y.onSubmit({note:v.value,action:a.value});f("loading",!0),s.value=!0;try{await mt(y.requirementId,{note:v.value}),f("success"),C()}catch(S){return f("error",S),d.error(((w=(m=S==null?void 0:S.response)==null?void 0:m.data)==null?void 0:w.message)||"Submission failed!")}finally{f("loading",!1),s.value=!1}}function A(m){var w,S;t.value&&(m.key==="ArrowLeft"?(w=p.value)==null||w.focus():m.key==="ArrowRight"&&((S=u.value)==null||S.focus()))}function E(){ot(()=>{var m;(m=u.value)==null||m.focus()})}return F(()=>{window.addEventListener("keydown",A)}),et(()=>{window.removeEventListener("keydown",A)}),(m,w)=>(n(),o("div",null,[e("div",zs,[e("button",{onClick:w[0]||(w[0]=S=>r("accept"))},w[3]||(w[3]=[e("span",{class:"btn-2"},[e("span",{class:"fas fa-paper-plane"}),e("span",{class:"hidden md:inline"},"Submit Requirement")],-1)]))]),t.value?(n(),o("div",{key:0,class:"fixed inset-0 z-50 flex justify-center items-center bg-black/50",onClick:$(C,["self"])},[e("div",Bs,[w[4]||(w[4]=e("h3",{class:"title-lg"},"Requirement Submission",-1)),e("div",null,[U(e("textarea",{"onUpdate:modelValue":w[1]||(w[1]=S=>v.value=S),rows:"4",placeholder:"Note...",class:"w-full border rounded-lg p-2 text-gray-700",required:a.value==="reject",onInput:w[2]||(w[2]=S=>v.value.length>l.value?v.value=v.value.slice(0,l.value):null)},null,40,Gs),[[P,v.value]]),e("div",Hs,[e("div",{class:V(["ml-auto inline-block text-sm text-gray-500",v.value.length>=l.value?"text-red-500":""])}," left "+k(_.value)+"/"+k(l.value)+" words ",3)])]),e("div",Ws,[e("button",{ref_key:"cancelBtnRef",ref:p,class:"btn-3 focus:ring-2 ring-offset-2 disabled:opacity-30",onClick:C,disabled:s.value}," Cancel ",8,Ks),e("button",{ref_key:"confirmBtnRef",ref:u,class:V(["focus:ring-2 ring-offset-2 disabled:opacity-30",a.value==="reject"?"btn-2-red":"btn-2-green"]),onClick:g,disabled:s.value}," Confirm Submission ",10,Qs)])])])):c("",!0)]))}},Ys={class:"flex items-center gap-6 justify-center my-16"},Xs={key:0,class:"border rounded-md"},Zs={__name:"RequirementTaskCreateOrAssign",props:{fromDepartmentId:{type:Number},requirementDetail:{type:Object}},emits:["addNewTaskClick","cancelClick","assignTask"],setup(b,{emit:N}){const y=b,f=N,l=gt(),_=x(""),d=x(null),u=x(""),p=x(!1);async function a(){await l.setTaskRequirement(u.value,y.requirementDetail.id),f("assignTask")}return(v,s)=>(n(),o("div",{class:V(["text-left p-4",[_.value&&!d.value?"min-h-[400px]":""]])},[e("div",Ys,[e("button",{onClick:s[0]||(s[0]=$(t=>f("addNewTaskClick"),["prevent"])),class:"btn-3"},"Add New Task"),s[5]||(s[5]=e("span",null,"or",-1)),e("button",{class:V({"btn-3":_.value!=="direct-assign","btn-2":_.value=="direct-assign"}),onClick:s[1]||(s[1]=$(()=>_.value="direct-assign",["prevent"]))}," Assign Task ",2)]),_.value&&!d.value?(n(),o("div",Xs,[e("form",{onSubmit:$(a,["prevent"]),class:"p-4 flex items-end"},[R(kt,{class:"flex-grow mr-4 h-12",taskId:u.value,"onUpdate:taskId":s[2]||(s[2]=t=>u.value=t),show:p.value,"onUpdate:show":s[3]||(s[3]=t=>p.value=t),isOnlyMyTask:!1,taskQueryParams:{"from-department-id":b.fromDepartmentId},filterTasks:t=>!t.requirement_detail_id,onAddNewTaskClick:s[4]||(s[4]=t=>f("addNewTaskClick"))},null,8,["taskId","show","taskQueryParams","filterTasks"]),s[6]||(s[6]=e("div",{class:"flex justify-center"},[e("button",{class:"btn-2 h-12 rounded-md"},"Save")],-1))],32)])):c("",!0)],2))}},en={class:"container mx-auto p-6 print:p-0 w-full print:max-w-full"},tn={class:"bg-white rounded shadow print:shadow-none p-4 print:p-0 relative mb-6 print:mb-0"},sn={class:"flex items-start"},nn={class:"mb-4 text-lg print:black print:font-bold"},rn={class:"ml-auto print:hidden flex gap-2 items-center"},ln={class:"mb-4 flex items-center gap-1 print:mb-1"},on={class:"font-bold print:text-gray-900"},an={class:"mb-3 flex items-center gap-3 print:mb-1"},dn={class:"print:text-gray-900"},un={key:0,class:"mb-3 flex items-center gap-3 print:mb-1"},mn={class:"flex items-center gap-2 print:text-gray-900 flex-wrap"},pn={key:1,class:"mb-3 flex items-center gap-3 print:mb-1"},cn={class:"print:text-gray-900"},vn={key:0,class:"overflow-x-auto print:overflow-visible"},bn={class:"w-full table-auto print:table-fixed"},fn={colspan:"2",class:"w-[30%] border-2 border-gray-800 text-center text-gray-800 print:text-black text-base font-semibold whitespace-nowrap px-3 py-1 print:whitespace-normal"},xn={class:""},yn={class:"p-3 border-2 border-gray-800",colspan:"5"},gn={class:"font-semibold text-gray-500 print:text-gray-800 text-sm mb-1"},kn={key:0},_n=["innerHTML"],wn=["onClick"],hn={key:1,class:"mt-8 border rounded-md p-8 flex items-start justify-between bg-gray-50 print:hidden"},qn={class:"flex flex-col items-end"},$n={class:"mt-12 mb-8"},Cn={class:"whitespace-nowrap border-gray-200 grid grid-cols-2 mb-10 items-center"},Rn={class:"flex flex-col items-center gax-x-1 justify-between"},In={class:"text-base text-gray-900 font-semibold"},Sn={key:1},Tn={class:"flex flex-col items-center gax-x-1 justify-between"},Dn={class:"text-base text-gray-900 font-semibold"},Nn={key:1},An={key:0,class:"text-xs text-red-300"},En={key:1,class:"italic text-sm text-gray-400"},jn={class:"whitespace-nowrap border-gray-200 grid grid-cols-2 gap-2 items-center"},Un={class:"flex flex-col items-center gax-x-1 justify-between"},Pn={class:"text-base text-gray-900 font-semibold"},Ln={key:1},Vn={class:"flex flex-col items-center gax-x-1 justify-between"},Fn={class:"text-base text-gray-900 font-semibold"},On={key:1},Mn={key:0,class:"text-xs text-red-300"},zn={key:1,class:"italic text-xs text-gray-400"},Bn={key:2,class:"mt-2 text-right print:hidden"},cr={__name:"RequirementShow",setup(b){const N=at(),y=dt(),f=x(""),l=x(null),_=O({open:!1}),d=O({detail:null,open:!1}),u=O({detail:null,open:!1}),p=O({detail:null,open:!1}),a=x(!1),v=()=>a.value=!0,s=()=>a.value=!1;F(async()=>{await t(),window.addEventListener("beforeprint",v),window.addEventListener("afterprint",s)}),et(()=>{window.removeEventListener("beforeprint",v),window.removeEventListener("afterprint",s)});async function t(){var q;f.value="loading",l.value=(q=(await Y(N.params.id)).data)==null?void 0:q.requirement,f.value=""}function r(q){console.log({detail:q}),m.modalShown=!0,m.from_department_id=l.value.from_department_id,m.to_department_id=l.value.to_department_id,m.taskDefaultValues={title:"",description:"",from_department_id:l.value.from_department_id,to_department_id:l.value.to_department_id,is_important:(q==null?void 0:q.priority)=="IMPORTANT",is_urgent:(q==null?void 0:q.priority)=="URGENT",supervisor_ids:q!=null&&q.supervisor_id?[q==null?void 0:q.supervisor_id]:[]},m.requirementDetail=q}function C(){_.open=!0}function g(q){d.open=!0,d.detail=q}function A(q){p.open=!0,p.detail=q}function E(){setTimeout(()=>window.print()),a.value=!0}const m=O({parentId:null,modalShown:!1,requirementId:0,taskDefaultValues:{},requirementDetail:null,creating:!1});async function w(){m.parentId=0,m.parentId=null,m.modalShown=!1,m.requirementDetail=null,f.value="loading",await t()}async function S(){m.parentId=null,m.modalShown=!1,m.requirementDetail=null,m.creating=!1}return(q,i)=>{var Z,ee,te,se,ne,re,ie,le,oe,ae,de,ue,me,pe,ce,ve,be,fe,xe,ye,ge,ke,_e,we,he,qe,$e,Ce,Re,Ie,Se,Te,De,Ne,Ae,Ee,je,Ue,Pe,Le,Ve,Fe,Oe,Me,ze,Be,Ge,He,We,Ke,Qe;const rt=Q("RouterLink"),B=Q("UserChip");return n(),o("div",en,[_.open?(n(),T(M,{key:0,class:"*:max-w-4xl"},{default:I(()=>[R(At,{requirementId:l.value.id,onCloseClick:i[0]||(i[0]=h=>_.open=!1),onCreate:i[1]||(i[1]=async()=>{_.open=!1,await t()})},null,8,["requirementId"])]),_:1})):c("",!0),d.open?(n(),T(M,{key:1},{default:I(()=>{var h;return[R(ls,{requirementId:l.value.id,detailId:(h=d.detail)==null?void 0:h.id,onCloseClick:i[2]||(i[2]=L=>d.open=!1),onUpdate:i[3]||(i[3]=async()=>{d.open=!1,await t()})},null,8,["requirementId","detailId"])]}),_:1})):c("",!0),u.open?(n(),T(M,{key:2},{default:I(()=>{var h;return[R(Ms,{requirementId:l.value.id,detailId:(h=u.detail)==null?void 0:h.id,onCloseClick:i[4]||(i[4]=L=>u.open=!1),onUpdate:i[5]||(i[5]=async()=>{u.open=!1,await t()})},null,8,["requirementId","detailId"])]}),_:1})):c("",!0),p.open?(n(),T(M,{key:3},{default:I(()=>{var h;return[R(Gt,{requirementId:l.value.id,detailId:(h=p.detail)==null?void 0:h.id,onCloseClick:i[6]||(i[6]=L=>p.open=!1),onDelete:i[7]||(i[7]=async()=>{p.open=!1,await t()})},null,8,["requirementId","detailId"])]}),_:1})):c("",!0),m.modalShown?(n(),T(M,{key:4,class:"*:relative"},{default:I(()=>{var h,L;return[e("button",{onClick:$(S,["prevent"]),class:"absolute right-3 top-2 text-xl text-red-500 hover:text-red-400"},i[10]||(i[10]=[e("i",{class:"fas fa-times-circle"},null,-1)])),m!=null&&m.creating?c("",!0):(n(),T(Zs,{key:0,"from-department-id":(h=l.value)==null?void 0:h.from_department_id,requirementDetail:m==null?void 0:m.requirementDetail,onCancelClick:S,onAddNewTaskClick:i[8]||(i[8]=()=>{m.modalShown=!0,m.creating=!0}),onAssignTask:w},null,8,["from-department-id","requirementDetail"])),m!=null&&m.creating?(n(),T(ft,{key:1,requirementDetailId:(L=m==null?void 0:m.requirementDetail)==null?void 0:L.id,requirementId:l.value.id,onClose:S,onTaskCreated:w,defaultValues:m.taskDefaultValues,readonlyFields:{from_department_id:!0,to_department_id:!0}},null,8,["requirementDetailId","requirementId","defaultValues"])):c("",!0)]}),_:1})):c("",!0),e("div",tn,[e("div",sn,[e("div",nn,[i[11]||(i[11]=e("div",{class:"text-gray-800 leading-none"},"To",-1)),e("div",null,k((ee=(Z=l.value)==null?void 0:Z.to_department)==null?void 0:ee.name),1)]),e("div",rn,[(((te=l.value)==null?void 0:te.details)||[]).length>0?(n(),o("button",{key:0,class:"btn-3 font-semibold !pl-2 !pr-4",onClick:$(E,["prevent"])},i[12]||(i[12]=[e("i",{class:"fad fa-print text-xl"},null,-1),D("Print ")]))):c("",!0),e("button",{class:"btn-3",onClick:i[9]||(i[9]=$(()=>G(y).back(),["prevent"]))},"Back"),R(rt,{class:"btn-2",to:`/requirements/edit/${(se=l.value)==null?void 0:se.id}`},{default:I(()=>i[13]||(i[13]=[D("Edit")])),_:1,__:[13]},8,["to"])])]),i[34]||(i[34]=e("div",{class:"text-center text-xl font-bold mb-2 underline"},"Requirement Form",-1)),e("div",ln,[i[14]||(i[14]=e("div",{class:"text-gray-500 text-sm"},"Requirement ID:",-1)),e("div",on,k((ne=l.value)==null?void 0:ne.id),1)]),e("div",an,[i[15]||(i[15]=e("div",{class:"text-gray-500 text-sm"},"From",-1)),e("div",dn,k((ie=(re=l.value)==null?void 0:re.from_department)==null?void 0:ie.name),1)]),((oe=(le=l.value)==null?void 0:le.website_tags)==null?void 0:oe.length)>0?(n(),o("div",un,[i[16]||(i[16]=e("div",{class:"text-gray-500 text-sm"},"Website",-1)),e("div",mn,[(n(!0),o(j,null,J(((ae=l.value)==null?void 0:ae.website_tags)||[],h=>(n(),o("div",{key:h.id,class:"border px-2 rounded-md bg-gray-50 shadow-sm whitespace-nowrap"},k(h.name),1))),128))])])):c("",!0),(de=l.value)!=null&&de.submission_date?(n(),o("div",pn,[i[17]||(i[17]=e("div",{class:"text-gray-500 text-sm"},"Submission Date",-1)),e("div",cn,k(new Date((ue=l.value)==null?void 0:ue.submission_date).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})),1)])):c("",!0),i[35]||(i[35]=e("hr",{class:"mb-4"},null,-1)),e("div",null,[i[33]||(i[33]=e("div",{class:"flex items-end mb-3"},[e("h2",{class:"text-xl font-semibold"},"Requirements"),e("div",{class:"ml-auto print:hidden flex gap-2 text-sm"})],-1)),(((me=l.value)==null?void 0:me.details)||[]).length>0?(n(),o("div",vn,[e("table",bn,[e("thead",null,[e("tr",null,[i[18]||(i[18]=e("th",{rowspan:"2",class:"border-2 border-gray-800 text-left px-4 print:px-2 text-gray-800 print:text-black text-xl font-semibold whitespace-nowrap w-[8%]"}," SL ",-1)),i[19]||(i[19]=e("th",{rowspan:"2",class:"border-2 border-gray-800 text-center text-gray-800 print:text-black text-base font-semibold whitespace-nowrap print:whitespace-normal w-[65%]"}," Requirement Details ",-1)),i[20]||(i[20]=e("th",{rowspan:"2",class:"border-2 border-gray-800 text-center text-gray-800 print:text-black text-base px-3 font-semibold whitespace-nowrap print:whitespace-normal print:p-0 w-[15%]"}," Better To Complete ",-1)),e("th",fn," For '"+k(((pe=l.value.to_department)==null?void 0:pe.short_name)||((ce=l.value.to_department)==null?void 0:ce.name))+"' Use ",1)]),i[21]||(i[21]=e("tr",null,[e("td",{class:"whitespace-nowrap border-2 border-gray-800 text-center text-gray-800 print:text-black text-sm font-semibold print:text-xs"}," Task No "),e("td",{class:"border-2 border-gray-800 text-center text-gray-800 print:text-black text-sm font-semibold whitespace-nowrap p-3 print:text-xs print:p-0"}," Expected Date ")],-1))]),e("tbody",null,[(n(!0),o(j,null,J(((ve=l.value)==null?void 0:ve.details)||[],(h,L)=>{var Je,Ye,Xe;return n(),o(j,{key:h.id},[R(As,{requirement:l.value,detail:h,serial:L+1,onEditClick:g,onDeleteClick:A,onTaskCreateClick:r,isPrinting:a.value},null,8,["requirement","detail","serial","isPrinting"]),e("tr",xn,[e("td",yn,[e("div",gn," '"+k(((Je=l.value.to_department)==null?void 0:Je.short_name)||((Ye=l.value.to_department)==null?void 0:Ye.name))+"' Feedback ",1),f.value!="loading"&&((Xe=l.value)!=null&&Xe.status)?(n(),o("div",kn,[h!=null&&h.feedback?(n(),T(H,{key:0,lineClamp:"2",className:{button:"  underline"},class:"mb-4 print:mb-0"},{default:I(()=>[e("p",{class:"text-sky-800 text-sm text-justify",innerHTML:h==null?void 0:h.feedback},null,8,_n)]),_:2},1024)):c("",!0),e("div",null,[e("button",{class:"btn-3 print:hidden",onClick:$(()=>{u.open=!0,u.detail=h},["prevent"])},k(h.feedback?"Update Feedback":"Add feedback"),9,wn)])])):c("",!0)])])],64)}),128))])])])):c("",!0),f.value!="loading"&&!((be=l.value)!=null&&be.status)?(n(),o("div",hn,[e("button",{class:"btn-2 pl-2 text-base",onClick:$(C,["prevent"])},i[22]||(i[22]=[e("i",{class:"fad fa-plus-circle text-2xl mr-2"},null,-1),D("Add Requirement ")])),e("div",qn,[R(Js,{"requirement-id":(fe=l.value)==null?void 0:fe.id,onSuccess:t},{heading:I(()=>i[23]||(i[23]=[D(" Requirement Submission ")])),acceptButtonLabel:I(()=>i[24]||(i[24]=[e("span",{class:"btn-2 pl-2 text-base"},[e("i",{class:"fad fa-paper-plane text-lg mr-2"}),D("Submit Requirement ")],-1)])),submitButtonLabel:I(()=>i[25]||(i[25]=[D(" Submit Requirement ")])),_:1},8,["requirement-id"])])])):c("",!0),e("div",$n,[e("div",Cn,[e("div",Rn,[e("div",In,[e("span",null,k(((ye=(xe=l.value)==null?void 0:xe.from_department)==null?void 0:ye.short_name)||((ke=(ge=l.value)==null?void 0:ge.from_department)==null?void 0:ke.name)),1),i[26]||(i[26]=e("span",null," In Charge",-1))]),(we=(_e=l.value)==null?void 0:_e.from_department)!=null&&we.in_charge?(n(),T(B,{key:0,user:(qe=(he=l.value)==null?void 0:he.from_department)==null?void 0:qe.in_charge,"avatar-size":"xsmall"},null,8,["user"])):(n(),o("div",Sn,i[27]||(i[27]=[e("span",{class:"italic text-xs text-gray-400"},"N/A",-1)])))]),e("div",Tn,[e("div",Dn,[e("span",null,k(((Ce=($e=l.value)==null?void 0:$e.from_department)==null?void 0:Ce.short_name)||((Ie=(Re=l.value)==null?void 0:Re.from_department)==null?void 0:Ie.name)),1),i[28]||(i[28]=e("span",null," Coordinator",-1))]),(Se=l.value)!=null&&Se.from_coordinator?(n(),T(B,{key:0,user:(Te=l.value)==null?void 0:Te.from_coordinator,"avatar-size":"xsmall"},null,8,["user"])):(n(),o("div",Nn,[(Ne=(De=l.value)==null?void 0:De.from_department)!=null&&Ne.coordinator_id?(n(),o("div",An," Approval Pending ")):(n(),o("div",En,"N/A"))]))])]),e("div",jn,[e("div",Un,[e("div",Pn,[e("span",null,k(((Ee=(Ae=l.value)==null?void 0:Ae.to_department)==null?void 0:Ee.short_name)||((Ue=(je=l.value)==null?void 0:je.to_department)==null?void 0:Ue.name)),1),i[29]||(i[29]=e("span",null,"In Charge",-1))]),(Le=(Pe=l.value)==null?void 0:Pe.from_department)!=null&&Le.in_charge?(n(),T(B,{key:0,user:(Fe=(Ve=l.value)==null?void 0:Ve.from_department)==null?void 0:Fe.in_charge,"avatar-size":"xsmall"},null,8,["user"])):(n(),o("div",Ln,i[30]||(i[30]=[e("span",{class:"italic text-xs text-gray-400"},"N/A",-1)])))]),e("div",Vn,[e("div",Fn,[e("span",null,k(((Me=(Oe=l.value)==null?void 0:Oe.to_department)==null?void 0:Me.short_name)||((Be=(ze=l.value)==null?void 0:ze.to_department)==null?void 0:Be.name)),1),i[31]||(i[31]=e("span",null,"Coordinator",-1))]),(Ge=l.value)!=null&&Ge.to_coordinator?(n(),T(B,{key:0,user:(He=l.value)==null?void 0:He.to_coordinator,"avatar-size":"xsmall"},null,8,["user"])):(n(),o("div",On,[(Ke=(We=l.value)==null?void 0:We.to_department)!=null&&Ke.coordinator_id?(n(),o("div",Mn," Approval Pending ")):(n(),o("div",zn,"N/A"))]))])])]),f.value!="loading"&&!((Qe=l.value)!=null&&Qe.status)?(n(),o("div",Bn,i[32]||(i[32]=[e("p",{class:"text-yellow-800 text-sm"},[e("span",{class:"fas fa-exclamation-circle"}),D(" After submitting you cannot add requirement no more ")],-1)]))):c("",!0)]),f.value==="loading"?(n(),T(z,{key:2,class:"absolute inset-0 bg-opacity-90"})):c("",!0)]),R(ut)])}}};export{cr as default};
