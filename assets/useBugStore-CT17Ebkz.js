import{G as w,r as c,p as v,H as o}from"./index-CwpDXStF.js";const B=w("bug",()=>{const r=c([]),g=c(null),l=c(!1),u=c(null),d=async(a,t)=>{var e,s;l.value=!0,u.value=null,console.log("ss",a,t);try{await o.post(`/bugs/${a}/assign-users`,{user_ids:t}),await i(a)}catch(n){throw u.value=((s=(e=n.response)==null?void 0:e.data)==null?void 0:s.message)||"Assign users failed",n}finally{l.value=!1}},p=async()=>{var a,t;l.value=!0,u.value=null;try{const e=await o.get("/bugs");r.value=e.data}catch(e){u.value=((t=(a=e.response)==null?void 0:a.data)==null?void 0:t.message)||"বাগ লোড করতে ব্যর্থ হয়েছে।"}finally{l.value=!1}},i=async a=>{var t,e;l.value=!0,u.value=null;try{const s=await o.get(`/bugs/${a}`);g.value=s.data}catch(s){u.value=((e=(t=s.response)==null?void 0:t.data)==null?void 0:e.message)||`বাগ (ID: ${a}) লোড করতে ব্যর্থ হয়েছে।`}finally{l.value=!1}},y=async(a,t)=>{var e,s;l.value=!0,u.value=null;try{const n=await o.put(`/bugs/${a}`,t),f=r.value.findIndex(m=>m.id===a);return f!==-1&&(r.value[f]=n.data.data),n.data.data}catch(n){throw u.value=((s=(e=n.response)==null?void 0:e.data)==null?void 0:s.message)||`বাগ (ID: ${a}) আপডেট করতে ব্যর্থ হয়েছে।`,n}finally{l.value=!1}},h=async a=>{var t,e;l.value=!0,u.value=null;try{const s=await o.post("/bugs",a);return r.value.push(s.data.data),s.data.data}catch(s){u.value=((e=(t=s.response)==null?void 0:t.data)==null?void 0:e.message)||"বাগ তৈরি করতে ব্যর্থ হয়েছে।"}finally{l.value=!1}},b=async a=>{var t,e;l.value=!0,u.value=null;try{await o.delete(`/bugs/${a}`),r.value=r.value.filter(s=>s.id!==a)}catch(s){u.value=((e=(t=s.response)==null?void 0:t.data)==null?void 0:e.message)||`বাগ (ID: ${a}) মুছতে ব্যর্থ হয়েছে।`}finally{l.value=!1}};return{bugs:v(()=>r.value),bug:v(()=>g.value),loading:v(()=>l.value),error:v(()=>u.value),fetchBugs:p,fetchBug:i,createBug:h,updateBug:y,deleteBug:b,assignUsers:d}});export{B as u};
