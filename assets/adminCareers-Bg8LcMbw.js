import{B as b,r as o,C as n}from"./index-CL5zsjQB.js";const S=b("adminCareers",()=>{const i=o([]),v=o({page:1,per_page:12,total:0,last_page:1}),u=o(null),p=o([]),f=o({page:1,per_page:15,total:0,last_page:1}),s=o(!1),c=o(!1),l=o("");return{jobs:i,jobsMeta:v,job:u,applications:p,appsMeta:f,loading:s,saving:c,error:l,fetchJobs:async(t={})=>{s.value=!0,l.value="";try{const{data:e}=await n.get("/careers/jobs",{params:{...t,only_open:void 0}});i.value=(e==null?void 0:e.data)??(e==null?void 0:e.items)??e??[];const a=(e==null?void 0:e.meta)||e||{};v.value={page:a.current_page??1,per_page:a.per_page??t.per_page??12,total:a.total??0,last_page:a.last_page??1}}catch{l.value="Failed to load jobs"}finally{s.value=!1}},fetchJobById:async t=>{s.value=!0,l.value="";try{const{data:e}=await n.get("/careers/jobs",{params:{paginate:!1}}),a=(e==null?void 0:e.data)??e??[];u.value=a.find(r=>String(r.id)===String(t))||null,u.value||(l.value="Job not found in current dataset")}catch{l.value="Failed to fetch job"}finally{s.value=!1}},createJob:async t=>{c.value=!0,l.value="";try{const{data:e}=await n.post("/careers/jobs",t);return e}catch(e){throw l.value="Failed to create job",e}finally{c.value=!1}},updateJob:async(t,e)=>{c.value=!0,l.value="";try{const{data:a}=await n.put(`/careers/jobs/${t}`,e);return a}catch(a){throw l.value="Failed to update job",a}finally{c.value=!1}},deleteJob:async t=>{c.value=!0,l.value="";try{await n.delete(`/careers/jobs/${t}`)}catch(e){throw l.value="Failed to delete job",e}finally{c.value=!1}},fetchApplications:async(t={})=>{s.value=!0,l.value="";try{const{data:e}=await n.get("/careers/applications",{params:t});p.value=(e==null?void 0:e.data)??e??[];const a=(e==null?void 0:e.meta)||e||{};f.value={page:a.current_page??1,per_page:a.per_page??t.per_page??15,total:a.total??0,last_page:a.last_page??1}}catch{l.value="Failed to load applications"}finally{s.value=!1}},updateApplicationStatus:async(t,{status:e,rating:a})=>{try{const{data:r}=await n.patch(`/careers/applications/${t}`,{status:e,rating:a}),d=p.value.findIndex(g=>g.id===t);return d!==-1&&(p.value[d]=r),r}catch(r){throw l.value="Failed to update application",r}}}});export{S as u};
