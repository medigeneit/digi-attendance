import{u as H,b as O,r as D,e as R,x as V,A as U,c as o,o as r,a as t,g as h,f as E,q as p,k as A,h as F,v as j,F as y,n as x,j as f,t as a,i as m}from"./index-D6IyOSuI.js";import{_ as W}from"./EmployeeFilter-Bpn5aPL1.js";import{L as G}from"./LoaderView-CbihmVPO.js";import{_ as C}from"./DisplayFormattedWorkingHours-DIz37i-J.js";import{S as I}from"./SelectedEmployeeCard-CGsr6FiJ.js";import{u as z}from"./leave-application-BNat4lME.js";import{u as P}from"./user-CqPNJv3N.js";import"./company-B6Y6Xppm.js";import"./department-D8otYRXI.js";import"./SelectDropdown-gBLt9qrB.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./UserChip-Qp-JYzPq.js";const J={class:"px-4 space-y-4"},Q={class:"flex flex-wrap gap-4"},X={key:0,class:"flex justify-between gap-4 text-sm"},Y={class:"space-y-5"},Z={class:"text-base font-semibold text-blue-400 mb-2 text-center capitalize"},K={class:"text-gray-500"},tt={key:0,class:"overflow-x-auto rounded border bg-white"},et={class:"min-w-full table-auto border-collapse border border-gray-200 bg-white rounded-md text-sm"},st={class:"border border-gray-300 px-2 text-center"},at={class:"border border-gray-300 px-2 text-center"},rt={class:"border border-gray-300 px-2 text-center"},ot={class:"border border-gray-300 px-2 text-center"},lt={class:"border border-gray-300 px-2 text-center"},nt={class:"border border-gray-300 px-2 text-center"},dt={class:"border border-gray-300 px-2 text-center"},ct={class:"border border-gray-300 px-2 text-center"},it={class:"border border-gray-300 px-2 text-center"},pt={class:"border border-gray-300 px-2 text-center"},ut={class:"border border-gray-300 px-2 text-center"},ht={class:"border border-gray-300 px-2 text-center !py-0.5"},_t={key:1,class:"overflow-x-auto rounded border bg-white"},yt={class:"min-w-full text-sm text-left"},xt={class:"p-2"},bt={class:"p-2"},gt={class:"p-2"},ft={class:"p-2"},mt={class:"p-2 whitespace-pre-line"},wt={class:"p-2 whitespace-pre-line"},vt={class:"p-2 text-sm text-gray-600"},kt={key:2,class:"overflow-x-auto rounded border bg-white"},St={class:"min-w-full text-sm text-left"},Dt={class:"p-2"},At={class:"p-2"},Ct={class:"p-2"},Lt={class:"p-2"},qt={class:"p-2 whitespace-pre-line"},$t={class:"p-2 whitespace-pre-line"},Tt={class:"p-2 whitespace-pre-line"},Vt={class:"p-2 whitespace-pre-line text-center"},Mt=["href"],Bt={key:1,class:"text-gray-400"},Nt={class:"p-2 whitespace-pre-line"},Ht={class:"p-2 text-sm text-gray-600"},Ot={key:3,class:"overflow-x-auto rounded border bg-white"},Rt={class:"min-w-full text-sm text-left"},Ut={class:"p-2"},Et={class:"p-2"},Ft={class:"p-2"},jt={class:"p-2"},Wt={class:"p-2 whitespace-pre-line"},Gt={class:"p-2 whitespace-pre-line"},It={class:"p-2 text-sm text-gray-600"},zt={key:4,class:"overflow-x-auto rounded border bg-white"},Pt={class:"min-w-full text-sm text-left"},Jt={class:"p-2"},Qt={class:"p-2"},Xt={class:"p-2"},Yt={class:"p-2"},Zt={class:"p-2"},Kt={class:"p-2"},te={class:"p-2 whitespace-pre-line"},ee={class:"p-2 text-sm text-gray-600"},ye={__name:"MonthWiseApplicationLog",setup(se){const w=H(),u=O(),L=P(),v=z(),k=D(null),b=D(u.query.date||v.selectedMonth),c=D({company_id:u.query.company_id||"",department_id:u.query.department_id||"all",type:u.query.type||"all",employee_id:u.query.employee_id||"",category:""}),q=async l=>{l?(await L.fetchUser(l),k.value=L.user):k.value=null},S=async()=>{c.value.employee_id&&b.value&&await v.getMonthlyApplicationLog(c.value.employee_id,b.value)};R(async()=>{c.value.employee_id&&await q(c.value.employee_id)}),V(()=>c.value.employee_id,async(l,s)=>{l&&l!==s&&(await q(l),await S(),w.replace({query:{...u.query,employee_id:l}}))}),V(b,l=>{w.replace({query:{...u.query,date:l}}),S()});const M=()=>w.go(-1),$=l=>new Date(l).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),T=l=>new Date(`1970-01-01T${l}`).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),g=l=>`${new Date(l).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})}`,B=()=>{w.replace({query:{...u.query,company_id:c.value.company_id,department_id:c.value.department_id,type:c.value.type,employee_id:c.value.employee_id}})},N={exchange_shift:"ExchangeShiftShow",exchange_offday:"ExchangeOffdayShow"};return(l,s)=>{const _=U("RouterLink");return r(),o("div",J,[t("div",{class:"flex items-center justify-between gap-2"},[t("button",{class:"btn-3",onClick:M},s[2]||(s[2]=[t("i",{class:"far fa-arrow-left"},null,-1),t("span",{class:"hidden md:flex"},"Back",-1)])),s[3]||(s[3]=t("h1",{class:"title-md md:title-lg flex-wrap text-center"},"Monthly Application Log",-1)),s[4]||(s[4]=t("div",null,null,-1))]),t("div",Q,[p(W,{modelValue:c.value,"onUpdate:modelValue":s[0]||(s[0]=i=>c.value=i),"initial-value":A(u).query,onFilterChange:B},null,8,["modelValue","initial-value"]),t("div",null,[F(t("input",{id:"monthSelect",type:"month","onUpdate:modelValue":s[1]||(s[1]=i=>b.value=i),onChange:S,class:"input-1"},null,544),[[j,b.value]])])]),k.value?(r(),o("div",X,[p(I,{user:k.value},null,8,["user"])])):h("",!0),A(v).loading?(r(),E(G,{key:1})):h("",!0),t("div",Y,[(r(!0),o(y,null,x(A(v).applicationLog,(i,d)=>(r(),o("div",{key:d,class:"bg-gray-50 p-4 rounded shadow"},[t("h2",Z,[f(a(d.replaceAll("_"," "))+" ",1),t("span",K,"("+a(i.length)+")",1)]),d==="overtime"?(r(),o("div",tt,[t("table",et,[s[6]||(s[6]=t("thead",null,[t("tr",{class:"bg-gray-200 *:py-1"},[t("th",{class:"border border-gray-300 px-2 text-center"},"#"),t("th",{class:"border border-gray-300 px-2 text-center"},"Date"),t("th",{class:"border border-gray-300 px-2 text-center"},"Type"),t("th",{class:"border border-gray-300 px-2 text-center"},"Shift"),t("th",{class:"border border-gray-300 px-2 text-center"},"Check-In"),t("th",{class:"border border-gray-300 px-2 text-center"},"Check-Out"),t("th",{class:"border border-gray-300 px-2 text-center"},"Working (hour)"),t("th",{class:"border border-gray-300 px-2 text-center"},"Request (hour)"),t("th",{class:"border border-gray-300 px-2 text-center"},"Approved (hour)"),t("th",{class:"border border-gray-300 px-2 text-center"},"Details"),t("th",{class:"border border-gray-300 px-2 text-center"},"Status"),t("th",{class:"border border-gray-300 px-2 text-center"},"Action")])],-1)),t("tbody",null,[(r(!0),o(y,null,x(i,(e,n)=>(r(),o("tr",{key:`${d}-${n}`,class:"border-b border-gray-200 hover:bg-blue-200 *:py-2"},[t("td",st,a(n+1),1),t("td",at,a(new Date(e.date).toLocaleDateString("en-GB",{day:"2-digit",month:"long",year:"numeric"})),1),t("td",rt,a(e.duty_type),1),t("td",ot,a(e.shift),1),t("td",lt,a(e.check_in||"- : -"),1),t("td",nt,a(e.check_out||"- : -"),1),t("td",dt,[p(C,{workingHours:e.working_hours},null,8,["workingHours"])]),t("td",ct,[p(C,{workingHours:e.request_overtime_hours},null,8,["workingHours"])]),t("td",it,[p(C,{workingHours:e.approval_overtime_hours},null,8,["workingHours"])]),t("td",pt,a(e.work_details||""),1),t("td",ut,a(e.status||"Pending"),1),t("td",ht,[p(_,{to:{name:"MyOvertimeShow",params:{id:e.id}},class:"text-blue-800"},{default:m(()=>s[5]||(s[5]=[t("i",{class:"far fa-eye text-lg"},null,-1)])),_:2,__:[5]},1032,["to"])])]))),128))])])])):h("",!0),d==="leave_application"?(r(),o("div",_t,[t("table",yt,[s[8]||(s[8]=t("thead",{class:"bg-gray-100 text-gray-700 text-xs uppercase"},[t("tr",null,[t("th",{class:"p-2"},"#"),t("th",{class:"p-2"},"Create Date"),t("th",{class:"p-2"},"Last Working Date"),t("th",{class:"p-2"},"Resumption Date"),t("th",{class:"p-2"},"Type"),t("th",{class:"p-2"},"Status"),t("th",{class:"p-2"},"Action")])],-1)),t("tbody",null,[(r(!0),o(y,null,x(i,(e,n)=>(r(),o("tr",{key:`${d}-${n}`,class:"border-t hover:bg-gray-50 text-sm"},[t("td",xt,a(n+=1),1),t("td",bt,a(g(e.create_date)),1),t("td",gt,a(e.from),1),t("td",ft,a(e.to),1),t("td",mt,a(e.application_types),1),t("td",wt,a(e.status),1),t("td",vt,[p(_,{to:{name:"LeaveApplicationShow",params:{id:e.id}},class:"inline-flex items-center gap-1 text-blue-600 hover:underline"},{default:m(()=>s[7]||(s[7]=[t("i",{class:"far fa-eye"},null,-1),f(" View ")])),_:2,__:[7]},1032,["to"])])]))),128))])])])):h("",!0),d==="short_leave"?(r(),o("div",kt,[t("table",St,[s[11]||(s[11]=t("thead",{class:"bg-gray-100 text-gray-700 text-xs uppercase"},[t("tr",null,[t("th",{class:"p-2"},"#"),t("th",{class:"p-2"},"Create Date"),t("th",{class:"p-2"},"Type"),t("th",{class:"p-2"},"Date"),t("th",{class:"p-2"},"Check In"),t("th",{class:"p-2"},"Check Out"),t("th",{class:"p-2"},"Duration"),t("th",{class:"p-2"},"Attachment"),t("th",{class:"p-2"},"Status"),t("th",{class:"p-2"},"Action")])],-1)),t("tbody",null,[(r(!0),o(y,null,x(i,(e,n)=>(r(),o("tr",{key:`${d}-${n}`,class:"border-t hover:bg-gray-50 text-sm"},[t("td",Dt,a(n+=1),1),t("td",At,a(g(e.create_date)),1),t("td",Ct,a(e.application_types),1),t("td",Lt,a(e.date),1),t("td",qt,a(T(e.start_time)),1),t("td",$t,a(T(e.end_time)),1),t("td",Tt,a(e.duration)+" m ",1),t("td",Vt,[e.attachment?(r(),o("a",{key:0,href:e.attachment,target:"_blank",rel:"noopener",class:"text-blue-600 hover:underline"},s[9]||(s[9]=[t("i",{class:"far fa-eye"},null,-1)]),8,Mt)):(r(),o("span",Bt,"No file"))]),t("td",Nt,a(e.status),1),t("td",Ht,[p(_,{to:{name:"ShortLeaveShow",params:{id:e.id}},class:"inline-flex items-center gap-1 text-blue-600 hover:underline"},{default:m(()=>s[10]||(s[10]=[t("i",{class:"far fa-eye"},null,-1),f(" View ")])),_:2,__:[10]},1032,["to"])])]))),128))])])])):h("",!0),d==="exchange_offday"||d==="exchange_shift"?(r(),o("div",Ot,[t("table",Rt,[s[13]||(s[13]=t("thead",{class:"bg-gray-100 text-gray-700 text-xs uppercase"},[t("tr",null,[t("th",{class:"p-2"},"#"),t("th",{class:"p-2"},"Create Date"),t("th",{class:"p-2"},"Current Date"),t("th",{class:"p-2"},"Exchange Date"),t("th",{class:"p-2"},"Shift"),t("th",{class:"p-2"},"Status"),t("th",{class:"p-2"},"Action")])],-1)),t("tbody",null,[(r(!0),o(y,null,x(i,(e,n)=>(r(),o("tr",{key:`${d}-${n}`,class:"border-t hover:bg-gray-50 text-sm"},[t("td",Ut,a(n+=1),1),t("td",Et,a(g(e.create_date)),1),t("td",Ft,a(e.current_date),1),t("td",jt,a(e.exchange_date),1),t("td",Wt,a((e==null?void 0:e.shift)||"N/A"),1),t("td",Gt,a(e.status),1),t("td",It,[p(_,{to:{name:N[e.type],params:{id:e.id}},class:"inline-flex items-center gap-1 text-blue-600 hover:underline"},{default:m(()=>s[12]||(s[12]=[t("i",{class:"far fa-eye"},null,-1),f(" View ")])),_:2,__:[12]},1032,["to"])])]))),128))])])])):h("",!0),d==="manual_attendance"?(r(),o("div",zt,[t("table",Pt,[s[15]||(s[15]=t("thead",{class:"bg-gray-100 text-gray-700 text-xs uppercase"},[t("tr",null,[t("th",{class:"p-2"},"#"),t("th",{class:"p-2"},"Create Date"),t("th",{class:"p-2"},"Date"),t("th",{class:"p-2"},"Type"),t("th",{class:"p-2"},"Check In"),t("th",{class:"p-2"},"Check Out"),t("th",{class:"p-2"},"Status"),t("th",{class:"p-2"},"Action")])],-1)),t("tbody",null,[(r(!0),o(y,null,x(i,(e,n)=>(r(),o("tr",{key:`${d}-${n}`,class:"border-t hover:bg-gray-50 text-sm"},[t("td",Jt,a(n+=1),1),t("td",Qt,a(g(e.create_date)),1),t("td",Xt,a(g(e.check_in||e.check_out)),1),t("td",Yt,a(e.application_types),1),t("td",Zt,a($(e.check_in)||"N/A"),1),t("td",Kt,a($(e.check_out)||"N/A"),1),t("td",te,a(e.status),1),t("td",ee,[p(_,{to:{name:"ManualAttendanceShow",params:{id:e.id}},class:"inline-flex items-center gap-1 text-blue-600 hover:underline"},{default:m(()=>s[14]||(s[14]=[t("i",{class:"far fa-eye"},null,-1),f(" View ")])),_:2,__:[14]},1032,["to"])])]))),128))])])])):h("",!0)]))),128))])])}}};export{ye as default};
