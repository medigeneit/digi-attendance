import{r as f,s as V,b as F,q as x,c as b,a as e,t as l,h as u,d as _,z as y,F as L,x as B,l as H,B as R,v as M,j,f as z,o as p,y as m,g as E}from"./index-BcDeU1U_.js";import{L as G}from"./LoaderView-BNCx7AyZ.js";import{_ as J}from"./MultiselectDropdown-Bl_MGcFo.js";import{u as K}from"./attendance-DfnV5X63.js";import{u as O}from"./company-C-X68NgA.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vue-multiselect.esm-B3Icjvhl.js";const Q={class:"px-4 space-y-4"},X={class:"flex items-center justify-between gap-2"},Y={class:"title-md md:title-lg flex-wrap text-center"},Z={class:"flex flex-wrap gap-4"},I=["value"],ee={key:1,class:"space-y-4"},te={class:"overflow-x-auto card-bg"},se={class:"min-w-full table-auto border-collapse border border-gray-300 bg-white"},ae={class:"text-center text-xs"},oe={class:"border px-1 py-0.5"},le={class:"border px-1 py-0.5"},ne={class:"border px-1 py-0.5"},re={class:"border px-1 py-0.5"},ie=["title"],de=["title"],ue=["title"],pe={class:"border px-1 py-0.5"},ce={class:"border px-1 py-0.5"},ve={class:"border px-1 py-0.5"},ke={__name:"TodayAttendanceReport",setup(be){var k;const D=E(),c=z(),h=O(),n=K(),r=f(""),a=f(""),T=f(""),i=f(((k=c==null?void 0:c.query)==null?void 0:k.search)||""),o=f("all"),{companies:q,employees:P}=V(h),{dailyLogs:U}=V(n),v=async()=>{(r.value||i.value)&&await n.getTodayAttendanceReport(r.value,a==null?void 0:a.value.id,o==null?void 0:o.value,n.selectedDate,i.value)};F(async()=>{await h.fetchCompanies(),await n.getTodayAttendanceReport(r.value,a==null?void 0:a.value.id,o==null?void 0:o.value,n.selectedDate,i.value)}),x([r,T],v),x(r,d=>{h.fetchEmployee(d)}),x(a,d=>{d!=null&&d.id&&v()});const $=async()=>{await n.attendanceDownloadExcel(r.value,a==null?void 0:a.value.id,o==null?void 0:o.value,n.selectedDate,i.value)},N=async()=>{await n.attendanceDownloadPdf(r.value,a==null?void 0:a.value.id,o==null?void 0:o.value,n.selectedDate,i.value)},W=()=>D.go(-1);return x(i,d=>{D.push({query:{...c.query,search:d}})}),(d,s)=>{var S,w,C,A;return p(),b("div",Q,[e("div",X,[e("button",{class:"btn-3",onClick:W},s[5]||(s[5]=[e("i",{class:"far fa-arrow-left"},null,-1),e("span",{class:"hidden md:flex"},"Back",-1)])),e("h1",Y," Daily "+l(((w=(S=u(c))==null?void 0:S.query)==null?void 0:w.search)==="all"?"Attendance":(A=(C=u(c))==null?void 0:C.query)==null?void 0:A.search)+" Report ",1),e("div",{class:"flex gap-4"},[e("button",{type:"button",onClick:$},s[6]||(s[6]=[e("i",{class:"far fa-file-excel text-2xl text-green-500"},null,-1)])),e("button",{type:"button",onClick:N},s[7]||(s[7]=[e("i",{class:"fal fa-file-pdf text-2xl text-red-500"},null,-1)]))])]),e("div",Z,[e("div",null,[_(e("select",{id:"userSelect","onUpdate:modelValue":s[0]||(s[0]=t=>r.value=t),onChange:v,class:"input-1"},[s[8]||(s[8]=e("option",{value:"",disabled:""},"Select a Company",-1)),(p(!0),b(L,null,B(u(q),t=>(p(),b("option",{key:t==null?void 0:t.id,value:t==null?void 0:t.id},l(t==null?void 0:t.name),9,I))),128))],544),[[y,r.value]])]),e("div",null,[H(J,{modelValue:a.value,"onUpdate:modelValue":s[1]||(s[1]=t=>a.value=t),options:u(P),multiple:!1,placeholder:"Select employee"},null,8,["modelValue","options"])]),e("div",null,[_(e("select",{id:"userSelect","onUpdate:modelValue":s[2]||(s[2]=t=>o.value=t),onChange:v,class:"input-1"},s[9]||(s[9]=[R('<option value="all">All Category</option><option value="executive">Executive</option><option value="support_staff">Support Staff</option><option value="doctor">Doctor</option><option value="academy_body">Academy Body</option>',5)]),544),[[y,o.value]])]),e("div",null,[_(e("select",{id:"userSelect","onUpdate:modelValue":s[3]||(s[3]=t=>i.value=t),onChange:v,class:"input-1"},s[10]||(s[10]=[R('<option value="all">All Status</option><option value="Present">Present</option><option value="Absent">Absent</option><option value="Weekend">Weekend</option><option value="Holiday">Holiday</option><option value="Leave">Leave</option>',6)]),544),[[y,i.value]])]),e("div",null,[_(e("input",{type:"date","onUpdate:modelValue":s[4]||(s[4]=t=>u(n).selectedDate=t),onChange:v,class:"input-1"},null,544),[[M,u(n).selectedDate]])])]),u(n).isLoading?(p(),j(G,{key:0})):(p(),b("div",ee,[e("div",te,[e("table",se,[s[11]||(s[11]=e("thead",null,[e("tr",{class:"bg-gray-200 text-xs"},[e("th",{class:"border p-1"},"#"),e("th",{class:"border p-1"},"Emp/Worker Name"),e("th",{class:"border p-1"},"Date"),e("th",{class:"border p-1"},"Day"),e("th",{class:"border p-1"},"Shift"),e("th",{class:"border p-1"},"Entry Time"),e("th",{class:"border p-1"},"Exit Time"),e("th",{class:"border p-1"},"Working Hours"),e("th",{class:"border p-1"},"Late Entry"),e("th",{class:"border p-1"},"Early Leave"),e("th",{class:"border p-1"},"Status")])],-1)),e("tbody",ae,[(p(!0),b(L,null,B(u(U),(t,g)=>(p(),b("tr",{key:t==null?void 0:t.date,class:"border-b hover:bg-blue-100"},[e("td",oe,l(g+=1),1),e("td",le,l(t.user_name),1),e("td",ne,l(t.date),1),e("td",re,l(t.weekday),1),e("td",{class:"border px-1 py-0.5",title:`${t.shift_start_time} to ${t.shift_end_time}`},l(t.shift_name),9,ie),e("td",{class:m(["border px-1 py-0.5",{"bg-red-200":t.late_duration}]),title:`Device: ${t.entry_device}`},l(t.entry_time),11,de),e("td",{class:m(["border px-1 py-0.5",{"bg-red-200":t.early_leave_duration}]),title:`Device: ${t.exit_device}`},l(t.exit_time),11,ue),e("td",pe,l(t.working_hours),1),e("td",ce,l(t.late_duration),1),e("td",ve,l(t.early_leave_duration),1),e("td",{class:m(["border px-1 py-0.5",{"text-red-600":t.status==="Absent","text-green-600":t.status==="Present"}])},l(t.status),3)]))),128))])])])]))])}}};export{ke as default};
