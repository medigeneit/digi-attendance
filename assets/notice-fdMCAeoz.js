import{C as p,r,D as l}from"./index-BHi1xSlW.js";const C=p("notice",()=>{const i=r([]),f=r([]),u=r({}),c=r(null),n=r(!1),d=r([]),v=r(0);return{notices:i,notice:u,error:c,isLoading:n,policies:f,feedbacks:d,totalFeedbacks:v,fetchPolices:async()=>{var s,a,e;try{n.value=!0;const t=await l.get("/policies");f.value=(s=t==null?void 0:t.data)==null?void 0:s.polices,c.value=null}catch(t){c.value=((e=(a=t.response)==null?void 0:a.data)==null?void 0:e.message)||"Something went wrong"}finally{n.value=!1}},fetchFileUpload:async s=>{var a,e;try{return n.value=!0,(await l.post("file-upload",s,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(t){c.value=((e=(a=t.response)==null?void 0:a.data)==null?void 0:e.message)||"Something went wrong"}finally{n.value=!1}},createNoticeFeedback:async(s,a)=>{var e,t;try{return n.value=!0,await l.post(`/user/notice/feedback/${s}`,a)}catch(o){c.value=((t=(e=o.response)==null?void 0:e.data)==null?void 0:t.message)||"Something went wrong"}finally{n.value=!1}},fetchNotices:async()=>{var s,a;try{n.value=!0;const e=await l.get("/notices");i.value=e==null?void 0:e.data,c.value=null}catch(e){c.value=((a=(s=e.response)==null?void 0:s.data)==null?void 0:a.message)||"Something went wrong"}finally{n.value=!1}},fetchNotice:async s=>{var a,e;try{n.value=!0;const o=(await l.get(`/notices/${s}`)).data;return o&&(u.value=o),c.value=null,o}catch(t){c.value=((e=(a=t.response)==null?void 0:a.data)==null?void 0:e.message)||"Something went wrong"}finally{n.value=!1}},createNotice:async s=>{var a,e;try{n.value=!0;const t=await l.post("/notices",s);i.value.push(t.data.notices),c.value=null}catch(t){c.value=((e=(a=t.response)==null?void 0:a.data)==null?void 0:e.message)||"Something went wrong"}finally{n.value=!1}},updateNotice:async(s,a)=>{var e,t;try{n.value=!0,console.log({payload:a});const o=await l.put(`/notices/${s}`,a),g=users.value.findIndex(h=>h.id===s);g!==-1&&(u.value[g]=o.data.notice),c.value=null}catch(o){c.value=((t=(e=o.response)==null?void 0:e.data)==null?void 0:t.message)||"Something went wrong"}finally{n.value=!1}},fetchUserNotices:async()=>{var s,a,e;try{n.value=!0;const t=await l.get("/user/notices");i.value=(s=t==null?void 0:t.data)==null?void 0:s.notices,c.value=null}catch(t){c.value=((e=(a=t.response)==null?void 0:a.data)==null?void 0:e.message)||"Something went wrong"}finally{n.value=!1}},fetchNoticeDetails:async s=>{var a,e;try{n.value=!0;const o=(await l.get(`/notices/details/${s}`)).data;return o&&(u.value=o),c.value=null,o}catch(t){c.value=((e=(a=t.response)==null?void 0:a.data)==null?void 0:e.message)||"Something went wrong"}finally{n.value=!1}},fetchFeedbacks:async(s,a={})=>{const e=await l.get(`/notice/feedbacks/${s}`,a);d.value=e.data.data.data,v.value=e.data.data.total}}});export{C as u};
