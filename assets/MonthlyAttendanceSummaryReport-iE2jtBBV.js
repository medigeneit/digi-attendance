import{r as u,s as h,b as B,z as b,c as p,a as e,d as x,B as v,F as m,q as f,h as i,E as R,l as T,v as E,j as H,o as n,t as s,g as P,f as F}from"./index-BHi1xSlW.js";import{L as N}from"./LoaderView-BTbXuvD3.js";import{_ as U}from"./MultiselectDropdown-tN6WObXH.js";import{u as W}from"./attendance-DugIsSQW.js";import{u as j}from"./company-CNCMiwRg.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vue-multiselect.esm-WqchAvBP.js";const q={class:"px-4 space-y-4"},z={class:"flex flex-wrap gap-4"},O=["value"],$={key:1,class:"space-y-4"},G={key:0,class:"overflow-x-auto card-bg"},I={class:"min-w-full table-auto border-collapse border border-gray-300 bg-white"},J={class:"text-center text-sm"},K={class:"border px-2 py-0.5"},Q={class:"border px-2 py-0.5"},X={class:"border px-2 py-0.5"},Y={class:"border px-2 py-0.5"},Z={class:"border px-2 py-0.5"},g={class:"border px-2 py-0.5"},tt={class:"border px-2 py-0.5"},et={class:"border px-2 py-0.5"},st={class:"border px-2 py-0.5"},at={class:"border px-2 py-0.5"},rt={class:"border px-2 py-0.5"},dt={class:"border px-2 py-0.5"},ot={class:"border px-2 py-0.5"},nt={class:"border px-2 py-0.5"},pt={class:"border px-2 py-0.5"},ct={class:"border px-2 py-0.5"},lt={class:"border py-0.5"},it={class:"border-b border-black font-semibold text-green-600"},_t={class:"text-gray-600"},ut={class:"border px-2 py-0.5"},yt={class:"border px-2 py-0.5"},bt={class:"border px-2 py-0.5"},xt={class:"border px-2 py-0.5"},ht={class:"border px-2 py-0.5"},vt={class:"border px-2 py-0.5"},mt={class:"border px-2 py-0.5"},ft={class:"border px-2 py-0.5"},wt={key:1,class:"text-center text-red-500 text-xl italic mt-10"},Bt={__name:"MonthlyAttendanceSummaryReport",setup(kt){const w=P();F();const y=j(),o=W(),r=u(""),c=u(""),k=u(""),{companies:S,employees:D}=h(y),{monthly_company_summary:L}=h(o),d=u(""),_=async()=>{r.value&&await o.getMonthlyAttendanceSummaryReport(r.value,c==null?void 0:c.value.id,d==null?void 0:d.value,o.selectedMonth)},M=async()=>{r.value&&await o.downloadExcel(r.value,d==null?void 0:d.value,o.selectedMonth)},C=async()=>{r.value&&await o.downloadPDF(r.value,d==null?void 0:d.value,o.selectedMonth)};B(async()=>{await y.fetchCompanies()}),b(r,l=>{y.fetchEmployee(l)}),b([r,k],_),b(c,l=>{l!=null&&l.id&&_()});const A=()=>w.go(-1);return(l,a)=>(n(),p("div",q,[e("div",{class:"flex items-center justify-between gap-2"},[e("button",{class:"btn-3",onClick:A},a[4]||(a[4]=[e("i",{class:"far fa-arrow-left"},null,-1),e("span",{class:"hidden md:flex"},"Back",-1)])),a[7]||(a[7]=e("h1",{class:"title-md md:title-lg flex-wrap text-center"},"Monthly Attendance Summary Report",-1)),e("div",{class:"flex gap-4"},[e("button",{type:"button",onClick:M,class:"btn-1"},a[5]||(a[5]=[e("i",{class:"far fa-file-excel text-2xl text-green-500"},null,-1)])),e("button",{type:"button",onClick:C,class:"btn-1"},a[6]||(a[6]=[e("i",{class:"fal fa-file-pdf text-2xl text-red-500"},null,-1)]))])]),e("div",z,[e("div",null,[x(e("select",{id:"userSelect","onUpdate:modelValue":a[0]||(a[0]=t=>r.value=t),onChange:_,class:"input-1"},[a[8]||(a[8]=e("option",{value:"",disabled:""},"Select a Company",-1)),(n(!0),p(m,null,f(i(S),t=>(n(),p("option",{key:t==null?void 0:t.id,value:t==null?void 0:t.id},s(t==null?void 0:t.name),9,O))),128))],544),[[v,r.value]])]),e("div",null,[x(e("select",{"onUpdate:modelValue":a[1]||(a[1]=t=>d.value=t),onChange:_,class:"input-1"},a[9]||(a[9]=[R('<option value="">All Category</option><option value="executive">Executive</option><option value="support_staff">Support Staff</option><option value="doctor">Doctor</option><option value="academy_body">Academy Body</option>',5)]),544),[[v,d.value]])]),e("div",null,[T(U,{modelValue:c.value,"onUpdate:modelValue":a[2]||(a[2]=t=>c.value=t),options:i(D),multiple:!1,label:"name",placeholder:"Select employee"},null,8,["modelValue","options"])]),e("div",null,[x(e("input",{type:"month","onUpdate:modelValue":a[3]||(a[3]=t=>i(o).selectedMonth=t),onChange:_,class:"input-1"},null,544),[[E,i(o).selectedMonth]])])]),i(o).isLoading?(n(),H(N,{key:0})):(n(),p("div",$,[r.value?(n(),p("div",G,[e("table",I,[a[10]||(a[10]=e("thead",null,[e("tr",{class:"bg-gray-100 text-sm"},[e("th",{rowspan:"2",class:"border px-1 py-0.5"},"#"),e("th",{rowspan:"2",class:"border px-1 py-0.5"},"Employee Name"),e("th",{rowspan:"2",class:"border px-1 py-0.5"},"Designation"),e("th",{colspan:"5",class:"border px-1 py-0.5"},"Attendance Summary"),e("th",{colspan:"2",class:"border px-1 py-0.5"},"Actual Late"),e("th",{colspan:"2",class:"border px-1 py-0.5"},"Remaining Late"),e("th",{colspan:"2",class:"border px-1 py-0.5"},"Actual Early"),e("th",{colspan:"2",class:"border px-1 py-0.5"},"Remaining Early"),e("th",{rowspan:"2",class:"border px-1 py-0.5"},"Working Hour"),e("th",{rowspan:"2",class:"border px-1 py-0.5"},"OT Hour"),e("th",{colspan:"4",class:"border px-1 py-0.5"},"Leave Day"),e("th",{colspan:"2",class:"border px-1 py-0.5"},"Short Leave"),e("th",{rowspan:"2",class:"border px-1 py-0.5"},"Weekend Duty")]),e("tr",{class:"bg-gray-100 text-xs"},[e("th",{class:"border px-2 py-0.5"},"TD"),e("th",{class:"border px-2 py-0.5"},"TP"),e("th",{class:"border px-2 py-0.5"},"TW"),e("th",{class:"border px-2 py-0.5"},"TL"),e("th",{class:"border px-2 py-0.5"},"TA"),e("th",{class:"border px-1 py-0.5"},"Day"),e("th",{class:"border px-2 py-0.5"},"Hour"),e("th",{class:"border px-1 py-0.5"},"Day"),e("th",{class:"border px-2 py-0.5"},"Hour"),e("th",{class:"border px-1 py-0.5"},"Day"),e("th",{class:"border px-2 py-0.5"},"Hour"),e("th",{class:"border px-2 py-0.5"},"Day"),e("th",{class:"border px-2 py-0.5"},"Hour"),e("th",{class:"border px-2 py-0.5"},"CL"),e("th",{class:"border px-2 py-0.5"},"ML"),e("th",{class:"border px-2 py-0.5"},"SL"),e("th",{class:"border px-2 py-0.5"},"WPL"),e("th",{class:"border px-2 py-0.5"},"Delay"),e("th",{class:"border px-2 py-0.5"},"Early")])],-1)),e("tbody",J,[(n(!0),p(m,null,f(i(L),(t,V)=>(n(),p("tr",{key:t==null?void 0:t.date,class:"border-b border-gray-200 hover:bg-blue-200"},[e("td",K,s(V+=1),1),e("td",Q,s(t==null?void 0:t.user),1),e("td",X,s(t==null?void 0:t.designation),1),e("td",Y,s(t==null?void 0:t.total_monthly_days),1),e("td",Z,s(t==null?void 0:t.total_present),1),e("td",g,s(t==null?void 0:t.total_weekend),1),e("td",tt,s(t==null?void 0:t.total_leave),1),e("td",et,s(t==null?void 0:t.total_absent),1),e("td",st,s(t==null?void 0:t.actual_late_day),1),e("td",at,s(t==null?void 0:t.actual_late_hour),1),e("td",rt,s(t==null?void 0:t.total_remain_late_day),1),e("td",dt,s(t==null?void 0:t.total_remain_late_hour),1),e("td",ot,s(t==null?void 0:t.actual_early_day),1),e("td",nt,s(t==null?void 0:t.actual_early_hour),1),e("td",pt,s(t==null?void 0:t.total_remain_early_day),1),e("td",ct,s(t==null?void 0:t.total_remain_early_hour),1),e("td",lt,[e("div",it,s((t==null?void 0:t.total_working_hours)||0),1),e("div",_t,s((t==null?void 0:t.total_shift_hour)||0),1)]),e("td",ut,s(t==null?void 0:t.total_overtime_hours),1),e("td",yt,s(t==null?void 0:t.total_cl_leave),1),e("td",bt,s(t==null?void 0:t.total_ml_leave),1),e("td",xt,s(t==null?void 0:t.total_sl_leave),1),e("td",ht,s(t==null?void 0:t.total_wpl_leave),1),e("td",vt,s(t==null?void 0:t.total_first_short_leave),1),e("td",mt,s(t==null?void 0:t.total_last_short_leave),1),e("td",ft,s(t.total_present_in_weekend),1)]))),128))])])])):(n(),p("div",wt,"Please select company"))]))]))}};export{Bt as default};
