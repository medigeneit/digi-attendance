import{r as x,b as V,c as i,a as e,h as o,F as L,t as d,x as F,q as S,m as p,n as f,f as H,p as A,o as l,l as u,g as $}from"./index-CaMuXalC.js";import{u as h}from"./useTaskStore-CtVgNPtn.js";import{_ as j}from"./CommentModal-CmrFh8sK.js";import"./useCommentStore-COmzRJOM.js";const q={class:"container mx-auto p-6"},z={class:"max-w-3xl mx-auto bg-white shadow-lg rounded-lg p-6"},K={key:0,class:"text-center py-4 text-gray-500"},W={class:"hover:bg-gray-50 grid grid-cols-2"},J={class:"py-2 font-medium col-span-full text-xl"},Q={class:"py-2 font-medium mb-4 col-span-full"},X={class:"flex gap-2 flex-wrap"},Y={class:"py-2"},Z={class:"py-2"},tt={class:"px-4 py-2 flex justify-center items-center gap-2 col-span-full"},st={key:2,class:"text-center py-4 text-red-500"},lt={__name:"TaskShow",setup(ot){const s=h(),N=H(),D=$(),m=x(null),k=x(!1),M=N.params.id;x(!1),V(async()=>{await s.fetchTask(M)});const B=r=>{event.stopPropagation(),D.push({name:"TaskEdit",params:{id:r}})},O=r=>{event.stopPropagation(),m.value=r,k.value=!0},G=()=>{k.value=!1,m.value=null};return(r,t)=>{var y,c,b,v,C,w,T,_,E,P,I,R;const g=A("RouterLink"),U=A("router-view");return l(),i("div",q,[e("div",z,[o(s).loading?(l(),i("div",K,"Loading task details...")):o(s).task?(l(),i(L,{key:1},[e("section",W,[e("div",J,d(o(s).task.title),1),e("div",Q,[t[7]||(t[7]=e("div",{class:"text-xs mb-0.5 text-gray-600 uppercase"},"Assigns",-1)),e("div",X,[(l(!0),i(L,null,F(o(s).task.users,a=>(l(),i("span",{onClick:t[0]||(t[0]=n=>n.stopPropagation()),key:a.id,class:"btn-1 !inline-flex flex-shrink-0"},[t[6]||(t[6]=e("i",{class:"fad fa-user"},null,-1)),u(" "+d(a==null?void 0:a.name),1)]))),128))])]),e("div",Y,[t[8]||(t[8]=e("div",{class:"text-xs mb-0.5 text-gray-600 uppercase"},"Priority",-1)),e("span",{class:S([{"text-green-600":((y=o(s).task)==null?void 0:y.priority)==="LOW","text-yellow-600":((c=o(s).task)==null?void 0:c.priority)==="MEDIUM","text-orange-600":((b=o(s).task)==null?void 0:b.priority)==="HIGH","text-red-600":((v=o(s).task)==null?void 0:v.priority)==="CRITICAL"},"font-semibold"])},d(o(s).task.priority),3)]),e("div",Z,[t[9]||(t[9]=e("div",{class:"text-xs mb-0.5 text-gray-600 uppercase"},"Status",-1)),e("span",{class:S([{"bg-gray-200":((C=o(s).task)==null?void 0:C.status)==="PENDING","bg-blue-200":((w=o(s).task)==null?void 0:w.status)==="IN_PROGRESS","bg-green-200":((T=o(s).task)==null?void 0:T.status)==="COMPLETED","bg-red-200":((_=o(s).task)==null?void 0:_.status)==="BLOCKED"},"px-3 py-0.5 rounded-full"])},d((E=o(s).task)==null?void 0:E.status),3)]),t[13]||(t[13]=e("hr",{class:"my-3 col-span-full"},null,-1)),e("div",tt,[e("button",{onClick:t[1]||(t[1]=a=>{var n;return B((n=o(s).task)==null?void 0:n.id)}),class:"btn-2"},"Edit"),p(g,{to:{name:"TaskUserAssign",params:{id:(P=o(s).task)==null?void 0:P.id}},class:"bg-indigo-500 hover:bg-indigo-600 text-white font-semibold px-3 py-1 rounded-full transition",onClick:t[2]||(t[2]=a=>a.stopPropagation())},{default:f(()=>t[10]||(t[10]=[u(" Assign Users ")])),_:1},8,["to"]),e("button",{onClick:t[3]||(t[3]=a=>{var n;return O(a,(n=o(s).task)==null?void 0:n.id)}),class:"bg-indigo-500 text-white px-3 py-1 rounded-full"}," + Comment "),p(g,{to:{name:"TodoAdd",params:{todoable_id:(I=o(s).task)==null?void 0:I.id}},onClick:t[4]||(t[4]=a=>a.stopPropagation()),class:"py-1 btn-3 ml-auto"},{default:f(()=>t[11]||(t[11]=[u("Add Todo")])),_:1},8,["to"]),p(g,{to:{name:"TaskReports",params:{id:(R=o(s).task)==null?void 0:R.id}},onClick:t[5]||(t[5]=a=>a.stopPropagation()),class:"py-1 btn-3"},{default:f(()=>t[12]||(t[12]=[u("Reports")])),_:1},8,["to"])])]),p(U)],64)):(l(),i("div",st,d(o(s).error||"Task not found."),1))]),p(j,{show:k.value,"commentable-id":m.value,"commentable-type":"task","user-id":r.userId,"on-close":G,onSubmitted:o(s).fetchTasks},null,8,["show","commentable-id","user-id","onSubmitted"])])}}};export{lt as default};
