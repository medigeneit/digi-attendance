import{r as b,b as q,A as w,o as a,c as n,a as e,h as l,w as D,d as p,v as f,t as m,e as k,C as x}from"./index-CF2vbTeX.js";import{u as M}from"./useTaskStore-CGSVsRaJ.js";const N={class:"bg-white shadow-lg rounded-lg p-6"},U={key:0,class:"text-center py-4 text-gray-500"},C={class:"mb-4"},S={key:0,class:"mb-4"},T={class:"grid grid-cols-2 gap-4 mb-4"},V={class:"mb-4"},L={key:1,class:"mb-4 text-red-500 font-medium"},P={class:"flex items-center gap-4"},B=["disabled"],G={key:2,class:"text-center py-4 text-red-500"},j={__name:"TaskEditForm",props:{taskId:{type:[String,Number],required:!0}},emits:["updated","cancel"],setup(E,{emit:I}){const c=E,y=I,s=M(),d=b(!1),g=b([]),o=b({title:"",requirement_id:"",user_ids:"",priority:"MEDIUM",status:"PENDING",description:""});q(async()=>{await s.fetchTask(c.taskId),g.value=s.task.users,o.value={title:s.task.title,requirement_id:s.task.requirement_id,user_ids:s.task.users.map(i=>i.id).join(","),priority:s.task.priority,status:s.task.status,description:s.task.description}}),w(()=>s.task,i=>{o.value={title:i.title,requirement_id:i.requirement_id,user_ids:i.users.map(t=>t.id).join(","),priority:i.priority,status:i.status,description:i.description}});const _=async()=>{var t;d.value=!0;const i={...o.value,user_ids:((t=g.value)==null?void 0:t.map(u=>Number(u.id)))||[]};await s.updateTask(c.taskId,i),d.value=!1,y("updated")};return(i,t)=>{var u,v;return a(),n("div",N,[t[12]||(t[12]=e("h2",{class:"text-2xl font-semibold text-gray-800 mb-4"},"Edit Task",-1)),l(s).loading?(a(),n("div",U,"Loading task details...")):l(s).task?(a(),n("form",{key:1,onSubmit:D(_,["prevent"])},[e("div",C,[t[5]||(t[5]=e("label",{class:"block text-gray-700 font-medium mb-2"},"Task Title",-1)),p(e("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>o.value.title=r),required:"",placeholder:"Enter task title",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[f,o.value.title]])]),l(s).task.requirement?(a(),n("div",S,[t[6]||(t[6]=e("label",{class:"block text-gray-700 font-medium mb-2"},"Requirement",-1)),e("div",null,[e("p",null,m((v=(u=l(s).task)==null?void 0:u.requirement)==null?void 0:v.title),1)])])):k("",!0),e("div",T,[e("div",null,[t[8]||(t[8]=e("label",{class:"block text-gray-700 font-medium mb-2"},"Priority",-1)),p(e("select",{"onUpdate:modelValue":t[1]||(t[1]=r=>o.value.priority=r),class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},t[7]||(t[7]=[e("option",null,"LOW",-1),e("option",null,"MEDIUM",-1),e("option",null,"HIGH",-1),e("option",null,"CRITICAL",-1)]),512),[[x,o.value.priority]])]),e("div",null,[t[10]||(t[10]=e("label",{class:"block text-gray-700 font-medium mb-2"},"Status",-1)),p(e("select",{"onUpdate:modelValue":t[2]||(t[2]=r=>o.value.status=r),class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},t[9]||(t[9]=[e("option",null,"PENDING",-1),e("option",null,"IN_PROGRESS",-1),e("option",null,"COMPLETED",-1),e("option",null,"BLOCKED",-1)]),512),[[x,o.value.status]])])]),e("div",V,[t[11]||(t[11]=e("label",{class:"block text-gray-700 font-medium mb-2"},"Description",-1)),p(e("textarea",{"onUpdate:modelValue":t[3]||(t[3]=r=>o.value.description=r),rows:"4",placeholder:"Enter task description",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[f,o.value.description]])]),l(s).error?(a(),n("div",L,m(l(s).error),1)):k("",!0),e("div",P,[e("button",{disabled:d.value,type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold px-5 py-2 rounded transition"},m(d.value?"Updating...":"Update Task"),9,B),e("button",{type:"button",onClick:t[4]||(t[4]=r=>y("close")),class:"bg-gray-200 hover:bg-gray-300 text-gray-700 font-semibold px-5 py-2 rounded transition"}," Cancel ")])],32)):(a(),n("div",G,m(l(s).error||"Task not found."),1))])}}};export{j as _};
