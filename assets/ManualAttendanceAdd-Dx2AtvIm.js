import{u as U,r as f,c as i,a as t,l as w,m as _,w as q,d as o,v as r,B,t as D,e as T,g as $,n as P,o as d,k as F}from"./index-CVSXhuDy.js";import{u as L}from"./manual-attendance-Bo_-Zd8_.js";import{L as N}from"./LoaderView-BLORUj15.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const O={class:"max-w-3xl mx-auto p-4 space-y-4"},H={class:"flex items-center justify-between gap-2"},I={key:0,class:"text-center"},j={key:0,class:"text-red-500 text-sm"},K={__name:"ManualAttendanceAdd",setup(E){const c=$(),g=L(),m=U(),v=a=>{if(!a)return null;const e=a.match(/(\d+):(\d+)\s*(AM|PM)/i);if(!e)return null;let[u,n,R,b]=e;return n=parseInt(n,10),b.toUpperCase()==="PM"&&n<12&&(n+=12),b.toUpperCase()==="AM"&&n===12&&(n=0),`${n.toString().padStart(2,"0")}:${R}`},{date:k,type:M,entry_time:y,exit_time:x}=c.currentRoute.value.query,A=k||new Date().toISOString().split("T")[0],S=y?v(y):"",V=x?v(x):"",l=f({date:A,type:M||"",check_in:S||"",check_out:V||"",description:""}),p=f(!1),s=f(null),h=async()=>{var a;p.value=!0,s.value=null;try{const e={user_id:(a=m==null?void 0:m.user)==null?void 0:a.id,...l.value,check_in:l.value.check_in?`${l.value.date} ${l.value.check_in}:00`:null,check_out:l.value.check_out?`${l.value.date} ${l.value.check_out}:00`:null},u=await g.createManualAttendance(e);c.push({name:"ManualAttendanceShow",params:{id:u.id}})}catch(e){s.value=e.message||"Failed to submit manual attendance request."}finally{p.value=!1}},C=()=>{c.go(-1)};return(a,e)=>{const u=P("RouterLink");return d(),i("div",O,[t("div",H,[t("button",{class:"btn-3",onClick:C},e[5]||(e[5]=[t("i",{class:"far fa-arrow-left"},null,-1),t("span",{class:"hidden md:flex"},"Back",-1)])),e[7]||(e[7]=t("h1",{class:"title-md md:title-lg flex-wrap text-center"},"Manual Attendance Request Form",-1)),t("div",null,[w(u,{to:"/",class:"btn-2"},{default:_(()=>e[6]||(e[6]=[F("Home")])),_:1})])]),p.value?(d(),i("div",I,[w(N)])):(d(),i("form",{key:1,onSubmit:q(h,["prevent"]),class:"space-y-4 card-bg md:p-8 p-4"},[t("div",null,[e[8]||(e[8]=t("label",{for:"date",class:"block text-sm font-medium"},"Date",-1)),o(t("input",{type:"date",id:"date","onUpdate:modelValue":e[0]||(e[0]=n=>l.value.date=n),class:"input-1 w-full",required:""},null,512),[[r,l.value.date]])]),t("div",null,[e[10]||(e[10]=t("label",{for:"type",class:"block text-sm font-medium"},"Type",-1)),o(t("select",{id:"type","onUpdate:modelValue":e[1]||(e[1]=n=>l.value.type=n),class:"input-1 w-full",required:""},e[9]||(e[9]=[t("option",{value:""},"Select Type",-1),t("option",{value:"Home Office"},"Home Office",-1),t("option",{value:"Remote Work"},"Remote Work",-1),t("option",{value:"Forget Punch"},"Forget Punch",-1)]),512),[[B,l.value.type]])]),t("div",null,[e[11]||(e[11]=t("label",{for:"check-in",class:"block text-sm font-medium"},"Check-In",-1)),o(t("input",{type:"time",id:"check-in","onUpdate:modelValue":e[2]||(e[2]=n=>l.value.check_in=n),class:"input-1 w-full"},null,512),[[r,l.value.check_in]])]),t("div",null,[e[12]||(e[12]=t("label",{for:"check-out",class:"block text-sm font-medium"},"Check-Out",-1)),o(t("input",{type:"time",id:"check-out","onUpdate:modelValue":e[3]||(e[3]=n=>l.value.check_out=n),class:"input-1 w-full"},null,512),[[r,l.value.check_out]])]),t("div",null,[e[13]||(e[13]=t("label",{for:"description",class:"block text-sm font-medium"},"Description",-1)),o(t("textarea",{id:"description","onUpdate:modelValue":e[4]||(e[4]=n=>l.value.description=n),class:"input-1 w-full",placeholder:"Enter a description of the reason for manual attendance",required:""},null,512),[[r,l.value.description]])]),s.value?(d(),i("div",j,D(s.value),1)):T("",!0),e[14]||(e[14]=t("div",{class:"flex justify-center"},[t("button",{type:"submit",class:"btn-2"},"Submit")],-1))],32))])}}};export{K as default};
