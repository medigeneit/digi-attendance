import{u as V,r as o,z as q,b as O,c as d,a as t,l as x,m as R,w as B,t as w,h as _,d as u,v as i,e as D,n as H,o as m,k as C,g as L}from"./index-BvbUXIE8.js";import{L as N}from"./LoaderView-CZj9Kpyo.js";import{_ as A}from"./MultiselectDropdown-CQ_5N6bs.js";import{u as M}from"./exchange-AFQYH7yB.js";import{u as W}from"./user-DKyF1m7m.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vue-multiselect.esm-Sn6ejDs_.js";const j={class:"max-w-3xl mx-auto p-4 space-y-4"},F={class:"flex items-center justify-between gap-2"},T={key:0,class:"text-center"},z={class:"title-lg text-center"},$={key:0,class:"text-red-500 text-sm"},Z={__name:"OffdayExchangeAdd",setup(G){const g=L(),E=M(),k=W(),n=V(),f=o(null),p=o(!1),a=o({exchange_type:"offday",current_date:"",exchange_date:"",works_in_hand:"",handover_user_id:""});q(()=>f.value,l=>{a.value.handover_user_id=l==null?void 0:l.id,p.value=!1});const c=o(!1),r=o(null),U=async()=>{var l;c.value=!0,r.value=null;try{const e={user_id:(l=n==null?void 0:n.user)==null?void 0:l.id,...a.value};if(!a.value.handover_user_id){p.value=!0;return}const v=await E.createExchange(e);g.push({name:"ExchangeOffdayShow",params:{id:v.id}})}catch(e){r.value=e.message||"Failed to submit offday exchange request"}finally{c.value=!1}};O(()=>{k.fetchHandoverDepartmentWiseEmployees(),n.fetchUser()});const S=()=>{g.go(-1)};return(l,e)=>{var y,b,h;const v=H("RouterLink");return m(),d("div",j,[t("div",F,[t("button",{class:"btn-3",onClick:S},e[5]||(e[5]=[t("i",{class:"far fa-arrow-left"},null,-1),t("span",{class:"hidden md:flex"},"Back",-1)])),e[7]||(e[7]=t("h1",{class:"title-md md:title-lg flex-wrap text-center"},"Offday Exchange Request",-1)),t("div",null,[x(v,{to:"/",class:"btn-2"},{default:R(()=>e[6]||(e[6]=[C("Home")])),_:1})])]),c.value?(m(),d("div",T,[x(N)])):(m(),d("form",{key:1,onSubmit:B(U,["prevent"]),class:"space-y-4 card-bg md:p-8 p-4"},[t("div",null,[t("h4",z,w((h=(b=(y=_(n))==null?void 0:y.user)==null?void 0:b.company)==null?void 0:h.name),1),e[8]||(e[8]=t("p",{class:"text-center"},"Offday Exchange Application",-1))]),t("div",null,[e[9]||(e[9]=t("label",{for:"current-date",class:"block text-sm font-medium"},"Holiday/Weekend (Date)",-1)),u(t("input",{type:"date",id:"current-date","onUpdate:modelValue":e[0]||(e[0]=s=>a.value.current_date=s),class:"input-1 w-full",required:""},null,512),[[i,a.value.current_date]])]),t("div",null,[e[10]||(e[10]=t("label",{for:"exchange-date",class:"block text-sm font-medium"},"Exchange Date",-1)),u(t("input",{type:"date",id:"exchange-date","onUpdate:modelValue":e[1]||(e[1]=s=>a.value.exchange_date=s),class:"input-1 w-full",required:""},null,512),[[i,a.value.exchange_date]])]),t("div",null,[e[11]||(e[11]=t("label",{for:"works-in-hand",class:"block text-sm font-medium"},"Reason",-1)),u(t("textarea",{id:"works-in-hand","onUpdate:modelValue":e[2]||(e[2]=s=>a.value.reason=s),class:"input-1 w-full",placeholder:"Enter details of reason"},null,512),[[i,a.value.reason]])]),t("div",null,[e[12]||(e[12]=t("label",{for:"works-in-hand",class:"block text-sm font-medium"},"Works in Hand (Optional)",-1)),u(t("textarea",{id:"works-in-hand","onUpdate:modelValue":e[3]||(e[3]=s=>a.value.works_in_hand=s),class:"input-1 w-full",placeholder:"Enter details of works in hand"},null,512),[[i,a.value.works_in_hand]])]),t("div",null,[e[13]||(e[13]=t("label",{for:"handover-user",class:"block text-sm font-medium"},"Handover User",-1)),x(A,{modelValue:f.value,"onUpdate:modelValue":e[4]||(e[4]=s=>f.value=s),options:_(k).handoverUsers,multiple:!1,required:p.value,label:"Select User",labelFor:"user"},null,8,["modelValue","options","required"])]),r.value?(m(),d("div",$,w(r.value),1)):D("",!0),e[14]||(e[14]=t("div",{class:"flex justify-center"},[t("button",{type:"submit",class:"btn-2"},"Submit")],-1))],32))])}}};export{Z as default};
