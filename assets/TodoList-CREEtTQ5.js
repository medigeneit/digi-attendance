import{r as N,A as se,x as O,c as p,o as u,a as e,I as T,g,F as B,y as ee,t as w,w as h,q as A,n as S,f as M,i as C,k,e as G,J as te,j as I,h as K,v as z,Z as U,$ as q}from"./index-D7gheMw-.js";import{L as W}from"./LoaderView-BpKVuETn.js";import{f as ae,b as H,g as oe}from"./datetime-l2Vm98rT.js";import{_ as ie}from"./CalenderView-C0peOECa.js";import{u as F}from"./useTodoStore-Cpu6xNfV.js";import{O as Y}from"./OverlyModal-BOO7y6y1.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const de={class:"px-4 py-2 flex items-center bg-gray-50 group gap-2"},re=["value"],ue=["value"],ce=["value"],me=["value"],ve=["disabled"],ye={key:4,class:"ml-4 md:ml-auto flex items-center gap-2"},pe={key:5,class:"ml-4 md:ml-auto flex items-center gap-2"},fe={__name:"TodoHeading",props:{selectedType:{type:String,default:"month-view"},selectedValue:{type:String,default:""},selected:{type:Object,default:()=>({type:"month-view",month:"",day:"",year:"",week:""})},loading:{type:Boolean,default:!1}},emits:["reloadClick",,"change"],setup(d,{emit:b}){const l=d,n=[{value:"month-view",label:"Monthly"},{value:"day-view",label:"Daily"}],m=b,t=N();function a(c){t.value=c,m("change",{...l.selected,type:c})}se(()=>{var c;return(c=l.selected)==null?void 0:c.type},c=>a(c),{immediate:!0});const i=O(()=>t.value=="month-view"&&l.selected.year&&l.selected.month?[l.selected.year,l.selected.month-1,1]:t.value=="day-view"&&l.selected.year&&l.selected.month&&l.selected.day?[l.selected.year,l.selected.month-1,l.selected.day]:[new Date().getFullYear(),new Date().getMonth(),new Date().getDate()]);function s(){t.value=="month-view"&&x(new Date)}function r(){if(t.value=="month-view"){const c=new Date(...i.value);c.setMonth(c.getMonth()+1),x(c)}}function o(){if(t.value=="month-view"){const c=new Date(...i.value);c.setMonth(c.getMonth()-1),x(c)}}function v(){t.value=="day-view"&&x(new Date)}function y(){if(t.value=="day-view"){const c=new Date(...i.value);c.setDate(c.getDate()+1),x(c)}}function $(){if(t.value=="day-view"){const c=new Date(...i.value);c.setDate(c.getDate()-1),x(c)}}function x(c){m("change",{type:t.value,month:c.getMonth()+1,day:c.getDate(),year:c.getFullYear(),week:c.getDay()})}const P=O(()=>t.value=="month-view"?`${l.selected.year}-${l.selected.month.toString().padStart(2,"0")}`:t.value=="day-view"?`${l.selected.year}-${l.selected.month.toString().padStart(2,"0")}-${l.selected.day.toString().padStart(2,"0")}`:l.selected),j=c=>{var E,f;if(t.value=="month-view"){const[_,D]=(E=c.target.value)==null?void 0:E.split("-").map(Number),L=new Date(_,D-1,1);x(L)}if(t.value=="day-view"){const _=new Date((f=c.target)==null?void 0:f.value);x(_)}};return(c,E)=>(u(),p("div",null,[e("div",de,[T(c.$slots,"before",{selected:d.selected}),T(c.$slots,"typeSelection",{selected:d.selected,types:n,changeType:a},()=>[e("select",{class:"px-2 h-7 border rounded",value:t.value,onChange:E[0]||(E[0]=f=>a(f.target.value))},[(u(),p(B,null,ee(n,f=>e("option",{value:f.value,key:f.id},w(f.label),9,ue)),64))],40,re)]),t.value=="month-view"?(u(),p("input",{key:0,type:"month",value:P.value,onInput:j,class:"border px-2 rounded"},null,40,ce)):g("",!0),t.value=="day-view"?(u(),p("input",{key:1,type:"date",value:P.value,onInput:j,class:"border px-2 rounded"},null,40,me)):g("",!0),t.value=="month-view"?(u(),p("button",{key:2,class:"btn-3 mx-4 h-7",onClick:h(s,["prevent"])}," Current Month ")):g("",!0),t.value=="day-view"?(u(),p("button",{key:3,class:"btn-3 mx-4 h-7",onClick:h(v,["prevent"])}," Today ")):g("",!0),e("button",{class:A(["btn-3 px-2 py-2 mx-4 size-7 disabled:text-gray-300 disabled:border-gray-300",{"animate-spin text-gray-300 border-gray-300 !bg-opacity-0":d.loading}]),onClick:E[1]||(E[1]=h(f=>m("reloadClick"),["prevent"])),disabled:d.loading},E[2]||(E[2]=[e("i",{class:"fas fa-redo-alt"},null,-1)]),10,ve),t.value=="month-view"?(u(),p("div",ye,[e("button",{class:"btn-2 h-7",onClick:h(o,["prevent"])}," Previous Month "),e("button",{class:"btn-2 h-7",onClick:h(r,["prevent"])},"Next Month")])):g("",!0),t.value=="day-view"?(u(),p("div",pe,[e("button",{class:"btn-2 h-7",onClick:h($,["prevent"])},"Previous Day"),e("button",{class:"btn-2 h-7",onClick:h(y,["prevent"])},"Next Day")])):g("",!0),T(c.$slots,"after",{selected:d.selected})]),T(c.$slots,"bottom",{selected:d.selected})]))}},be={key:0,class:"fa fa-exclamation-circle",title:"Pending"},ge={key:1,class:"fa fa-exclamation-square",title:"Wording"},ke={key:2,class:"fa fa-check-square",title:"Completed"},J={__name:"TodoStatusIcon",props:{todo:{type:Object,required:!0}},setup(d){const b=d,l=O(()=>{switch(b.todo.status){case"PENDING":return"text-red-400";case"WORKING":return"text-yellow-400";case"COMPLETED":return"text-green-400"}return""});return(n,m)=>(u(),p("span",{class:A(l.value)},[d.todo.status=="PENDING"?(u(),p("i",be)):g("",!0),d.todo.status=="WORKING"?(u(),p("i",ge)):g("",!0),d.todo.status=="COMPLETED"?(u(),p("i",ke)):g("",!0)],2))}},he=["onClick","title"],xe={class:"line-clamp-1"},we={key:0,class:"text-purple-600 text-center"},ne={__name:"TodosInDate",props:{date:{type:String,required:!0},maxItems:{type:[Number,String],default:3}},emits:["clickTodo"],setup(d,{emit:b}){const l=d,n=b,{getTodosByDate:m}=F(),t=O(()=>{let a=[],i=!1,s=[];if(typeof m=="function"){const r=m(l.date);if(s=Array.isArray(r)?r:[],l.maxItems==="all")return{all:s,items:s,moreItemsCount:0};a=s.slice(0,l.maxItems),i=s.length-a.length}return{all:s,items:a,moreItemsCount:i}});return(a,i)=>(u(),p("div",null,[t.value.items.length===0?T(a.$slots,"noTodos",{key:0},()=>[i[0]||(i[0]=e("div",{class:"text-gray-400 text-center"},"No todos",-1))]):(u(),p(B,{key:1},[(u(!0),p(B,null,ee(t.value.items,s=>T(a.$slots,"todoItem",{key:s.id,todo:s,moreItemsCount:t.value.moreItemsCount},()=>[e("div",{class:A(["px-1 mb-2 text-sm rounded cursor-pointer flex items-center gap-2",{"bg-sky-50 text-sky-900 hover:bg-sky-700 hover:text-white border border-sky-300":s.status!=="COMPLETED","bg-green-500 text-white":s.status==="COMPLETED"}]),onClick:h(r=>n("clickTodo",s),["prevent","stop"]),title:s.title},[S(J,{todo:s,class:A(["text-sm",[s.status=="COMPLETED"?"!text-white":""]])},null,8,["todo","class"]),e("div",xe,w(s.title),1)],10,he)])),128)),t.value.moreItemsCount>0?(u(),p("div",we," + "+w(t.value.moreItemsCount)+" more todo"+w(t.value.moreItemsCount>1?"s":""),1)):g("",!0)],64))]))}},Ce={class:"relative"},$e=["onClick","onKeypress"],De={class:"flex items-center justify-center"},_e=["onClick"],Te={__name:"TodosInCalenderView",props:{month:{type:String,required:!0,validator:d=>/^\d{4}-(0[1-9]|1[0-2])$/.test(d)}},emits:["dateClick","clickTodo","clickDateCell"],setup(d,{emit:b}){const l=b;function n(t,a){t.isTrusted&&t.ctrlKey&&t.which==10&&l("dateClick",a)}function m(t){const[a,i,s]=String(t).split("-").map(Number),r=new Date(a,i-1,s);return ae(r)}return(t,a)=>(u(),p("div",Ce,[d.month?(u(),M(ie,{key:0,month:d.month,class:"border-t border-blue-200/50 relative"},{date:C(({day:i,yearMonthDate:s,isCurrentMonth:r})=>[e("div",{tabindex:"0",class:A(["border p-4 cursor-pointer group/date relative",{"bg-rose-50  border-rose-300 focus:bg-rose-50 focus:outline-rose-400":m(s),"hover:bg-sky-50  hover:border-blue-300 focus:bg-sky-50 focus:outline-blue-400":!m(s)}]),onClick:h(o=>l("dateClick",s),["prevent","stop"]),onKeypress:h(o=>n(o,s),["prevent"])},[e("button",{tabindex:"1",class:A([{"text-gray-300":!r,"text-sky-400":r},"text-center mb-2 font-semibold hover:bg-sky-200 w-full rounded"])},w(i),3),e("div",null,[S(ne,{date:s,onClickTodo:a[0]||(a[0]=o=>l("clickTodo",o))},{noTodos:C(()=>a[1]||(a[1]=[e("span",null,null,-1)])),_:2},1032,["date"])]),e("div",De,[e("button",{onClick:h(o=>l("clickDateCell",s),["prevent","stop"]),class:"btn-3 !py-1 invisible group-hover/date:visible text-sm text-red-800/40"},a[2]||(a[2]=[e("i",{class:"fas fa-plus"},null,-1),e("span",{class:"hidden lg:inline whitespace-nowrap"}," Add todo ",-1)]),8,_e)])],42,$e)]),_:1},8,["month"])):g("",!0)]))}},Se={class:"relative bg-white p-4"},Ee={class:"max-w-6xl mx-auto border rounded my-10"},Me={class:"mb-4 text-gray-700 border-b py-2 px-4 flex items-center"},Ie={class:"text-lg font-semibold"},Ne={class:"ml-auto"},Oe=["onClick"],Le={class:"line-clamp-2 ml-2"},Pe={key:0,class:"line-clamp-2 ml-2 text-gray-500"},Ae={class:"ml-auto flex items-center gap-2"},je=["onClick"],Fe=["onClick"],Ve=["onClick"],Re={__name:"TodosInDailyView",props:{date:{type:String,required:!0}},emits:["clickTodo","clickAdd","clickEdit","clickDelete","clickChangeStatus","backClick","update"],setup(d,{emit:b}){const l=d,n=b,m=O(()=>new Date(l.date)),t=F();async function a(s){confirm(`Are your sure want to delete todo
'${s==null?void 0:s.title}'`)&&(await t.deleteTodo(s.id),n("update"))}async function i(s){confirm(`Are your sure want to compete todo
'${s==null?void 0:s.title}'`)&&(await t.updateTodoStatus(s.id,"COMPLETED"),n("update"))}return(s,r)=>(u(),p("div",Se,[e("div",Ee,[e("div",Me,[e("button",{class:"fa fa-arrow-left btn-icon mr-2",onClick:r[0]||(r[0]=h(o=>n("backClick"),["prevent"]))}),e("div",Ie,w(k(H)(m.value,{weekDay:"long"})),1),e("div",Ne,[e("button",{class:"btn btn-icon",onClick:r[1]||(r[1]=h(o=>n("clickAdd",l.date),["prevent"]))},r[2]||(r[2]=[e("i",{class:"fas fa-plus"},null,-1)]))])]),S(ne,{date:d.date,"max-items":10,class:"my-8 w-full px-4"},{todoItem:C(({todo:o})=>[e("div",{class:"border rounded px-4 py-3 my-4 hover:bg-sky-50 cursor-pointer flex items-center",onClick:h(v=>n("clickTodo",o),["prevent"])},[S(J,{todo:o},null,8,["todo"]),e("div",Le,w(o.title),1),o.todo_type&&o.todo_type_id?(u(),p("div",Pe,w(o.todo_type)+" id "+w(o.todo_type_id),1)):g("",!0),e("div",Ae,[o.status==="WORKING"?(u(),p("button",{key:0,class:"btn-icon bg-green-400 text-white hover:bg-green-600 hover:text-white",onClick:h(()=>i(o),["prevent","stop"])},r[3]||(r[3]=[e("i",{class:"fas fa-check"},null,-1)]),8,je)):g("",!0),e("button",{class:"btn-icon bg-sky-400 text-white hover:bg-sky-600 hover:text-white",onClick:h(v=>n("clickEdit",o),["prevent","stop"])},r[4]||(r[4]=[e("i",{class:"fas fa-pen"},null,-1)]),8,Fe),e("button",{class:"btn-icon bg-red-400 text-white hover:bg-red-600 hover:text-white",onClick:h(()=>a(o),["prevent","stop"])},r[5]||(r[5]=[e("i",{class:"fas fa-trash-alt"},null,-1)]),8,Ve)])],8,Oe)]),noTodos:C(()=>r[6]||(r[6]=[e("div",{class:"flex min-h-[38vh] items-center justify-center text-gray-400 text-center rounded-md"}," No Todos ",-1)])),_:1},8,["date"])])]))}},Ue={class:"bg-white border-t px-4 py-4 sticky bottom-0 rounded-b-md"},qe={key:0,class:"mb-4 text-red-500 font-medium"},Be={key:1,class:"mb-4 text-blue-500 font-medium"},Ke={class:"flex justify-between items-center gap-4"},ze=["disabled"],le={__name:"FormHandler",props:{isSubmitting:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},error:{type:String,default:""}},emits:["submit","clickCancel"],setup(d,{emit:b}){const l=b;return(n,m)=>(u(),p("form",{onSubmit:m[1]||(m[1]=h(t=>l("submit"),["prevent"]))},[T(n.$slots,"default"),e("div",Ue,[d.error?(u(),p("div",qe,w(d.error),1)):g("",!0),d.isSubmitting?(u(),p("div",Be,"Saving changes...")):g("",!0),T(n.$slots,"footer",{},()=>[e("div",Ke,[e("button",{type:"button",onClick:m[0]||(m[0]=t=>l("clickCancel")),class:"btn-3"},"Cancel"),e("button",{disabled:d.isSubmitting||d.isLoading,type:"submit",class:"btn-2"},w(d.isSubmitting?"Saving...":"Save"),9,ze)])])])],32))}},Ge={class:""},We={class:"p-4 min-h-[10vh] max-h-[50vh] overflow-y-auto"},He={class:"mb-2"},Ye={class:"mb-4"},Je={class:"mb-4"},Ze={__name:"TodoAddForm",props:{date:{type:String,default:oe(new Date)}},emits:["update","cancelClick"],setup(d,{emit:b}){const l=d,n=N(),m=N(),t=F(),a=b,i=N({title:"",date:l.date||"",task_id:""});async function s(){try{n.value="submitting",await t.createTodo(i.value),a("update")}finally{n.value=""}}const r=O(()=>new Date(l.date));return G(async()=>{var o;await te(),(o=m.value)==null||o.focus()}),(o,v)=>(u(),p("div",Ge,[k(t).loading?(u(),M(W,{key:0,class:"absolute inset-0 bg-opacity-80 text-center py-4 text-gray-500 z-10 flex items-center justify-center"},{default:C(()=>v[3]||(v[3]=[I(" Loading... ")])),_:1,__:[3]})):g("",!0),S(le,{onSubmit:s,onClickCancel:v[2]||(v[2]=y=>a("cancelClick")),isSubmitting:n.value=="submitting",error:k(t).error,class:"rounded-md relative"},{default:C(()=>[v[7]||(v[7]=e("div",{class:"border-b py-2 px-4"},[e("h2",{class:"text-xl font-semibold"},"Add Todo")],-1)),e("div",We,[e("div",He,[v[4]||(v[4]=e("span",{class:"font-semibold"}," Date ",-1)),e("span",null,w(k(H)(r.value,{weekDay:"long"})),1)]),e("div",Ye,[v[5]||(v[5]=e("label",{class:"block text-gray-700 font-medium mb-2"},"Title",-1)),K(e("input",{ref_key:"titleRef",ref:m,"onUpdate:modelValue":v[0]||(v[0]=y=>i.value.title=y),required:"",placeholder:"Enter todo title",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[z,i.value.title]])]),e("div",Je,[v[6]||(v[6]=e("label",{class:"block text-gray-700 font-medium mb-2"},"Task ID (optional)",-1)),K(e("input",{"onUpdate:modelValue":v[1]||(v[1]=y=>i.value.task_id=y),placeholder:"Enter a task id",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[z,i.value.task_id]])])])]),_:1,__:[7]},8,["isSubmitting","error"])]))}},Qe={class:"relative"},Xe={class:"p-4 min-h-[10vh] max-h-[50vh] overflow-y-auto"},et={class:"mb-2"},tt={class:"mb-4"},ot={class:"mb-4"},nt={__name:"TodoEditForm",props:{date:{type:String,default:oe(new Date)},todo:{type:Object,default:()=>{}}},emits:["update","cancelClick"],setup(d,{emit:b}){const l=d,n=N(),m=N(),t=F(),a=b,i=N({title:"",todo_type:"task",todo_type_id:""});async function s(){var v,y,$;await t.fetchTodo((v=l.todo)==null?void 0:v.id),i.value.title=(y=t.todo)==null?void 0:y.title,i.value.todo_type_id=($=t.todo)==null?void 0:$.todoable_id}async function r(){n.value="submitting";try{await t.updateTodo(l.todo.id,i.value),a("update")}finally{n.value=""}}const o=O(()=>new Date(l.date));return G(async()=>{var v;await s(),await te(),(v=m.value)==null||v.focus()}),(v,y)=>(u(),p("div",Qe,[k(t).loading?(u(),M(W,{key:0,class:"absolute inset-0 bg-opacity-80 text-center py-4 text-gray-500 z-10 flex items-center justify-center"},{default:C(()=>y[3]||(y[3]=[I(" Loading... ")])),_:1,__:[3]})):g("",!0),S(le,{onSubmit:r,onClickCancel:y[2]||(y[2]=$=>a("cancelClick")),isSubmitting:n.value=="submitting",isLoading:k(t).loading,error:k(t).error},{default:C(()=>[y[7]||(y[7]=e("div",{class:"border-b py-2 px-4"},[e("h2",{class:"text-xl font-semibold"},"Edit Todo")],-1)),e("div",Xe,[e("div",et,[y[4]||(y[4]=e("span",{class:"font-semibold"}," Date ",-1)),e("span",null,w(k(H)(o.value,{weekDay:"long"})),1)]),e("div",tt,[y[5]||(y[5]=e("label",{class:"block text-gray-700 font-medium mb-2"},"Title",-1)),K(e("input",{ref_key:"titleRef",ref:m,"onUpdate:modelValue":y[0]||(y[0]=$=>i.value.title=$),required:"",placeholder:"Enter todo title",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[z,i.value.title]])]),e("div",ot,[y[6]||(y[6]=e("label",{class:"block text-gray-700 font-medium mb-2"},"Task ID (optional)",-1)),K(e("input",{"onUpdate:modelValue":y[1]||(y[1]=$=>i.value.todo_type_id=$),placeholder:"Enter a task id",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[z,i.value.todo_type_id]])])])]),_:1,__:[7]},8,["isSubmitting","isLoading","error"])]))}},lt={class:"relative"},st={class:"min-h-[10vh] max-h-[50vh] overflow-y-auto p-4"},at={class:"mb-4"},it={class:"mb-4"},dt={class:"flex items-center gap-4"},rt={key:0,class:"flex items-center gap-2"},ut={class:"flex justify-between items-center gap-4 py-4 px-4 border-t"},ct={class:"ml-auto flex items-center gap-2"},mt={__name:"TodoShow",props:{todo:{type:Object,default:()=>{}}},emits:["cancelClick","clickEdit","update"],setup(d,{emit:b}){const l=d,n=F(),m=b;async function t(){var r;await n.fetchTodo((r=l.todo)==null?void 0:r.id)}const a=O(()=>{var r,o;return(r=n.todo)!=null&&r.date?new Date((o=n.todo)==null?void 0:o.date):null});async function i(r){var o;confirm(`Are your sure want to delete todo
'${(o=n.todo)==null?void 0:o.title}'`)&&(await n.deleteTodo(r.id),m("update"))}async function s(r,o){var v;confirm(`Are your sure want to compete todo
'${(v=n.todo)==null?void 0:v.title}'`)&&(await n.updateTodoStatus(r.id,o),m("update"))}return G(async()=>{await t()}),(r,o)=>{var v,y,$,x,P,j;return u(),p("div",lt,[k(n).loading?(u(),M(W,{key:0,class:"absolute inset-0 bg-opacity-80 text-center py-4 text-gray-500 z-10 flex items-center justify-center"},{default:C(()=>o[5]||(o[5]=[I(" Loading... ")])),_:1,__:[5]})):g("",!0),e("div",null,[o[11]||(o[11]=e("div",{class:"border-b py-2 px-4"},[e("h2",{class:"text-xl font-semibold"},"Show Todo")],-1)),e("div",st,[e("div",at,[o[6]||(o[6]=e("div",{class:"font-semibold text-xs text-gray-500"},"Date",-1)),e("span",null,w(k(H)(a.value,{weekDay:"long"})),1)]),e("div",it,[o[7]||(o[7]=e("div",{class:"text-xs text-gray-500"},"Todo",-1)),I(" "+w((v=k(n).todo)==null?void 0:v.title),1)]),e("div",null,[o[10]||(o[10]=e("div",{class:"text-xs text-gray-500"},"Status",-1)),e("div",dt,[e("div",null,[(y=k(n))!=null&&y.todo?(u(),M(J,{key:0,todo:($=k(n))==null?void 0:$.todo},null,8,["todo"])):g("",!0),I(" "+w((x=k(n).todo)==null?void 0:x.status),1)]),k(n).loading?g("",!0):(u(),p("div",rt,[((P=k(n).todo)==null?void 0:P.status)==="PENDING"?(u(),p("button",{key:0,class:"btn-2 from-yellow-700 to-yellow-500 text-white hover:bg-green-600 hover:text-white",onClick:o[0]||(o[0]=h(()=>s(k(n).todo,"WORKING"),["prevent","stop"]))},o[8]||(o[8]=[e("i",{class:"fas fa-exclamation-circle"},null,-1),I(" Change to Working ")]))):g("",!0),((j=k(n).todo)==null?void 0:j.status)==="WORKING"?(u(),p("button",{key:1,class:"btn-2 from-green-700 to-green-300 text-white hover:bg-green-600 hover:text-white",onClick:o[1]||(o[1]=h(()=>s(k(n).todo,"COMPLETED"),["prevent","stop"]))},o[9]||(o[9]=[e("i",{class:"fas fa-check"},null,-1),I(" Make Complete ")]))):g("",!0)]))])])])]),e("div",ut,[e("button",{type:"button",onClick:o[2]||(o[2]=c=>m("cancelClick")),class:"btn-3"},"Cancel"),e("div",ct,[e("button",{class:"btn-2 bg-sky-400 text-white hover:bg-sky-600 hover:text-white",onClick:o[3]||(o[3]=h(c=>m("clickEdit",k(n).todo),["prevent","stop"]))},o[12]||(o[12]=[e("i",{class:"fas fa-pen"},null,-1),I(" Edit ")])),e("button",{class:"btn-2-red",onClick:o[4]||(o[4]=h(()=>i(k(n).todo),["prevent","stop"]))},o[13]||(o[13]=[e("i",{class:"fas fa-trash-alt"},null,-1),I(" Delete ")]))])])])}}},vt={__name:"TodoCreateEditShow",props:{todoModal:{type:Object,required:!0}},emits:["cancelClick","update","clickEdit","clickDelete","clickChangeStatus"],setup(d,{emit:b}){const l=b;function n(){l("update")}return(m,t)=>(u(),p(B,null,[d.todoModal.action=="add"?(u(),M(Y,{key:0},{default:C(()=>{var a;return[S(Ze,{onCancelClick:t[0]||(t[0]=i=>l("cancelClick")),onUpdate:n,date:(a=d.todoModal)==null?void 0:a.date},null,8,["date"])]}),_:1})):g("",!0),d.todoModal.action=="edit"?(u(),M(Y,{key:1},{default:C(()=>{var a;return[S(nt,{onCancelClick:t[1]||(t[1]=i=>l("cancelClick")),onUpdate:n,todo:(a=d.todoModal)==null?void 0:a.todo},null,8,["todo"])]}),_:1})):g("",!0),d.todoModal.action=="show"?(u(),M(Y,{key:2},{default:C(()=>{var a;return[S(mt,{onCancelClick:t[2]||(t[2]=i=>l("cancelClick")),onUpdate:n,onClickEdit:t[3]||(t[3]=i=>l("clickEdit",i)),onClickDelete:t[4]||(t[4]=i=>l("clickDelete",i)),onClickChangeStatus:t[5]||(t[5]=(i,s)=>l("clickChangeStatus",i,s)),todo:(a=d.todoModal)==null?void 0:a.todo},null,8,["todo"])]}),_:1})):g("",!0)],64))}},yt={class:"border bg-white relative"},pt={__name:"TodoSection",props:{year:{type:Number,default:()=>new Date().getFullYear()},month:{type:Number,default:()=>new Date().getMonth()+1},day:{type:Number,default:()=>new Date().getDate()},week:{type:Number,default:()=>new Date().getDay()},viewType:{type:String,default:"month-view"}},setup(d){const b=new Date,l=d,n=N({type:"month-view",month:b.getMonth()+1,day:b.getDate(),year:b.getFullYear(),week:b.getDay()}),m=N({action:null}),t=F();async function a(){await t.fetchTodos()}function i(){m.value={...m.value,action:""}}async function s(f,_){await t.updateTodoStatus(f,_)}async function r(f){await t.deleteTodo(f)}function o(){n.value={...n.value,type:"month-view"}}function v(f){n.value={...n.value,...f}}function y(f){const[_,D,L]=f.split("-").map(Number);n.value={...n.value,type:"day-view",year:_,month:D,day:L}}function $(f){m.value={...m.value,action:"show",todo:f}}function x(f){m.value={...m.value,action:"edit",todo:f}}function P(f){m.value={...m.value,action:"add",date:f}}function j(){m.value={action:null,todo:null}}const c=O(()=>{var L,V,R,Z,Q,X;const f=(V=(L=n.value)==null?void 0:L.year)==null?void 0:V.toString(),_=(Z=(R=n.value)==null?void 0:R.month)==null?void 0:Z.toString().padStart(2,"0"),D=(X=(Q=n.value)==null?void 0:Q.day)==null?void 0:X.toString().padStart(2,"0");return`${f}-${_}-${D}`}),E=O(()=>{var D,L,V,R;const f=(L=(D=n.value)==null?void 0:D.year)==null?void 0:L.toString(),_=(R=(V=n.value)==null?void 0:V.month)==null?void 0:R.toString().padStart(2,"0");return`${f}-${_}`});return G(async()=>{await t.fetchTodos(),console.log({props:l})}),(f,_)=>(u(),p("div",null,[e("div",yt,[k(t).loading?(u(),M(W,{key:0,class:"absolute inset-0 bg-opacity-80 text-center py-4 text-gray-500 z-10 flex items-center justify-center"},{default:C(()=>_[0]||(_[0]=[I(" Loading... ")])),_:1,__:[0]})):g("",!0),S(fe,{selected:n.value,class:"border-b shadow z-20",onChange:v,onReloadClick:a},{before:C(D=>[T(f.$slots,"beforeHeader",U(q(D)))]),after:C(D=>[T(f.$slots,"afterHeader",U(q(D)))]),bottom:C(D=>[T(f.$slots,"bottomHeader",U(q(D)))]),typeSelection:C(D=>[T(f.$slots,"typeSelection",U(q(D)))]),_:3},8,["selected"]),n.value.type=="month-view"?(u(),M(Te,{key:1,month:E.value,class:"bg-white",onDateClick:y,onClickTodo:$,onClickDateCell:P},null,8,["month"])):g("",!0),n.value.type=="day-view"?(u(),M(Re,{key:2,date:c.value,onClickTodo:$,onClickEdit:x,onClickAdd:P,onClickDelete:r,onClickChangeStatus:s,onBackClick:o,onUpdate:i},null,8,["date"])):g("",!0)]),S(vt,{todoModal:m.value,onCancelClick:j,onUpdate:i,onClickEdit:x},null,8,["todoModal"])]))}},ft={class:"container mx-auto p-6"},bt={key:0,class:"text-center py-4 text-red-500"},gt={class:"flex items-center gap-2 mr-2"},kt=["onClick"],ht=["onClick"],St={__name:"TodoList",setup(d){const b=new Date,l=N({type:"month-view",month:b.getMonth()+1,day:b.getDate(),year:b.getFullYear(),week:b.getDay()}),n=F();return(m,t)=>(u(),p("div",ft,[t[0]||(t[0]=e("h2",{class:"text-2xl font-bold mb-6"},"Todo List",-1)),k(n).error&&!k(n).loading?(u(),p("div",bt,w(k(n).error),1)):g("",!0),S(pt,{year:l.value.year,month:l.value.month,day:l.value.day,viewType:l.value.type},{typeSelection:C(({types:a,changeType:i,selected:s})=>{var r,o,v,y;return[e("div",gt,[e("button",{onClick:h($=>{var x;return i((x=a[0])==null?void 0:x.value)},["prevent"]),class:A(["rounded text-sm ",(s==null?void 0:s.type)==((r=a[0])==null?void 0:r.value)?"text-blue-500 border px-2 font-semibold":"hover:underline text-blue-600"])},w((o=a[0])==null?void 0:o.label),11,kt),e("button",{onClick:h($=>{var x;return i((x=a[1])==null?void 0:x.value)},["prevent"]),class:A(["rounded text-sm ",(s==null?void 0:s.type)==((v=a[1])==null?void 0:v.value)?"text-blue-500 border px-2 font-semibold ":"hover:underline text-blue-600"])},w((y=a[1])==null?void 0:y.label),11,ht)])]}),_:1},8,["year","month","day","viewType"])]))}};export{St as default};
