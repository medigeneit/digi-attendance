import{u as H,r as p,b as M,c as l,a as t,l as V,m as N,w as D,t as r,h as u,d,A as C,F as q,x as B,v as c,e as F,n as j,o as n,k as T,g as O}from"./index-C4L07Zzr.js";import{u as W}from"./exchange-Bx7ZoRbx.js";import{u as z}from"./user-B5q2dEjp.js";import{L as G}from"./LoaderView-BgPJIW1d.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const I={class:"max-w-3xl mx-auto p-4 space-y-4"},J={class:"flex items-center justify-between gap-2"},K={key:0,class:"text-center"},P={class:"title-lg text-center"},Q={class:"block text-sm font-medium"},X=["value"],Y=["value"],Z={key:0,class:"text-red-500 text-sm"},ne={__name:"ShiftExchangeAdd",setup($){const x=O(),L=W(),h=z(),o=H(),a=p({shift_id:"",exchange_type:"shift",selected_date:"",works_in_hand:"",handover_user_id:"",reason:""}),m=p(!1),i=p(null),R=async()=>{var v;m.value=!0,i.value=null;try{const e={user_id:(v=o==null?void 0:o.user)==null?void 0:v.id,shift_id:a.value.shift_id,exchange_type:a.value.exchange_type,current_date:a.value.selected_date,exchange_date:a.value.selected_date,works_in_hand:a.value.works_in_hand,handover_user_id:a.value.handover_user_id,reason:a.value.reason},f=await L.createExchange(e);x.push({name:"ExchangeShow",params:{id:f.id}})}catch(e){i.value=e.message||"Failed to submit shift exchange request"}finally{m.value=!1}};M(()=>{h.fetchUsers(),o.fetchUser()});const A=()=>{x.go(-1)};return(v,e)=>{var _,k,w,g,b,y,S,E,U;const f=j("RouterLink");return n(),l("div",I,[t("div",J,[t("button",{class:"btn-3",onClick:A},e[5]||(e[5]=[t("i",{class:"far fa-arrow-left"},null,-1),t("span",{class:"hidden md:flex"},"Back",-1)])),e[7]||(e[7]=t("h1",{class:"title-md md:title-lg flex-wrap text-center"},"Shift Exchange Request",-1)),t("div",null,[V(f,{to:"/",class:"btn-2"},{default:N(()=>e[6]||(e[6]=[T("Home")])),_:1})])]),m.value?(n(),l("div",K,[V(G)])):(n(),l("form",{key:1,onSubmit:D(R,["prevent"]),class:"space-y-4 card-bg md:p-8 p-4"},[t("div",null,[t("h4",P,r((w=(k=(_=u(o))==null?void 0:_.user)==null?void 0:k.company)==null?void 0:w.name),1),e[8]||(e[8]=t("p",{class:"text-center"},"Shift Change Application",-1))]),t("p",Q,"Current Shift: "+r((y=(b=(g=u(o))==null?void 0:g.user)==null?void 0:b.shift)==null?void 0:y.name),1),t("div",null,[e[10]||(e[10]=t("label",{for:"shift_id",class:"block text-sm font-medium"},"Exchange Shift",-1)),d(t("select",{id:"shift_id","onUpdate:modelValue":e[0]||(e[0]=s=>a.value.shift_id=s),class:"input-1 w-full",required:""},[e[9]||(e[9]=t("option",{value:"",disabled:""},"- Select Shift -",-1)),(n(!0),l(q,null,B((U=(E=(S=u(o))==null?void 0:S.user)==null?void 0:E.company)==null?void 0:U.shifts,s=>(n(),l("option",{key:s.id,value:s.id},r(s==null?void 0:s.name),9,X))),128))],512),[[C,a.value.shift_id]])]),t("div",null,[e[11]||(e[11]=t("label",{for:"selected-date",class:"block text-sm font-medium"},"Select Date",-1)),d(t("input",{type:"date",id:"selected-date","onUpdate:modelValue":e[1]||(e[1]=s=>a.value.selected_date=s),class:"input-1 w-full",required:""},null,512),[[c,a.value.selected_date]])]),t("div",null,[e[12]||(e[12]=t("label",{for:"works-in-hand",class:"block text-sm font-medium"},"Reason",-1)),d(t("textarea",{id:"works-in-hand","onUpdate:modelValue":e[2]||(e[2]=s=>a.value.reason=s),class:"input-1 w-full",placeholder:"Enter details of reason"},null,512),[[c,a.value.reason]])]),t("div",null,[e[13]||(e[13]=t("label",{for:"works-in-hand",class:"block text-sm font-medium"},"Works in Hand (Optional)",-1)),d(t("textarea",{id:"works-in-hand","onUpdate:modelValue":e[3]||(e[3]=s=>a.value.works_in_hand=s),class:"input-1 w-full",placeholder:"Enter details of works in hand"},null,512),[[c,a.value.works_in_hand]])]),t("div",null,[e[15]||(e[15]=t("label",{for:"handover-user",class:"block text-sm font-medium"},"Handover User",-1)),d(t("select",{id:"handover-user","onUpdate:modelValue":e[4]||(e[4]=s=>a.value.handover_user_id=s),class:"input-1 w-full",required:""},[e[14]||(e[14]=t("option",{value:""},"Select Handover User",-1)),(n(!0),l(q,null,B(u(h).users,s=>(n(),l("option",{key:s.id,value:s.id},r(s.name),9,Y))),128))],512),[[C,a.value.handover_user_id]])]),i.value?(n(),l("div",Z,r(i.value),1)):F("",!0),e[16]||(e[16]=t("div",{class:"flex justify-center"},[t("button",{type:"submit",class:"btn-2"},"Submit")],-1))],32))])}}};export{ne as default};
