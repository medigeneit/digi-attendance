import{_ as w}from"./UserChip-ClyRlZ9t.js";import{u as P}from"./userPermissionStore-CqMwRT2Q.js";import{u as v,s as C,e as B,m as L,n as N,c as n,o as r,a as s,p as f,i as j,j as A,F as d,q as b,g as R,t as c}from"./index-CvTkKZxT.js";const V={class:"space-y-2 px-4"},S={class:"flex items-center justify-between gap-2"},$={class:"min-w-full table-auto bg-white shadow-md rounded-lg overflow-hidden"},D={class:"p-3 border"},E=["rowspan"],F={class:"p-3 border"},T={class:"p-3 border"},U={key:0},q={key:1},M={class:"p-3 border flex justify-center md:gap-4"},z=["onClick"],G=["onClick"],Q={__name:"PermissionList",setup(H){const l=P(),_=v(),{userPermissions:g}=C(l),k=e=>{_.push({name:"PermissionEdit",params:{id:e}})},h=e=>{l.deletePermission(e)};B(()=>{l.fetchUserPermissions()});const y=L(()=>g.value.reduce((e,t)=>{const i=e.find(o=>o.id===t.user.id);return i?(i.permissions=[...i.permissions,t],e):[...e,{...t.user,permissions:[t]}]},[]));return(e,t)=>{const i=N("RouterLink");return r(),n("div",V,[s("div",S,[s("button",{class:"btn-3",onClick:t[0]||(t[0]=(...o)=>e.goBack&&e.goBack(...o))},t[1]||(t[1]=[s("i",{class:"far fa-arrow-left"},null,-1),s("span",{class:"hidden md:flex"},"Back",-1)])),t[3]||(t[3]=s("h1",{class:"title-md md:title-lg flex-wrap text-center"},"Permissions List",-1)),f(i,{to:{name:"PermissionsAdd"},class:"btn-2"},{default:j(()=>t[2]||(t[2]=[A(" + Add New ")])),_:1,__:[2]})]),s("table",$,[t[6]||(t[6]=s("thead",{class:"bg-gray-100"},[s("tr",{class:"bg-gray-200"},[s("th",{class:"text-left p-3 border"},"#"),s("th",{class:"text-left p-3 border"},"User"),s("th",{class:"text-left p-3 border"},"Company"),s("th",{class:"text-left p-3 border"},"Departments"),s("th",{class:"text-left p-3 border"},"Actions")])],-1)),s("tbody",null,[(r(!0),n(d,null,b(y.value,o=>(r(),n(d,{key:o.id},[(r(!0),n(d,null,b(o.permissions||[],(a,u)=>{var m,p;return r(),n("tr",{key:a.id,class:"hover:bg-gray-50"},[s("td",D,c(u+1),1),u===0?(r(),n("td",{key:0,class:"p-3 border align-top",rowspan:((m=o.permissions)==null?void 0:m.length)||1},[f(w,{user:o},null,8,["user"])],8,E)):R("",!0),s("td",F,c((p=a.company)==null?void 0:p.name),1),s("td",T,[a.department_ids.includes("*")?(r(),n("span",U,"All")):(r(),n("span",q,c(a.departments.join(", ")),1))]),s("td",M,[s("button",{onClick:x=>k(a.id),class:"btn-1"},t[4]||(t[4]=[s("i",{class:"fas fa-edit"},null,-1)]),8,z),s("button",{onClick:x=>h(a.id),class:"btn-1 text-red-600"},t[5]||(t[5]=[s("i",{class:"fas fa-trash"},null,-1)]),8,G)])])}),128))],64))),128))])])])}}};export{Q as default};
