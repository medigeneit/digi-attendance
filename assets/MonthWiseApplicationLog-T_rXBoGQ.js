import{u as C,b as M,r as v,e as B,A as k,k as D,c as d,o as n,a as e,m as U,f as V,l as S,h as f,g as E,v as F,n as p,t as a,F as R,x as T,p as j}from"./index-DI6vi9p1.js";import{_ as P}from"./EmployeeFilter-BEntrvik.js";import{L as z}from"./LoaderView-BDReDYi9.js";import{u as O}from"./leave-application-Cptehtel.js";import{u as W}from"./user-Bnth4S2v.js";import"./MultiselectDropdown-D5rBUlox.js";import"./company-DFDMmrmF.js";import"./department-BT-fLNL-.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const $={class:"px-4 space-y-4"},G={class:"flex flex-wrap gap-4"},H={key:0,class:"flex justify-between gap-4 text-sm"},I={class:"card-bg p-4 gap-1"},J={class:"grid md:grid-cols-2"},K={key:1},Q={class:"w-full border bg-white rounded"},X={class:"p-2 capitalize"},Y={class:"p-2"},Z={class:"p-2"},ee={key:0},te={key:1},le={key:2},ae={key:3},se={class:"p-2 text-sm text-gray-600"},ve={__name:"MonthWiseApplicationLog",setup(oe){const c=C(),i=M(),g=W(),y=O(),r=v(null),u=v(i.query.date||y.selectedMonth),s=v({company_id:i.query.company_id||"",department_id:i.query.department_id||"all",type:i.query.type||"all",employee_id:i.query.employee_id||"",category:""}),_=async o=>{o?(await g.fetchUser(o),r.value=g.user):r.value=null},m=async()=>{s.value.employee_id&&u.value&&await y.getMonthlyApplicationLog(s.value.employee_id,u.value)};B(async()=>{s.value.employee_id&&(await _(s.value.employee_id),await m())}),k(()=>s.value.employee_id,async(o,t)=>{o&&o!==t&&(await _(o),await m(),c.replace({query:{...i.query,employee_id:o}}))}),k(u,o=>{c.replace({query:{...i.query,date:o}}),m()});const b=()=>c.go(-1),A=()=>{c.replace({query:{...i.query,company_id:s.value.company_id,department_id:s.value.department_id,type:s.value.type,employee_id:s.value.employee_id}})},q={leave_applications:"LeaveApplicationShow",short_leave:"ShortLeaveShow",exchange_shift:"ExchangeShiftShow",exchange_offday:"ExchangeOffdayShow",manual_attendance:"ManualAttendanceShow"};return(o,t)=>{var h,x,w;const L=D("RouterLink");return n(),d("div",$,[e("div",{class:"flex items-center justify-between gap-2"},[e("button",{class:"btn-3",onClick:b},t[2]||(t[2]=[e("i",{class:"far fa-arrow-left"},null,-1),e("span",{class:"hidden md:flex"},"Back",-1)])),t[3]||(t[3]=e("h1",{class:"title-md md:title-lg flex-wrap text-center"},"Monthly Application Log",-1)),t[4]||(t[4]=e("div",null,null,-1))]),e("div",G,[S(P,{modelValue:s.value,"onUpdate:modelValue":t[0]||(t[0]=l=>s.value=l),"initial-value":f(i).query,onFilterChange:A},null,8,["modelValue","initial-value"]),e("div",null,[E(e("input",{id:"monthSelect",type:"month","onUpdate:modelValue":t[1]||(t[1]=l=>u.value=l),onChange:m,class:"input-1"},null,544),[[F,u.value]])])]),r.value?(n(),d("div",H,[e("div",I,[t[11]||(t[11]=e("h2",{class:"title-md"},"Selected Employee Info",-1)),t[12]||(t[12]=e("hr",null,null,-1)),e("div",J,[e("p",null,[t[5]||(t[5]=e("strong",null,"Name:",-1)),p(" "+a(r.value.name),1)]),e("p",null,[t[6]||(t[6]=e("strong",null,"Designation:",-1)),p(" "+a(((h=r.value.designation)==null?void 0:h.title)||"N/A"),1)]),e("p",null,[t[7]||(t[7]=e("strong",null,"Department:",-1)),p(" "+a(((x=r.value.department)==null?void 0:x.name)||"N/A"),1)]),e("p",null,[t[8]||(t[8]=e("strong",null,"Company:",-1)),p(" "+a(((w=r.value.company)==null?void 0:w.name)||"N/A"),1)]),e("p",null,[t[9]||(t[9]=e("strong",null,"Phone:",-1)),p(" "+a(r.value.phone),1)]),e("p",null,[t[10]||(t[10]=e("strong",null,"Email:",-1)),p(" "+a(r.value.email||"N/A"),1)])])])])):(n(),d("div",K,t[13]||(t[13]=[e("p",{class:"text-gray-400 text-center text-2xl italic"},"Select an employee, please.",-1)]))),f(y).loading?(n(),U(z,{key:2})):V("",!0),e("table",Q,[t[15]||(t[15]=e("thead",null,[e("tr",{class:"text-left"},[e("th",{class:"p-2"},"Type"),e("th",{class:"p-2"},"Status"),e("th",{class:"p-2"},"Date(s)"),e("th",{class:"p-2"},"Details")])],-1)),e("tbody",null,[(n(!0),d(R,null,T(f(y).applicationLog,(l,N)=>(n(),d("tr",{key:N,class:"border-b hover:bg-gray-50"},[e("td",X,a(l.type.replace("_"," ")),1),e("td",Y,a(l.status??"Pending handover"),1),e("td",Z,[l.date?(n(),d("div",ee,a(l.date),1)):l.from&&l.to?(n(),d("div",te,"From "+a(l.from)+" to "+a(l.to),1)):l.current_date&&l.exchange_date?(n(),d("div",le,a(l.current_date)+" ⇄ "+a(l.exchange_date),1)):(n(),d("div",ae,"—"))]),e("td",se,[S(L,{to:{name:q[l.type],params:{id:l.id}},class:"btn-1 px-3"},{default:j(()=>t[14]||(t[14]=[e("i",{class:"far fa-eye"},null,-1)])),_:2,__:[14]},1032,["to"])])]))),128))])])])}}};export{ve as default};
