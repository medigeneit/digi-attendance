import{x as T,r as P,y as C,b as M,i as L,c as d,a as l,w as N,d as s,v as a,z as i,F as m,q as v,h as b,A as j,B as p,j as u,C as E,s as F,k as _,l as q,m as B,o as n,t as f}from"./index-BzObCPqj.js";import{u as I}from"./user-uN-91eJO.js";import{u as R}from"./shift-CoUwMpY6.js";import{u as G}from"./company-DfSnoUJ6.js";import{u as O}from"./department-ORIW6K_R.js";import{u as W}from"./designation-BfKOaS27.js";import{u as z}from"./leave-approval-Cic2Sypz.js";const H={class:"my-container space-y-2"},J={class:"card-bg md:p-8 p-4 mx-4"},$={class:"grid gap-4"},K={class:"border p-4 rounded-md bg-gray-100"},Q={class:"grid md:grid-cols-2 gap-4"},X={class:"border p-4 rounded-md bg-gray-100"},Y={class:"grid md:grid-cols-2 gap-4"},Z=["value"],h=["value"],c=["value"],ee=["value"],le={class:""},oe={class:"flex flex-wrap gap-2 md:gap-4 bg-white p-2 border rounded"},te={class:"flex items-center gap-1.5 md:gap-2"},se={class:"flex items-center gap-1.5 md:gap-2"},de={class:"flex items-center gap-1.5 md:gap-2"},ne={class:"flex items-center gap-1.5 md:gap-2"},ie={class:"flex items-center gap-1.5 md:gap-2"},re={class:"flex items-center gap-1.5 md:gap-2"},ae={class:"flex items-center gap-1.5 md:gap-2"},ue=["value"],pe=["value"],me={class:"border p-4 rounded-md bg-gray-100"},ve={class:"grid md:grid-cols-3 gap-4"},be={class:"relative"},fe=["type"],ye={class:"flex justify-center gap-4"},Ae={__name:"UserAdd",setup(we){const k=T(),x=I(),U=R(),S=G(),V=O(),D=W(),g=z(),w=P(!1),t=C({name:"",phone:"",email:"",password:"",role:"employee",address:"",device_user_id:null,is_active:!0,company_id:"",department_id:"",designation_id:"",shift_id:"",nid:"",date_of_birth:"",joining_date:"",employment_type:"Provisional",weekends:[],leave_approval_id:"",other_approval_id:""});M(async()=>{await S.fetchCompanies(),await g.fetchLeaveApprovals()}),L(()=>t.company_id,async r=>{r&&(await V.fetchDepartments(r),await D.fetchDesignations(r),await U.fetchShifts(r),t.department_id="",t.designation_id="",t.shift_id="")});const A=async()=>{var r,e;try{const y={name:t.name,phone:t.phone,email:t.email,password:t.password,role:t.role,address:t.address,device_user_id:t.device_user_id,is_active:t.is_active,company_id:t.company_id,department_id:t.department_id,designation_id:t.designation_id,shift_id:t.shift_id,nid:t.nid,date_of_birth:t.date_of_birth,joining_date:t.joining_date,employment_type:t.employment_type,weekends:t.weekends,leave_approval_id:t.leave_approval_id,other_approval_id:t.other_approval_id};await x.createUser(y),k.success("User created successfully"),await x.fetchUsers()}catch(y){const o=((e=(r=y.response)==null?void 0:r.data)==null?void 0:e.message)||"Failed to save user";k.error(o),console.error(o)}};return(r,e)=>{const y=B("RouterLink");return n(),d("div",H,[l("div",J,[e[69]||(e[69]=l("h2",{class:"title-lg text-center"},"Add Employee",-1)),l("form",{onSubmit:N(A,["prevent"]),class:"space-y-4"},[l("div",$,[l("div",K,[e[32]||(e[32]=l("p",{class:"title-md"},"Personal Info",-1)),e[33]||(e[33]=l("hr",{class:"my-2"},null,-1)),l("div",Q,[l("div",null,[e[26]||(e[26]=l("label",null,"Name",-1)),s(l("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>t.name=o),type:"text",class:"w-full p-2 border rounded",required:""},null,512),[[a,t.name]])]),l("div",null,[e[27]||(e[27]=l("label",null,"Phone",-1)),s(l("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>t.phone=o),type:"text",class:"w-full p-2 border rounded",required:""},null,512),[[a,t.phone]])]),l("div",null,[e[28]||(e[28]=l("label",null,"Email",-1)),s(l("input",{"onUpdate:modelValue":e[2]||(e[2]=o=>t.email=o),type:"email",class:"w-full p-2 border rounded"},null,512),[[a,t.email]])]),l("div",null,[e[29]||(e[29]=l("label",null,"Address",-1)),s(l("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>t.address=o),type:"text",class:"w-full p-2 border rounded"},null,512),[[a,t.address]])]),l("div",null,[e[30]||(e[30]=l("label",null,"NID",-1)),s(l("input",{"onUpdate:modelValue":e[4]||(e[4]=o=>t.nid=o),type:"text",class:"w-full p-2 border rounded"},null,512),[[a,t.nid]])]),l("div",null,[e[31]||(e[31]=l("label",null,"Date of Birth",-1)),s(l("input",{"onUpdate:modelValue":e[5]||(e[5]=o=>t.date_of_birth=o),type:"date",class:"w-full p-2 border rounded"},null,512),[[a,t.date_of_birth]])])])]),l("div",X,[e[59]||(e[59]=l("p",{class:"title-md"},"Professional Info",-1)),e[60]||(e[60]=l("hr",{class:"my-2"},null,-1)),l("div",Y,[l("div",null,[e[35]||(e[35]=l("label",null,"Company",-1)),s(l("select",{id:"company_id","onUpdate:modelValue":e[6]||(e[6]=o=>t.company_id=o),class:"w-full border rounded px-3 py-2",required:""},[e[34]||(e[34]=l("option",{value:"",disabled:""},"Select a company",-1)),(n(!0),d(m,null,v(b(S).companies,o=>(n(),d("option",{key:o==null?void 0:o.id,value:o==null?void 0:o.id},f(o==null?void 0:o.name),9,Z))),128))],512),[[i,t.company_id]])]),l("div",null,[e[37]||(e[37]=l("label",null,"Department",-1)),s(l("select",{"onUpdate:modelValue":e[7]||(e[7]=o=>t.department_id=o),class:"w-full p-2 border rounded"},[e[36]||(e[36]=l("option",{value:"",disabled:""},"Select a department",-1)),(n(!0),d(m,null,v(b(V).departments,o=>(n(),d("option",{key:o==null?void 0:o.id,value:o==null?void 0:o.id},f(o==null?void 0:o.name),9,h))),128))],512),[[i,t.department_id]])]),l("div",null,[e[39]||(e[39]=l("label",null,"Designation",-1)),s(l("select",{"onUpdate:modelValue":e[8]||(e[8]=o=>t.designation_id=o),class:"w-full p-2 border rounded"},[e[38]||(e[38]=l("option",{value:"",disabled:""},"Select a designation",-1)),(n(!0),d(m,null,v(b(D).designations,o=>(n(),d("option",{key:o==null?void 0:o.id,value:o==null?void 0:o.id},f(o==null?void 0:o.title),9,c))),128))],512),[[i,t.designation_id]])]),l("div",null,[e[41]||(e[41]=l("label",null,"Shift",-1)),s(l("select",{"onUpdate:modelValue":e[9]||(e[9]=o=>t.shift_id=o),class:"w-full p-2 border rounded"},[e[40]||(e[40]=l("option",{value:"",disabled:""},"Select a shift",-1)),(n(!0),d(m,null,v(b(U).shifts,o=>(n(),d("option",{key:o==null?void 0:o.id,value:o==null?void 0:o.id},f(o==null?void 0:o.name),9,ee))),128))],512),[[i,t.shift_id]])]),l("div",null,[e[43]||(e[43]=l("label",null,"Employment Type",-1)),s(l("select",{"onUpdate:modelValue":e[10]||(e[10]=o=>t.employment_type=o),class:"w-full p-2 border rounded"},e[42]||(e[42]=[j('<option value="Provisional">Provisional</option><option value="Permanent">Permanent</option><option value="Part_Time">Part Time</option><option value="Remote">Remote</option><option value="Contract">Contract</option><option value="Freelance">Freelance</option><option value="Intern">Intern</option>',7)]),512),[[i,t.employment_type]])]),l("div",null,[e[44]||(e[44]=l("label",null,"Joining Date",-1)),s(l("input",{"onUpdate:modelValue":e[11]||(e[11]=o=>t.joining_date=o),type:"date",class:"w-full p-2 border rounded"},null,512),[[a,t.joining_date]])]),l("div",le,[e[52]||(e[52]=l("p",{class:""},"Select Weekends",-1)),l("div",oe,[l("label",te,[s(l("input",{type:"checkbox",value:"Saturday","onUpdate:modelValue":e[12]||(e[12]=o=>t.weekends=o),class:"form-checkbox"},null,512),[[p,t.weekends]]),e[45]||(e[45]=u(" SAT "))]),l("label",se,[s(l("input",{type:"checkbox",value:"Sunday","onUpdate:modelValue":e[13]||(e[13]=o=>t.weekends=o),class:"form-checkbox"},null,512),[[p,t.weekends]]),e[46]||(e[46]=u(" SUN "))]),l("label",de,[s(l("input",{type:"checkbox",value:"Monday","onUpdate:modelValue":e[14]||(e[14]=o=>t.weekends=o),class:"form-checkbox"},null,512),[[p,t.weekends]]),e[47]||(e[47]=u(" MON "))]),l("label",ne,[s(l("input",{type:"checkbox",value:"Tuesday","onUpdate:modelValue":e[15]||(e[15]=o=>t.weekends=o),class:"form-checkbox"},null,512),[[p,t.weekends]]),e[48]||(e[48]=u(" TUE "))]),l("label",ie,[s(l("input",{type:"checkbox",value:"Wednesday","onUpdate:modelValue":e[16]||(e[16]=o=>t.weekends=o),class:"form-checkbox"},null,512),[[p,t.weekends]]),e[49]||(e[49]=u(" WED "))]),l("label",re,[s(l("input",{type:"checkbox",value:"Thursday","onUpdate:modelValue":e[17]||(e[17]=o=>t.weekends=o),class:"form-checkbox"},null,512),[[p,t.weekends]]),e[50]||(e[50]=u(" THU "))]),l("label",ae,[s(l("input",{type:"checkbox",value:"Friday","onUpdate:modelValue":e[18]||(e[18]=o=>t.weekends=o),class:"form-checkbox"},null,512),[[p,t.weekends]]),e[51]||(e[51]=u(" FRI "))])])]),l("div",null,[e[54]||(e[54]=l("label",null,"Leave Approval Group",-1)),s(l("select",{"onUpdate:modelValue":e[19]||(e[19]=o=>t.leave_approval_id=o),class:"w-full p-2 border rounded"},[e[53]||(e[53]=l("option",{value:"",disabled:""},"Select Leave Approval Group",-1)),(n(!0),d(m,null,v(b(g).leaveApprovals,o=>(n(),d("option",{key:o.id,value:o.id},f(o.name),9,ue))),128))],512),[[i,t.leave_approval_id]])]),l("div",null,[e[56]||(e[56]=l("label",null,"Other Approval Group",-1)),s(l("select",{"onUpdate:modelValue":e[20]||(e[20]=o=>t.other_approval_id=o),class:"w-full p-2 border rounded"},[e[55]||(e[55]=l("option",{value:"",disabled:""},"Select Other Approval Group",-1)),(n(!0),d(m,null,v(b(g).leaveApprovals,o=>(n(),d("option",{key:o.id,value:o.id},f(o.name),9,pe))),128))],512),[[i,t.other_approval_id]])]),l("div",null,[e[58]||(e[58]=l("label",null,"Active Status",-1)),s(l("select",{"onUpdate:modelValue":e[21]||(e[21]=o=>t.is_active=o),class:"w-full p-2 border rounded"},e[57]||(e[57]=[l("option",{value:!0},"Active",-1),l("option",{value:!1},"Inactive",-1)]),512),[[i,t.is_active]])])])]),l("div",me,[e[65]||(e[65]=l("p",{class:"title-md"},"Technical Info",-1)),e[66]||(e[66]=l("hr",{class:"my-2"},null,-1)),l("div",ve,[l("div",null,[e[62]||(e[62]=l("label",null,"Role",-1)),s(l("select",{"onUpdate:modelValue":e[22]||(e[22]=o=>t.role=o),class:"w-full p-2 border rounded",required:""},e[61]||(e[61]=[l("option",{value:"employee"},"Employee",-1),l("option",{value:"admin"},"Admin",-1),l("option",{value:"super_admin"},"Super Admin",-1),l("option",{value:"developer"},"Developer",-1)]),512),[[i,t.role]])]),l("div",null,[e[63]||(e[63]=l("label",null,"Biometric Device User ID",-1)),s(l("input",{"onUpdate:modelValue":e[23]||(e[23]=o=>t.device_user_id=o),type:"number",class:"w-full p-2 border rounded"},null,512),[[a,t.device_user_id]])]),l("div",null,[e[64]||(e[64]=l("label",null,"Password",-1)),l("div",be,[s(l("input",{"onUpdate:modelValue":e[24]||(e[24]=o=>t.password=o),type:w.value?"text":"password",class:"w-full p-2 border rounded",required:""},null,8,fe),[[E,t.password]]),l("span",{class:"absolute inset-y-0 right-3 flex items-center cursor-pointer",onClick:e[25]||(e[25]=o=>w.value=!w.value)},[l("i",{class:F(w.value?"fas fa-eye-slash":"fas fa-eye")},null,2)])])])])])]),l("div",ye,[_(y,{to:{name:"UserList"},type:"button",class:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600"},{default:q(()=>e[67]||(e[67]=[u(" Cancel ")])),_:1}),e[68]||(e[68]=l("button",{type:"submit",class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600"}," Save ",-1))])],32)])])}}};export{Ae as default};
