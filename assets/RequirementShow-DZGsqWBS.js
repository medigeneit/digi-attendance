import{C as B,r as $,e as N,D as me,m as re,c as p,o as n,a as e,p as C,E,F as V,q as L,j as D,t as w,w as q,x as P,i as I,h as R,v as T,G as pe,T as be,f as F,g as h,B as oe,b as ce,u as ve,H as M,n as fe,k as ye}from"./index-Dti9AHFV.js";import{L as A}from"./LoaderView-CqlysVKN.js";import{O as z}from"./OverlyModal-eSWz0zu8.js";import{R as ne}from"./RequiredIcon-DBYaDJzJ.js";import{f as G}from"./requirement-DnjW4AZI.js";import{o as xe}from"./url-CePbr-gY.js";import{u as ie}from"./department-CS1e5eRS.js";import{_ as ge}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as O}from"./UserChip-BN25D0CA.js";import{u as ae}from"./user-B8gO8S4I.js";import{_ as we}from"./TaskUserChip-C9Hk689P.js";async function ke(v,_){return B.post(`/requirements/${v}/details`,_)}async function de(v,_,{params:i={}}={}){return B.get(`/requirements/${v}/details/${_}`,{params:i})}async function $e(v,_,i){return B.put(`/requirements/${v}/details/${_}`,i)}async function he(v,_,{params:i={}}={}){const a=xe(i);return B.delete(`/requirements/${v}/details/${_}${a?"?"+a:""}`)}const _e={class:"flex flex-wrap items-center gap-1 w-full"},qe={class:"bg-blue-100 text-blue-700 px-2 py-1 rounded text-sm"},Ce=["onClick"],Se={class:"bottom-[100%] absolute mt-1 w-full bg-white border rounded shadow-xl z-50 border-teal-500"},De={class:"p-2"},Re={class:"max-h-60 overflow-auto"},Ie=["onClick"],Ve={key:1,class:"px-3 py-2 text-gray-500"},Ee={__name:"SelectDropdown",props:{options:{type:Array,required:!0},modelValue:{type:[Object,Array,String,Number,null],default:null},placeholder:{type:String,default:"Select..."},multiple:{type:Boolean,default:!1},label:{type:String,default:"label"},value:{type:String,default:"value"},clearable:{type:Boolean,default:!0},searchable:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},filterBy:{type:Function,default:null},reduce:{type:Function,default:null}},emits:["update:modelValue","input","open","close","search","search:focus","search:blur","option:selecting","option:selected","option:deselecting","option:deselected"],setup(v,{emit:_}){const i=v,a=_,m=$(!1),x=$(""),r=$();function d(t){r.value&&!r.value.contains(t.target)&&m.value&&(m.value=!1,a("close"))}N(()=>{document.addEventListener("click",d)}),me(()=>{document.removeEventListener("click",d)});const y=re(()=>i.multiple?Array.isArray(i.modelValue)?i.modelValue:[]:i.modelValue),g=t=>(t==null?void 0:t[i.label])??(t==null?void 0:t.label)??t,k=t=>(t==null?void 0:t[i.value])??(t==null?void 0:t.value)??t,f=()=>{i.disabled||(m.value=!m.value,a(m.value?"open":"close"))},l=t=>{const b=k(t);return i.multiple?y.value.some(c=>k(c)===b):k(y.value)===b},u=t=>{if(i.multiple)if(l(t)){a("option:deselecting",t);const b=y.value.filter(c=>k(c)!==k(t));a("update:modelValue",b),a("option:deselected",t)}else{a("option:selecting",t);const b=[...y.value,t];a("update:modelValue",b),a("option:selected",t)}else a("option:selected",t),a("update:modelValue",t),m.value=!1,a("close");a("input",t),x.value=""},s=t=>{if(!i.multiple)return;const b=y.value.filter(c=>k(c)!==k(t));a("update:modelValue",b),a("option:deselected",t)},o=re(()=>{const t=x.value.toLowerCase();return!i.searchable||!t?i.options:i.filterBy?i.filterBy(i.options,t):i.options.filter(b=>g(b).toLowerCase().includes(t))});return(t,b)=>(n(),p("div",{class:"relative w-full",ref:r.value},[e("div",{class:P(["border rounded-md px-2 py-1.5 cursor-pointer bg-white flex items-center justify-between",{"bg-gray-100":v.disabled}]),onClick:f},[e("div",_e,[v.multiple?(n(!0),p(V,{key:0},L(y.value,c=>E(t.$slots,"selected-option",{key:k(c),option:c},()=>[e("span",qe,[D(w(g(c))+" ",1),e("button",{onClick:q(U=>s(c),["stop"]),class:"ml-1 text-xs"},"×",8,Ce)])],!0)),128)):E(t.$slots,"selected-option",{key:1,option:y.value,isSelected:l},()=>[D(w(g(y.value)||v.placeholder),1)],!0)]),E(t.$slots,"open-indicator",{},()=>[b[3]||(b[3]=e("svg",{class:"w-4 h-4 ml-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))],!0)],2),C(be,{name:"fade"},{default:I(()=>[R(e("div",Se,[e("div",De,[E(t.$slots,"search",{},()=>[R(e("input",{type:"text","onUpdate:modelValue":b[0]||(b[0]=c=>x.value=c),class:"w-full px-2 py-1 border rounded",placeholder:"Search...",onFocus:b[1]||(b[1]=c=>t.$emit("search:focus")),onBlur:b[2]||(b[2]=c=>t.$emit("search:blur"))},null,544),[[T,x.value]])],!0)]),E(t.$slots,"list-header",{},void 0,!0),e("ul",Re,[o.value.length?(n(!0),p(V,{key:0},L(o.value,c=>(n(),p("li",{key:k(c),class:P(["px-3 py-2 hover:bg-blue-100 cursor-pointer",{"bg-blue-50":l(c)}]),onClick:U=>u(c)},[E(t.$slots,"option",{option:c},()=>[D(w(g(c)),1)],!0)],10,Ie))),128)):(n(),p("li",Ve,[E(t.$slots,"no-options",{},()=>[b[4]||(b[4]=D("No options found"))],!0)]))]),E(t.$slots,"list-footer",{},void 0,!0)],512),[[pe,m.value]])]),_:3})],512))}},ue=ge(Ee,[["__scopeId","data-v-cee6a2a9"]]),Fe={class:"max-h-[90vh] overflow-auto w-full mx-auto bg-white shadow-lg rounded-lg p-6 pb-0 pt-0 relative"},Te={class:"sticky top-0 pt-4 bg-white z-10"},Ue={class:"mb-4"},Ne={class:"block text-gray-600 text-sm mb-1 font-medium"},Le={class:"mb-4"},Oe={class:"mb-4"},Be={key:0,class:"relative w-full"},Ae={key:0,class:"absolute right-1 text-xl top-0 bottom-0 flex items-center"},je={class:"mb-4"},Me={class:"mb-4"},ze={class:"sticky bottom-0 bg-white py-4 border-t -mx-6 px-6"},Pe={key:0,class:"mb-4 text-red-500 font-medium"},Ge={key:1,class:"mb-4"},He={class:"flex items-center justify-between gap-4"},We=["disabled"],Ke={__name:"RequirementDetailAddForm",props:{requirementId:{type:[Number,String],required:!0}},emits:["create","closeClick","error"],setup(v,{emit:_}){const i=v,a=_,m=ie(),x=$(""),r=$(),d=$({title:"",description:"",priority:"",better_to_complete_on:"",supervisor_id:null}),y=$(null),g=$([]);async function k(){var l,u,s;x.value="submitting";const f={...d.value,supervisor_id:(l=y.value)==null?void 0:l.id};console.log({payload:f});try{const o=await ke(i.requirementId,f);a("create",o),x.value="create"}catch(o){x.value="error",r.value=((s=(u=o.response)==null?void 0:u.data)==null?void 0:s.message)||"Failed to create requirement detail",a("error",r.value)}}return N(async()=>{var l;const f=((l=(await G(i.requirementId)).data)==null?void 0:l.requirement)||{};g.value=await m.fetchDepartmentEmployee([f.from_department_id])}),(f,l)=>(n(),p("div",Fe,[e("div",Te,[l[8]||(l[8]=e("h2",{class:"text-2xl font-semibold text-gray-800"},"Add Requirement",-1)),l[9]||(l[9]=e("hr",{class:"mb-4"},null,-1)),e("div",{class:"text-purple-600/80 mb-4 text-xs border-b border-dashed",onClick:l[0]||(l[0]=q(u=>a("ok"),["prevent"]))}," Fields that must be filled in will be marked with an asterisk. ")]),e("form",{onSubmit:q(k,["prevent"]),class:"z-0"},[x.value!=="loading"?(n(),p(V,{key:0},[e("div",Ue,[e("label",Ne,[l[10]||(l[10]=D("Title ")),C(ne)]),R(e("input",{"onUpdate:modelValue":l[1]||(l[1]=u=>d.value.title=u),required:"",placeholder:"EnderRequirement detail title",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[T,d.value.title]])]),e("div",Le,[l[11]||(l[11]=e("label",{class:"block text-gray-600 text-sm mb-1 font-medium"},"Details",-1)),R(e("textarea",{rows:"10","onUpdate:modelValue":l[2]||(l[2]=u=>d.value.description=u),placeholder:"Enter requirement description",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[T,d.value.description]])]),e("div",Oe,[l[12]||(l[12]=e("label",{class:"block text-gray-600 text-sm mb-1 font-medium"},"Supervisor",-1)),C(ue,{modelValue:y.value,"onUpdate:modelValue":l[4]||(l[4]=u=>y.value=u),options:g.value,placeholder:"--NO SUPERVISOR--"},{option:I(({option:u})=>[C(O,{user:u||{}},null,8,["user"])]),"selected-option":I(({option:u})=>[u?(n(),p("div",Be,[C(O,{user:u||{}},null,8,["user"]),y.value?(n(),p("div",Ae,[e("button",{onClick:l[3]||(l[3]=q(s=>y.value=null,["prevent"])),class:"text-gray-6 font-semibold 00 hover:text-red-700"}," × ")])):h("",!0)])):h("",!0)]),_:1},8,["modelValue","options"])]),e("div",je,[l[14]||(l[14]=e("label",{class:"block text-gray-600 text-sm mb-1 font-medium"},"Priority ",-1)),R(e("select",{class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500","onUpdate:modelValue":l[5]||(l[5]=u=>d.value.priority=u)},l[13]||(l[13]=[e("option",{value:""},"NORMAL",-1),e("option",null,"IMPORTANT",-1),e("option",null,"URGENT",-1)]),512),[[oe,d.value.priority]])]),e("div",Me,[l[15]||(l[15]=e("label",{class:"block text-gray-600 text-sm mb-1 font-medium"},"Better to Complete ",-1)),R(e("input",{type:"date","onUpdate:modelValue":l[6]||(l[6]=u=>d.value.better_to_complete_on=u),placeholder:"EnderRequirement detail title",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[T,d.value.better_to_complete_on]])])],64)):h("",!0),e("div",ze,[r.value?(n(),p("div",Pe,w(r.value),1)):h("",!0),r.value?(n(),p("hr",Ge)):h("",!0),e("div",He,[e("button",{type:"button",onClick:l[7]||(l[7]=q(u=>a("closeClick"),["prevent"])),class:"bg-gray-200 hover:bg-gray-300 text-gray-700 font-semibold px-5 py-2 rounded transition"}," Cancel "),e("button",{disabled:x.value=="loading"||x.value=="submitting",type:"submit",class:"bg-blue-500 hover:bg-blue-600 text-white font-semibold px-5 py-2 rounded transition"},w(x.value=="submitting"?"Saving...":"Add Requirement"),9,We)])])],32),x.value==="loading"||x.value==="submitting"?(n(),F(A,{key:0,class:"z-20 absolute inset-0 flex items-center justify-center bg-opacity-30"})):h("",!0)]))}},Qe={class:"max-h-[90vh] overflow-auto w-full mx-auto bg-white shadow-lg rounded-lg p-6 pb-0 pt-0 relative"},Je={class:"mb-4"},Xe={class:"font-semibold"},Ye={class:"mb-4"},Ze={class:"line-clamp-2"},et={key:1,class:"min-h-40"},tt={class:"sticky bottom-0 bg-white py-4 border-t -mx-6 px-6"},st={key:0,class:"mb-4 text-red-500 font-medium"},lt={key:1,class:"mb-4"},rt={class:"flex items-center justify-between gap-4"},ot=["disabled"],nt={__name:"RequirementDetailDeleteForm",props:{requirementId:{type:[Number,String],required:!0},detailId:{type:[Number,String],required:!0}},emits:["delete","closeClick","error"],setup(v,{emit:_}){const i=v,a=_,m=ae(),x=$(null),r=$(""),d=$(),y=$([]);async function g(){var k,f;r.value="submitting";try{const l=await he(i.requirementId,i.detailId);a("delete",l),r.value="create"}catch(l){r.value="error",d.value=((f=(k=l.response)==null?void 0:k.data)==null?void 0:f.message)||"Failed to update requirement detail: "+l,a("error",d.value)}}return N(async()=>{var k,f,l;r.value="loading";try{y.value=await m.fetchDepartmentWiseEmployees(),x.value=(k=(await de(i.requirementId,i.detailId)).data)==null?void 0:k.detail}catch(u){d.value=((l=(f=u.response)==null?void 0:f.data)==null?void 0:l.message)||"Failed to fetch requirement detail"}finally{r.value=""}}),(k,f)=>{var l,u;return n(),p("div",Qe,[f[4]||(f[4]=e("div",{class:"sticky top-0 -mx-6 px-6 z-10 bg-gray-50"},[e("h2",{class:"text-xl font-semibold text-gray-800 py-2"},"Delete Requirement Details"),e("hr",{class:"mb-4 -mx-6"})],-1)),e("form",{onSubmit:q(g,["prevent"]),class:"z-0"},[r.value!=="loading"?(n(),p(V,{key:0},[e("div",Je,[f[1]||(f[1]=e("div",{class:"block text-gray-600 text-sm mb-1 font-medium"},"Title",-1)),e("div",Xe,w((l=x.value)==null?void 0:l.title),1)]),e("div",Ye,[f[2]||(f[2]=e("div",{class:"block text-gray-600 text-sm mb-1 font-medium"},"Description",-1)),e("div",Ze,w((u=x.value)==null?void 0:u.description),1)]),f[3]||(f[3]=e("div",{class:"my-8 text-center text-xl text-red-600"},"Are you sure want to delete?",-1))],64)):(n(),p("div",et)),e("div",tt,[d.value?(n(),p("div",st,w(d.value),1)):h("",!0),d.value?(n(),p("hr",lt)):h("",!0),e("div",rt,[e("button",{type:"button",onClick:f[0]||(f[0]=q(s=>a("closeClick"),["prevent"])),class:"bg-gray-200 hover:bg-gray-300 text-gray-700 font-semibold px-5 py-2 rounded transition"}," Cancel "),e("button",{disabled:r.value=="loading"||r.value=="submitting",type:"submit",class:"bg-red-700 hover:bg-red-500 text-white font-semibold px-5 py-2 rounded transition"},w(r.value=="submitting"?"Deleting...":"Delete"),9,ot)])])],32),r.value==="loading"||r.value==="submitting"?(n(),F(A,{key:0,class:"z-20 absolute inset-0 flex items-center justify-center bg-opacity-30"})):h("",!0)])}}},it={class:"max-h-[90vh] w-full mx-auto bg-white shadow-lg rounded-lg p-6 pb-0 pt-0 relative"},at={class:"sticky top-0 pt-4 bg-white z-10"},dt={class:"mb-4"},ut={class:"block text-gray-600 text-sm mb-1 font-medium"},mt={class:"mb-4"},pt={class:"mb-4"},bt={key:0,class:"relative w-full"},ct={key:0,class:"absolute right-1 text-xl top-0 bottom-0 flex items-center"},vt={class:"mb-4"},ft={class:"mb-4"},yt={class:"sticky bottom-0 bg-white py-4 border-t -mx-6 px-6"},xt={key:0,class:"mb-4 text-red-500 font-medium"},gt={key:1,class:"mb-4"},wt={class:"flex items-center justify-between gap-4"},kt=["disabled"],$t={__name:"RequirementDetailEditForm",props:{requirementId:{type:[Number,String],required:!0},detailId:{type:[Number,String],required:!0}},emits:["update","closeClick","error"],setup(v,{emit:_}){const i=v,a=_,m=ae(),x=ie(),r=$(null),d=$(""),y=$(),g=$({title:"",description:"",priority:"",better_to_complete_on:"",supervisor_id:null}),k=$([]),f=$([]),l=$(null);async function u(){var o,t,b;d.value="submitting";const s={...g.value,supervisor_id:(o=l.value)==null?void 0:o.id};console.log({payload:s});try{const c=await $e(i.requirementId,i.detailId,s);a("update",c),d.value="create"}catch(c){d.value="error",y.value=((b=(t=c.response)==null?void 0:t.data)==null?void 0:b.message)||"Failed to update requirement detail",a("error",y.value)}}return N(async()=>{var s,o,t,b;d.value="loading";try{k.value=await m.fetchDepartmentWiseEmployees();const c=((s=(await G(i.requirementId)).data)==null?void 0:s.requirement)||{};f.value=await x.fetchDepartmentEmployee([c.from_department_id]),r.value=(o=(await de(i.requirementId,i.detailId)).data)==null?void 0:o.detail,g.value=r.value,l.value=r.value.supervisor;const U=new Date(r.value.better_to_complete_on);g.value.better_to_complete_on=U.toISOString().split("T")[0]}catch(c){y.value=((b=(t=c.response)==null?void 0:t.data)==null?void 0:b.message)||"Failed to fetch requirement detail"}finally{d.value=""}}),(s,o)=>(n(),p("div",it,[e("div",at,[o[8]||(o[8]=e("h2",{class:"text-2xl font-semibold text-gray-800"},"Add Requirement Details",-1)),o[9]||(o[9]=e("hr",{class:"mb-4"},null,-1)),e("div",{class:"text-purple-600/80 mb-4 text-xs border-b border-dashed",onClick:o[0]||(o[0]=q(t=>a("ok"),["prevent"]))}," Fields that must be filled in will be marked with an asterisk. ")]),e("form",{onSubmit:q(u,["prevent"]),class:"z-0"},[d.value!=="loading"?(n(),p(V,{key:0},[e("div",dt,[e("label",ut,[o[10]||(o[10]=D("Title ")),C(ne)]),R(e("input",{"onUpdate:modelValue":o[1]||(o[1]=t=>g.value.title=t),required:"",placeholder:"EnderRequirement detail title",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[T,g.value.title]])]),e("div",mt,[o[11]||(o[11]=e("label",{class:"block text-gray-600 text-sm mb-1 font-medium"},"Description",-1)),R(e("textarea",{rows:"10","onUpdate:modelValue":o[2]||(o[2]=t=>g.value.description=t),placeholder:"Enter requirement description",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[T,g.value.description]])]),e("div",pt,[o[12]||(o[12]=e("label",{class:"block text-gray-600 text-sm mb-1 font-medium"},"Supervisor",-1)),C(ue,{modelValue:l.value,"onUpdate:modelValue":o[4]||(o[4]=t=>l.value=t),options:f.value,placeholder:"--NO SUPERVISOR--"},{option:I(({option:t})=>[C(O,{user:t||{}},null,8,["user"])]),"selected-option":I(({option:t})=>[t?(n(),p("div",bt,[C(O,{user:t||{}},null,8,["user"]),l.value?(n(),p("div",ct,[e("button",{onClick:o[3]||(o[3]=q(b=>l.value=null,["prevent"])),class:"text-gray-6 font-semibold 00 hover:text-red-700"}," × ")])):h("",!0)])):h("",!0)]),_:1},8,["modelValue","options"])]),e("div",vt,[o[14]||(o[14]=e("label",{class:"block text-gray-600 text-sm mb-1 font-medium"},"Priority ",-1)),R(e("select",{class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500","onUpdate:modelValue":o[5]||(o[5]=t=>g.value.priority=t)},o[13]||(o[13]=[e("option",{value:""},"NORMAL",-1),e("option",null,"IMPORTANT",-1),e("option",null,"URGENT",-1)]),512),[[oe,g.value.priority]])]),e("div",ft,[o[15]||(o[15]=e("label",{class:"block text-gray-600 text-sm mb-1 font-medium"},"Better to Complete ",-1)),R(e("input",{type:"date","onUpdate:modelValue":o[6]||(o[6]=t=>g.value.better_to_complete_on=t),placeholder:"EnderRequirement detail title",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[T,g.value.better_to_complete_on]])])],64)):h("",!0),e("div",yt,[y.value?(n(),p("div",xt,w(y.value),1)):h("",!0),y.value?(n(),p("hr",gt)):h("",!0),e("div",wt,[e("button",{type:"button",onClick:o[7]||(o[7]=q(t=>a("closeClick"),["prevent"])),class:"bg-gray-200 hover:bg-gray-300 text-gray-700 font-semibold px-5 py-2 rounded transition"}," Cancel "),e("button",{disabled:d.value=="loading"||d.value=="submitting",type:"submit",class:"bg-blue-500 hover:bg-blue-600 text-white font-semibold px-5 py-2 rounded transition"},w(d.value=="submitting"?"Saving...":"Edit Detail"),9,kt)])])],32),d.value==="loading"||d.value==="submitting"?(n(),F(A,{key:0,class:"z-20 absolute inset-0 flex items-center justify-center bg-opacity-30"})):h("",!0)]))}},ht={class:"group/item border text-gray-800 py-4 shadow-sm mb-4 px-4 rounded-md hover:bg-blue-50"},_t={class:"border-2 border-gray-700 p-3 align-top"},qt={class:"text-2xl font-medium"},Ct={class:"border-2 border-gray-700 p-3"},St={class:"text-lg font-semibold mb-2"},Dt={class:"mb-5"},Rt={class:"text-justify"},It=["innerHTML"],Vt={class:"flex items-end"},Et={class:"flex items-center gap-1 mb-3"},Ft={class:"text-blue-400 font-semibold"},Tt={class:"ml-auto flex gap-6 items-center"},Ut={class:"border-2 border-gray-700 p-3 whitespace-nowrap print:whitespace-break-spaces print:px-0 text-center"},Nt={key:1,colspan:"2",class:"border-2 border-gray-700 p-3 text-center"},Lt={__name:"RequirementDetailTableRow",props:{detail:{type:Object},serial:{type:Number}},emits:["editClick","deleteClick"],setup(v,{emit:_}){const i=_,a=$("line-clamp-2");function m(){a.value=a.value?"":"line-clamp-2"}return(x,r)=>(n(),p("tr",ht,[e("td",_t,[e("span",qt,w(v.serial),1)]),e("td",Ct,[e("div",null,[e("div",St,[e("span",null,w(v.detail.title),1)]),r[3]||(r[3]=e("hr",{class:"mb-4 -mx-4"},null,-1)),e("div",Dt,[r[2]||(r[2]=e("div",{class:"text-gray-400 mr-2 text-xs uppercase font-semibold"},"Description",-1)),e("div",Rt,[e("p",{class:P(["print:line-clamp-none",a.value]),innerHTML:v.detail.description},null,10,It),e("button",{class:"text-blue-500 group-hover/item:underline hover:text-sky-400 ml-auto text-sm print:hidden",onClick:q(m,["prevent"])},w(a.value?"Show More":"Show Less"),1)])])]),e("div",Vt,[e("div",null,[e("div",Et,[r[4]||(r[4]=e("span",{class:"text-gray-400 mr-2 text-xs uppercase font-semibold"},"Supervisor:",-1)),v.detail.supervisor?(n(),F(we,{key:0,user:v.detail.supervisor},null,8,["user"])):h("",!0)]),e("div",null,[r[5]||(r[5]=e("span",{class:"text-gray-500 mr-2 text-xs uppercase font-semibold"},"Priority:",-1)),e("span",Ft,w(v.detail.priority),1)])]),e("div",Tt,[e("button",{class:"btn-2",onClick:r[0]||(r[0]=q(d=>i("editClick",v.detail),["prevent"]))},r[6]||(r[6]=[e("i",{class:"fas fa-edit"},null,-1),D("Edit ")])),e("button",{class:"btn-2-red",onClick:r[1]||(r[1]=q(d=>i("deleteClick",v.detail),["prevent"]))},r[7]||(r[7]=[e("i",{class:"fas fa-trash-alt"},null,-1),D("Delete ")]))])])]),e("td",Ut,[e("div",null,w(new Date(v.detail.better_to_complete_on).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",weekday:"short"})),1)]),v.detail.task_id?(n(),p(V,{key:0},[r[8]||(r[8]=e("td",{class:"border-2 border-gray-700 p-3"},null,-1)),r[9]||(r[9]=e("td",{class:"border-2 border-gray-700 p-3"},null,-1))],64)):(n(),p("td",Nt,r[10]||(r[10]=[e("button",{class:"print:hidden hover:border-2 group-hover/item:bg-blue-200 hover:border-blue-700 text-blue-500 hover:text-white hover:!bg-blue-500 rounded-md px-4 py-1"}," Create Task ",-1)])))]))}},Ot={class:"container mx-auto p-6 print:p-0 w-full print:max-w-full"},Bt={class:"bg-white rounded shadow print:shadow-none p-4 print:p-0 relative"},At={class:"flex items-start"},jt={class:"mb-4 text-lg print:black print:font-bold"},Mt={class:"ml-auto print:hidden flex gap-2 items-center"},zt={class:"mb-4 flex items-center gap-1 print:mb-1"},Pt={class:"font-bold print:text-gray-900"},Gt={class:"mb-4 print:flex print:items-center print:gap-3 print:mb-1"},Ht={class:"print:text-gray-900"},Wt={class:"mb-4 print:flex print:items-center print:gap-3 print:mb-1"},Kt={class:"flex items-center gap-2 print:text-gray-900"},Qt={class:"mb-4 print:flex print:items-center print:gap-3 print:mb-1"},Jt={class:"print:text-gray-900"},Xt={class:"flex items-end mb-3"},Yt={class:"ml-auto print:hidden flex gap-2 text-sm"},Zt={key:0,class:"overflow-x-auto print:overflow-visible"},es={class:"w-full table-auto print:table-fixed"},ts={colspan:"2",class:"border-2 border-gray-800 text-center text-gray-800 print:text-black text-base font-semibold whitespace-nowrap px-3 py-1 print:whitespace-normal w-[25%]"},ss={class:"whitespace-nowrap print:whitespace-break-spaces print:px-0 p-3 text-center border-2 border-gray-800"},ls={class:"text-gray-900 text-base"},rs={key:1,class:"border min-h-64 rounded-md flex items-center justify-center group"},fs={__name:"RequirementShow",setup(v){const _=ce(),i=ve(),a=$(""),m=$(null),x=M({open:!1}),r=M({detail:null,open:!1}),d=M({detail:null,open:!1});N(async()=>{await y()});async function y(){var u;a.value="loading",m.value=(u=(await G(_.params.id)).data)==null?void 0:u.requirement,a.value=""}function g(){x.open=!0}function k(u){r.open=!0,r.detail=u}function f(u){d.open=!0,d.detail=u}function l(){window.print()}return(u,s)=>{var t,b,c,U,H,W,K,Q,J,X,Y,Z,ee,te;const o=fe("RouterLink");return n(),p("div",Ot,[x.open?(n(),F(z,{key:0,class:"*:max-w-4xl"},{default:I(()=>[C(Ke,{requirementId:m.value.id,onCloseClick:s[0]||(s[0]=S=>x.open=!1),onCreate:s[1]||(s[1]=async()=>{x.open=!1,await y()})},null,8,["requirementId"])]),_:1})):h("",!0),r.open?(n(),F(z,{key:1},{default:I(()=>{var S;return[C($t,{requirementId:m.value.id,detailId:(S=r.detail)==null?void 0:S.id,onCloseClick:s[2]||(s[2]=j=>r.open=!1),onUpdate:s[3]||(s[3]=async()=>{r.open=!1,await y()})},null,8,["requirementId","detailId"])]}),_:1})):h("",!0),d.open?(n(),F(z,{key:2},{default:I(()=>{var S;return[C(nt,{requirementId:m.value.id,detailId:(S=d.detail)==null?void 0:S.id,onCloseClick:s[4]||(s[4]=j=>d.open=!1),onDelete:s[5]||(s[5]=async()=>{d.open=!1,await y()})},null,8,["requirementId","detailId"])]}),_:1})):h("",!0),e("div",Bt,[e("div",At,[e("div",jt,[s[7]||(s[7]=e("div",{class:"text-gray-800 print:leading-none"},"To",-1)),e("div",null,w((b=(t=m.value)==null?void 0:t.to_department)==null?void 0:b.name),1)]),e("div",Mt,[(((c=m.value)==null?void 0:c.details)||[]).length>0?(n(),p("button",{key:0,class:"btn-3 font-semibold !pl-2 !pr-4",onClick:q(l,["prevent"])},s[8]||(s[8]=[e("i",{class:"fad fa-print text-xl"},null,-1),D("Print ")]))):h("",!0),e("button",{class:"btn-3",onClick:s[6]||(s[6]=q(()=>ye(i).back(),["prevent"]))},"Back"),C(o,{class:"btn-2",to:`/requirements/edit/${(U=m.value)==null?void 0:U.id}`},{default:I(()=>s[9]||(s[9]=[D("Edit")])),_:1,__:[9]},8,["to"])])]),s[24]||(s[24]=e("div",{class:"text-center text-xl font-bold mb-2 underline"},"Requirement Form",-1)),e("div",zt,[s[10]||(s[10]=e("div",{class:"text-gray-800 text-sm"},"Requirement ID:",-1)),e("div",Pt,w((H=m.value)==null?void 0:H.id),1)]),e("div",Gt,[s[11]||(s[11]=e("div",{class:"text-gray-800 text-sm"},"From",-1)),e("div",Ht,w((K=(W=m.value)==null?void 0:W.from_department)==null?void 0:K.name),1)]),e("div",Wt,[s[12]||(s[12]=e("div",{class:"text-gray-500 text-sm"},"Website",-1)),e("div",Kt,[(n(!0),p(V,null,L(((Q=m.value)==null?void 0:Q.website_tags)||[],S=>(n(),p("div",{key:S.id,class:"border px-2 rounded-md bg-gray-50 shadow-sm"},w(S.name),1))),128))])]),e("div",Qt,[s[13]||(s[13]=e("div",{class:"text-gray-500 text-sm"},"Submission Date",-1)),e("div",Jt,w(new Date((J=m.value)==null?void 0:J.submission_date).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})),1)]),s[25]||(s[25]=e("hr",{class:"mb-4"},null,-1)),e("div",null,[e("div",Xt,[s[15]||(s[15]=e("h2",{class:"text-xl font-semibold"},"Requirement Task List",-1)),e("div",Yt,[(((X=m.value)==null?void 0:X.details)||[]).length>0?(n(),p("button",{key:0,class:"btn-4 font-semibold !pl-2 !pr-4 border-2 border-blue-800 hover:bg-blue-800 hover:text-white",onClick:q(g,["prevent"])},s[14]||(s[14]=[e("i",{class:"fad fa-plus-circle text-xl"},null,-1),D("Add Requirement ")]))):h("",!0)])]),(((Y=m.value)==null?void 0:Y.details)||[]).length>0?(n(),p("div",Zt,[e("table",es,[e("thead",null,[e("tr",null,[s[16]||(s[16]=e("th",{rowspan:"2",class:"border-2 border-gray-800 text-left px-4 text-gray-800 print:text-black text-xl font-semibold whitespace-nowrap w-[15%]"}," SL ",-1)),s[17]||(s[17]=e("th",{rowspan:"2",class:"border-2 border-gray-800 text-center text-gray-800 print:text-black text-base font-semibold whitespace-nowrap w-[65%]"}," Requirement Details ",-1)),s[18]||(s[18]=e("th",{rowspan:"2",class:"border-2 border-gray-800 text-center text-gray-800 print:text-black text-base px-3 font-semibold whitespace-nowrap print:whitespace-normal print:p-0 w-[15%]"}," Better To Complete ",-1)),e("th",ts," For '"+w(((Z=m.value.to_department)==null?void 0:Z.short_name)||((ee=m.value.to_department)==null?void 0:ee.name))+"' Use ",1)]),s[19]||(s[19]=e("tr",null,[e("td",{class:"border-2 border-gray-800 text-center text-gray-800 print:text-black text-sm font-semibold whitespace-nowrap p-3 print:whitespace-normal"}," Issue No "),e("td",{class:"border-2 border-gray-800 text-center text-gray-800 print:text-black text-sm font-semibold whitespace-nowrap p-3 print:whitespace-normal print:p-0"}," Expected Date ")],-1))]),e("tbody",null,[(n(!0),p(V,null,L(((te=m.value)==null?void 0:te.details)||[],(S,j)=>{var se,le;return n(),p(V,{key:S.id},[C(Lt,{detail:S,serial:j+1,onEditClick:k,onDeleteClick:f},null,8,["detail","serial"]),e("tr",null,[e("td",ss,[e("div",ls," For '"+w(((se=m.value.to_department)==null?void 0:se.short_name)||((le=m.value.to_department)==null?void 0:le.name))+"' Use ",1),s[20]||(s[20]=e("div",{class:"text-gray-800 text-xs"},"(Feedback)",-1))]),s[21]||(s[21]=e("td",{class:"whitespace-nowrap p-3 text-center border-2 border-gray-800",colspan:"4"},null,-1))]),s[22]||(s[22]=e("tr",null,[e("td",{class:"whitespace-nowrap p-3 text-center border-2 border-gray-800 min-h-96"},"   "),e("td",{class:"whitespace-nowrap p-3 text-center border-2 border-gray-800 min-h-96",colspan:"4"},"   ")],-1))],64)}),128))])])])):(n(),p("div",rs,[e("button",{class:"btn-4 font-semibold pl-2 group-hover:border border-blue-300",onClick:q(g,["prevent"])},s[23]||(s[23]=[e("i",{class:"fad fa-plus-circle text-2xl"},null,-1),D("Add Requirement ")]))]))]),a.value==="loading"?(n(),F(A,{key:0,class:"absolute inset-0 bg-opacity-90"})):h("",!0)])])}}};export{fs as default};
