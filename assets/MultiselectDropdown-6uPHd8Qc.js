import{r as k,A as L,m as b,c as i,o as u,L as y,a as t,p as j,U,i as h,g as d,F as D,y as F,j as I,t as c,w as v,V as E,a5 as Q,x as V,k as q}from"./index-D_5uLc0m.js";import{s as G}from"./MultiselectDropdown.vue_vue_type_style_index_0_lang-zj2T8rf_.js";const J={class:"w-full"},K={class:"relative"},W={class:"px-2 pt-2"},X={class:"relative"},Y=["placeholder"],Z=["onClick"],_={key:0,class:"mt-2 flex flex-wrap items-center gap-2 text-xs"},ee=["disabled"],le=["disabled"],te=["disabled"],ae={class:"flex items-center gap-2"},se={class:"truncate"},re={key:0},ne=["title"],oe={key:0},ie={class:"flex flex-wrap items-center gap-1"},ue=["onClick"],ce={key:0,class:"text-xs text-gray-500"},de={key:1,class:"ml-1 text-[11px] text-gray-400"},he={class:"px-3 py-2 text-sm text-gray-500"},fe={class:"px-3 py-2 text-sm text-gray-500"},me={class:"mt-1 flex items-center justify-between text-xs"},ve={key:0,class:"text-gray-500"},ge={key:0,class:"text-red-600 ml-auto"},ye={key:1,class:"text-emerald-600 ml-auto"},xe={__name:"MultiselectDropdown",props:{modelValue:{type:[Number,Array,Object,String,null],default:null},options:{type:Array,default:()=>[]},multiple:{type:Boolean,default:!1},searchable:{type:Boolean,default:!0},clearOnSelect:{type:Boolean,default:!0},clearable:{type:Boolean,default:!0},maxHeight:{type:Number,default:240},label:{type:String,default:"name"},labelPrefix:{type:String,default:""},trackBy:{type:String,default:"id"},placeholder:{type:String,default:"Select…"},searchPlaceholder:{type:String,default:"Search..."},size:{type:String,default:"md"},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},error:{type:[Boolean,String],default:!1},success:{type:Boolean,default:!1},help:{type:String,default:""},chipLimit:{type:Number,default:2},showCounter:{type:Boolean,default:!0},showToolbar:{type:Boolean,default:!0},enableSelectVisible:{type:Boolean,default:!0},noOptionsText:{type:String,default:"No options"},noResultText:{type:String,default:"No results found"}},emits:["update:modelValue","select","remove","open","close","search-change","clear"],setup(a,{emit:z}){const r=a,f=z,o=k(r.modelValue);L(()=>r.modelValue,l=>{o.value=l}),L(o,l=>f("update:modelValue",l));const g=l=>l?(l==null?void 0:l[r.label])??(l==null?void 0:l.title)??(l==null?void 0:l.name)??(l==null?void 0:l.id)??"":"",m=l=>(l==null?void 0:l[r.trackBy])??l,M=k(!1),p=k(""),C=b(()=>r.multiple?Array.isArray(o.value)&&o.value.length>0:!!o.value),S=b(()=>{if(!r.multiple)return!1;const l=r.options||[],e=o.value||[];return l.length?e.length===l.length:!1}),B=()=>{o.value=r.multiple?[]:null,f("clear")},H=()=>{r.multiple&&(o.value=S.value?[]:[...r.options])},A=()=>{if(!r.multiple)return;const l=new Map((o.value||[]).map(e=>[m(e),!0]));o.value=(r.options||[]).filter(e=>!l.get(m(e)))},N=l=>{r.multiple&&(o.value=(o.value||[]).filter(e=>m(e)!==m(l)))},O=()=>{if(!r.multiple)return;const l=p.value.trim().toLowerCase();if(!l)return;const e=(r.options||[]).filter(n=>String(g(n)).toLowerCase().includes(l)),s=new Map((o.value||[]).map(n=>[m(n),n]));for(const n of e)s.set(m(n),n);o.value=Array.from(s.values())},$=l=>{p.value=l||"",f("search-change",l)},P=b(()=>{switch(r.size){case"sm":return"text-sm py-1";case"lg":return"text-base py-2";default:return"text-sm py-1.5"}}),T=b(()=>r.error?"ring-1 ring-red-400 border-red-400":r.success?"ring-1 ring-emerald-400 border-emerald-400":"border-gray-300 focus-within:ring-2 focus-within:ring-indigo-500");return(l,e)=>(u(),i("div",J,[y(l.$slots,"label"),t("div",K,[j(q(G),{modelValue:o.value,"onUpdate:modelValue":e[2]||(e[2]=s=>o.value=s),options:a.options,multiple:a.multiple,"track-by":a.trackBy,label:a.label,searchable:a.searchable,"clear-on-select":a.clearOnSelect,"close-on-select":!a.multiple,"allow-empty":!0,"internal-search":!0,loading:a.loading,"show-no-results":!0,"max-height":a.maxHeight,placeholder:a.placeholder,disabled:a.disabled,onSelect:e[3]||(e[3]=(s,n)=>f("select",s,n)),onRemove:e[4]||(e[4]=(s,n)=>f("remove",s,n)),onOpen:e[5]||(e[5]=()=>f("open")),onClose:e[6]||(e[6]=()=>f("close")),onSearchChange:$,class:V(["w-full",["smart-multi",P.value,T.value,a.disabled?"opacity-60 cursor-not-allowed":"cursor-pointer"]])},U({caret:h(()=>[(u(),i("svg",{class:V(["h-4 w-4 text-gray-500 mr-2 transition-transform",{"rotate-180":M.value}]),viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},e[7]||(e[7]=[t("path",{"fill-rule":"evenodd",d:"M10 12a1 1 0 0 1-.7-.29l-4-4a1 1 0 1 1 1.4-1.42L10 9.59l3.3-3.3a1 1 0 1 1 1.4 1.42l-4 4A1 1 0 0 1 10 12z","clip-rule":"evenodd"},null,-1)]),2))]),clear:h(()=>[a.clearable&&C.value?(u(),i("button",{key:0,type:"button",class:"p-1 rounded hover:bg-gray-100 transition",onClick:e[0]||(e[0]=v(s=>B(),["stop"])),"aria-label":"Clear selection"},e[8]||(e[8]=[t("svg",{class:"h-4 w-4 text-gray-500",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M10 8.586l4.95-4.95a1 1 0 1 1 1.414 1.414L11.414 10l4.95 4.95a1 1 0 0 1-1.414 1.414L10 11.414l-4.95 4.95a1 1 0 1 1-1.414-1.414L8.586 10l-4.95-4.95A1 1 0 1 1 5.05 3.636L10 8.586z","clip-rule":"evenodd"})],-1)]))):d("",!0)]),search:h(({search:s,attributes:n,events:x})=>{var w;return[t("div",W,[t("div",X,[e[10]||(e[10]=t("svg",{class:"absolute left-2 top-2.5 h-4 w-4 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M13.293 14.707a8 8 0 1 1 1.414-1.414l3.5 3.5a1 1 0 0 1-1.414 1.414l-3.5-3.5zM8 14a6 6 0 1 0 0-12 6 6 0 0 0 0 12z","clip-rule":"evenodd"})],-1)),t("input",E({class:"w-full pl-8 pr-8 py-2 rounded-md border border-gray-200 focus:outline-none focus:ring-2 focus:ring-indigo-500"},n,Q(x,!0),{placeholder:a.searchPlaceholder||"Search..."}),null,16,Y),s?(u(),i("button",{key:0,type:"button",class:"absolute right-2 top-2 h-6 w-6 inline-flex items-center justify-center rounded hover:bg-gray-100",onClick:v(R=>x.input({target:{value:""}}),["stop"]),"aria-label":"Clear search"},e[9]||(e[9]=[t("svg",{class:"h-4 w-4 text-gray-500",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M10 8.586l4.243-4.243a1 1 0 1 1 1.414 1.414L11.414 10l4.243 4.243a1 1 0 0 1-1.414 1.414L10 11.414l-4.243 4.243a1 1 0 0 1-1.414-1.414L8.586 10 4.343 5.757a1 1 0 0 1 1.414-1.414L10 8.586z","clip-rule":"evenodd"})],-1)]),8,Z)):d("",!0)]),a.multiple&&a.showToolbar?(u(),i("div",_,[t("button",{type:"button",class:"btn-chip",onClick:v(H,["stop"])},[e[11]||(e[11]=t("svg",{class:"h-3.5 w-3.5",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{d:"M16 3H4a2 2 0 00-2 2v5h2V5h12v10H4v-2H2v2a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2z"}),t("path",{d:"M5 9l3 3 5-6 1.5 1.2L8 14 3.5 9.5 5 9z"})],-1)),t("span",null,c(S.value?"Unselect all":"Select all"),1)]),t("button",{type:"button",class:"btn-chip",disabled:!C.value,onClick:e[1]||(e[1]=v(R=>B(),["stop"]))},e[12]||(e[12]=[t("svg",{class:"h-3.5 w-3.5",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{d:"M6 7h8v10a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2V7zm2-4h4l1 1h3a1 1 0 1 1 0 2H4a1 1 0 1 1 0-2h3l1-1z"})],-1),t("span",null,"Clear",-1)]),8,ee),t("button",{type:"button",class:"btn-chip",disabled:!((w=a.options)!=null&&w.length),onClick:v(A,["stop"])},e[13]||(e[13]=[t("svg",{class:"h-3.5 w-3.5",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{d:"M4 4h12v2H4V4zm0 5h8v2H4V9zm0 5h12v2H4v-2z"})],-1),t("span",null,"Invert",-1)]),8,le),a.enableSelectVisible?(u(),i("button",{key:0,type:"button",class:"btn-chip",disabled:!p.value,onClick:v(O,["stop"]),title:"Select items matching current search"},e[14]||(e[14]=[t("svg",{class:"h-3.5 w-3.5",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{d:"M8 12l-3-3 1.414-1.414L8 9.172l5.586-5.586L15 5z"})],-1),t("span",null,"Select visible",-1)]),8,te)):d("",!0)])):d("",!0)])]}),option:h(({option:s})=>[y(l.$slots,"option",{option:s},()=>[t("div",ae,[t("span",se,[a.labelPrefix?(u(),i("span",re,c(s==null?void 0:s[a.labelPrefix])+" - ",1)):d("",!0),t("span",null,c(g(s)),1)])])])]),singleLabel:h(({option:s})=>[y(l.$slots,"singleLabel",{option:s},()=>[t("div",{class:"line-clamp-1",title:g(s)},[a.labelPrefix?(u(),i("span",oe,c(s==null?void 0:s[a.labelPrefix])+" - ",1)):d("",!0),t("span",null,c(g(s)),1)],8,ne)])]),spinner:h(()=>[e[15]||(e[15]=t("svg",{class:"animate-spin h-4 w-4 text-gray-500 mr-2",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"3",fill:"none"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 0 1 8-8v3a5 5 0 0 0-5 5H4z"})],-1))]),noOptions:h(()=>[t("div",he,c(a.noOptionsText),1)]),noResult:h(()=>[t("div",fe,c(a.noResultText),1)]),_:2},[a.multiple?{name:"selection",fn:h(({values:s})=>[y(l.$slots,"selection",{values:s},()=>[t("div",ie,[(u(!0),i(D,null,F(s.slice(0,a.chipLimit),(n,x)=>(u(),i("span",{key:m(n),class:"chip"},[I(c(g(n))+" ",1),t("button",{type:"button",class:"chip-x",onClick:v(w=>N(n),["stop"]),"aria-label":"Remove"},"×",8,ue)]))),128)),s.length>a.chipLimit?(u(),i("span",ce,"+"+c(s.length-a.chipLimit)+" more",1)):d("",!0),a.showCounter&&s.length?(u(),i("span",de,"("+c(s.length)+")",1)):d("",!0)])])]),key:"0"}:void 0]),1032,["modelValue","options","multiple","track-by","label","searchable","clear-on-select","close-on-select","loading","max-height","placeholder","disabled","class"]),t("div",me,[y(l.$slots,"help",{},()=>[a.help?(u(),i("p",ve,c(a.help),1)):d("",!0)]),a.error?(u(),i("p",ge,c(typeof a.error=="string"?a.error:"Invalid selection"),1)):a.success?(u(),i("p",ye,"Looks good")):d("",!0)])])]))}};export{xe as _};
