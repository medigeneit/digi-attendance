import{d as b,u as w,b as C,r as c,c as n,o,a as e,f as v,k as p,q as P,h as q,v as S,F as N,n as U,t as d,g as B}from"./index-DFN3F9TA.js";import{_ as F}from"./EmployeeFilter-Df8Ce9K3.js";import{L}from"./LoaderView-Bm25Ml6I.js";import{u as V,_ as $}from"./UpdateOrCreate-BTqDSh6x.js";import"./company-WMxMoEGB.js";import"./department-DkAnO1Db.js";import"./SelectDropdown-ZBR42h8e.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./UserChip-C5cdFgMr.js";import"./TimePickerAsFloatHour-Da89Wied.js";const A={class:"px-4 space-y-4"},D={class:"flex items-center justify-between gap-2"},I={class:"flex flex-wrap gap-4 items-center"},M={key:1},R={class:"table-auto w-full border mt-4 text-sm"},E={class:"p-2"},j={class:"p-2"},H={class:"p-2"},O={class:"p-2"},T={class:"p-2"},z={class:"p-2 text-center flex gap-2"},G=["onClick"],J={key:2,class:"text-red-500 text-sm text-center"},K={key:3,class:"text-gray-400 text-sm text-center"},re={__name:"PayCutList",setup(Q){const h=b(),g=w(),r=C(),u=V(),i=c(r.query.month||new Date().toISOString().slice(0,7)),a=c({company_id:r.query.company_id||"",department_id:r.query.department_id||"all",type:r.query.type||"all",employee_id:r.query.employee_id||""}),y=c(!1),m=async()=>{if(!i.value||!a.value.company_id)return;const l={month:i.value,company_id:a.value.company_id};a.value.employee_id&&(l.user_id=a.value.employee_id),y.value=!0,await u.fetchPaycuts(l),y.value=!1},x=async l=>{confirm("Are you sure you want to delete this paycut?")&&(await u.deletePaycut(l),await m())};return(l,t)=>(o(),n("div",A,[e("div",D,[e("button",{type:"button",class:"btn-3",onClick:t[0]||(t[0]=s=>p(g).go(-1))},t[6]||(t[6]=[e("i",{class:"far fa-arrow-left"},null,-1),e("span",{class:"hidden md:flex"},"Back",-1)])),t[7]||(t[7]=e("h1",{class:"title-md md:title-lg text-center"},"Monthly Paycut",-1)),t[8]||(t[8]=e("div",null,null,-1))]),e("div",I,[P(F,{company_id:a.value.company_id,"onUpdate:company_id":t[1]||(t[1]=s=>a.value.company_id=s),department_id:a.value.department_id,"onUpdate:department_id":t[2]||(t[2]=s=>a.value.department_id=s),employee_id:a.value.employee_id,"onUpdate:employee_id":t[3]||(t[3]=s=>a.value.employee_id=s),category:a.value.category,"onUpdate:category":t[4]||(t[4]=s=>a.value.category=s),"with-type":!0,"initial-value":l.$route.query,onFilterChange:l.handleFilterChange},null,8,["company_id","department_id","employee_id","category","initial-value","onFilterChange"]),q(e("input",{type:"month","onUpdate:modelValue":t[5]||(t[5]=s=>i.value=s),class:"input-1"},null,512),[[S,i.value]])]),y.value?(o(),v(L,{key:0})):p(u).paycuts.length?(o(),n("div",M,[e("table",R,[t[10]||(t[10]=e("thead",{class:"bg-gray-100 text-left"},[e("tr",null,[e("th",{class:"p-2"},"#"),e("th",{class:"p-2"},"Employee"),e("th",{class:"p-2"},"Paycut Hours"),e("th",{class:"p-2"},"Reason"),e("th",{class:"p-2"},"Note"),e("th",{class:"p-2 text-center"},"Actions")])],-1)),e("tbody",null,[(o(!0),n(N,null,U(p(u).paycuts,(s,k)=>{var _,f;return o(),n("tr",{key:s.id,class:"border-t"},[e("td",E,d(k+1),1),e("td",j,d(((_=s.user)==null?void 0:_.name)||"N/A"),1),e("td",H,d(s.paycut_hours),1),e("td",O,d(s.reason||"-"),1),e("td",T,d(s.note||"-"),1),e("td",z,[((f=p(h).user)==null?void 0:f.id)===8?(o(),v($,{key:0,userId:s.user_id,month:i.value,onUpdated:m},null,8,["userId","month"])):B("",!0),e("button",{type:"button",class:"text-red-500",onClick:W=>x(s.id)},t[9]||(t[9]=[e("i",{class:"fa fa-trash"},null,-1)]),8,G)])])}),128))])])])):a.value.company_id?(o(),n("p",K," No paycuts found for the selected filters. ")):(o(),n("p",J," Please select a company to load paycut data. "))]))}};export{re as default};
