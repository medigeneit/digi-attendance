import{G as $,r as h,p as m,H as u}from"./index-Do4lXNJe.js";const C=$("device",()=>{const o=h([]),v=h(null),n=h(!1),c=h(null),g=async()=>{var e,t;n.value=!0,c.value=null;try{const i=await u.get("/devices");o.value=i.data}catch(i){c.value=((t=(e=i.response)==null?void 0:e.data)==null?void 0:t.message)||"ডিভাইস লোড করতে ব্যর্থ হয়েছে।",console.error("Error fetching devices:",i)}finally{n.value=!1}},y=async e=>{var t,i;n.value=!0,c.value=null;try{const l=await u.get(`/devices/${e}`);v.value=l.data}catch(l){c.value=((i=(t=l.response)==null?void 0:t.data)==null?void 0:i.message)||`ডিভাইস (ID: ${e}) লোড করতে ব্যর্থ হয়েছে।`,console.error(`Error fetching device with id ${e}:`,l)}finally{n.value=!1}},f=async e=>{var t,i;n.value=!0,c.value=null;try{const l=await u.post("/devices",e);return o.value.push(l.data),l.data}catch(l){c.value=((i=(t=l.response)==null?void 0:t.data)==null?void 0:i.message)||"ডিভাইস তৈরি করতে ব্যর্থ হয়েছে।",console.error("Error creating device:",l)}finally{n.value=!1}},d=async(e,t)=>{var i,l;n.value=!0,c.value=null;try{const w=await u.put(`/devices/${e}`,t),U=o.value.findIndex(D=>D.id===e);return U!==-1&&(o.value[U]=w.data),w.data}catch(w){c.value=((l=(i=w.response)==null?void 0:i.data)==null?void 0:l.message)||`ডিভাইস (ID: ${e}) আপডেট করতে ব্যর্থ হয়েছে।`,console.error(`Error updating device with id ${e}:`,w)}finally{n.value=!1}},p=async e=>{var t,i;n.value=!0,c.value=null;try{await u.delete(`/devices/${e}`),o.value=o.value.filter(l=>l.id!==e)}catch(l){c.value=((i=(t=l.response)==null?void 0:t.data)==null?void 0:i.message)||`ডিভাইস (ID: ${e}) মুছতে ব্যর্থ হয়েছে।`,console.error(`Error deleting device with id ${e}:`,l)}finally{n.value=!1}},r=async e=>{try{return await u.get(`/check-device-connection/${e}`),!0}catch(t){return console.error(t),!1}},a=async e=>{try{return n.value=!0,await u.post(`/devices/${e}/sync-catchup`),!0}catch(t){return console.error(t),!1}finally{n.value=!1}},s=async()=>{try{return n.value=!0,await u.post("/devices/sync-all"),!0}catch(e){return console.error(e),!1}finally{n.value=!1}};return{devices:m(()=>o.value),device:m(()=>v.value),loading:m(()=>n.value),error:m(()=>c.value),fetchDevices:g,fetchDevice:y,createDevice:f,updateDevice:d,deleteDevice:p,checkDeviceConnection:r,syncCatchup:a,syncAll:s}}),k=$("zkUser",()=>{const o=h([]),v=h(!1),n=h(null);async function c(){var a,s;v.value=!0,n.value=null;try{const{data:e}=await u.get("/zk-users");return o.value=e,e}catch(e){return n.value=((s=(a=e==null?void 0:e.response)==null?void 0:a.data)==null?void 0:s.message)||e.message,[]}finally{v.value=!1}}async function g(a){var s;try{const{data:e}=await u.post("/zk-users",a);return await c(),e}catch(e){throw((s=e==null?void 0:e.response)==null?void 0:s.data)||e}}async function y(a,s){var e;try{const{data:t}=await u.put(`/zk-users/${encodeURIComponent(a)}`,s);return await c(),t}catch(t){throw((e=t==null?void 0:t.response)==null?void 0:e.data)||t}}async function f(a){var s;try{const{data:e}=await u.delete(`/zk-users/${encodeURIComponent(a)}`);return await c(),e}catch(e){throw((s=e==null?void 0:e.response)==null?void 0:s.data)||e}}async function d(a){var s;try{const{data:e}=await u.post(`/devices/${encodeURIComponent(a)}/pull-users`);return await c(),e}catch(e){throw((s=e==null?void 0:e.response)==null?void 0:s.data)||e}}async function p(a){var s;try{const{data:e}=await u.post(`/devices/${encodeURIComponent(a)}/push-users`);return e}catch(e){throw((s=e==null?void 0:e.response)==null?void 0:s.data)||e}}async function r(a,s){var e;try{const{data:t}=await u.post(`/devices/${encodeURIComponent(a)}/users/${encodeURIComponent(s)}/push`);return t}catch(t){throw((e=t==null?void 0:t.response)==null?void 0:e.data)||t}}return{users:o,loading:v,error:n,fetchUsers:c,createUser:g,updateUser:y,deleteUser:f,pullUsersFromDevice:d,pushAllUsersToDevice:p,pushSingleUserToDevice:r}}),R=$("zkFinger",()=>{const o=h(!1),v=h(null);async function n(y){var f,d,p;o.value=!0,v.value=null;try{const{data:r}=await u.post(`/devices/${encodeURIComponent(y)}/pull-fingerprints`);return r}catch(r){throw v.value=((d=(f=r==null?void 0:r.response)==null?void 0:f.data)==null?void 0:d.message)||r.message,((p=r==null?void 0:r.response)==null?void 0:p.data)||r}finally{o.value=!1}}async function c(y,f=[]){var d,p,r;o.value=!0,v.value=null;try{const a={zk_userids:f},{data:s}=await u.post(`/devices/${encodeURIComponent(y)}/push-fingerprints`,a);return s}catch(a){throw v.value=((p=(d=a==null?void 0:a.response)==null?void 0:d.data)==null?void 0:p.message)||a.message,((r=a==null?void 0:a.response)==null?void 0:r.data)||a}finally{o.value=!1}}async function g(y,f){var d,p,r;o.value=!0,v.value=null;try{const{data:a}=await u.post(`/devices/${encodeURIComponent(y)}/users/${encodeURIComponent(f)}/push-fingerprints`);return a}catch(a){throw v.value=((p=(d=a==null?void 0:a.response)==null?void 0:d.data)==null?void 0:p.message)||a.message,((r=a==null?void 0:a.response)==null?void 0:r.data)||a}finally{o.value=!1}}return{loading:o,error:v,pullFingerprintsFromDevice:n,pushFingerprintsBulk:c,pushFingerprintsOne:g}});export{k as a,R as b,C as u};
