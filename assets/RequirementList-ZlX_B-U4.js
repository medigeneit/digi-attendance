import{u as g}from"./useRequirementStore-DdN8uLZO.js";import{u as w,e as v,n as k,c as o,o as a,a as s,k as d,t as n,F as R,q as S,p as r,i as p,j as h}from"./index-BLs8QlT4.js";import"./requirement-CHm1MZ_M.js";const A={class:"container mx-auto p-6"},D={class:"bg-white shadow-md rounded-lg p-6"},L={key:0,class:"text-center py-4 text-gray-500"},C={key:1,class:"text-center py-4 text-red-500"},N={key:2,class:"overflow-x-auto"},j={class:"min-w-full bg-white border overflow-hidden table table-fixed"},B={class:"px-4 py-2"},E={class:"px-4 py-2 max-w-[60px] md:max-w-[300px]"},F={class:"flex flex-col lg:flex-row items-start lg:items-center gap-2"},T={class:"text-blue-700 font-semibold flex-shrink-0"},V={class:"text-blue-700 font-semibold flex-shrink-0"},M={class:""},P={key:0,class:"text-blue-800"},O={class:"line-clamp-3 text-sm"},U={key:1,class:"text-gray-400 text-sm"},z={key:0},G={key:1},H={class:"px-4 py-2 text-center whitespace-nowrap"},I={class:"text-gray-600"},J={class:"px-4 py-2 text-center"},K={class:"flex gap-4 items-center justify-center"},$={__name:"RequirementList",setup(Q){const l=g(),y=w();v(()=>{l.fetchRequirements()});const b=()=>{y.push({name:"RequirementAdd"})};return(W,e)=>{const c=k("RouterLink");return a(),o("div",A,[s("div",D,[s("div",{class:"flex justify-between items-center mb-6"},[e[2]||(e[2]=s("h2",{class:"text-2xl font-bold text-gray-800"},"Requirements",-1)),s("button",{onClick:b,class:"btn-1"},"Add Requirement")]),d(l).loading?(a(),o("div",L,"Loading requirements...")):d(l).error?(a(),o("div",C,n(d(l).error),1)):(a(),o("div",N,[s("table",j,[e[7]||(e[7]=s("thead",{class:"bg-gray-100"},[s("tr",null,[s("th",{class:"px-4 py-2 text-left whitespace-nowrap"},"#"),s("th",{class:"px-4 py-2 text-left whitespace-nowrap"},"Department"),s("th",{class:"px-4 py-2 text-center whitespace-nowrap"},"Submitted On"),s("th",{class:"px-4 py-2 text-center whitespace-nowrap"},"Actions")])],-1)),s("tbody",null,[(a(!0),o(R,null,S(d(l).requirements,(t,f)=>{var m,u,x;return a(),o("tr",{key:t.id,class:"border-t hover:bg-blue-50 odd:bg-gray-50"},[s("td",B,n(f+1),1),s("td",E,[s("div",F,[e[3]||(e[3]=s("span",{class:"text-gray-500"},"From ",-1)),s("span",T,n((m=t==null?void 0:t.from_department)==null?void 0:m.name),1),e[4]||(e[4]=s("span",{class:"text-gray-500"},"To ",-1)),s("span",V,n((u=t==null?void 0:t.to_department)==null?void 0:u.name),1)]),s("div",M,[((x=t==null?void 0:t.details)==null?void 0:x.length)>0&&Array.isArray(t==null?void 0:t.details)?(a(),o("div",P,[s("div",O,n(t==null?void 0:t.details[0].title),1)])):(a(),o("div",U,"No Details added")),r(c,{to:{name:"RequirementShow",params:{id:t==null?void 0:t.id}},class:"text-blue-600 text-sm hover:underline hover:text-blue-800"},{default:p(()=>{var i,_;return[((i=t==null?void 0:t.details)==null?void 0:i.length)-1>0?(a(),o("span",z,n(((_=t==null?void 0:t.details)==null?void 0:_.length)-1)+" More details ",1)):(a(),o("span",G,"Show Details"))]}),_:2},1032,["to"])])]),s("td",H,[s("div",I,n(new Date(t.submission_date).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})),1)]),s("td",J,[s("div",K,[r(c,{to:{name:"RequirementShow",params:{id:t==null?void 0:t.id}},class:"btn-2",onClick:e[0]||(e[0]=i=>i.stopPropagation())},{default:p(()=>e[5]||(e[5]=[s("i",{class:"fad fa-eye"},null,-1),h(" Show ")])),_:2,__:[5]},1032,["to"]),r(c,{to:{name:"RequirementEdit",params:{id:t==null?void 0:t.id}},class:"btn-4 border border-blue-500 hover:bg-blue-500 hover:text-white",onClick:e[1]||(e[1]=i=>i.stopPropagation())},{default:p(()=>e[6]||(e[6]=[s("i",{class:"fad fa-edit"},null,-1),h(" Edit ")])),_:2,__:[6]},1032,["to"])])])])}),128))])])]))])])}}};export{$ as default};
