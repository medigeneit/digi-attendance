import{u as _}from"./notice-DuOwSPIy.js";import{D as h,h as v,x as n,p as b,c as l,o as a,a as e,t as o,m as i,j as x,F as f,e as w,d as y,l as k,s as N}from"./index-wJKSSQHG.js";const L={class:"relative overflow-hidden px-4 py-6 md:px-6"},C={class:"relative mx-auto max-w-5xl"},S={class:"mb-6 flex flex-col gap-3 md:flex-row md:items-end md:justify-between"},D={class:"flex items-center gap-3"},R={class:"rounded-xl bg-white/80 px-4 py-2 shadow ring-1 ring-slate-200"},U={class:"text-lg font-semibold text-slate-900"},j={class:"rounded-xl bg-slate-900 px-4 py-2 shadow"},B={class:"text-lg font-semibold text-white"},T={key:0,class:"grid gap-3 md:grid-cols-2"},V={key:1,class:"rounded-2xl bg-rose-50 p-4 text-rose-700 ring-1 ring-rose-200"},F={key:2,class:"grid gap-3 md:grid-cols-2"},M={class:"flex items-start justify-between gap-4"},z={class:"text-base font-semibold text-slate-900"},A={class:"text-xs text-slate-500 mt-1"},E={key:0,class:"absolute top-3 right-3"},Y={key:0,class:"md:col-span-2"},I={__name:"NoticeList",setup(q){const d=_(),{notices:r}=h(d);v(()=>{d.fetchUserNotices()});const p=n(()=>d.isLoading),u=n(()=>d.error),m=n(()=>r.value.filter(c=>!c.user_feedback).length);return(c,s)=>{const g=b("RouterLink");return a(),l("section",L,[e("div",C,[e("div",S,[s[2]||(s[2]=e("div",null,[e("p",{class:"text-xs uppercase tracking-[0.3em] text-slate-500 font-semibold"}," Notices "),e("h1",{class:"text-2xl md:text-3xl font-serif font-semibold text-slate-900"}," All company updates "),e("p",{class:"text-sm md:text-base text-slate-600"}," Tap a notice to view details and confirm you have read it. ")],-1)),e("div",D,[e("div",R,[s[0]||(s[0]=e("p",{class:"text-xs uppercase text-slate-500"},"Total",-1)),e("p",U,o(i(r).length),1)]),e("div",j,[s[1]||(s[1]=e("p",{class:"text-xs uppercase text-slate-300"},"Unread",-1)),e("p",B,o(m.value),1)])])]),p.value?(a(),l("div",T,s[3]||(s[3]=[e("div",{class:"h-24 rounded-2xl bg-slate-100 animate-pulse"},null,-1),e("div",{class:"h-24 rounded-2xl bg-slate-100 animate-pulse"},null,-1),e("div",{class:"h-24 rounded-2xl bg-slate-100 animate-pulse"},null,-1),e("div",{class:"h-24 rounded-2xl bg-slate-100 animate-pulse"},null,-1)]))):u.value?(a(),l("div",V,o(u.value),1)):(a(),l("ul",F,[(a(!0),l(f,null,w(i(r),t=>(a(),l("li",{key:t.id},[y(g,{to:{name:"MyNoticeDetails",params:{id:t.id}},class:"group relative block overflow-hidden rounded-2xl bg-white/80 p-4 shadow-lg ring-1 ring-slate-200 transition duration-300 hover:-translate-y-1 hover:shadow-xl"},{default:k(()=>[e("div",M,[e("div",null,[e("h3",z,o(t==null?void 0:t.title),1),e("p",A,o(new Date(t.created_at).toLocaleString("en-US")),1)]),e("span",{class:N([t.user_feedback?"bg-emerald-50 text-emerald-700":"bg-rose-50 text-rose-700","rounded-full px-2.5 py-1 text-xs font-semibold"])},o(t.user_feedback?"Read":"Unread"),3)]),t.user_feedback?x("",!0):(a(),l("div",E,s[4]||(s[4]=[e("span",{class:"relative flex h-2.5 w-2.5"},[e("span",{class:"animate-ping absolute inline-flex h-full w-full rounded-full bg-rose-400 opacity-75"}),e("span",{class:"relative inline-flex rounded-full h-2.5 w-2.5 bg-rose-500"})],-1)])))]),_:2},1032,["to"])]))),128)),i(r).length===0?(a(),l("li",Y,s[5]||(s[5]=[e("div",{class:"rounded-2xl bg-white/80 p-6 text-center ring-1 ring-slate-200"},[e("p",{class:"text-slate-600"},"No notices found. You are all caught up.")],-1)]))):x("",!0)]))])])}}};export{I as default};
