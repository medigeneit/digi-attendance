import{E as $,r as u,G as i}from"./index-M4cneyyJ.js";const B=$("leaveApplication",()=>{const s=u([]),v=u([]),d=u(null),o=u(!1),t=u(null);async function f(r={}){var l,e;o.value=!0,t.value=null;try{const a=await i.get("/leave-applications",{params:r});s.value=a.data.data}catch(a){t.value=((e=(l=a.response)==null?void 0:l.data)==null?void 0:e.message)||"Failed to fetch leave applications"}finally{o.value=!1}}async function y(r){var l,e;o.value=!0,t.value=null;try{const a=await i.post("/leave-applications/store",r);return s.value.push(a.data.data),a.data.data}catch(a){throw t.value=((e=(l=a.response)==null?void 0:l.data)==null?void 0:e.message)||"Failed to store leave application",new Error(t.value)}finally{o.value=!1}}async function h(r,l){var e,a;o.value=!0,t.value=null;try{const n=await i.post(`/leave-applications/${r}/update`,l),c=s.value.findIndex(p=>p.id===r);return c!==-1&&(s.value[c]=n.data.data),n.data.data}catch(n){throw t.value=((a=(e=n.response)==null?void 0:e.data)==null?void 0:a.message)||"Failed to update leave application",new Error(t.value)}finally{o.value=!1}}async function w(r){var l,e;o.value=!0,t.value=null;try{const a=await i.get(`/leave-applications/${r}`);d.value=a.data}catch(a){t.value=((e=(l=a.response)==null?void 0:l.data)==null?void 0:e.message)||"Failed to fetch leave application"}finally{o.value=!1}}async function m(r){var l,e;o.value=!0,t.value=null;try{const a=await i.post(`/leave-applications/${r}/handover-accept`),n=s.value.findIndex(c=>c.id===r);return n!==-1&&(s.value[n]=a.data.data),a.data.data}catch(a){throw t.value=((e=(l=a.response)==null?void 0:l.data)==null?void 0:e.message)||"Failed to accept handover",new Error(t.value)}finally{o.value=!1}}async function g(r){var l,e;o.value=!0,t.value=null;try{const a=await i.post(`/leave-applications/${r}/incharge-accept`),n=s.value.findIndex(c=>c.id===r);return n!==-1&&(s.value[n]=a.data.data),a.data.data}catch(a){throw t.value=((e=(l=a.response)==null?void 0:l.data)==null?void 0:e.message)||"Failed to accept in-charge approval",new Error(t.value)}finally{o.value=!1}}async function x(r){var l,e;o.value=!0,t.value=null;try{const a=await i.post(`/leave-applications/${r}/coordinator-accept`),n=s.value.findIndex(c=>c.id===r);return n!==-1&&(s.value[n]=a.data.data),a.data.data}catch(a){throw t.value=((e=(l=a.response)==null?void 0:l.data)==null?void 0:e.message)||"Failed to accept coordinator approval",new Error(t.value)}finally{o.value=!1}}async function A(r){var l,e;o.value=!0,t.value=null;try{const a=await i.post(`/leave-applications/${r}/operational-admin-accept`),n=s.value.findIndex(c=>c.id===r);return n!==-1&&(s.value[n]=a.data.data),a.data.data}catch(a){throw t.value=((e=(l=a.response)==null?void 0:l.data)==null?void 0:e.message)||"Failed to accept operational admin approval",new Error(t.value)}finally{o.value=!1}}async function E(r){var l,e;o.value=!0,t.value=null;try{const a=await i.post(`/leave-applications/${r}/recommend-by-accept`),n=s.value.findIndex(c=>c.id===r);return n!==-1&&(s.value[n]=a.data.data),a.data.data}catch(a){throw t.value=((e=(l=a.response)==null?void 0:l.data)==null?void 0:e.message)||"Failed to accept recommend by approval",new Error(t.value)}finally{o.value=!1}}async function F(r){var l,e;o.value=!0,t.value=null;try{const a=await i.post(`/leave-applications/${r}/approved-by-accept`),n=s.value.findIndex(c=>c.id===r);return n!==-1&&(s.value[n]=a.data.data),a.data.data}catch(a){throw t.value=((e=(l=a.response)==null?void 0:l.data)==null?void 0:e.message)||"Failed to accept approval by admin",new Error(t.value)}finally{o.value=!1}}async function I(r,l){var e,a;o.value=!0,t.value=null;try{const n=await i.post(`/leave-applications/${r}/reject`,l),c=s.value.findIndex(p=>p.id===r);return c!==-1&&(s.value[c]=n.data.data),n.data.data}catch(n){throw t.value=((a=(e=n.response)==null?void 0:e.data)==null?void 0:a.message)||"Failed to reject leave application",new Error(t.value)}finally{o.value=!1}}return{leaveApplications:s,leaveApplication:d,leaveBalance:v,loading:o,error:t,fetchLeaveApplications:f,storeLeaveApplication:y,updateLeaveApplication:h,fetchLeaveApplicationById:w,acceptHandover:m,acceptInCharge:g,acceptCoordinator:x,acceptOperationalAdmin:A,acceptRecommendBy:E,acceptApprovedBy:F,rejectLeaveApplication:I,fetchLeaveBalance:async(r,l=null)=>{var e,a;o.value=!0,t.value=null;try{const n=l?{year:l}:{},c=await i.get(`/leave-balance/${r}`,{params:n});v.value=c.data.leave_balances}catch(n){t.value=((a=(e=n.response)==null?void 0:e.data)==null?void 0:a.message)||"লিভ ব্যালেন্স লোড করতে ব্যর্থ হয়েছে।",console.error("Error fetching leave balance:",n)}finally{o.value=!1}}}});export{B as u};
