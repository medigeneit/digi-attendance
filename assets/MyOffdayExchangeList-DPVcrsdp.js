import{L as C}from"./LoaderView-CJm3gQL4.js";import{_ as D}from"./FlexibleDatePicker-CdH6pYR3.js";import{u as g,g as L,r as N,x as n,q as V,p as B,c as r,o as a,a as t,d as i,l as v,b as p,m as j,t as l,F as O,e as R,s as q,j as M}from"./index-d_b_t5IA.js";import{u as $}from"./exchange-C9JA_ZQv.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const F={class:"space-y-6 px-4 py-5"},z={class:"rounded-2xl border border-slate-200 bg-white px-4 py-4 shadow-sm md:px-6"},P={class:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between"},T={class:"flex flex-wrap items-center gap-2"},U={key:0,class:"text-center py-10"},G={key:1,class:"space-y-4"},H={key:0,class:"rounded-2xl border border-dashed border-slate-300 bg-slate-50 p-6 text-center text-slate-600"},W={key:1,class:"rounded-2xl border border-slate-200 bg-white shadow-sm"},Y={class:"flex items-center justify-between border-b border-slate-100 px-5 py-3"},I={class:"text-sm font-semibold text-slate-600"},J={class:"overflow-x-auto"},K={class:"min-w-full divide-y divide-slate-100 text-sm"},Q={class:"divide-y divide-slate-100"},X={class:"px-4 py-3 font-semibold text-slate-600"},Z={class:"px-4 py-3 text-slate-700"},tt={class:"px-4 py-3 text-slate-700"},et={class:"px-4 py-3 text-slate-700"},st={class:"px-4 py-3"},ot={key:0,class:"flex items-center gap-1 text-xs font-semibold text-indigo-600"},rt={key:1,class:"text-xs text-slate-400"},at={class:"px-4 py-3"},lt={class:"px-4 py-3"},dt={class:"flex items-center justify-end gap-2"},nt=["onClick"],it="offday",bt={__name:"MyOffdayExchangeList",setup(pt){const w=g(),u=$();L();const c=new Date,f=N({year:c.getFullYear(),month:c.getMonth()+1,day:c.getDate()}),h=o=>o.toString().padStart(2,"0"),b=n(()=>{const o=f.value||{};return!o.year||!o.month?"":`${o.year}-${h(o.month)}`}),k=o=>{u.fetchExchanges({payload:{type:it,date:o}})};V(b,o=>{o&&k(o)},{immediate:!0});const m=o=>o?new Date(o).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):"N/A",y=n(()=>u.exchanges||[]),_=n(()=>Array.isArray(y.value)?y.value.length:0);n(()=>{const o=b.value,[s,d]=(o||"").split("-");return!s||!d?"Month":new Date(Number(s),Number(d)-1).toLocaleString("en-US",{month:"long",year:"numeric"})});const E=o=>{const s=(o||"").toLowerCase();return["approved","accepted"].includes(s)?"border border-emerald-200 bg-emerald-50 text-emerald-700":["rejected","declined","cancelled"].includes(s)?"border border-red-200 bg-red-50 text-red-700":s==="pending"||!s?"border border-amber-200 bg-amber-50 text-amber-800":"border border-slate-200 bg-slate-50 text-slate-800"},S=()=>{w.go(-1)};return(o,s)=>{var x;const d=B("RouterLink");return a(),r("div",F,[t("div",z,[t("div",P,[t("div",null,[t("button",{class:"btn-3",onClick:S},s[1]||(s[1]=[t("i",{class:"far fa-arrow-left"},null,-1),t("span",{class:"hidden md:inline-flex"},"Back",-1)]))]),s[3]||(s[3]=t("div",{class:"space-y-1"},[t("p",{class:"text-2xl font-semibold text-slate-900"},"Offday Exchanges Records")],-1)),t("div",T,[i(d,{to:{name:"OffdayExchangeAdd"},class:"btn-2"},{default:v(()=>s[2]||(s[2]=[t("i",{class:"far fa-plus mr-1"},null,-1),p(" Request Offday Exchange ")])),_:1,__:[2]}),i(D,{modelValue:f.value,"onUpdate:modelValue":s[0]||(s[0]=e=>f.value=e),"show-year":!1,"show-month":!0,"show-date":!1},null,8,["modelValue"])])])]),(x=j(u))!=null&&x.loading?(a(),r("div",U,[i(C)])):(a(),r("div",G,[_.value===0?(a(),r("div",H,s[4]||(s[4]=[t("p",{class:"text-lg font-semibold text-slate-800"},"No exchanges yet",-1),t("p",{class:"text-sm text-slate-500"},"Try a different month or create a new request",-1)]))):(a(),r("div",W,[t("div",Y,[t("p",I,"Showing "+l(_.value)+" requests",1),s[5]||(s[5]=t("span",{class:"text-xs text-slate-500"},"Auto-updated",-1))]),t("div",J,[t("table",K,[s[9]||(s[9]=t("thead",{class:"bg-slate-50 text-[11px] uppercase tracking-wider text-slate-500"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left"},"#"),t("th",{class:"px-4 py-3 text-left"},"Created Date"),t("th",{class:"px-4 py-3 text-left"},"Holiday / Weekend"),t("th",{class:"px-4 py-3 text-left"},"Exchange Date"),t("th",{class:"px-4 py-3 text-left"},"Attachment"),t("th",{class:"px-4 py-3 text-left"},"Status"),t("th",{class:"px-4 py-3 text-right"},"Actions")])],-1)),t("tbody",Q,[(a(!0),r(O,null,R(y.value,(e,A)=>(a(),r("tr",{key:e==null?void 0:e.id,class:"hover:bg-slate-50 transition"},[t("td",X,l(A+1),1),t("td",Z,l(m(e==null?void 0:e.created_at)),1),t("td",tt,l(m(e==null?void 0:e.current_date)),1),t("td",et,l(m(e==null?void 0:e.exchange_date)),1),t("td",st,[e!=null&&e.attachment?(a(),r("div",ot,s[6]||(s[6]=[t("i",{class:"far fa-paperclip"},null,-1),p(" Attached ")]))):(a(),r("span",rt,"None"))]),t("td",at,[t("span",{class:q(["inline-flex items-center rounded-full px-3 py-1 text-[11px] font-semibold tracking-wide",E(e==null?void 0:e.status)])},l((e==null?void 0:e.status)||"Pending"),3)]),t("td",lt,[t("div",dt,[i(d,{to:{name:"ExchangeOffdayShow",params:{id:e==null?void 0:e.id}},class:"inline-flex items-center rounded-full border border-slate-200 px-3 py-1.5 text-xs font-semibold text-slate-600 transition hover:border-indigo-200 hover:text-indigo-700"},{default:v(()=>s[7]||(s[7]=[t("i",{class:"far fa-eye mr-1"},null,-1),p(" View ")])),_:2,__:[7]},1032,["to"]),e.status=="Pending"||!e.status?(a(),r("button",{key:0,type:"button",onClick:ut=>o.deleteApplication(e==null?void 0:e.id),class:"inline-flex items-center rounded-full border border-red-200 px-3 py-1.5 text-xs font-semibold text-red-600 transition hover:border-red-300 hover:text-red-700"},s[8]||(s[8]=[t("i",{class:"far fa-trash mr-1"},null,-1),p(" Delete ")]),8,nt)):M("",!0)])])]))),128))])])])]))]))])}}};export{bt as default};
