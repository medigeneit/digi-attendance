import{r as $,x as l,c as p,o as m,a as s,t as y,k as J,j as P,H as E,F as H,e as U}from"./index-DnDMxoVy.js";const q={class:"flex flex-col gap-1 relative"},z={for:"",class:"top-label -top-1 text-[11px] font-semibold tracking-wide"},G={class:"flex flex-wrap items-center gap-2"},K=["disabled"],Q=["value"],T={key:1,class:"relative"},W=["disabled"],X=["value"],Z={key:2,class:"relative"},ee=["disabled"],te=["value"],ne={__name:"FlexibleDatePicker",props:{modelValue:{type:Object,default:()=>({year:null,month:null,day:null})},yearOptions:{type:Array,default:()=>[]},label:{type:String,default:"Period"},disabled:{type:Boolean,default:!1},showSummary:{type:Boolean,default:!0},showYear:{type:Boolean,default:!0},showMonth:{type:Boolean,default:!0},showDate:{type:Boolean,default:!0}},emits:["update:modelValue","change"],setup(r,{emit:O}){const o=r,V=O,f=$(null),h=$(null),M=new Date,i=M.getFullYear(),v=M.getMonth()+1,w=M.getDate();function x(e,t){return new Date(e,t,0).getDate()}const u=l({get(){var e;return((e=o.modelValue)==null?void 0:e.year)||i},set(e){const t=Number(e)||i,a=b.value,n=Math.min(c.value,x(t,a));g({year:t,month:a,day:n})}}),b=l({get(){var e;return((e=o.modelValue)==null?void 0:e.month)||v},set(e){const t=Number(e)||v,a=u.value,n=Math.min(c.value,x(a,t));g({year:a,month:t,day:n})}}),c=l({get(){var e;return((e=o.modelValue)==null?void 0:e.day)||w},set(e){const t=Number(e)||w,a=u.value,n=b.value,d=x(a,n);g({year:a,month:n,day:Math.min(t,d)})}}),Y=l(()=>{if(o.yearOptions&&o.yearOptions.length)return o.yearOptions;const e=i,t=[];for(let a=e-3;a<=e+1;a++)t.push(a);return t}),_=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],D=l(()=>{const e=Number(b.value)-1;return e<0||e>11?"Month":_[e]}),j=l(()=>{const e=c.value;return e?String(e).padStart(2,"0"):"Day"}),C=l(()=>{const e=u.value,t=String(b.value).padStart(2,"0");return`${e}-${t}`}),F=l(()=>{const e=u.value,t=String(b.value).padStart(2,"0"),a=String(c.value).padStart(2,"0");return`${e}-${t}-${a}`});l(()=>{const e=u.value,t=D.value,a=c.value,n=[];return o.showDate&&n.push(String(a).padStart(2,"0")),o.showMonth&&n.push(t),o.showYear&&n.push(String(e)),n.length?n.join(" "):`${String(a).padStart(2,"0")} ${t} ${e}`});function I(){!o.showMonth||!f.value||o.disabled||(typeof f.value.showPicker=="function"?f.value.showPicker():f.value.click())}function L(){!o.showDate||!h.value||o.disabled||(typeof h.value.showPicker=="function"?h.value.showPicker():h.value.click())}function R(e){var S;const t=((S=e==null?void 0:e.target)==null?void 0:S.value)||"";if(!t)return;const[a,n]=t.split("-"),d=Number(a)||i,k=Number(n)||v,N=Math.min(c.value,x(d,k));g({year:d,month:k,day:N})}function A(e){var B;const t=((B=e==null?void 0:e.target)==null?void 0:B.value)||"";if(!t)return;const[a,n,d]=t.split("-"),k=Number(a)||i,N=Number(n)||v,S=Number(d)||w;g({year:k,month:N,day:S})}function g(e){const t={year:e.year||i,month:e.month||v,day:e.day||w};V("update:modelValue",t),V("change",t)}return(e,t)=>(m(),p("div",q,[s("label",z,y(r.label),1),s("div",G,[r.showYear?J((m(),p("select",{key:0,"onUpdate:modelValue":t[0]||(t[0]=a=>u.value=a),disabled:r.disabled,class:"input-1 py-1.5 px-3 rounded text-xs font-semibold uppercase tracking-wide text-slate-500 border-slate-200 bg-slate-50 disabled:opacity-50"},[(m(!0),p(H,null,U(Y.value,a=>(m(),p("option",{key:a,value:a},y(a),9,Q))),128))],8,K)),[[E,u.value]]):P("",!0),r.showMonth?(m(),p("div",T,[s("button",{type:"button",onClick:I,disabled:r.disabled,class:"input-1 flex items-center justify-between gap-2 px-3 py-2 rounded text-xs font-semibold uppercase tracking-wide text-slate-500 border-slate-200 bg-white shadow-sm disabled:opacity-50"},[t[1]||(t[1]=s("i",{class:"far fa-calendar-alt text-slate-400"},null,-1)),s("span",null,y(D.value)+" - "+y(u.value),1),t[2]||(t[2]=s("i",{class:"far fa-chevron-down text-[10px] text-slate-400"},null,-1))],8,W),s("input",{ref_key:"monthPickerRef",ref:f,type:"month",class:"pointer-events-none absolute inset-0 opacity-0",value:C.value,onChange:R},null,40,X)])):P("",!0),r.showDate?(m(),p("div",Z,[s("button",{type:"button",onClick:L,disabled:r.disabled,class:"input-1 flex items-center justify-between gap-2 px-5 py-2 rounded text-xs font-semibold uppercase tracking-wide text-slate-500 border-slate-200 bg-white shadow-sm disabled:opacity-50"},[t[3]||(t[3]=s("i",{class:"far fa-calendar text-slate-400"},null,-1)),s("span",null,y(j.value)+" - "+y(D.value),1),t[4]||(t[4]=s("i",{class:"far fa-chevron-down text-[10px] text-slate-400"},null,-1))],8,ee),s("input",{ref_key:"datePickerRef",ref:h,type:"date",class:"pointer-events-none absolute inset-0 opacity-0",value:F.value,onChange:A},null,40,te)])):P("",!0)])]))}};export{ne as _};
