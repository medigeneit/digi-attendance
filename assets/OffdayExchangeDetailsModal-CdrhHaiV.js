import{d as ne,N as se,r as Q,x as ie,A as oe,f as X,o,c as r,g as _,a as e,n as d,t as n,j as s,q as de,k as re,i as ce,a1 as ue,a6 as pe}from"./index-R3BEEySt.js";import{_ as f}from"./ApprovalItem-BrWSm8Hi.js";import{L as me}from"./LoaderView-BHj4_Wwy.js";import{_ as fe}from"./ScreenshotCapture-77uVF2l9.js";import{_ as ve}from"./ShareComponent-CSezpy_H.js";import{u as ye}from"./exchange-BCMq3Xbs.js";import{_ as ge}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./AcceptAndRejectHandler-BfqCm6gv.js";const xe={key:0,class:"fixed inset-0 z-[999] flex items-center justify-center bg-black/50","aria-modal":"true",role:"dialog","aria-labelledby":"offday-exchange-title"},he={class:"relative w-full max-w-4xl rounded-lg bg-white max-h-[90vh] overflow-y-auto print:overflow-visible print:shadow-none print:max-h-none"},_e={key:1,class:"card-bg p-4 md:p-8 text-sm md:text-base",id:"leave-application"},be={class:"flex justify-end"},we={class:"font-medium"},ke={class:"gap-y-1"},Ae={class:"gap-y-1"},De={class:"grid md:grid-cols-2 pt-3"},Ne={class:"col-span-2 pt-2"},je={class:"grid md:grid-cols-3 gap-x-4 py-1 md:justify-between items-end md:items-start"},Fe={class:"md:col-span-2 print:col-span-2"},Ce={class:"text-center"},Ee={class:"title-md"},Se={key:0},Be={class:"grid grid-cols-2 text-sm md:text-base md:grid-cols-3 md:gap-x-4 gap-y-14 pt-14 items-end"},Re={class:"space-y-2 print:hidden"},Ve={key:0,class:"mb-2"},Le=["href"],Oe={key:1,class:"text-center text-lg italic text-gray-400"},ze={key:2},Ie={__name:"OffdayExchangeDetailsModal",props:{open:{type:Boolean,default:!1},id:{type:[String,Number],required:!0}},emits:["update:open"],setup(b,{emit:Y}){const c=b,Z=Y,ee=ne(),v=ye(),y=se(),x=Q(!1),w=Q(null),a=ie(()=>v.exchange),g=()=>Z("update:open",!1),h=async()=>{if(c.id){x.value=!0;try{await v.fetchExchange(c.id)}catch(l){console.error("Failed to fetch exchange details:",l),y.error("Failed to load offday exchange.")}finally{x.value=!1}}};oe(()=>[c.open,c.id],async([l])=>{l&&await h()},{immediate:!0});const te=async l=>{var m;const t=(m=l.target.files)==null?void 0:m[0];if(!t)return;const p=new FormData;p.append("file",t);const i=await v.fetchFileUpload(p);w.value=(i==null?void 0:i.url)||null,i!=null&&i.url?(await ae(),y.success("File uploaded successfully")):y.error("Failed to upload file")},ae=async()=>{try{const l={attachment:w.value};await v.uploadAttachmentExchange(c.id,l),await h()}catch(l){console.error("Failed to upload attachment:",l),y.error("Failed to upload attachment.")}},le=l=>l?new Date(l).toISOString().slice(0,10):"N/A",k=l=>l?new Date(l).toLocaleDateString("en-US",{weekday:"long"}):"N/A",u=async()=>{await h()};return(l,t)=>{var p,i,m,A,D,N,j,F,C,E,S,B,R,V,L,O,z,I,T,U,$,q,H,K,M,P,W,G,J;return o(),X(pe,{to:"body"},[b.open?(o(),r("div",xe,[e("div",{class:"relative max-h-[90vh] w-full max-w-4xl overflow-y-auto bg-white p-4 print:static print:overflow-visible",onClick:g}),e("div",{class:"fixed inset-0 flex items-center justify-center",onKeydown:ue(g,["esc"])},[e("div",he,[e("div",{class:"sticky top-0 z-10 flex items-center justify-between gap-2 border-b bg-white px-4 py-3 print:hidden"},[e("button",{class:"btn-3",onClick:g},t[0]||(t[0]=[e("i",{class:"far fa-arrow-left"},null,-1),e("span",{class:"hidden md:flex"},"Back",-1)])),t[2]||(t[2]=e("h1",{id:"offday-exchange-title",class:"title-lg text-center"},"Offday Exchange Application",-1)),e("div",null,[e("button",{class:"btn-3",onClick:g},t[1]||(t[1]=[e("i",{class:"far fa-times"},null,-1),e("span",{class:"hidden md:inline"},"Close",-1)]))])]),e("div",null,[x.value?(o(),X(me,{key:0})):(o(),r("div",_e,[e("div",be,[e("div",null,"Date: "+n(le((p=a.value)==null?void 0:p.created_at)),1)]),e("div",null,[e("p",we,[t[3]||(t[3]=s(" Name: ")),e("b",null,n((m=(i=a.value)==null?void 0:i.user)==null?void 0:m.name),1)]),e("div",ke,[e("p",null,[t[4]||(t[4]=s("Designation: ")),e("b",null,n((N=(D=(A=a.value)==null?void 0:A.user)==null?void 0:D.designation)==null?void 0:N.title),1)])]),e("div",Ae,[e("p",null,[t[5]||(t[5]=s("Department: ")),e("b",null,n((C=(F=(j=a.value)==null?void 0:j.user)==null?void 0:F.company)==null?void 0:C.name),1)])])]),e("div",De,[e("div",null,[t[6]||(t[6]=e("b",null,"Holiday Day:",-1)),s(" "+n(k((E=a.value)==null?void 0:E.current_date)),1)]),e("div",null,[t[7]||(t[7]=e("b",null,"Date:",-1)),s(" "+n((S=a.value)==null?void 0:S.current_date),1)]),e("div",null,[t[8]||(t[8]=e("b",null,"Exchange Day:",-1)),s(" "+n(k((B=a.value)==null?void 0:B.exchange_date)),1)]),e("div",null,[t[9]||(t[9]=e("b",null,"Exchange Date:",-1)),s(" "+n((R=a.value)==null?void 0:R.exchange_date),1)]),e("div",Ne,[t[10]||(t[10]=e("b",null,"Reason:",-1)),s(" "+n(((V=a.value)==null?void 0:V.reason)||"N/A"),1)])]),e("div",je,[e("div",Fe,[e("div",null,[t[11]||(t[11]=e("b",null,"Works in Hand:",-1)),s(" "+n(((L=a.value)==null?void 0:L.works_in_hand)||"N/A"),1)])]),d(f,{application:a.value,type:"offday_exchange_applications",item:"handover",onAction:u,class:"pt-10 ml-auto hidden md:block"},null,8,["application"])]),t[17]||(t[17]=e("hr",{class:"my-2"},null,-1)),e("div",Ce,[e("h3",Ee,[t[12]||(t[12]=s(" Approvals ")),e("span",{class:de({"text-yellow-500":((O=a.value)==null?void 0:O.status)==="Pending","text-green-500":((z=a.value)==null?void 0:z.status)==="Approved","text-red-500":((I=a.value)==null?void 0:I.status)==="Rejected"})}," ("+n(((T=a.value)==null?void 0:T.status)||"N/A")+") ",3)]),((U=a.value)==null?void 0:U.status)==="Rejected"?(o(),r("div",Se,[e("div",null,[t[13]||(t[13]=e("b",null,"Rejected By:",-1)),s(" "+n(((q=($=a.value)==null?void 0:$.rejected_by_user)==null?void 0:q.name)||"N/A"),1)]),e("div",null,[t[14]||(t[14]=e("b",null,"Rejection Reason:",-1)),s(" "+n(((H=a.value)==null?void 0:H.rejection_reason)||"N/A"),1)])])):_("",!0)]),e("div",Be,[d(f,{application:a.value,type:"offday_exchange_applications",item:"handover",onAction:u,class:"md:hidden"},null,8,["application"]),d(f,{application:a.value,type:"offday_exchange_applications",item:"in_charge",onAction:u},null,8,["application"]),d(f,{application:a.value,type:"offday_exchange_applications",item:"recommend_by",onAction:u},null,8,["application"]),d(f,{application:a.value,type:"offday_exchange_applications",item:"approved_by",onAction:u},null,8,["application"])]),e("div",Re,[t[16]||(t[16]=e("label",{class:"font-medium"},"Attachment",-1)),(K=a.value)!=null&&K.attachment&&typeof((M=a.value)==null?void 0:M.attachment)=="string"?(o(),r("div",Ve,[e("a",{href:(P=a.value)==null?void 0:P.attachment,target:"_blank",class:"text-blue-500 underline"}," View Current File ",8,Le)])):(o(),r("div",Oe,"No attachment")),((G=(W=re(ee))==null?void 0:W.user)==null?void 0:G.id)===((J=a.value)==null?void 0:J.user_id)?(o(),r("div",ze,[e("input",{type:"file",onChange:te,class:"w-full p-2 border rounded"},null,32),t[15]||(t[15]=e("p",{class:"text-sm text-gray-600 mt-1"},"Selected File",-1))])):_("",!0)]),d(ve,{class:"print:hidden"},{default:ce(()=>[d(fe,{targetId:"leave-application",platform:"whatsapp"})]),_:1})]))])])],32)])):_("",!0)])}}},We=ge(Ie,[["__scopeId","data-v-f909f63d"]]);export{We as default};
