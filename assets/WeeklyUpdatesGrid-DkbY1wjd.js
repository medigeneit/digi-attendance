import{B as Ee,r as $,E as Fe,x as C,C as be,D as Oe,f as Ae,u as We,h as Pe,y as Be,c as r,o as d,k as S,a as s,s as W,t as p,d as Ke,b as Q,l as G,v as J,n as g,i as Ve,O as se,F as E,e as X,A as He}from"./index-DsqJrs7X.js";import{_ as Ye}from"./EmployeeFilter-Dw0oXMew.js";import"./company-UgEPf-b8.js";import"./department-BPPzhB1X.js";import"./EmployeeDropdownInput-BW-poJuu.js";import"./SelectDropdown-BvlVTBJi.js";import"./UserChip-26yKiOlx.js";import"./user-DLYeyBNt.js";const Qe=Ee("weeklyUpdates",()=>{const P=$(!1),M=$(null),B=$(null),F=$([]),j=$([]),L=Fe({anchor_date:"",past_days:5,future_days:5,window:null,start_date:"",end_date:"",company_id:"",department_id:"",line_type:"",user_id:"",status:""});let m=null,o=0;const x=f=>{const b={};return Object.entries(f||{}).forEach(([w,_])=>{_==null||_===""||_!=="all"&&(b[w]=_)}),b},T=async(f={})=>{var w,_,I,k,V;const b=++o;P.value=!0,M.value=null,Object.assign(L,f),m&&m.abort(),m=new AbortController;try{const u=await be.get("/weekly-updates",{params:x(L),signal:m.signal});return b!==o?void 0:(B.value=((w=u.data)==null?void 0:w.meta)??null,F.value=((_=u.data)==null?void 0:_.dates)??[],j.value=((I=u.data)==null?void 0:I.rows)??[],u.data)}catch(u){if((u==null?void 0:u.name)==="CanceledError"||(u==null?void 0:u.code)==="ERR_CANCELED"||b!==o)return;throw M.value=((V=(k=u==null?void 0:u.response)==null?void 0:k.data)==null?void 0:V.message)||(u==null?void 0:u.message)||"Failed to load weekly updates.",u}finally{b===o&&(P.value=!1)}},n=async f=>{const{kind:b,ref_id:w,status:_,message:I}=f||{};if(!b||!w)throw new Error("Invalid item");const k={kind:b,ref_id:w};return _!=null&&_!==""&&(k.status=_),I&&(k.message=I),await be.post("/weekly-updates/send-message",k)},R=()=>T({window:"prev"}),U=()=>T({window:"next"}),K=(f,b)=>T({past_days:f,future_days:b,window:null}),q=(f={})=>T(f),z=C(()=>F.value),O=C(()=>j.value),i=C(()=>B.value);return{loading:P,error:M,params:L,dates:z,rows:O,meta:i,fetchWeekly:T,prevWeek:R,nextWeek:U,applyRange:K,setFilters:q,sendWeeklyMessage:n}}),Ge={class:"space-y-3 px-4"},Je={class:"rounded-2xl border border-slate-200 bg-white/95 backdrop-blur p-3 shadow-sm"},Xe={class:"rounded-2xl border border-slate-200 bg-white/95 backdrop-blur p-3 shadow-sm"},Ze={class:"flex flex-col gap-3 lg:flex-row lg:items-center lg:justify-between"},et={class:"flex flex-wrap items-center gap-2"},tt={class:"rounded-xl border border-slate-200 bg-slate-50/70 px-2 py-1"},st={class:"flex items-center gap-2"},nt={class:"flex items-center gap-2 text-xs font-semibold text-slate-600"},at={class:"flex items-center gap-2 text-xs font-semibold text-slate-600"},lt={class:"flex items-center gap-2 text-xs font-semibold text-slate-600"},ot={class:"flex items-center justify-between gap-3 text-xs text-slate-500 lg:justify-end"},rt={class:"text-right bg-gray-100 rounded-full px-2 py-1"},dt={key:0,class:"font-semibold text-slate-800"},it={class:"flex justify-center items-center gap-3"},ut={class:"text-[11px] text-slate-400 bg-gray-100 rounded-full px-2 py-1"},ct={class:"font-semibold text-slate-600"},pt={key:1,class:"rounded-xl border border-rose-200 bg-rose-50 px-3 py-2 text-sm text-rose-700"},yt={key:2,class:"rounded-2xl border border-slate-200 bg-white px-4 py-3 text-sm text-slate-500"},ft={key:3,class:"rounded-2xl border border-slate-200 bg-white shadow-sm"},xt={class:"min-w-max w-full text-sm"},bt={class:"text-slate-600"},_t={class:"text-[11px] font-semibold text-slate-400"},gt={class:"text-xs font-semibold text-slate-800"},vt={key:0,class:"mt-1 text-[10px] font-semibold text-amber-700"},mt={class:"sticky left-0 z-20 w-10 border-r border-slate-200 bg-white p-2 text-xs font-semibold text-slate-600"},ht={class:"sticky left-12 z-20 border-r border-slate-200 bg-white p-2"},wt={class:"min-w-0"},kt=["href","title"],St={class:"truncate group-hover:underline decoration-slate-400 underline-offset-4"},Ct={class:"mt-0.5 text-[11px] text-slate-500"},$t={key:0,class:"flex flex-wrap items-center justify-center gap-1"},Dt=["title"],Mt=["title","onClick"],jt={key:1,class:"text-slate-300 text-sm"},Tt={class:"px-2"},qt={class:"flex justify-end"},It=["disabled","onClick"],Lt={key:0},Rt={key:1},Ut={key:0,class:"font-bold"},zt={key:0,class:"border-t border-slate-100"},Nt=["colspan"],Et={key:4,class:"fixed inset-0 z-[75] flex items-center justify-center bg-slate-900/50 p-4"},Ft={class:"w-full max-w-lg rounded-2xl bg-white p-4 shadow-xl"},Ot={class:"flex items-start justify-between gap-3"},At={class:"text-xs text-slate-500"},Wt={class:"mt-4"},Pt={class:"mt-1 flex items-center justify-between text-[11px] text-slate-400"},Bt={class:"mt-4 flex items-center justify-end gap-2"},Kt=["disabled"],Vt={key:0},Ht={key:1},Yt={key:5,class:"fixed inset-0 z-[70] flex items-center justify-center bg-slate-900/50 p-4"},Qt={class:"w-full max-w-sm rounded-2xl bg-white p-4 shadow-xl"},Gt={class:"flex items-start justify-between gap-3"},Jt={class:"flex items-center gap-2"},Xt=["href"],Zt={class:"mt-4 space-y-2 text-sm text-slate-700"},es={class:"flex items-center justify-between"},ts={class:"font-semibold"},ss={class:"flex items-center justify-between"},ns={class:"font-semibold"},as={class:"flex items-center justify-between"},ls={class:"font-semibold"},os={class:"flex items-center justify-between"},rs={class:"font-semibold"},ds={class:"flex items-center justify-between"},is={class:"font-semibold"},us={class:"mt-4 flex items-center justify-end gap-2"},ms={__name:"WeeklyUpdatesGrid",setup(P){const M=Qe(),{loading:B,error:F,dates:j,rows:L,meta:m,params:o}=Oe(M),x=Ae(),T=We(),n=$({detailsOpen:!1,selectedItem:null,smsOpen:!1,smsMessage:"",smsTarget:null,busyKey:null,toast:null}),R=$(null),U=$(null),K=$(0);let q=null;const z=async()=>{var c,y;await He();const e=((c=R.value)==null?void 0:c.offsetHeight)||0,t=((y=U.value)==null?void 0:y.offsetHeight)||0,a=12;K.value=e+t+a},O=C(()=>({top:`${K.value}px`})),i=$({company_id:x.query.company_id||"",department_id:x.query.department_id||"all",line_type:x.query.line_type||"all",employee_id:x.query.employee_id||x.query.user_id||""}),f=(e,t,a)=>Math.min(Math.max(Number(e)||0,t),a),b=(e,t)=>{const a=Number(e);return Number.isFinite(a)?f(a,0,60):t};x.query.anchor_date&&(o.value.anchor_date=String(x.query.anchor_date)),x.query.past_days!=null&&(o.value.past_days=b(x.query.past_days,o.value.past_days)),x.query.future_days!=null&&(o.value.future_days=b(x.query.future_days,o.value.future_days));const w=e=>{if(e){const[t,a,c]=String(e).split("-").map(Number);if(t&&a&&c)return new Date(t,a-1,c)}return new Date},_=(e,t)=>{const a=new Date(e);return a.setDate(a.getDate()+t),a},I=e=>{const t=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),c=String(e.getDate()).padStart(2,"0");return`${t}-${a}-${c}`},k=e=>{if(!e)return"";const t=new Date(`${e}T00:00:00`);return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric"}).format(t)},V=e=>{if(!e)return"";const t=new Date(`${e}T00:00:00`);return new Intl.DateTimeFormat("en-US",{weekday:"short"}).format(t)},u=(e,t)=>{var a;return((a=e==null?void 0:e.days)==null?void 0:a[t])??[]},_e=e=>{const t=String((e==null?void 0:e.status)??"").toLowerCase();return t.includes("pending")?"bg-amber-50 text-amber-700 ring-amber-200":t.includes("approved")?"bg-emerald-50 text-emerald-700 ring-emerald-200":t.includes("rejected")?"bg-rose-50 text-rose-700 ring-rose-200":"bg-slate-50 text-slate-700 ring-slate-200"},ge=e=>{const t=String((e==null?void 0:e.kind)||"").toLowerCase();return t==="weekend"||t==="holiday"||t==="present"||t==="absent"},H=e=>{if(String((e==null?void 0:e.label)||"").toUpperCase()==="WPL")return"WPL";const a=String((e==null?void 0:e.kind)||"").toLowerCase();return a==="weekend"?"W":a==="holiday"?"HD":a==="present"?"P":(e==null?void 0:e.code)||""},ve=e=>{const t=String((e==null?void 0:e.kind)||"").toLowerCase();return t==="weekend"?"text-slate-700 ring-slate-200":t==="holiday"?"text-sky-700 ring-sky-200":t==="present"||t==="absent"?"text-emerald-800 ring-emerald-200":_e(e)},ne=e=>{const t=[],a=(e==null?void 0:e.label)||(e==null?void 0:e.kind)||H(e);return a&&t.push(a),e!=null&&e.status&&t.push(e.status),e!=null&&e.ref_id&&t.push(`#${e.ref_id}`),t.join(" - ")},me=e=>String((e==null?void 0:e.kind)||"").toLowerCase()==="exchange",he=C(()=>{var t;const e=(t=n.value.toast)==null?void 0:t.type;return e==="success"?"border-emerald-200 bg-emerald-50 text-emerald-800":e==="error"?"border-rose-200 bg-rose-50 text-rose-800":"border-slate-200 bg-slate-50 text-slate-800"});function N(e,t){n.value.toast={type:e,text:t},window.clearTimeout(N._t),N._t=window.setTimeout(()=>n.value.toast=null,2500)}const we=C(()=>{var t;return!!String(n.value.smsMessage||"").trim()&&!!((t=n.value.smsTarget)!=null&&t.item)&&!n.value.busyKey}),ke=e=>{const t=String((e==null?void 0:e.kind)||"").toLowerCase();return t==="leave"||t==="exchange"||t==="offday"},Se=e=>!(e!=null&&e.kind)||!(e!=null&&e.ref_id)?!1:ke(e),ae=e=>{const t=j.value||[];for(let a=t.length-1;a>=0;a--){const c=t[a],y=u(e,c);if(y!=null&&y.length)for(let v=y.length-1;v>=0;v--){const D=y[v];if(Se(D))return D}}return null},Ce=e=>{const t=ae(e);if(!t)return N("info","No application found in this range.");n.value.smsTarget={item:t,user:(e==null?void 0:e.user)||null},n.value.smsMessage="",n.value.smsOpen=!0},Z=()=>{n.value.smsOpen=!1,n.value.smsMessage="",n.value.smsTarget=null},$e=async(e,t="")=>{var c,y;if(!(e!=null&&e.kind)||!(e!=null&&e.ref_id))return!1;const a=`${e.kind}:${e.ref_id}`;n.value.busyKey=a;try{return await M.sendWeeklyMessage({kind:String(e.kind).toLowerCase(),ref_id:e.ref_id,status:e.status,message:t}),N("success",`SMS sent (${e.code||e.kind} #${e.ref_id})`),!0}catch(v){return N("error",((y=(c=v==null?void 0:v.response)==null?void 0:c.data)==null?void 0:y.message)||"Failed to send SMS."),!1}finally{n.value.busyKey=null}},De=async()=>{var c;const e=(c=n.value.smsTarget)==null?void 0:c.item,t=String(n.value.smsMessage||"").trim();if(!e)return;if(!t)return N("error","Please write a message before sending.");await $e(e,t)&&Z()},le=C(()=>{var e,t;return!((e=m.value)!=null&&e.start_date)||!((t=m.value)!=null&&t.end_date)?"":`${k(m.value.start_date)} - ${k(m.value.end_date)}`}),Me=C(()=>{var t;const e=o.value.anchor_date||((t=m.value)==null?void 0:t.anchor_date);return e?w(e):new Date}),ee=C(()=>{const e=Me.value,t=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0");return`${t}-${a}`}),je=e=>e?`/hrd/em-attendance?${new URLSearchParams({department_id:String(e.department_id??i.value.department_id??""),line_type:String(i.value.line_type??""),date:String(ee.value),company_id:String(e.company_id??i.value.company_id??""),employee_id:String(e.id??"")}).toString()}`:"#",oe=e=>{if(!(e!=null&&e.kind)||!(e!=null&&e.ref_id))return null;const t=String(e.kind).toLowerCase();return t==="leave"?`/leave-application-show/${e.ref_id}`:t==="exchange"?`/exchange-offday-show/${e.ref_id}`:null},Te=C(()=>{const e=new Date,t=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),c=String(e.getDate()).padStart(2,"0");return`${t}-${a}-${c}`}),te=e=>String(e)===String(Te.value),qe=e=>te(e)?"bg-amber-50":"bg-slate-50",Ie=e=>te(e)?"bg-amber-50":"",Le=()=>{T.replace({query:{...x.query,company_id:i.value.company_id||void 0,department_id:i.value.department_id&&i.value.department_id!=="all"?i.value.department_id:void 0,line_type:i.value.line_type&&i.value.line_type!=="all"?i.value.line_type:void 0,employee_id:i.value.employee_id||void 0,anchor_date:o.value.anchor_date||void 0,past_days:o.value.past_days!=null?String(o.value.past_days):void 0,future_days:o.value.future_days!=null?String(o.value.future_days):void 0}}).catch(()=>{})},Y=()=>{M.fetchWeekly({company_id:i.value.company_id||"",department_id:i.value.department_id||"all",line_type:i.value.line_type||"all",user_id:i.value.employee_id||"",anchor_date:o.value.anchor_date,past_days:o.value.past_days,future_days:o.value.future_days,window:null}),Le()},Re=()=>{o.value.past_days=f(o.value.past_days,0,60),o.value.future_days=f(o.value.future_days,0,60),Y()},Ue=()=>Y(),re=e=>{var D;const t=f(o.value.past_days,0,60),a=f(o.value.future_days,0,60),c=t+a+1,y=w(o.value.anchor_date||((D=m.value)==null?void 0:D.anchor_date)),v=_(y,e*c);o.value.anchor_date=I(v),Y()},ze=e=>{n.value.selectedItem=e,n.value.detailsOpen=!0};return Pe(async()=>{Y(),await z(),typeof ResizeObserver<"u"?(q=new ResizeObserver(z),R.value&&q.observe(R.value),U.value&&q.observe(U.value)):window.addEventListener("resize",z)}),Be(()=>{q&&q.disconnect(),window.removeEventListener("resize",z)}),(e,t)=>{var a,c,y,v,D,de,ie;return d(),r("section",Ge,[n.value.toast?(d(),r("div",{key:0,class:W(["fixed right-4 top-4 z-[80] rounded-xl border px-4 py-2 text-sm shadow-sm",he.value])},p(n.value.toast.text),3)):S("",!0),s("div",{ref_key:"stickyBarRef",ref:R,class:"sticky top-14 z-50"},[s("div",Je,[Ke(Ye,{company_id:i.value.company_id,"onUpdate:company_id":t[0]||(t[0]=l=>i.value.company_id=l),department_id:i.value.department_id,"onUpdate:department_id":t[1]||(t[1]=l=>i.value.department_id=l),employee_id:i.value.employee_id,"onUpdate:employee_id":t[2]||(t[2]=l=>i.value.employee_id=l),line_type:i.value.line_type,"onUpdate:line_type":t[3]||(t[3]=l=>i.value.line_type=l),"with-type":!0,"initial-value":{...e.$route.query,employee_id:e.$route.query.employee_id||e.$route.query.user_id},onFilterChange:Ue,class:"w-full"},null,8,["company_id","department_id","employee_id","line_type","initial-value"])])],512),s("div",{ref_key:"controlsRef",ref:U},[s("div",Xe,[s("div",Ze,[s("div",et,[s("button",{type:"button",class:"rounded-lg border border-slate-200 bg-white px-3 py-2 text-xs font-semibold text-slate-700 hover:bg-slate-50",onClick:t[4]||(t[4]=l=>re(-1)),title:"Previous range"}," Prev "),s("div",tt,[s("div",st,[s("label",nt,[t[12]||(t[12]=Q(" Past ")),G(s("input",{"onUpdate:modelValue":t[5]||(t[5]=l=>g(o).past_days=l),type:"number",min:"0",max:"60",class:"w-14 rounded-lg border border-slate-200 bg-white px-2 py-2 text-xs focus:border-slate-400 focus:outline-none"},null,512),[[J,g(o).past_days,void 0,{number:!0}]])]),s("label",at,[t[13]||(t[13]=Q(" Future ")),G(s("input",{"onUpdate:modelValue":t[6]||(t[6]=l=>g(o).future_days=l),type:"number",min:"0",max:"60",class:"w-14 rounded-lg border border-slate-200 bg-white px-2 py-2 text-xs focus:border-slate-400 focus:outline-none"},null,512),[[J,g(o).future_days,void 0,{number:!0}]])])])]),s("button",{type:"button",class:"rounded-lg border border-slate-200 bg-white px-3 py-2 text-xs font-semibold text-slate-700 hover:bg-slate-50",onClick:t[7]||(t[7]=l=>re(1)),title:"Next range"}," Next "),s("label",lt,[G(s("input",{"onUpdate:modelValue":t[8]||(t[8]=l=>g(o).anchor_date=l),type:"date",class:"rounded-lg border border-slate-200 px-2 py-2 text-xs focus:border-slate-400 focus:outline-none"},null,512),[[J,g(o).anchor_date]])]),s("button",{type:"button",class:"rounded-lg bg-slate-900 px-3 py-2 text-xs font-semibold text-white hover:bg-slate-800",onClick:Re}," Apply ")]),s("div",ot,[s("div",rt,[le.value?(d(),r("div",dt,p(le.value),1)):S("",!0)]),s("div",it,[s("div",ut,[t[14]||(t[14]=Q(" Attendance month: ")),s("span",ct,p(ee.value),1)])]),t[15]||(t[15]=Ve('<div class="hidden sm:flex items-center gap-2"><span class="inline-flex items-center gap-1 text-[11px] text-slate-500"><span class="h-2.5 w-2.5 rounded-full bg-amber-300"></span> Pending </span><span class="inline-flex items-center gap-1 text-[11px] text-slate-500"><span class="h-2.5 w-2.5 rounded-full bg-emerald-300"></span> Approved </span><span class="inline-flex items-center gap-1 text-[11px] text-slate-500"><span class="h-2.5 w-2.5 rounded-full bg-rose-300"></span> Rejected </span><span class="inline-flex items-center gap-1 text-[11px] text-slate-500"><span class="h-2.5 w-2.5 rounded-full bg-emerald-300"></span> Present </span><span class="inline-flex items-center gap-1 text-[11px] text-slate-500"><span class="h-2.5 w-2.5 rounded-full bg-slate-300"></span> Weekend </span><span class="inline-flex items-center gap-1 text-[11px] text-slate-500"><span class="h-2.5 w-2.5 rounded-full bg-sky-300"></span> Holiday </span></div>',1))])])])],512),g(F)?(d(),r("div",pt,p(g(F)),1)):S("",!0),g(B)?(d(),r("div",yt," Loading weekly updates... ")):(d(),r("div",ft,[s("div",null,[s("table",xt,[s("thead",bt,[s("tr",null,[s("th",{class:"sticky left-0 z-30 w-10 border-r border-slate-200 bg-slate-50 p-2 text-left text-xs font-semibold uppercase tracking-wide",style:se(O.value)}," # ",4),s("th",{class:"sticky left-12 z-30 border-r border-slate-200 bg-slate-50 px-4 py-3 text-left text-xs font-semibold uppercase tracking-wide",style:se(O.value)}," Employee ",4),(d(!0),r(E,null,X(g(j),l=>(d(),r("th",{key:l,class:W(["sticky z-20 min-w-[40px] p-2 text-center hover:bg-slate-100",qe(l)]),style:se(O.value)},[s("div",_t,p(V(l)),1),s("div",gt,p(k(l)),1),te(l)?(d(),r("div",vt,"Today")):S("",!0)],6))),128)),t[16]||(t[16]=s("th",{class:"sticky z-20 bg-slate-50 px-4 py-3 text-right text-xs font-semibold uppercase tracking-wide"}," SMS ",-1))])]),s("tbody",null,[(d(!0),r(E,null,X(g(L),(l,Ne)=>{var ue,ce,pe,ye,fe,xe;return d(),r("tr",{key:l.user.id,class:"border-t border-slate-200 hover:bg-sky-50/70"},[s("td",mt,p(Ne+1),1),s("td",ht,[s("div",wt,[s("a",{href:je(l.user),target:"_blank",rel:"noopener",class:"group inline-flex items-center gap-2 truncate font-semibold text-slate-900 hover:text-slate-900",title:`Open Attendance (${ee.value})`},[s("span",St,p(l.user.name),1)],8,kt),s("div",Ct,p(((ue=l.user.company)==null?void 0:ue.name)||"—")+" · "+p(((ce=l.user.department)==null?void 0:ce.name)||"—"),1)])]),(d(!0),r(E,null,X(g(j),A=>(d(),r("td",{key:`${l.user.id}-${A}`,class:W(["p-2 border-r border-slate-200 text-center",Ie(A)])},[u(l,A).length?(d(),r("div",$t,[(d(!0),r(E,null,X(u(l,A),h=>(d(),r(E,{key:`${h.kind}-${h.ref_id}-${h.code}`},[ge(h)?(d(),r("span",{key:0,class:W(["text-[11px] font-semibold text-gray-400",{"!text-red-500":H(h)==="A"}]),title:ne(h)},p(H(h)),11,Dt)):(d(),r("span",{key:1,class:W(["inline-flex items-center rounded-full px-2 py-1 text-[11px] font-semibold ring-1 ring-inset cursor-pointer select-none hover:opacity-90",ve(h)]),title:ne(h),onClick:cs=>ze(h)},p(H(h)),11,Mt))],64))),128))])):(d(),r("span",jt,"—"))],2))),128)),s("td",Tt,[s("div",qt,[s("button",{type:"button",class:"btn-4",disabled:!ae(l)||!!n.value.busyKey,onClick:A=>Ce(l)},[n.value.busyKey?(d(),r("span",Lt,"Sending...")):(d(),r("span",Rt,[t[17]||(t[17]=Q(" Send SMS ")),((pe=l.user)==null?void 0:pe.yearly_messages_count)??((ye=l.user)==null?void 0:ye.yearly_message_count)?(d(),r("span",Ut," ("+p(((fe=l.user)==null?void 0:fe.yearly_messages_count)??((xe=l.user)==null?void 0:xe.yearly_message_count))+") ",1)):S("",!0)]))],8,It)])])])}),128)),g(L).length?S("",!0):(d(),r("tr",zt,[s("td",{class:"bg-white px-4 py-10 text-slate-500 text-center",colspan:g(j).length+3}," No updates found. ",8,Nt)]))])])])])),n.value.smsOpen?(d(),r("div",Et,[s("div",Ft,[s("div",Ot,[s("div",null,[t[18]||(t[18]=s("h3",{class:"text-sm font-semibold text-slate-900"},"Send SMS",-1)),s("p",At,p(((c=(a=n.value.smsTarget)==null?void 0:a.user)==null?void 0:c.name)||"Employee"),1)]),s("button",{type:"button",class:"rounded-lg border border-slate-200 bg-white px-2 py-1 text-xs font-semibold text-slate-700 hover:bg-slate-50",onClick:Z}," Close ")]),s("div",Wt,[t[20]||(t[20]=s("label",{class:"text-xs font-semibold text-slate-600"},"Message",-1)),G(s("textarea",{"onUpdate:modelValue":t[9]||(t[9]=l=>n.value.smsMessage=l),rows:"4",class:"mt-2 w-full rounded-xl border border-slate-200 px-3 py-2 text-sm text-slate-700 focus:border-slate-400 focus:outline-none",placeholder:"Write your SMS message..."},null,512),[[J,n.value.smsMessage]]),s("div",Pt,[s("span",null,p((n.value.smsMessage||"").length)+" characters",1),t[19]||(t[19]=s("span",null,"Message will be sent to the employee.",-1))])]),s("div",Bt,[s("button",{type:"button",class:"rounded-lg border border-slate-200 bg-white px-3 py-2 text-xs font-semibold text-slate-700 hover:bg-slate-50",onClick:Z}," Cancel "),s("button",{type:"button",class:"rounded-lg bg-slate-900 px-4 py-2 text-xs font-semibold text-white hover:bg-slate-800 disabled:cursor-not-allowed disabled:opacity-60",disabled:!we.value,onClick:De},[n.value.busyKey?(d(),r("span",Vt,"Sending...")):(d(),r("span",Ht,"Send SMS"))],8,Kt)])])])):S("",!0),n.value.detailsOpen?(d(),r("div",Yt,[s("div",Qt,[s("div",Gt,[t[21]||(t[21]=s("div",null,[s("h3",{class:"text-sm font-semibold text-slate-900"},"Update Details"),s("p",{class:"text-xs text-slate-500"},"Quick view")],-1)),s("div",Jt,[oe(n.value.selectedItem)?(d(),r("a",{key:0,href:oe(n.value.selectedItem),target:"_blank",rel:"noopener",class:"btn-1 py-1 px-2 text-xs font-semibold",title:"Open application details"}," Application ",8,Xt)):S("",!0),s("button",{type:"button",class:"rounded-lg border border-slate-200 bg-white px-2 py-1 text-xs font-semibold text-slate-700 hover:bg-slate-50",onClick:t[10]||(t[10]=l=>n.value.detailsOpen=!1)}," Close ")])]),s("div",Zt,[s("div",es,[t[22]||(t[22]=s("span",{class:"text-xs font-semibold text-slate-500"},"Label",-1)),s("span",ts,p((y=n.value.selectedItem)==null?void 0:y.label),1)]),s("div",ss,[t[23]||(t[23]=s("span",{class:"text-xs font-semibold text-slate-500"},"Status",-1)),s("span",ns,p((v=n.value.selectedItem)==null?void 0:v.status),1)]),s("div",as,[t[24]||(t[24]=s("span",{class:"text-xs font-semibold text-slate-500"},"Kind",-1)),s("span",ls,p((D=n.value.selectedItem)==null?void 0:D.kind),1)]),me(n.value.selectedItem)?(d(),r(E,{key:0},[s("div",os,[t[25]||(t[25]=s("span",{class:"text-xs font-semibold text-slate-500"},"Weekend/Holiday Date",-1)),s("span",rs,p(((de=n.value.selectedItem)==null?void 0:de.current_date)||"N/A"),1)]),s("div",ds,[t[26]||(t[26]=s("span",{class:"text-xs font-semibold text-slate-500"},"Exchange Date",-1)),s("span",is,p(((ie=n.value.selectedItem)==null?void 0:ie.exchange_date)||"N/A"),1)])],64)):S("",!0)]),s("div",us,[s("button",{type:"button",class:"rounded-lg border border-slate-200 bg-white px-3 py-2 text-xs font-semibold text-slate-700 hover:bg-slate-50",onClick:t[11]||(t[11]=l=>n.value.detailsOpen=!1)}," Done ")])])])):S("",!0)])}}};export{ms as default};
