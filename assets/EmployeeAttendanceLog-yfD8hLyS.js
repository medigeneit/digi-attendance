import{u as B,b as C,r as c,e as A,q as b,c as o,o as n,a,g as M,f as j,y as w,h as F,v as N,k as h,F as k,x as q,t as _,j as T}from"./index-CrRmSVt0.js";import{_ as D}from"./EmployeeFilter-CYmlqtlJ.js";import{L as E}from"./LoaderView-uSr-XWr_.js";import{S as V}from"./SelectedEmployeeCard-zhvOsBTz.js";import{u as R}from"./attendance-B-wUgIga.js";import{u as $}from"./user-CscL_xym.js";import"./company-BtvG4L_q.js";import"./department-BCqLcJXr.js";import"./EmployeeDropdownInput-CuiLGxeB.js";import"./SelectDropdown-jVReE_u8.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./UserChip-fXsh9dCn.js";const z={class:"px-4 space-y-4"},G={class:"flex flex-wrap gap-4"},H={key:0,class:"flex justify-between gap-4 text-sm"},J={key:2,class:"space-y-4"},K={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},O={class:"text-sm font-semibold text-blue-700 border-b pb-1 mb-2"},P={class:"flex items-center gap-1 text-gray-700"},Q={class:"text-right text-gray-500 bg-blue-100 px-2 py-0.5 rounded text-[10px]"},de={__name:"EmployeeAttendanceLog",setup(W){const u=B(),l=C(),v=$(),p=R(),m=c(null),r=c(l.query.date||p.selectedMonth),t=c({company_id:l.query.company_id||"",department_id:l.query.department_id||"all",line_type:l.query.line_type||"all",employee_id:l.query.employee_id||"",category:""}),f=async i=>{i?(await v.fetchUser(i),m.value=v.user):m.value=null},y=async()=>{t.value.employee_id&&r.value&&await p.getMonthlyAttendanceLog(t.value.employee_id,r.value)};A(async()=>{t.value.employee_id&&(await f(t.value.employee_id),await y())}),b(()=>t.value.employee_id,async(i,e)=>{i&&i!==e&&(await f(i),await y(),u.replace({query:{...l.query,employee_id:i}}))}),b(r,i=>{u.replace({query:{...l.query,date:i}}),y()});const U=()=>u.go(-1),L=i=>new Date(i).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),S=()=>{u.replace({query:{...l.query,company_id:t.value.company_id,department_id:t.value.department_id,line_type:t.value.line_type,employee_id:t.value.employee_id}})};return(i,e)=>(n(),o("div",z,[a("div",{class:"flex items-center justify-between gap-2"},[a("button",{class:"btn-3",onClick:U},e[5]||(e[5]=[a("i",{class:"far fa-arrow-left"},null,-1),a("span",{class:"hidden md:flex"},"Back",-1)])),e[6]||(e[6]=a("h1",{class:"title-md md:title-lg flex-wrap text-center"},"Attendance Log",-1)),e[7]||(e[7]=a("div",null,null,-1))]),a("div",G,[w(D,{company_id:t.value.company_id,"onUpdate:company_id":e[0]||(e[0]=s=>t.value.company_id=s),department_id:t.value.department_id,"onUpdate:department_id":e[1]||(e[1]=s=>t.value.department_id=s),employee_id:t.value.employee_id,"onUpdate:employee_id":e[2]||(e[2]=s=>t.value.employee_id=s),line_type:t.value.line_type,"onUpdate:line_type":e[3]||(e[3]=s=>t.value.line_type=s),"with-type":!0,"initial-value":i.$route.query,onFilterChange:S},null,8,["company_id","department_id","employee_id","line_type","initial-value"]),a("div",null,[F(a("input",{id:"monthSelect",type:"month","onUpdate:modelValue":e[4]||(e[4]=s=>r.value=s),onChange:y,class:"input-1"},null,544),[[N,r.value]])])]),m.value?(n(),o("div",H,[w(V,{user:m.value},null,8,["user"])])):M("",!0),h(p).isLoading?(n(),j(E,{key:1})):(n(),o("div",J,[a("div",K,[(n(!0),o(k,null,q(h(p).attendanceLogs,(s,g)=>(n(),o("div",{key:g,class:"bg-white shadow rounded-lg p-4"},[a("h3",O,_(g),1),(n(!0),o(k,null,q(s,(d,X)=>{var x;return n(),o("div",{key:d.id,class:"flex items-center justify-between text-xs mb-1"},[a("div",P,[e[8]||(e[8]=a("i",{class:"far fa-clock text-blue-500"},null,-1)),T(" "+_(L(d.timestamp)),1)]),a("div",Q,_(((x=d==null?void 0:d.device)==null?void 0:x.name)||"Unknown"),1)])}),128))]))),128))])]))]))}};export{de as default};
