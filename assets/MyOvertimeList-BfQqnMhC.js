import{u as A,d as C,e as M,m as g,A as O,n as S,c as l,o as i,a as t,p as a,x as L,k as p,i as f,t as d,h as D,v as R,g as _,F as j,y as B}from"./index-BzMDXl5w.js";import{L as N}from"./LoaderView-DoDwK920.js";import{_ as c}from"./DisplayFormattedWorkingHours-Cq2u0IAV.js";import{u as q}from"./overtime-BfBg8WAr.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const V={class:"space-y-2 px-4"},P={class:"flex items-center justify-between gap-2"},T={class:"flex items-center gap-2"},F={class:"title-md md:title-lg flex-wrap text-center"},U={class:"flex gap-4"},$={class:"grid grid-cols-2 md:grid-cols-6 gap-2 text-xs md:text-sm"},z={class:"rounded-md border bg-white p-2"},E={class:"font-semibold"},G={class:"rounded-md border bg-white p-2"},I={class:"font-semibold"},W={class:"rounded-md border bg-white p-2"},J={class:"font-semibold"},K={class:"rounded-md border bg-white p-2"},Q={class:"font-semibold"},X={class:"rounded-md border bg-white p-2"},Y={class:"font-semibold"},Z={key:0,class:"text-center py-4"},tt={key:1,class:"space-y-4"},et={class:"overflow-x-auto"},st={class:"min-w-full table-auto border-collapse border border-gray-200 bg-white rounded-md text-sm"},rt={class:"border border-gray-300 px-2 text-center"},ot={class:"border border-gray-300 px-2 text-center"},dt={class:"border border-gray-300 px-2 text-center"},nt={class:"border border-gray-300 px-2 text-center"},at={class:"border border-gray-300 px-2 text-center"},lt={class:"border border-gray-300 px-2 text-center"},it={class:"border border-gray-300 px-2 text-center"},ct={class:"border border-gray-300 px-2 text-center"},ut={class:"border border-gray-300 px-2 text-center"},pt={class:"border border-gray-300 px-2 text-center"},bt={class:"border border-gray-300 px-2 text-center"},gt={class:"border border-gray-300 px-2 text-center"},xt={class:"flex items-center justify-center gap-2"},_t=["onClick"],yt={key:0},ht={key:0,class:"bg-gray-50"},mt={class:"*:py-2 font-semibold"},ft={class:"border border-gray-300 px-2 text-center"},vt={class:"border border-gray-300 px-2 text-center"},St={__name:"MyOvertimeList",setup(kt){const v=A(),n=q();C(),M(()=>{x()});const k=()=>{v.go(-1)},u=g(()=>n.overtimes||[]);O(()=>n.selectedMonth,r=>{r&&x(r)});const x=async(r=null)=>{n.fetchUserOvertimes({month:r||n.selectedMonth})};function w(r){confirm("Are you sure you want to delete this application?")&&n.deleteOvertime(r)}const y=g(()=>(n.overtimes||[]).reduce((e,o)=>e+(Number(o==null?void 0:o.request_overtime_hours)||0),0)),h=g(()=>(n.overtimes||[]).reduce((e,o)=>e+(Number(o==null?void 0:o.approval_overtime_hours)||0),0)),b=g(()=>{const r={pending:0,approved:0,rejected:0,other:0,total:u.value.length};for(const e of u.value){const o=String(e.status||"Pending").toLowerCase();o==="approved"?r.approved++:o==="rejected"?r.rejected++:o==="pending"||o==="applied"?r.pending++:r.other++}return r});return(r,e)=>{var m;const o=S("RouterLink");return i(),l("div",V,[t("div",P,[t("div",T,[t("button",{class:"btn-3 py-1",onClick:k},e[1]||(e[1]=[t("i",{class:"far fa-arrow-left"},null,-1),t("span",{class:"hidden md:flex"},"Back",-1)])),t("div",null,[t("button",{onClick:x,type:"button",class:"btn-3 space-x-1 py-1"},[t("i",{class:L(["fas fa-sync text-lg",{"animate-spin":p(n).loading}])},null,2),e[2]||(e[2]=t("span",{class:"hidden md:inline"}," Reload ",-1))])]),a(o,{to:{name:"MyOvertimeAdd"},class:"btn-2"},{default:f(()=>e[3]||(e[3]=[t("i",{class:"far fa-plus"},null,-1),t("span",{class:"hidden md:flex"},"Overtime",-1)])),_:1,__:[3]})]),t("h1",F," Overtime of "+d(p(n).selectedMonthDisplay),1),t("div",U,[t("div",null,[D(t("input",{id:"monthSelect",type:"month","onUpdate:modelValue":e[0]||(e[0]=s=>p(n).selectedMonth=s),class:"input-1"},null,512),[[R,p(n).selectedMonth]])])])]),t("div",$,[t("div",z,[e[4]||(e[4]=t("div",{class:"text-slate-500"},"Applications",-1)),t("div",E,d(b.value.total),1)]),t("div",G,[e[5]||(e[5]=t("div",{class:"text-slate-500"},"Requested",-1)),t("div",I,[a(c,{workingHours:y.value},null,8,["workingHours"])])]),t("div",W,[e[6]||(e[6]=t("div",{class:"text-slate-500"},"Approved",-1)),t("div",J,[a(c,{workingHours:h.value},null,8,["workingHours"])])]),t("div",K,[e[7]||(e[7]=t("div",{class:"text-slate-500"},"Pending",-1)),t("div",Q,d(b.value.pending),1)]),t("div",X,[e[8]||(e[8]=t("div",{class:"text-slate-500"},"Approved / Rejected",-1)),t("div",Y,d(b.value.approved)+" / "+d(b.value.rejected),1)])]),(m=p(n))!=null&&m.loading?(i(),l("div",Z,[a(N)])):(i(),l("div",tt,[t("div",et,[t("table",st,[e[16]||(e[16]=t("thead",null,[t("tr",{class:"bg-gray-200 *:py-1"},[t("th",{class:"border border-gray-300 px-2 text-center"},"#"),t("th",{class:"border border-gray-300 px-2 text-center"},"Date"),t("th",{class:"border border-gray-300 px-2 text-center"},"Type"),t("th",{class:"border border-gray-300 px-2 text-center"},"Shift"),t("th",{class:"border border-gray-300 px-2 text-center"},"Check-In"),t("th",{class:"border border-gray-300 px-2 text-center"},"Check-Out"),t("th",{class:"border border-gray-300 px-2 text-center"},"Working (hour)"),t("th",{class:"border border-gray-300 px-2 text-center"},"Request (hour)"),t("th",{class:"border border-gray-300 px-2 text-center"},"Approved (hour)"),t("th",{class:"border border-gray-300 px-2 text-center"},"Status"),t("th",{class:"border border-gray-300 px-2 text-center"},"Details"),t("th",{class:"border border-gray-300 px-2 text-center"},"Action")])],-1)),t("tbody",null,[(i(!0),l(j,null,B(u.value,(s,H)=>(i(),l("tr",{key:s==null?void 0:s.id,class:"border-b border-gray-200 hover:bg-blue-200 *:py-2"},[t("td",rt,d(H+1),1),t("td",ot,d(new Date(s.date).toLocaleDateString("en-GB",{day:"2-digit",month:"long",year:"numeric"})),1),t("td",dt,d(s.duty_type),1),t("td",nt,d(s.shift),1),t("td",at,d(s.check_in||"- : -"),1),t("td",lt,d(s.check_out||"- : -"),1),t("td",it,[a(c,{workingHours:s.working_hours},null,8,["workingHours"])]),t("td",ct,[a(c,{workingHours:s.request_overtime_hours},null,8,["workingHours"])]),t("td",ut,[a(c,{workingHours:s.approval_overtime_hours},null,8,["workingHours"])]),t("td",pt,d(s.status||"Pending"),1),t("td",bt,d(s.work_details),1),t("td",gt,[t("div",xt,[a(o,{to:{name:"MyOvertimeShow",params:{id:s.id}},class:"btn-1 px-3"},{default:f(()=>e[9]||(e[9]=[t("i",{class:"far fa-eye"},null,-1)])),_:2,__:[9]},1032,["to"]),s.status=="Pending"||!s.status?(i(),l("button",{key:0,type:"button",onClick:wt=>w(s==null?void 0:s.id),class:"btn-icon"},e[10]||(e[10]=[t("i",{class:"far fa-trash text-red-600"},null,-1)]),8,_t)):_("",!0)])])]))),128)),u.value.length===0?(i(),l("tr",yt,e[11]||(e[11]=[t("td",{colspan:12,class:"p-2 text-center text-red-500"},"No overtimes found",-1)]))):_("",!0)]),u.value.length?(i(),l("tfoot",ht,[t("tr",mt,[e[12]||(e[12]=t("td",{class:"border border-gray-300 px-2 text-right",colspan:"7"},"Totals",-1)),t("td",ft,[a(c,{workingHours:y.value},null,8,["workingHours"])]),t("td",vt,[a(c,{workingHours:h.value},null,8,["workingHours"])]),e[13]||(e[13]=t("td",{class:"border border-gray-300 px-2 text-center"},"—",-1)),e[14]||(e[14]=t("td",{class:"border border-gray-300 px-2 text-center"},"—",-1)),e[15]||(e[15]=t("td",{class:"border border-gray-300 px-2 text-center"},"—",-1))])])):_("",!0)])])]))])}}};export{St as default};
