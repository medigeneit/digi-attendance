import{u as V,b as B,s as g,r as v,e as U,A as m,c as l,o,a as t,g as p,C as M,F as h,x as k,t as d,h as u,l as w,v as N,L as P,q as T}from"./index-D7bpHmyD.js";import{L as F}from"./LoaderView-D6Rpqaya.js";import{_ as W}from"./MultiselectDropdown-dJOue540.js";import{u as j}from"./attendance-NKy0Srw0.js";import{u as z}from"./company-Z0_N4Ml6.js";import{S as E}from"./sweetalert2.esm.all-9Qm2jZ7z.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vue-multiselect.esm-BEydf0Wu.js";const K={class:"space-y-2 px-4"},O={class:"flex flex-wrap items-center gap-2"},$=["value"],G={key:0,class:"text-center py-4"},H={key:1,class:"space-y-4"},I={key:0,class:"overflow-x-auto"},J={class:"min-w-full table-auto border-collapse border border-gray-200 bg-white rounded-md text-sm"},Q={class:"border border-gray-300 px-2"},X={class:"border border-gray-300 px-2"},Y={class:"border border-gray-300 px-2"},Z={class:"border border-gray-300 px-2"},ee={class:"border border-gray-300 px-2"},te={class:"border border-gray-300 px-2"},ae={class:"border border-gray-300 px-2"},se={class:"border border-gray-300 px-2"},le={class:"border border-gray-300 px-2"},oe={key:0},de={key:1,class:"text-gray-500 italic text-xs"},ne={class:"border border-gray-300 px-2"},ie={key:1,class:"text-center text-red-500 text-xl italic mt-10"},ge={__name:"DailyLateAttendanceReport",setup(re){const y=V(),r=B(),b=j(),x=z(),{dailyLateLogs:L,isLoading:S,selectedDate:i}=g(b),{companies:q,employees:C}=g(x),n=v(r.query.company_id||""),c=v("");r.query.date&&(i.value=r.query.date),U(async()=>{await x.fetchCompanies(),n.value&&(await x.fetchEmployee(n.value),await f())}),m(n,async a=>{a&&(await x.fetchEmployee(a),c.value=""),y.replace({query:{...r.query,company_id:a||"",employee_id:""}})}),m(c,async a=>{a!=null&&a.id&&await f(),y.replace({query:{...r.query,employee_id:(a==null?void 0:a.id)||""}})}),m(i,a=>{y.replace({query:{...r.query,date:a}})});const f=async()=>{n.value&&await b.getAttendanceLateReport(n.value,c.value.id,i.value,"daily")},A=async()=>{n.value?await b.lateReportDownloadExcel(n.value,c.value.id,i.value,"daily"):E.fire({icon:"warning",title:"Missing Selection!",text:"Please select Company and Employee first!",confirmButtonText:"OK"})},D=()=>{y.go(-1)},R=a=>a==="Pending"?"text-yellow-700":a==="Approved"?"text-green-700":"text-red-500";return(a,s)=>(o(),l("div",K,[t("div",{class:"flex items-center justify-between gap-2"},[t("button",{class:"btn-3",onClick:D},s[3]||(s[3]=[t("i",{class:"far fa-arrow-left"},null,-1),t("span",{class:"hidden md:flex"},"Back",-1)])),s[5]||(s[5]=t("h1",{class:"title-md md:title-lg flex-wrap text-center"},"Daily Late Reports",-1)),t("div",{class:"flex gap-4"},[t("button",{type:"button",onClick:A,class:"btn-3"},s[4]||(s[4]=[t("i",{class:"far fa-file-excel text-2xl text-green-500"},null,-1)]))])]),t("div",O,[t("div",null,[p(t("select",{id:"user-filter","onUpdate:modelValue":s[0]||(s[0]=e=>n.value=e),class:"input-1"},[s[6]||(s[6]=t("option",{value:""},"Select Company",-1)),(o(!0),l(h,null,k(u(q),e=>(o(),l("option",{key:e.id,value:e.id},d(e.name),9,$))),128))],512),[[M,n.value]])]),t("div",null,[w(W,{modelValue:c.value,"onUpdate:modelValue":s[1]||(s[1]=e=>c.value=e),options:u(C),multiple:!1,label:"label",placeholder:"Please select employee..."},null,8,["modelValue","options"])]),t("div",null,[p(t("input",{id:"user-filter","onUpdate:modelValue":s[2]||(s[2]=e=>P(i)?i.value=e:null),onChange:f,type:"date",class:"input-1"},null,544),[[N,u(i)]])])]),u(S)?(o(),l("div",G,[w(F)])):(o(),l("div",H,[n.value?(o(),l("div",I,[t("table",J,[s[7]||(s[7]=t("thead",null,[t("tr",{class:"bg-gray-200"},[t("th",{class:"border border-gray-300 px-2 text-left"},"#"),t("th",{class:"border border-gray-300 px-2 text-left"},"Date"),t("th",{class:"border border-gray-300 px-2 text-left"},"Weekday"),t("th",{class:"border border-gray-300 px-2 text-left"},"Employee Name"),t("th",{class:"border border-gray-300 px-2 text-left"},"Company"),t("th",{class:"border border-gray-300 px-2 text-left"},"Department"),t("th",{class:"border border-gray-300 px-2 text-left"},"Entry Time"),t("th",{class:"border border-gray-300 px-2 text-left"},"Late Duration"),t("th",{class:"border border-gray-300 px-2 text-left"},"Action"),t("th",{class:"border border-gray-300 px-2 text-left"},"Shift")])],-1)),t("tbody",null,[(o(!0),l(h,null,k(u(L),(e,_)=>(o(),l("tr",{key:e.id||_,class:"border-b border-gray-200 hover:bg-blue-200"},[t("td",Q,d(_+1),1),t("td",X,d(e==null?void 0:e.date),1),t("td",Y,d(e==null?void 0:e.weekday),1),t("td",Z,d((e==null?void 0:e.user_name)||"Unknown"),1),t("td",ee,d((e==null?void 0:e.company_name)||"Unknown"),1),t("td",te,d((e==null?void 0:e.department_name)||"Unknown"),1),t("td",ae,d(e==null?void 0:e.entry_time),1),t("td",se,d(e==null?void 0:e.late_duration),1),t("td",le,[e!=null&&e.short_leave?(o(),l("div",oe,[t("span",{class:T(R(e.short_leave.status))},d(e.short_leave.status||"Waiting"),3)])):(o(),l("div",de,"No Application"))]),t("td",ne,d(e==null?void 0:e.shift_name),1)]))),128))])])])):(o(),l("div",ie," Please select company "))]))]))}};export{ge as default};
