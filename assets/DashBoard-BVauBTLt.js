import{d as C,s as L,u as P,q,r as B,e as N,k as U,c as d,o as a,a as s,h as l,n,t as o,l as m,p as u,F as b,x as h,m as T,y as v,f as $}from"./index-D3P1gRIA.js";import{u as j}from"./user-Bu1R0QmF.js";import{O as V}from"./OverlyModal-BFi281FX.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const F={class:"my-container"},M={class:"card-bg p-4 md:p-8"},z={key:0},E={class:"title-md"},H={class:"title-md"},O={key:1},W={key:0,class:"grid gap-4 md:grid-cols-3 mt-4"},Y={class:"text-3xl"},I={class:"text-3xl"},G={class:"text-3xl"},J={class:"text-3xl"},K={class:"text-3xl"},Q={class:"text-3xl"},X={key:1,class:"w-full mt-4"},Z={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},ss={class:"bg-white shadow-md rounded-lg p-4"},ts={class:"space-y-2"},es={class:"flex justify-between items-center px-4 py-2 rounded hover:bg-gray-50 transition-colors"},os={class:"font-semibold text-gray-800"},as={key:0},ls={key:1},ns={key:2},ds={class:"space-y-3"},is={class:"flex items-center space-x-4"},rs={class:"absolute top-10 left-1/2 -translate-x-1/2 bg-gray-800 text-white text-xs rounded py-1 px-2 opacity-0 group-hover:opacity-100 transition pointer-events-none z-10 whitespace-nowrap"},us={class:"text-sm font-medium text-gray-900"},ps={class:"text-xs text-gray-500 mt-0.5"},cs={class:"text-xl font-bold text-gray-800 flex items-center gap-2 p-4"},ms={class:"space-y-5 px-4 md:px-6 py-4"},ys={class:"text-sm text-gray-500 flex items-center gap-2"},xs={class:"flex justify-end gap-3 mt-6"},fs={class:"bg-white shadow-md rounded-lg"},_s={class:"overflow-x-auto shadow-md sm:rounded-lg min-h-max"},gs={class:"min-w-full text-sm text-left text-gray-500"},bs={class:"px-6 py-4 font-medium text-gray-900"},hs={class:"px-6 py-4"},vs={class:"px-6 py-4"},ws={class:"px-6 py-4"},As={__name:"DashBoard",setup(ks){const _=C(),g=j(),{dashboardInfo:y,selectedDate:D,userDashboard:x}=L(g),{user:c}=L(_),S=P(),w=q(()=>{var p;return["admin","super_admin","developer"].includes((p=c==null?void 0:c.value)==null?void 0:p.role)}),r=B(null);N(async()=>{var t,i;c.value||await _.fetchUser(),await g.fetchUserDashboardData(),w.value&&await g.fetchAdminDashboardData();const p=(i=(t=x.value)==null?void 0:t.notices)==null?void 0:i.find(f=>!f.user_feedback);p&&(r.value=p)});const A=()=>{if(!r.value)return;const p=r.value.type===1?`/notice-details/${r.value.id}`:`/policy-details/${r.value.id}`;S.push(p)};return(p,t)=>{var f,k;const i=U("RouterLink");return a(),d("div",F,[s("div",M,[l(c)?(a(),d("div",z,[s("p",null,[t[2]||(t[2]=n(" Hello ")),s("span",E,o(l(c).name)+"!",1)]),t[5]||(t[5]=s("h1",{class:"title-xl"},"Welcome back",-1)),s("p",null,[t[3]||(t[3]=s("i",{class:"fas fa-phone mr-2"},null,-1)),t[4]||(t[4]=n(" Your phone number is ")),s("span",H,o(l(c).phone),1)])])):(a(),d("div",O,t[6]||(t[6]=[s("p",null,"Loading...",-1)])))]),w.value&&l(_).isAdminMood?(a(),d("div",W,[m(i,{to:{name:"TodayAttendanceReport",query:{search:"all"}},class:"main-button"},{default:u(()=>{var e;return[s("span",Y,o((e=l(y))==null?void 0:e.totalUsers),1),t[7]||(t[7]=n(" Total Employees "))]}),_:1,__:[7]}),m(i,{to:{name:"TodayAttendanceReport",query:{search:"Present"}},class:"main-button"},{default:u(()=>{var e;return[s("span",I,o((e=l(y))==null?void 0:e.todayPresents),1),t[8]||(t[8]=n(" Today Present "))]}),_:1,__:[8]}),m(i,{to:{name:"TodayAttendanceReport",query:{search:"Absent"}},class:"main-button"},{default:u(()=>{var e;return[s("span",G,o((e=l(y))==null?void 0:e.todayAbsents),1),t[9]||(t[9]=n(" Today Absent "))]}),_:1,__:[9]}),m(i,{to:{name:"LeaveApplicationList",query:{search:"today"}},class:"main-button"},{default:u(()=>{var e;return[s("span",J,o((e=l(y))==null?void 0:e.todayLeaves),1),t[10]||(t[10]=n(" Today Leave "))]}),_:1,__:[10]}),m(i,{to:{name:"LeaveApplicationList",query:{search:"tomorrow"}},class:"main-button"},{default:u(()=>{var e;return[s("span",K,o((e=l(y))==null?void 0:e.tomorrowLeaves),1),t[11]||(t[11]=n(" Tomorrow Leave "))]}),_:1,__:[11]}),m(i,{to:{name:"ShortLeaveList",query:{search:l(D)}},class:"main-button"},{default:u(()=>{var e;return[s("span",Q,o((e=l(y))==null?void 0:e.todayShortLeaves),1),t[12]||(t[12]=n(" Today Short Leaves "))]}),_:1,__:[12]},8,["to"])])):(a(),d("div",X,[s("div",Z,[s("div",ss,[s("div",ts,[t[16]||(t[16]=s("div",{class:"flex items-center"},[s("i",{class:"fas fa-file mr-2 h-5 w-5"}),s("h2",{class:"text-xl font-semibold"},"Applications")],-1)),(a(!0),d(b,null,h((f=l(x))==null?void 0:f.current_month_leave,e=>(a(),T(i,{to:{name:"MyLeaveApplicationShow",params:{id:e.id}},key:e.id},{default:u(()=>[s("div",es,[s("h3",os," Leave Application #"+o(e.id),1),s("p",{class:v(["text-sm font-medium flex items-center space-x-2",{"bg-gray-500 py-1.5 rounded-full px-4 text-white":e.status===null,"bg-yellow-500 py-1.5 rounded-full px-4 text-white":e.status==="Pending","bg-green-500 py-1.5 rounded-full px-4 text-white":e.status==="approved"}])},[e.status===null?(a(),d("span",as,t[13]||(t[13]=[s("i",{class:"fas fa-clock mr-2"},null,-1),n(" Wait for Hanover ")]))):e.status==="Pending"?(a(),d("span",ls,t[14]||(t[14]=[s("i",{class:"fas fa-hourglass-half mr-2"},null,-1),n(" Pending ")]))):(a(),d("span",ns,t[15]||(t[15]=[s("i",{class:"fas fa-check-circle mr-2"},null,-1),n(" Approved ")])))],2)])]),_:2},1032,["to"]))),128))]),t[21]||(t[21]=s("div",{class:"flex justify-between items-start mb-4"},[s("div",{class:"flex items-center"},[s("i",{class:"fas fa-file mr-2 h-5 w-5"}),s("h2",{class:"text-xl font-semibold"},"Notices")])],-1)),s("div",ds,[(a(!0),d(b,null,h(l(x).notices,(e,R)=>(a(),d("div",{key:R,class:"flex items-center justify-between p-4 border rounded-lg shadow-sm hover:shadow transition-all bg-white"},[s("div",is,[s("div",{class:v([["rounded-full",e.user_feedback?"bg-green-100":"bg-red-100"],"h-8 w-8 flex items-center justify-center rounded-full"])},[s("span",{class:v(["h-3 w-3",e.user_feedback?"bg-green-600":"bg-red-600","rounded-full inline-block"])},null,2),s("div",rs,o(e.user_feedback?"Feedback Submitted":"Feedback Pending"),1)],2),s("div",null,[s("p",us,o(e.title),1),s("p",ps,o(e.published_at),1)])]),m(i,{to:e.type===1?`/notice-details/${e.id}`:`/policy-details/${e.id}`,class:"text-blue-600 hover:text-blue-800 font-semibold text-sm"},{default:u(()=>t[17]||(t[17]=[n(" View ")])),_:2,__:[17]},1032,["to"])]))),128)),r.value?(a(),T(V,{key:0,show:!0,onClose:t[1]||(t[1]=e=>r.value=null)},{default:u(()=>[s("div",cs,[t[18]||(t[18]=s("i",{class:"fas fa-bell text-blue-500"},null,-1)),n(" "+o(r.value.title),1)]),s("div",ms,[s("p",ys,[t[19]||(t[19]=s("i",{class:"fas fa-calendar-alt text-gray-400"},null,-1)),n(" Published: "+o(r.value.published_at),1)]),t[20]||(t[20]=s("p",{class:"text-base text-gray-700 leading-relaxed"}," You must read this notice before proceeding. ",-1)),s("div",xs,[s("button",{onClick:t[0]||(t[0]=e=>r.value=null),class:"bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium px-5 py-2 rounded-lg transition"}," Cancel "),s("button",{onClick:A,class:"bg-blue-600 hover:bg-blue-700 text-white font-semibold px-6 py-2.5 rounded-lg shadow transition"}," Read Details ")])])]),_:1})):$("",!0)])]),s("div",fs,[t[23]||(t[23]=s("h2",{class:"text-xl font-semibold py-3 px-4"},"Leave Balance",-1)),s("div",_s,[s("table",gs,[t[22]||(t[22]=s("thead",{class:"text-xs text-gray-700 uppercase bg-gray-50"},[s("tr",null,[s("th",{scope:"col",class:"px-6 py-3"},"Type"),s("th",{scope:"col",class:"px-6 py-3"},"Total Days"),s("th",{scope:"col",class:"px-6 py-3"},"Used Days"),s("th",{scope:"col",class:"px-6 py-3"},"Remaining Days")])],-1)),s("tbody",null,[(a(!0),d(b,null,h((k=l(x))==null?void 0:k.leave_balance,e=>(a(),d("tr",{key:e.id,class:"border-b hover:bg-gray-100"},[s("td",bs,o(e.leave_type),1),s("td",hs,o(e.total_leave_days),1),s("td",vs,o(e.used_days),1),s("td",ws,o(e.remaining_days),1)]))),128))])])])])])]))])}}};export{As as default};
