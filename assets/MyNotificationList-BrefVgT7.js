import{M as x,b as k,p as d,c as e,e as c,t as u,F as v,x as y,o as t,a as n,y as w}from"./index-X8p7xWov.js";const b={class:"my-container"},N={key:0,class:"text-center text-gray-500"},A={key:1,class:"text-center text-red-500"},L={key:2},S={class:"text-lg font-semibold text-indigo-600 capitalize mb-2"},C={class:"divide-y divide-gray-200"},B=["onClick"],M={class:"text-sm text-gray-500"},z={key:0,class:"absolute top-2 right-2"},D={key:0,class:"p-4 text-center text-gray-500"},V={__name:"MyNotificationList",setup(F){const r=x();k(()=>{r.fetchNotifications()});const p=d(()=>r.notifications),h=d(()=>r.loading),_=d(()=>r.error),g=d(()=>Array.isArray(p.value)?p.value.reduce((a,s)=>{var i;const l=((i=s.data)==null?void 0:i.event_type)||"other";return a[l]||(a[l]=[]),a[l].push(s),a},{}):{}),f=async(a,s)=>{await r.markAsRead(a),s&&(window.location.href=s)},m=a=>({leaveApplication:"/leave-application-show/",shortLeave:"/short-leave-show/",offday:"/exchange-offday-show/",shift:"/exchange-shift-show/",manualAttendance:"/manual-attendance-show/"})[a]||"#";return(a,s)=>(t(),e("div",b,[h.value?(t(),e("p",N,"Loading notifications...")):c("",!0),_.value?(t(),e("p",A,u(_.value),1)):c("",!0),!h.value&&!_.value?(t(),e("div",L,[(t(!0),e(v,null,y(g.value,(l,i)=>(t(),e("div",{key:i,class:"mb-6"},[n("h3",S,u(i),1),n("ul",C,[(t(!0),e(v,null,y(l,o=>(t(),e("li",{key:o.id,class:w([{"p-4 bg-white":o.read_at,"p-4 bg-teal-100":!o.read_at},"cursor-pointer relative"]),onClick:T=>f(o.id,m(o.data.event_type)+o.data.event_id)},[n("p",null,u(o.data.message),1),n("span",M,u(new Date(o.created_at).toLocaleString("en-US")),1),o.read_at?c("",!0):(t(),e("div",z,s[0]||(s[0]=[n("span",{class:"relative flex h-3 w-3"},[n("span",{class:"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"}),n("span",{class:"relative inline-flex rounded-full h-3 w-3 bg-red-500"})],-1)])))],10,B))),128))])]))),128)),p.value.length===0?(t(),e("p",D," No notifications found. ")):c("",!0)])):c("",!0)]))}};export{V as default};
