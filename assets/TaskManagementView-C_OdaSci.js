import{c as n,o as r,a as t,t as i,x as y,s as w,e as b,F as g,y as h,j as T,k as x,m as P,g as D,M as B,p,u as q,b as N,r as C,A as E,f as V,G as O,n as F,i as v}from"./index-aCDrQNt5.js";import{u as I}from"./useBugStore-B-wCBboG.js";import{u as z}from"./useMeetingStore-7ygq5mLE.js";import{u as M}from"./useProjectStore-DyV9OgfL.js";import{u as A}from"./useTodoStore-BdUkNdrp.js";import{u as G}from"./useRequirementStore-BosgMmsl.js";import{_ as H}from"./TaskTreeView-B9lrylb1.js";import{u as U}from"./useTaskStore-C65EKfLZ.js";import{_ as J}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useTodoDateStore-rXlhqSiN.js";import"./url-CePbr-gY.js";import"./requirement-BYfARunu.js";import"./TaskUrgentBadge-CDZdwYJe.js";import"./TaskTitle-RZuf436g.js";import"./TaskAssignedUsers-UYgxd9m1.js";import"./UserChip-utA3liTH.js";import"./datetime-Efw590t9.js";import"./TaskSupervisorAndEmployee-CGw0w69g.js";const K={class:"bg-white rounded-lg p-4 shadow hover:shadow-md transition-shadow"},Q={class:"flex items-center justify-between pb-2"},W={class:"text-sm font-medium text-gray-700"},X={class:"text-2xl font-bold text-gray-900"},Y={class:"text-xs text-gray-500 mt-1"},$={__name:"DashboardCard",props:{title:String,value:[String,Number],subtext:String,icon:String,color:String},setup(m){const _=`fa-${m.icon}`;return(d,l)=>(r(),n("div",K,[t("div",Q,[t("h3",W,i(m.title),1),t("i",{class:y(["fas",_,m.color,"text-sm"])},null,2)]),t("div",X,i(m.value),1),t("p",Y,i(m.subtext),1)]))}},Z={class:"space-y-4"},tt={class:"space-y-4"},et={class:"flex items-start justify-between"},st={class:"space-y-1"},ot={class:"flex items-center gap-2"},at={class:"text-xs font-medium text-gray-500"},rt={class:"font-medium text-gray-800"},nt={class:"text-sm text-gray-500"},lt={class:"text-xs text-gray-500"},it={key:0},ct={key:1},dt={__name:"BugsTab",setup(m){const o=I(),{bugs:_}=w(o);b(()=>{o.fetchBugs()});const d=l=>{switch(l){case"Open":return"border-blue-500 text-blue-500";case"In Progress":return"border-yellow-500 text-yellow-500";case"Resolved":return"border-green-500 text-green-500";default:return"border-gray-300 text-gray-400"}};return(l,s)=>(r(),n("div",Z,[s[1]||(s[1]=t("h2",{class:"text-xl font-semibold"},"Bug Tracking",-1)),t("div",tt,[(r(!0),n(g,null,h(x(_),e=>{var a;return r(),n("div",{key:e.id,class:"rounded-lg border bg-white p-4 shadow hover:bg-gray-50 transition-colors"},[t("div",et,[t("div",st,[t("div",ot,[t("span",at,i(e.id),1),t("span",{class:y(["text-xs font-medium px-2 py-1 rounded border",d(e.status)])},i(e.status),3)]),t("h3",rt,i(e.title),1),t("p",nt,"Project: "+i((a=e.project)==null?void 0:a.name),1),t("p",lt,[e.users.length?(r(),n("span",it,[s[0]||(s[0]=T(" Assigned to: ")),t("strong",null,i(e.users.map(c=>c.name).join(", ")),1)])):(r(),n("span",ct,"Not assign"))])])])])}),128))])]))}},ut={class:"space-y-4"},_t={class:"space-y-2"},mt={class:"space-y-3"},pt={class:"flex items-start justify-between"},xt={class:"font-medium text-gray-800"},gt={class:"text-sm text-gray-500"},ht={class:"flex items-center gap-1 mt-2"},ft={class:"flex -space-x-2"},yt={key:0,class:"text-xs text-gray-500 ml-2"},bt={class:"flex flex-col gap-2 text-sm"},vt={__name:"MeetingsTab",setup(m){const o=z(),{meetings:_}=w(o);b(()=>{o.fetchMeetings()});const d=s=>s.split(" ").map(e=>e[0]).join("").toUpperCase(),l=P(()=>_.value.map(s=>{const e=new Date(s.start_time),a=new Date(s.end_time),c=f=>f.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0}),u=f=>{const S=new Date,k=new Date(f),R=k.toDateString()===S.toDateString(),j=new Date;j.setDate(S.getDate()+1);const L=k.toDateString()===j.toDateString();return R?"Today":L?"Tomorrow":k.toLocaleDateString()};return{title:s.title,start_time:c(e),end_time:c(a),users:s.users.map(f=>f.name),day:u(s.start_time)}}));return(s,e)=>(r(),n("div",ut,[e[1]||(e[1]=t("h2",{class:"text-xl font-semibold"},"Scheduled Meetings",-1)),t("div",_t,[t("div",mt,[(r(!0),n(g,null,h(l.value,(a,c)=>(r(),n("div",{key:c,class:"rounded-lg border bg-white p-4 shadow hover:bg-gray-50 transition-colors"},[t("div",pt,[t("div",null,[t("h4",xt,i(a==null?void 0:a.title),1),t("p",gt,i(a.start_time)+" - "+i(a.end_time),1),t("div",ht,[t("div",ft,[(r(!0),n(g,null,h(a.users.slice(0,2),(u,f)=>(r(),n("div",{key:f,class:"w-6 h-6 rounded-full bg-gray-200 text-[10px] font-bold flex items-center justify-center text-gray-700 border"},i(d(u)),1))),128))]),a.users.length>2?(r(),n("span",yt," +"+i(a.users.length-2)+" more ",1)):D("",!0)])]),t("div",bt,[T(i(a==null?void 0:a.day)+" ",1),e[0]||(e[0]=t("button",{class:"text-blue-600 hover:underline"},"Details",-1))])])]))),128))])])]))}},$t={class:"space-y-4"},wt={class:"grid gap-4 md:grid-cols-2 lg:grid-cols-3"},kt={class:"flex justify-between items-center mb-2"},Tt={class:"font-medium text-gray-800"},St={class:"text-sm text-gray-500 mb-1"},jt={class:"text-sm text-gray-500 mb-1"},Dt={__name:"ProjectsTab",setup(m){const o=M(),{projects:_}=w(o);return b(()=>{o.fetchProjects()}),(d,l)=>(r(),n("div",$t,[l[0]||(l[0]=t("h2",{class:"text-xl font-semibold"},"Project Overview",-1)),t("div",wt,[(r(!0),n(g,null,h(x(_),s=>{var e;return r(),n("div",{key:s.name,class:"rounded-lg border bg-white p-4 shadow hover:shadow-md transition-shadow"},[t("div",kt,[t("h3",Tt,i(s.name),1),t("span",{class:y(["text-xs px-2 py-1 rounded text-white",s.priorityClass])},i(s.priority),3)]),t("p",St,"Company: "+i((e=s==null?void 0:s.company)==null?void 0:e.name),1),t("p",jt," Total Requirements: "+i(s==null?void 0:s.requirements_count),1)])}),128))])]))}},Ct={class:"container mx-auto px-4 py-6"},Mt={key:0,class:"text-center text-gray-500 py-6"},Rt={key:1,class:"text-center text-red-500 py-6"},Lt={key:2},Pt={class:"grid gap-4"},Bt={key:0,class:"inline-flex items-center text-green-600 text-xs font-semibold bg-green-100 px-2 py-0.5 rounded-full"},qt={class:"text-sm text-gray-500 mt-1"},Nt={class:"inline-block bg-blue-100 text-blue-800 text-xs font-semibold px-2 py-0.5 rounded"},Et={class:"ml-2"},Vt={class:"text-sm text-gray-500 mt-2"},Ot={class:"bg-gray-100 text-gray-700 px-2 py-0.5 ml-2 rounded-full text-xs"},Ft={__name:"ReportTab",setup(m){const o=A();return b(()=>{o.fetchTodos()}),(_,d)=>(r(),n("div",Ct,[d[1]||(d[1]=t("h2",{class:"text-2xl font-bold text-gray-800 mb-6"},"ðŸ“‹ Todo List",-1)),x(o).loading?(r(),n("div",Mt,"Loading...")):x(o).error?(r(),n("div",Rt,i(x(o).error),1)):(r(),n("div",Lt,[t("ul",Pt,[(r(!0),n(g,null,h(x(o).todos,l=>{var s,e;return r(),n("li",{key:l.id,class:"flex justify-between items-start gap-4 p-4 bg-white border rounded-lg shadow-sm hover:shadow-md transition"},[t("div",null,[t("h3",{class:y(["font-medium text-gray-800",{"line-through text-gray-400":l.status==="COMPLETED"}])},i(l.message),3),l.status==="COMPLETED"?(r(),n("span",Bt," âœ… Completed ")):D("",!0),t("p",qt,[t("span",Nt,i(l.todoable_type.split("\\").pop()),1),t("span",Et,i(((s=l.todoable)==null?void 0:s.title)||"No title"),1)]),t("p",Vt,[d[0]||(d[0]=t("i",{class:"far fa-user-friends"},null,-1)),t("span",Ot,i((e=l==null?void 0:l.user)==null?void 0:e.name),1)])])])}),128))])]))]))}},It={class:"space-y-4"},zt={class:"space-y-4"},At={class:"flex items-start justify-between"},Gt={class:"space-y-1"},Ht={class:"flex items-center gap-2"},Ut={class:"text-xs font-medium text-gray-500"},Jt={class:"font-medium text-gray-800"},Kt={class:"text-sm text-gray-500"},Qt={class:"text-right"},Wt={class:"text-sm"},Xt={class:"font-medium"},Yt={class:"text-gray-500"},Zt={class:"mt-1 h-2 w-24 bg-gray-200 rounded"},te={__name:"RequirementsTab",setup(m){const o=G(),{requirements:_}=w(o);b(()=>{o.fetchRequirements()});const d=l=>{switch(l){case"High":return"border-red-500 text-red-500";case"Medium":return"border-yellow-500 text-yellow-500";default:return"border-gray-300 text-gray-500"}};return(l,s)=>(r(),n("div",It,[s[0]||(s[0]=t("h2",{class:"text-xl font-semibold"},"Project Requirements",-1)),t("div",zt,[(r(!0),n(g,null,h(x(_),e=>{var a;return r(),n("div",{key:e.id,class:"rounded-lg border bg-white p-4 shadow hover:bg-gray-50 transition-colors"},[t("div",At,[t("div",Gt,[t("div",Ht,[t("span",Ut,i(e.id),1),t("span",{class:y(["text-xs px-2 py-1 rounded border",d(e.priority)])},i(e.priority),3)]),t("h3",Jt,i(e.title),1),t("p",Kt,"Project: "+i((a=e.project)==null?void 0:a.name),1)]),t("div",Qt,[t("div",Wt,[t("span",Xt,i(e.completed_tasks_count),1),t("span",Yt,"/"+i(e.tasks_count)+" tasks",1)]),t("div",Zt,[t("div",{class:"h-full bg-blue-500 rounded",style:B({width:e.completed_tasks_count/e.tasks_count*100+"%"})},null,4)])])])])}),128))])]))}},ee={class:"space-y-4"},se={class:"space-y-4"},oe={__name:"TasksTab",setup(m){const o=U(),{tasks:_,taskListTree:d}=w(o);return b(()=>{o.fetchTasks()}),(l,s)=>(r(),n("div",ee,[s[0]||(s[0]=t("h2",{class:"text-xl font-semibold"},"Tasks",-1)),t("div",se,[(r(!0),n(g,null,h(x(d),e=>(r(),n("div",{key:e.id,class:"rounded-lg border bg-white overflow-hidden"},[p(H,{task:e,class:"!border-0","hide-buttons":""},null,8,["task"])]))),128))])]))}},ae={class:"space-y-4"},re={class:"flex gap-2 border rounded-md bg-white p-2"},ne=["onClick"],le={class:"bg-white rounded-lg p-4 shadow"},ie={__name:"Tabs",setup(m){const o=q(),_=N(),d=[{label:"Projects",value:"projects",icon:"fa-folder"},{label:"Requirements",value:"requirements",icon:"fa-file-alt"},{label:"Tasks",value:"tasks",icon:"fa-tasks"},{label:"Bugs",value:"bugs",icon:"fa-bug"},{label:"Meetings",value:"meetings",icon:"fa-users"},{label:"Reports",value:"reports",icon:"fa-file-chart-line"}],l=C(_.query.tab||"projects");E(l,e=>{o.push({query:{tab:e}})});const s={projects:Dt,requirements:te,tasks:oe,reports:Ft,bugs:dt,meetings:vt};return(e,a)=>(r(),n("div",ae,[t("div",re,[(r(),n(g,null,h(d,c=>t("button",{key:c.value,onClick:u=>l.value=c.value,class:y(["flex items-center gap-2 px-4 py-2 rounded-md text-sm font-medium",l.value===c.value?"bg-blue-600 text-white shadow":"text-gray-600 hover:bg-gray-100"])},[t("i",{class:y(["fas",c.icon,"text-sm"])},null,2),T(" "+i(c.label),1)],10,ne)),64))]),t("div",le,[(r(),V(O(s[l.value])))])]))}},ce=J(ie,[["__scopeId","data-v-16f7d2bd"]]),de={class:"flex min-h-screen flex-col bg-slate-50"},ue={class:"flex flex-1 flex-col gap-4 p-4 md:gap-8 md:p-6"},_e={class:"grid gap-4 md:grid-cols-2 lg:grid-cols-5"},Re={__name:"TaskManagementView",setup(m){const o=C({}),_=M();return b(async()=>{try{const d=await _.fetchTaskManagementSummary();o.value=d.data}catch(d){console.error("Failed to fetch summary:",d)}}),(d,l)=>{const s=F("RouterLink");return r(),n("div",de,[t("main",ue,[l[0]||(l[0]=t("div",{class:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between"},[t("div",null,[t("h1",{class:"text-2xl font-bold tracking-tight"},"Task Management"),t("p",{class:"text-sm text-gray-500"}," Manage your projects, requirements, tasks, bugs, and meetings. ")])],-1)),t("div",_e,[p(s,{to:{name:"ProjectList"}},{default:v(()=>{var e,a,c;return[p($,{title:"Projects",value:(e=o.value.projects)==null?void 0:e.total,subtext:`${(c=(a=o.value)==null?void 0:a.projects)==null?void 0:c.active} active projects`,icon:"folder",color:"text-cyan-500"},null,8,["value","subtext"])]}),_:1}),p(s,{to:{name:"RequirementList"}},{default:v(()=>{var e,a,c,u;return[p($,{title:"Requirements",value:(a=(e=o.value)==null?void 0:e.requirements)==null?void 0:a.total,subtext:`${(u=(c=o.value)==null?void 0:c.requirements)==null?void 0:u.completed} completed`,icon:"file-alt",color:"text-indigo-500"},null,8,["value","subtext"])]}),_:1}),p(s,{to:{name:"TaskList"}},{default:v(()=>{var e,a,c,u;return[p($,{title:"Tasks",value:(a=(e=o.value)==null?void 0:e.tasks)==null?void 0:a.total,subtext:`${(u=(c=o.value)==null?void 0:c.tasks)==null?void 0:u.completed} in completed`,icon:"tasks",color:"text-purple-500"},null,8,["value","subtext"])]}),_:1}),p(s,{to:{name:"BugList"}},{default:v(()=>{var e,a,c,u;return[p($,{title:"Bugs",value:(a=(e=o.value)==null?void 0:e.bugs)==null?void 0:a.total,subtext:`${(u=(c=o.value)==null?void 0:c.bugs)==null?void 0:u.solved} solved`,icon:"bug",color:"text-red-500"},null,8,["value","subtext"])]}),_:1}),p(s,{to:{name:"MeetingList"}},{default:v(()=>{var e,a,c,u;return[p($,{title:"Meetings",value:(a=(e=o.value)==null?void 0:e.meetings)==null?void 0:a.total,subtext:`${(u=(c=o.value)==null?void 0:c.meetings)==null?void 0:u.today} today`,icon:"users",color:"text-teal-500"},null,8,["value","subtext"])]}),_:1})]),p(ce)])])}}};export{Re as default};
