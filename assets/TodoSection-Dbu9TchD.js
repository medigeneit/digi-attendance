import{L as Q}from"./LoaderView-FzkbNuqV.js";import{r as L,x as j,e as K,A as Y,c as f,o as d,I as O,a as e,F as V,y as W,t as _,g as k,w as D,q as z,n as P,f as F,H as de,i as M,k as x,J as ae,j as U,h as J,v as Z,Z as G,$ as H}from"./index-BHXi2t5M.js";import{f as ue,b as X,g as le}from"./datetime-l2Vm98rT.js";import{u as B}from"./useTodoStore-CGSnt0Ud.js";import{_ as ce}from"./UserChip-BuBZP13W.js";import{O as te}from"./OverlyModal-CxYVLavw.js";const me={class:"grid grid-cols-7 *:text-center *:p-2 *:border-r *:border-b *:text-blue-800 *:text-sm"},ye={class:"flex flex-col"},ve={key:0,class:"p-2 border-r border-t"},pe={__name:"CalenderView",props:{month:{type:String,required:!0,validator:c=>/^\d{4}-(0[1-9]|1[0-2])$/.test(c)}},emits:["change"],setup(c,{emit:C}){const a=c,l=C,u=L(),n=L(),i=L(),r=L(),o=["Saturday","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday"];function m(g,s,h,w){const b=[];for(let N=h-1;N>=0;N--){const v=w-N,$=new Date(g,s-1,v);b.push({date:$,day:$.getDate(),month:$.getMonth()+1,year:$.getFullYear(),isCurrentMonth:!1})}return b}function t(g,s,h){const w=[];for(let b=1;b<=h;b++){const v={date:new Date(g,s,b),day:b,month:s+1,year:g,isCurrentMonth:!0};w.push(v)}return w}function y(g,s,h){const w=[...g],b=Math.ceil(w.length/7)*7,N=1;for(let v=0;w.length<b;v++){const $=new Date(s,h+1,N+v);w.push({date:$,day:$.getDate(),month:$.getMonth()+1,year:$.getFullYear(),isCurrentMonth:!1})}return w}function p(g,s){const h=new Date(g,s,1),b=new Date(g,s+1,0).getDate(),v=(h.getDay()+1)%7,I=new Date(g,s,0).getDate();let T=[];T=[...m(g,s,v,I)];const R=t(g,s,b);return i.value=R[0],r.value=R[R.length-1],T=[...T,...R],T=[...y(T,g,s)],u.value=T[0],n.value=T[T.length-1],T}const S=j(()=>{const[g,s]=a.month.split("-"),h=parseInt(g),w=parseInt(s)-1;return console.log({yearStr:g,monthStr:s}),p(h,w)}),E=j(()=>{const g=S.value,s=[];for(let h=0;h<g.length;h+=7)s.push(g.slice(h,h+7));return s});function A(){l("change",{gridStartDate:u.value,gridEndDate:n.value,startOfMonth:i.value,endOfMonth:r.value})}return K(()=>A()),Y(()=>a.month,A),(g,s)=>(d(),f("div",null,[O(g.$slots,"calender-top"),e("div",me,[(d(),f(V,null,W(o,h=>e("div",{key:h},_(h),1)),64))]),e("div",ye,[(d(!0),f(V,null,W(E.value,(h,w)=>(d(),f("div",{class:"week grid grid-cols-7 min-h-28 items-stretch",key:w},[(d(!0),f(V,null,W(h,(b,N)=>O(g.$slots,"date",{key:N,day:b.day,month:b.month,year:b.year,weekday:(b.date.getDay()+1)%7,isCurrentMonth:b.isCurrentMonth,yearMonthDate:`${b.year}-${String(b.month).padStart(2,"0")}-${String(b.day).padStart(2,"0")}`},()=>{var v;return[b!=null&&b.date?(d(),f("div",ve,_((v=b==null?void 0:b.date)==null?void 0:v.getDate()),1)):k("",!0)]})),128))]))),128))]),O(g.$slots,"calender-bottom")]))}},fe={class:"px-4 py-2 flex items-center bg-gray-50 group gap-2"},ge=["value"],be=["value"],he=["value"],ke=["value"],we=["disabled"],Ce={key:4,class:"ml-4 md:ml-auto flex items-center gap-2"},xe={key:5,class:"ml-4 md:ml-auto flex items-center gap-2"},De={__name:"TodoHeading",props:{selected:{type:Object,default:()=>({type:"month-view",month:"",day:"",year:"",week:""})},loading:{type:Boolean,default:!1}},emits:["reloadClick",,"change"],setup(c,{emit:C}){const a=c,l=[{value:"month-view",label:"Monthly"},{value:"day-view",label:"Daily"}],u=C,n=L();function i(s){n.value=s,u("change",{...a.selected,type:s})}Y(()=>{var s;return(s=a.selected)==null?void 0:s.type},s=>i(s),{immediate:!0});const r=j(()=>n.value=="month-view"&&a.selected.year&&a.selected.month?[a.selected.year,a.selected.month-1,1]:n.value=="day-view"&&a.selected.year&&a.selected.month&&a.selected.day?[a.selected.year,a.selected.month-1,a.selected.day]:[new Date().getFullYear(),new Date().getMonth(),new Date().getDate()]);function o(){n.value=="month-view"&&E(new Date)}function m(){if(n.value=="month-view"){const s=new Date(...r.value);s.setMonth(s.getMonth()+1),E(s)}}function t(){if(n.value=="month-view"){const s=new Date(...r.value);s.setMonth(s.getMonth()-1),E(s)}}function y(){n.value=="day-view"&&E(new Date)}function p(){if(n.value=="day-view"){const s=new Date(...r.value);s.setDate(s.getDate()+1),E(s)}}function S(){if(n.value=="day-view"){const s=new Date(...r.value);s.setDate(s.getDate()-1),E(s)}}function E(s){u("change",{type:n.value,month:s.getMonth()+1,day:s.getDate(),year:s.getFullYear(),week:s.getDay()})}const A=j(()=>n.value=="month-view"?`${a.selected.year}-${a.selected.month.toString().padStart(2,"0")}`:n.value=="day-view"?`${a.selected.year}-${a.selected.month.toString().padStart(2,"0")}-${a.selected.day.toString().padStart(2,"0")}`:a.selected),g=s=>{var h,w;if(n.value=="month-view"){const[b,N]=(h=s.target.value)==null?void 0:h.split("-").map(Number),v=new Date(b,N-1,1);E(v)}if(n.value=="day-view"){const b=new Date((w=s.target)==null?void 0:w.value);E(b)}};return(s,h)=>(d(),f("div",null,[e("div",fe,[O(s.$slots,"before",{selected:c.selected}),O(s.$slots,"typeSelection",{selected:c.selected,types:l,changeType:i},()=>[e("select",{class:"px-2 h-7 border rounded",value:n.value,onChange:h[0]||(h[0]=w=>i(w.target.value))},[(d(),f(V,null,W(l,w=>e("option",{value:w.value,key:w.id},_(w.label),9,be)),64))],40,ge)]),n.value=="month-view"?(d(),f("input",{key:0,type:"month",value:A.value,onInput:g,class:"border px-2 rounded"},null,40,he)):k("",!0),n.value=="day-view"?(d(),f("input",{key:1,type:"date",value:A.value,onInput:g,class:"border px-2 rounded"},null,40,ke)):k("",!0),n.value=="month-view"?(d(),f("button",{key:2,class:"btn-3 mx-4 h-7",onClick:D(o,["prevent"])}," Current Month ")):k("",!0),n.value=="day-view"?(d(),f("button",{key:3,class:"btn-3 mx-4 h-7",onClick:D(y,["prevent"])}," Today ")):k("",!0),e("button",{class:z(["btn-3 px-2 py-2 mx-4 size-7 disabled:text-gray-300 disabled:border-gray-300",{"animate-spin text-gray-300 border-gray-300 !bg-opacity-0":c.loading}]),onClick:h[1]||(h[1]=D(w=>u("reloadClick"),["prevent"])),disabled:c.loading},h[2]||(h[2]=[e("i",{class:"fas fa-redo-alt"},null,-1)]),10,we),n.value=="month-view"?(d(),f("div",Ce,[e("button",{class:"btn-2 h-7",onClick:D(t,["prevent"])}," Previous Month "),e("button",{class:"btn-2 h-7",onClick:D(m,["prevent"])},"Next Month")])):k("",!0),n.value=="day-view"?(d(),f("div",xe,[e("button",{class:"btn-2 h-7",onClick:D(S,["prevent"])},"Previous Day"),e("button",{class:"btn-2 h-7",onClick:D(p,["prevent"])},"Next Day")])):k("",!0),O(s.$slots,"after",{selected:c.selected})]),O(s.$slots,"bottom",{selected:c.selected})]))}},$e={key:0,class:"fa fa-exclamation-circle",title:"Pending"},Se={key:1,class:"fa fa-exclamation-square",title:"Wording"},_e={key:2,class:"fa fa-check-square",title:"Completed"},ne={__name:"TodoStatusIcon",props:{todo:{type:Object,required:!0}},setup(c){const C=c,a=j(()=>{switch(C.todo.status){case"PENDING":return"text-red-400";case"WORKING":return"text-yellow-400";case"COMPLETED":return"text-green-400"}return""});return(l,u)=>(d(),f("span",{class:z(a.value)},[c.todo.status=="PENDING"?(d(),f("i",$e)):k("",!0),c.todo.status=="WORKING"?(d(),f("i",Se)):k("",!0),c.todo.status=="COMPLETED"?(d(),f("i",_e)):k("",!0)],2))}},Te=["title","onClick"],Me={class:"line-clamp-1"},Ie={key:0,class:"text-purple-600 text-center"},ie={__name:"TodosInDate",props:{date:{type:String,required:!0},maxItems:{type:[Number,String],default:3}},emits:["clickTodo"],setup(c,{emit:C}){const a=c,l=C,{getTodosByDate:u}=B(),n=j(()=>{let i=[],r=!1,o=[];if(typeof u=="function"){const m=u(a.date);if(o=Array.isArray(m)?m:[],a.maxItems==="all")return{all:o,items:o,moreItemsCount:0};i=o.slice(0,a.maxItems),r=o.length-i.length}return{all:o,items:i,moreItemsCount:r}});return(i,r)=>(d(),f("div",null,[n.value.items.length===0?O(i.$slots,"noTodos",{key:0},()=>[r[0]||(r[0]=e("div",{class:"text-gray-400 text-center"},"No todos",-1))]):(d(),f(V,{key:1},[(d(!0),f(V,null,W(n.value.items,o=>O(i.$slots,"todoItem",{key:o.id,todo:o,moreItemsCount:n.value.moreItemsCount},()=>{var m,t,y,p;return[e("div",{title:`${o==null?void 0:o.title} ${o!=null&&o.user?`
by:`:""} ${(m=o==null?void 0:o.user)==null?void 0:m.name} ${(t=o==null?void 0:o.user)!=null&&t.department?`
DEPT:`:""} ${(p=(y=o.user)==null?void 0:y.department)==null?void 0:p.name}`,class:z(["px-1 mb-2 text-sm rounded cursor-pointer flex items-center gap-2",{"bg-sky-50 text-sky-900 hover:bg-sky-700 hover:text-white border border-sky-300":o.status!=="COMPLETED","bg-green-500 text-white":o.status==="COMPLETED"}]),onClick:D(S=>l("clickTodo",o),["prevent","stop"])},[P(ne,{todo:o,class:z(["text-sm",[o.status=="COMPLETED"?"!text-white":""]])},null,8,["todo","class"]),e("div",Me,_(o.title),1),o.user?(d(),F(de,{key:0,user:o.user,size:"xsmall",class:"ml-auto"},null,8,["user"])):k("",!0)],10,Te)]})),128)),n.value.moreItemsCount>0?(d(),f("div",Ie," + "+_(n.value.moreItemsCount)+" more todo"+_(n.value.moreItemsCount>1?"s":""),1)):k("",!0)],64))]))}},Ee={class:"relative"},Oe=["onClick","onKeypress"],Ne={class:"flex items-center justify-center"},Le=["onClick"],Pe={__name:"TodosInCalenderView",props:{month:{type:String,required:!0,validator:c=>/^\d{4}-(0[1-9]|1[0-2])$/.test(c)}},emits:["dateClick","clickTodo","clickDateCell"],setup(c,{emit:C}){const a=C;function l(n,i){n.isTrusted&&n.ctrlKey&&n.which==10&&a("dateClick",i)}function u(n){const[i,r,o]=String(n).split("-").map(Number),m=new Date(i,r-1,o);return ue(m)}return(n,i)=>(d(),f("div",Ee,[c.month?(d(),F(pe,{key:0,month:c.month,class:"border-t border-blue-200/50 relative"},{date:M(({day:r,yearMonthDate:o,isCurrentMonth:m})=>[e("div",{tabindex:"0",class:z(["border p-4 cursor-pointer group/date relative",{"bg-rose-50  border-rose-300 focus:bg-rose-50 focus:outline-rose-400":u(o),"hover:bg-sky-50  hover:border-blue-300 focus:bg-sky-50 focus:outline-blue-400":!u(o)}]),onClick:D(t=>a("dateClick",o),["prevent","stop"]),onKeypress:D(t=>l(t,o),["prevent"])},[e("button",{tabindex:"1",class:z([{"text-gray-300":!m,"text-sky-400":m},"text-center mb-2 font-semibold hover:bg-sky-200 w-full rounded"])},_(r),3),e("div",null,[P(ie,{date:o,onClickTodo:i[0]||(i[0]=t=>a("clickTodo",t))},{noTodos:M(()=>i[1]||(i[1]=[e("span",null,null,-1)])),_:2},1032,["date"])]),e("div",Ne,[e("button",{onClick:D(t=>a("clickDateCell",o),["prevent","stop"]),class:"btn-3 !py-1 invisible group-hover/date:visible text-sm text-red-800/40"},i[2]||(i[2]=[e("i",{class:"fas fa-plus"},null,-1),e("span",{class:"hidden lg:inline whitespace-nowrap"}," Add todo ",-1)]),8,Le)])],42,Oe)]),_:1},8,["month"])):k("",!0)]))}},Fe={class:"relative bg-white p-4"},je={class:"max-w-6xl mx-auto border rounded my-10"},Ae={class:"mb-4 text-gray-700 border-b py-2 px-4 flex items-center"},Re={class:"text-lg font-semibold"},Ue={class:"ml-auto"},Ve=["onClick"],qe={class:"ml-4"},ze={class:"line-clamp-2"},Be={key:0,class:"mt-1 flex items-center gap-2"},We={class:"border border-sky-400 rounded-full text-sky-500 font-semibold bg-sky-50 px-1 py-0.5 text-xs inline-block"},Ke={key:0,class:"line-clamp-2 ml-4 text-gray-500"},Ge={class:"ml-auto flex items-center gap-2"},He=["onClick"],Ye=["onClick"],Je=["onClick"],Ze={__name:"TodosInDailyView",props:{date:{type:String,required:!0}},emits:["clickTodo","clickAdd","clickEdit","clickDelete","clickChangeStatus","backClick","update"],setup(c,{emit:C}){const a=c,l=C,u=j(()=>new Date(a.date)),n=B();async function i(o){confirm(`Are your sure want to delete todo
'${o==null?void 0:o.title}'`)&&(await n.deleteTodo(o.id),l("update"))}async function r(o){confirm(`Are your sure want to compete todo
'${o==null?void 0:o.title}'`)&&(await n.updateTodoStatus(o.id,"COMPLETED"),l("update"))}return(o,m)=>(d(),f("div",Fe,[e("div",je,[e("div",Ae,[e("button",{class:"fa fa-arrow-left btn-icon mr-2",onClick:m[0]||(m[0]=D(t=>l("backClick"),["prevent"]))}),e("div",Re,_(x(X)(u.value,{weekDay:"long"})),1),e("div",Ue,[e("button",{class:"btn btn-icon",onClick:m[1]||(m[1]=D(t=>l("clickAdd",a.date),["prevent"]))},m[2]||(m[2]=[e("i",{class:"fas fa-plus"},null,-1)]))])]),P(ie,{date:c.date,"max-items":10,class:"my-8 w-full px-4"},{todoItem:M(({todo:t})=>{var y,p;return[e("div",{class:"border rounded px-4 py-3 my-4 hover:bg-sky-50 cursor-pointer flex items-center",onClick:D(S=>l("clickTodo",t),["prevent"])},[P(ne,{todo:t},null,8,["todo"]),e("div",qe,[e("div",ze,_(t.title),1),t.user?(d(),f("div",Be,[P(ce,{user:t.user,"avatar-size":"xsmall"},null,8,["user"]),e("div",We,_((p=(y=t.user)==null?void 0:y.department)==null?void 0:p.name),1)])):k("",!0)]),t.todo_type&&t.todo_type_id?(d(),f("div",Ke,_(t.todo_type)+" id: "+_(t.todo_type_id),1)):k("",!0),e("div",Ge,[t.status==="WORKING"?(d(),f("button",{key:0,class:"btn-icon bg-green-400 text-white hover:bg-green-600 hover:text-white",onClick:D(()=>r(t),["prevent","stop"])},m[3]||(m[3]=[e("i",{class:"fas fa-check"},null,-1)]),8,He)):k("",!0),e("button",{class:"btn-icon bg-sky-400 text-white hover:bg-sky-600 hover:text-white",onClick:D(S=>l("clickEdit",t),["prevent","stop"])},m[4]||(m[4]=[e("i",{class:"fas fa-pen"},null,-1)]),8,Ye),e("button",{class:"btn-icon bg-red-400 text-white hover:bg-red-600 hover:text-white",onClick:D(()=>i(t),["prevent","stop"])},m[5]||(m[5]=[e("i",{class:"fas fa-trash-alt"},null,-1)]),8,Je)])],8,Ve)]}),noTodos:M(()=>m[6]||(m[6]=[e("div",{class:"flex min-h-[38vh] items-center justify-center text-gray-400 text-center rounded-md"}," No Todos ",-1)])),_:1},8,["date"])])]))}},Qe={class:"bg-white border-t px-4 py-4 sticky bottom-0 rounded-b-md"},Xe={key:0,class:"mb-4 text-red-500 font-medium"},et={key:1,class:"mb-4 text-blue-500 font-medium"},tt={class:"flex justify-between items-center gap-4"},nt=["disabled"],re={__name:"FormHandler",props:{isSubmitting:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},error:{type:String,default:""}},emits:["submit","clickCancel"],setup(c,{emit:C}){const a=C;return(l,u)=>(d(),f("form",{onSubmit:u[1]||(u[1]=D(n=>a("submit"),["prevent"]))},[O(l.$slots,"default"),e("div",Qe,[c.error?(d(),f("div",Xe,_(c.error),1)):k("",!0),c.isSubmitting?(d(),f("div",et,"Saving changes...")):k("",!0),O(l.$slots,"footer",{},()=>[e("div",tt,[e("button",{type:"button",onClick:u[0]||(u[0]=n=>a("clickCancel")),class:"btn-3"},"Cancel"),e("button",{disabled:c.isSubmitting||c.isLoading,type:"submit",class:"btn-2"},_(c.isSubmitting?"Saving...":"Save"),9,nt)])])])],32))}},ot={class:""},st={class:"p-4 min-h-[10vh] max-h-[50vh] overflow-y-auto"},at={class:"mb-2"},lt={class:"mb-4"},it={class:"mb-4"},rt={__name:"TodoAddForm",props:{date:{type:String,default:le(new Date)}},emits:["update","cancelClick"],setup(c,{emit:C}){const a=c,l=L(),u=L(),n=B(),i=C,r=L({title:"",date:a.date||"",task_id:""});async function o(){try{l.value="submitting",await n.createTodo(r.value),i("update")}finally{l.value=""}}const m=j(()=>new Date(a.date));return K(async()=>{var t;await ae(),(t=u.value)==null||t.focus()}),(t,y)=>(d(),f("div",ot,[x(n).loading?(d(),F(Q,{key:0,class:"absolute inset-0 bg-opacity-80 text-center py-4 text-gray-500 z-10 flex items-center justify-center"},{default:M(()=>y[3]||(y[3]=[U(" Loading... ")])),_:1,__:[3]})):k("",!0),P(re,{onSubmit:o,onClickCancel:y[2]||(y[2]=p=>i("cancelClick")),isSubmitting:l.value=="submitting",error:x(n).error,class:"rounded-md relative"},{default:M(()=>[y[7]||(y[7]=e("div",{class:"border-b py-2 px-4"},[e("h2",{class:"text-xl font-semibold"},"Add Todo")],-1)),e("div",st,[e("div",at,[y[4]||(y[4]=e("span",{class:"font-semibold"}," Date ",-1)),e("span",null,_(x(X)(m.value,{weekDay:"long"})),1)]),e("div",lt,[y[5]||(y[5]=e("label",{class:"block text-gray-700 font-medium mb-2"},"Title",-1)),J(e("input",{ref_key:"titleRef",ref:u,"onUpdate:modelValue":y[0]||(y[0]=p=>r.value.title=p),required:"",placeholder:"Enter todo title",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[Z,r.value.title]])]),e("div",it,[y[6]||(y[6]=e("label",{class:"block text-gray-700 font-medium mb-2"},"Task ID (optional)",-1)),J(e("input",{"onUpdate:modelValue":y[1]||(y[1]=p=>r.value.task_id=p),placeholder:"Enter a task id",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[Z,r.value.task_id]])])])]),_:1,__:[7]},8,["isSubmitting","error"])]))}},dt={class:"relative"},ut={class:"p-4 min-h-[10vh] max-h-[50vh] overflow-y-auto"},ct={class:"mb-2"},mt={class:"mb-4"},yt={class:"mb-4"},vt={__name:"TodoEditForm",props:{date:{type:String,default:le(new Date)},todo:{type:Object,default:()=>{}}},emits:["update","cancelClick"],setup(c,{emit:C}){const a=c,l=L(),u=L(),n=B(),i=C,r=L({title:"",todo_type:"task",todo_type_id:""});async function o(){var y,p,S;await n.fetchTodo((y=a.todo)==null?void 0:y.id),r.value.title=(p=n.todo)==null?void 0:p.title,r.value.todo_type_id=(S=n.todo)==null?void 0:S.todoable_id}async function m(){l.value="submitting";try{await n.updateTodo(a.todo.id,r.value),i("update")}finally{l.value=""}}const t=j(()=>new Date(a.todo.date));return K(async()=>{var y;await o(),await ae(),(y=u.value)==null||y.focus()}),(y,p)=>(d(),f("div",dt,[x(n).loading?(d(),F(Q,{key:0,class:"absolute inset-0 bg-opacity-80 text-center py-4 text-gray-500 z-10 flex items-center justify-center"},{default:M(()=>p[3]||(p[3]=[U(" Loading... ")])),_:1,__:[3]})):k("",!0),P(re,{onSubmit:m,onClickCancel:p[2]||(p[2]=S=>i("cancelClick")),isSubmitting:l.value=="submitting",isLoading:x(n).loading,error:x(n).error},{default:M(()=>[p[7]||(p[7]=e("div",{class:"border-b py-2 px-4"},[e("h2",{class:"text-xl font-semibold"},"Edit Todo")],-1)),e("div",ut,[e("div",ct,[p[4]||(p[4]=e("span",{class:"font-semibold"}," Date ",-1)),e("span",null,_(x(X)(t.value,{weekDay:"long"})),1)]),e("div",mt,[p[5]||(p[5]=e("label",{class:"block text-gray-700 font-medium mb-2"},"Title",-1)),J(e("input",{ref_key:"titleRef",ref:u,"onUpdate:modelValue":p[0]||(p[0]=S=>r.value.title=S),required:"",placeholder:"Enter todo title",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[Z,r.value.title]])]),e("div",yt,[p[6]||(p[6]=e("label",{class:"block text-gray-700 font-medium mb-2"},"Task ID (optional)",-1)),J(e("input",{"onUpdate:modelValue":p[1]||(p[1]=S=>r.value.todo_type_id=S),placeholder:"Enter a task id",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[Z,r.value.todo_type_id]])])])]),_:1,__:[7]},8,["isSubmitting","isLoading","error"])]))}},pt={class:"relative"},ft={class:"min-h-[10vh] max-h-[50vh] overflow-y-auto p-4"},gt={class:"mb-4"},bt={class:"mb-4"},ht={class:"flex items-center gap-4"},kt={key:0,class:"flex items-center gap-2"},wt={class:"flex justify-between items-center gap-4 py-4 px-4 border-t"},Ct={class:"ml-auto flex items-center gap-2"},xt={__name:"TodoShow",props:{todo:{type:Object,default:()=>{}}},emits:["cancelClick","clickEdit","update"],setup(c,{emit:C}){const a=c,l=B(),u=C;async function n(){var m;await l.fetchTodo((m=a.todo)==null?void 0:m.id)}const i=j(()=>{var m,t;return(m=l.todo)!=null&&m.date?new Date((t=l.todo)==null?void 0:t.date):null});async function r(m){var t;confirm(`Are your sure want to delete todo
'${(t=l.todo)==null?void 0:t.title}'`)&&(await l.deleteTodo(m.id),u("update"))}async function o(m,t){var y;confirm(`Are your sure want to compete todo
'${(y=l.todo)==null?void 0:y.title}'`)&&(await l.updateTodoStatus(m.id,t),u("update"))}return K(async()=>{await n()}),(m,t)=>{var y,p,S,E,A,g;return d(),f("div",pt,[x(l).loading?(d(),F(Q,{key:0,class:"absolute inset-0 bg-opacity-80 text-center py-4 text-gray-500 z-10 flex items-center justify-center"},{default:M(()=>t[5]||(t[5]=[U(" Loading... ")])),_:1,__:[5]})):k("",!0),e("div",null,[t[11]||(t[11]=e("div",{class:"border-b py-2 px-4"},[e("h2",{class:"text-xl font-semibold"},"Show Todo")],-1)),e("div",ft,[e("div",gt,[t[6]||(t[6]=e("div",{class:"font-semibold text-xs text-gray-500"},"Date",-1)),e("span",null,_(x(X)(i.value,{weekDay:"long"})),1)]),e("div",bt,[t[7]||(t[7]=e("div",{class:"text-xs text-gray-500"},"Todo",-1)),U(" "+_((y=x(l).todo)==null?void 0:y.title),1)]),e("div",null,[t[10]||(t[10]=e("div",{class:"text-xs text-gray-500"},"Status",-1)),e("div",ht,[e("div",null,[(p=x(l))!=null&&p.todo?(d(),F(ne,{key:0,todo:(S=x(l))==null?void 0:S.todo},null,8,["todo"])):k("",!0),U(" "+_((E=x(l).todo)==null?void 0:E.status),1)]),x(l).loading?k("",!0):(d(),f("div",kt,[((A=x(l).todo)==null?void 0:A.status)==="PENDING"?(d(),f("button",{key:0,class:"btn-2 from-yellow-700 to-yellow-500 text-white hover:bg-green-600 hover:text-white",onClick:t[0]||(t[0]=D(()=>o(x(l).todo,"WORKING"),["prevent","stop"]))},t[8]||(t[8]=[e("i",{class:"fas fa-exclamation-circle"},null,-1),U(" Change to Working ")]))):k("",!0),((g=x(l).todo)==null?void 0:g.status)==="WORKING"?(d(),f("button",{key:1,class:"btn-2 from-green-700 to-green-300 text-white hover:bg-green-600 hover:text-white",onClick:t[1]||(t[1]=D(()=>o(x(l).todo,"COMPLETED"),["prevent","stop"]))},t[9]||(t[9]=[e("i",{class:"fas fa-check"},null,-1),U(" Make Complete ")]))):k("",!0)]))])])])]),e("div",wt,[e("button",{type:"button",onClick:t[2]||(t[2]=s=>u("cancelClick")),class:"btn-3"},"Cancel"),e("div",Ct,[e("button",{class:"btn-2 bg-sky-400 text-white hover:bg-sky-600 hover:text-white",onClick:t[3]||(t[3]=D(s=>u("clickEdit",x(l).todo),["prevent","stop"]))},t[12]||(t[12]=[e("i",{class:"fas fa-pen"},null,-1),U(" Edit ")])),e("button",{class:"btn-2-red",onClick:t[4]||(t[4]=D(()=>r(x(l).todo),["prevent","stop"]))},t[13]||(t[13]=[e("i",{class:"fas fa-trash-alt"},null,-1),U(" Delete ")]))])])])}}},Dt={__name:"TodoCreateEditShow",props:{todoModal:{type:Object,required:!0}},emits:["cancelClick","update","clickEdit","clickDelete","clickChangeStatus"],setup(c,{emit:C}){const a=C;function l(){a("update")}return(u,n)=>(d(),f(V,null,[c.todoModal.action=="add"?(d(),F(te,{key:0},{default:M(()=>{var i;return[P(rt,{onCancelClick:n[0]||(n[0]=r=>a("cancelClick")),onUpdate:l,date:(i=c.todoModal)==null?void 0:i.date},null,8,["date"])]}),_:1})):k("",!0),c.todoModal.action=="edit"?(d(),F(te,{key:1},{default:M(()=>{var i;return[P(vt,{onCancelClick:n[1]||(n[1]=r=>a("cancelClick")),onUpdate:l,todo:(i=c.todoModal)==null?void 0:i.todo},null,8,["todo"])]}),_:1})):k("",!0),c.todoModal.action=="show"?(d(),F(te,{key:2},{default:M(()=>{var i;return[P(xt,{onCancelClick:n[2]||(n[2]=r=>a("cancelClick")),onUpdate:l,onClickEdit:n[3]||(n[3]=r=>a("clickEdit",r)),onClickDelete:n[4]||(n[4]=r=>a("clickDelete",r)),onClickChangeStatus:n[5]||(n[5]=(r,o)=>a("clickChangeStatus",r,o)),todo:(i=c.todoModal)==null?void 0:i.todo},null,8,["todo"])]}),_:1})):k("",!0)],64))}},$t={class:"border bg-white relative"},Ot={__name:"TodoSection",props:{year:{type:Number,default:()=>new Date().getFullYear()},month:{type:Number,default:()=>new Date().getMonth()+1},day:{type:Number,default:()=>new Date().getDate()},week:{type:Number,default:()=>new Date().getDay()},type:{type:String,default:"month-view"},listUserRole:{type:String,default:"employee"}},emits:["changeInput"],setup(c,{emit:C}){const a=new Date,l=c,u=L({type:"month-view",month:a.getMonth()+1,day:a.getDate(),year:a.getFullYear(),week:a.getDay()}),n=C;Y(()=>({...u.value}),v=>{n("changeInput",v)}),Y(()=>({year:l.year,month:l.month,day:l.day,week:l.week,type:l.type}),v=>{u.value={...v}},{immediate:!0});const i=L({action:null}),r=B();async function o(){await N()}function m(){i.value={...i.value,action:""}}async function t(v,$){await r.updateTodoStatus(v,$)}async function y(v){await r.deleteTodo(v)}function p(){u.value={...u.value,type:"month-view"}}function S(v){u.value={...u.value,...v}}function E(v){const[$,I,T]=v.split("-").map(Number);u.value={...u.value,type:"day-view",year:$,month:I,day:T}}function A(v){i.value={...i.value,action:"show",todo:v}}function g(v){i.value={...i.value,action:"edit",todo:v}}function s(v){i.value={...i.value,action:"add",date:v}}function h(){i.value={action:null,todo:null}}const w=j(()=>{var T,q,R,ee,oe,se;const v=(q=(T=u.value)==null?void 0:T.year)==null?void 0:q.toString(),$=(ee=(R=u.value)==null?void 0:R.month)==null?void 0:ee.toString().padStart(2,"0"),I=(se=(oe=u.value)==null?void 0:oe.day)==null?void 0:se.toString().padStart(2,"0");return`${v}-${$}-${I}`}),b=j(()=>{var I,T,q,R;const v=(T=(I=u.value)==null?void 0:I.year)==null?void 0:T.toString(),$=(R=(q=u.value)==null?void 0:q.month)==null?void 0:R.toString().padStart(2,"0");return`${v}-${$}`});async function N(){l.listUserRole=="employee"?await r.fetchMyTodos():await r.fetchTodos()}return K(async()=>{await N()}),(v,$)=>(d(),f("div",null,[e("div",$t,[x(r).loading?(d(),F(Q,{key:0,class:"absolute inset-0 bg-opacity-80 text-center py-4 text-gray-500 z-10 flex items-center justify-center"},{default:M(()=>$[0]||($[0]=[U(" Loading... ")])),_:1,__:[0]})):k("",!0),P(De,{selected:u.value,class:"border-b shadow z-20",onChange:S,onReloadClick:o},{before:M(I=>[O(v.$slots,"beforeHeader",G(H(I)))]),after:M(I=>[O(v.$slots,"afterHeader",G(H(I)))]),bottom:M(I=>[O(v.$slots,"bottomHeader",G(H(I)))]),typeSelection:M(I=>[O(v.$slots,"typeSelection",G(H(I)))]),_:3},8,["selected"]),u.value.type=="month-view"?(d(),F(Pe,{key:1,month:b.value,class:"bg-white",onDateClick:E,onClickTodo:A,onClickDateCell:s},null,8,["month"])):k("",!0),u.value.type=="day-view"?(d(),F(Ze,{key:2,date:w.value,onClickTodo:A,onClickEdit:g,onClickAdd:s,onClickDelete:y,onClickChangeStatus:t,onBackClick:p,onUpdate:m},null,8,["date"])):k("",!0)]),P(Dt,{todoModal:i.value,onCancelClick:h,onUpdate:m,onClickEdit:g},null,8,["todoModal"])]))}};export{pe as _,Ot as a};
