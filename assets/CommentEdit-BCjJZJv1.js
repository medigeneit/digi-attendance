import{u as c,b as g,r,e as y,c as d,o as i,a as t,g as x,h as m,B as w,v as n,k as p,t as b,w as C}from"./index-3qC0V9yO.js";import{u as k}from"./useCommentStore-CdvZURXV.js";const _={class:"max-w-xl mx-auto p-6 mt-10 bg-white shadow-md rounded"},U={key:0,class:"text-red-500 font-medium"},M=["disabled"],E={__name:"CommentEdit",setup(V){const o=k(),v=c(),u=g().params.id,a=r(!1),l=r({commentable_type:"",commentable_id:"",user_id:"",message:""});y(async()=>{await o.fetchComment(u),o.comment&&(l.value={commentable_type:o.comment.commentable_type.split("\\").pop().toLowerCase(),commentable_id:o.comment.commentable_id,user_id:o.comment.user_id,message:o.comment.message})});const f=async()=>{a.value=!0,await o.updateComment(u,{...l.value}),a.value=!1,o.error||v.push({name:"CommentList"})};return(q,e)=>(i(),d("div",_,[e[9]||(e[9]=t("h2",{class:"text-xl font-semibold mb-4"},"Edit Comment",-1)),t("form",{onSubmit:C(f,["prevent"]),class:"space-y-4"},[t("div",null,[e[5]||(e[5]=t("label",{class:"block font-medium"},"Commentable Type",-1)),m(t("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>l.value.commentable_type=s),required:"",class:"w-full border px-3 py-2 rounded"},e[4]||(e[4]=[t("option",{value:"task"},"Task",-1),t("option",{value:"bug"},"Bug",-1),t("option",{value:"meeting"},"Meeting",-1)]),512),[[w,l.value.commentable_type]])]),t("div",null,[e[6]||(e[6]=t("label",{class:"block font-medium"},"Commentable ID",-1)),m(t("input",{type:"number","onUpdate:modelValue":e[1]||(e[1]=s=>l.value.commentable_id=s),required:"",class:"w-full border px-3 py-2 rounded"},null,512),[[n,l.value.commentable_id]])]),t("div",null,[e[7]||(e[7]=t("label",{class:"block font-medium"},"User ID",-1)),m(t("input",{type:"number","onUpdate:modelValue":e[2]||(e[2]=s=>l.value.user_id=s),required:"",class:"w-full border px-3 py-2 rounded"},null,512),[[n,l.value.user_id]])]),t("div",null,[e[8]||(e[8]=t("label",{class:"block font-medium"},"Message",-1)),m(t("textarea",{"onUpdate:modelValue":e[3]||(e[3]=s=>l.value.message=s),required:"",class:"w-full border px-3 py-2 rounded"},null,512),[[n,l.value.message]])]),p(o).error?(i(),d("div",U,b(p(o).error),1)):x("",!0),t("button",{disabled:a.value,class:"bg-green-500 hover:bg-green-600 text-white px-5 py-2 rounded"},b(a.value?"Updating...":"Update Comment"),9,M)],32)]))}};export{E as default};
