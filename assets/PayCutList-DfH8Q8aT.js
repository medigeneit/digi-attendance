import{d as b,u as w,b as P,r as y,c as n,o as a,a as t,f as h,k as u,q,h as V,v as C,F as S,n as N,t as d,g as B}from"./index-D6IyOSuI.js";import{_ as L}from"./EmployeeFilter-Bpn5aPL1.js";import{L as A}from"./LoaderView-CbihmVPO.js";import{u as D,_ as $}from"./UpdateOrCreate-CfykQr2F.js";import"./company-B6Y6Xppm.js";import"./department-D8otYRXI.js";import"./SelectDropdown-gBLt9qrB.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./UserChip-Qp-JYzPq.js";import"./TimePickerAsFloatHour-B6v1Qlcw.js";const F={class:"px-4 space-y-4"},I={class:"flex items-center justify-between gap-2"},M={class:"flex flex-wrap gap-4 items-center"},R={key:1},U={class:"table-auto w-full border mt-4 text-sm"},E={class:"p-2"},j={class:"p-2"},H={class:"p-2"},O={class:"p-2"},T={class:"p-2"},z={class:"p-2 text-center flex gap-2"},G=["onClick"],J={key:2,class:"text-red-500 text-sm text-center"},K={key:3,class:"text-gray-400 text-sm text-center"},rt={__name:"PayCutList",setup(Q){const v=b(),x=w(),l=P(),c=D(),r=y(l.query.month||new Date().toISOString().slice(0,7)),o=y({company_id:l.query.company_id||"",department_id:l.query.department_id||"all",type:l.query.type||"all",employee_id:l.query.employee_id||""}),p=y(!1),m=async()=>{if(!r.value||!o.value.company_id)return;const i={month:r.value,company_id:o.value.company_id};o.value.employee_id&&(i.user_id=o.value.employee_id),p.value=!0,await c.fetchPaycuts(i),p.value=!1},g=async i=>{confirm("Are you sure you want to delete this paycut?")&&(await c.deletePaycut(i),await m())};return(i,e)=>(a(),n("div",F,[t("div",I,[t("button",{type:"button",class:"btn-3",onClick:e[0]||(e[0]=s=>u(x).go(-1))},e[3]||(e[3]=[t("i",{class:"far fa-arrow-left"},null,-1),t("span",{class:"hidden md:flex"},"Back",-1)])),e[4]||(e[4]=t("h1",{class:"title-md md:title-lg text-center"},"Monthly Paycut",-1)),e[5]||(e[5]=t("div",null,null,-1))]),t("div",M,[q(L,{modelValue:o.value,"onUpdate:modelValue":e[1]||(e[1]=s=>o.value=s),"initial-value":u(l).query,onFilterChange:m},null,8,["modelValue","initial-value"]),V(t("input",{type:"month","onUpdate:modelValue":e[2]||(e[2]=s=>r.value=s),class:"input-1"},null,512),[[C,r.value]])]),p.value?(a(),h(A,{key:0})):u(c).paycuts.length?(a(),n("div",R,[t("table",U,[e[7]||(e[7]=t("thead",{class:"bg-gray-100 text-left"},[t("tr",null,[t("th",{class:"p-2"},"#"),t("th",{class:"p-2"},"Employee"),t("th",{class:"p-2"},"Paycut Hours"),t("th",{class:"p-2"},"Reason"),t("th",{class:"p-2"},"Note"),t("th",{class:"p-2 text-center"},"Actions")])],-1)),t("tbody",null,[(a(!0),n(S,null,N(u(c).paycuts,(s,k)=>{var _,f;return a(),n("tr",{key:s.id,class:"border-t"},[t("td",E,d(k+1),1),t("td",j,d(((_=s.user)==null?void 0:_.name)||"N/A"),1),t("td",H,d(s.paycut_hours),1),t("td",O,d(s.reason||"-"),1),t("td",T,d(s.note||"-"),1),t("td",z,[((f=u(v).user)==null?void 0:f.id)===8?(a(),h($,{key:0,userId:s.user_id,month:r.value,onUpdated:m},null,8,["userId","month"])):B("",!0),t("button",{type:"button",class:"text-red-500",onClick:W=>g(s.id)},e[6]||(e[6]=[t("i",{class:"fa fa-trash"},null,-1)]),8,G)])])}),128))])])])):o.value.company_id?(a(),n("p",K," No paycuts found for the selected filters. ")):(a(),n("p",J," Please select a company to load paycut data. "))]))}};export{rt as default};
