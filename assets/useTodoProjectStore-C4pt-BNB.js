import{B as y,r as n,x as d,C as u}from"./index-gak5Bvv6.js";const h=y("todoProject",()=>{const c=n([]),o=n(!1),l=n(null),p=async(s={})=>{var t,a,e;o.value=!0,l.value=null;try{const r=await u.get("/todo-projects",{params:s});c.value=((t=r.data)==null?void 0:t.todo_projects)||[]}catch(r){throw l.value=((e=(a=r.response)==null?void 0:a.data)==null?void 0:e.message)||"Projects load failed",r}finally{o.value=!1}},i=async s=>{var t,a;o.value=!0,l.value=null;try{const e=await u.post("/todo-projects",s);return c.value=[...c.value,e.data],e.data}catch(e){throw l.value=((a=(t=e.response)==null?void 0:t.data)==null?void 0:a.message)||"Project create failed",e}finally{o.value=!1}},f=async(s,t)=>{var a,e;o.value=!0,l.value=null;try{const r=await u.put(`/todo-projects/${s}`,t);return c.value=c.value.map(v=>v.id===s?r.data:v),r.data}catch(r){throw l.value=((e=(a=r.response)==null?void 0:a.data)==null?void 0:e.message)||"Project update failed",r}finally{o.value=!1}},j=async s=>{var t,a;o.value=!0,l.value=null;try{await u.delete(`/todo-projects/${s}`),c.value=c.value.filter(e=>e.id!==s)}catch(e){throw l.value=((a=(t=e.response)==null?void 0:t.data)==null?void 0:a.message)||"Project delete failed",e}finally{o.value=!1}};return{projects:d(()=>c.value),loading:d(()=>o.value),error:d(()=>l.value),fetchProjects:p,createProject:i,updateProject:f,deleteProject:j}});export{h as u};
