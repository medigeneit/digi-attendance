import{E as b,r as c,G as m}from"./index-CBF_IMfm.js";const C=b("attendance",()=>{const i=c([]),g=c([]),v=c([]),p=c(null),w=c(null),h=c(new Date().toISOString().substring(0,7)),f=c(new Date().toISOString().substring(0,10)),e=c(null),l=c(!1);return{monthlyLogs:i,dailyLateLogs:v,summary:p,monthly_company_summary:w,selectedMonth:h,selectedDate:f,error:e,isLoading:l,dailyLogs:g,getMonthlyAttendanceByShift:async(r,a)=>{var s,n;if(!r||!a){e.value="Invalid user ID or month";return}l.value=!0;try{const t=await m.get(`/user/${r}/attendance/monthly/${a}`);i.value=t.data.monthly_logs,p.value=t.data.summary,e.value=null}catch(t){e.value=((n=(s=t.response)==null?void 0:s.data)==null?void 0:n.message)||"Something went wrong",console.error(e.value)}finally{l.value=!1}},getTodayAttendanceReport:async(r,a,s)=>{var n,t;l.value=!0;try{const o={companyId:r,month:a,status:s},u=await m.get("/attendance/today",{params:o});g.value=u.data,e.value=null}catch(o){e.value=((t=(n=o.response)==null?void 0:n.data)==null?void 0:t.message)||"Something went wrong",console.error(e.value)}finally{l.value=!1}},getAttendanceLateReport:async(r,a,s)=>{var n,t;l.value=!0;try{const o={company_id:r,employee_id:a,month:s};console.log({params:o});const u=await m.get("/monthly/attendance/late-reports",{params:o});v.value=u.data,e.value=null}catch(o){e.value=((t=(n=o.response)==null?void 0:n.data)==null?void 0:t.message)||"Something went wrong",console.error(e.value)}finally{l.value=!1}},getMonthlyAttendanceSummaryReport:async(r,a)=>{var s,n;if(!r||!a){e.value="Invalid user ID or month";return}l.value=!0;try{const t={company_id:r,month:a},o=await m.get("/attendance/monthly-summary-reports",{params:t});w.value=o.data,e.value=null}catch(t){e.value=((n=(s=t.response)==null?void 0:s.data)==null?void 0:n.message)||"Something went wrong",console.error(e.value)}finally{l.value=!1}},downloadExcel:async(r,a)=>{var s,n;if(!r||!a){e.value="Invalid company ID or month";return}l.value=!0;try{const t={company_id:r,month:a},o=await m.get("/attendance/monthly-summary-reports?flag=excel",{params:t,responseType:"blob"}),u=window.URL.createObjectURL(new Blob([o.data])),d=document.createElement("a");d.href=u,d.setAttribute("download",`${a} attendance_summary.xlsx`),document.body.appendChild(d),d.click(),document.body.removeChild(d)}catch(t){e.value=((n=(s=t.response)==null?void 0:s.data)==null?void 0:n.message)||"Something went wrong",console.error(e.value)}finally{l.value=!1}},downloadPDF:async(r,a,s=0)=>{var n,t;if(!r||!a){e.value="Invalid user ID or month";return}l.value=!0;try{const o={company_id:r,month:a},u=await m.get("/attendance/monthly-summary-reports?flag=pdf",{params:o,responseType:"blob"}),d=window.URL.createObjectURL(new Blob([u.data])),y=document.createElement("a");y.href=d,y.setAttribute("download",`${a} attendance_summary.pdf`),document.body.appendChild(y),y.click(),document.body.removeChild(y)}catch(o){e.value=((t=(n=o.response)==null?void 0:n.data)==null?void 0:t.message)||"Something went wrong",console.error(e.value)}finally{l.value=!1}}}});export{C as u};
