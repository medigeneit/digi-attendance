import{f as B,u as E,D as S,r as v,h as L,c as r,o as i,a as e,n,w as D,k as V,l as a,G as p,F as j,e as C,t as m,v as y,i as I}from"./index-C79iWQp1.js";import{u as O}from"./useBugStore-D4gULbX1.js";import{u as U}from"./useProjectStore-BJhZN9BL.js";const M={class:"container mx-auto p-6"},P={class:"max-w-xl mx-auto bg-white shadow-lg rounded-lg p-6"},N={class:"mb-4"},R=["value"],T={class:"mb-4"},_={class:"mb-4"},H={class:"mb-4"},G={class:"mb-4"},A={key:0,class:"mb-4 text-red-500 font-medium"},F={class:"flex items-center gap-4"},W=["disabled"],q={key:1,class:"text-center text-gray-500 py-6"},Q={__name:"BugEdit",setup($){const b=U(),s=O(),x=B(),g=E(),{projects:w}=S(b),c=x.params.id,d=v(!1),l=v({project_id:"",title:"",description:"",status:""});L(async()=>{var u,t,o,f;await s.fetchBug(c),b.fetchProjects(),l.value={project_id:(u=s.bug)==null?void 0:u.project_id,title:((t=s.bug)==null?void 0:t.title)||"",description:((o=s.bug)==null?void 0:o.description)||"",status:((f=s.bug)==null?void 0:f.status)||""}});const k=async()=>{d.value=!0,await s.updateBug(c,l.value),d.value=!1,s.error||g.push({name:"BugList"})};return(u,t)=>(i(),r("div",M,[e("div",P,[t[14]||(t[14]=e("h2",{class:"text-2xl font-semibold text-gray-800 mb-4"},"Edit Bug",-1)),n(s).bug?(i(),r("form",{key:0,onSubmit:D(k,["prevent"]),class:"space-y-6"},[e("div",N,[t[7]||(t[7]=e("label",{class:"block text-gray-700 font-medium mb-2"},"Project",-1)),a(e("select",{"onUpdate:modelValue":t[0]||(t[0]=o=>l.value.project_id=o),class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},[t[6]||(t[6]=e("option",{value:""},"Select Project",-1)),(i(!0),r(j,null,C(n(w),o=>(i(),r("option",{key:o.id,value:o.id},m(o.name),9,R))),128))],512),[[p,l.value.project_id]])]),e("div",T,[t[8]||(t[8]=e("label",{class:"block text-gray-700 font-medium mb-2"},"Bug Title",-1)),a(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>l.value.title=o),required:"",placeholder:"Enter bug title",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-red-500"},null,512),[[y,l.value.title]])]),e("div",_,[t[10]||(t[10]=e("label",{class:"block text-gray-700 font-medium mb-2"},"Status",-1)),a(e("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>l.value.status=o),class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},t[9]||(t[9]=[e("option",{value:"OPEN"},"OPEN",-1),e("option",{value:"SOLVED"},"SOLVED",-1),e("option",{value:"CLOSED"},"CLOSED",-1)]),512),[[p,l.value.status]])]),e("div",H,[t[12]||(t[12]=e("label",{class:"block text-gray-700 font-medium mb-2"},"Priority",-1)),a(e("select",{"onUpdate:modelValue":t[3]||(t[3]=o=>u.priority=o),class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},t[11]||(t[11]=[I('<option value="">Select priority</option><option value="LOW">LOW</option><option value="MEDIUM">MEDIUM</option><option value="HIGH">HIGH</option><option value="CRITICAL">CRITICAL</option>',5)]),512),[[p,u.priority]])]),e("div",G,[t[13]||(t[13]=e("label",{class:"block text-gray-700 font-medium mb-2"},"Description (Optional)",-1)),a(e("textarea",{"onUpdate:modelValue":t[4]||(t[4]=o=>l.value.description=o),rows:"4",placeholder:"Enter bug description",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-red-500"},null,512),[[y,l.value.description]])]),n(s).error?(i(),r("div",A,m(n(s).error),1)):V("",!0),e("div",F,[e("button",{disabled:d.value,type:"submit",class:"bg-red-500 hover:bg-red-600 text-white font-semibold px-5 py-2 rounded transition"},m(d.value?"Updating...":"Update Bug"),9,W),e("button",{type:"button",onClick:t[5]||(t[5]=o=>n(g).push({name:"BugList"})),class:"bg-gray-200 hover:bg-gray-300 text-gray-700 font-semibold px-5 py-2 rounded transition"}," Cancel ")])],32)):(i(),r("div",q,"Bug not found."))])]))}};export{Q as default};
