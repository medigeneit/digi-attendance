import{r as m,s as k,n as S,b as M,i as A,c as r,a as t,d as h,A as C,F as b,q as v,h as l,v as L,p as T,o as d,t as a,x as c,g as B}from"./index-BRnJms-i.js";import{L as D}from"./LoaderView-BuLeddfI.js";import{u as E}from"./attendance-wIAHq6Ca.js";import{u as R}from"./company-BvyFRLwC.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const V={class:"px-4 space-y-4"},$={class:"flex gap-4"},g=["value"],F={key:1,class:"space-y-4"},U={class:"overflow-x-auto card-bg"},j={class:"min-w-full table-auto border-collapse border border-gray-300 bg-white"},q={class:"text-center text-xs"},z={class:"border px-1 py-0.5"},H={class:"border px-1 py-0.5"},I=["title"],N=["title"],P=["title"],W={class:"border px-1 py-0.5"},G={class:"border px-1 py-0.5"},J={class:"border px-1 py-0.5"},tt={__name:"TodayAttendanceReport",setup(K){const x=B(),p=R(),o=E(),n=m(""),f=m(""),{companies:u}=k(p);S(()=>u.value.find(y=>y.id===n.value)||null);const i=async()=>{n.value&&await o.getTodayAttendanceReport(n.value,o.selectedMonth)};M(async()=>{await p.fetchCompanies(),await o.getTodayAttendanceReport(n.value,o.selectedMonth)}),A([n,f],i);const w=()=>x.go(-1);return(y,s)=>{var _;return d(),r("div",V,[t("div",{class:"flex items-center justify-between gap-2"},[t("button",{class:"btn-3",onClick:w},s[2]||(s[2]=[t("i",{class:"far fa-arrow-left"},null,-1),t("span",{class:"hidden md:flex"},"Back",-1)])),s[3]||(s[3]=t("h1",{class:"title-md md:title-lg flex-wrap text-center"},"Monthly Attendance",-1)),s[4]||(s[4]=t("div",null,null,-1))]),t("div",$,[t("div",null,[h(t("select",{id:"userSelect","onUpdate:modelValue":s[0]||(s[0]=e=>n.value=e),onChange:i,class:"input-1"},[s[5]||(s[5]=t("option",{value:"",disabled:""},"Select a user",-1)),(d(!0),r(b,null,v(l(u),e=>(d(),r("option",{key:e==null?void 0:e.id,value:e==null?void 0:e.id},a(e==null?void 0:e.name),9,g))),128))],544),[[C,n.value]])]),t("div",null,[h(t("input",{id:"monthSelect",type:"month","onUpdate:modelValue":s[1]||(s[1]=e=>l(o).selectedMonth=e),onChange:i,class:"input-1"},null,544),[[L,l(o).selectedMonth]])])]),l(o).isLoading?(d(),T(D,{key:0})):(d(),r("div",F,[t("div",U,[t("table",j,[s[6]||(s[6]=t("thead",null,[t("tr",{class:"bg-gray-200 text-xs"},[t("th",{class:"border p-1"},"Date"),t("th",{class:"border p-1"},"Day"),t("th",{class:"border p-1"},"Shift"),t("th",{class:"border p-1"},"Entry Time"),t("th",{class:"border p-1"},"Exit Time"),t("th",{class:"border p-1"},"Working Hours"),t("th",{class:"border p-1"},"Late Entry"),t("th",{class:"border p-1"},"Early Leave"),t("th",{class:"border p-1"},"Status")])],-1)),t("tbody",q,[(d(!0),r(b,null,v((_=l(o))==null?void 0:_.monthlyLogs,e=>(d(),r("tr",{key:e==null?void 0:e.date},[t("td",z,a(e.date),1),t("td",H,a(e.weekday),1),t("td",{class:"border px-1 py-0.5",title:`${e.shift_start_time} to ${e.shift_end_time}`},a(e.shift_name),9,I),t("td",{class:c(["border px-1 py-0.5",{"bg-red-200":e.late_duration}]),title:`Device: ${e.entry_device}`},a(e.entry_time),11,N),t("td",{class:c(["border px-1 py-0.5",{"bg-red-200":e.early_leave_duration}]),title:`Device: ${e.exit_device}`},a(e.exit_time),11,P),t("td",W,a(e.working_hours),1),t("td",G,a(e.late_duration),1),t("td",J,a(e.early_leave_duration),1),t("td",{class:c(["border px-1 py-0.5",{"text-red-600":e.status==="Absent","text-green-600":e.status==="Present"}])},a(e.status),3)]))),128))])])])]))])}}};export{tt as default};
