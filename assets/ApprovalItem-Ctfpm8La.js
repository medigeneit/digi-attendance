import{a9 as b,x as i,c,o as s,f as N,g as d,a as l,t as r,j as p}from"./index-W-8vDVy9.js";import{_ as S}from"./AcceptAndRejectHandler-t7yn27XG.js";const $={class:"flex flex-col justify-center items-center text-sm md:text-base text-center"},A={key:0,class:"text-center"},B={class:"text-center"},O={class:"text-xs text-gray-400 text-center"},R={key:0,class:"far fa-clock"},w={key:1},I={key:1,class:"text-center"},U={class:"font-bold"},P={key:0,class:"text-green-600"},T={key:1,class:"pl-2 text-yellow-700"},D={__name:"ApprovalItem",props:{application:Object,type:String,item:String,date:String,onAction:{type:Function,default:()=>{}}},setup(t){const f=b(),y=i(()=>t.item?t.item.replace(/[_-]/g," ").replace(/([A-Z])/g," $1").replace(/\s+/g," ").trim().split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "):""),u=i(()=>{let e="";switch(t.type){case"overtime_applications":e="overtime_approval";break;case"leave_applications":e="leave_approval";break;default:e="other_approval";break}return e}),x=i(()=>{var e;return(e=t.application)==null?void 0:e[`${t.item}_user`]}),m=i(()=>{var e;return(e=t.application)==null?void 0:e[`${t.item}_user_id`]}),v=i(()=>{var e;return((e=t.application)==null?void 0:e[`${t.item}_note`])||""}),h=i(()=>{var e,a,n;return((n=(a=(e=t.application)==null?void 0:e.user)==null?void 0:a[u.value])==null?void 0:n[`${t.item}_user`])||{}}),k=i(()=>{var e;return(e=f.approvalPermissions)==null?void 0:e[`allow_${t.item}`]}),g=i(()=>!t.application.status||!m.value?!1:t.item==="handover"?t.application.status!=="Rejected"||t.application.rejected_by_user_id!==t.application.handover_user_id:!0),j=i(()=>{var e,a,n,o;return t.item==="handover"&&((e=t.application)==null?void 0:e.handover_user_id)||((o=(n=(a=t.application)==null?void 0:a.user)==null?void 0:n[u.value])==null?void 0:o[`${t.item}_user_id`])});return(e,a)=>{var n,o;return s(),c("div",$,[m.value?(s(),c("div",A,[l("p",B,r(((n=x.value)==null?void 0:n.name)||""),1),l("div",O,[t.date?(s(),c("i",R)):d("",!0),p(" "+r(t.date)+" ",1),v.value?(s(),c("span",w," — "+r(v.value),1)):d("",!0)])])):(s(),c("p",I,r(((o=h.value)==null?void 0:o.name)||"N/A"),1)),k.value?(s(),N(S,{key:2,notificationType:t.type,applicationId:t.application.id,onSuccess:t.onAction},null,8,["notificationType","applicationId","onSuccess"])):d("",!0),a[1]||(a[1]=l("hr",{class:"w-36 md:w-44 border-black my-1 mx-auto"},null,-1)),l("div",U,[p(r(y.value)+" ",1),g.value?(s(),c("span",P,"(✔)")):j.value?(s(),c("span",T,a[0]||(a[0]=[l("i",{class:"fad fa-spinner"},null,-1)]))):d("",!0)])])}}};export{D as _};
