import{u as R,b as j,r as S,e as F,z as B,n as O,c as o,o as l,a as t,f as z,g,p as m,k as D,h as G,v as I,j as r,t as s,F as x,q as v,i as k}from"./index-DwweU-eE.js";import{_ as W}from"./EmployeeFilter-D63tzO6m.js";import{L as J}from"./LoaderView-2ere4rtj.js";import{u as P}from"./leave-application-Ct_lwJpO.js";import{u as H}from"./user-CVWY787V.js";import"./MultiselectDropdown-Cx3RUMgq.js";import"./company-CKSLmbwF.js";import"./department-Daz5cPMd.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const Q={class:"px-4 space-y-4"},X={class:"flex flex-wrap gap-4"},Y={key:0,class:"flex justify-between gap-4 text-sm"},Z={class:"card-bg p-4 gap-1"},K={class:"grid md:grid-cols-2"},tt={key:1},et={class:"space-y-5"},st={class:"text-base font-semibold text-blue-400 mb-2 text-center capitalize"},at={class:"text-gray-500"},lt={key:0,class:"overflow-x-auto rounded border bg-white"},ot={class:"min-w-full text-sm text-left"},nt={class:"p-2"},rt={class:"p-2"},it={class:"p-2"},dt={class:"p-2"},ct={class:"p-2 whitespace-pre-line"},pt={class:"p-2 whitespace-pre-line"},ut={class:"p-2 text-sm text-gray-600"},ht={key:1,class:"overflow-x-auto rounded border bg-white"},_t={class:"min-w-full text-sm text-left"},yt={class:"p-2"},ft={class:"p-2"},gt={class:"p-2"},mt={class:"p-2"},xt={class:"p-2 whitespace-pre-line"},vt={class:"p-2 whitespace-pre-line"},bt={class:"p-2 whitespace-pre-line"},wt={class:"p-2 whitespace-pre-line text-center"},kt=["href"],At={key:1,class:"text-gray-400"},St={class:"p-2 whitespace-pre-line"},Dt={class:"p-2 text-sm text-gray-600"},Ct={key:2,class:"overflow-x-auto rounded border bg-white"},Lt={class:"min-w-full text-sm text-left"},Nt={class:"p-2"},qt={class:"p-2"},Tt={class:"p-2"},$t={class:"p-2"},Vt={class:"p-2 whitespace-pre-line"},Bt={class:"p-2 whitespace-pre-line"},Mt={class:"p-2 text-sm text-gray-600"},Et={key:3,class:"overflow-x-auto rounded border bg-white"},Ut={class:"min-w-full text-sm text-left"},Rt={class:"p-2"},jt={class:"p-2"},Ft={class:"p-2"},Ot={class:"p-2"},zt={class:"p-2"},Gt={class:"p-2"},It={class:"p-2 whitespace-pre-line"},Wt={class:"p-2 text-sm text-gray-600"},se={__name:"MonthWiseApplicationLog",setup(Jt){const b=R(),u=j(),C=H(),w=P(),i=S(null),_=S(u.query.date||w.selectedMonth),d=S({company_id:u.query.company_id||"",department_id:u.query.department_id||"all",type:u.query.type||"all",employee_id:u.query.employee_id||"",category:""}),L=async n=>{n?(await C.fetchUser(n),i.value=C.user):i.value=null},A=async()=>{d.value.employee_id&&_.value&&await w.getMonthlyApplicationLog(d.value.employee_id,_.value)};F(async()=>{d.value.employee_id&&await L(d.value.employee_id)}),B(()=>d.value.employee_id,async(n,e)=>{n&&n!==e&&(await L(n),await A(),b.replace({query:{...u.query,employee_id:n}}))}),B(_,n=>{b.replace({query:{...u.query,date:n}}),A()});const M=()=>b.go(-1),N=n=>new Date(n).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),q=n=>new Date(`1970-01-01T${n}`).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),y=n=>`${new Date(n).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})}`,E=()=>{b.replace({query:{...u.query,company_id:d.value.company_id,department_id:d.value.department_id,type:d.value.type,employee_id:d.value.employee_id}})},U={exchange_shift:"ExchangeShiftShow",exchange_offday:"ExchangeOffdayShow"};return(n,e)=>{var T,$,V;const f=O("RouterLink");return l(),o("div",Q,[t("div",{class:"flex items-center justify-between gap-2"},[t("button",{class:"btn-3",onClick:M},e[2]||(e[2]=[t("i",{class:"far fa-arrow-left"},null,-1),t("span",{class:"hidden md:flex"},"Back",-1)])),e[3]||(e[3]=t("h1",{class:"title-md md:title-lg flex-wrap text-center"},"Monthly Application Log",-1)),e[4]||(e[4]=t("div",null,null,-1))]),t("div",X,[m(W,{modelValue:d.value,"onUpdate:modelValue":e[0]||(e[0]=h=>d.value=h),"initial-value":D(u).query,onFilterChange:E},null,8,["modelValue","initial-value"]),t("div",null,[G(t("input",{id:"monthSelect",type:"month","onUpdate:modelValue":e[1]||(e[1]=h=>_.value=h),onChange:A,class:"input-1"},null,544),[[I,_.value]])])]),i.value?(l(),o("div",Y,[t("div",Z,[e[13]||(e[13]=t("h2",{class:"title-md"},"Selected Employee Info",-1)),e[14]||(e[14]=t("hr",null,null,-1)),t("div",K,[t("p",null,[e[5]||(e[5]=t("strong",null,"Name:",-1)),r(" "+s(i.value.name),1)]),t("p",null,[e[6]||(e[6]=t("strong",null,"Designation:",-1)),r(" "+s(((T=i.value.designation)==null?void 0:T.title)||"N/A"),1)]),t("p",null,[e[7]||(e[7]=t("strong",null,"Department:",-1)),r(" "+s((($=i.value.department)==null?void 0:$.name)||"N/A"),1)]),t("p",null,[e[8]||(e[8]=t("strong",null,"Company:",-1)),r(" "+s(((V=i.value.company)==null?void 0:V.name)||"N/A"),1)]),t("p",null,[e[9]||(e[9]=t("strong",null,"Phone:",-1)),r(" "+s(i.value.phone),1)]),t("p",null,[e[10]||(e[10]=t("strong",null,"Email:",-1)),r(" "+s(i.value.email||"N/A"),1)]),t("p",null,[e[11]||(e[11]=t("strong",null,"Blood Group:",-1)),r(" "+s(i.value.blood||"N/A"),1)]),t("p",null,[e[12]||(e[12]=t("strong",null,"Joining Date:",-1)),r(" "+s(i.value.joining_date||"N/A"),1)])])])])):(l(),o("div",tt,e[15]||(e[15]=[t("p",{class:"text-gray-400 text-center text-2xl italic"},"Select an employee, please.",-1)]))),D(w).loading?(l(),z(J,{key:2})):g("",!0),t("div",et,[(l(!0),o(x,null,v(D(w).applicationLog,(h,c)=>(l(),o("div",{key:c,class:"bg-gray-50 p-4 rounded shadow"},[t("h2",st,[r(s(c.replaceAll("_"," "))+" ",1),t("span",at,"("+s(h.length)+")",1)]),c==="leave_application"?(l(),o("div",lt,[t("table",ot,[e[17]||(e[17]=t("thead",{class:"bg-gray-100 text-gray-700 text-xs uppercase"},[t("tr",null,[t("th",{class:"p-2"},"#"),t("th",{class:"p-2"},"Create Date"),t("th",{class:"p-2"},"Last Working Date"),t("th",{class:"p-2"},"Resumption Date"),t("th",{class:"p-2"},"Type"),t("th",{class:"p-2"},"Status"),t("th",{class:"p-2"},"Action")])],-1)),t("tbody",null,[(l(!0),o(x,null,v(h,(a,p)=>(l(),o("tr",{key:`${c}-${p}`,class:"border-t hover:bg-gray-50 text-sm"},[t("td",nt,s(p+=1),1),t("td",rt,s(y(a.create_date)),1),t("td",it,s(a.from),1),t("td",dt,s(a.to),1),t("td",ct,s(a.application_types),1),t("td",pt,s(a.status),1),t("td",ut,[m(f,{to:{name:"LeaveApplicationShow",params:{id:a.id}},class:"inline-flex items-center gap-1 text-blue-600 hover:underline"},{default:k(()=>e[16]||(e[16]=[t("i",{class:"far fa-eye"},null,-1),r(" View ")])),_:2,__:[16]},1032,["to"])])]))),128))])])])):g("",!0),c==="short_leave"?(l(),o("div",ht,[t("table",_t,[e[20]||(e[20]=t("thead",{class:"bg-gray-100 text-gray-700 text-xs uppercase"},[t("tr",null,[t("th",{class:"p-2"},"#"),t("th",{class:"p-2"},"Create Date"),t("th",{class:"p-2"},"Type"),t("th",{class:"p-2"},"Date"),t("th",{class:"p-2"},"Check In"),t("th",{class:"p-2"},"Check Out"),t("th",{class:"p-2"},"Duration"),t("th",{class:"p-2"},"Attachment"),t("th",{class:"p-2"},"Status"),t("th",{class:"p-2"},"Action")])],-1)),t("tbody",null,[(l(!0),o(x,null,v(h,(a,p)=>(l(),o("tr",{key:`${c}-${p}`,class:"border-t hover:bg-gray-50 text-sm"},[t("td",yt,s(p+=1),1),t("td",ft,s(y(a.create_date)),1),t("td",gt,s(a.application_types),1),t("td",mt,s(a.date),1),t("td",xt,s(q(a.start_time)),1),t("td",vt,s(q(a.end_time)),1),t("td",bt,s(a.duration)+" m ",1),t("td",wt,[a.attachment?(l(),o("a",{key:0,href:a.attachment,target:"_blank",rel:"noopener",class:"text-blue-600 hover:underline"},e[18]||(e[18]=[t("i",{class:"far fa-eye"},null,-1)]),8,kt)):(l(),o("span",At,"No file"))]),t("td",St,s(a.status),1),t("td",Dt,[m(f,{to:{name:"ShortLeaveShow",params:{id:a.id}},class:"inline-flex items-center gap-1 text-blue-600 hover:underline"},{default:k(()=>e[19]||(e[19]=[t("i",{class:"far fa-eye"},null,-1),r(" View ")])),_:2,__:[19]},1032,["to"])])]))),128))])])])):g("",!0),c==="exchange_offday"||c==="exchange_shift"?(l(),o("div",Ct,[t("table",Lt,[e[22]||(e[22]=t("thead",{class:"bg-gray-100 text-gray-700 text-xs uppercase"},[t("tr",null,[t("th",{class:"p-2"},"#"),t("th",{class:"p-2"},"Create Date"),t("th",{class:"p-2"},"Current Date"),t("th",{class:"p-2"},"Exchange Date"),t("th",{class:"p-2"},"Shift"),t("th",{class:"p-2"},"Status"),t("th",{class:"p-2"},"Action")])],-1)),t("tbody",null,[(l(!0),o(x,null,v(h,(a,p)=>(l(),o("tr",{key:`${c}-${p}`,class:"border-t hover:bg-gray-50 text-sm"},[t("td",Nt,s(p+=1),1),t("td",qt,s(y(a.create_date)),1),t("td",Tt,s(a.current_date),1),t("td",$t,s(a.exchange_date),1),t("td",Vt,s((a==null?void 0:a.shift)||"N/A"),1),t("td",Bt,s(a.status),1),t("td",Mt,[m(f,{to:{name:U[a.type],params:{id:a.id}},class:"inline-flex items-center gap-1 text-blue-600 hover:underline"},{default:k(()=>e[21]||(e[21]=[t("i",{class:"far fa-eye"},null,-1),r(" View ")])),_:2,__:[21]},1032,["to"])])]))),128))])])])):g("",!0),c==="manual_attendance"?(l(),o("div",Et,[t("table",Ut,[e[24]||(e[24]=t("thead",{class:"bg-gray-100 text-gray-700 text-xs uppercase"},[t("tr",null,[t("th",{class:"p-2"},"#"),t("th",{class:"p-2"},"Create Date"),t("th",{class:"p-2"},"Date"),t("th",{class:"p-2"},"Type"),t("th",{class:"p-2"},"Check In"),t("th",{class:"p-2"},"Check Out"),t("th",{class:"p-2"},"Status"),t("th",{class:"p-2"},"Action")])],-1)),t("tbody",null,[(l(!0),o(x,null,v(h,(a,p)=>(l(),o("tr",{key:`${c}-${p}`,class:"border-t hover:bg-gray-50 text-sm"},[t("td",Rt,s(p+=1),1),t("td",jt,s(y(a.create_date)),1),t("td",Ft,s(y(a.check_in||a.check_out)),1),t("td",Ot,s(a.application_types),1),t("td",zt,s(N(a.check_in)||"N/A"),1),t("td",Gt,s(N(a.check_out)||"N/A"),1),t("td",It,s(a.status),1),t("td",Wt,[m(f,{to:{name:"ManualAttendanceShow",params:{id:a.id}},class:"inline-flex items-center gap-1 text-blue-600 hover:underline"},{default:k(()=>e[23]||(e[23]=[t("i",{class:"far fa-eye"},null,-1),r(" View ")])),_:2,__:[23]},1032,["to"])])]))),128))])])])):g("",!0)]))),128))])])}}};export{se as default};
