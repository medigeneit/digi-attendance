import{M as E,r as u,m as v,D as l}from"./index-2SPaUKUG.js";const x=E("device",()=>{const n=u([]),i=u(null),s=u(!1),c=u(null),f=async()=>{var e,r;s.value=!0,c.value=null;try{const t=await l.get("/devices");n.value=t.data}catch(t){c.value=((r=(e=t.response)==null?void 0:e.data)==null?void 0:r.message)||"ডিভাইস লোড করতে ব্যর্থ হয়েছে।",console.error("Error fetching devices:",t)}finally{s.value=!1}},y=async e=>{var r,t;s.value=!0,c.value=null;try{const a=await l.get(`/devices/${e}`);i.value=a.data}catch(a){c.value=((t=(r=a.response)==null?void 0:r.data)==null?void 0:t.message)||`ডিভাইস (ID: ${e}) লোড করতে ব্যর্থ হয়েছে।`,console.error(`Error fetching device with id ${e}:`,a)}finally{s.value=!1}},p=async e=>{var r,t;s.value=!0,c.value=null;try{const a=await l.post("/devices",e);return n.value.push(a.data),a.data}catch(a){c.value=((t=(r=a.response)==null?void 0:r.data)==null?void 0:t.message)||"ডিভাইস তৈরি করতে ব্যর্থ হয়েছে।",console.error("Error creating device:",a)}finally{s.value=!1}},h=async(e,r)=>{var t,a;s.value=!0,c.value=null;try{const o=await l.put(`/devices/${e}`,r),d=n.value.findIndex(m=>m.id===e);return d!==-1&&(n.value[d]=o.data),o.data}catch(o){c.value=((a=(t=o.response)==null?void 0:t.data)==null?void 0:a.message)||`ডিভাইস (ID: ${e}) আপডেট করতে ব্যর্থ হয়েছে।`,console.error(`Error updating device with id ${e}:`,o)}finally{s.value=!1}},g=async e=>{var r,t;s.value=!0,c.value=null;try{await l.delete(`/devices/${e}`),n.value=n.value.filter(a=>a.id!==e)}catch(a){c.value=((t=(r=a.response)==null?void 0:r.data)==null?void 0:t.message)||`ডিভাইস (ID: ${e}) মুছতে ব্যর্থ হয়েছে।`,console.error(`Error deleting device with id ${e}:`,a)}finally{s.value=!1}},w=async e=>{try{return await l.get(`/check-device-connection/${e}`),!0}catch(r){return console.error(r),!1}},D=async e=>{try{return s.value=!0,await l.post(`/devices/${e}/sync-catchup`),!0}catch(r){return console.error(r),!1}finally{s.value=!1}},$=async()=>{try{return s.value=!0,await l.post("/devices/sync-all"),!0}catch(e){return console.error(e),!1}finally{s.value=!1}};return{devices:v(()=>n.value),device:v(()=>i.value),loading:v(()=>s.value),error:v(()=>c.value),fetchDevices:f,fetchDevice:y,createDevice:p,updateDevice:h,deleteDevice:g,checkDeviceConnection:w,syncCatchup:D,syncAll:$}});export{x as u};
