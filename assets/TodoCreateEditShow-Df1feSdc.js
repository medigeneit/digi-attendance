import{O as Y}from"./OverlyModal-DXnd8VKM.js";import{c as h,o as c,O as Q,a as e,k as _,t as M,w as P,r as f,x as A,q as B,h as z,U as pt,l as N,j as E,v as q,P as ct,F as at,e as yt,Z as ft,A as W,y as vt,d as R,g as X,n as g,m as j,b as V}from"./index-MLT4TxMN.js";import{g as F,b as bt}from"./datetime-Du_mcDA9.js";import{u as dt}from"./company-WZBPoXfZ.js";import{u as nt}from"./useTodoProjectStore-C-AVqJ1P.js";import{u as tt}from"./useTodoStore-BfAWEBdo.js";import{_ as st}from"./CompanyDepartmentSelectInput-DaVIQbcY.js";import{L as Z}from"./LoaderView-7wbWNiBa.js";import{u as gt}from"./useTaskStore-DL8TrjNK.js";import{_ as wt}from"./TaskSelectionInput-DxyS7Sm9.js";import{u as it,f as xt,d as kt,a as Tt}from"./useTodoDateStore-eHP1OSqw.js";import{_ as St}from"./UserChip-BJll6UHz.js";import{a as Ct}from"./TodoItemCard-DZW9yPFO.js";const $t={class:"bg-white border-t px-4 py-4 sticky bottom-0 rounded-b-md shadow-lg shadow-red-600"},_t={key:0,class:"mb-4 text-red-500 font-medium"},Dt={key:0,class:"mb-4 text-blue-500 font-medium"},ht={class:"flex justify-between items-center gap-4"},Vt=["disabled"],et={__name:"FormHandler",props:{isSubmitting:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},error:{type:String,default:""}},emits:["submit","clickCancel"],setup(n,{emit:I}){const l=I;return(a,p)=>(c(),h("form",{onSubmit:p[1]||(p[1]=P(b=>l("submit"),["prevent"])),class:"overflow-hidden"},[Q(a.$slots,"default"),e("div",$t,[Q(a.$slots,"error",{},()=>[n.error?(c(),h("div",_t,M(n.error),1)):_("",!0)]),n.isSubmitting?(c(),h("div",Dt,"Saving changes...")):_("",!0),Q(a.$slots,"footer",{},()=>[e("div",ht,[e("button",{type:"button",onClick:p[0]||(p[0]=b=>l("clickCancel")),class:"btn-3"},"Cancel"),e("button",{disabled:n.isSubmitting||n.isLoading,type:"submit",class:"btn-2"},M(n.isSubmitting?"Saving...":"Save"),9,Vt)])])])],32))}},It={class:"relative"},jt=["placeholder"],Rt=["onClick"],ut={__name:"InputWithSuggestions",props:{modelValue:{type:[String,Number],default:null},options:{type:Array,default:()=>[]},label:{type:String,default:"title"},value:{type:String,default:"id"},placeholder:{type:String,default:"Select or type..."}},emits:["update:modelValue","update:inputValue"],setup(n,{emit:I}){const l=n,a=I,p=f(""),b=f(!1),s=f(null),v=f(null),u=f({top:"0px",left:"0px",width:"0px"}),x=A(()=>{if(!p.value)return l.options;const o=p.value.toLowerCase();return l.options.filter(C=>{const T=C[l.label];return T&&String(T).toLowerCase().includes(o)})});function i(){if(s.value){const o=s.value.getBoundingClientRect();u.value={top:`${o.bottom}px`,left:`${o.left}px`,width:`${o.width}px`}}}function r(o){p.value=o[l.label],a("update:modelValue",o[l.value]),a("update:inputValue",o[l.label]),b.value=!1}function t(){b.value=!0,i(),a("update:inputValue",p.value);const o=l.options.find(C=>{var T;return((T=C[l.label])==null?void 0:T.toLowerCase())===p.value.toLowerCase()});o?a("update:modelValue",o[l.value]):a("update:modelValue",null)}function S(){b.value=!0,i()}B(()=>l.modelValue,o=>{if(o){const C=l.options.find(T=>T[l.value]==o);C&&(p.value=C[l.label],a("update:inputValue",C[l.label]))}},{immediate:!0}),B(()=>l.options,()=>{if(l.modelValue){const o=l.options.find(C=>C[l.value]==l.modelValue);o&&(p.value=o[l.label],a("update:inputValue",o[l.label]))}}),B(b,o=>{o&&W(()=>i())});function m(o){s.value&&s.value.contains(o.target)||v.value&&v.value.contains(o.target)||(b.value=!1)}function U(){b.value&&i()}function $(){b.value&&i()}return z(()=>{document.addEventListener("click",m),window.addEventListener("scroll",U,!0),window.addEventListener("resize",$)}),pt(()=>{document.removeEventListener("click",m),window.removeEventListener("scroll",U,!0),window.removeEventListener("resize",$)}),(o,C)=>(c(),h("div",It,[N(e("input",{ref_key:"inputRef",ref:s,type:"text","onUpdate:modelValue":C[0]||(C[0]=T=>p.value=T),onInput:t,onFocus:S,class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500 outline-none",placeholder:n.placeholder},null,40,jt),[[q,p.value]]),(c(),E(ft,{to:"body"},[b.value&&x.value.length>0?(c(),h("ul",{key:0,ref_key:"dropdownRef",ref:v,class:"fixed z-[9999] bg-white border rounded-md shadow-lg max-h-60 overflow-y-auto mt-1",style:ct(u.value)},[(c(!0),h(at,null,yt(x.value,T=>(c(),h("li",{key:T[n.value],onClick:L=>r(T),class:"px-4 py-2 hover:bg-blue-50 cursor-pointer text-sm text-gray-700 block text-left"},M(T[n.label]),9,Rt))),128))],4)):_("",!0)]))]))}},rt={__name:"TodoTypeInput",props:{todoType:{type:String,default:"task"},todoTypeId:{type:[String,Number],default:null},show:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1}},emits:["update:todoType","update:todoTypeId","update:show"],setup(n,{emit:I}){const l=n,a=I,p=A({get:()=>l.todoTypeId,set:i=>a("update:todoTypeId",i)}),b=A({get:()=>l.show,set:i=>a("update:show",i)}),s=f(null),v=f({});function u(){if(!(s!=null&&s.value))return;const i=s.value.getBoundingClientRect(),r=window.innerHeight,t=300,m=r-i.bottom<t;v.value={position:"fixed",top:m?i.top-t+"px":i.bottom+"px",left:i.left+"px",width:i.width+"px",zIndex:5e3}}z(async()=>{await W(),window.addEventListener("resize",u),document.addEventListener("scroll",u)});const x=gt();return B(()=>b.value,async i=>{i&&await x.fetchAllMyTasks()}),vt(()=>{window.removeEventListener("resize",u),document.removeEventListener("scroll",u)}),(i,r)=>(c(),h("div",null,[R(wt,{show:b.value,"onUpdate:show":r[0]||(r[0]=t=>b.value=t),taskId:p.value,"onUpdate:taskId":r[1]||(r[1]=t=>p.value=t),readonly:n.readonly},null,8,["show","taskId","readonly"])]))}},Ut={class:"p-4 min-h-[10vh] max-h-[50vh] overflow-y-auto"},Et={class:"mb-4"},Mt={class:"mb-4"},Lt=["readonly"],Ot={class:"mb-4"},Pt={class:"mb-4"},At={__name:"TodoAddForm",props:{date:{type:String,default:F(new Date)},userRole:{type:String,default:"employee"},todoType:{type:String,default:"task"},todoTypeId:{type:String,default:null},readonlyValues:{type:Object,default:()=>({date:!1,todo_type_id:!1})}},emits:["update","cancelClick"],setup(n,{emit:I}){const l=n,a=f(),p=f(!1),b=f(),s=tt(),v=nt(),u=X(),x=dt(),i=f(null),r=f(""),t=f(null),S=I,m=f({title:"",date:l.date||"",todo_type:"task",todo_type_id:""});async function U(){try{a.value="submitting";const $={...m.value};if($.todo_type_id||(delete $.todo_type_id,delete $.todo_type),i.value)$.todo_project_id=i.value;else if(r.value){const o=await v.createProject({title:r.value,department_id:t.value});$.todo_project_id=o.id}await s.createTodo($,{returnWith:l.userRole!=="employee"?"user,department,company":""}),S("update")}finally{a.value=""}}return B(()=>({date:l.date,todo_type:l.todoType,todo_type_id:l.todoTypeId}),$=>{m.value={...m.value,...$}},{immediate:!0}),z(async()=>{var $;await W(),($=b.value)==null||$.focus(),u.isAdminMood&&await x.fetchMyCompanies({with:"departments"}),await v.fetchProjects()}),($,o)=>(c(),h("div",{onClick:o[9]||(o[9]=C=>p.value=!1)},[g(s).loading?(c(),E(Z,{key:0,class:"absolute inset-0 bg-opacity-80 text-center py-4 text-gray-500 z-10 flex items-center justify-center"},{default:j(()=>o[10]||(o[10]=[V(" Loading... ")])),_:1,__:[10]})):_("",!0),R(et,{onSubmit:U,onClickCancel:o[8]||(o[8]=C=>S("cancelClick")),isSubmitting:a.value=="submitting",error:g(s).error,class:"rounded-md relative"},{default:j(()=>{var C,T,L;return[o[16]||(o[16]=e("div",{class:"border-b py-2 px-4"},[e("h2",{class:"text-xl font-semibold"},"Add Todo")],-1)),e("div",Ut,[e("div",Et,[o[11]||(o[11]=e("label",{class:"block text-gray-700 font-medium mb-1 text-sm"},"Title",-1)),N(e("input",{ref_key:"titleRef",ref:b,"onUpdate:modelValue":o[0]||(o[0]=D=>m.value.title=D),required:"",placeholder:"Enter todo title",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[q,m.value.title]])]),e("div",Mt,[o[12]||(o[12]=e("label",{class:"block text-gray-700 font-medium mb-1 text-sm"},"Date",-1)),N(e("input",{readonly:(C=n.readonlyValues)==null?void 0:C.date,"onUpdate:modelValue":o[1]||(o[1]=D=>m.value.date=D),type:"date",required:"",placeholder:"Enter todo title",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,8,Lt),[[q,m.value.date]])]),g(u).isAdminMood?(c(),E(st,{key:0,modelValue:t.value,"onUpdate:modelValue":o[2]||(o[2]=D=>t.value=D),companies:((T=g(x))==null?void 0:T.myCompanies)||[],class:"mb-4"},{label:j(()=>o[13]||(o[13]=[e("label",{class:"block text-gray-700 font-medium mb-1 text-sm"},[V(" Project Department "),e("span",{class:"text-gray-500"},"(Optional - for new project)")],-1)])),_:1},8,["modelValue","companies"])):_("",!0),e("div",Ot,[o[14]||(o[14]=e("label",{class:"block text-gray-700 font-medium mb-1 text-sm"},[V(" Issue/Website/Project "),e("span",{class:"text-gray-500"},"(Optional)")],-1)),R(ut,{modelValue:i.value,"onUpdate:modelValue":o[3]||(o[3]=D=>i.value=D),"onUpdate:inputValue":o[4]||(o[4]=D=>r.value=D),options:g(v).projects,label:"title",value:"id",placeholder:"Select or type project..."},null,8,["modelValue","options"])]),e("div",Pt,[o[15]||(o[15]=e("label",{class:"block text-gray-700 font-medium mb-1 text-sm"},"Task (optional)",-1)),R(rt,{show:p.value,"onUpdate:show":o[5]||(o[5]=D=>p.value=D),todoType:m.value.todo_type,"onUpdate:todoType":o[6]||(o[6]=D=>m.value.todo_type=D),todoTypeId:m.value.todo_type_id,"onUpdate:todoTypeId":o[7]||(o[7]=D=>m.value.todo_type_id=D),readonly:(L=n.readonlyValues)==null?void 0:L.todo_type_id},null,8,["show","todoType","todoTypeId","readonly"])])])]}),_:1,__:[16]},8,["isSubmitting","error"])]))}},zt={class:"p-4 min-h-[10vh] max-h-[50vh] overflow-y-auto"},Bt={class:"mb-4 text-md"},Ft={class:"font-semibold"},Nt={class:"mb-2"},qt={__name:"TodoDateAddForm",props:{date:{type:[String,Number],default:F(new Date)},todoId:{type:[String,Number],required:!0},userRole:{type:String,default:"employee"}},emits:["update","cancelClick"],setup(n,{emit:I}){const l=n,a=f(),p=f(!1),b=f(),s=tt(),v=it(),u=I,x=f({date:l.date||"",todo_id:l.todoId});async function i(){try{a.value="submitting",await v.createTodoDate(x.value),u("update")}finally{a.value=""}}return z(async()=>{var r;await W(),await s.fetchTodo(l.todoId),(r=b.value)==null||r.focus()}),(r,t)=>(c(),h("div",{onClick:t[2]||(t[2]=S=>p.value=!1)},[g(s).loading?(c(),E(Z,{key:0,class:"absolute inset-0 bg-opacity-80 text-center py-4 text-gray-500 z-10 flex items-center justify-center"},{default:j(()=>t[3]||(t[3]=[V(" Loading... ")])),_:1,__:[3]})):_("",!0),R(et,{onSubmit:i,onClickCancel:t[1]||(t[1]=S=>u("cancelClick")),isSubmitting:a.value=="submitting",error:g(v).error,class:"rounded-md relative"},{default:j(()=>{var S;return[t[6]||(t[6]=e("div",{class:"border-b py-2 px-4"},[e("h2",{class:"text-xl font-semibold"},"Carry Todo To Date")],-1)),e("div",zt,[e("div",Bt,[t[4]||(t[4]=V(" TODO: ")),e("span",Ft,M((S=g(s).todo)==null?void 0:S.title),1)]),e("div",Nt,[t[5]||(t[5]=e("span",{class:"font-semibold"}," Date ",-1)),N(e("input",{"onUpdate:modelValue":t[0]||(t[0]=m=>x.value.date=m),type:"date",multiple:"",required:"",placeholder:"Enter todo title",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[q,x.value.date]])])])]}),_:1,__:[6]},8,["isSubmitting","error"])]))}},Wt={key:0,class:"mb-4 text-red-500 font-medium"},Ht={key:1,class:"mb-4 text-red-500 font-medium"},Gt={class:"p-4 min-h-[10vh] max-h-[50vh] overflow-y-auto"},Kt={class:"mb-4"},Yt={class:"mb-4"},Zt={class:"mb-4"},Jt={__name:"TodoEditForm",props:{date:{type:String,default:F(new Date)},todo:{type:Object,default:()=>({})}},emits:["update","cancelClick"],setup(n,{emit:I}){var lt;const l=n,a=f(),p=f(!1),b=f(),s=tt(),v=nt(),u=X(),x=dt(),i=f(null),r=f(""),t=f(null),S=I,m=f({title:"",todo_type:"task",todo_type_id:""}),U=f({id:null,repeat_type:"daily",start_date:((lt=l.todo)==null?void 0:lt.date)||l.date||F(new Date),end_date:null,weekly_day:null,monthly_mode:null,monthly_value:null,monthly_week:null,yearly_month:null,yearly_day:null}),$=f(!1),o=f({});async function C(){var k,d,w,y;await s.fetchTodo((k=l.todo)==null?void 0:k.id),m.value.title=(d=s.todo)==null?void 0:d.title,m.value.todo_type_id=(w=s.todo)==null?void 0:w.todoable_id,i.value=((y=s.todo)==null?void 0:y.todo_project_id)||null}const T=f(null);async function L(){var k,d;try{const{data:w}=await xt(l.todo.id),y=w==null?void 0:w.setting;y?($.value=!0,T.value=y.id,U.value={repeat_type:y.repeat_type??"daily",start_date:y.start_date??U.value.start_date,end_date:y.end_date??null,weekly_day:y.weekly_day??null,monthly_mode:y.monthly_mode??null,monthly_value:y.monthly_value??null,monthly_week:y.monthly_week??null,yearly_month:y.yearly_month??null,yearly_day:y.yearly_day??null}):U.value.id=null}catch(w){K.value=(d=(k=w==null?void 0:w.response)==null?void 0:k.data)==null?void 0:d.message,console.error("Load setting failed:",(w==null?void 0:w.message)||w)}}async function D(){const k={title:m.value.title,todo_type:m.value.todo_type,todo_type_id:m.value.todo_type_id};if(i.value)k.todo_project_id=i.value;else if(r.value){const d=await v.createProject({title:r.value,department_id:t.value});k.todo_project_id=d.id}await s.updateTodo(l.todo.id,k)}async function H(){var k,d;if(!$.value)T.value&&await kt(l.todo.id,T.value);else{const w=(k=o.value)!=null&&k.buildPayload?o.value.buildPayload():{...U.value};w.start_date||(w.start_date=((d=l.todo)==null?void 0:d.date)||l.date||F(new Date)),await Tt(l.todo.id,w)}}const O=k=>{var d,w;return((w=(d=k==null?void 0:k.response)==null?void 0:d.data)==null?void 0:w.message)||(k==null?void 0:k.message)||"Something went wrong"};async function G(){const[k,d]=await Promise.allSettled([D(),H()]),w=k.status==="fulfilled",y=d.status==="fulfilled";y||(K.value=O(d.reason)),w&&y&&S("update")}const J=f(!1),K=f(!1);async function mt(){var k;u.isAdminMood&&await x.fetchMyCompanies({with:"departments"}),v.fetchProjects(),await C(),J.value=!0,await L(),J.value=!1,await W(),(k=b.value)==null||k.focus()}const ot=A(()=>s.loading||J.value);return z(()=>{mt()}),(k,d)=>(c(),h("div",{class:"relative",onClick:d[8]||(d[8]=w=>p.value=!1)},[ot.value?(c(),E(Z,{key:0,class:"absolute inset-0 bg-opacity-80 text-center py-4 text-gray-500 z-10 flex items-center justify-center"},{default:j(()=>d[9]||(d[9]=[V(" Loading... ")])),_:1,__:[9]})):_("",!0),R(et,{onSubmit:G,onClickCancel:d[7]||(d[7]=w=>S("cancelClick")),isSubmitting:a.value=="submitting",isLoading:ot.value,id:"todoEditForm"},{error:j(()=>[e("div",null,[g(s).error?(c(),h("div",Wt,M(g(s).error),1)):_("",!0),K.value?(c(),h("div",Ht,M(K.value),1)):_("",!0)])]),default:j(()=>{var w;return[d[15]||(d[15]=e("div",{class:"border-b py-2 px-4"},[e("h2",{class:"text-xl font-semibold"},"Edit Todo")],-1)),e("div",Gt,[d[14]||(d[14]=e("div",{class:"text-xs text-red-800 mb-6"},[e("strong",null,"Tips:"),V(" If you change the todo, it will change to all the concurrent dates ")],-1)),e("div",Kt,[d[10]||(d[10]=e("label",{class:"block text-gray-500 font-medium text-sm"},"Title",-1)),N(e("input",{ref_key:"titleRef",ref:b,"onUpdate:modelValue":d[0]||(d[0]=y=>m.value.title=y),required:"",placeholder:"Enter todo title",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500 shadow-sm"},null,512),[[q,m.value.title]])]),g(u).isAdminMood?(c(),E(st,{key:0,modelValue:t.value,"onUpdate:modelValue":d[1]||(d[1]=y=>t.value=y),companies:((w=g(x))==null?void 0:w.myCompanies)||[],class:"mb-4"},{label:j(()=>d[11]||(d[11]=[e("label",{class:"block text-gray-500 font-medium text-sm"},[V(" Project Department "),e("span",{class:"text-gray-500"},"(Optional - for new project)")],-1)])),_:1},8,["modelValue","companies"])):_("",!0),e("div",Yt,[d[12]||(d[12]=e("label",{class:"block text-gray-500 font-medium text-sm"},[V(" Issue/Website/Project "),e("span",{class:"text-gray-500"},"(Optional)")],-1)),R(ut,{modelValue:i.value,"onUpdate:modelValue":d[2]||(d[2]=y=>i.value=y),"onUpdate:inputValue":d[3]||(d[3]=y=>r.value=y),options:g(v).projects,value:"id",label:"title",placeholder:"Select or type project..."},null,8,["modelValue","options"])]),e("div",Zt,[d[13]||(d[13]=e("label",{class:"block text-gray-500 font-medium text-sm"},"Task ID (optional)",-1)),R(rt,{show:p.value,"onUpdate:show":d[4]||(d[4]=y=>p.value=y),todoType:m.value.todo_type,"onUpdate:todoType":d[5]||(d[5]=y=>m.value.todo_type=y),todoTypeId:m.value.todo_type_id,"onUpdate:todoTypeId":d[6]||(d[6]=y=>m.value.todo_type_id=y)},null,8,["show","todoType","todoTypeId"])])])]}),_:1,__:[15]},8,["isSubmitting","isLoading"])]))}},Qt={class:"relative"},Xt={class:"min-h-[10vh] max-h-[50vh] overflow-y-auto p-4"},te={class:"mb-4"},ee={class:"mb-4 flex justify-between items-end"},oe={key:0,class:"mt-1 flex items-center gap-2 mb-4"},le={class:"border border-sky-400 rounded-full text-sky-500 font-semibold bg-sky-50 px-1 py-0.5 text-xs inline-block"},ae={class:"flex items-center justify-between gap-4"},de={key:0,class:"flex items-center gap-2"},ne={class:"flex justify-between items-center gap-4 py-4 px-4 border-t"},se={key:0,class:"ml-auto flex items-center gap-2"},ie={__name:"TodoShow",props:{todoDate:{type:Object,default:()=>{}}},emits:["cancelClick","clickEdit","update","clickAddTodoDate"],setup(n,{emit:I}){const l=n,a=it(),p=X(),b=I;async function s(){var r;console.log({todo_date:"dd"}),await a.fetchTodoDate((r=l.todoDate)==null?void 0:r.id)}const v=A(()=>{var r,t;return(r=a.todo_date)!=null&&r.date?new Date((t=a.todo_date)==null?void 0:t.date):null}),u=A(()=>{var r,t,S;return((t=(r=a.todo_date)==null?void 0:r.user)==null?void 0:t.id)===((S=p.user)==null?void 0:S.id)});async function x(r){var t;confirm(`Are your sure want to delete todo
'${(t=a.todo_date)==null?void 0:t.title}'`)&&(await a.deleteTodoDate(r.id),b("update"))}async function i(r,t){var S;confirm(`Are your sure want to compete todo
'${(S=a.todo_date)==null?void 0:S.title}'`)&&(await a.updateStatus(r.id,t),b("update"))}return z(async()=>{await s()}),(r,t)=>{var S,m,U,$,o,C,T,L,D;return c(),h("div",Qt,[g(a).loading?(c(),E(Z,{key:0,class:"absolute inset-0 bg-opacity-80 text-center py-4 text-gray-500 z-10 flex items-center justify-center"},{default:j(()=>t[6]||(t[6]=[V(" Loading... ")])),_:1,__:[6]})):_("",!0),e("div",null,[t[13]||(t[13]=e("div",{class:"border-b py-2 px-4"},[e("h2",{class:"text-xl font-semibold"},"Show Todo")],-1)),e("div",Xt,[e("div",te,[t[7]||(t[7]=e("div",{class:"font-semibold text-xs text-gray-500"},"Date",-1)),e("span",null,M(g(bt)(v.value,{weekDay:"long"})),1)]),e("div",ee,[e("div",null,[t[8]||(t[8]=e("div",{class:"text-xs text-gray-500"},"Todo",-1)),V(" "+M((S=g(a).todo_date)==null?void 0:S.title),1)]),e("button",{class:"btn-2 bg-sky-400 text-white hover:bg-sky-600 hover:text-white bg-none",onClick:t[0]||(t[0]=P(H=>{var O;return b("clickEdit",(O=g(a).todo_date)==null?void 0:O.todo)},["prevent","stop"]))},t[9]||(t[9]=[e("i",{class:"fas fa-pen"},null,-1),V(" Edit Todo ")]))]),(m=n.todoDate)!=null&&m.user?(c(),h("div",oe,[R(St,{user:n.todoDate.user,"avatar-size":"xsmall"},null,8,["user"]),e("div",le,M(($=(U=n.todoDate.user)==null?void 0:U.department)==null?void 0:$.name),1)])):_("",!0),e("div",null,[t[12]||(t[12]=e("div",{class:"text-xs text-gray-500"},"Status",-1)),e("div",ae,[e("div",null,[(o=g(a))!=null&&o.todo_date?(c(),E(Ct,{key:0,todoDate:(C=g(a))==null?void 0:C.todo_date},null,8,["todoDate"])):_("",!0),V(" "+M((T=g(a).todo_date)==null?void 0:T.status),1)]),u.value&&!g(a).loading?(c(),h("div",de,[((L=g(a).todo_date)==null?void 0:L.status)==="PENDING"?(c(),h("button",{key:0,class:"btn-2 from-yellow-700 to-yellow-500 text-white hover:bg-green-600 hover:text-white",onClick:t[1]||(t[1]=P(()=>i(g(a).todo_date,"WORKING"),["prevent","stop"]))},t[10]||(t[10]=[e("i",{class:"fas fa-exclamation-circle"},null,-1),V(" Change to Working ")]))):_("",!0),((D=g(a).todo_date)==null?void 0:D.status)==="WORKING"?(c(),h("button",{key:1,class:"btn-2 from-green-700 to-green-300 text-white hover:bg-green-600 hover:text-white",onClick:t[2]||(t[2]=P(()=>i(g(a).todo_date,"COMPLETED"),["prevent","stop"]))},t[11]||(t[11]=[e("i",{class:"fas fa-check"},null,-1),V(" Make Complete ")]))):_("",!0)])):_("",!0)])])])]),e("div",ne,[e("button",{type:"button",onClick:t[3]||(t[3]=H=>b("cancelClick")),class:"btn-3"},"Cancel"),u.value&&!g(a).loading?(c(),h("div",se,[e("button",{class:"btn-2 bg-green-600 text-white hover:bg-green-700 hover:text-white bg-none",onClick:t[4]||(t[4]=P(H=>{var O,G;return b("clickAddTodoDate",(O=g(a).todo_date)==null?void 0:O.todo_id,(G=g(a).todo_date)==null?void 0:G.date)},["prevent","stop"]))},t[14]||(t[14]=[e("i",{class:"fas fa-plus"},null,-1),V(" Add To another date ")])),e("button",{class:"btn-2-red",onClick:t[5]||(t[5]=P(()=>x(g(a).todo_date),["prevent","stop"]))},t[15]||(t[15]=[e("i",{class:"fas fa-trash-alt"},null,-1),V(" Delete ")]))])):_("",!0)])])}}},Te={__name:"TodoCreateEditShow",props:{todoModal:{type:Object,required:!0},userRole:{type:String,required:"employee"}},emits:["cancelClick","todoUpdate","todoDateUpdate","clickEdit","clickDelete","clickChangeStatus","clickAddTodoDate"],setup(n,{emit:I}){const l=I;function a(){l("todoUpdate")}function p(){l("todoDateUpdate")}return(b,s)=>(c(),h(at,null,[n.todoModal.action=="add"?(c(),E(Y,{key:0},{default:j(()=>{var v,u,x,i;return[R(At,{onCancelClick:s[0]||(s[0]=r=>l("cancelClick")),onUpdate:a,date:(v=n.todoModal)==null?void 0:v.date,todoType:(u=n.todoModal)==null?void 0:u.todoType,todoTypeId:(x=n.todoModal)==null?void 0:x.todoTypeId,readonlyValues:((i=n.todoModal)==null?void 0:i.formReadonlyValues)||{},userRole:n.userRole},null,8,["date","todoType","todoTypeId","readonlyValues","userRole"])]}),_:1})):_("",!0),n.todoModal.action=="addDate"?(c(),E(Y,{key:1},{default:j(()=>{var v,u,x;return[R(qt,{onCancelClick:s[1]||(s[1]=i=>l("cancelClick")),onUpdate:p,date:(v=n.todoModal)==null?void 0:v.date,todoId:(u=n.todoModal)==null?void 0:u.todo_id,userRole:n.userRole,readonlyValues:((x=n.todoModal)==null?void 0:x.formReadonlyValues)||{}},null,8,["date","todoId","userRole","readonlyValues"])]}),_:1})):_("",!0),n.todoModal.action=="edit"?(c(),E(Y,{key:2},{default:j(()=>{var v,u;return[R(Jt,{onCancelClick:s[2]||(s[2]=x=>l("cancelClick")),onUpdate:a,todo:(v=n.todoModal)==null?void 0:v.todo,userRole:n.userRole,readonlyValues:((u=n.todoModal)==null?void 0:u.formReadonlyValues)||{}},null,8,["todo","userRole","readonlyValues"])]}),_:1})):_("",!0),n.todoModal.action=="show"?(c(),E(Y,{key:3},{default:j(()=>{var v;return[R(ie,{onCancelClick:s[3]||(s[3]=u=>l("cancelClick")),onUpdate:p,onClickEdit:s[4]||(s[4]=u=>l("clickEdit",u)),onClickAddTodoDate:s[5]||(s[5]=(...u)=>l("clickAddTodoDate",...u)),onClickDelete:s[6]||(s[6]=u=>l("clickDelete",u)),onClickChangeStatus:s[7]||(s[7]=(u,x)=>l("clickChangeStatus",u,x)),todoDate:(v=n.todoModal)==null?void 0:v.todo,userRole:n.userRole},null,8,["todoDate","userRole"])]}),_:1})):_("",!0)],64))}};export{Te as _};
