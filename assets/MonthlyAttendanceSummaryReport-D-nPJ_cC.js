import{u as D,b as L,r as l,s as A,e as q,A as x,c as o,o as p,a as t,f as S,p as E,h as M,v as R,k as b,F as T,x as C,t as s}from"./index-BR60YnFV.js";import{_ as F}from"./EmployeeFilter-_o8QIloG.js";import{L as V}from"./LoaderView-IjGxua2b.js";import{u as B}from"./attendance-CnXahroa.js";import"./MultiselectDropdown-Bb05-W-n.js";import"./company-DwKzgJG2.js";import"./department-CkF1KV4b.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const H={class:"px-4 space-y-4"},P={class:"flex flex-wrap gap-4"},W={key:1,class:"space-y-4"},N={key:0,class:"overflow-x-auto card-bg"},U={class:"min-w-full table-auto border-collapse border border-gray-300 bg-white"},j={class:"text-center text-sm"},O={class:"border px-2 py-0.5"},$={class:"border px-2 py-0.5"},z={class:"border px-2 py-0.5"},G={class:"border px-2 py-0.5"},I={class:"border px-2 py-0.5"},J={class:"border px-2 py-0.5"},K={class:"border px-2 py-0.5"},Q={class:"border px-2 py-0.5"},X={class:"border px-2 py-0.5"},Y={class:"border px-2 py-0.5"},Z={class:"border px-2 py-0.5"},g={class:"border px-2 py-0.5"},ee={class:"border px-2 py-0.5"},te={class:"border px-2 py-0.5"},se={class:"border px-2 py-0.5"},ae={class:"border px-2 py-0.5"},re={class:"border py-0.5"},de={class:"border-b border-black font-semibold text-green-600"},pe={class:"text-gray-600"},ne={class:"border px-2 py-0.5"},ce={class:"border px-2 py-0.5"},oe={class:"border px-2 py-0.5"},ie={class:"border px-2 py-0.5"},ye={class:"border px-2 py-0.5"},_e={class:"border px-2 py-0.5"},le={class:"border px-2 py-0.5"},ue={class:"border px-2 py-0.5"},xe={key:1,class:"text-center text-red-500 text-xl italic mt-10"},Ae={__name:"MonthlyAttendanceSummaryReport",setup(be){const _=D(),d=L(),n=B(),c=l(d.query.date||n.selectedMonth),{monthly_company_summary:h}=A(n),u=l(""),a=l({company_id:d.query.company_id||"",department_id:d.query.department_id||"all",type:d.query.type||"all",employee_id:d.query.employee_id||""}),i=async()=>{a.value.company_id&&await n.getMonthlyAttendanceSummaryReport(a.value.company_id,a.value.employee_id,a.value.type,c.value)},m=async()=>{a.value.company_id&&await n.downloadExcel(a.value.company_id,u.value,c.value)},v=async()=>{a.value.company_id&&await n.downloadPDF(a.value.company_id,u.value,c.value)};q(async()=>{await i()}),x(()=>a.value.company_id,async y=>{y&&await i()}),x(c,y=>{_.replace({query:{...d.query,date:y}}),i()});const f=()=>{_.replace({query:{...d.query,company_id:a.value.company_id,department_id:a.value.department_id,type:a.value.type,employee_id:a.value.employee_id}}),i()},w=()=>_.go(-1);return(y,r)=>(p(),o("div",H,[t("div",{class:"flex items-center justify-between gap-2"},[t("button",{class:"btn-3",onClick:w},r[2]||(r[2]=[t("i",{class:"far fa-arrow-left"},null,-1),t("span",{class:"hidden md:flex"},"Back",-1)])),r[5]||(r[5]=t("h1",{class:"title-md md:title-lg flex-wrap text-center"},"Monthly Attendance Summary Report",-1)),t("div",{class:"flex gap-4"},[t("button",{type:"button",onClick:m,class:"btn-1"},r[3]||(r[3]=[t("i",{class:"far fa-file-excel text-2xl text-green-500"},null,-1)])),t("button",{type:"button",onClick:v,class:"btn-1"},r[4]||(r[4]=[t("i",{class:"fal fa-file-pdf text-2xl text-red-500"},null,-1)]))])]),t("div",P,[E(F,{modelValue:a.value,"onUpdate:modelValue":r[0]||(r[0]=e=>a.value=e),"initial-value":y.initialFilter,onFilterChange:f},null,8,["modelValue","initial-value"]),t("div",null,[M(t("input",{type:"month","onUpdate:modelValue":r[1]||(r[1]=e=>c.value=e),onChange:i,class:"input-1"},null,544),[[R,c.value]])])]),b(n).isLoading?(p(),S(V,{key:0})):(p(),o("div",W,[a.value.company_id?(p(),o("div",N,[t("table",U,[r[6]||(r[6]=t("thead",null,[t("tr",{class:"bg-gray-100 text-sm"},[t("th",{rowspan:"2",class:"border px-1 py-0.5"},"#"),t("th",{rowspan:"2",class:"border px-1 py-0.5"},"Employee Name"),t("th",{rowspan:"2",class:"border px-1 py-0.5"},"Designation"),t("th",{colspan:"5",class:"border px-1 py-0.5"},"Attendance Summary"),t("th",{colspan:"2",class:"border px-1 py-0.5"},"Actual Late"),t("th",{colspan:"2",class:"border px-1 py-0.5"},"Remaining Late"),t("th",{colspan:"2",class:"border px-1 py-0.5"},"Actual Early"),t("th",{colspan:"2",class:"border px-1 py-0.5"},"Remaining Early"),t("th",{rowspan:"2",class:"border px-1 py-0.5"},"Working Hour"),t("th",{rowspan:"2",class:"border px-1 py-0.5"},"OT Hour"),t("th",{colspan:"4",class:"border px-1 py-0.5"},"Leave Day"),t("th",{colspan:"2",class:"border px-1 py-0.5"},"Short Leave"),t("th",{rowspan:"2",class:"border px-1 py-0.5"},"Weekend Duty")]),t("tr",{class:"bg-gray-100 text-xs"},[t("th",{class:"border px-2 py-0.5"},"TD"),t("th",{class:"border px-2 py-0.5"},"TP"),t("th",{class:"border px-2 py-0.5"},"TW"),t("th",{class:"border px-2 py-0.5"},"TL"),t("th",{class:"border px-2 py-0.5"},"TA"),t("th",{class:"border px-1 py-0.5"},"Day"),t("th",{class:"border px-2 py-0.5"},"Hour"),t("th",{class:"border px-1 py-0.5"},"Day"),t("th",{class:"border px-2 py-0.5"},"Hour"),t("th",{class:"border px-1 py-0.5"},"Day"),t("th",{class:"border px-2 py-0.5"},"Hour"),t("th",{class:"border px-2 py-0.5"},"Day"),t("th",{class:"border px-2 py-0.5"},"Hour"),t("th",{class:"border px-2 py-0.5"},"CL"),t("th",{class:"border px-2 py-0.5"},"ML"),t("th",{class:"border px-2 py-0.5"},"SL"),t("th",{class:"border px-2 py-0.5"},"WPL"),t("th",{class:"border px-2 py-0.5"},"Delay"),t("th",{class:"border px-2 py-0.5"},"Early")])],-1)),t("tbody",j,[(p(!0),o(T,null,C(b(h),(e,k)=>(p(),o("tr",{key:e==null?void 0:e.date,class:"border-b border-gray-200 hover:bg-blue-200"},[t("td",O,s(k+=1),1),t("td",$,s(e==null?void 0:e.user),1),t("td",z,s(e==null?void 0:e.designation),1),t("td",G,s(e==null?void 0:e.total_monthly_days),1),t("td",I,s(e==null?void 0:e.total_present),1),t("td",J,s(e==null?void 0:e.total_weekend),1),t("td",K,s(e==null?void 0:e.total_leave),1),t("td",Q,s(e==null?void 0:e.total_absent),1),t("td",X,s(e==null?void 0:e.actual_late_day),1),t("td",Y,s(e==null?void 0:e.actual_late_hour),1),t("td",Z,s(e==null?void 0:e.total_remain_late_day),1),t("td",g,s(e==null?void 0:e.total_remain_late_hour),1),t("td",ee,s(e==null?void 0:e.actual_early_day),1),t("td",te,s(e==null?void 0:e.actual_early_hour),1),t("td",se,s(e==null?void 0:e.total_remain_early_day),1),t("td",ae,s(e==null?void 0:e.total_remain_early_hour),1),t("td",re,[t("div",de,s((e==null?void 0:e.total_working_hours)||0),1),t("div",pe,s((e==null?void 0:e.total_shift_hour)||0),1)]),t("td",ne,s(e==null?void 0:e.total_overtime_hours),1),t("td",ce,s(e==null?void 0:e.total_cl_leave),1),t("td",oe,s(e==null?void 0:e.total_ml_leave),1),t("td",ie,s(e==null?void 0:e.total_sl_leave),1),t("td",ye,s(e==null?void 0:e.total_wpl_leave),1),t("td",_e,s(e==null?void 0:e.total_first_short_leave),1),t("td",le,s(e==null?void 0:e.total_last_short_leave),1),t("td",ue,s(e.total_present_in_weekend),1)]))),128))])])])):(p(),o("div",xe,"Please select company"))]))]))}};export{Ae as default};
