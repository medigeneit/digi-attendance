import{ac as b,x as o,c as a,o as r,j as k,k as d,a as l,t as p,b as g}from"./index-BKNQq0oJ.js";import{_ as N}from"./AcceptAndRejectHandler-4ffgd_uk.js";const S={class:"flex flex-col justify-center items-center text-sm md:text-base text-center"},A={key:0,class:"text-center"},$={class:"text-center"},w={key:0,class:"text-xs text-gray-400 text-center max-w-[250px] md:max-w-[350px] mx-auto"},B={key:1,class:"text-center"},O={class:"font-bold"},R={key:0,class:"text-green-600"},I={key:1,class:"pl-2 text-yellow-700"},T={__name:"ApprovalItem",props:{application:Object,type:String,item:String,date:String,onAction:{type:Function,default:()=>{}}},setup(c){const t=c,v=b(),y=o(()=>t.item?t.item.replace(/[_-]/g," ").replace(/([A-Z])/g," $1").replace(/\s+/g," ").trim().split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "):""),u=o(()=>{switch(t.type){case"overtime_applications":return"overtime_approval";case"leave_applications":return"leave_approval";default:return"other_approval"}}),_=o(()=>{const e=t.application||{},s=e.user||{},n=(s==null?void 0:s[u.value])||{};if(t.item==="handover")return e.handover_user||null;if(t.item==="rejected_by")return e.rejected_by_user||null;const i=`${t.item}_user`;return(e==null?void 0:e[i])||(n==null?void 0:n[i])||null}),f=o(()=>{const e=t.application||{},s=e.user||{},n=(s==null?void 0:s[u.value])||{};if(t.item==="handover")return e.handover_user_id||null;if(t.item==="rejected_by")return e.rejected_by_user_id||null;const i=`${t.item}_user_id`;return(e==null?void 0:e[i])||(n==null?void 0:n[i])||null}),m=o(()=>{const e=t.application||{},s=`${t.item}_note`;return(e==null?void 0:e[s])||""}),x=o(()=>{var e;return(e=v.approvalPermissions)==null?void 0:e[`allow_${t.item}`]}),h=o(()=>{const e=t.application||{};return!e.status||!f.value?!1:t.item==="handover"?e.status!=="Rejected"||e.rejected_by_user_id!==e.handover_user_id:!0}),j=o(()=>{const e=t.application||{},s=e.user||{},n=(s==null?void 0:s[u.value])||{};return t.item==="handover"?!!e.handover_user_id:!!(n!=null&&n[`${t.item}_user_id`])});return(e,s)=>{var n;return r(),a("div",S,[_.value?(r(),a("div",A,[l("p",$,p(((n=_.value)==null?void 0:n.name)||""),1),m.value?(r(),a("div",w,p(m.value),1)):d("",!0)])):(r(),a("p",B,"N/A")),x.value?(r(),k(N,{key:2,notificationType:c.type,applicationId:c.application.id,onSuccess:c.onAction},null,8,["notificationType","applicationId","onSuccess"])):d("",!0),s[1]||(s[1]=l("hr",{class:"w-36 md:w-44 border-black my-1 mx-auto"},null,-1)),l("div",O,[g(p(y.value)+" ",1),h.value?(r(),a("span",R,"(âœ”)")):j.value?(r(),a("span",I,s[0]||(s[0]=[l("i",{class:"fad fa-spinner"},null,-1)]))):d("",!0)])])}}};export{T as _};
