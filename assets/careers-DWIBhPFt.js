import{B as J,r as t,x as q,C as w}from"./index-BB1GXcvH.js";const F=J("careers",()=>{const y=t([]),o=t({page:1,per_page:12,total:0,last_page:1}),s=t(!1),r=t(null),c=t(""),v=t(""),i=t(""),f=t(""),d=t(""),g=t(""),l=t([]),m=t(!0),_=t(""),h=t(12),p=t(1),b=q(()=>o.value.page<o.value.last_page);async function j(u={}){var a;s.value=!0,r.value=null;try{const e={q:c.value||void 0,status:v.value||void 0,department_id:i.value||void 0,employment_type:f.value||void 0,workplace:d.value||void 0,experience_level:g.value||void 0,skills:l.value&&l.value.length?l.value.join(","):void 0,only_open:m.value?1:0,sort:_.value||void 0,per_page:h.value||12,page:u.page??p.value??1},{data:n}=await w.get("/careers/jobs",{params:e});y.value=n.data||[],o.value={page:n.current_page,last_page:n.last_page,per_page:n.per_page,total:n.total},p.value=n.current_page}catch(e){r.value=((a=e==null?void 0:e.response)==null?void 0:a.data)||e.message}finally{s.value=!1}}async function k(u){var a;s.value=!0,r.value=null;try{const{data:e}=await w.get(`/careers/jobs/${u}`);return e}catch(e){throw r.value=((a=e==null?void 0:e.response)==null?void 0:a.data)||e.message,e}finally{s.value=!1}}async function x(u,a){const e=new FormData;e.append("full_name",a.full_name),e.append("email",a.email),a.phone&&e.append("phone",a.phone),a.cover_letter&&e.append("cover_letter",a.cover_letter),a.resume&&e.append("resume",a.resume),a.source&&e.append("source",a.source),a.answers&&e.append("answers",JSON.stringify(a.answers));const{data:n}=await w.post(`/careers/jobs/${u}/apply`,e,{headers:{"Content-Type":"multipart/form-data"}});return n}function C(){c.value="",v.value="",i.value="",f.value="",d.value="",g.value="",l.value=[],m.value=!0,_.value="",h.value=12,p.value=1}return{items:y,meta:o,loading:s,error:r,q:c,status:v,department_id:i,employment_type:f,workplace:d,experience_level:g,skills:l,only_open:m,sort:_,per_page:h,page:p,hasMore:b,fetchJobs:j,fetchJob:k,applyToJob:x,resetFilters:C}});export{F as u};
