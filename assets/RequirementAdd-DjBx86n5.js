import{u as D,r as s,s as q,q as M,e as I,c as i,o as a,a as t,w as C,f as U,g as f,C as w,F as L,x as j,t as v,h as l,v as E,l as R}from"./index-D9QWLruI.js";import{_ as P}from"./MultiselectDropdown-kXHNsLBb.js";import{_ as T}from"./TextEditor--OyPnKgY.js";import{u as A}from"./department-B6nVxnsw.js";import{u as H}from"./useProjectStore-jz1od867.js";import{u as N}from"./useRequirementStore-C7O8yrSI.js";import"./vue-multiselect.esm-D6GIYbKv.js";const B={class:"container mx-auto p-6"},$={class:"max-w-xl mx-auto bg-white shadow-lg rounded-lg p-6"},F={class:"mb-4"},G=["value"],O={class:"mb-4"},W={class:"mb-4"},h={class:"mb-4"},z={class:"mb-4"},J={key:0,class:"mb-4 text-red-500 font-medium"},K={class:"flex items-center gap-4"},Q=["disabled"],re={__name:"RequirementAdd",setup(X){const r=N(),g=D(),x=H(),u=s(""),d=s(""),m=s(""),p=s("MEDIUM"),n=s(!1),y=A(),{departments:S}=q(y),{projects:V}=q(x),b=s(""),_=M(()=>{var c;return(c=b.value)==null?void 0:c.id});I(()=>{y.fetchDepartments(),x.fetchProjects()});const k=async()=>{n.value=!0,await r.createRequirement({project_id:u.value,title:d.value,department_id:_.value,description:[m.value],priority:p.value}),n.value=!1,r.error||g.push({name:"RequirementList"})};return(c,e)=>(a(),i("div",B,[t("div",$,[e[13]||(e[13]=t("h2",{class:"text-2xl font-semibold text-gray-800 mb-4"},"Add New Requirement",-1)),t("form",{onSubmit:C(k,["prevent"])},[t("div",F,[e[7]||(e[7]=t("label",{class:"block text-gray-700 font-medium mb-2"},"Project",-1)),f(t("select",{"onUpdate:modelValue":e[0]||(e[0]=o=>u.value=o),class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},[e[6]||(e[6]=t("option",{value:""},"Select Project",-1)),(a(!0),i(L,null,j(l(V),o=>(a(),i("option",{key:o.id,value:o.id},v(o.name),9,G))),128))],512),[[w,u.value]])]),t("div",O,[e[8]||(e[8]=t("label",{class:"block text-gray-700 font-medium mb-2"}," Requirement Title ",-1)),f(t("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>d.value=o),type:"text",required:"",placeholder:"Enter requirement title",class:"w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[E,d.value]])]),t("div",W,[e[9]||(e[9]=t("label",{class:"block text-gray-700 font-medium mb-2"}," Department ",-1)),R(P,{modelValue:b.value,"onUpdate:modelValue":e[2]||(e[2]=o=>b.value=o),options:l(S),multiple:!1,"track-by":"id",label:"name",placeholder:"Select department",required:""},null,8,["modelValue","options"])]),t("div",h,[e[11]||(e[11]=t("label",{class:"block text-gray-700 font-medium mb-2"},"Priority",-1)),f(t("select",{"onUpdate:modelValue":e[3]||(e[3]=o=>p.value=o),class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},e[10]||(e[10]=[t("option",{value:"LOW"},"LOW",-1),t("option",{value:"MEDIUM"},"MEDIUM",-1),t("option",{value:"HIGH"},"HIGH",-1),t("option",{value:"CRITICAL"},"CRITICAL",-1)]),512),[[w,p.value]])]),t("div",z,[e[12]||(e[12]=t("label",{class:"block text-gray-700 font-medium mb-2"}," Description ",-1)),R(T,{modelValue:m.value,"onUpdate:modelValue":e[4]||(e[4]=o=>m.value=o),placeholder:"Enter requirement description",class:"w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,8,["modelValue"])]),l(r).error?(a(),i("div",J,v(l(r).error),1)):U("",!0),t("div",K,[t("button",{disabled:n.value,type:"submit",class:"bg-blue-500 hover:bg-blue-600 text-white font-semibold px-5 py-2 rounded transition"},v(n.value?"Saving...":"Save Requirement"),9,Q),t("button",{type:"button",onClick:e[5]||(e[5]=o=>l(g).push({name:"RequirementList"})),class:"bg-gray-200 hover:bg-gray-300 text-gray-700 font-semibold px-5 py-2 rounded transition"}," Cancel ")])],32)])]))}};export{re as default};
