import{r as x,s as k,b as R,A as y,c,a as e,d as m,C as w,F as S,x as D,h,i as T,m as B,v as H,k as P,f as F,o as p,t as s,g as N}from"./index-CKknogop.js";import{L as U}from"./LoaderView-ChiQtjzw.js";import{_ as W}from"./MultiselectDropdown-q6dnAQUf.js";import{u as j}from"./attendance-Bu8DBdDC.js";import{u as E}from"./company-2RI7UgQL.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vue-multiselect.esm-BoQhFJUE.js";const I={class:"px-4 space-y-4"},O={class:"flex flex-wrap gap-4"},$=["value"],z={key:1,class:"space-y-4"},G={key:0,class:"overflow-x-auto card-bg"},J={class:"min-w-full table-auto border-collapse border border-gray-300 bg-white"},K={class:"text-center text-sm"},Q={class:"border px-2 py-0.5"},X={class:"border px-2 py-0.5"},Y={class:"border px-2 py-0.5"},Z={class:"border px-2 py-0.5"},g={class:"border px-2 py-0.5"},tt={class:"border px-2 py-0.5"},et={class:"border px-2 py-0.5"},st={class:"border px-2 py-0.5"},at={class:"border px-2 py-0.5"},rt={class:"border px-2 py-0.5"},dt={class:"border px-2 py-0.5"},ot={class:"border px-2 py-0.5"},pt={class:"border px-2 py-0.5"},nt={class:"border px-2 py-0.5"},ct={class:"border px-2 py-0.5"},lt={class:"border px-2 py-0.5"},it={class:"border py-0.5"},ut={class:"border-b border-black font-semibold text-green-600"},_t={class:"text-gray-600"},yt={class:"border px-2 py-0.5"},bt={class:"border px-2 py-0.5"},xt={class:"border px-2 py-0.5"},ht={class:"border px-2 py-0.5"},vt={class:"border px-2 py-0.5"},mt={class:"border px-2 py-0.5"},ft={class:"border px-2 py-0.5"},kt={class:"border px-2 py-0.5"},wt={key:1,class:"text-center text-red-500 text-xl italic mt-10"},Rt={__name:"MonthlyAttendanceSummaryReport",setup(St){const b=N(),i=F(),v=E(),u=j(),d=x(i.query.company_id||""),n=x(null),l=x(i.query.date||u.selectedMonth),{companies:C,employees:f}=k(v),{monthly_company_summary:L}=k(u),o=x(""),_=async()=>{var r;d.value&&await u.getMonthlyAttendanceSummaryReport(d.value,(r=n==null?void 0:n.value)==null?void 0:r.id,o==null?void 0:o.value,l.value)},A=async()=>{d.value&&await u.downloadExcel(d.value,o==null?void 0:o.value,l.value)},V=async()=>{d.value&&await u.downloadPDF(d.value,o==null?void 0:o.value,l.value)};R(async()=>{await v.fetchCompanies(),await _(),n.value=f.value.find(r=>r.id==i.query.employee_id)}),y(d,r=>{v.fetchEmployee(r)}),y([d,l],_),y(d,r=>{b.replace({query:{...i.query,company_id:r}})}),y(l,r=>{b.replace({query:{...i.query,date:r}})}),y(n,r=>{b.replace({query:{...i.query,employee_id:r==null?void 0:r.id}})}),y(n,r=>{r!=null&&r.id&&_()});const q=()=>b.go(-1);return(r,a)=>(p(),c("div",I,[e("div",{class:"flex items-center justify-between gap-2"},[e("button",{class:"btn-3",onClick:q},a[4]||(a[4]=[e("i",{class:"far fa-arrow-left"},null,-1),e("span",{class:"hidden md:flex"},"Back",-1)])),a[7]||(a[7]=e("h1",{class:"title-md md:title-lg flex-wrap text-center"},"Monthly Attendance Summary Report",-1)),e("div",{class:"flex gap-4"},[e("button",{type:"button",onClick:A,class:"btn-1"},a[5]||(a[5]=[e("i",{class:"far fa-file-excel text-2xl text-green-500"},null,-1)])),e("button",{type:"button",onClick:V,class:"btn-1"},a[6]||(a[6]=[e("i",{class:"fal fa-file-pdf text-2xl text-red-500"},null,-1)]))])]),e("div",O,[e("div",null,[m(e("select",{id:"userSelect","onUpdate:modelValue":a[0]||(a[0]=t=>d.value=t),onChange:_,class:"input-1"},[a[8]||(a[8]=e("option",{value:"",disabled:""},"Select a Company",-1)),(p(!0),c(S,null,D(h(C),t=>(p(),c("option",{key:t==null?void 0:t.id,value:t==null?void 0:t.id},s(t==null?void 0:t.name),9,$))),128))],544),[[w,d.value]])]),e("div",null,[m(e("select",{"onUpdate:modelValue":a[1]||(a[1]=t=>o.value=t),onChange:_,class:"input-1"},a[9]||(a[9]=[T('<option value="">All Category</option><option value="executive">Executive</option><option value="support_staff">Support Staff</option><option value="doctor">Doctor</option><option value="academy_body">Academy Body</option>',5)]),544),[[w,o.value]])]),e("div",null,[B(W,{modelValue:n.value,"onUpdate:modelValue":a[2]||(a[2]=t=>n.value=t),options:h(f),multiple:!1,label:"label",placeholder:"Select employee"},null,8,["modelValue","options"])]),e("div",null,[m(e("input",{type:"month","onUpdate:modelValue":a[3]||(a[3]=t=>l.value=t),onChange:_,class:"input-1"},null,544),[[H,l.value]])])]),h(u).isLoading?(p(),P(U,{key:0})):(p(),c("div",z,[d.value?(p(),c("div",G,[e("table",J,[a[10]||(a[10]=e("thead",null,[e("tr",{class:"bg-gray-100 text-sm"},[e("th",{rowspan:"2",class:"border px-1 py-0.5"},"#"),e("th",{rowspan:"2",class:"border px-1 py-0.5"},"Employee Name"),e("th",{rowspan:"2",class:"border px-1 py-0.5"},"Designation"),e("th",{colspan:"5",class:"border px-1 py-0.5"},"Attendance Summary"),e("th",{colspan:"2",class:"border px-1 py-0.5"},"Actual Late"),e("th",{colspan:"2",class:"border px-1 py-0.5"},"Remaining Late"),e("th",{colspan:"2",class:"border px-1 py-0.5"},"Actual Early"),e("th",{colspan:"2",class:"border px-1 py-0.5"},"Remaining Early"),e("th",{rowspan:"2",class:"border px-1 py-0.5"},"Working Hour"),e("th",{rowspan:"2",class:"border px-1 py-0.5"},"OT Hour"),e("th",{colspan:"4",class:"border px-1 py-0.5"},"Leave Day"),e("th",{colspan:"2",class:"border px-1 py-0.5"},"Short Leave"),e("th",{rowspan:"2",class:"border px-1 py-0.5"},"Weekend Duty")]),e("tr",{class:"bg-gray-100 text-xs"},[e("th",{class:"border px-2 py-0.5"},"TD"),e("th",{class:"border px-2 py-0.5"},"TP"),e("th",{class:"border px-2 py-0.5"},"TW"),e("th",{class:"border px-2 py-0.5"},"TL"),e("th",{class:"border px-2 py-0.5"},"TA"),e("th",{class:"border px-1 py-0.5"},"Day"),e("th",{class:"border px-2 py-0.5"},"Hour"),e("th",{class:"border px-1 py-0.5"},"Day"),e("th",{class:"border px-2 py-0.5"},"Hour"),e("th",{class:"border px-1 py-0.5"},"Day"),e("th",{class:"border px-2 py-0.5"},"Hour"),e("th",{class:"border px-2 py-0.5"},"Day"),e("th",{class:"border px-2 py-0.5"},"Hour"),e("th",{class:"border px-2 py-0.5"},"CL"),e("th",{class:"border px-2 py-0.5"},"ML"),e("th",{class:"border px-2 py-0.5"},"SL"),e("th",{class:"border px-2 py-0.5"},"WPL"),e("th",{class:"border px-2 py-0.5"},"Delay"),e("th",{class:"border px-2 py-0.5"},"Early")])],-1)),e("tbody",K,[(p(!0),c(S,null,D(h(L),(t,M)=>(p(),c("tr",{key:t==null?void 0:t.date,class:"border-b border-gray-200 hover:bg-blue-200"},[e("td",Q,s(M+=1),1),e("td",X,s(t==null?void 0:t.user),1),e("td",Y,s(t==null?void 0:t.designation),1),e("td",Z,s(t==null?void 0:t.total_monthly_days),1),e("td",g,s(t==null?void 0:t.total_present),1),e("td",tt,s(t==null?void 0:t.total_weekend),1),e("td",et,s(t==null?void 0:t.total_leave),1),e("td",st,s(t==null?void 0:t.total_absent),1),e("td",at,s(t==null?void 0:t.actual_late_day),1),e("td",rt,s(t==null?void 0:t.actual_late_hour),1),e("td",dt,s(t==null?void 0:t.total_remain_late_day),1),e("td",ot,s(t==null?void 0:t.total_remain_late_hour),1),e("td",pt,s(t==null?void 0:t.actual_early_day),1),e("td",nt,s(t==null?void 0:t.actual_early_hour),1),e("td",ct,s(t==null?void 0:t.total_remain_early_day),1),e("td",lt,s(t==null?void 0:t.total_remain_early_hour),1),e("td",it,[e("div",ut,s((t==null?void 0:t.total_working_hours)||0),1),e("div",_t,s((t==null?void 0:t.total_shift_hour)||0),1)]),e("td",yt,s(t==null?void 0:t.total_overtime_hours),1),e("td",bt,s(t==null?void 0:t.total_cl_leave),1),e("td",xt,s(t==null?void 0:t.total_ml_leave),1),e("td",ht,s(t==null?void 0:t.total_sl_leave),1),e("td",vt,s(t==null?void 0:t.total_wpl_leave),1),e("td",mt,s(t==null?void 0:t.total_first_short_leave),1),e("td",ft,s(t==null?void 0:t.total_last_short_leave),1),e("td",kt,s(t.total_present_in_weekend),1)]))),128))])])])):(p(),c("div",wt,"Please select company"))]))]))}};export{Rt as default};
