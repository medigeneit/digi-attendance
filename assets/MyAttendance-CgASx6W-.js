import{e as W,I as Q,C as X,c as f,o as m,a as t,F as Y,x as Z,y as G,i as tt,j as l,t as s,w as et,u as nt,b as ot,d as st,r as H,p as lt,q as P,f as R,h as rt,v as at,k as o,g as it}from"./index-CXKAH7YD.js";import{_ as dt}from"./AttendanceTable-rI0qchre.js";import{L as ut}from"./LoaderView-DtUsTTgs.js";import{u as mt}from"./attendance-DRTH8_we.js";import"./datetime-C4Yr_jSk.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const pt={class:"absolute right-4 md:right-10 md:top-16 top-20 w-72 max-h-[28rem] overflow-y-auto bg-white shadow-xl border border-gray-200 rounded-xl p-4 z-50 transition-all duration-200 ease-out"},gt={class:"flex items-center justify-between mb-4 border-b pb-2"},yt={class:"space-y-3"},ft={__name:"ApplicationMenu",emits:["close"],setup(J,{emit:p}){const y=[{label:"Add Leave Application",route:"LeaveApplicationAdd"},{label:"Add Offday Exchange",route:"OffdayExchangeAdd"},{label:"Add Shift Exchange",route:"ShiftExchangeAdd"},{label:"Add Manual Attendance",route:"ManualAttendanceAdd"},{label:"Add Overtime",route:"MyOvertimeAdd"}],n=p,r=i=>{i.key==="Escape"&&n("close")};return W(()=>document.addEventListener("keydown",r)),Q(()=>document.removeEventListener("keydown",r)),(i,a)=>{const v=X("router-link");return m(),f("div",{class:"fixed inset-0 bg-black bg-opacity-25 z-40",onClick:a[2]||(a[2]=et(u=>n("close"),["self"]))},[t("div",pt,[t("div",gt,[a[3]||(a[3]=t("h2",{class:"text-lg font-semibold text-gray-800"},"Application Category",-1)),t("button",{onClick:a[0]||(a[0]=u=>n("close")),class:"text-gray-400 hover:text-red-500 text-2xl leading-none"}," Ã— ")]),t("div",yt,[(m(),f(Y,null,Z(y,(u,g)=>G(v,{key:g,to:{name:u.route},class:"block w-full text-center bg-gradient-to-r from-blue-100 to-blue-200 text-blue-800 font-medium py-2 rounded-md hover:from-blue-200 hover:to-blue-300 transition"},{default:tt(()=>[l(s(u.label),1)]),_:2},1032,["to"])),64))]),t("button",{onClick:a[1]||(a[1]=u=>n("close")),class:"mt-6 w-full bg-red-500 hover:bg-red-600 text-white py-2 rounded-md font-semibold transition"}," Close ")])])}}},vt={class:"px-4 space-y-4"},bt={class:"md:flex items-center justify-between gap-2"},ct={class:"title-lg md:title-lg flex-wrap text-center"},xt={class:"flex gap-4"},wt={class:"grid md:grid-cols-2 gap-4 text-sm"},At={class:"card-bg p-4 gap-1"},kt={class:"grid md:grid-cols-2"},Mt={class:"card-bg p-4 gap-1"},Ct={class:"flex justify-between items-center"},ht={class:"grid md:grid-cols-2"},Dt={key:1,class:"space-y-4"},Nt={__name:"MyAttendance",setup(J){const p=nt(),y=ot(),n=st(),r=mt(),i=H(y.query.date||r.selectedMonth),a=H(!1);function v(){a.value=!0}const u=lt(()=>{if(!i.value)return"";const[d,e]=i.value.split("-");return new Date(d,e-1).toLocaleDateString("en-US",{month:"long",year:"numeric"})}),g=async()=>{var d;(d=n.user)!=null&&d.id&&i.value&&await r.getMonthlyAttendanceByShift(n.user.id,i.value)};W(async()=>{n.isAuthenticated?(await n.fetchUser(),g()):p.push("/login")}),P(i,async d=>{r.selectedMonth=d,await g()}),P(i,d=>{p.replace({query:{...y.query,date:d}})});const K=()=>p.go(-1);return(d,e)=>{var b,x,w,A,k,M,C,h,D,S,L,E,$,B,_,N,V,j,O,T,U,q,I,z,F;return m(),f("div",vt,[t("div",bt,[t("button",{class:"btn-3",onClick:K},e[3]||(e[3]=[t("i",{class:"far fa-arrow-left"},null,-1),t("span",{class:"hidden md:flex"},"Back",-1)])),t("h1",ct," Attendance of "+s(u.value),1),t("div",xt,[t("div",null,[rt(t("input",{id:"monthSelect",type:"month","onUpdate:modelValue":e[0]||(e[0]=c=>i.value=c),onChange:g,class:"input-1"},null,544),[[at,i.value]])])])]),t("div",wt,[t("div",At,[e[13]||(e[13]=t("h2",{class:"title-md"},"User Info",-1)),e[14]||(e[14]=t("hr",null,null,-1)),t("div",kt,[t("p",null,[e[4]||(e[4]=t("strong",null,"Name:",-1)),l(" "+s((b=o(n).user)==null?void 0:b.name),1)]),t("p",null,[e[5]||(e[5]=t("strong",null,"Designation:",-1)),l(" "+s((w=(x=o(n).user)==null?void 0:x.designation)==null?void 0:w.title),1)]),t("p",null,[e[6]||(e[6]=t("strong",null,"Department:",-1)),l(" "+s((k=(A=o(n).user)==null?void 0:A.department)==null?void 0:k.name),1)]),t("p",null,[e[7]||(e[7]=t("strong",null,"Company:",-1)),l(" "+s((C=(M=o(n).user)==null?void 0:M.company)==null?void 0:C.name),1)]),t("p",null,[e[8]||(e[8]=t("strong",null,"Phone:",-1)),l(" "+s((h=o(n).user)==null?void 0:h.phone),1)]),t("p",null,[e[9]||(e[9]=t("strong",null,"Email:",-1)),l(" "+s((D=o(n).user)==null?void 0:D.email),1)]),t("p",null,[e[10]||(e[10]=t("strong",null,"Employee ID:",-1)),l(" "+s((S=o(n).user)==null?void 0:S.employee_id),1)]),t("p",null,[e[11]||(e[11]=t("strong",null,"Blood Group:",-1)),l(" "+s(((L=o(n).user)==null?void 0:L.blood)||"N/A"),1)]),t("p",null,[e[12]||(e[12]=t("strong",null,"Joining Date:",-1)),l(" "+s((E=o(n).user)==null?void 0:E.joining_date),1)])])]),t("div",Mt,[t("div",Ct,[e[15]||(e[15]=t("h2",{class:"title-md"},"Attendance Summary",-1)),t("button",{onClick:e[1]||(e[1]=c=>v()),class:"btn-2"},"Add New Application"),a.value?(m(),R(ft,{key:0,onClose:e[2]||(e[2]=c=>a.value=!1)})):it("",!0)]),e[22]||(e[22]=t("hr",null,null,-1)),t("div",ht,[t("p",null,[e[16]||(e[16]=t("strong",null,"Total Working Days:",-1)),l(" "+s(((B=($=o(r))==null?void 0:$.summary)==null?void 0:B.total_working_days)||0),1)]),t("p",null,[e[17]||(e[17]=t("strong",null,"Present Days:",-1)),l(" "+s(((N=(_=o(r))==null?void 0:_.summary)==null?void 0:N.total_present_days)||0),1)]),t("p",null,[e[18]||(e[18]=t("strong",null,"Absent Days:",-1)),l(" "+s(((j=(V=o(r))==null?void 0:V.summary)==null?void 0:j.total_absent_days)||0),1)]),t("p",null,[e[19]||(e[19]=t("strong",null,"Late Days:",-1)),l(" "+s(((T=(O=o(r))==null?void 0:O.summary)==null?void 0:T.actual_late_day)||0),1)]),t("p",null,[e[20]||(e[20]=t("strong",null,"Total Working Hours:",-1)),l(" "+s((q=(U=o(r))==null?void 0:U.summary)==null?void 0:q.total_working_hours),1)]),t("p",null,[e[21]||(e[21]=t("strong",null,"Total Overtime Hours:",-1)),l(" "+s((z=(I=o(r))==null?void 0:I.summary)==null?void 0:z.total_overtime_hours),1)])]),e[23]||(e[23]=t("p",null,null,-1))])]),o(r).isLoading?(m(),R(ut,{key:0})):(m(),f("div",Dt,[G(dt,{logs:(F=o(r))==null?void 0:F.monthlyLogs,applyApplication:!0},null,8,["logs"])]))])}}};export{Nt as default};
