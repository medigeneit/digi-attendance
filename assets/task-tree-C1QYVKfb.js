import{r as y,p as g,c as s,o as p,h as _,a as c,v as f,g as b,w as x}from"./index-XaBu5W-t.js";const v={class:"text-gray-600 relative"},T=["placeholder"],S={class:"absolute right-2 top-[50%] translate-y-[-50%] flex gap-1"},V={__name:"SearchInput",props:{modelValue:String,placeholder:{type:String,default:"Type to search..."},debounceTime:{type:Number,default:500}},emits:["update:modelValue"],setup(t,{emit:r}){const o=t,i=y(),n=r,e=l=>{n("update:modelValue",l||void 0)};let u=0;const d=g({get(){return o.modelValue},set(l){o.debounceTime>0?(clearTimeout(u),u=setTimeout(e,o.debounceTime,l)):e(l)}});return(l,a)=>(p(),s("div",v,[_(c("input",{ref_key:"searchInput",ref:i,id:"search","onUpdate:modelValue":a[0]||(a[0]=h=>d.value=h),type:"text",class:"!pr-7 w-full rounded-md px-2 py-1 border-2 border-gray-400 placeholder:text-sm focus:outline-gray-400 h-full",placeholder:t.placeholder},null,8,T),[[f,d.value]]),a[3]||(a[3]=c("label",{class:"absolute text-xs left-2.5 -top-1.5 bg-slate-100 text-blue-500"},"Search",-1)),c("div",S,[d.value?(p(),s("i",{key:0,class:"fas fa-times opacity-35 hover:opacity-60 cursor-pointer",onClick:a[1]||(a[1]=x(()=>{e(""),i.value.focus()},["prevent"]))})):b("",!0),a[2]||(a[2]=c("i",{class:"fas fa-search opacity-80"},null,-1))])]))}};function m(t,r){var i;let o=!0;if(r!=null&&r["user-ids"]&&(o=o&&t.users.some(n=>n.id==(r==null?void 0:r["user-ids"]))),r!=null&&r.status){const n={"not-completed":["IN_PROGRESS","PENDING"],"only-completed":["COMPLETED"]},e=n==null?void 0:n[r==null?void 0:r.status];o=o&&e.includes(t==null?void 0:t.status)}return((i=t==null?void 0:t.children_tasks)==null?void 0:i.length)>0?o&&(t==null?void 0:t.children_tasks.filter(n=>m(n,r)).length)>0:o}function I(t,r){var i,n;const o=e=>e.is_urgent&&e.is_important?4:e.is_urgent?3:e.is_important?2:e.is_target?1:0;return((n=(i=t==null?void 0:t.filter(e=>m(e,r)))==null?void 0:i.map(e=>({...e,children_tasks:e.children_tasks.length>0?I(e.children_tasks,r):[]})))==null?void 0:n.sort((e,u)=>{const d=o(e),l=o(u);return l!==d?l-d:u.priority!==e.priority?u.priority-e.priority:u.serial!==e.serial?u.serial-e.serial:u.id-e.id}))||[]}export{V as _,I as m};
