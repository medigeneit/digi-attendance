import{E as b,r as c,G as d}from"./index-b79Cgc5B.js";const C=b("attendance",()=>{const i=c([]),g=c([]),v=c([]),p=c(null),w=c(null),h=c(new Date().toISOString().substring(0,7)),f=c(new Date().toISOString().substring(0,10)),t=c(null),s=c(!1);return{monthlyLogs:i,dailyLateLogs:v,summary:p,monthly_company_summary:w,selectedMonth:h,selectedDate:f,error:t,isLoading:s,dailyLogs:g,getMonthlyAttendanceByShift:async(o,a)=>{var r,n;if(!o||!a){t.value="Invalid user ID or month";return}s.value=!0;try{const e=await d.get(`/user/${o}/attendance/monthly/${a}`);i.value=e.data.monthly_logs,p.value=e.data.summary,t.value=null}catch(e){t.value=((n=(r=e.response)==null?void 0:r.data)==null?void 0:n.message)||"Something went wrong",console.error(t.value)}finally{s.value=!1}},getTodayAttendanceReport:async(o,a,r)=>{var n,e;s.value=!0;try{const l={companyId:o,month:a,status:r},m=await d.get("/attendance/today",{params:l});g.value=m.data,t.value=null}catch(l){t.value=((e=(n=l.response)==null?void 0:n.data)==null?void 0:e.message)||"Something went wrong",console.error(t.value)}finally{s.value=!1}},getAttendanceLateReport:async(o,a)=>{var r,n;s.value=!0;try{const e={company_id:o,month:a},l=await d.get("/attendance/late-reports",{params:e});v.value=l.data,t.value=null}catch(e){t.value=((n=(r=e.response)==null?void 0:r.data)==null?void 0:n.message)||"Something went wrong",console.error(t.value)}finally{s.value=!1}},getMonthlyAttendanceSummaryReport:async(o,a)=>{var r,n;if(!o||!a){t.value="Invalid user ID or month";return}s.value=!0;try{const e={company_id:o,month:a},l=await d.get("/attendance/monthly-summary-reports",{params:e});w.value=l.data,t.value=null}catch(e){t.value=((n=(r=e.response)==null?void 0:r.data)==null?void 0:n.message)||"Something went wrong",console.error(t.value)}finally{s.value=!1}},downloadExcel:async(o,a)=>{var r,n;if(!o||!a){t.value="Invalid company ID or month";return}s.value=!0;try{const e={company_id:o,month:a},l=await d.get("/attendance/monthly-summary-reports?flag=excel",{params:e,responseType:"blob"}),m=window.URL.createObjectURL(new Blob([l.data])),u=document.createElement("a");u.href=m,u.setAttribute("download",`${a} attendance_summary.xlsx`),document.body.appendChild(u),u.click(),document.body.removeChild(u)}catch(e){t.value=((n=(r=e.response)==null?void 0:r.data)==null?void 0:n.message)||"Something went wrong",console.error(t.value)}finally{s.value=!1}},downloadPDF:async(o,a,r=0)=>{var n,e;if(!o||!a){t.value="Invalid user ID or month";return}s.value=!0;try{const l={company_id:o,month:a},m=await d.get("/attendance/monthly-summary-reports?flag=pdf",{params:l,responseType:"blob"}),u=window.URL.createObjectURL(new Blob([m.data])),y=document.createElement("a");y.href=u,y.setAttribute("download",`${a} attendance_summary.pdf`),document.body.appendChild(y),y.click(),document.body.removeChild(y)}catch(l){t.value=((e=(n=l.response)==null?void 0:n.data)==null?void 0:e.message)||"Something went wrong",console.error(t.value)}finally{s.value=!1}}}});export{C as u};
