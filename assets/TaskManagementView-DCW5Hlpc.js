import{o as a,c as l,a as t,t as o,q as f,s as k,b,F as p,x as h,l as T,h as y,y as B,e as S,z as I,k as D,m as x,g as N,f as E,r as M,A as V,B as O,n as v,p as z}from"./index-CaMuXalC.js";import{u as A}from"./useBugStore-BVkjZxFC.js";import{u as F}from"./useMeetingStore-Cu5TUJBV.js";import{u as R}from"./useProjectStore-DKakRMIB.js";import{u as H}from"./useTodoStore-C9uxWyUi.js";import{u as U}from"./useRequirementStore-DYPlKKos.js";import{u as G}from"./useTaskStore-CtVgNPtn.js";import{_ as J}from"./_plugin-vue_export-helper-DlAUqK2U.js";const K={class:"bg-white rounded-lg p-4 shadow hover:shadow-md transition-shadow"},Q={class:"flex items-center justify-between pb-2"},W={class:"text-sm font-medium text-gray-700"},X={class:"text-2xl font-bold text-gray-900"},Y={class:"text-xs text-gray-500 mt-1"},$={__name:"DashboardCard",props:{title:String,value:[String,Number],subtext:String,icon:String,color:String},setup(u){const m=`fa-${u.icon}`;return(d,i)=>(a(),l("div",K,[t("div",Q,[t("h3",W,o(u.title),1),t("i",{class:f(["fas",m,u.color,"text-sm"])},null,2)]),t("div",X,o(u.value),1),t("p",Y,o(u.subtext),1)]))}},Z={class:"space-y-4"},tt={class:"space-y-4"},et={class:"flex items-start justify-between"},st={class:"space-y-1"},ot={class:"flex items-center gap-2"},at={class:"text-xs font-medium text-gray-500"},rt={class:"font-medium text-gray-800"},nt={class:"text-sm text-gray-500"},lt={class:"text-xs text-gray-500"},it={key:0},ct={key:1},dt={__name:"BugsTab",setup(u){const r=A(),{bugs:m}=k(r);b(()=>{r.fetchBugs()});const d=i=>{switch(i){case"Open":return"border-blue-500 text-blue-500";case"In Progress":return"border-yellow-500 text-yellow-500";case"Resolved":return"border-green-500 text-green-500";default:return"border-gray-300 text-gray-400"}};return(i,s)=>(a(),l("div",Z,[s[1]||(s[1]=t("h2",{class:"text-xl font-semibold"},"Bug Tracking",-1)),t("div",tt,[(a(!0),l(p,null,h(y(m),e=>{var n;return a(),l("div",{key:e.id,class:"rounded-lg border bg-white p-4 shadow hover:bg-gray-50 transition-colors"},[t("div",et,[t("div",st,[t("div",ot,[t("span",at,o(e.id),1),t("span",{class:f(["text-xs font-medium px-2 py-1 rounded border",d(e.status)])},o(e.status),3)]),t("h3",rt,o(e.title),1),t("p",nt,"Project: "+o((n=e.project)==null?void 0:n.name),1),t("p",lt,[e.users.length?(a(),l("span",it,[s[0]||(s[0]=T(" Assigned to: ")),t("strong",null,o(e.users.map(c=>c.name).join(", ")),1)])):(a(),l("span",ct,"Not assign"))])])])])}),128))])]))}},ut={class:"space-y-4"},_t={class:"space-y-2"},mt={class:"space-y-3"},xt={class:"flex items-start justify-between"},pt={class:"font-medium text-gray-800"},ht={class:"text-sm text-gray-500"},gt={class:"flex items-center gap-1 mt-2"},yt={class:"flex -space-x-2"},ft={key:0,class:"text-xs text-gray-500 ml-2"},bt={class:"flex flex-col gap-2 text-sm"},vt={__name:"MeetingsTab",setup(u){const r=F(),{meetings:m}=k(r);b(()=>{r.fetchMeetings()});const d=s=>s.split(" ").map(e=>e[0]).join("").toUpperCase(),i=B(()=>m.value.map(s=>{const e=new Date(s.start_time),n=new Date(s.end_time),c=g=>g.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0}),_=g=>{const j=new Date,w=new Date(g),L=w.toDateString()===j.toDateString(),C=new Date;C.setDate(j.getDate()+1);const P=w.toDateString()===C.toDateString();return L?"Today":P?"Tomorrow":w.toLocaleDateString()};return{title:s.title,start_time:c(e),end_time:c(n),users:s.users.map(g=>g.name),day:_(s.start_time)}}));return(s,e)=>(a(),l("div",ut,[e[1]||(e[1]=t("h2",{class:"text-xl font-semibold"},"Scheduled Meetings",-1)),t("div",_t,[t("div",mt,[(a(!0),l(p,null,h(i.value,(n,c)=>(a(),l("div",{key:c,class:"rounded-lg border bg-white p-4 shadow hover:bg-gray-50 transition-colors"},[t("div",xt,[t("div",null,[t("h4",pt,o(n==null?void 0:n.title),1),t("p",ht,o(n.start_time)+" - "+o(n.end_time),1),t("div",gt,[t("div",yt,[(a(!0),l(p,null,h(n.users.slice(0,2),(_,g)=>(a(),l("div",{key:g,class:"w-6 h-6 rounded-full bg-gray-200 text-[10px] font-bold flex items-center justify-center text-gray-700 border"},o(d(_)),1))),128))]),n.users.length>2?(a(),l("span",ft," +"+o(n.users.length-2)+" more ",1)):S("",!0)])]),t("div",bt,[T(o(n==null?void 0:n.day)+" ",1),e[0]||(e[0]=t("button",{class:"text-blue-600 hover:underline"},"Details",-1))])])]))),128))])])]))}},$t={class:"space-y-4"},kt={class:"grid gap-4 md:grid-cols-2 lg:grid-cols-3"},wt={class:"flex justify-between items-center mb-2"},Tt={class:"font-medium text-gray-800"},St={class:"text-sm text-gray-500 mb-1"},jt={class:"text-sm text-gray-500 mb-1"},Ct={__name:"ProjectsTab",setup(u){const r=R(),{projects:m}=k(r);return b(()=>{r.fetchProjects()}),(d,i)=>(a(),l("div",$t,[i[0]||(i[0]=t("h2",{class:"text-xl font-semibold"},"Project Overview",-1)),t("div",kt,[(a(!0),l(p,null,h(y(m),s=>{var e;return a(),l("div",{key:s.name,class:"rounded-lg border bg-white p-4 shadow hover:shadow-md transition-shadow"},[t("div",wt,[t("h3",Tt,o(s.name),1),t("span",{class:f(["text-xs px-2 py-1 rounded text-white",s.priorityClass])},o(s.priority),3)]),t("p",St,"Company: "+o((e=s==null?void 0:s.company)==null?void 0:e.name),1),t("p",jt," Total Requirements: "+o(s==null?void 0:s.requirements_count),1)])}),128))])]))}},Dt={class:"container mx-auto px-4 py-6"},Mt={key:0,class:"text-center text-gray-500 py-6"},Rt={key:1,class:"text-center text-red-500 py-6"},qt={key:2},Lt={class:"grid gap-4"},Pt={key:0,class:"inline-flex items-center text-green-600 text-xs font-semibold bg-green-100 px-2 py-0.5 rounded-full"},Bt={class:"text-sm text-gray-500 mt-1"},It={class:"inline-block bg-blue-100 text-blue-800 text-xs font-semibold px-2 py-0.5 rounded"},Nt={class:"ml-2"},Et={class:"text-sm text-gray-500 mt-2"},Vt={class:"bg-gray-100 text-gray-700 px-2 py-0.5 ml-2 rounded-full text-xs"},Ot={__name:"ReportTab",setup(u){const r=H();return b(()=>{r.fetchTodos()}),(m,d)=>(a(),l("div",Dt,[d[1]||(d[1]=t("h2",{class:"text-2xl font-bold text-gray-800 mb-6"},"ðŸ“‹ Todo List",-1)),y(r).loading?(a(),l("div",Mt,"Loading...")):y(r).error?(a(),l("div",Rt,o(y(r).error),1)):(a(),l("div",qt,[t("ul",Lt,[(a(!0),l(p,null,h(y(r).todos,i=>{var s,e;return a(),l("li",{key:i.id,class:"flex justify-between items-start gap-4 p-4 bg-white border rounded-lg shadow-sm hover:shadow-md transition"},[t("div",null,[t("h3",{class:f(["font-medium text-gray-800",{"line-through text-gray-400":i.status==="COMPLETED"}])},o(i.message),3),i.status==="COMPLETED"?(a(),l("span",Pt," âœ… Completed ")):S("",!0),t("p",Bt,[t("span",It,o(i.todoable_type.split("\\").pop()),1),t("span",Nt,o(((s=i.todoable)==null?void 0:s.title)||"No title"),1)]),t("p",Et,[d[0]||(d[0]=t("i",{class:"far fa-user-friends"},null,-1)),t("span",Vt,o((e=i==null?void 0:i.user)==null?void 0:e.name),1)])])])}),128))])]))]))}},zt={class:"space-y-4"},At={class:"space-y-4"},Ft={class:"flex items-start justify-between"},Ht={class:"space-y-1"},Ut={class:"flex items-center gap-2"},Gt={class:"text-xs font-medium text-gray-500"},Jt={class:"font-medium text-gray-800"},Kt={class:"text-sm text-gray-500"},Qt={class:"text-right"},Wt={class:"text-sm"},Xt={class:"font-medium"},Yt={class:"text-gray-500"},Zt={class:"mt-1 h-2 w-24 bg-gray-200 rounded"},te={__name:"RequirementsTab",setup(u){const r=U(),{requirements:m}=k(r);b(()=>{r.fetchRequirements()});const d=i=>{switch(i){case"High":return"border-red-500 text-red-500";case"Medium":return"border-yellow-500 text-yellow-500";default:return"border-gray-300 text-gray-500"}};return(i,s)=>(a(),l("div",zt,[s[0]||(s[0]=t("h2",{class:"text-xl font-semibold"},"Project Requirements",-1)),t("div",At,[(a(!0),l(p,null,h(y(m),e=>{var n;return a(),l("div",{key:e.id,class:"rounded-lg border bg-white p-4 shadow hover:bg-gray-50 transition-colors"},[t("div",Ft,[t("div",Ht,[t("div",Ut,[t("span",Gt,o(e.id),1),t("span",{class:f(["text-xs px-2 py-1 rounded border",d(e.priority)])},o(e.priority),3)]),t("h3",Jt,o(e.title),1),t("p",Kt,"Project: "+o((n=e.project)==null?void 0:n.name),1)]),t("div",Qt,[t("div",Wt,[t("span",Xt,o(e.completed_tasks_count),1),t("span",Yt,"/"+o(e.tasks_count)+" tasks",1)]),t("div",Zt,[t("div",{class:"h-full bg-blue-500 rounded",style:I({width:e.completed_tasks_count/e.tasks_count*100+"%"})},null,4)])])])])}),128))])]))}},ee={__name:"TaskTreeChildren",props:{childrenTasks:{type:Array,required:!0,default:[]}},setup(u){return(r,m)=>(a(),l("div",null,[(a(!0),l(p,null,h(u.childrenTasks,d=>(a(),D(q,{key:d.id,task:d},null,8,["task"]))),128))]))}},se={class:"mb-6 rounded border-b p-3"},oe={class:"flex items-start justify-between"},ae={class:"space-y-1"},re={class:"flex items-center gap-2 text-xs text-gray-500"},ne={class:"font-medium"},le={class:"font-medium"},ie={class:"px-2 py-0.5 rounded bg-blue-100 text-blue-800"},ce={class:"font-medium text-gray-800"},de={key:0,class:"text-sm text-gray-500"},ue={class:"w-10 h-6 rounded-full bg-gray-200 flex items-center justify-center text-xs font-medium text-gray-600"},_e={class:"text-sm text-gray-600"},me={class:"text-right"},xe={class:"ml-10 mt-4"},q={__name:"TaskTreeView",props:{task:{type:Object,required:!0}},setup(u){const r=d=>d.split(" ").map(i=>i[0]).join("").toUpperCase(),m=d=>{switch(d){case"HIGH":return"border-red-500 text-red-500";case"MEDIUM":return"border-yellow-500 text-yellow-500";default:return"border-gray-300 text-gray-500"}};return(d,i)=>{var s,e,n,c;return a(),l("div",se,[t("div",oe,[t("div",ae,[t("div",re,[t("span",ne,"PI: "+o(u.task.parent_id),1),t("span",le,o(u.task.id),1),t("span",ie,o(u.task.status),1)]),t("h3",ce,o(u.task.title),1),(s=u.task)!=null&&s.requirement?(a(),l("p",de," Requirement: "+o((n=(e=u.task)==null?void 0:e.requirement)==null?void 0:n.title),1)):S("",!0),(a(!0),l(p,null,h(u.task.users,(_,g)=>(a(),l("div",{class:"mt-2 flex items-center gap-2",key:g},[t("div",ue,o(r(_==null?void 0:_.name)),1),t("span",_e,o(_==null?void 0:_.name),1)]))),128))]),t("div",me,[t("span",{class:f(["text-xs px-2 py-1 rounded border",m(u.task.priority)])},o(u.task.priority),3)])]),t("div",xe,[t("div",null,"Sub Tasks ("+o((c=u.task.children_tasks)==null?void 0:c.length)+")",1),x(ee,{childrenTasks:u.task.children_tasks},null,8,["childrenTasks"])])])}}},pe={class:"space-y-4"},he={class:"space-y-4"},ge={__name:"TasksTab",setup(u){const r=G(),{tasks:m,taskListTree:d}=k(r);return b(()=>{r.fetchTasks()}),(i,s)=>(a(),l("div",pe,[s[0]||(s[0]=t("h2",{class:"text-xl font-semibold"},"Requirement Tasks",-1)),t("div",he,[(a(!0),l(p,null,h(y(d),e=>(a(),l("div",{key:e.id,class:"rounded-lg border bg-white p-4 shadow hover:bg-gray-50 transition-colors"},[x(q,{task:e},null,8,["task"])]))),128))])]))}},ye={class:"space-y-4"},fe={class:"flex gap-2 border rounded-md bg-white p-2"},be=["onClick"],ve={class:"bg-white rounded-lg p-4 shadow"},$e={__name:"Tabs",setup(u){const r=N(),m=E(),d=[{label:"Projects",value:"projects",icon:"fa-folder"},{label:"Requirements",value:"requirements",icon:"fa-file-alt"},{label:"Tasks",value:"tasks",icon:"fa-tasks"},{label:"Bugs",value:"bugs",icon:"fa-bug"},{label:"Meetings",value:"meetings",icon:"fa-users"},{label:"Reports",value:"reports",icon:"fa-file-chart-line"}],i=M(m.query.tab||"projects");V(i,e=>{r.push({query:{tab:e}})});const s={projects:Ct,requirements:te,tasks:ge,reports:Ot,bugs:dt,meetings:vt};return(e,n)=>(a(),l("div",ye,[t("div",fe,[(a(),l(p,null,h(d,c=>t("button",{key:c.value,onClick:_=>i.value=c.value,class:f(["flex items-center gap-2 px-4 py-2 rounded-md text-sm font-medium",i.value===c.value?"bg-blue-600 text-white shadow":"text-gray-600 hover:bg-gray-100"])},[t("i",{class:f(["fas",c.icon,"text-sm"])},null,2),T(" "+o(c.label),1)],10,be)),64))]),t("div",ve,[(a(),D(O(s[i.value])))])]))}},ke=J($e,[["__scopeId","data-v-16f7d2bd"]]),we={class:"flex min-h-screen flex-col bg-slate-50"},Te={class:"flex flex-1 flex-col gap-4 p-4 md:gap-8 md:p-6"},Se={class:"grid gap-4 md:grid-cols-2 lg:grid-cols-5"},Be={__name:"TaskManagementView",setup(u){const r=M({}),m=R();return b(async()=>{try{const d=await m.fetchTaskManagementSummary();r.value=d.data}catch(d){console.error("Failed to fetch summary:",d)}}),(d,i)=>{const s=z("RouterLink");return a(),l("div",we,[t("main",Te,[i[0]||(i[0]=t("div",{class:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between"},[t("div",null,[t("h1",{class:"text-2xl font-bold tracking-tight"},"Task Management"),t("p",{class:"text-sm text-gray-500"}," Manage your projects, requirements, tasks, bugs, and meetings. ")])],-1)),t("div",Se,[x(s,{to:{name:"ProjectList"}},{default:v(()=>{var e,n,c;return[x($,{title:"Projects",value:(e=r.value.projects)==null?void 0:e.total,subtext:`${(c=(n=r.value)==null?void 0:n.projects)==null?void 0:c.active} active projects`,icon:"folder",color:"text-cyan-500"},null,8,["value","subtext"])]}),_:1}),x(s,{to:{name:"RequirementList"}},{default:v(()=>{var e,n,c,_;return[x($,{title:"Requirements",value:(n=(e=r.value)==null?void 0:e.requirements)==null?void 0:n.total,subtext:`${(_=(c=r.value)==null?void 0:c.requirements)==null?void 0:_.completed} completed`,icon:"file-alt",color:"text-indigo-500"},null,8,["value","subtext"])]}),_:1}),x(s,{to:{name:"TaskList"}},{default:v(()=>{var e,n,c,_;return[x($,{title:"Tasks",value:(n=(e=r.value)==null?void 0:e.tasks)==null?void 0:n.total,subtext:`${(_=(c=r.value)==null?void 0:c.tasks)==null?void 0:_.completed} in completed`,icon:"tasks",color:"text-purple-500"},null,8,["value","subtext"])]}),_:1}),x(s,{to:{name:"BugList"}},{default:v(()=>{var e,n,c,_;return[x($,{title:"Bugs",value:(n=(e=r.value)==null?void 0:e.bugs)==null?void 0:n.total,subtext:`${(_=(c=r.value)==null?void 0:c.bugs)==null?void 0:_.solved} solved`,icon:"bug",color:"text-red-500"},null,8,["value","subtext"])]}),_:1}),x(s,{to:{name:"MeetingList"}},{default:v(()=>{var e,n,c,_;return[x($,{title:"Meetings",value:(n=(e=r.value)==null?void 0:e.meetings)==null?void 0:n.total,subtext:`${(_=(c=r.value)==null?void 0:c.meetings)==null?void 0:_.today} today`,icon:"users",color:"text-teal-500"},null,8,["value","subtext"])]}),_:1})]),x(ke)])])}}};export{Be as default};
