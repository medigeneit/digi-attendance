import{r as k,b as U,c as n,a,h as o,F as S,t as i,x as V,q as L,m as r,n as f,f as h,p as N,o as l,l as p,g as q}from"./index-CTZQYg1W.js";import{u as F}from"./useTaskStore-y26rK1v5.js";import{_ as H}from"./CommentModal-CE_q9qZD.js";import"./useCommentStore-WQt4aA9p.js";const $={class:"container mx-auto p-6"},j={class:"max-w-3xl mx-auto bg-white shadow-lg rounded-lg p-6"},z={key:0,class:"text-center py-4 text-gray-500"},K={class:"hover:bg-gray-50 grid grid-cols-2"},W={class:"py-2 font-medium col-span-full text-xl"},J={class:"py-2 font-medium mb-4 col-span-full"},Q={class:"flex gap-2 flex-wrap"},X={class:"py-2"},Y={class:"py-2"},Z={class:"px-4 py-2 flex justify-center items-center gap-2 col-span-full"},ss={key:2,class:"text-center py-4 text-red-500"},ls={__name:"TaskShow",setup(ts){const t=F(),A=h(),D=q(),g=k(null),c=k(!1),M=A.params.id;k(!1),U(async()=>{await t.fetchTask(M)});const B=u=>{event.stopPropagation(),D.push({name:"TaskEdit",params:{id:u}})},O=()=>{c.value=!1,g.value=null};return(u,s)=>{var x,y,b,v,_,T,w,C,E,I,P,R;const m=N("RouterLink"),G=N("router-view");return l(),n("div",$,[a("div",j,[o(t).loading?(l(),n("div",z,"Loading task details...")):o(t).task?(l(),n(S,{key:1},[a("section",K,[a("div",W,i(o(t).task.title),1),a("div",J,[s[6]||(s[6]=a("div",{class:"text-xs mb-0.5 text-gray-600 uppercase"},"Assigns",-1)),a("div",Q,[(l(!0),n(S,null,V(o(t).task.users,e=>(l(),n("span",{onClick:s[0]||(s[0]=d=>d.stopPropagation()),key:e.id,class:"btn-1 !inline-flex flex-shrink-0"},[s[5]||(s[5]=a("i",{class:"fad fa-user"},null,-1)),p(" "+i(e==null?void 0:e.name),1)]))),128))])]),a("div",X,[s[7]||(s[7]=a("div",{class:"text-xs mb-0.5 text-gray-600 uppercase"},"Priority",-1)),a("span",{class:L([{"text-green-600":((x=o(t).task)==null?void 0:x.priority)==="LOW","text-yellow-600":((y=o(t).task)==null?void 0:y.priority)==="MEDIUM","text-orange-600":((b=o(t).task)==null?void 0:b.priority)==="HIGH","text-red-600":((v=o(t).task)==null?void 0:v.priority)==="CRITICAL"},"font-semibold"])},i(o(t).task.priority),3)]),a("div",Y,[s[8]||(s[8]=a("div",{class:"text-xs mb-0.5 text-gray-600 uppercase"},"Status",-1)),a("span",{class:L([{"bg-gray-200":((_=o(t).task)==null?void 0:_.status)==="PENDING","bg-blue-200":((T=o(t).task)==null?void 0:T.status)==="IN_PROGRESS","bg-green-200":((w=o(t).task)==null?void 0:w.status)==="COMPLETED","bg-red-200":((C=o(t).task)==null?void 0:C.status)==="BLOCKED"},"px-3 py-0.5 rounded-full"])},i((E=o(t).task)==null?void 0:E.status),3)]),s[12]||(s[12]=a("hr",{class:"my-3 col-span-full"},null,-1)),a("div",Z,[a("button",{onClick:s[1]||(s[1]=e=>{var d;return B((d=o(t).task)==null?void 0:d.id)}),class:"btn-2"},"Edit"),r(m,{to:{name:"TaskUserAssign",params:{id:(I=o(t).task)==null?void 0:I.id}},class:"bg-indigo-500 hover:bg-indigo-600 text-white font-semibold px-3 py-1 rounded-full transition",onClick:s[2]||(s[2]=e=>e.stopPropagation())},{default:f(()=>s[9]||(s[9]=[a("i",{class:"fas fa-user-plus"},null,-1),p(" Assign Users ")])),_:1},8,["to"]),r(m,{to:{name:"TaskAdd",query:{parent_id:(P=o(t).task)==null?void 0:P.id}},onClick:s[3]||(s[3]=e=>e.stopPropagation()),class:"py-1 btn-3 ml-auto"},{default:f(()=>s[10]||(s[10]=[a("i",{class:"fas fa-plus"},null,-1),p(" Sub Task")])),_:1},8,["to"]),r(m,{to:{name:"TaskReports",params:{id:(R=o(t).task)==null?void 0:R.id}},onClick:s[4]||(s[4]=e=>e.stopPropagation()),class:"py-1 btn-3"},{default:f(()=>s[11]||(s[11]=[a("i",{class:"fal fa-file-alt"},null,-1),p(" Reports")])),_:1},8,["to"])])]),r(G)],64)):(l(),n("div",ss,i(o(t).error||"Task not found."),1))]),r(H,{show:c.value,"commentable-id":g.value,"commentable-type":"task","user-id":u.userId,"on-close":O,onSubmitted:o(t).fetchTasks},null,8,["show","commentable-id","user-id","onSubmitted"])])}}};export{ls as default};
