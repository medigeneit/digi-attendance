import{u as E,b as G,r as f,s as y,e as J,A as _,c as x,o as v,a as e,m as K,t as n,h as u,g as h,C as S,F as R,x as T,l as q,i as U,v as O,q as k}from"./index-6-7E_vKF.js";import{L as Q}from"./LoaderView-DahUVqD7.js";import{_ as P}from"./MultiselectDropdown-CyA0LBcw.js";import{u as X}from"./attendance-BPtzz3iw.js";import{u as Y}from"./company-N_bAFuRs.js";import{u as Z}from"./department-sAPcJMAd.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vue-multiselect.esm-DUndi5SL.js";const I={class:"px-4 space-y-4"},ee={class:"flex items-center justify-between gap-2"},te={class:"title-md md:title-lg flex-wrap text-center"},se={class:"flex flex-wrap gap-4"},ae=["value"],oe={key:1,class:"space-y-4"},le={class:"overflow-x-auto card-bg"},ne={class:"min-w-full table-auto border-collapse border border-gray-300 bg-white"},ie={class:"text-center text-xs"},re={class:"border px-1 py-0.5"},de={class:"border px-1 py-0.5"},ue={class:"border px-1 py-0.5"},pe={class:"border px-1 py-0.5"},ce=["title"],ve=["title"],be=["title"],fe={class:"border px-1 py-0.5"},xe={class:"border px-1 py-0.5"},_e={class:"border px-1 py-0.5"},we={__name:"TodayAttendanceReport",setup(he){var A;const D=E(),b=G(),m=Y(),V=Z(),i=X(),r=f(""),d=f(""),a=f(""),$=f(""),p=f(((A=b==null?void 0:b.query)==null?void 0:A.search)||""),o=f("all"),{companies:N,employees:W}=y(m),{departments:g}=y(V),{dailyLogs:F}=y(i),c=async()=>{(r.value||p.value)&&await i.getTodayAttendanceReport(r.value,d==null?void 0:d.value.id,a==null?void 0:a.value.id,o==null?void 0:o.value,i.selectedDate,p.value)};J(async()=>{await m.fetchCompanies(),await i.getTodayAttendanceReport(r.value,d==null?void 0:d.value.id,a==null?void 0:a.value.id,o==null?void 0:o.value,i.selectedDate,p.value)}),_([r,$],c),_(r,l=>{m.fetchEmployee(l),V.fetchDepartments(l)}),_(d,l=>{l!=null&&l.id&&c()}),_(a,l=>{l!=null&&l.id&&c()});const H=async()=>{await i.attendanceDownloadExcel(r.value,a==null?void 0:a.value.id,o==null?void 0:o.value,i.selectedDate,p.value)},M=async()=>{await i.attendanceDownloadPdf(r.value,a==null?void 0:a.value.id,o==null?void 0:o.value,i.selectedDate,p.value)},j=()=>D.go(-1);return _(p,l=>{D.push({query:{...b.query,search:l}})}),(l,s)=>{var C,w,L,B;return v(),x("div",I,[e("div",ee,[e("button",{class:"btn-3",onClick:j},s[6]||(s[6]=[e("i",{class:"far fa-arrow-left"},null,-1),e("span",{class:"hidden md:flex"},"Back",-1)])),e("h1",te," Daily "+n(((w=(C=u(b))==null?void 0:C.query)==null?void 0:w.search)==="all"?"Attendance":(B=(L=u(b))==null?void 0:L.query)==null?void 0:B.search)+" Report ",1),e("div",{class:"flex gap-4"},[e("button",{type:"button",onClick:H,class:"btn-1"},s[7]||(s[7]=[e("i",{class:"far fa-file-excel text-2xl text-green-500"},null,-1)])),e("button",{type:"button",onClick:M,class:"btn-1"},s[8]||(s[8]=[e("i",{class:"fal fa-file-pdf text-2xl text-red-500"},null,-1)]))])]),e("div",se,[e("div",null,[h(e("select",{id:"userSelect","onUpdate:modelValue":s[0]||(s[0]=t=>r.value=t),onChange:c,class:"input-1"},[s[9]||(s[9]=e("option",{value:"",disabled:""},"Select a Company",-1)),(v(!0),x(R,null,T(u(N),t=>(v(),x("option",{key:t==null?void 0:t.id,value:t==null?void 0:t.id},n(t==null?void 0:t.name),9,ae))),128))],544),[[S,r.value]])]),e("div",null,[q(P,{modelValue:d.value,"onUpdate:modelValue":s[1]||(s[1]=t=>d.value=t),options:u(g),multiple:!1,placeholder:"Select department",label:"name"},null,8,["modelValue","options"])]),e("div",null,[q(P,{modelValue:a.value,"onUpdate:modelValue":s[2]||(s[2]=t=>a.value=t),options:u(W),multiple:!1,placeholder:"Select employee",label:"label"},null,8,["modelValue","options"])]),e("div",null,[h(e("select",{id:"userSelect","onUpdate:modelValue":s[3]||(s[3]=t=>o.value=t),onChange:c,class:"input-1"},s[10]||(s[10]=[U('<option value="all">All Category</option><option value="executive">Executive</option><option value="support_staff">Support Staff</option><option value="doctor">Doctor</option><option value="academy_body">Academy Body</option>',5)]),544),[[S,o.value]])]),e("div",null,[h(e("select",{id:"userSelect","onUpdate:modelValue":s[4]||(s[4]=t=>p.value=t),onChange:c,class:"input-1"},s[11]||(s[11]=[U('<option value="all">All Status</option><option value="Present">Present</option><option value="Absent">Absent</option><option value="Weekend">Weekend</option><option value="Holiday">Holiday</option><option value="Leave">Leave</option>',6)]),544),[[S,p.value]])]),e("div",null,[h(e("input",{type:"date","onUpdate:modelValue":s[5]||(s[5]=t=>u(i).selectedDate=t),onChange:c,class:"input-1"},null,544),[[O,u(i).selectedDate]])])]),u(i).isLoading?(v(),K(Q,{key:0})):(v(),x("div",oe,[e("div",le,[e("table",ne,[s[12]||(s[12]=e("thead",null,[e("tr",{class:"bg-gray-200 text-xs"},[e("th",{class:"border p-1"},"#"),e("th",{class:"border p-1"},"Emp/Worker Name"),e("th",{class:"border p-1"},"Date"),e("th",{class:"border p-1"},"Day"),e("th",{class:"border p-1"},"Shift"),e("th",{class:"border p-1"},"Entry Time"),e("th",{class:"border p-1"},"Exit Time"),e("th",{class:"border p-1"},"Working Hours"),e("th",{class:"border p-1"},"Late Entry"),e("th",{class:"border p-1"},"Early Leave"),e("th",{class:"border p-1"},"Status")])],-1)),e("tbody",ie,[(v(!0),x(R,null,T(u(F),(t,z)=>(v(),x("tr",{key:t==null?void 0:t.date,class:"border-b hover:bg-blue-100"},[e("td",re,n(z+=1),1),e("td",de,n(t.user_name),1),e("td",ue,n(t.date),1),e("td",pe,n(t.weekday),1),e("td",{class:"border px-1 py-0.5",title:`${t.shift_start_time} to ${t.shift_end_time}`},n(t.shift_name),9,ce),e("td",{class:k(["border px-1 py-0.5",{"bg-red-200":t.late_duration}]),title:`Device: ${t.entry_device}`},n(t.entry_time),11,ve),e("td",{class:k(["border px-1 py-0.5",{"bg-red-200":t.early_leave_duration}]),title:`Device: ${t.exit_device}`},n(t.exit_time),11,be),e("td",fe,n(t.working_hours),1),e("td",xe,n(t.late_duration),1),e("td",_e,n(t.early_leave_duration),1),e("td",{class:k(["border px-1 py-0.5",{"text-red-600":t.status==="Absent","text-green-600":t.status==="Present"}])},n(t.status),3)]))),128))])])])]))])}}};export{we as default};
