import{r as b,s as h,b as P,q as _,c,a as t,d as f,A as m,F as D,x as k,h as v,l as U,B as S,v as $,j as N,o as d,t as n,y,g as W}from"./index-CNSx3uQY.js";import{L as g}from"./LoaderView-BG_BATwl.js";import{_ as F}from"./MultiselectDropdown-lx4o0cw5.js";import{u as H}from"./attendance-DjjhmfY8.js";import{u as M}from"./company-BXW5EgyX.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vue-multiselect.esm-B9F6nxVD.js";const j={class:"px-4 space-y-4"},q={class:"flex flex-wrap gap-4"},z=["value"],E={key:1,class:"space-y-4"},G={class:"overflow-x-auto card-bg"},J={class:"min-w-full table-auto border-collapse border border-gray-300 bg-white"},K={class:"text-center text-xs"},O={class:"border px-1 py-0.5"},Q={class:"border px-1 py-0.5"},X={class:"border px-1 py-0.5"},Y=["title"],Z=["title"],I=["title"],tt={class:"border px-1 py-0.5"},et={class:"border px-1 py-0.5"},st={class:"border px-1 py-0.5"},pt={__name:"TodayAttendanceReport",setup(at){const w=W(),x=M(),l=H(),i=b(""),a=b(""),A=b(""),r=b(""),o=b(""),{companies:C,employees:V}=h(x),{dailyLogs:L}=h(l),u=async()=>{(i.value||r.value)&&await l.getTodayAttendanceReport(i.value,a==null?void 0:a.value.id,o==null?void 0:o.value,l.selectedDate,r.value)};P(async()=>{await x.fetchCompanies(),await l.getTodayAttendanceReport(i.value,a==null?void 0:a.value.id,o==null?void 0:o.value,l.selectedDate,r.value)}),_([i,A],u),_(i,p=>{x.fetchEmployee(p)}),_(a,p=>{p!=null&&p.id&&u()});const B=async()=>{await l.attendanceDownloadExcel(i.value,a==null?void 0:a.value.id,o==null?void 0:o.value,l.selectedDate,r.value)},T=async()=>{await l.attendanceDownloadPdf(i.value,a==null?void 0:a.value.id,o==null?void 0:o.value,l.selectedDate,r.value)},R=()=>w.go(-1);return(p,s)=>(d(),c("div",j,[t("div",{class:"flex items-center justify-between gap-2"},[t("button",{class:"btn-3",onClick:R},s[5]||(s[5]=[t("i",{class:"far fa-arrow-left"},null,-1),t("span",{class:"hidden md:flex"},"Back",-1)])),s[8]||(s[8]=t("h1",{class:"title-md md:title-lg flex-wrap text-center"},"Daily Attendance Report",-1)),t("div",{class:"flex gap-4"},[t("button",{type:"button",onClick:B},s[6]||(s[6]=[t("i",{class:"far fa-file-excel text-2xl text-green-500"},null,-1)])),t("button",{type:"button",onClick:T},s[7]||(s[7]=[t("i",{class:"fal fa-file-pdf text-2xl text-red-500"},null,-1)]))])]),t("div",q,[t("div",null,[f(t("select",{id:"userSelect","onUpdate:modelValue":s[0]||(s[0]=e=>i.value=e),onChange:u,class:"input-1"},[s[9]||(s[9]=t("option",{value:"",disabled:""},"Select a Company",-1)),(d(!0),c(D,null,k(v(C),e=>(d(),c("option",{key:e==null?void 0:e.id,value:e==null?void 0:e.id},n(e==null?void 0:e.name),9,z))),128))],544),[[m,i.value]])]),t("div",null,[U(F,{modelValue:a.value,"onUpdate:modelValue":s[1]||(s[1]=e=>a.value=e),options:v(V),multiple:!1,placeholder:"Select employee"},null,8,["modelValue","options"])]),t("div",null,[f(t("select",{id:"userSelect","onUpdate:modelValue":s[2]||(s[2]=e=>o.value=e),onChange:u,class:"input-1"},s[10]||(s[10]=[S('<option value="">All Category</option><option value="executive">Executive</option><option value="support_staff">Support Staff</option><option value="doctor">Doctor</option><option value="academy_body">Academy Body</option>',5)]),544),[[m,o.value]])]),t("div",null,[f(t("select",{id:"userSelect","onUpdate:modelValue":s[3]||(s[3]=e=>r.value=e),onChange:u,class:"input-1"},s[11]||(s[11]=[S('<option value="">All Status</option><option value="Present">Present</option><option value="Absent">Absent</option><option value="Weekend">Weekend</option><option value="Holiday">Holiday</option><option value="Leave">Leave</option>',6)]),544),[[m,r.value]])]),t("div",null,[f(t("input",{type:"date","onUpdate:modelValue":s[4]||(s[4]=e=>v(l).selectedDate=e),onChange:u,class:"input-1"},null,544),[[$,v(l).selectedDate]])])]),v(l).isLoading?(d(),N(g,{key:0})):(d(),c("div",E,[t("div",G,[t("table",J,[s[12]||(s[12]=t("thead",null,[t("tr",{class:"bg-gray-200 text-xs"},[t("th",{class:"border p-1"},"Emp/Worker Name"),t("th",{class:"border p-1"},"Date"),t("th",{class:"border p-1"},"Day"),t("th",{class:"border p-1"},"Shift"),t("th",{class:"border p-1"},"Entry Time"),t("th",{class:"border p-1"},"Exit Time"),t("th",{class:"border p-1"},"Working Hours"),t("th",{class:"border p-1"},"Late Entry"),t("th",{class:"border p-1"},"Early Leave"),t("th",{class:"border p-1"},"Status")])],-1)),t("tbody",K,[(d(!0),c(D,null,k(v(L),e=>(d(),c("tr",{key:e==null?void 0:e.date,class:"border-b hover:bg-blue-100"},[t("td",O,n(e.user_name),1),t("td",Q,n(e.date),1),t("td",X,n(e.weekday),1),t("td",{class:"border px-1 py-0.5",title:`${e.shift_start_time} to ${e.shift_end_time}`},n(e.shift_name),9,Y),t("td",{class:y(["border px-1 py-0.5",{"bg-red-200":e.late_duration}]),title:`Device: ${e.entry_device}`},n(e.entry_time),11,Z),t("td",{class:y(["border px-1 py-0.5",{"bg-red-200":e.early_leave_duration}]),title:`Device: ${e.exit_device}`},n(e.exit_time),11,I),t("td",tt,n(e.working_hours),1),t("td",et,n(e.late_duration),1),t("td",st,n(e.early_leave_duration),1),t("td",{class:y(["border px-1 py-0.5",{"text-red-600":e.status==="Absent","text-green-600":e.status==="Present"}])},n(e.status),3)]))),128))])])])]))]))}};export{pt as default};
