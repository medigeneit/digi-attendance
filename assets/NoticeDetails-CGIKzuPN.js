import{j as I,r as m,b as U,c as i,a as t,k as j,t as r,F as E,x as H,e as P,d as $,v as q,q as z,m as A,o as l,f as R}from"./index-B9ISB_4A.js";import{L as Y}from"./LoaderView-BSozA6eF.js";import{_ as G}from"./ShareComponent-BW8RoaxQ.js";import{u as J}from"./notice-a0TZAxd1.js";import{S as K}from"./sweetalert2.esm.all-89IKscqO.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const O={class:"my-container space-y-6"},Q={class:"card-bg p-6"},W={key:1,class:"text-center text-red-500"},X={key:2,class:"grid gap-2"},Z={class:"bg-gray-100 p-4 rounded-lg"},ee={class:"grid md:grid-cols-2 gap-4"},te={class:"text-lg text-gray-800"},se={class:"text-lg text-gray-800"},ae={class:"text-lg text-gray-800"},oe={class:"text-lg text-gray-800"},le={class:"col-span-full"},ne=["innerHTML"],ie={key:0,class:"md:flex justify-center mt-8 gap-4"},re={class:"w-1/2"},de={key:1,class:"colored-bg-light text-center"},ye={__name:"NoticeDetails",setup(ce){const f=J(),g=I(),y=R(),u=m(""),s=m(null),v=m(!0),d=m(null),b=a=>new Date(a).toLocaleString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}),M=async()=>{var a,e,o;try{v.value=!0,d.value=null;const n=y.params.id;s.value=await f.fetchNoticeDetails(n),u.value=(a=s.value.user_feedback)==null?void 0:a.feedback}catch(n){d.value=((o=(e=n.response)==null?void 0:e.data)==null?void 0:o.message)||"Failed to load notice details",g.error(d.value)}finally{v.value=!1}},V=async()=>{var a,e;if(u.value)try{const o=y.params.id,n={feedback:u.value};await f.createNoticeFeedback(o,n),K.fire({position:"top-end",icon:"success",title:"Your feedback has been saved",showConfirmButton:!1,timer:1500})}catch(o){d.value=((e=(a=o.response)==null?void 0:a.data)==null?void 0:e.message)||"Failed to load notice details",g.error(d.value)}finally{v.value=!1}};U(async()=>{await M()});const T=async a=>{window.open(a,"_blank")};return(a,e)=>{var o,n,x,k,_,w,N,F,h,D,S,L,B;return l(),i("div",O,[t("div",Q,[e[10]||(e[10]=t("h2",{class:"title-lg text-center"},"Notice Details",-1)),v.value?(l(),j(Y,{key:0,class:"shadow-none"})):d.value?(l(),i("div",W,[t("p",null,r(d.value),1)])):(l(),i("div",X,[t("div",Z,[e[8]||(e[8]=t("p",{class:"title-md"},"Notice Info",-1)),e[9]||(e[9]=t("hr",{class:"mb-2"},null,-1)),t("div",ee,[t("div",null,[e[2]||(e[2]=t("p",{class:"text-sm font-bold text-gray-600"},"Company:",-1)),t("p",te,r(((n=(o=s.value)==null?void 0:o.company)==null?void 0:n.name)||"N/A"),1)]),t("div",null,[e[3]||(e[3]=t("p",{class:"text-sm font-bold text-gray-600"},"Department:",-1)),t("p",se,[(l(!0),i(E,null,H((x=s.value)==null?void 0:x.departments,(c,p)=>{var C;return l(),i("span",{key:c.id},r(c==null?void 0:c.name)+" "+r(p<((C=s.value)==null?void 0:C.departments.length)-1?", ":""),1)}),128))])]),t("div",null,[e[4]||(e[4]=t("p",{class:"text-sm font-bold text-gray-600"},"Published Date:",-1)),t("p",ae,r(b((k=s.value)==null?void 0:k.published_at)),1)]),t("div",null,[e[5]||(e[5]=t("p",{class:"text-sm font-bold text-gray-600"},"Expired Date:",-1)),t("p",oe,r(b((_=s.value)==null?void 0:_.expired_at)),1)]),t("div",null,[e[6]||(e[6]=t("p",{class:"text-sm font-bold text-gray-600"},"File:",-1)),(w=s.value)!=null&&w.file?(l(),i("button",{key:0,onClick:e[0]||(e[0]=c=>{var p;return T((p=s.value)==null?void 0:p.file)}),class:"btn-2"}," Download File ")):P("",!0)]),t("div",le,[e[7]||(e[7]=t("p",{class:"text-sm font-bold text-gray-600"},"Description / Body:",-1)),t("p",{class:"text-lg text-gray-800",innerHTML:(N=s.value)==null?void 0:N.description},null,8,ne)])])]),(F=s.value)!=null&&F.user_feedback?(l(),i("div",de," My Feedback: "+r((B=(L=s.value)==null?void 0:L.user_feedback)==null?void 0:B.feedback),1)):(l(),i("div",ie,[t("div",re,[$(t("input",{"onUpdate:modelValue":e[1]||(e[1]=c=>u.value=c),type:"text",class:"input-1",placeholder:"Please enter your feedback"},null,512),[[q,u.value]])]),t("div",{onClick:V,class:z({"btn-2":(h=s.value)==null?void 0:h.user_feedback,"btn-3":!((D=s.value)!=null&&D.user_feedback)})},r((S=s.value)!=null&&S.user_feedback?"Notice Feedback Updated":"Submit Notice Feedback"),3)]))])),A(G)])])}}};export{ye as default};
