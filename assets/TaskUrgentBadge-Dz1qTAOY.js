import{L as S,m,c as a,o as r,g,p as y,a as s,A as C,j as k,t as i,R as L,F as h,n as T,f as v,i as b,q as p,N as P,O as j,B as _,z as E}from"./index-C0UlG9qU.js";import{_ as $}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as w}from"./UserChip-BULrvQCh.js";const re=S({__name:"SubTaskProgress",props:{task:{}},setup(e,{expose:t}){const o=e,n=m(function(){return o.task.completed_count}),l=m(()=>o.task.children_task_count===0?o.task.status==="COMPLETED"?100:0:n.value/o.task.children_task_count*100),c=m(()=>{const u=l.value;let x,d,f;return u===100?(x="bg-green-50",d="bg-green-200",f="text-green-600 "):u<100&&(x="bg-red-50",d="bg-red-200",f="text-red-600 "),{container:x,bar:d,text:f}});return t({completedPercentage:l,completedSubTaskCount:n}),(u,x)=>(r(),a("div",null,[u.task.children_task_count>0?(r(),a("div",{key:0,class:y(["rounded-full border py-0.5 relative overflow-hidden h-6",c.value.container]),style:{width:"180px"}},[s("div",{class:y(["z-10 absolute top-0 bottom-0",c.value.bar]),style:C(`width: ${l.value}%`)},null,6),s("span",{class:y(["z-20 absolute inset-0 gap-1 text-center h-full flex justify-center items-center",c.value.text])},[s("span",null,[s("span",null,i(n.value),1),x[0]||(x[0]=k(" / ")),s("span",null,i(u.task.children_task_count),1)])],2)],2)):g("",!0)]))}}),I={key:0},ae={__name:"TaskStatus",props:{status:{type:String,required:!0},progressPercent:{type:Number,required:!0}},setup(e){const t=e,o=m(()=>{switch(t.status){case"COMPLETED":return"text-white bg-green-500  border-green-200 font-semibold";case"PENDING":return"text-red-500 bg-red-200  border-red-200";case"IN_PROGRESS":return"text-yellow-600 bg-yellow-200  border-yellow-200"}return"bg-blue-100 text-blue-800 border-blue-200"}),n=m(()=>{switch(t.status){case"COMPLETED":return"fas fa-check-circle"}return"fas fa-exclamation-circle"});return(l,c)=>(r(),a("div",{class:y(["px-2 py-0.5 text-xs rounded-full border flex items-center gap-1",o.value])},[s("i",{class:y(n.value)},null,2),s("span",null,i(e.status),1),e.progressPercent!==null||e.progressPercent!==void 0?(r(),a("span",I,i(e.progressPercent)+"% ",1)):g("",!0)],2))}},O={},R={class:"text-xs px-2 py-0.5 rounded-full border bg-yellow-800 text-white"};function B(e,t){return r(),a("span",R,t[0]||(t[0]=[s("i",{class:"far fa-exclamation-circle"},null,-1),k(" IMPORTANT ")]))}const ne=$(O,[["render",B]]),z={class:"relative"},A={key:0,class:"text-gray-400 text-xs"},M={class:"border rounded-full size-6 flex justify-center items-center border-blue-300 bg-blue-100"},q={key:0,class:"fas fa-user-cowboy text-blue-500"},D={key:1,class:"fas fa-user-crown text-blue-300"},U={key:2,class:"text-sm text-gray-500 group/users"},F={class:"cursor-pointer hover:underline text-blue-600"},V={class:"hidden absolute group-hover/users:block right-0 p-3 bg-white rounded shadow-lg z-30"},N={__name:"TaskAssignedUsers",props:{users:{type:Array,required:!0,default:()=>[]},maxItems:{type:Number,default:2},routeTo:{type:Function,default:null},isTargetTask:{Boolean,default:!1},listType:{String,default:"employee"},maxItem:{Number,default:2}},setup(e){const t=e,o=m(()=>t.users.slice(0,t.maxItem)),n=m(()=>t.users.slice(t.maxItem));function l(u){return typeof t.routeTo=="function"?t.routeTo(u):{}}const c=m(()=>typeof t.routeTo=="function"?L:"div");return(u,x)=>(r(),a("div",z,[t.users.length===0?(r(),a("div",A,i(e.listType=="supervisors"?"No Supervisor assigned":"Not Assigned To Anyone"),1)):(r(!0),a(h,{key:1},T(o.value,(d,f)=>(r(),v(_(c.value),j({key:f},{ref_for:!0},{...typeof t.routeTo=="function"?{to:l(d)}:{}}),{default:b(()=>[p(w,{class:y(["flex items-center gap-2 border rounded-full border-gray-300 shadow-sm",{"!bg-yellow-400":e.isTargetTask," !bg-blue-100":!e.isTargetTask&&e.listType=="employee"&&f===0}]),user:d},P({_:2},[f===0||e.listType=="supervisors"?{name:"after",fn:b(()=>[s("div",M,[e.listType=="supervisors"?(r(),a("i",q)):(r(),a("i",D))])]),key:"0"}:void 0]),1032,["class","user"])]),_:2},1040))),128)),n.value.length>0?(r(),a("div",U,[s("div",F," + "+i(n.value.length)+" more "+i(e.listType=="employee"?"users":e.listType=="supervisors"?"supervisor":""),1),s("div",V,[(r(!0),a(h,null,T(n.value,(d,f)=>(r(),v(_(c.value),{key:f,to:l(d),class:"w-full block mb-2"},{default:b(()=>[p(w,{class:y(["flex items-center gap-2 border rounded-full border-gray-300 shadow-sm w-full",{"!bg-yellow-400":e.isTargetTask}]),user:d},null,8,["class","user"])]),_:2},1032,["to"]))),128))])])):g("",!0)]))}},G={class:"col-span-full flex flex-col md:flex-row items-stretched my-2 lg:my-0 justify-center flex-wrap gap-x-5 gap-y-4"},H={class:"flex flex-col items-start justify-center gap-2 border border-dashed border-gray-200 rounded-lg shadow shadow-gray-100 bg-gray-50/40 p-1 px-1.5"},J={key:0,class:"text-xs px-2 py-0.5 rounded-full border bg-sky-500 text-white"},K={class:"flex flex-col items-start justify-center gap-2 border border-dashed border-gray-200 rounded-lg shadow shadow-gray-100 bg-gray-50/40 py-1 px-1.5"},Q={key:0,class:"text-xs px-2 py-0.5 rounded-full border bg-blue-500 text-white"},le={__name:"TaskSupervisorAndEmployee",props:{treeLevel:{type:Number,required:!0},task:{type:Object,required:!0},employeeRouteTo:{type:Function,default:null}},setup(e){return(t,o)=>{var n,l,c,u;return r(),a("div",G,[s("div",H,[e.treeLevel===0?(r(),a("div",J,i(((l=(n=e.task)==null?void 0:n.from_department)==null?void 0:l.name)||"--"),1)):g("",!0),p(N,{class:"flex items-center justify-center flex-wrap gap-x-3 gap-y-2",users:e.task.supervisors||[],listType:"supervisors",maxItem:1},null,8,["users"])]),o[0]||(o[0]=s("div",null,[s("span",{class:"flex md:hidden text-2xl text-gray-200 items-center justify-center h-full"},[s("i",{class:"fad fa-arrow-down"})]),s("span",{class:"hidden md:flex text-2xl text-gray-200 items-center justify-center h-full"},[s("i",{class:"fad fa-arrow-right"})])],-1)),s("div",K,[e.treeLevel===0?(r(),a("div",Q,i(((u=(c=e.task)==null?void 0:c.to_department)==null?void 0:u.name)||"--"),1)):g("",!0),p(N,{class:"flex items-center justify-center flex-wrap gap-x-3 gap-y-2",users:e.task.users||[],isTargetTask:e.task.is_target,routeTo:e.employeeRouteTo,maxItem:1},null,8,["users","isTargetTask","routeTo"])])])}}},W={class:"flex items-center gap-2"},oe={__name:"TaskTitleRouterLink",props:{task:Object,subTasksOpen:{type:Boolean,default:!1},isMyTask:{type:Boolean,default:!1}},setup(e){return(t,o)=>{var l;const n=E("RouterLink");return r(),a("div",W,[s("i",{class:y(["fad",((l=e.task)==null?void 0:l.children_task_count)>0?{"fa-folder text-blue-800/70":!e.subTasksOpen,"fa-folder-open text-blue-400":e.subTasksOpen}:"fa-file-alt text-gray-400"])},null,2),p(n,{to:{name:e.isMyTask?"MyTaskShow":"TaskShow",params:{id:e.task.id}},class:"font-medium text-gray-700 cursor-pointer hover:text-blue-700"},{default:b(()=>[s("div",null,i(e.task.title),1)]),_:1},8,["to"])])}}},X={},Y={class:"text-xs px-2 py-0.5 rounded-full border bg-red-500 text-white"};function Z(e,t){return r(),a("span",Y,t[0]||(t[0]=[s("i",{class:"far fa-exclamation-triangle"},null,-1),k(" URGENT ")]))}const ue=$(X,[["render",Z]]);export{ne as T,oe as _,ae as a,re as b,ue as c,le as d};
