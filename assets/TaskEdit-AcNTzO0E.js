import{r as c,b as V,A as w,c as a,a as e,h as r,w as N,d as m,v as x,t as p,e as _,l as S,m as E,C as U,f as T,o as n,g as C,p as D}from"./index-Vii3T_Hb.js";import{_ as M}from"./MultiselectDropdown-N6WFdsiO.js";import{u as R}from"./useTaskStore-BciFTofG.js";import{u as L}from"./user-C2jJhtZA.js";import"./vue-multiselect.esm-BAI3BEdM.js";const P={class:"container mx-auto p-6"},B={class:"max-w-xl mx-auto bg-white shadow-lg rounded-lg p-6"},G={key:0,class:"text-center py-4 text-gray-500"},O={class:"mb-4"},j={key:0,class:"mb-4"},A={class:"mb-4"},H={class:"block text-gray-600 text-sm mb-1 font-medium"},$={class:"grid grid-cols-2 gap-4 mb-4"},h={class:"mb-4"},K={key:1,class:"mb-4 text-red-500 font-medium"},W={class:"flex items-center gap-4"},z=["disabled"],F={key:2,class:"text-center py-4 text-red-500"},et={__name:"TaskEdit",setup(J){const s=R(),f=L(),q=T(),v=C(),y=q.params.id,u=c(!1),d=c([]),o=c({title:"",requirement_id:"",user_ids:"",priority:"MEDIUM",status:"PENDING",description:""});V(async()=>{f.fetchUsers(),await s.fetchTask(y),d.value=s.task.users,o.value={title:s.task.title,requirement_id:s.task.requirement_id,user_ids:s.task.users.map(i=>i.id).join(","),priority:s.task.priority,status:s.task.status,description:s.task.description}}),w(()=>s.task,i=>{o.value={title:i.title,requirement_id:i.requirement_id,user_ids:i.users.map(t=>t.id).join(","),priority:i.priority,status:i.status,description:i.description}});const I=async()=>{var t;u.value=!0;const i={...o.value,user_ids:((t=d.value)==null?void 0:t.map(b=>Number(b.id)))||[]};await s.updateTask(y,i),u.value=!1,s.error||v.push({name:"TaskList"})};return(i,t)=>{var g,k;const b=D("RequiredIcon");return n(),a("div",P,[e("div",B,[t[14]||(t[14]=e("h2",{class:"text-2xl font-semibold text-gray-800 mb-4"},"Edit Task",-1)),r(s).loading?(n(),a("div",G,"Loading task details...")):r(s).task?(n(),a("form",{key:1,onSubmit:N(I,["prevent"])},[e("div",O,[t[6]||(t[6]=e("label",{class:"block text-gray-700 font-medium mb-2"},"Task Title",-1)),m(e("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>o.value.title=l),required:"",placeholder:"Enter task title",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[x,o.value.title]])]),r(s).task.requirement?(n(),a("div",j,[t[7]||(t[7]=e("label",{class:"block text-gray-700 font-medium mb-2"},"Requirement",-1)),e("div",null,[e("p",null,p((k=(g=r(s).task)==null?void 0:g.requirement)==null?void 0:k.title),1)])])):_("",!0),e("div",A,[e("label",H,[t[8]||(t[8]=S("User ")),E(b)]),E(M,{modelValue:d.value,"onUpdate:modelValue":t[1]||(t[1]=l=>d.value=l),options:r(f).users,multiple:!0,"track-by":"id",label:"name",placeholder:"Select users"},null,8,["modelValue","options"])]),e("div",$,[e("div",null,[t[10]||(t[10]=e("label",{class:"block text-gray-700 font-medium mb-2"},"Priority",-1)),m(e("select",{"onUpdate:modelValue":t[2]||(t[2]=l=>o.value.priority=l),class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},t[9]||(t[9]=[e("option",null,"LOW",-1),e("option",null,"MEDIUM",-1),e("option",null,"HIGH",-1),e("option",null,"CRITICAL",-1)]),512),[[U,o.value.priority]])]),e("div",null,[t[12]||(t[12]=e("label",{class:"block text-gray-700 font-medium mb-2"},"Status",-1)),m(e("select",{"onUpdate:modelValue":t[3]||(t[3]=l=>o.value.status=l),class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},t[11]||(t[11]=[e("option",null,"PENDING",-1),e("option",null,"IN_PROGRESS",-1),e("option",null,"COMPLETED",-1),e("option",null,"BLOCKED",-1)]),512),[[U,o.value.status]])])]),e("div",h,[t[13]||(t[13]=e("label",{class:"block text-gray-700 font-medium mb-2"},"Description",-1)),m(e("textarea",{"onUpdate:modelValue":t[4]||(t[4]=l=>o.value.description=l),rows:"4",placeholder:"Enter task description",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[x,o.value.description]])]),r(s).error?(n(),a("div",K,p(r(s).error),1)):_("",!0),e("div",W,[e("button",{disabled:u.value,type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold px-5 py-2 rounded transition"},p(u.value?"Updating...":"Update Task"),9,z),e("button",{type:"button",onClick:t[5]||(t[5]=l=>r(v).push({name:"TaskList"})),class:"bg-gray-200 hover:bg-gray-300 text-gray-700 font-semibold px-5 py-2 rounded transition"}," Cancel ")])],32)):(n(),a("div",F,p(r(s).error||"Task not found."),1))])])}}};export{et as default};
