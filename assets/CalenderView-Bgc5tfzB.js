import{r as h,x as k,e as V,A as W,c as i,o as d,E as y,a as D,F as p,y as M,t as _,g as N}from"./index-CJO_Ci9q.js";const Y={class:"grid grid-cols-7 *:text-center *:p-2 *:border-r *:border-b *:text-blue-800 *:text-sm"},j={class:"flex flex-col"},q={key:0,class:"p-2 border-r border-t"},G={__name:"CalenderView",props:{month:{type:String,required:!0,validator:g=>/^\d{4}-(0[1-9]|1[0-2])$/.test(g)}},emits:["change"],setup(g,{emit:b}){const v=g,x=b,f=h(),m=h(),S=h(),w=h(),O=["Saturday","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday"];function $(e,n,a,s){const t=[];for(let l=a-1;l>=0;l--){const r=s-l,o=new Date(e,n-1,r);t.push({date:o,day:o.getDate(),month:o.getMonth()+1,year:o.getFullYear(),isCurrentMonth:!1})}return t}function I(e,n,a){const s=[];for(let t=1;t<=a;t++){const r={date:new Date(e,n,t),day:t,month:n+1,year:e,isCurrentMonth:!0};s.push(r)}return s}function F(e,n,a){const s=[...e],t=Math.ceil(s.length/7)*7,l=1;for(let r=0;s.length<t;r++){const o=new Date(n,a+1,l+r);s.push({date:o,day:o.getDate(),month:o.getMonth()+1,year:o.getFullYear(),isCurrentMonth:!1})}return s}function T(e,n){const a=new Date(e,n,1),t=new Date(e,n+1,0).getDate(),r=(a.getDay()+1)%7,B=new Date(e,n,0).getDate();let c=[];c=[...$(e,n,r,B)];const u=I(e,n,t);return S.value=u[0],w.value=u[u.length-1],c=[...c,...u],c=[...F(c,e,n)],f.value=c[0],m.value=c[c.length-1],c}const E=k(()=>{const[e,n]=v.month.split("-"),a=parseInt(e),s=parseInt(n)-1;return console.log({yearStr:e,monthStr:n}),T(a,s)}),L=k(()=>{const e=E.value,n=[];for(let a=0;a<e.length;a+=7)n.push(e.slice(a,a+7));return n});function C(){x("change",{gridStartDate:f.value,gridEndDate:m.value,startOfMonth:S.value,endOfMonth:w.value})}return V(()=>C()),W(()=>v.month,C),(e,n)=>(d(),i("div",null,[y(e.$slots,"calender-top"),D("div",Y,[(d(),i(p,null,M(O,a=>D("div",{key:a},_(a),1)),64))]),D("div",j,[(d(!0),i(p,null,M(L.value,(a,s)=>(d(),i("div",{class:"week grid grid-cols-7 min-h-28",key:s},[(d(!0),i(p,null,M(a,(t,l)=>y(e.$slots,"date",{key:l,day:t.day,month:t.month,year:t.year,weekday:(t.date.getDay()+1)%7,isCurrentMonth:t.isCurrentMonth,yearMonthDate:`${t.year}-${String(t.month).padStart(2,"0")}-${String(t.day).padStart(2,"0")}`},()=>{var r;return[t!=null&&t.date?(d(),i("div",q,_((r=t==null?void 0:t.date)==null?void 0:r.getDate()),1)):N("",!0)]})),128))]))),128))]),y(e.$slots,"calender-bottom")]))}};export{G as _};
