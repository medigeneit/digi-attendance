import{u as O,b as C,d as M,r as u,e as L,c as l,o,a as t,p as B,w as U,g as y,h as n,v,C as x,t as d,F as b,x as T,k as A}from"./index-Nb0dutxh.js";import{L as F}from"./LoaderView-CJgm30I9.js";import{u as I}from"./attendance-BM2PhGks.js";import{u as R}from"./department-C1RiiyJz.js";import{u as H}from"./overtime-BVrz5TOP.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const N={class:"max-w-2xl mx-auto p-4 space-y-4"},W={key:0,class:"text-center"},j={class:"grid grid-cols-2 gap-4"},$=["max"],E={class:"grid grid-cols-2 gap-4"},Y={class:"input-1 w-full text-center"},z={class:"input-1 w-full text-center"},G={class:"grid grid-cols-2 gap-4"},J=["label"],K=["value"],P={key:0,class:"text-red-500 text-sm"},le={__name:"MyOvertimeAdd",setup(Q){const c=O(),w=C(),f=R(),k=H(),g=I(),r=M(),S=u(!1),_=u(null),m=u({}),a=u({date:w.query.date||"",duty_type:"",request_overtime_hours:"",assigned_in_charge_user_id:"",work_details:""}),p=async()=>{await g.getMonthlyAttendanceByShift(r.user.id,D(a.value.date)),m.value=await g.getUserDailyLogsByDate(r.user.id,a.value.date)},D=i=>{const e=new Date(i),s=e.getFullYear(),V=String(e.getMonth()+1).padStart(2,"0");return`${s}-${V}`},h=()=>{c.go(-1)},q=async()=>{await k.createOvertime(a.value),c.push({name:"MyOvertimeList"})};return L(async()=>{var i;(i=r.user)!=null&&i.id||await r.fetchUser(),a.value.date&&await p(),await f.fetchDepartments("all")}),(i,e)=>(o(),l("div",N,[t("div",{class:"flex items-center justify-between gap-2"},[t("button",{class:"btn-3",onClick:h},e[5]||(e[5]=[t("i",{class:"far fa-arrow-left"},null,-1),t("span",{class:"hidden md:flex"},"Back",-1)])),e[6]||(e[6]=t("h1",{class:"title-md md:title-lg flex-wrap text-center"},"Overtime Request Form",-1))]),S.value?(o(),l("div",W,[B(F)])):(o(),l("form",{key:1,onSubmit:U(q,["prevent"]),class:"space-y-4 card-bg md:p-8 p-4 text-sm md:text-base"},[t("div",j,[t("div",null,[e[7]||(e[7]=t("label",{for:"date",class:"block text-sm font-medium"},"Date",-1)),n(t("input",{onChange:p,type:"date",id:"date","onUpdate:modelValue":e[0]||(e[0]=s=>a.value.date=s),class:"input-1 w-full",required:"",max:new Date(Date.now()-864e5).toISOString().split("T")[0]},null,40,$),[[v,a.value.date]])]),t("div",null,[e[9]||(e[9]=t("label",{for:"duty_type",class:"block text-sm font-medium"},"Duty Type",-1)),n(t("select",{id:"duty_type","onUpdate:modelValue":e[1]||(e[1]=s=>a.value.duty_type=s),class:"input-1 w-full",required:""},e[8]||(e[8]=[t("option",{value:"",selected:"",disabled:""},"--Duty Type--",-1),t("option",{value:"WL"},"WL",-1),t("option",{value:"HD"},"HD",-1),t("option",{value:"OVT"},"OVT",-1)]),512),[[x,a.value.duty_type]])])]),t("div",E,[t("div",null,[e[10]||(e[10]=t("span",{class:"block text-sm font-medium"},"Check In",-1)),t("div",Y,d(m.value.entry_time||"--:--"),1)]),t("div",null,[e[11]||(e[11]=t("span",{class:"block text-sm font-medium"},"Check Out",-1)),t("div",z,d(m.value.exit_time||"--:--"),1)])]),t("div",G,[t("div",null,[e[12]||(e[12]=t("label",{for:"request_overtime_hours",class:"block text-sm font-medium"}," Overtime (Hour) ",-1)),n(t("input",{onChange:p,type:"number",id:"request_overtime_hours","onUpdate:modelValue":e[2]||(e[2]=s=>a.value.request_overtime_hours=s),class:"input-1 w-full",required:""},null,544),[[v,a.value.request_overtime_hours]])]),t("div",null,[e[14]||(e[14]=t("label",{for:"assigned_in_charge_user_id",class:"block text-sm font-medium"}," In-Charge ",-1)),n(t("select",{id:"assigned_in_charge_user_id","onUpdate:modelValue":e[3]||(e[3]=s=>a.value.assigned_in_charge_user_id=s),class:"input-1 w-full",required:""},[e[13]||(e[13]=t("option",{value:"",selected:"",disabled:""},"--In-Charge--",-1)),(o(!0),l(b,null,T(A(f).departments,s=>(o(),l(b,{key:s.id},[s.in_charge?(o(),l("optgroup",{key:0,label:s.name},[t("option",{value:s.in_charge.id},d(s.in_charge.name),9,K)],8,J)):y("",!0)],64))),128))],512),[[x,a.value.assigned_in_charge_user_id]])])]),t("div",null,[e[15]||(e[15]=t("label",{for:"assigned_in_charge_user_id",class:"block text-sm font-medium"}," Details (Reason / Work description) ",-1)),n(t("textarea",{rows:"4","onUpdate:modelValue":e[4]||(e[4]=s=>a.value.work_details=s),class:"input-1 w-full"},null,512),[[v,a.value.work_details]])]),e[16]||(e[16]=t("hr",null,null,-1)),_.value?(o(),l("div",P,d(_.value),1)):y("",!0),e[17]||(e[17]=t("div",{class:"flex justify-center"},[t("button",{type:"submit",class:"btn-2"},"Submit")],-1))],32))]))}};export{le as default};
