import{u as A,d as M,r as f,A as N,e as D,k as F,c as r,o as i,a as t,l as _,p as H,n as T,w as j,f as W,t as p,h as c,g as v,C as O,F as $,y as z,v as k}from"./index-83bfbIx_.js";import{L as G}from"./LoaderView-12zrwMQQ.js";import{_ as I}from"./MultiselectDropdown-CFhIUf5e.js";import{u as J}from"./exchange-Paa8Rl5k.js";import{u as K}from"./user-GZWSySSm.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./vue-multiselect.esm-ChB_171N.js";const P={class:"max-w-3xl mx-auto p-4 space-y-4"},Q={class:"flex items-center justify-between gap-2"},X={key:0,class:"text-center"},Y={class:"title-lg text-center"},Z={class:"block text-sm font-medium"},ee=["value"],te={key:0,class:"text-red-500 text-sm"},ue={__name:"ShiftExchangeAdd",setup(se){const b=A(),B=J(),g=K(),a=M(),x=f(""),s=f({shift_id:"",exchange_type:"shift",selected_date:"",works_in_hand:"",handover_user_id:"",reason:""}),h=f(!1),d=f(null),L=async()=>{var n,e,u;h.value=!0,d.value=null;try{const o={user_id:(n=a==null?void 0:a.user)==null?void 0:n.id,current_shift_id:(u=(e=a==null?void 0:a.user)==null?void 0:e.current_shift)==null?void 0:u.shift_id,shift_id:s.value.shift_id,exchange_type:s.value.exchange_type,current_date:s.value.selected_date,exchange_date:s.value.selected_date,works_in_hand:s.value.works_in_hand,handover_user_id:s.value.handover_user_id,reason:s.value.reason},m=await B.createExchange(o);b.push({name:"ExchangeShiftShow",params:{id:m.id}})}catch(o){d.value=o.message||"Failed to submit shift exchange request"}finally{h.value=!1}};N(()=>x.value,n=>{s.value.handover_user_id=n==null?void 0:n.id}),D(()=>{g.fetchTypeWiseEmployees({except:"auth"}),a.fetchUser()});const R=()=>{b.go(-1)};return(n,e)=>{var o,m,w,y,S,E,U,V,C,q;const u=F("RouterLink");return i(),r("div",P,[t("div",Q,[t("button",{class:"btn-3",onClick:R},e[5]||(e[5]=[t("i",{class:"far fa-arrow-left"},null,-1),t("span",{class:"hidden md:flex"},"Back",-1)])),e[7]||(e[7]=t("h1",{class:"title-md md:title-lg flex-wrap text-center"},"Shift Exchange Request",-1)),t("div",null,[_(u,{to:"/",class:"btn-2"},{default:H(()=>e[6]||(e[6]=[T("Home")])),_:1})])]),h.value?(i(),r("div",X,[_(G)])):(i(),r("form",{key:1,onSubmit:j(L,["prevent"]),class:"space-y-4 card-bg md:p-8 p-4"},[t("div",null,[t("h4",Y,p((w=(m=(o=c(a))==null?void 0:o.user)==null?void 0:m.company)==null?void 0:w.name),1),e[8]||(e[8]=t("p",{class:"text-center"},"Shift Change Application",-1))]),t("p",Z," Current Shift: "+p((U=(E=(S=(y=c(a))==null?void 0:y.user)==null?void 0:S.current_shift)==null?void 0:E.shift)==null?void 0:U.name),1),t("div",null,[e[10]||(e[10]=t("label",{for:"shift_id",class:"block text-sm font-medium"},"Exchange Shift",-1)),v(t("select",{id:"shift_id","onUpdate:modelValue":e[0]||(e[0]=l=>s.value.shift_id=l),class:"input-1 w-full",required:""},[e[9]||(e[9]=t("option",{value:"",disabled:""},"- Select Shift -",-1)),(i(!0),r($,null,z((q=(C=(V=c(a))==null?void 0:V.user)==null?void 0:C.company)==null?void 0:q.shifts,l=>(i(),r("option",{key:l.id,value:l.id},p(l==null?void 0:l.name),9,ee))),128))],512),[[O,s.value.shift_id]])]),t("div",null,[e[11]||(e[11]=t("label",{for:"selected-date",class:"block text-sm font-medium"},"Select Date",-1)),v(t("input",{type:"date",id:"selected-date","onUpdate:modelValue":e[1]||(e[1]=l=>s.value.selected_date=l),class:"input-1 w-full",required:""},null,512),[[k,s.value.selected_date]])]),t("div",null,[e[12]||(e[12]=t("label",{for:"works-in-hand",class:"block text-sm font-medium"},"Reason",-1)),v(t("textarea",{id:"works-in-hand","onUpdate:modelValue":e[2]||(e[2]=l=>s.value.reason=l),class:"input-1 w-full",placeholder:"Enter details of reason"},null,512),[[k,s.value.reason]])]),t("div",null,[e[13]||(e[13]=t("label",{for:"works-in-hand",class:"block text-sm font-medium"},"Works in Hand (Optional)",-1)),v(t("textarea",{id:"works-in-hand","onUpdate:modelValue":e[3]||(e[3]=l=>s.value.works_in_hand=l),class:"input-1 w-full",placeholder:"Enter details of works in hand"},null,512),[[k,s.value.works_in_hand]])]),t("div",null,[e[14]||(e[14]=t("label",{for:"handover-user",class:"block text-sm font-medium"},"Handover User",-1)),_(I,{modelValue:x.value,"onUpdate:modelValue":e[4]||(e[4]=l=>x.value=l),options:c(g).users,multiple:!1,required:!1,label:"label",placeholder:"Select user"},null,8,["modelValue","options"])]),d.value?(i(),r("div",te,p(d.value),1)):W("",!0),e[15]||(e[15]=t("div",{class:"flex justify-center"},[t("button",{type:"submit",class:"btn-2"},"Submit")],-1))],32))])}}};export{ue as default};
