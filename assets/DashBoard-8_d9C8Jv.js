import{d as A,s as D,q,r as B,x as T,e as P,k as U,c as n,o as a,a as s,h as l,n as d,t as o,l as c,p as m,F as g,y as _,m as M,z as b}from"./index-bH8WiQRg.js";import{u as N}from"./user-QfRRQCyy.js";const V={class:"my-container"},C={class:"card-bg p-4 md:p-8"},I={key:0},j={class:"title-md"},z={class:"title-md"},E={key:1},F={key:0,class:"grid gap-4 md:grid-cols-3 mt-4"},H={class:"text-3xl"},W={class:"text-3xl"},$={class:"text-3xl"},Y={class:"text-3xl"},G={class:"text-3xl"},J={class:"text-3xl"},K={key:1,class:"w-full mt-4"},O={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Q={class:"bg-white shadow-md rounded-lg p-4"},X={class:"space-y-4"},Z={class:"flex justify-between items-center mb-4"},ss={class:"text-xl font-semibold text-gray-800"},ts={key:0},es={key:1},os={key:2},as={class:"space-y-4"},ls={class:"flex-1 min-w-0"},ns={class:"text-sm font-medium text-gray-900"},ds={class:"text-sm text-gray-500"},is={class:"text-xs text-gray-400 mt-1"},rs={class:"bg-white shadow-md rounded-lg p-6"},us={class:"overflow-x-auto shadow-md sm:rounded-lg"},ms={class:"min-w-full text-sm text-left text-gray-500"},cs={class:"px-6 py-4 font-medium text-gray-900"},ps={class:"px-6 py-4"},ys={class:"px-6 py-4"},fs={class:"px-6 py-4"},_s={__name:"DashBoard",setup(xs){const y=A(),f=N(),{dashboardInfo:p,selectedDate:S,userDashboard:x}=D(f),{user:r}=D(y),v=q(()=>{var i;return["admin","super_admin","developer"].includes((i=r==null?void 0:r.value)==null?void 0:i.role)}),h=B(localStorage.getItem("admin_mode")||"false");T(h,i=>{localStorage.setItem("admin_mode",i)}),P(async()=>{r.value||await y.fetchUser(),await w()}),T(h,async(i,e)=>{i!==e&&(console.log("adminMode changed:",i),await w())});async function w(){if(r.value){const i=h.value!=="false";v.value&&i?await f.fetchAdminDashboardData():await f.fetchUserDashboardData()}else console.error("User data is unavailable")}return(i,e)=>{var k,L;const u=U("RouterLink");return a(),n("div",V,[s("div",C,[l(r)?(a(),n("div",I,[s("p",null,[e[0]||(e[0]=d(" Hello ")),s("span",j,o(l(r).name)+"!",1)]),e[3]||(e[3]=s("h1",{class:"title-xl"},"Welcome back",-1)),s("p",null,[e[1]||(e[1]=s("i",{class:"fas fa-phone mr-2"},null,-1)),e[2]||(e[2]=d(" Your phone number is ")),s("span",z,o(l(r).phone),1)])])):(a(),n("div",E,e[4]||(e[4]=[s("p",null,"Loading...",-1)])))]),v.value&&l(y).adminMode?(a(),n("div",F,[c(u,{to:{name:"TodayAttendanceReport",query:{search:"all"}},class:"main-button"},{default:m(()=>{var t;return[s("span",H,o((t=l(p))==null?void 0:t.totalUsers),1),e[5]||(e[5]=d(" Total Employees "))]}),_:1}),c(u,{to:{name:"TodayAttendanceReport",query:{search:"Present"}},class:"main-button"},{default:m(()=>{var t;return[s("span",W,o((t=l(p))==null?void 0:t.todayPresents),1),e[6]||(e[6]=d(" Today Present "))]}),_:1}),c(u,{to:{name:"TodayAttendanceReport",query:{search:"Absent"}},class:"main-button"},{default:m(()=>{var t;return[s("span",$,o((t=l(p))==null?void 0:t.todayAbsents),1),e[7]||(e[7]=d(" Today Absent "))]}),_:1}),c(u,{to:{name:"LeaveApplicationList",query:{search:"today"}},class:"main-button"},{default:m(()=>{var t;return[s("span",Y,o((t=l(p))==null?void 0:t.todayLeaves),1),e[8]||(e[8]=d(" Today Leave "))]}),_:1}),c(u,{to:{name:"LeaveApplicationList",query:{search:"tomorrow"}},class:"main-button"},{default:m(()=>{var t;return[s("span",G,o((t=l(p))==null?void 0:t.tomorrowLeaves),1),e[9]||(e[9]=d(" Tomorrow Leave "))]}),_:1}),c(u,{to:{name:"ShortLeaveList",query:{search:l(S)}},class:"main-button"},{default:m(()=>{var t;return[s("span",J,o((t=l(p))==null?void 0:t.todayShortLeaves),1),e[10]||(e[10]=d(" Today Short Leaves "))]}),_:1},8,["to"])])):(a(),n("div",K,[s("div",O,[s("div",Q,[s("div",X,[e[14]||(e[14]=s("div",{class:"flex items-center"},[s("i",{class:"fas fa-file mr-2 h-5 w-5"}),s("h2",{class:"text-xl font-semibold"},"Recent Applications")],-1)),(a(!0),n(g,null,_((k=l(x))==null?void 0:k.current_month_leave,t=>(a(),M(u,{to:{name:"MyLeaveApplicationShow",params:{id:t.id}},key:t.id,class:"p-2 transition-shadow duration-300"},{default:m(()=>[s("div",Z,[s("h3",ss," Leave Application #"+o(t.id),1),s("p",{class:b(["text-sm font-medium flex items-center space-x-2",{"bg-gray-500 p-2 rounded-full px-4 text-white":t.status===null,"bg-yellow-500 p-2 rounded-full px-4 text-white":t.status==="Pending","bg-green-500 p-2 rounded-full px-4 text-white":t.status==="approved"}])},[t.status===null?(a(),n("span",ts,e[11]||(e[11]=[s("i",{class:"fas fa-clock mr-2"},null,-1),d(" Wait for Hanover ")]))):t.status==="Pending"?(a(),n("span",es,e[12]||(e[12]=[s("i",{class:"fas fa-hourglass-half mr-2"},null,-1),d(" Pending ")]))):(a(),n("span",os,e[13]||(e[13]=[s("i",{class:"fas fa-check-circle mr-2"},null,-1),d(" Approved ")])))],2)])]),_:2},1032,["to"]))),128))]),e[16]||(e[16]=s("div",{class:"flex justify-between items-start mb-4"},[s("div",{class:"flex items-center"},[s("i",{class:"fas fa-file mr-2 h-5 w-5"}),s("h2",{class:"text-xl font-semibold"},"Recent Notices")])],-1)),s("div",as,[(a(!0),n(g,null,_(l(x).notices,(t,R)=>(a(),n("div",{key:R,class:"flex items-start space-x-3 p-3 rounded-lg hover:bg-gray-50 transition-colors"},[s("div",{class:b(["p-1 rounded-full",t.priority==="high"?"bg-red-100":t.priority==="medium"?"bg-yellow-100":"bg-green-100"])},[s("span",{class:b(["h-3 w-3",t.priority==="high"?"bg-red-600":t.priority==="medium"?"bg-yellow-600":"bg-green-600","rounded-full inline-block"])},null,2)],2),s("div",ls,[s("p",ns,o(t.title),1),s("p",ds,o(t.description),1),s("p",is,o(t.published_at),1)]),c(u,{to:t.type===1?`/notice-details/${t.id}`:`/policy-details/${t.id}`,class:"text-blue-500 hover:text-blue-700 font-semibold"},{default:m(()=>e[15]||(e[15]=[d(" View Details ")])),_:2},1032,["to"])]))),128))])]),s("div",rs,[e[18]||(e[18]=s("h2",{class:"text-xl font-semibold"},"Leave Balance",-1)),s("div",us,[s("table",ms,[e[17]||(e[17]=s("thead",{class:"text-xs text-gray-700 uppercase bg-gray-50"},[s("tr",null,[s("th",{scope:"col",class:"px-6 py-3"},"Type"),s("th",{scope:"col",class:"px-6 py-3"},"Total Days"),s("th",{scope:"col",class:"px-6 py-3"},"Used Days"),s("th",{scope:"col",class:"px-6 py-3"},"Remaining Days")])],-1)),s("tbody",null,[(a(!0),n(g,null,_((L=l(x))==null?void 0:L.leave_balance,t=>(a(),n("tr",{key:t.id,class:"border-b hover:bg-gray-100"},[s("td",cs,o(t.leave_type),1),s("td",ps,o(t.total_leave_days),1),s("td",ys,o(t.used_days),1),s("td",fs,o(t.remaining_days),1)]))),128))])])])])])]))])}}};export{_s as default};
