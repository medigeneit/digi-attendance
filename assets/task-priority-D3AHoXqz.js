import{o as T}from"./url-CePbr-gY.js";import{D as c,r as v,m}from"./index-CIo6-YZh.js";import{u as P}from"./useTaskStore-Q7G4Qfeu.js";async function S({params:e={}}={}){return c.get("/tasks/employees",{params:e})}async function R(e,n){return c.put(`/my-tasks/${e}/update-status`,n)}async function $(e,{params:n={}}={}){const t=T(n);return c.delete(`/tasks/${e}${t?"?"+t:""}`)}async function C(e){return c.post(`/tasks/${e}/restore`)}function l(e,n){var o;let t=!0;if(n!=null&&n["user-ids"]&&(t=t&&e.users.some(r=>r.id==(n==null?void 0:n["user-ids"]))),n!=null&&n.status){const r={"not-completed":["IN_PROGRESS","PENDING"],"only-completed":["COMPLETED"]},d=r==null?void 0:r[n==null?void 0:n.status];t=t&&d.includes(e==null?void 0:e.status)}return((o=e==null?void 0:e.children_tasks)==null?void 0:o.length)>0?t&&(e==null?void 0:e.children_tasks.filter(r=>l(r,n)).length)>0:t}function I(e,n){var t;return((t=e==null?void 0:e.filter(o=>l(o,n)))==null?void 0:t.map(o=>({...o,children_tasks:o.children_tasks.length>0?I(o.children_tasks,n):[]})))||[]}function D(e,n=0){const t=v([]),{updateTaskPriorities:o}=P(),r=m(()=>(console.log({getOldTaskList:e}),e()));function d(s){const a=r.value.map(i=>i.id),u=s.map(i=>i.id);p(a,u)?t.value=u:t.value=[],console.log({reordered:p(a,u)})}function p(s,a){if(s.length!==a.length)return!1;for(let u=0;u<s.length;u++)if(s[u]!==a[u])return!0;return!1}function g(){t.value=[]}async function h(){const s=await o(n,t.value);return t.value=[],s}const y=m(()=>t.value.length>0);return{handleItemsPriorityUpdate:d,saveTaskPriority:h,listHasRearranged:y,discardTaskPriority:g}}export{R as a,$ as d,S as g,I as m,C as r,D as u};
