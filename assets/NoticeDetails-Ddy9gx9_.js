import{a0 as G,b as P,r as p,e as U,a7 as z,c as n,o as i,a,f as E,p as R,t as v,g as S,h as Y,v as q,x as A}from"./index-BsTyDmMu.js";import{L as J}from"./LoaderView-C2jQOlKR.js";import{_ as K}from"./ShareComponent-CwSzjG14.js";import{u as O}from"./notice-Cgn5qs_W.js";import{S as Q}from"./sweetalert2.esm.all-BQIkj5Wb.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const W={class:"my-container space-y-6"},X={class:"card-bg p-6"},Z={key:1,class:"text-center text-red-500"},ee={key:2,class:"grid gap-2"},te={class:"bg-gray-100 p-4 rounded-lg"},se={class:"grid md:grid-cols-2 gap-4"},ae={class:"col-span-full flex items-center gap-2"},oe=["innerHTML"],le={key:0,class:"col-span-full"},ie=["innerHTML"],ne={key:1,class:"col-span-full"},ce={class:"flex items-center gap-2"},re=["src"],de=["src"],ue={key:0,class:"md:flex justify-center mt-8 gap-4"},pe={class:"w-1/2"},ve={key:1,class:"colored-bg-light text-center"},xe={__name:"NoticeDetails",setup(fe){const m=O(),g=G(),_=P(),r=p(""),t=p(null),u=p(!0),c=p(null),H=async()=>{var s,e,o;try{u.value=!0,c.value=null;const l=_.params.id;t.value=await m.fetchNoticeDetails(l),r.value=(s=t.value.user_feedback)==null?void 0:s.feedback}catch(l){c.value=((o=(e=l.response)==null?void 0:e.data)==null?void 0:o.message)||"Failed to load notice details",g.error(c.value)}finally{u.value=!1}},V=async()=>{var s,e;if(r.value)try{const o=_.params.id,l={feedback:r.value};await m.createNoticeFeedback(o,l),Q.fire({position:"top-end",icon:"success",title:"Your feedback has been saved",showConfirmButton:!1,timer:1500})}catch(o){c.value=((e=(s=o.response)==null?void 0:s.data)==null?void 0:e.message)||"Failed to load notice details",g.error(c.value)}finally{u.value=!1}};U(async()=>{var s,e,o,l;await H(),z({title:((s=t.value)==null?void 0:s.title)||"Genesis - Notice",meta:[{property:"og:title",content:((e=t.value)==null?void 0:e.title)||"Genesis - Notice"},{property:"og:image",content:((o=t.value)==null?void 0:o.file)||"/src/assets/notice.png"},{property:"og:description",content:((l=t.value)==null?void 0:l.description)||"Genesis - Notice Description"}]})});const k=async s=>{window.open(s,"_blank")},$=s=>s?/\.(jpg|jpeg|png|gif|webp)$/i.test(s):!1,j=s=>s?/\.pdf$/i.test(s):!1,I=s=>s==null?void 0:s.split("/").pop();return(s,e)=>{var o,l,y,b,x,h,N,w,F,D,L,M,T,B,C;return i(),n("div",W,[a("div",X,[e[7]||(e[7]=a("h2",{class:"title-lg text-center"},"Notice Details",-1)),u.value?(i(),E(J,{key:0,class:"shadow-none"})):c.value?(i(),n("div",Z,[a("p",null,v(c.value),1)])):(i(),n("div",ee,[a("div",te,[e[5]||(e[5]=a("p",{class:"title-md"},"Notice Info",-1)),e[6]||(e[6]=a("hr",{class:"mb-2"},null,-1)),a("div",se,[a("div",ae,[e[3]||(e[3]=a("p",{class:"text-sm font-bold text-gray-600"},"Title:",-1)),a("p",{class:"text-lg text-gray-800",innerHTML:(o=t.value)==null?void 0:o.title},null,8,oe)]),(l=t.value)!=null&&l.description?(i(),n("div",le,[e[4]||(e[4]=a("p",{class:"text-sm font-bold text-gray-600"},"Description / Body:",-1)),a("p",{class:"text-lg text-gray-800",innerHTML:(y=t.value)==null?void 0:y.description},null,8,ie)])):S("",!0),(b=t.value)!=null&&b.file?(i(),n("div",ne,[a("div",ce,[$((x=t.value)==null?void 0:x.file)?(i(),n("img",{key:0,src:(h=t.value)==null?void 0:h.file,alt:"Notice File",class:"object-cover rounded-md cursor-pointer",style:{width:"80%"},onClick:e[0]||(e[0]=f=>{var d;return k((d=t.value)==null?void 0:d.file)})},null,8,re)):j((N=t.value)==null?void 0:N.file)?(i(),n("iframe",{key:1,src:(w=t.value)==null?void 0:w.file,class:"w-full md:h-[700px] border rounded-md"},null,8,de)):(i(),n("span",{key:2,class:"text-blue-500 cursor-pointer",onClick:e[1]||(e[1]=f=>{var d;return k((d=t.value)==null?void 0:d.file)})}," File: "+v(I((F=t.value)==null?void 0:F.file)),1))])])):S("",!0)])]),(D=t.value)!=null&&D.user_feedback?(i(),n("div",ve," My Feedback: "+v((C=(B=t.value)==null?void 0:B.user_feedback)==null?void 0:C.feedback),1)):(i(),n("div",ue,[a("div",pe,[Y(a("input",{"onUpdate:modelValue":e[2]||(e[2]=f=>r.value=f),type:"text",class:"input-1",placeholder:"Please enter your feedback"},null,512),[[q,r.value]])]),a("div",{onClick:V,class:A({"btn-2":(L=t.value)==null?void 0:L.user_feedback,"btn-3":!((M=t.value)!=null&&M.user_feedback)})},v((T=t.value)!=null&&T.user_feedback?"Notice Feedback Updated":"Submit Notice Feedback"),3)]))])),R(K)])])}}};export{xe as default};
