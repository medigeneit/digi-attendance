import{r as f,b as L,c as l,a as t,h as d,t as r,F as b,x as _,m as x,o as n,w as S,k as I,n as y,l as g,q as h,g as P,p as M}from"./index-T58vXJoD.js";import{_ as N}from"./CommentModal-XhcRdzwG.js";import{u as R}from"./useTaskStore-C3KTz1oR.js";import"./useCommentStore-woILa2Jp.js";const B={class:"container mx-auto p-6"},D={key:0,class:"text-center py-4 text-gray-500"},O={key:1,class:"text-center py-4 text-red-500"},U={key:2,class:"min-w-full bg-white shadow rounded-lg overflow-hidden"},$=["onClick"],G={class:"px-4 py-2"},V={class:"px-4 py-2 font-medium"},q={class:"px-4 py-2 font-medium grid gap-1"},F={class:"px-4 py-2"},H={class:"px-4 py-2"},j={class:"px-4 py-2"},z={class:"px-4 py-2 flex gap-2"},K=["onClick"],W=["onClick"],J=1,ot={__name:"TaskList",setup(Q){const i=R(),p=P(),c=f(!1),u=f(null);L(()=>{i.fetchTasks()});const C=()=>{p.push({name:"TaskAdd"})},T=a=>{p.push({name:"TaskEdit",params:{id:a}})},v=a=>{p.push({name:"TaskShow",params:{id:a}})},w=(a,s)=>{a.stopPropagation(),u.value=s,c.value=!0},k=()=>{c.value=!1,u.value=null};return(a,s)=>{const m=M("RouterLink");return n(),l("div",B,[t("div",{class:"flex justify-between items-center mb-6"},[s[3]||(s[3]=t("h2",{class:"text-2xl font-bold text-gray-800"},"Task List",-1)),t("button",{onClick:C,class:"btn-1"},"Add Task")]),d(i).loading?(n(),l("div",D,"Loading tasks...")):d(i).error?(n(),l("div",O,r(d(i).error),1)):(n(),l("table",U,[s[6]||(s[6]=t("thead",{class:"bg-gray-100"},[t("tr",null,[t("th",{class:"px-4 py-2 text-left"},"#"),t("th",{class:"px-4 py-2 text-left"},"Title"),t("th",{class:"px-4 py-2 text-left"},"Assign Users"),t("th",{class:"px-4 py-2 text-left"},"Priority"),t("th",{class:"px-4 py-2 text-left"},"Status"),t("th",{class:"px-4 py-2 text-left"},"Todo"),t("th",{class:"px-4 py-2 text-left"},"Actions")])],-1)),t("tbody",null,[(n(!0),l(b,null,_(d(i).tasks,(o,A)=>(n(),l("tr",{key:o.id,class:"border-t hover:bg-gray-50 cursor-pointer",onClick:S(e=>v(o.id),["prevent"]),role:"button"},[t("td",G,r(A+1),1),t("td",V,r(o.title),1),t("td",q,[(n(!0),l(b,null,_(o.users,e=>(n(),I(m,{to:`/settings/user-show/${e.id}`,onClick:s[0]||(s[0]=E=>E.stopPropagation()),key:e.id,class:"btn-1"},{default:y(()=>[g(r(e==null?void 0:e.name),1)]),_:2},1032,["to"]))),128))]),t("td",F,[t("span",{class:h([{"text-green-600":o.priority==="LOW","text-yellow-600":o.priority==="MEDIUM","text-orange-600":o.priority==="HIGH","text-red-600":o.priority==="CRITICAL"},"font-semibold"])},r(o.priority),3)]),t("td",H,[t("span",{class:h([{"bg-gray-200":o.status==="PENDING","bg-blue-200":o.status==="IN_PROGRESS","bg-green-200":o.status==="COMPLETED","bg-red-200":o.status==="BLOCKED"},"px-3 py-1 rounded-full"])},r(o.status),3)]),t("td",j,[x(m,{to:{name:"TodoAdd",params:{todoable_id:o==null?void 0:o.id},query:{todoable_type:"task"}},onClick:s[1]||(s[1]=e=>e.stopPropagation()),class:"main-button py-1"},{default:y(()=>s[4]||(s[4]=[g("Add Todo")])),_:2},1032,["to"])]),t("td",z,[t("button",{onClick:e=>T(o.id),class:"btn-2"},"Edit",8,K),x(m,{to:{name:"TaskUserAssign",params:{id:o==null?void 0:o.id}},class:"bg-indigo-500 hover:bg-indigo-600 text-white font-semibold px-3 py-1 rounded-full transition",onClick:s[2]||(s[2]=e=>e.stopPropagation())},{default:y(()=>s[5]||(s[5]=[g(" Assign Users ")])),_:2},1032,["to"]),t("button",{onClick:e=>w(e,o.id),class:"bg-indigo-500 text-white px-3 py-1 rounded-full"}," + Comment ",8,W)])],8,$))),128))])])),x(N,{show:c.value,"commentable-id":u.value,"commentable-type":"task","user-id":J,"on-close":k,onSubmitted:d(i).fetchTasks},null,8,["show","commentable-id","onSubmitted"])])}}};export{ot as default};
