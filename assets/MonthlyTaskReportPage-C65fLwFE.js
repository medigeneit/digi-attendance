import{D as w,s as x,r as h,e as b,x as f,c as i,o as r,a as t,t as v,F as k,n as M,w as _,h as D,v as $,f as C,g as T,q as N}from"./index-BrwHxup_.js";import{L as R}from"./LoaderView-CkafGKIa.js";import{u as S}from"./useTaskStore-BRD8y2vE.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";async function L(y,s){return w.get(`/my-monthly-task-reports/${y}`,{params:s})}const V={class:"border"},B={class:"bg-white shadow-md rounded-lg p-6"},F={key:0,class:"text-center py-4 text-gray-500"},O={key:1,class:"text-center py-4 text-red-500"},P={key:2,class:"overflow-x-auto w-full"},j={class:"min-w-full bg-white border overflow-hidden table table-fixed"},U={class:"px-4 py-2"},Y={class:"px-4 py-2"},q={class:"px-4 py-2 text-center whitespace-nowrap"},z={class:"text-gray-600"},A={__name:"MonthlyTaskReport",props:{year:{type:Number,default:null},month:{type:Number,default:null}},setup(y){const s=y,n=x({month:null,year:null}),d=h([]),p=h(""),l=h("");async function m(c,a){var o,e;n.month=a,n.year=c,p.value="loading",d.value=((e=(o=await L(`${c}-${a}`))==null?void 0:o.data)==null?void 0:e.reports)||[],p.value=""}return b(()=>{m(s.year,s.month)}),f(()=>[s.year,s.month],c=>{const[a,o]=c;m(a,o)}),(c,a)=>(r(),i("div",V,[t("div",B,[p.value=="loading"?(r(),i("div",F,"Loading Reports...")):l.value?(r(),i("div",O,v(l.value),1)):(r(),i("div",P,[t("table",j,[a[1]||(a[1]=t("thead",{class:"bg-gray-100"},[t("tr",null,[t("th",{class:"px-4 py-2 text-left whitespace-nowrap"},"#"),t("th",{class:"px-4 py-2 text-left whitespace-nowrap"},"Title"),t("th",{class:"px-4 py-2 text-center whitespace-nowrap"},"Report Date"),t("th",{class:"px-4 py-2 text-center whitespace-nowrap"},"Actions")])],-1)),t("tbody",null,[(r(!0),i(k,null,M(d.value,(o,e)=>(r(),i("tr",{key:o.id,class:"border-t hover:bg-blue-50 odd:bg-gray-50"},[t("td",U,v(e+1),1),t("td",Y,v(o.title),1),t("td",q,[t("div",z,v(new Date(o.report_date).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})),1)]),a[0]||(a[0]=t("td",{class:"px-4 py-2 text-center"},[t("div",{class:"flex gap-4 items-center justify-center"})],-1))]))),128))])])]))])]))}},E={class:"border container mx-auto"},G={class:"px-4 py-2 flex items-center bg-gray-50 group"},H={class:"ml-4 md:ml-auto flex items-center gap-2"},I={class:"bg-gray-300 bg-opacity-90 relative"},J={class:"bg-white p-4 border-t"},tt={__name:"MonthlyTaskReportPage",setup(y){const s=x({month:null,year:null}),n=h(),d=h("loading"),p=S();function l(e){return!e instanceof Date?"":`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}`}b(()=>{const e=new Date;n.value=l(e)}),f(n,e=>{const[u,g,K]=e.split("-").map(Number);s.month=g,s.year=u}),f(()=>s.month,async()=>{d.value="loading",await m(),d.value=""});async function m(){await p.fetchMyTasks({status:"not-completed"})}function c(){const e=new Date;n.value=l(e)}function a(){const e=new Date(n.value);e.setMonth(e.getMonth()+1),n.value=l(e)}function o(){const e=new Date(n.value);e.setMonth(e.getMonth()-1),n.value=l(e)}return(e,u)=>(r(),i("div",E,[t("div",G,[u[1]||(u[1]=t("h2",{class:"leading-none font-semibold text-lg"},"Monthly Task Report",-1)),t("button",{class:"btn-3 mx-4 h-7",onClick:_(c,["prevent"])}," Current Month "),t("div",H,[t("button",{class:"btn-2 h-7",onClick:_(o,["prevent"])}," Previous Month "),t("button",{class:"btn-2 h-7",onClick:_(a,["prevent"])},"Next Month"),D(t("input",{type:"month","onUpdate:modelValue":u[0]||(u[0]=g=>n.value=g),class:"border px-2 rounded"},null,512),[[$,n.value]])])]),t("div",I,[t("div",J,[N(A,{month:s.month,year:s.year},null,8,["month","year"])]),d.value==="loading"?(r(),C(R,{key:0,class:"absolute inset-0 flex items-center justify-center z-20 bg-opacity-70"})):T("",!0)])]))}};export{tt as default};
