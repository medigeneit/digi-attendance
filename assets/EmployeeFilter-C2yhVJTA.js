import{_ as y}from"./MultiselectDropdown-DbSQ_gwY.js";import{u as h}from"./company-iTp5mFjT.js";import{u as U}from"./department-DJZmB7Wj.js";import{s as k,r,e as F,z as g,c as I,o as B,p as _,f as N,g as j,i as f,a as v,k as A}from"./index-DY3EL3pD.js";const L={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},G={__name:"EmployeeFilter",props:{modelValue:Object,withType:{type:Boolean,default:!0},initialValue:{type:Object,default:()=>({})}},emits:["update:modelValue","filter-change"],setup(S,{emit:z}){const t=S,D=z,n=h(),b=U(),{companies:E,employees:O}=k(n),{departments:V}=k(b),u=r(null),o=r({id:"all",name:"All Departments"}),d=r({id:"all",name:"All Types"}),m=r(null),s=r([]),C=l=>({executive:"Executive",support_staff:"Support Staff",doctor:"Doctor",academy_body:"Academy Body"})[l]||l;F(async()=>{var l,e,a,i;if(await n.fetchCompanies(),(l=t.initialValue)!=null&&l.company_id){const c=E.value.find(p=>p.id==t.initialValue.company_id);if(c){if(u.value=c,await b.fetchDepartments(c.id),await n.fetchEmployee(c.id),s.value=[...n.employees],(e=t.initialValue)!=null&&e.department_id&&t.initialValue.department_id!=="all"){const p=V.value.find(w=>w.id==t.initialValue.department_id);p&&(o.value=p)}if((a=t.initialValue)!=null&&a.type&&t.initialValue.type!=="all"&&(d.value={id:t.initialValue.type,name:C(t.initialValue.type)}),T(),(i=t.initialValue)!=null&&i.employee_id){const p=s.value.find(w=>w.id==t.initialValue.employee_id);p&&(m.value=p)}}}}),g(u,async l=>{l?(await b.fetchDepartments(l.id),await n.fetchEmployee(l.id),s.value=[...n.employees]):(s.value=[],V.value=[]),x()}),g([o,d],()=>{T()}),g(m,()=>{x()});const T=()=>{var e,a;let l=[...n.employees];(e=o.value)!=null&&e.id&&o.value.id!=="all"&&(l=l.filter(i=>i.department_id==o.value.id)),t.withType&&((a=d.value)!=null&&a.id)&&d.value.id!=="all"&&(l=l.filter(i=>i.type==d.value.id)),s.value=l,m.value=null,x()},x=()=>{var l,e,a,i;D("update:modelValue",{company_id:((l=u.value)==null?void 0:l.id)||"",department_id:((e=o.value)==null?void 0:e.id)||"all",type:t.withType?((a=d.value)==null?void 0:a.id)||"all":null,employee_id:((i=m.value)==null?void 0:i.id)||""}),D("filter-change")};return(l,e)=>(B(),I("div",L,[_(y,{modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=a=>u.value=a),options:A(E),label:"name","track-by":"id",placeholder:"Select Company",class:"relative w-full md:!w-64"},{label:f(()=>e[4]||(e[4]=[v("div",{class:"absolute text-xs left-3 -top-1.5 bg-slate-100 text-blue-500 leading-none z-30"}," Company ",-1)])),_:1},8,["modelValue","options"]),_(y,{modelValue:o.value,"onUpdate:modelValue":e[1]||(e[1]=a=>o.value=a),options:[{id:"all",name:"All Departments"},...A(V)],label:"name","track-by":"id",placeholder:"Select Department",disabled:!u.value,class:"relative w-full md:!w-64"},{label:f(()=>e[5]||(e[5]=[v("div",{class:"absolute text-xs left-3 -top-1.5 bg-slate-100 text-blue-500 leading-none z-30"}," Department ",-1)])),_:1},8,["modelValue","options","disabled"]),S.withType?(B(),N(y,{key:0,modelValue:d.value,"onUpdate:modelValue":e[2]||(e[2]=a=>d.value=a),options:[{id:"all",name:"All Types"},{id:"executive",name:"Executive"},{id:"support_staff",name:"Support Staff"},{id:"doctor",name:"Doctor"},{id:"academy_body",name:"Academy Body"}],label:"name","track-by":"id",placeholder:"Select Type",class:"relative w-full md:!w-64"},{label:f(()=>e[6]||(e[6]=[v("div",{class:"absolute text-xs left-3 -top-1.5 bg-slate-100 text-blue-500 leading-none z-30"}," Line Type ",-1)])),_:1},8,["modelValue"])):j("",!0),_(y,{modelValue:m.value,"onUpdate:modelValue":e[3]||(e[3]=a=>m.value=a),options:s.value,label:"name","track-by":"id",placeholder:"Select Employee",disabled:s.value.length===0,class:"relative w-full md:!w-64"},{label:f(()=>e[7]||(e[7]=[v("div",{class:"absolute text-xs left-3 -top-1.5 bg-slate-100 text-blue-500 leading-none z-30"}," Employee ",-1)])),_:1},8,["modelValue","options","disabled"])]))}};export{G as _};
