import{N as P,b as B,r as y,e as S,c as d,o as r,a as t,f as T,t as c,F as C,y as M,g as V,h as I,v as U}from"./index-fLGF1t2u.js";import{L as A}from"./LoaderView-okso0odE.js";import{u as H}from"./notice-ycyF5C7z.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const j={class:"my-container space-y-6"},E={class:"card-bg p-6"},R={key:1,class:"text-center text-red-500"},$={key:2,class:"grid gap-2"},q={class:"bg-gray-100 p-4 rounded-lg"},z={class:"grid md:grid-cols-2 gap-4"},G={class:"text-lg text-gray-800"},J={class:"text-lg text-gray-800"},K={class:"text-lg text-gray-800"},O={class:"col-span-full"},Q=["innerHTML"],W={class:"md:flex justify-center mt-8 gap-4"},se={__name:"PolicyDetails",setup(X){const g=H(),m=P(),f=B(),u=y(""),s=y(null),p=y(!0),n=y(null),D=a=>new Date(a).toLocaleString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}),N=async()=>{var a,e,l;try{p.value=!0,n.value=null;const o=f.params.id;s.value=await g.fetchNoticeDetails(o),u.value=(a=s.value.user_feedback)==null?void 0:a.feedback}catch(o){n.value=((l=(e=o.response)==null?void 0:e.data)==null?void 0:l.message)||"Failed to load notice details",m.error(n.value)}finally{p.value=!1}},h=async()=>{var a,e;if(u.value)try{const l=f.params.id,o={feedback:u.value};await g.createNoticeFeedback(l,o)}catch(l){n.value=((e=(a=l.response)==null?void 0:a.data)==null?void 0:e.message)||"Failed to load notice details",m.error(n.value)}finally{p.value=!1}};S(async()=>{await N()});const L=async a=>{window.open(a,"_blank")};return(a,e)=>{var l,o,x,b,k,w,_;return r(),d("div",j,[t("div",E,[e[10]||(e[10]=t("h2",{class:"title-lg text-center"},"Policy Details",-1)),p.value?(r(),T(A,{key:0,class:"shadow-none"})):n.value?(r(),d("div",R,[t("p",null,c(n.value),1)])):(r(),d("div",$,[t("div",q,[e[8]||(e[8]=t("p",{class:"title-md"},"Notice Info",-1)),e[9]||(e[9]=t("hr",{class:"mb-2"},null,-1)),t("div",z,[t("div",null,[e[2]||(e[2]=t("p",{class:"text-sm font-bold text-gray-600"},"Company:",-1)),t("p",G,c(((o=(l=s.value)==null?void 0:l.company)==null?void 0:o.name)||"N/A"),1)]),e[7]||(e[7]=t("div",null,[t("p",{class:"text-sm font-bold text-gray-600"},"Type"),t("p",{class:"text-lg text-gray-800"},"Policy")],-1)),t("div",null,[e[3]||(e[3]=t("p",{class:"text-sm font-bold text-gray-600"},"Department:",-1)),t("p",J,[(r(!0),d(C,null,M((x=s.value)==null?void 0:x.departments,(i,v)=>{var F;return r(),d("span",{key:i.id},c(i==null?void 0:i.name)+" "+c(v<((F=s.value)==null?void 0:F.departments.length)-1?", ":""),1)}),128))])]),t("div",null,[e[4]||(e[4]=t("p",{class:"text-sm font-bold text-gray-600"},"Published Date:",-1)),t("p",K,c(D((b=s.value)==null?void 0:b.published_at)),1)]),t("div",null,[e[5]||(e[5]=t("p",{class:"text-sm font-bold text-gray-600"},"File:",-1)),(k=s.value)!=null&&k.file?(r(),d("button",{key:0,onClick:e[0]||(e[0]=i=>{var v;return L((v=s.value)==null?void 0:v.file)}),class:"btn-2"}," Download File ")):V("",!0)]),t("div",O,[e[6]||(e[6]=t("p",{class:"text-sm font-bold text-gray-600"},"Description / Body:",-1)),t("p",{class:"text-lg text-gray-800",innerHTML:(w=s.value)==null?void 0:w.description},null,8,Q)])])]),t("div",W,[I(t("input",{"onUpdate:modelValue":e[1]||(e[1]=i=>u.value=i),type:"text",class:"w-full p-2 border rounded",placeholder:"Please enter your feedback"},null,512),[[U,u.value]]),t("div",{class:"bg-blue-500 cursor-pointer text-white w-1/3 text-center px-4 py-2 rounded hover:bg-blue-600",onClick:h},c((_=s.value)!=null&&_.user_feedback?"Updated Policy Feedback":"Add Police Feedback"),1)])]))])])}}};export{se as default};
