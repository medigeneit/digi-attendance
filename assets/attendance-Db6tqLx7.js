import{D,r as y,E as g}from"./index-v4LEanZD.js";const O=D("attendance",()=>{const p=y([]),v=y([]),w=y([]),f=y([]),h=y(null),b=y(null),L=y(new Date().toISOString().substring(0,7)),S=y(new Date().toISOString().substring(0,10)),e=y(null),s=y(!1);return{monthlyLogs:p,dailyLateLogs:f,summary:h,monthly_company_summary:b,selectedMonth:L,selectedDate:S,error:e,isLoading:s,dailyLogs:w,attendanceLogs:v,getMonthlyAttendanceByShift:async(l,c)=>{var a,n;if(!l||!c){e.value="Invalid user ID or month";return}s.value=!0;try{const t=await g.get(`/user/${l}/attendance/monthly/${c}`);p.value=t.data.monthly_logs,h.value=t.data.summary,e.value=null}catch(t){e.value=((n=(a=t.response)==null?void 0:a.data)==null?void 0:n.message)||"Something went wrong",console.error(e.value)}finally{s.value=!1}},getTodayAttendanceReport:async(l,c,a,n,t,o)=>{var r,u;s.value=!0;try{const d={companyId:l,departmentId:c,employee_id:a,category:n,month:t,status:o},m=await g.get("/attendance/today",{params:d});w.value=m.data,e.value=null}catch(d){e.value=((u=(r=d.response)==null?void 0:r.data)==null?void 0:u.message)||"Something went wrong",console.error(e.value)}finally{s.value=!1}},getAttendanceLateReport:async(l,c,a)=>{var n,t;s.value=!0;try{const o={company_id:l,employee_id:c,month:a};console.log({params:o});const r=await g.get("/monthly/attendance/late-reports",{params:o});f.value=r.data,e.value=null}catch(o){e.value=((t=(n=o.response)==null?void 0:n.data)==null?void 0:t.message)||"Something went wrong",console.error(e.value)}finally{s.value=!1}},getMonthlyAttendanceSummaryReport:async(l,c,a,n)=>{var t,o;if(!l||!n){e.value="Invalid user ID or month";return}s.value=!0;try{const r={company_id:l,employee_id:c,category:a,month:n},u=await g.get("/attendance/monthly-summary-reports",{params:r});b.value=u.data,e.value=null}catch(r){e.value=((o=(t=r.response)==null?void 0:t.data)==null?void 0:o.message)||"Something went wrong",console.error(e.value)}finally{s.value=!1}},downloadExcel:async(l,c,a)=>{var n,t;if(!l||!a){e.value="Invalid company ID or month";return}s.value=!0;try{const o={company_id:l,category:c,month:a},r=await g.get("/attendance/monthly-summary-reports?flag=excel",{params:o,responseType:"blob"}),u=window.URL.createObjectURL(new Blob([r.data])),d=document.createElement("a");d.href=u,d.setAttribute("download",`${a} attendance_summary.xlsx`),document.body.appendChild(d),d.click(),document.body.removeChild(d)}catch(o){e.value=((t=(n=o.response)==null?void 0:n.data)==null?void 0:t.message)||"Something went wrong",console.error(e.value)}finally{s.value=!1}},downloadPDF:async(l,c,a,n=0)=>{var t,o;if(!l||!a){e.value="Invalid user ID or month";return}s.value=!0;try{const r={company_id:l,category:c,month:a},u=await g.get("/attendance/monthly-summary-reports?flag=pdf",{params:r,responseType:"blob"}),d=window.URL.createObjectURL(new Blob([u.data])),m=document.createElement("a");m.href=d,m.setAttribute("download",`${a} attendance_summary.pdf`),document.body.appendChild(m),m.click(),document.body.removeChild(m)}catch(r){e.value=((o=(t=r.response)==null?void 0:t.data)==null?void 0:o.message)||"Something went wrong",console.error(e.value)}finally{s.value=!1}},attendanceDownloadExcel:async(l,c,a,n,t)=>{var o,r;s.value=!0;try{const u={companyId:l,employee_id:c,category:a,month:n,status:t},d=await g.get("/attendance/today?flag=excel",{params:u,responseType:"blob"}),m=window.URL.createObjectURL(new Blob([d.data])),i=document.createElement("a");i.href=m,i.setAttribute("download",`${n} attendance_summary.xlsx`),document.body.appendChild(i),i.click(),document.body.removeChild(i)}catch(u){e.value=((r=(o=u.response)==null?void 0:o.data)==null?void 0:r.message)||"Something went wrong",console.error(e.value)}finally{s.value=!1}},attendanceDownloadPdf:async(l,c,a,n,t)=>{var o,r;s.value=!0;try{const u={companyId:l,employee_id:c,category:a,month:n,status:t},d=await g.get("/attendance/today?flag=pdf",{params:u,responseType:"blob"}),m=window.URL.createObjectURL(new Blob([d.data])),i=document.createElement("a");i.href=m,i.setAttribute("download",`${n} attendance_summary.pdf`),document.body.appendChild(i),i.click(),document.body.removeChild(i)}catch(u){e.value=((r=(o=u.response)==null?void 0:o.data)==null?void 0:r.message)||"Something went wrong",console.error(e.value)}finally{s.value=!1}},lateReportDownloadExcel:async(l,c,a)=>{var n,t;if(!l||!a){e.value="Invalid company ID or month";return}s.value=!0;try{const o={company_id:l,employee_id:c,month:a},r=await g.get("/monthly/attendance/late-reports?flag=excel",{params:o,responseType:"blob"}),u=window.URL.createObjectURL(new Blob([r.data])),d=document.createElement("a");d.href=u,d.setAttribute("download",`${a} attendance_summary.xlsx`),document.body.appendChild(d),d.click(),document.body.removeChild(d)}catch(o){e.value=((t=(n=o.response)==null?void 0:n.data)==null?void 0:t.message)||"Something went wrong",console.error(e.value)}finally{s.value=!1}},getMonthlyAttendanceLog:async(l,c)=>{var a,n;if(!l||!c){e.value="Invalid user ID or month";return}s.value=!0;try{const t=await g.get(`/user/${l}/attendance/monthly/${c}/log`);v.value=t.data.attendance_logs}catch(t){e.value=((n=(a=t.response)==null?void 0:a.data)==null?void 0:n.message)||"Something went wrong",console.error(e.value)}finally{s.value=!1}}}});export{O as u};
