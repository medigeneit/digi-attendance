import{u as I,b as j,s as E,r as f,e as H,n as z,c as i,o as r,a as t,p as _,i as L,h as y,v as G,B as k,k as o,t as l,j as m,g as w,x as q,F as J,y as O}from"./index-BaOyklmU.js";import{L as Q}from"./LoaderView-D8Vz0Msv.js";import{u as W}from"./monthly-assessment-criteria-DPewMMYu.js";import{_ as X}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Y={class:"space-y-4 px-4 max-w-7xl mx-auto my-6"},Z={class:"flex items-center justify-between gap-2"},ee={class:"rounded-xl border bg-white p-4 shadow-sm"},te={class:"grid gap-3 md:grid-cols-12 items-end"},se={class:"md:col-span-4"},oe={class:"md:col-span-2"},ne={class:"md:col-span-2"},ae={class:"md:col-span-2"},ie={class:"md:col-span-2"},re={key:0,class:"py-8 text-center"},de={key:1,class:"rounded-md border border-red-200 bg-red-50 p-3 text-red-700"},le={key:2,class:"rounded-xl border bg-white p-8 text-center text-gray-600"},ue={key:3,class:"overflow-x-auto rounded-xl border bg-white shadow-sm"},pe={class:"min-w-full text-sm"},me={class:"bg-gray-100 text-left text-gray-700"},ge={class:"px-3 py-2 align-top"},ce={class:"px-3 py-2"},fe={class:"font-medium text-gray-900"},ve={key:0,class:"mt-0.5 line-clamp-6 text-gray-500"},ye=["innerHTML"],xe={class:"px-3 py-2"},be={class:"px-3 py-2"},_e={class:"px-3 py-2 text-right"},ke={class:"inline-flex gap-1"},we=["onClick"],Ce={class:"flex items-center justify-between gap-3 border-t px-3 py-2 text-sm"},Se={class:"text-gray-600"},Le={class:"font-medium"},qe={class:"font-medium"},Me={class:"font-medium"},Ne={class:"flex items-center gap-1"},Ae=["disabled"],Ve={class:"px-2"},$e=["disabled"],De={__name:"KpiFormatList",setup(Pe){const M=I(),g=j(),c=W(),{items:N,meta:a,isLoading:P,error:A,hasNextPage:T,hasPrevPage:U}=E(c),x=f(g.query.q??""),V=f(g.query.is_active??""),u=f(g.query.sort_by??"created_at"),d=f(g.query.sort_dir??"desc"),v=f(Number(g.query.per_page??15)),b=f(Number(g.query.page??1));let C=null;function h(){C&&clearTimeout(C),C=setTimeout(()=>p(),300)}async function p(n={}){const e={q:x.value||"",sort_by:u.value,sort_dir:d.value,per_page:v.value,page:b.value,...n};await c.fetchList(e),M.replace({query:{q:x.value||void 0,sort_by:u.value!=="created_at"?u.value:void 0,sort_dir:d.value!=="desc"?d.value:void 0,per_page:v.value!==15?String(v.value):void 0,page:c.meta.current_page>1?String(c.meta.current_page):void 0}}),b.value=c.meta.current_page}H(()=>p());function B(){M.go(-1)}function $(n){u.value===n?d.value=d.value==="asc"?"desc":"asc":(u.value=n,d.value="asc"),p({page:1})}function F(n){return n?new Date(n).toLocaleString("en-US",{year:"numeric",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit"}):""}async function K(n){window.confirm(`Delete "${n.name}"?`)&&(await c.deleteCriteria(n.id),await p())}function D(n){b.value=Number(n),p({page:b.value})}return(n,e)=>{const S=z("RouterLink");return r(),i("div",Y,[t("div",Z,[t("button",{class:"btn-3",onClick:B},e[13]||(e[13]=[t("i",{class:"far fa-arrow-left"},null,-1),t("span",{class:"hidden md:flex"},"Back",-1)])),e[15]||(e[15]=t("h1",{class:"title-md md:title-lg flex-wrap text-center"},"Monthly Assessment Criteria",-1)),_(S,{to:{name:"KpiMonthlyAdd"},class:"btn-2"},{default:L(()=>e[14]||(e[14]=[t("span",{class:"hidden md:flex"},"Add New",-1),t("i",{class:"far fa-plus"},null,-1)])),_:1,__:[14]})]),t("div",ee,[t("div",te,[t("div",se,[e[16]||(e[16]=t("label",{class:"block text-sm font-medium text-gray-700"},"Search",-1)),y(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>x.value=s),onInput:h,type:"text",placeholder:"Search by title/description…",class:"mt-1 w-full rounded-md border border-gray-300 px-3 py-2 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200"},null,544),[[G,x.value]])]),t("div",oe,[e[18]||(e[18]=t("label",{class:"block text-sm font-medium text-gray-700"},"Status",-1)),y(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>V.value=s),onChange:e[2]||(e[2]=s=>p({page:1})),class:"mt-1 w-full rounded-md border border-gray-300 px-3 py-2 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200"},e[17]||(e[17]=[t("option",{value:""},"All",-1),t("option",{value:"1"},"Active",-1),t("option",{value:"0"},"Inactive",-1)]),544),[[k,V.value]])]),t("div",ne,[e[20]||(e[20]=t("label",{class:"block text-sm font-medium text-gray-700"},"Per Page",-1)),y(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>v.value=s),onChange:e[4]||(e[4]=s=>p({page:1})),class:"mt-1 w-full rounded-md border border-gray-300 px-3 py-2 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200"},e[19]||(e[19]=[t("option",{value:10},"10",-1),t("option",{value:15},"15",-1),t("option",{value:25},"25",-1),t("option",{value:50},"50",-1)]),544),[[k,v.value,void 0,{number:!0}]])]),t("div",ae,[e[22]||(e[22]=t("label",{class:"block text-sm font-medium text-gray-700"},"Sort By",-1)),y(t("select",{"onUpdate:modelValue":e[5]||(e[5]=s=>u.value=s),onChange:e[6]||(e[6]=s=>p({page:1})),class:"mt-1 w-full rounded-md border border-gray-300 px-3 py-2 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200"},e[21]||(e[21]=[t("option",{value:"created_at"},"Created",-1),t("option",{value:"updated_at"},"Updated",-1)]),544),[[k,u.value]])]),t("div",ie,[e[24]||(e[24]=t("label",{class:"block text-sm font-medium text-gray-700"},"Direction",-1)),y(t("select",{"onUpdate:modelValue":e[7]||(e[7]=s=>d.value=s),onChange:e[8]||(e[8]=s=>p({page:1})),class:"mt-1 w-full rounded-md border border-gray-300 px-3 py-2 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200"},e[23]||(e[23]=[t("option",{value:"desc"},"Desc",-1),t("option",{value:"asc"},"Asc",-1)]),544),[[k,d.value]])])])]),o(P)?(r(),i("div",re,[_(Q)])):o(A)?(r(),i("div",de,l(o(A)),1)):o(N).length===0?(r(),i("div",le,[e[26]||(e[26]=m(" No criteria found. ")),_(S,{to:{name:"KpiMonthlyAdd"},class:"ml-2 text-indigo-600 underline"},{default:L(()=>e[25]||(e[25]=[m("Create one")])),_:1,__:[25]})])):(r(),i("div",ue,[t("table",pe,[t("thead",null,[t("tr",me,[e[29]||(e[29]=t("th",{class:"px-3 py-2 w-12"},"#",-1)),t("th",{class:"px-3 py-2 cursor-pointer",onClick:e[9]||(e[9]=s=>$("name"))},[e[27]||(e[27]=m(" Title ")),u.value==="name"?(r(),i("i",{key:0,class:q(d.value==="asc"?"far fa-arrow-up":"far fa-arrow-down")},null,2)):w("",!0)]),e[30]||(e[30]=t("th",{class:"px-3 py-2 w-28"},"Status",-1)),t("th",{class:"px-3 py-2 cursor-pointer w-48",onClick:e[10]||(e[10]=s=>$("updated_at"))},[e[28]||(e[28]=m(" Updated ")),u.value==="updated_at"?(r(),i("i",{key:0,class:q(d.value==="asc"?"far fa-arrow-up":"far fa-arrow-down")},null,2)):w("",!0)]),e[31]||(e[31]=t("th",{class:"px-3 py-2 w-28 text-right"},"Actions",-1))])]),t("tbody",null,[(r(!0),i(J,null,O(o(N),(s,R)=>(r(),i("tr",{key:s.id,class:"border-t hover:bg-gray-50"},[t("td",ge,l((o(a).current_page-1)*o(a).per_page+R+1),1),t("td",ce,[t("div",fe,l(s.name),1),s.description?(r(),i("div",ve,[s!=null&&s.description?(r(),i("div",{key:0,innerHTML:s.description,class:"richtext mt-0.5 text-gray-700 line-clamp-6"},null,8,ye)):w("",!0)])):w("",!0)]),t("td",xe,[t("span",{class:q(["inline-flex items-center rounded-full px-2 py-0.5 text-xs font-semibold",s.is_active?"bg-green-100 text-green-700":"bg-gray-200 text-gray-700"])},l(s.is_active?"Active":"Inactive"),3)]),t("td",be,l(F(s.updated_at||s.created_at)),1),t("td",_e,[t("div",ke,[_(S,{to:{name:"KpiMonthlyEdit",params:{id:s.id}},class:"btn-icon",title:"Edit"},{default:L(()=>e[32]||(e[32]=[t("i",{class:"far fa-edit"},null,-1)])),_:2,__:[32]},1032,["to"]),t("button",{class:"btn-icon text-red-600 hover:text-red-700",onClick:Te=>K(s),title:"Delete"},e[33]||(e[33]=[t("i",{class:"far fa-trash-alt"},null,-1)]),8,we)])])]))),128))])]),t("div",Ce,[t("div",Se,[e[34]||(e[34]=m(" Showing ")),t("span",Le,l((o(a).current_page-1)*o(a).per_page+1),1),e[35]||(e[35]=m(" – ")),t("span",qe,l(Math.min(o(a).current_page*o(a).per_page,o(a).total)),1),e[36]||(e[36]=m(" of ")),t("span",Me,l(o(a).total),1)]),t("div",Ne,[t("button",{class:"rounded-md border px-3 py-1 disabled:opacity-50",disabled:!o(U),onClick:e[11]||(e[11]=s=>D(o(a).current_page-1))}," Prev ",8,Ae),t("span",Ve,"Page "+l(o(a).current_page)+" / "+l(o(a).last_page),1),t("button",{class:"rounded-md border px-3 py-1 disabled:opacity-50",disabled:!o(T),onClick:e[12]||(e[12]=s=>D(o(a).current_page+1))}," Next ",8,$e)])])]))])}}},Ke=X(De,[["__scopeId","data-v-5d07f94a"]]);export{Ke as default};
