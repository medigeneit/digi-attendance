const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LeaveApplicationModal-SmHn_UdZ.js","assets/index-BzE0H_Go.js","assets/index-BQoXnpLw.css","assets/ApprovalItem-C0I0J5K9.js","assets/AcceptAndRejectHandler-BZhohTHj.js","assets/LoaderView-CIhqb5d3.js","assets/_plugin-vue_export-helper-DlAUqK2U.js","assets/ShareComponent-B5s2AV79.js","assets/leave-application-C8YzhTlO.js","assets/LeaveApplicationModal-B7WJltA7.css","assets/ShortLeaveDetailsModal-yzq0Vta6.js","assets/ScreenshotCapture-DvAtR6gT.js","assets/short-leave-CqQDqvFT.js","assets/ShortLeaveDetailsModal-D4avNQ1k.css","assets/ManualAttendanceDetailsModal-DncDclEk.js","assets/manual-attendance-CDZKaMMO.js","assets/ManualAttendanceDetailsModal-MS8n2gFL.css","assets/ShiftExchangeDetailsModal-DIvtT3gb.js","assets/exchange-Dzv0x3h4.js","assets/ShiftExchangeDetailsModal-BlZsJzAI.css","assets/OffdayExchangeDetailsModal-CVwR7bEK.js","assets/OffdayExchangeDetailsModal-jTt80Glg.css"])))=>i.map(i=>d[i]);
import{u as ee}from"./user-B3zqNhrA.js";import{s as H,m as re,c as r,o as s,n as h,i as k,a as e,j as w,t as f,k as b,p as de,w as S,q as C,x as V,g as $,F as T,y as P,f as A,R as $e,z as ue,r as j,d as ce,e as pe,A as Q,h as De,B as Ce,b as ye,u as ie,C as G,D as Me,_ as J,l as Le}from"./index-BzE0H_Go.js";import{L as Se}from"./LoaderView-CIhqb5d3.js";import{m as Ae,_ as Te}from"./task-tree-5MGIkjo2.js";import{o as oe,g as se,a as ne,b as Re,c as qe}from"./datetime-l2Vm98rT.js";import{u as Ne}from"./useTaskStore-BFvHv6GI.js";import{_ as Oe,a as Pe}from"./TodoSection-BPj8oYnL.js";import{_ as Ee}from"./TaskTreeViewWithSubTable-NxI7xo89.js";import{O as Be}from"./OverlyModal-T6kHGhvt.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useTodoStore-CEuR8lIO.js";import"./UserChip-DpvUgj5E.js";import"./TaskSupervisorAndEmployee-Cf0WCf9d.js";import"./TaskStatus-DLWQHlVZ.js";import"./url-CePbr-gY.js";const je={class:"grid gap-4 md:grid-cols-3 mt-4 container mx-auto"},Ue={class:"text-3xl"},Ve={class:"text-3xl"},Fe={class:"text-3xl"},We={class:"text-3xl"},ze={class:"text-3xl"},Ie={class:"text-3xl"},Ye={class:"text-3xl"},He={class:"text-3xl"},Ke={class:"text-3xl"},Ge={__name:"DashboardAdminView",setup(g){const i=ee(),{dashboardInfo:c,selectedDate:m}=H(i);return(d,a)=>{const u=re("RouterLink");return s(),r("div",je,[h(u,{to:{name:"TodayAttendanceReport",query:{status:"all"}},class:"main-button"},{default:k(()=>{var t;return[e("span",Ue,f((t=b(c))==null?void 0:t.totalUsers),1),a[0]||(a[0]=w(" Total Employees "))]}),_:1,__:[0]}),h(u,{to:{name:"TodayAttendanceReport",query:{status:"Present"}},class:"main-button"},{default:k(()=>{var t;return[e("span",Ve,f((t=b(c))==null?void 0:t.todayPresents),1),a[1]||(a[1]=w(" Today Present "))]}),_:1,__:[1]}),h(u,{to:{name:"TodayAttendanceReport",query:{status:"Absent"}},class:"main-button"},{default:k(()=>{var t;return[e("span",Fe,f((t=b(c))==null?void 0:t.todayAbsents),1),a[2]||(a[2]=w(" Today Absent "))]}),_:1,__:[2]}),h(u,{to:{name:"LeaveApplicationsForDay",query:{applicationType:"today"}},class:"main-button"},{default:k(()=>{var t;return[e("span",We,f((t=b(c))==null?void 0:t.todayLeaves),1),a[3]||(a[3]=w(" Today Leave "))]}),_:1,__:[3]}),h(u,{to:{name:"LeaveApplicationsForDay",query:{applicationType:"tomorrow"}},class:"main-button"},{default:k(()=>{var t;return[e("span",ze,f((t=b(c))==null?void 0:t.tomorrowLeaves),1),a[4]||(a[4]=w(" Tomorrow Leave "))]}),_:1,__:[4]}),h(u,{to:{name:"DateWiseShortLeaveList",query:{date:b(m)}},class:"main-button"},{default:k(()=>{var t;return[e("span",Ie,f((t=b(c))==null?void 0:t.todayShortLeaves),1),a[5]||(a[5]=w(" Today Short Leaves "))]}),_:1,__:[5]},8,["to"]),h(u,{to:{name:"DailyLateAttendanceReport",query:{date:b(m)}},class:"main-button"},{default:k(()=>{var t;return[e("span",Ye,f((t=b(c))==null?void 0:t.todayLateEntries),1),a[6]||(a[6]=w(" Today Late Report "))]}),_:1,__:[6]},8,["to"]),h(u,{to:{name:"PreviousAfterApplicationList",query:{applicationType:"prev",date:b(m)}},class:"main-button"},{default:k(()=>{var t;return[e("span",He,f((t=b(c))==null?void 0:t.prevWeekLeaves),1),a[7]||(a[7]=w(" Leave history of previous week "))]}),_:1,__:[7]},8,["to"]),h(u,{to:{name:"PreviousAfterApplicationList",query:{applicationType:"after",date:b(m)}},class:"main-button"},{default:k(()=>{var t;return[e("span",Ke,f((t=b(c))==null?void 0:t.nextWeekLeaves),1),a[8]||(a[8]=w(" Upcoming leaves "))]}),_:1,__:[8]},8,["to"]),h(u,{to:{name:"TodoList",query:{applicationType:"after",date:b(m)}},class:"main-button"},{default:k(()=>a[9]||(a[9]=[w(" Todos ")])),_:1,__:[9]},8,["to"])])}}},ae=(g,i,c,m)=>{const d=new Date(m,c-1,i);return g.filter(a=>{const u=a.deadline?new Date(a.deadline):null,t=oe(new Date);if(a.assigned_at){const n=oe(new Date(a.assigned_at));if(d<n)return!1;let l=null;return a.completed_at&&(l=oe(new Date(a.completed_at))),!(l&&l<d||u&&u<d&&d>t)}return!1}).map(a=>{let u=!1;return a.deadline&&(u=new Date(a.deadline)<d),{...a,deadline_crossed:u}})},Je={class:"px-4 py-2 flex items-center bg-gray-50 group"},Xe=["disabled"],Ze={class:"ml-4 md:ml-auto flex items-center gap-2"},Qe=["value"],et=de({__name:"DailyTaskHeading",props:{selectedDay:{type:String,required:!0},loading:{type:Boolean,default:!1}},emits:["change",,"reloadClick","monthWiseButtonClick"],setup(g,{emit:i}){const c=g,m=i;function d(){m("change",se(new Date))}function a(){const t=new Date(c.selectedDay);t.setDate(t.getDate()+1),m("change",se(t))}function u(){const t=new Date(c.selectedDay);t.setDate(t.getDate()-1),m("change",se(t))}return(t,n)=>(s(),r("div",Je,[n[4]||(n[4]=e("h2",{class:"leading-none font-semibold text-lg"},"Daily Task",-1)),e("button",{class:"btn-3 mx-4 h-7",onClick:n[0]||(n[0]=S(l=>m("monthWiseButtonClick"),["prevent"]))},"Month Wise"),e("button",{class:"btn-3 mx-4 h-7",onClick:S(d,["prevent"])},"Today"),e("button",{class:C(["btn-3 px-2 py-2 mx-4 size-7 disabled:text-gray-300 disabled:border-gray-300",{"animate-spin text-gray-300 border-gray-300 !bg-opacity-0":g.loading}]),onClick:n[1]||(n[1]=S(l=>m("reloadClick"),["prevent"])),disabled:g.loading},n[3]||(n[3]=[e("i",{class:"fas fa-redo-alt"},null,-1)]),10,Xe),e("div",Ze,[e("button",{class:"btn-2 h-7",onClick:S(u,["prevent"])},"Previous Day"),e("button",{class:"btn-2 h-7",onClick:S(a,["prevent"])},"Next Day"),e("input",{type:"date",value:g.selectedDay,onInput:n[2]||(n[2]=l=>{var p;return m("change",(p=l.target)==null?void 0:p.value)}),class:"border px-2 rounded"},null,40,Qe)])]))}}),tt={class:"px-4 py-2 flex items-center bg-gray-50 group"},st=["disabled"],nt={class:"ml-4 md:ml-auto flex items-center gap-2"},ot=["value"],at=de({__name:"MonthlyTaskHeading",props:{selectedMonth:{type:String,required:!0},loading:{type:Boolean,default:!1}},emits:["reloadClick","dayWiseButtonClick","change"],setup(g,{emit:i}){const c=g,m=i;function d(){m("change",ne(new Date))}function a(){var p;const[t,n]=(p=c.selectedMonth)==null?void 0:p.split("-").map(Number),l=new Date(t,n,1);l.setMonth(l.getMonth()),m("change",ne(l))}function u(){var p;const[t,n]=(p=c.selectedMonth)==null?void 0:p.split("-").map(Number),l=new Date(t,n,1);l.setMonth(l.getMonth()-2),m("change",ne(l))}return(t,n)=>(s(),r("div",tt,[n[4]||(n[4]=e("h2",{class:"leading-none font-semibold text-lg"},"Monthly Task",-1)),e("button",{class:"btn-3 mx-4 h-7",onClick:n[0]||(n[0]=S(l=>m("dayWiseButtonClick"),["prevent"]))},"Day Wise"),e("button",{class:"btn-3 mx-4 h-7",onClick:S(d,["prevent"])},"Current Month"),e("button",{class:C(["btn-3 px-2 py-2 mx-4 size-7 disabled:text-gray-300 disabled:border-gray-300",{"animate-spin text-gray-300 border-gray-300 !bg-opacity-0":g.loading}]),onClick:n[1]||(n[1]=S(l=>m("reloadClick"),["prevent"])),disabled:g.loading},n[3]||(n[3]=[e("i",{class:"fas fa-redo-alt"},null,-1)]),10,st),e("div",nt,[e("button",{class:"btn-2 h-7",onClick:S(u,["prevent"])},"Previous Month"),e("button",{class:"btn-2 h-7",onClick:S(a,["prevent"])},"Next Month"),e("input",{type:"month",value:g.selectedMonth,onInput:n[2]||(n[2]=l=>{var p;return m("change",(p=l.target)==null?void 0:p.value)}),class:"border px-2 rounded"},null,40,ot)])]))}}),lt={key:0,class:"space-y-6 py-2"},rt={key:0,class:"fad fa-folder text-xs mr-2"},it={key:1,class:"fad fa-file-alt text-xs mr-2"},dt={key:2,class:"text-center w-full mt-4 text-xs text-gray-600"},le={__name:"TaskListOnDay",props:{isCurrentMonth:{type:Boolean,default:!1},tasks:{type:Array,default:()=>[]},limit:{type:Number,default:null},tree:{type:Boolean,default:!1}},emits:["clickOnMore"],setup(g,{emit:i}){const c=g,m=i,d=V(()=>{var a;return c.limit?((a=c==null?void 0:c.tasks)==null?void 0:a.slice(0,c.limit))||[]:[...c.tasks]});return(a,u)=>(s(),r("div",null,[g.tree?(s(),r("div",lt,[(s(!0),r(T,null,P(d.value,(t,n)=>(s(),A(Ee,{"hide-buttons":"","hide-assigned-users":"",task:t,key:t.id,index:n,class:"shadow hover:shadow-md border border-blue-300 rounded-md *:border-none"},null,8,["task","index"]))),128))])):(s(),r("ul",{key:1,class:C({"text-gray-500 group-hover:text-gray-900":!g.isCurrentMonth})},[(s(!0),r(T,null,P(d.value,t=>(s(),r("li",{class:"mb-2",key:t.id},[h(b($e),{to:`/tasks/${t.id}`,target:"_blank",class:"flex items-center hover:underline hover:text-blue-600"},{default:k(()=>[t.children_task_count>0?(s(),r("i",rt)):$("",!0),t.children_task_count==0?(s(),r("i",it)):$("",!0),e("span",{class:C(["line-clamp-1",{"text-red-800":t.deadline_crossed}])},f(t.title),3)]),_:2},1032,["to"])]))),128))],2)),g.tasks.length-d.value.length>0?(s(),r("div",dt,[e("button",{onClick:u[0]||(u[0]=S(t=>m("clickOnMore",t),["prevent"])),class:"text-blue-600 hover:underline"}," +"+f(g.tasks.length-d.value.length)+" More Tasks ",1)])):$("",!0)]))}},ut={class:"relative"},ct={class:"ml-auto"},pt=["onClick"],yt={key:0,class:"absolute inset-0 bg-gray-300 bg-opacity-90"},mt={class:"absolute inset-16 bg-white border border-blue-500 rounded-md z-20 overflow-y-auto"},ft={class:"text-lg font-semibold mb-4 sticky top-0 border-b border-blue-200 px-4 z-30 py-3 bg-white flex items-center"},vt={__name:"TaskInMonth",props:{month:{type:String,required:!0,validator:g=>/^\d{4}-(0[1-9]|1[0-2])$/.test(g)},tasks:{type:Array,required:!0,default:()=>[]}},setup(g){const i=ue({day:null,month:null,year:null});function c(t){t.stopPropagation(),i.day=null,i.month=null,i.year=null}function m(t,n,l,p){t.stopPropagation(),i.day=n,i.month=l,i.year=p}const d=(t,n,l)=>{const p=new Date;return t===p.getDate()&&n===p.getMonth()+1&&l===p.getFullYear()},a=(t,n,l)=>t===i.day&&n===i.month&&l===i.year,u=(t,n,l,p)=>{const M=d(t,n,l);return{"bg-green-100 text-green-900 border-blue-500 border-2 scale-105 z-10":M,"border-r border-t hover:border border-blue-200  hover:scale-105 hover:z-20 hover:bg-blue-50":!M,"bg-gray-50":!p}};return(t,n)=>(s(),r("div",ut,[g.month?(s(),A(Oe,{key:0,month:g.month,class:"border-t border-blue-200/50 relative"},{date:k(({day:l,month:p,year:M,isCurrentMonth:E})=>[e("div",{tabindex:"0",class:C(["transition origin-center p-2 outline-blue-600 outline-1 cursor-pointer",u(l,p,M,E)])},[e("div",{class:C(["font-bold w-full flex items-center",{"text-gray-300":!E}])},[e("div",null,f(l),1),e("div",ct,[a(l,p,M)?$("",!0):(s(),r("button",{key:0,class:"btn-icon",onClick:S(L=>m(L,l,p,M),["prevent"])},n[0]||(n[0]=[e("i",{class:"fas fa-expand-arrows text-gray-400 hover:text-gray-600"},null,-1)]),8,pt))])],2),h(le,{"is-current-month":E,tasks:b(ae)(g.tasks,l,p,M),limit:3,class:"text-xs mt-4",onClickOnMore:L=>m(L,l,p,M)},null,8,["is-current-month","tasks","onClickOnMore"])],2)]),"calender-bottom":k(()=>[i.day?(s(),r("div",yt,[e("div",mt,[e("div",ft,[w(" Tasks for "+f(i.day)+"/"+f(i.month)+"/"+f(i.year)+" ",1),e("button",{class:"ml-auto",type:"button",onClick:S(c,["prevent"])},n[1]||(n[1]=[e("i",{class:"fas fa-times"},null,-1)]))]),h(le,{class:"p-4","is-current-month":t.isCurrentMonth,tasks:b(ae)(g.tasks,i.day,i.month,i.year),tree:!0},null,8,["is-current-month","tasks"])])])):$("",!0)]),_:1},8,["month"])):$("",!0)]))}},xt={class:"bg-opacity-90 relative"},bt={class:"rounded-md z-20"},gt={class:"text-md sticky top-0 border-b px-4 z-30 py-3 bg-white flex items-center shadow"},_t={class:"flex justify-between items-center gap-6 w-full"},ht={key:0,class:"text-blue-800 bg-blue-100 rounded-full border px-4 py-0.5 text-sm"},kt={key:1,class:"text-blue-800 bg-blue-100 rounded-full border px-4 py-0.5 text-sm"},wt={class:"ml-auto flex items-center gap-2"},$t={key:0,class:"w-32 relative h-8"},Dt={__name:"DailyTask",setup(g){const i=ue({day:null,month:null,year:null}),c=j(),m=j(),d=j("loading"),a=Ne(),u=ce(),t=j(""),n=j("day-wise"),l=j("not-completed");pe(()=>{c.value=se(new Date),m.value=ne(new Date)}),Q(c,L=>{const[x,D,F]=L.split("-").map(Number);i.day=F,i.month=D,i.year=x}),Q(m,L=>{const[x,D]=L.split("-").map(Number);i.day=1,i.month=D,i.year=x}),Q(()=>i.month,async()=>{d.value="loading",await p(),d.value=""}),Q(n,L=>{if(L=="month-wise"){const[x,D]=c.value.split("-");m.value=`${x}-${D}`}});async function p(){await a.fetchMyTasks()}const M=async()=>{d.value="loading",await p(),d.value=""},E=V(()=>{var D,F;const L=R=>{var O,W;return t.value?(W=R==null?void 0:R.toUpperCase())==null?void 0:W.includes((O=t.value)==null?void 0:O.toUpperCase()):!0},x=n.value=="day-wise"?{"user-ids":(D=u==null?void 0:u.user)==null?void 0:D.id,status:l.value}:{"user-ids":(F=u==null?void 0:u.user)==null?void 0:F.id};return Ae(ae(a.tasks,i.day,i.month,i.year),x).filter(R=>{var O;return L(R.title)||((O=R.children_tasks)==null?void 0:O.some(W=>L(W==null?void 0:W.title)))}).map(R=>({...R,children_tasks:R.children_tasks.filter(O=>L(O.title))}))});return(L,x)=>(s(),r("div",null,[n.value=="day-wise"?(s(),A(et,{key:0,loading:d.value=="loading","selected-day":c.value,onChange:x[0]||(x[0]=D=>c.value=D),onReloadClick:M,onMonthWiseButtonClick:x[1]||(x[1]=D=>n.value="month-wise")},null,8,["loading","selected-day"])):$("",!0),n.value=="month-wise"?(s(),A(at,{key:1,loading:d.value=="loading","selected-month":m.value,onChange:x[2]||(x[2]=D=>m.value=D),onDayWiseButtonClick:x[3]||(x[3]=D=>n.value="day-wise"),onReloadClick:M},null,8,["loading","selected-month"])):$("",!0),e("div",xt,[e("div",bt,[e("div",gt,[e("div",_t,[n.value=="day-wise"?(s(),r("div",ht,f(b(Re)(c.value)),1)):$("",!0),n.value=="month-wise"?(s(),r("div",kt,f(b(qe)(m.value)),1)):$("",!0),e("div",wt,[n.value=="day-wise"?(s(),r("div",$t,[x[7]||(x[7]=e("label",{class:"absolute text-xs left-3 -top-1.5 bg-slate-100 text-blue-500"},"Status",-1)),De(e("select",{"onUpdate:modelValue":x[4]||(x[4]=D=>l.value=D),class:"h-8 text-xs px-2 text-gray-600 border-2 border-gray-400 rounded-md w-full"},x[6]||(x[6]=[e("option",{value:""},"--ALL TASKS--",-1),e("option",{value:"not-completed"},"Not Completed",-1)]),512),[[Ce,l.value]])])):$("",!0),h(Te,{modelValue:t.value,"onUpdate:modelValue":x[5]||(x[5]=D=>t.value=D),class:"w-full md:w-48 md:ml-auto h-8","debounce-time":0},null,8,["modelValue"])])])]),n.value=="day-wise"?(s(),A(le,{key:0,class:"p-4 overflow-y-auto",tasks:E.value,tree:!0},null,8,["tasks"])):n.value=="month-wise"?(s(),A(vt,{key:1,tasks:E.value||[],month:m.value,class:"bg-gray-50"},null,8,["tasks","month"])):$("",!0)]),d.value==="loading"?(s(),A(Se,{key:0,class:"absolute inset-0 flex items-center justify-center z-20 bg-opacity-70"})):$("",!0)])]))}},Ct={class:"bg-white shadow-md rounded-lg"},Mt={class:"overflow-x-auto shadow-md min-h-max"},Lt={class:"min-w-full text-sm text-left text-gray-500 table-fixed"},St={class:"text-xs"},At={class:"text-sm font-semibold text-blue-800"},Tt={__name:"DashboardLeaveBalance",setup(g){const i=ee(),{userDashboard:c}=H(i);return(m,d)=>{var a,u,t,n;return s(),r("div",Ct,[d[4]||(d[4]=e("h2",{class:"text-xl font-semibold py-2 px-4"},"Leave Balance",-1)),e("div",Mt,[e("table",Lt,[e("thead",null,[e("tr",St,[d[0]||(d[0]=e("th",{class:"px-2 py-1 font-semibold text-gray-900 border bg-gray-50"},null,-1)),(s(!0),r(T,null,P((a=b(c))==null?void 0:a.leave_balance,l=>(s(),r("th",{class:"px-4 text-center py-1 font-semibold text-gray-900 border bg-gray-50 w-40",key:l.id},f(l.name),1))),128))])]),e("tbody",null,[e("tr",null,[d[1]||(d[1]=e("td",{class:"px-4 py-4 font-medium text-gray-900 border text-xs"},"Total",-1)),(s(!0),r(T,null,P((u=b(c))==null?void 0:u.leave_balance,l=>(s(),r("td",{class:"px-4 text-center py-3 font-medium text-gray-900 border",key:l.id},f(l.annual_quota),1))),128))]),e("tr",null,[d[2]||(d[2]=e("td",{class:"px-4 py-3 font-medium text-gray-900 border text-xs"},"Used",-1)),(s(!0),r(T,null,P((t=b(c))==null?void 0:t.leave_balance,l=>(s(),r("td",{class:"px-4 text-center py-4 font-medium text-gray-900 border",key:l.id},f(l.used_days),1))),128))]),e("tr",At,[d[3]||(d[3]=e("td",{class:"px-4 py-3 border text-xs"},"Balance",-1)),(s(!0),r(T,null,P((n=b(c))==null?void 0:n.leave_balance,l=>(s(),r("td",{class:"px-4 text-center py-4 border",key:l.id},f(l.remaining_days),1))),128))])])])])])}}},Rt={class:"flex items-center gap-2 mr-2"},qt=["onClick"],Nt=["onClick"],Ot={__name:"DashboardMyTodoList",setup(g){const i=ye(),c=ie();function m(d){c.push({query:{...i.query,"todos[type]":d.type,"todos[year]":d.year,"todos[month]":d.month,"todos[day]":d.day}})}return(d,a)=>(s(),A(Pe,{type:b(i).query["todos[type]"],year:b(i).query["todos[year]"],month:b(i).query["todos[month]"],day:b(i).query["todos[day]"],userRole:"employee",onChangeInput:m},{beforeHeader:k(()=>a[0]||(a[0]=[e("h2",{class:"text-md font-medium"},"Todo List",-1)])),typeSelection:k(({types:u,changeType:t,selected:n})=>{var l,p,M,E;return[e("div",Rt,[e("button",{onClick:S(L=>{var x;return t((x=u[0])==null?void 0:x.value)},["prevent"]),class:C(["rounded text-sm ",(n==null?void 0:n.type)==((l=u[0])==null?void 0:l.value)?"text-blue-500 border px-2 font-semibold":"hover:underline text-blue-600"])},f((p=u[0])==null?void 0:p.label),11,qt),e("button",{onClick:S(L=>{var x;return t((x=u[1])==null?void 0:x.value)},["prevent"]),class:C(["rounded text-sm ",(n==null?void 0:n.type)==((M=u[1])==null?void 0:M.value)?"text-blue-500 border px-2 font-semibold ":"hover:underline text-blue-600"])},f((E=u[1])==null?void 0:E.label),11,Nt)])]}),_:1},8,["type","year","month","day"]))}},Pt={class:"bg-white shadow-sm rounded-xl p-4"},Et={class:"flex items-center justify-between mb-1"},Bt={key:0,class:"text-xs italic text-center py-4 text-gray-500 mt-2"},jt={key:1,class:"py-3 divide-y divide-gray-100"},Ut=["onClick"],Vt={class:"flex justify-between items-center py-2 rounded hover:bg-sky-50/60 transition-colors"},Ft={class:"text-sm text-gray-900 min-w-0"},Wt={class:"font-medium"},zt={class:"opacity-70"},It={key:0,class:"fas fa-clock mr-1.5"},Yt={key:1,class:"fas fa-hourglass-half mr-1.5"},Ht={key:2,class:"fas fa-check-circle mr-1.5"},Kt={key:3,class:"fas fa-times-circle mr-1.5"},Gt={class:"mb-1 text-gray-700 flex flex-wrap items-center gap-x-2.5 gap-y-1"},Jt=["title"],Xt={class:"truncate max-w-[9.5rem] sm:max-w-none"},Zt={class:"truncate max-w-[9.5rem] sm:max-w-none"},Qt={key:1,class:"truncate max-w-[10rem] sm:max-w-none"},es=["title"],ts={class:"mt-6"},ss={class:"flex items-center justify-between mb-1"},ns={key:0,class:"text-xs italic text-center py-4 text-gray-500 mt-2"},os={key:1,class:"py-3 divide-y divide-gray-100"},as=["onClick"],ls={class:"flex justify-between items-center py-2 rounded hover:bg-sky-50/60 transition-colors"},rs={class:"text-sm text-gray-900 min-w-0"},is={class:"opacity-80"},ds={class:"mt-6"},us={class:"flex items-center justify-between mb-1"},cs={class:"flex items-center gap-3"},ps={key:0,class:"text-xs italic text-center py-4 text-gray-500 mt-2"},ys={key:1,class:"py-3 divide-y divide-gray-100"},ms=["onClick"],fs={class:"flex justify-between items-center py-2 rounded hover:bg-sky-50/60 transition-colors"},vs={class:"text-sm text-gray-900 min-w-0"},xs={class:"opacity-80"},bs={class:"mt-6"},gs={class:"flex items-center justify-between mb-1"},_s={key:0,class:"text-xs italic text-center py-4 text-gray-500 mt-2"},hs={key:1,class:"py-3 divide-y divide-gray-100"},ks=["onClick"],ws={class:"flex justify-between items-center py-2 rounded hover:bg-sky-50/60 transition-colors"},$s={class:"text-sm text-gray-900 min-w-0"},Ds={class:"opacity-80"},X="inline-flex items-center rounded-full border px-2 py-0.5 text-[12px]",Z="border-gray-300 bg-gray-50 text-gray-800",Cs={__name:"DashboardRecentApplications",setup(g){const i=G(()=>J(()=>import("./LeaveApplicationModal-SmHn_UdZ.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]))),c=G(()=>J(()=>import("./ShortLeaveDetailsModal-yzq0Vta6.js"),__vite__mapDeps([10,1,2,3,4,5,6,11,7,12,13]))),m=G(()=>J(()=>import("./ManualAttendanceDetailsModal-DncDclEk.js"),__vite__mapDeps([14,1,2,3,4,5,6,7,15,16]))),d=G(()=>J(()=>import("./ShiftExchangeDetailsModal-DIvtT3gb.js"),__vite__mapDeps([17,1,2,3,4,5,6,11,7,18,19]))),a=G(()=>J(()=>import("./OffdayExchangeDetailsModal-CVwR7bEK.js"),__vite__mapDeps([20,1,2,3,4,5,6,11,7,18,21]))),u=ee(),{userDashboard:t}=H(u),n=V(()=>{var v;return((v=t.value)==null?void 0:v.lists)??{}}),l=V(()=>n.value.current_month_leave??[]),p=V(()=>n.value.short_leave??[]),M=V(()=>n.value.exchange??[]),E=V(()=>n.value.manual_attendance??[]),L={null:{title:"Handover Waiting",cls:"bg-gray-500 text-white"},Pending:{title:"Pending",cls:"bg-yellow-500 text-white"},Approved:{title:"Approved",cls:"bg-green-500 text-white"},Rejected:{title:"Rejected",cls:"bg-red-500 text-white"}},x=v=>L[v??"null"]??{title:String(v||"Unknown"),cls:"bg-gray-400 text-white"},D=v=>Array.isArray(v)?v.filter(o=>o==null?void 0:o.name).map(o=>`${o.name} (${(o==null?void 0:o.days)??0})`).join(", "):"",F=j({open:!1,id:null}),R=j({open:!1,id:null}),O=j({open:!1,id:null}),W=v=>{F.value={open:!0,id:v}},me=v=>{R.value={open:!0,id:v}},fe=v=>{O.value={open:!0,id:v}},z=j({open:!1,id:null,type:null}),ve=v=>{const o=(v==null?void 0:v.exchange_type)==="offday"?"offday":"shift";z.value={open:!0,id:v.id,type:o}},xe=V(()=>z.value.type==="offday"?a:d),be=V(()=>`${z.value.type||"x"}-${z.value.id||"x"}`);function ge(v){if(!v)return null;const o=String(v).trim();let _=o.match(/^(\d{4})-(\d{2})-(\d{2})$/);return _?new Date(+_[1],+_[2]-1,+_[3],0,0,0):(_=o.match(/^(\d{4})-(\d{2})-(\d{2})[ T](\d{2}):(\d{2})(?::(\d{2}))?$/),_?new Date(+_[1],+_[2]-1,+_[3],+_[4],+_[5],+(_[6]||0)):null)}function B(v){const o=ge(v);return o?o.toLocaleDateString(void 0,{day:"2-digit",month:"short",year:"numeric"}):""}function _e(v){const o=String(v||"").match(/^(\d{4})-(\d{2})-(\d{2})$/);return o?new Date(+o[1],+o[2]-1,+o[3],0,0,0):null}function he(v,o){const _=new Date(v);return _.setDate(_.getDate()+o),_}function ke(v,o){return v&&o&&v.getFullYear()===o.getFullYear()&&v.getMonth()===o.getMonth()&&v.getDate()===o.getDate()}function te(v){const o=v.getFullYear(),_=String(v.getMonth()+1).padStart(2,"0"),y=String(v.getDate()).padStart(2,"0");return`${o}-${_}-${y}`}function we(v){const o=Array.isArray(v)?v.slice():[],_=q=>Array.from(new Set(q)).sort(),y=_(o.filter(q=>(q==null?void 0:q.leave_type_id)!=="weekend").map(q=>q.date).filter(Boolean)),U=_(o.filter(q=>(q==null?void 0:q.leave_type_id)==="weekend").map(q=>q.date).filter(Boolean)),N=[];let I=null,Y=null;for(const q of y){const K=_e(q);if(K){if(!I){I=Y=K;continue}ke(he(Y,1),K)?Y=K:(N.push({from:te(I),to:te(Y)}),I=Y=K)}}return I&&Y&&N.push({from:te(I),to:te(Y)}),{ranges:N,weekends:U,leaveCount:y.length}}return(v,o)=>{const _=re("RouterLink");return s(),r("div",Pt,[e("section",null,[e("header",Et,[o[5]||(o[5]=e("div",{class:"flex items-center gap-2"},[e("i",{class:"fas fa-file h-5 w-5 text-gray-600"}),e("h2",{class:"text-lg font-semibold text-gray-900"},[w("Applications "),e("span",{class:"text-xs ml-2 text-green-600 font-medium"},"Latest")])],-1)),h(_,{to:{name:"MyLeaveApplications"},class:"text-xs text-blue-600 hover:underline"},{default:k(()=>o[4]||(o[4]=[w(" See more ")])),_:1,__:[4]})]),o[9]||(o[9]=e("hr",{class:"border-gray-200"},null,-1)),l.value.length===0?(s(),r("div",Bt," No applications ")):(s(),r("div",jt,[(s(!0),r(T,null,P(l.value,y=>(s(),r("button",{key:y.id,class:"block w-full text-left",onClick:U=>W(y.id)},[e("div",Vt,[e("h3",Ft,[e("span",Wt,"#"+f(y.id),1),e("span",zt," ("+f(D(y.leave_type_counts))+")",1)]),e("span",{class:C(["font-medium flex items-center whitespace-nowrap text-[11px] px-2 py-0.5 rounded-full",x(y.status).cls])},[y.status===null?(s(),r("i",It)):y.status==="Pending"?(s(),r("i",Yt)):y.status==="Approved"?(s(),r("i",Ht)):(s(),r("i",Kt)),w(" "+f(x(y.status).title),1)],2)]),e("div",Gt,[(s(!0),r(T,null,P([we(y.json_data)],U=>(s(),r(T,{key:"info-"+y.id},[U.leaveCount>1?(s(!0),r(T,{key:0},P(U.ranges,(N,I)=>(s(),r("span",{key:I,class:C([X,Z]),title:N.from===N.to?B(N.from):B(N.from)+" – "+B(N.to)},[o[7]||(o[7]=e("i",{class:"far fa-calendar-minus mr-1"},null,-1)),N.from!==N.to?(s(),r(T,{key:0},[e("span",Xt,f(B(N.from)),1),o[6]||(o[6]=e("span",{class:"mx-1"},"–",-1)),e("span",Zt,f(B(N.to)),1)],64)):(s(),r("span",Qt,f(B(N.from)),1))],10,Jt))),128)):(s(),r(T,{key:1},[U.ranges[0]?(s(),r("span",{key:0,class:C([X,Z]),title:B(U.ranges[0].from)},[o[8]||(o[8]=e("i",{class:"far fa-calendar-day mr-1"},null,-1)),w(" "+f(B(U.ranges[0].from)),1)],10,es)):$("",!0)],64))],64))),128))])],8,Ut))),128))]))]),e("section",ts,[e("header",ss,[o[11]||(o[11]=e("div",{class:"flex items-center gap-2"},[e("i",{class:"fas fa-walking h-5 w-5 text-gray-600"}),e("h2",{class:"text-base font-semibold text-gray-900"},"Short Leave")],-1)),h(_,{to:{name:"MyShortLeaves"},class:"text-xs text-blue-600 hover:underline"},{default:k(()=>o[10]||(o[10]=[w("See more")])),_:1,__:[10]})]),o[12]||(o[12]=e("hr",{class:"border-gray-200"},null,-1)),p.value.length===0?(s(),r("div",ns," No short leave ")):(s(),r("div",os,[(s(!0),r(T,null,P(p.value,y=>(s(),r("button",{key:y.id,class:"w-full text-left",onClick:U=>me(y.id)},[e("div",ls,[e("h3",rs,[e("span",{class:C([X,Z,"text-xs mr-1"])},f(B(y.date)),3),e("span",is,"("+f(y.type||"—")+")",1)]),e("span",{class:C(["text-[11px] px-2 py-0.5 rounded-full",x(y.status).cls])},f(x(y.status).title),3)])],8,as))),128))]))]),e("section",ds,[e("header",us,[o[15]||(o[15]=e("div",{class:"flex items-center gap-2"},[e("i",{class:"fas fa-exchange-alt h-5 w-5 text-gray-600"}),e("h2",{class:"text-base font-semibold text-gray-900"},"Exchange")],-1)),e("div",cs,[h(_,{to:{name:"MyShiftExchangeList"},class:"text-xs text-blue-600 hover:underline"},{default:k(()=>o[13]||(o[13]=[w("Shift")])),_:1,__:[13]}),h(_,{to:{name:"MyOffdayExchangeList"},class:"text-xs text-blue-600 hover:underline"},{default:k(()=>o[14]||(o[14]=[w("Offday")])),_:1,__:[14]})])]),o[16]||(o[16]=e("hr",{class:"border-gray-200"},null,-1)),M.value.length===0?(s(),r("div",ps," No exchange ")):(s(),r("div",ys,[(s(!0),r(T,null,P(M.value,y=>(s(),r("button",{key:y.id,class:"block w-full text-left",onClick:U=>ve(y)},[e("div",fs,[e("h3",vs,[e("span",{class:C([X,Z,"text-xs mr-1"])},f(B(y.current_date)),3),e("span",xs,"("+f(y.exchange_type||"—")+")",1)]),e("span",{class:C(["text-[11px] px-2 py-0.5 rounded-full",x(y.status).cls])},f(x(y.status).title),3)])],8,ms))),128))]))]),e("section",bs,[e("header",gs,[o[18]||(o[18]=e("div",{class:"flex items-center gap-2"},[e("i",{class:"fas fa-user-check h-5 w-5 text-gray-600"}),e("h2",{class:"text-base font-semibold text-gray-900"},"Manual Attendance")],-1)),h(_,{to:{name:"MyManualAttendanceList"},class:"text-xs text-blue-600 hover:underline"},{default:k(()=>o[17]||(o[17]=[w("See more")])),_:1,__:[17]})]),o[19]||(o[19]=e("hr",{class:"border-gray-200"},null,-1)),E.value.length===0?(s(),r("div",_s," No manual application ")):(s(),r("div",hs,[(s(!0),r(T,null,P(E.value,y=>(s(),r("button",{key:y.id,class:"block w-full text-left",onClick:U=>fe(y.id)},[e("div",ws,[e("h3",$s,[e("span",{class:C([X,Z,"text-xs mr-1"])},f(y.check_in?B(y.check_in):B(y.check_out)),3),e("span",Ds,"("+f(y.type||"—")+")",1)]),e("span",{class:C(["text-[11px] px-2 py-0.5 rounded-full",x(y.status).cls])},f(x(y.status).title),3)])],8,ks))),128))]))]),F.value.open?(s(),A(b(i),{key:0,open:F.value.open,"onUpdate:open":o[0]||(o[0]=y=>F.value.open=y),id:F.value.id},null,8,["open","id"])):$("",!0),R.value.open?(s(),A(b(c),{key:1,open:R.value.open,"onUpdate:open":o[1]||(o[1]=y=>R.value.open=y),id:R.value.id},null,8,["open","id"])):$("",!0),O.value.open?(s(),A(b(m),{key:2,open:O.value.open,"onUpdate:open":o[2]||(o[2]=y=>O.value.open=y),id:O.value.id},null,8,["open","id"])):$("",!0),z.value.open?(s(),A(Me(xe.value),{key:be.value,open:z.value.open,"onUpdate:open":o[3]||(o[3]=y=>z.value.open=y),id:z.value.id},null,40,["open","id"])):$("",!0)])}}},Ms={class:"bg-white shadow-md rounded-lg p-4"},Ls={class:"space-y-3"},Ss={key:0,class:"text-xs italic text-center py-4 text-gray-500"},As={class:"flex items-center space-x-4"},Ts={key:0,class:"h-3 w-3 bg-red-600 rounded-full inline-block"},Rs={key:1,class:"inline-block"},qs={class:"absolute top-10 left-1/2 -translate-x-1/2 bg-gray-800 text-white text-xs rounded py-1 px-2 opacity-0 group-hover:opacity-100 transition pointer-events-none z-10 whitespace-nowrap"},Ns={class:"text-sm font-medium text-gray-900"},Os={class:"text-xs text-gray-500 mt-0.5"},Ps={class:"text-xl font-bold text-gray-800 flex items-center gap-2 p-4"},Es={class:"space-y-5 px-4 md:px-6 py-4"},Bs={class:"text-sm text-gray-500 flex items-center gap-2"},js={class:"flex justify-end gap-3 mt-6"},Us={__name:"DashboardRecentNotices",setup(g){const i=ee(),{userDashboard:c}=H(i),m=ie(),d=V(()=>{var u,t;if(c.value&&c.value.notices){const n=(t=(u=c.value)==null?void 0:u.notices)==null?void 0:t.find(l=>!l.user_feedback);if(n)return n}return null}),a=()=>{if(!d.value)return;const u=d.value.type===1?`/notice-details/${d.value.id}`:`/policy-details/${d.value.id}`;m.push(u)};return(u,t)=>{var l;const n=re("RouterLink");return s(),r("div",Ms,[t[7]||(t[7]=Le('<div class="flex justify-between items-start mb-1"><div class="flex items-center"><i class="fas fa-file mr-2 h-5 w-5"></i><h2 class="text-xl font-semibold">Notices</h2></div></div><hr class="mb-3">',2)),e("div",Ls,[((l=b(c).notices)==null?void 0:l.length)===0?(s(),r("div",Ss," No pending notice found ")):(s(!0),r(T,{key:1},P(b(c).notices,(p,M)=>(s(),r("div",{key:M,class:"flex items-center justify-between p-4 border rounded-lg shadow-sm hover:shadow transition-all bg-white"},[e("div",As,[e("div",{class:C([["rounded-full",p.user_feedback?"bg-green-100":"bg-red-100"],"h-8 w-8 flex items-center justify-center rounded-full flex-shrink-0"])},[p.user_feedback?(s(),r("span",Rs,t[2]||(t[2]=[e("i",{class:"far fa-check text-green-600"},null,-1)]))):(s(),r("span",Ts)),e("div",qs,f(p.user_feedback?"Feedback Submitted":"Feedback Pending"),1)],2),e("div",null,[e("p",Ns,f(p.title),1),e("p",Os,f(p.published_at),1)])]),h(n,{to:p.type===1?`/notice-details/${p.id}`:`/policy-details/${p.id}`,class:"text-blue-600 hover:text-blue-800 font-semibold text-sm"},{default:k(()=>t[3]||(t[3]=[w(" View ")])),_:2,__:[3]},1032,["to"])]))),128)),d.value?(s(),A(Be,{key:2,show:!0,onClose:t[1]||(t[1]=p=>d.value=null)},{default:k(()=>[e("div",Ps,[t[4]||(t[4]=e("i",{class:"fas fa-bell text-blue-500"},null,-1)),w(" "+f(d.value.title),1)]),e("div",Es,[e("p",Bs,[t[5]||(t[5]=e("i",{class:"fas fa-calendar-alt text-gray-400"},null,-1)),w(" Published: "+f(d.value.published_at),1)]),t[6]||(t[6]=e("p",{class:"text-base text-gray-700 leading-relaxed"}," You must read this notice before proceeding. ",-1)),e("div",js,[e("button",{onClick:t[0]||(t[0]=p=>d.value=null),class:"bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium px-5 py-2 rounded-lg transition"}," Cancel "),e("button",{onClick:a,class:"bg-blue-600 hover:bg-blue-700 text-white font-semibold px-6 py-2.5 rounded-lg shadow transition"}," Read Details ")])])]),_:1})):$("",!0)])])}}},Vs={class:"w-full px-6 py-4"},Fs={class:"grid lg:grid-cols-4 gap-6 items-start"},Ws={class:"gap-0 rounded-md bg-white shadow-md border border-gray-300 col-span-full lg:col-span-3 lg:row-span-2"},zs={class:"flex items-center justify-center gap-4 py-2"},Is={class:"col-span-full lg:col-span-1 grid sm:grid-cols-2 lg:grid-cols-1 gap-6 sticky top-[80px]"},Ys={class:"card-bg gap-0 shadow-md border border-gray-300"},Hs={class:"card-bg gap-0 shadow-md border border-gray-300"},Ks={class:"card-bg gap-0 shadow-md border border-gray-300"},Gs={__name:"DashboardEmployeeView",setup(g){const i=j("todos"),c=ye(),m=ie();return Q(()=>i.value,function(d){d!=="todos"&&m.replace({query:Object.keys(c.query).filter(a=>!a.match(/^todos\[/)).reduce((a,u)=>(a[u]=c.query[u],a),{})})}),(d,a)=>(s(),r("div",Vs,[e("div",Fs,[e("div",Ws,[e("div",zs,[e("button",{onClick:a[0]||(a[0]=S(u=>i.value="todos",["prevent"])),class:C(["!py-0.5 text-sm",{"btn-2":i.value=="todos","btn-3 hover:bg-gray-200 hover:text-blue-500":i.value!="todos"}])}," Todos ",2),e("button",{onClick:a[1]||(a[1]=S(u=>i.value="tasks",["prevent"])),class:C(["!py-0.5 text-sm",{"btn-2":i.value=="tasks","btn-3 hover:bg-gray-200 hover:text-blue-500":i.value!="tasks"}])}," Tasks ",2)]),i.value=="todos"?(s(),A(Ot,{key:0})):$("",!0),i.value=="tasks"?(s(),A(Dt,{key:1})):$("",!0)]),e("div",Is,[e("div",Ys,[h(Cs)]),e("div",Hs,[h(Us)]),e("div",Ks,[h(Tt)])])])]))}},pn={__name:"DashBoard",setup(g){const i=ce(),c=ee(),{userDashboard:m}=H(c),{user:d}=H(i),a=V(()=>{var t;return["admin","super_admin","developer"].includes((t=d==null?void 0:d.value)==null?void 0:t.role)}),u=j(null);return pe(async()=>{var n,l;d.value||await i.fetchUser(),await c.fetchUserDashboardData(),a.value&&await c.fetchAdminDashboardData();const t=(l=(n=m.value)==null?void 0:n.notices)==null?void 0:l.find(p=>!p.user_feedback);t&&(u.value=t)}),(t,n)=>a.value&&b(i).isAdminMood?(s(),A(Ge,{key:0})):(s(),A(Gs,{key:1}))}};export{pn as default};
