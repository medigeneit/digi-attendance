import{a1 as C,a4 as A,r as d,p as m,e as B,I as N,c,o as r,a as t,g as u,n as w,w as T,h as M,t as x,v as q,j as _,L}from"./index-BgJ0NJ2y.js";const V={key:0,class:"font-bold text-lg text-green-600"},z={key:1,class:"btn-2"},D={key:0,class:"text-base"},E={key:1,class:"btn-1"},I={class:"modal-card"},F={class:"title-lg"},U=["placeholder","required"],$={class:"flex justify-between gap-2 mt-4"},H={class:"capitalize hidden md:inline"},O={__name:"AcceptAndRejectHandler",props:{notificationType:{type:String,required:!0},applicationId:{type:[String,Number],required:!0},onSuccess:{type:Function,default:null},onSubmit:{type:Function,default:null},variant:{type:Number,default:1}},setup(s){const i=s,j=C(),f=A(),p=d(null),y=d(null),n=d(null),o=d(""),b=m(()=>n.value!==null),h=m(()=>n.value==="accept"?"Accept Application":"Reject Application");m(()=>n.value==="accept"?"btn-2":"btn-2 bg-red-500 text-white");function g(a){(a==="accept"||a==="reject")&&(n.value=a,o.value="",S())}function v(){n.value=null,o.value=""}async function R(){if(!f.loading){if(n.value==="reject"&&!o.value)return j.error("Rejection Reason is required!");if(typeof i.onSubmit=="function")return i.onSubmit({note:o.value,action:n.value});await f.updateSpecificNotification(i.notificationType,i.applicationId,n.value,o.value),i.onSuccess?i.onSuccess():f.fetchCountNotifications(),v()}}function k(a){var e,l;b.value&&(a.key==="ArrowLeft"?(e=y.value)==null||e.focus():a.key==="ArrowRight"&&((l=p.value)==null||l.focus()))}function S(){L(()=>{var a;(a=p.value)==null||a.focus()})}return B(()=>{window.addEventListener("keydown",k)}),N(()=>{window.removeEventListener("keydown",k)}),(a,e)=>(r(),c("div",null,[t("div",{class:w(["flex justify-center items-center",s.variant===1?"gap-5":"gap-2"])},[t("button",{onClick:e[0]||(e[0]=l=>g("accept"))},[s.variant===1?(r(),c("span",V,"✔")):u("",!0),s.variant===2?(r(),c("span",z,e[3]||(e[3]=[t("span",{class:"text-base scale-110"},"✔",-1),t("span",{class:"hidden md:inline"},"Approve",-1)]))):u("",!0)]),t("button",{onClick:e[1]||(e[1]=l=>g("reject"))},[s.variant===1?(r(),c("span",D,"❌")):u("",!0),s.variant===2?(r(),c("span",E,e[4]||(e[4]=[t("span",{class:"text-base"},"❌",-1),t("span",{class:"hidden md:inline"},"Reject",-1)]))):u("",!0)])],2),b.value?(r(),c("div",{key:0,class:"fixed inset-0 z-50 flex justify-center items-center bg-black/50",onClick:T(v,["self"])},[t("div",I,[t("h3",F,x(h.value),1),M(t("textarea",{"onUpdate:modelValue":e[2]||(e[2]=l=>o.value=l),rows:"7",placeholder:n.value==="accept"?"Accept Note...":"Rejection Reason...",class:"w-full border rounded-lg p-2 text-gray-700",required:n.value==="reject"},null,8,U),[[q,o.value]]),t("div",$,[t("button",{ref_key:"cancelBtnRef",ref:y,class:"btn-3 focus:ring-2 ring-offset-2",onClick:v}," Cancel ",512),t("button",{ref_key:"confirmBtnRef",ref:p,class:w(["focus:ring-2 ring-offset-2",n.value==="reject"?"btn-2-red":"btn-2-green"]),onClick:R},[e[5]||(e[5]=_(" Confirm ")),t("span",H,x(n.value),1)],2)])])])):u("",!0)]))}};export{O as _};
