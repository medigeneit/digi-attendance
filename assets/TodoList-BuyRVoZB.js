import{L as R}from"./LoaderView-CsKc_L0i.js";import{r as E,A as ot,x as M,c as y,o as d,h as U,g as b,a as t,B as nt,w as x,q as A,E as B,F as W,y as lt,n as _,t as w,f as T,i as D,k as g,e as G,G as X,j as S,v as q}from"./index-DQONqKpV.js";import{f as at,b as K,g as Z}from"./datetime-l2Vm98rT.js";import{_ as st}from"./CalenderView-CJ3M63x3.js";import{u as V}from"./useTodoStore-ZzJNdZ6U.js";import{O as z}from"./OverlyModal-9hGRHBRx.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const it={class:"px-4 py-2 flex items-center bg-gray-50 group gap-2"},dt=["value"],rt=["value"],ut=["disabled"],ct={key:4,class:"ml-4 md:ml-auto flex items-center gap-2"},mt={key:5,class:"ml-4 md:ml-auto flex items-center gap-2"},vt={__name:"TodoHeading",props:{selectedType:{type:String,default:"month-view"},selectedValue:{type:String,default:""},selected:{type:Object,default:()=>({type:"month-view",month:"",day:"",year:"",week:""})},loading:{type:Boolean,default:!1}},emits:["reloadClick","selectViewType","change"],setup(c,{emit:f}){const l=c,e=f,n=E();function a(){e("selectViewType",n.value),e("change",{...l.selected,type:n.value})}ot(()=>{var m;return(m=l.selected)==null?void 0:m.type},m=>n.value=m,{immediate:!0});const i=M(()=>n.value=="month-view"&&l.selected.year&&l.selected.month?[l.selected.year,l.selected.month-1,1]:n.value=="day-view"&&l.selected.year&&l.selected.month&&l.selected.day?[l.selected.year,l.selected.month-1,l.selected.day]:[new Date().getFullYear(),new Date().getMonth(),new Date().getDate()]);function r(){n.value=="month-view"&&k(new Date)}function s(){if(n.value=="month-view"){const m=new Date(...i.value);m.setMonth(m.getMonth()+1),k(m)}}function u(){if(n.value=="month-view"){const m=new Date(...i.value);m.setMonth(m.getMonth()-1),k(m)}}function o(){n.value=="day-view"&&k(new Date)}function v(){if(n.value=="day-view"){const m=new Date(...i.value);m.setDate(m.getDate()+1),k(m)}}function p(){if(n.value=="day-view"){const m=new Date(...i.value);m.setDate(m.getDate()-1),k(m)}}function k(m){e("change",{type:n.value,month:m.getMonth()+1,day:m.getDate(),year:m.getFullYear(),week:m.getDay()})}const I=M(()=>n.value=="month-view"?`${l.selected.year}-${l.selected.month.toString().padStart(2,"0")}`:n.value=="day-view"?`${l.selected.year}-${l.selected.month.toString().padStart(2,"0")}-${l.selected.day.toString().padStart(2,"0")}`:l.selected),N=m=>{var C,L;if(n.value=="month-view"){const[h,$]=(C=m.target.value)==null?void 0:C.split("-").map(Number),O=new Date(h,$-1,1);k(O)}if(n.value=="day-view"){const h=new Date((L=m.target)==null?void 0:L.value);k(h)}};return(m,C)=>(d(),y("div",it,[U(t("select",{class:"px-2 h-7 border rounded","onUpdate:modelValue":C[0]||(C[0]=L=>n.value=L),onChange:a},C[2]||(C[2]=[t("option",{value:"day-view"},"Day",-1),t("option",{value:"month-view"},"Month",-1)]),544),[[nt,n.value]]),n.value=="month-view"?(d(),y("input",{key:0,type:"month",value:I.value,onInput:N,class:"border px-2 rounded"},null,40,dt)):b("",!0),n.value=="day-view"?(d(),y("input",{key:1,type:"date",value:I.value,onInput:N,class:"border px-2 rounded"},null,40,rt)):b("",!0),n.value=="month-view"?(d(),y("button",{key:2,class:"btn-3 mx-4 h-7",onClick:x(r,["prevent"])}," Current Month ")):b("",!0),n.value=="day-view"?(d(),y("button",{key:3,class:"btn-3 mx-4 h-7",onClick:x(o,["prevent"])}," Today ")):b("",!0),t("button",{class:A(["btn-3 px-2 py-2 mx-4 size-7 disabled:text-gray-300 disabled:border-gray-300",{"animate-spin text-gray-300 border-gray-300 !bg-opacity-0":c.loading}]),onClick:C[1]||(C[1]=x(L=>e("reloadClick"),["prevent"])),disabled:c.loading},C[3]||(C[3]=[t("i",{class:"fas fa-redo-alt"},null,-1)]),10,ut),n.value=="month-view"?(d(),y("div",ct,[t("button",{class:"btn-2 h-7",onClick:x(u,["prevent"])},"Previous Month"),t("button",{class:"btn-2 h-7",onClick:x(s,["prevent"])},"Next Month")])):b("",!0),n.value=="day-view"?(d(),y("div",mt,[t("button",{class:"btn-2 h-7",onClick:x(p,["prevent"])},"Previous Day"),t("button",{class:"btn-2 h-7",onClick:x(v,["prevent"])},"Next Day")])):b("",!0)]))}},yt={key:0,class:"fa fa-exclamation-circle",title:"Pending"},pt={key:1,class:"fa fa-exclamation-square",title:"Wording"},ft={key:2,class:"fa fa-check-square",title:"Completed"},Y={__name:"TodoStatusIcon",props:{todo:{type:Object,required:!0}},setup(c){const f=c,l=M(()=>{switch(f.todo.status){case"PENDING":return"text-red-400";case"WORKING":return"text-yellow-400";case"COMPLETED":return"text-green-400"}return""});return(e,n)=>(d(),y("span",{class:A(l.value)},[c.todo.status=="PENDING"?(d(),y("i",yt)):b("",!0),c.todo.status=="WORKING"?(d(),y("i",pt)):b("",!0),c.todo.status=="COMPLETED"?(d(),y("i",ft)):b("",!0)],2))}},bt=["onClick","title"],gt={class:"line-clamp-1"},kt={key:0,class:"text-purple-600 text-center"},tt={__name:"TodosInDate",props:{date:{type:String,required:!0},maxItems:{type:[Number,String],default:3}},emits:["clickTodo"],setup(c,{emit:f}){const l=c,e=f,{getTodosByDate:n}=V(),a=M(()=>{let i=[],r=!1,s=[];if(typeof n=="function"){const u=n(l.date);if(s=Array.isArray(u)?u:[],l.maxItems==="all")return{all:s,items:s,moreItemsCount:0};i=s.slice(0,l.maxItems),r=s.length-i.length}return{all:s,items:i,moreItemsCount:r}});return(i,r)=>(d(),y("div",null,[a.value.items.length===0?B(i.$slots,"noTodos",{key:0},()=>[r[0]||(r[0]=t("div",{class:"text-gray-400 text-center"},"No todos",-1))]):(d(),y(W,{key:1},[(d(!0),y(W,null,lt(a.value.items,s=>B(i.$slots,"todoItem",{key:s.id,todo:s,moreItemsCount:a.value.moreItemsCount},()=>[t("div",{class:A(["px-1 mb-2 text-sm rounded cursor-pointer flex items-center gap-2",{"bg-sky-50 text-sky-900 hover:bg-sky-700 hover:text-white border border-sky-300":s.status!=="COMPLETED","bg-green-500 text-white":s.status==="COMPLETED"}]),onClick:x(u=>e("clickTodo",s),["prevent","stop"]),title:s.title},[_(Y,{todo:s,class:A(["text-sm",[s.status=="COMPLETED"?"!text-white":""]])},null,8,["todo","class"]),t("div",gt,w(s.title),1)],10,bt)])),128)),a.value.moreItemsCount>0?(d(),y("div",kt," + "+w(a.value.moreItemsCount)+" more todo"+w(a.value.moreItemsCount>1?"s":""),1)):b("",!0)],64))]))}},ht={class:"relative"},xt=["onClick","onKeypress"],wt=["onClick"],Ct={__name:"TodosInCalenderView",props:{month:{type:String,required:!0,validator:c=>/^\d{4}-(0[1-9]|1[0-2])$/.test(c)}},emits:["dateClick","clickTodo","clickDateCell"],setup(c,{emit:f}){const l=f;function e(a,i){a.isTrusted&&a.ctrlKey&&a.which==10&&l("clickDateCell",i)}function n(a){const[i,r,s]=String(a).split("-").map(Number),u=new Date(i,r-1,s);return at(u)}return(a,i)=>(d(),y("div",ht,[c.month?(d(),T(st,{key:0,month:c.month,class:"border-t border-blue-200/50 relative"},{date:D(({day:r,yearMonthDate:s,isCurrentMonth:u})=>[t("div",{tabindex:"0",class:A(["border p-4 cursor-pointer group/date relative",{"bg-rose-50  border-rose-300 focus:bg-rose-50 focus:outline-rose-400":n(s),"hover:bg-sky-50  hover:border-blue-300 focus:bg-sky-50 focus:outline-blue-400":!n(s)}]),onClick:o=>l("clickDateCell",s),onKeypress:x(o=>e(o,s),["prevent"])},[t("button",{tabindex:"1",class:A([{"text-gray-300":!u,"text-sky-400":u},"text-center mb-2 font-semibold hover:bg-sky-200 w-full rounded"]),onClick:x(o=>l("dateClick",s),["prevent","stop"])},w(r),11,wt),t("div",null,[_(tt,{date:s,onClickTodo:i[0]||(i[0]=o=>l("clickTodo",o))},{noTodos:D(()=>i[1]||(i[1]=[t("span",null,null,-1)])),_:2},1032,["date"])]),i[2]||(i[2]=t("div",{class:"absolute bottom-0 left-0 right-0 text-center hidden group-hover/date:block text-sm text-red-800/40"}," Click to add todo ",-1))],42,xt)]),_:1},8,["month"])):b("",!0)]))}},Dt={class:"relative bg-white p-4"},$t={class:"max-w-6xl mx-auto border rounded my-10"},_t={class:"mb-4 text-gray-700 border-b py-2 px-4 flex items-center"},Tt={class:"text-lg font-semibold"},St={class:"ml-auto"},Et=["onClick"],Mt={class:"line-clamp-2 ml-2"},It={key:0,class:"line-clamp-2 ml-2 text-gray-500"},Nt={class:"ml-auto flex items-center gap-2"},Ot=["onClick"],Lt=["onClick"],Pt=["onClick"],Vt={__name:"TodosInDailyView",props:{date:{type:String,required:!0}},emits:["clickTodo","clickAdd","clickEdit","clickDelete","clickChangeStatus","backClick","update"],setup(c,{emit:f}){const l=c,e=f,n=M(()=>new Date(l.date)),a=V();async function i(s){confirm(`Are your sure want to delete todo
'${s==null?void 0:s.title}'`)&&(await a.deleteTodo(s.id),e("update"))}async function r(s){confirm(`Are your sure want to compete todo
'${s==null?void 0:s.title}'`)&&(await a.updateTodoStatus(s.id,"COMPLETED"),e("update"))}return(s,u)=>(d(),y("div",Dt,[t("div",$t,[t("div",_t,[t("button",{class:"fa fa-arrow-left btn-icon mr-2",onClick:u[0]||(u[0]=x(o=>e("backClick"),["prevent"]))}),t("div",Tt,w(g(K)(n.value,{weekDay:"long"})),1),t("div",St,[t("button",{class:"btn btn-icon",onClick:u[1]||(u[1]=x(o=>e("clickAdd",l.date),["prevent"]))},u[2]||(u[2]=[t("i",{class:"fas fa-plus"},null,-1)]))])]),_(tt,{date:c.date,"max-items":10,class:"my-8 w-full px-4"},{todoItem:D(({todo:o})=>[t("div",{class:"border rounded px-4 py-3 my-4 hover:bg-sky-50 cursor-pointer flex items-center",onClick:x(v=>e("clickTodo",o),["prevent"])},[_(Y,{todo:o},null,8,["todo"]),t("div",Mt,w(o.title),1),o.todo_type&&o.todo_type_id?(d(),y("div",It,w(o.todo_type)+" id "+w(o.todo_type_id),1)):b("",!0),t("div",Nt,[o.status!=="COMPLETED"?(d(),y("button",{key:0,class:"btn-icon bg-green-400 text-white hover:bg-green-600 hover:text-white",onClick:x(()=>r(o),["prevent","stop"])},u[3]||(u[3]=[t("i",{class:"fas fa-check"},null,-1)]),8,Ot)):b("",!0),t("button",{class:"btn-icon bg-sky-400 text-white hover:bg-sky-600 hover:text-white",onClick:x(v=>e("clickEdit",o),["prevent","stop"])},u[4]||(u[4]=[t("i",{class:"fas fa-pen"},null,-1)]),8,Lt),t("button",{class:"btn-icon bg-red-400 text-white hover:bg-red-600 hover:text-white",onClick:x(()=>i(o),["prevent","stop"])},u[5]||(u[5]=[t("i",{class:"fas fa-trash-alt"},null,-1)]),8,Pt)])],8,Et)]),noTodos:D(()=>u[6]||(u[6]=[t("div",{class:"flex min-h-[38vh] items-center justify-center text-gray-400 text-center rounded-md"}," No Todos ",-1)])),_:1},8,["date"])])]))}},At={class:"bg-white border-t px-4 py-4 sticky bottom-0 rounded-b-md"},Ft={key:0,class:"mb-4 text-red-500 font-medium"},jt={key:1,class:"mb-4 text-blue-500 font-medium"},Ut={class:"flex justify-between items-center gap-4"},Bt=["disabled"],et={__name:"FormHandler",props:{isSubmitting:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},error:{type:String,default:""}},emits:["submit","clickCancel"],setup(c,{emit:f}){const l=f;return(e,n)=>(d(),y("form",{onSubmit:n[1]||(n[1]=x(a=>l("submit"),["prevent"]))},[B(e.$slots,"default"),t("div",At,[c.error?(d(),y("div",Ft,w(c.error),1)):b("",!0),c.isSubmitting?(d(),y("div",jt,"Saving changes...")):b("",!0),B(e.$slots,"footer",{},()=>[t("div",Ut,[t("button",{type:"button",onClick:n[0]||(n[0]=a=>l("clickCancel")),class:"btn-3"},"Cancel"),t("button",{disabled:c.isSubmitting||c.isLoading,type:"submit",class:"btn-2"},w(c.isSubmitting?"Saving...":"Save"),9,Bt)])])])],32))}},qt={class:""},Rt={class:"p-4 min-h-[10vh] max-h-[50vh] overflow-y-auto"},Gt={class:"mb-2"},Kt={class:"mb-4"},zt={class:"mb-4"},Wt={__name:"TodoAddForm",props:{date:{type:String,default:Z(new Date)}},emits:["update","cancelClick"],setup(c,{emit:f}){const l=c,e=E(),n=E(),a=V(),i=f,r=E({title:"",date:l.date||"",task_id:""});async function s(){e.value="submitting",await a.createTodo(r.value),console.log(r.value),e.value="",i("update")}const u=M(()=>new Date(l.date));return G(async()=>{var o;await X(),(o=n.value)==null||o.focus()}),(o,v)=>(d(),y("div",qt,[g(a).loading?(d(),T(R,{key:0,class:"absolute inset-0 bg-opacity-80 text-center py-4 text-gray-500 z-10 flex items-center justify-center"},{default:D(()=>v[3]||(v[3]=[S(" Loading... ")])),_:1,__:[3]})):b("",!0),_(et,{onSubmit:s,onClickCancel:v[2]||(v[2]=p=>i("cancelClick")),isSubmitting:e.value=="submitting",error:g(a).error,class:"rounded-md relative"},{default:D(()=>[v[7]||(v[7]=t("div",{class:"border-b py-2 px-4"},[t("h2",{class:"text-xl font-semibold"},"Add Todo")],-1)),t("div",Rt,[t("div",Gt,[v[4]||(v[4]=t("span",{class:"font-semibold"}," Date ",-1)),t("span",null,w(g(K)(u.value,{weekDay:"long"})),1)]),t("div",Kt,[v[5]||(v[5]=t("label",{class:"block text-gray-700 font-medium mb-2"},"Title",-1)),U(t("input",{ref_key:"titleRef",ref:n,"onUpdate:modelValue":v[0]||(v[0]=p=>r.value.title=p),required:"",placeholder:"Enter todo title",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[q,r.value.title]])]),t("div",zt,[v[6]||(v[6]=t("label",{class:"block text-gray-700 font-medium mb-2"},"Task ID (optional)",-1)),U(t("input",{"onUpdate:modelValue":v[1]||(v[1]=p=>r.value.task_id=p),placeholder:"Enter a task id",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[q,r.value.task_id]])])])]),_:1,__:[7]},8,["isSubmitting","error"])]))}},Yt={class:"relative"},Ht={class:"p-4 min-h-[10vh] max-h-[50vh] overflow-y-auto"},Jt={class:"mb-2"},Qt={class:"mb-4"},Xt={class:"mb-4"},Zt={__name:"TodoEditForm",props:{date:{type:String,default:Z(new Date)},todo:{type:Object,default:()=>{}}},emits:["update","cancelClick"],setup(c,{emit:f}){const l=c,e=E(),n=E(),a=V(),i=f,r=E({title:"",todo_type:"task",todo_type_id:""});async function s(){var v,p,k;await a.fetchTodo((v=l.todo)==null?void 0:v.id),r.value.title=(p=a.todo)==null?void 0:p.title,r.value.todo_type_id=(k=a.todo)==null?void 0:k.todoable_id}async function u(){e.value="submitting";try{await a.updateTodo(l.todo.id,r.value),i("update")}finally{e.value=""}}const o=M(()=>new Date(l.date));return G(async()=>{var v;await s(),await X(),(v=n.value)==null||v.focus()}),(v,p)=>(d(),y("div",Yt,[g(a).loading?(d(),T(R,{key:0,class:"absolute inset-0 bg-opacity-80 text-center py-4 text-gray-500 z-10 flex items-center justify-center"},{default:D(()=>p[3]||(p[3]=[S(" Loading... ")])),_:1,__:[3]})):b("",!0),_(et,{onSubmit:u,onClickCancel:p[2]||(p[2]=k=>i("cancelClick")),isSubmitting:e.value=="submitting",isLoading:g(a).loading,error:g(a).error},{default:D(()=>[p[7]||(p[7]=t("div",{class:"border-b py-2 px-4"},[t("h2",{class:"text-xl font-semibold"},"Edit Todo")],-1)),t("div",Ht,[t("div",Jt,[p[4]||(p[4]=t("span",{class:"font-semibold"}," Date ",-1)),t("span",null,w(g(K)(o.value,{weekDay:"long"})),1)]),t("div",Qt,[p[5]||(p[5]=t("label",{class:"block text-gray-700 font-medium mb-2"},"Title",-1)),U(t("input",{ref_key:"titleRef",ref:n,"onUpdate:modelValue":p[0]||(p[0]=k=>r.value.title=k),required:"",placeholder:"Enter todo title",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[q,r.value.title]])]),t("div",Xt,[p[6]||(p[6]=t("label",{class:"block text-gray-700 font-medium mb-2"},"Task ID (optional)",-1)),U(t("input",{"onUpdate:modelValue":p[1]||(p[1]=k=>r.value.todo_type_id=k),placeholder:"Enter a task id",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[q,r.value.todo_type_id]])])])]),_:1,__:[7]},8,["isSubmitting","isLoading","error"])]))}},te={class:"relative"},ee={class:"min-h-[10vh] max-h-[50vh] overflow-y-auto p-4"},oe={class:"mb-4"},ne={class:"mb-4"},le={class:"flex items-center gap-4"},ae={key:0,class:"flex items-center gap-2"},se={class:"flex justify-between items-center gap-4 py-4 px-4 border-t"},ie={class:"ml-auto flex items-center gap-2"},de={__name:"TodoShow",props:{todo:{type:Object,default:()=>{}}},emits:["cancelClick","clickEdit","update"],setup(c,{emit:f}){const l=c,e=V(),n=f;async function a(){var u;await e.fetchTodo((u=l.todo)==null?void 0:u.id)}const i=M(()=>{var u,o;return(u=e.todo)!=null&&u.date?new Date((o=e.todo)==null?void 0:o.date):null});async function r(u){var o;confirm(`Are your sure want to delete todo
'${(o=e.todo)==null?void 0:o.title}'`)&&(await e.deleteTodo(u.id),n("update"))}async function s(u,o){var v;confirm(`Are your sure want to compete todo
'${(v=e.todo)==null?void 0:v.title}'`)&&(await e.updateTodoStatus(u.id,o),n("update"))}return G(async()=>{await a()}),(u,o)=>{var v,p,k,I,N,m;return d(),y("div",te,[g(e).loading?(d(),T(R,{key:0,class:"absolute inset-0 bg-opacity-80 text-center py-4 text-gray-500 z-10 flex items-center justify-center"},{default:D(()=>o[5]||(o[5]=[S(" Loading... ")])),_:1,__:[5]})):b("",!0),t("div",null,[o[11]||(o[11]=t("div",{class:"border-b py-2 px-4"},[t("h2",{class:"text-xl font-semibold"},"Show Todo")],-1)),t("div",ee,[t("div",oe,[o[6]||(o[6]=t("div",{class:"font-semibold text-xs text-gray-500"},"Date",-1)),t("span",null,w(g(K)(i.value,{weekDay:"long"})),1)]),t("div",ne,[o[7]||(o[7]=t("div",{class:"text-xs text-gray-500"},"Todo",-1)),S(" "+w((v=g(e).todo)==null?void 0:v.title),1)]),t("div",null,[o[10]||(o[10]=t("div",{class:"text-xs text-gray-500"},"Status",-1)),t("div",le,[t("div",null,[(p=g(e))!=null&&p.todo?(d(),T(Y,{key:0,todo:(k=g(e))==null?void 0:k.todo},null,8,["todo"])):b("",!0),S(" "+w((I=g(e).todo)==null?void 0:I.status),1)]),g(e).loading?b("",!0):(d(),y("div",ae,[((N=g(e).todo)==null?void 0:N.status)==="PENDING"?(d(),y("button",{key:0,class:"btn-2 from-yellow-700 to-yellow-500 text-white hover:bg-green-600 hover:text-white",onClick:o[0]||(o[0]=x(()=>s(g(e).todo,"WORKING"),["prevent","stop"]))},o[8]||(o[8]=[t("i",{class:"fas fa-exclamation-circle"},null,-1),S(" Change to Working ")]))):b("",!0),((m=g(e).todo)==null?void 0:m.status)==="WORKING"?(d(),y("button",{key:1,class:"btn-2 from-green-700 to-green-300 text-white hover:bg-green-600 hover:text-white",onClick:o[1]||(o[1]=x(()=>s(g(e).todo,"COMPLETED"),["prevent","stop"]))},o[9]||(o[9]=[t("i",{class:"fas fa-check"},null,-1),S(" Make Complete ")]))):b("",!0)]))])])])]),t("div",se,[t("button",{type:"button",onClick:o[2]||(o[2]=C=>n("cancelClick")),class:"btn-3"},"Cancel"),t("div",ie,[t("button",{class:"btn-2 bg-sky-400 text-white hover:bg-sky-600 hover:text-white",onClick:o[3]||(o[3]=x(C=>n("clickEdit",g(e).todo),["prevent","stop"]))},o[12]||(o[12]=[t("i",{class:"fas fa-pen"},null,-1),S(" Edit ")])),t("button",{class:"btn-2-red",onClick:o[4]||(o[4]=x(()=>r(g(e).todo),["prevent","stop"]))},o[13]||(o[13]=[t("i",{class:"fas fa-trash-alt"},null,-1),S(" Delete ")]))])])])}}},re={__name:"TodoCreateEditShow",props:{todoModal:{type:Object,required:!0}},emits:["cancelClick","update","clickEdit","clickDelete","clickChangeStatus"],setup(c,{emit:f}){const l=f;function e(){l("update")}return(n,a)=>(d(),y(W,null,[c.todoModal.action=="add"?(d(),T(z,{key:0},{default:D(()=>{var i;return[_(Wt,{onCancelClick:a[0]||(a[0]=r=>l("cancelClick")),onUpdate:e,date:(i=c.todoModal)==null?void 0:i.date},null,8,["date"])]}),_:1})):b("",!0),c.todoModal.action=="edit"?(d(),T(z,{key:1},{default:D(()=>{var i;return[_(Zt,{onCancelClick:a[1]||(a[1]=r=>l("cancelClick")),onUpdate:e,todo:(i=c.todoModal)==null?void 0:i.todo},null,8,["todo"])]}),_:1})):b("",!0),c.todoModal.action=="show"?(d(),T(z,{key:2},{default:D(()=>{var i;return[_(de,{onCancelClick:a[2]||(a[2]=r=>l("cancelClick")),onUpdate:e,onClickEdit:a[3]||(a[3]=r=>l("clickEdit",r)),onClickDelete:a[4]||(a[4]=r=>l("clickDelete",r)),onClickChangeStatus:a[5]||(a[5]=(r,s)=>l("clickChangeStatus",r,s)),todo:(i=c.todoModal)==null?void 0:i.todo},null,8,["todo"])]}),_:1})):b("",!0)],64))}},ue={class:"border bg-white relative"},ce={__name:"TodoSection",props:{year:{type:Number,default:()=>new Date().getFullYear()},month:{type:Number,default:()=>new Date().getMonth()+1},day:{type:Number,default:()=>new Date().getDate()},week:{type:Number,default:()=>new Date().getDay()},viewType:{type:String,default:"month-view"}},setup(c){const f=new Date,l=c,e=E({type:"month-view",month:f.getMonth()+1,day:f.getDate(),year:f.getFullYear(),week:f.getDay()}),n=E({action:null}),a=V();async function i(){await a.fetchTodos()}function r(){n.value={...n.value,action:""}}async function s(h,$){await a.updateTodoStatus(h,$)}async function u(h){await a.deleteTodo(h)}function o(){e.value={...e.value,type:"month-view"}}function v(h){e.value={...e.value,...h}}function p(h){const[$,O,P]=h.split("-").map(Number);e.value={...e.value,type:"day-view",year:$,month:O,day:P}}function k(h){n.value={...n.value,action:"show",todo:h}}function I(h){n.value={...n.value,action:"edit",todo:h}}function N(h){n.value={...n.value,action:"add",date:h}}function m(){n.value={action:null,todo:null}}const C=M(()=>{var P,F,j,H,J,Q;const h=(F=(P=e.value)==null?void 0:P.year)==null?void 0:F.toString(),$=(H=(j=e.value)==null?void 0:j.month)==null?void 0:H.toString().padStart(2,"0"),O=(Q=(J=e.value)==null?void 0:J.day)==null?void 0:Q.toString().padStart(2,"0");return`${h}-${$}-${O}`}),L=M(()=>{var O,P,F,j;const h=(P=(O=e.value)==null?void 0:O.year)==null?void 0:P.toString(),$=(j=(F=e.value)==null?void 0:F.month)==null?void 0:j.toString().padStart(2,"0");return`${h}-${$}`});return G(async()=>{await a.fetchTodos(),console.log({props:l})}),(h,$)=>(d(),y("div",null,[t("div",ue,[g(a).loading?(d(),T(R,{key:0,class:"absolute inset-0 bg-opacity-80 text-center py-4 text-gray-500 z-10 flex items-center justify-center"},{default:D(()=>$[0]||($[0]=[S(" Loading... ")])),_:1,__:[0]})):b("",!0),_(vt,{selected:e.value,class:"border-b shadow z-20",onChange:v,onReloadClick:i},null,8,["selected"]),e.value.type=="month-view"?(d(),T(Ct,{key:1,month:L.value,class:"bg-white",onDateClick:p,onClickTodo:k,onClickDateCell:N},null,8,["month"])):b("",!0),e.value.type=="day-view"?(d(),T(Vt,{key:2,date:C.value,onClickTodo:k,onClickEdit:I,onClickAdd:N,onClickDelete:u,onClickChangeStatus:s,onBackClick:o,onUpdate:r},null,8,["date"])):b("",!0)]),_(re,{todoModal:n.value,onCancelClick:m,onUpdate:r,onClickEdit:I},null,8,["todoModal"])]))}},me={class:"container mx-auto p-6"},ve={key:0,class:"text-center py-4 text-red-500"},xe={__name:"TodoList",setup(c){const f=new Date,l=E({type:"month-view",month:f.getMonth()+1,day:f.getDate(),year:f.getFullYear(),week:f.getDay()}),e=V();return(n,a)=>(d(),y("div",me,[a[0]||(a[0]=t("h2",{class:"text-2xl font-bold mb-6"},"Todo List",-1)),g(e).error&&!g(e).loading?(d(),y("div",ve,w(g(e).error),1)):b("",!0),_(ce,{year:l.value.year,month:l.value.month,day:l.value.day,viewType:l.value.type},null,8,["year","month","day","viewType"])]))}};export{xe as default};
