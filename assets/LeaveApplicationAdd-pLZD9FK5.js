import{u as _,r as m,b as g,K as U,c as o,a as t,l as T,m as B,j as E,w as q,d as i,A as b,F as w,x,h as L,v as u,t as f,e as C,n as D,o as s,k as F,g as H}from"./index-b79Cgc5B.js";import{u as M}from"./leave-application-BrIqMT45.js";import{u as N}from"./leave-type-BJkEJiqO.js";import{u as R}from"./user-CyEGdzVF.js";import{L as j}from"./LoaderView-CX4Lsii9.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const I={class:"my-container max-w-3xl space-y-4"},K={class:"flex items-center justify-between gap-2"},W=["value"],z=["value"],G={key:0,class:"text-red-500 text-sm"},$={__name:"LeaveApplicationAdd",setup(J){const c=H(),S=M(),k=N(),y=R(),n=_(),l=m({leave_type_id:"",start_date:"",end_date:"",reason:"",works_in_hand:"",handover_user_id:""}),p=m(!1),d=m(null),A=async()=>{var r;p.value=!0,d.value=null;try{const e={user_id:(r=n==null?void 0:n.user)==null?void 0:r.id,...l.value},v=await S.storeLeaveApplication(e);c.push({name:"LeaveApplicationShow",params:{id:v.id}})}catch(e){d.value=e.message||"Failed to submit leave application"}finally{p.value=!1}};g(()=>{U(()=>{var e;const r=(e=n==null?void 0:n.user)==null?void 0:e.company_id;r&&k.fetchLeaveTypes(r)}),y.fetchUsers()});const V=()=>{c.go(-1)};return(r,e)=>{const v=D("RouterLink");return s(),o("div",I,[t("div",K,[t("button",{class:"btn-3",onClick:V},e[6]||(e[6]=[t("i",{class:"far fa-arrow-left"},null,-1),t("span",{class:"hidden md:flex"},"Back",-1)])),e[8]||(e[8]=t("h1",{class:"title-md md:title-lg flex-wrap text-center"},"Leave Application Form",-1)),t("div",null,[T(v,{to:"/my-applications",class:"btn-2"},{default:B(()=>e[7]||(e[7]=[F("Home")])),_:1})])]),p.value?(s(),E(j,{key:0})):(s(),o("form",{key:1,onSubmit:q(A,["prevent"]),class:"space-y-4 card-bg p-4 md:p-8"},[t("div",null,[e[10]||(e[10]=t("label",{for:"leave-type",class:"block text-sm font-medium"},"Leave Type",-1)),i(t("select",{id:"leave-type","onUpdate:modelValue":e[0]||(e[0]=a=>l.value.leave_type_id=a),class:"input-1 w-full",required:""},[e[9]||(e[9]=t("option",{value:""},"Select Leave Type",-1)),(s(!0),o(w,null,x(L(k).leaveTypes,a=>(s(),o("option",{key:a.id,value:a.id},f(a==null?void 0:a.name),9,W))),128))],512),[[b,l.value.leave_type_id]])]),t("div",null,[e[11]||(e[11]=t("label",{for:"start-date",class:"block text-sm font-medium"},"Start Date",-1)),i(t("input",{type:"date",id:"start-date","onUpdate:modelValue":e[1]||(e[1]=a=>l.value.start_date=a),class:"input-1 w-full",required:""},null,512),[[u,l.value.start_date]])]),t("div",null,[e[12]||(e[12]=t("label",{for:"end-date",class:"block text-sm font-medium"},"End Date",-1)),i(t("input",{type:"date",id:"end-date","onUpdate:modelValue":e[2]||(e[2]=a=>l.value.end_date=a),class:"input-1 w-full",required:""},null,512),[[u,l.value.end_date]])]),t("div",null,[e[13]||(e[13]=t("label",{for:"reason",class:"block text-sm font-medium"},"Reason",-1)),i(t("textarea",{id:"reason","onUpdate:modelValue":e[3]||(e[3]=a=>l.value.reason=a),class:"input-1 w-full",placeholder:"Enter your reason for leave"},null,512),[[u,l.value.reason]])]),t("div",null,[e[14]||(e[14]=t("label",{for:"works-in-hand",class:"block text-sm font-medium"},"Works in Hand",-1)),i(t("textarea",{id:"works-in-hand","onUpdate:modelValue":e[4]||(e[4]=a=>l.value.works_in_hand=a),class:"input-1 w-full",placeholder:"Enter details of works in hand"},null,512),[[u,l.value.works_in_hand]])]),t("div",null,[e[16]||(e[16]=t("label",{for:"handover-user",class:"block text-sm font-medium"},"Handover User",-1)),i(t("select",{id:"handover-user","onUpdate:modelValue":e[5]||(e[5]=a=>l.value.handover_user_id=a),class:"input-1 w-full",required:""},[e[15]||(e[15]=t("option",{value:""},"Select Handover User",-1)),(s(!0),o(w,null,x(L(y).users,a=>(s(),o("option",{key:a.id,value:a.id},f(a==null?void 0:a.name),9,z))),128))],512),[[b,l.value.handover_user_id]])]),d.value?(s(),o("div",G,f(d.value),1)):C("",!0),e[17]||(e[17]=t("div",{class:"flex justify-end"},[t("button",{type:"submit",class:"btn-2"},"Submit")],-1))],32))])}}};export{$ as default};
