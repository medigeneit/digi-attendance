import{u as C,b as D,r as g,e as M,A as L,c as r,o,a as t,m as V,l as E,h as f,g as F,v as T,F as S,x as h,t as i,n as d}from"./index-CNbbc4fw.js";import{_ as j}from"./EmployeeFilter-ZTnkX1Bq.js";import{L as R}from"./LoaderView-B-sQaKe1.js";import{u as P}from"./attendance-BWpnZD6j.js";import{u as $}from"./user-B7zLDkHm.js";import"./MultiselectDropdown-BSRrC9Zp.js";import"./company-DD8eTCRX.js";import"./department-B23uL5Uz.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const z={class:"px-4 space-y-4"},G={class:"flex flex-wrap gap-4"},H={key:1,class:"space-y-4"},I={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},J={class:"text-sm font-semibold text-blue-700 border-b pb-1 mb-2"},K={class:"flex items-center gap-1 text-gray-700"},O={class:"text-right text-gray-500 bg-blue-100 px-2 py-0.5 rounded text-[10px]"},Q={key:2,class:"flex justify-between gap-4 text-sm"},W={class:"card-bg p-4 gap-1"},X={class:"grid md:grid-cols-2"},Y={key:3},ue={__name:"EmployeeAttendanceLog",setup(Z){const y=C(),n=D(),x=$(),c=P(),a=g(null),u=g(n.query.date||c.selectedMonth),s=g({company_id:n.query.company_id||"",department_id:n.query.department_id||"all",type:n.query.type||"all",employee_id:n.query.employee_id||"",category:""}),_=async l=>{l?(await x.fetchUser(l),a.value=x.user):a.value=null},v=async()=>{s.value.employee_id&&u.value&&await c.getMonthlyAttendanceLog(s.value.employee_id,u.value)};M(async()=>{s.value.employee_id&&(await _(s.value.employee_id),await v())}),L(()=>s.value.employee_id,async(l,e)=>{l&&l!==e&&(await _(l),await v(),y.replace({query:{...n.query,employee_id:l}}))}),L(u,l=>{y.replace({query:{...n.query,date:l}}),v()});const N=()=>y.go(-1),U=l=>new Date(l).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),B=()=>{y.replace({query:{...n.query,company_id:s.value.company_id,department_id:s.value.department_id,type:s.value.type,employee_id:s.value.employee_id}})};return(l,e)=>{var b,w,k;return o(),r("div",z,[t("div",{class:"flex items-center justify-between gap-2"},[t("button",{class:"btn-3",onClick:N},e[2]||(e[2]=[t("i",{class:"far fa-arrow-left"},null,-1),t("span",{class:"hidden md:flex"},"Back",-1)])),e[3]||(e[3]=t("h1",{class:"title-md md:title-lg flex-wrap text-center"},"Attendance Log",-1)),e[4]||(e[4]=t("div",null,null,-1))]),t("div",G,[E(j,{modelValue:s.value,"onUpdate:modelValue":e[0]||(e[0]=p=>s.value=p),"initial-value":f(n).query,onFilterChange:B},null,8,["modelValue","initial-value"]),t("div",null,[F(t("input",{id:"monthSelect",type:"month","onUpdate:modelValue":e[1]||(e[1]=p=>u.value=p),onChange:v,class:"input-1"},null,544),[[T,u.value]])])]),f(c).isLoading?(o(),V(R,{key:0})):(o(),r("div",H,[t("div",I,[(o(!0),r(S,null,h(f(c).attendanceLogs,(p,q)=>(o(),r("div",{key:q,class:"bg-white shadow rounded-lg p-4"},[t("h3",J,i(q),1),(o(!0),r(S,null,h(p,(m,ee)=>{var A;return o(),r("div",{key:m.id,class:"flex items-center justify-between text-xs mb-1"},[t("div",K,[e[5]||(e[5]=t("i",{class:"far fa-clock text-blue-500"},null,-1)),d(" "+i(U(m.timestamp)),1)]),t("div",O,i(((A=m==null?void 0:m.device)==null?void 0:A.name)||"Unknown"),1)])}),128))]))),128))])])),a.value?(o(),r("div",Q,[t("div",W,[e[12]||(e[12]=t("h2",{class:"title-md"},"Selected Employee Info",-1)),e[13]||(e[13]=t("hr",null,null,-1)),t("div",X,[t("p",null,[e[6]||(e[6]=t("strong",null,"Name:",-1)),d(" "+i(a.value.name),1)]),t("p",null,[e[7]||(e[7]=t("strong",null,"Designation:",-1)),d(" "+i(((b=a.value.designation)==null?void 0:b.title)||"N/A"),1)]),t("p",null,[e[8]||(e[8]=t("strong",null,"Department:",-1)),d(" "+i(((w=a.value.department)==null?void 0:w.name)||"N/A"),1)]),t("p",null,[e[9]||(e[9]=t("strong",null,"Company:",-1)),d(" "+i(((k=a.value.company)==null?void 0:k.name)||"N/A"),1)]),t("p",null,[e[10]||(e[10]=t("strong",null,"Phone:",-1)),d(" "+i(a.value.phone),1)]),t("p",null,[e[11]||(e[11]=t("strong",null,"Email:",-1)),d(" "+i(a.value.email||"N/A"),1)])])])])):(o(),r("div",Y,e[14]||(e[14]=[t("p",{class:"text-gray-400 text-center text-2xl italic"},"Select an employee, please.",-1)])))])}}};export{ue as default};
