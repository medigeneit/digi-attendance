import{r as p,h as f,c as i,o as r,a as e,k as c,n as a,t as x,l as g,v as _,z as w,j,F as k,e as C}from"./index-Bg7LljES.js";import{L as P}from"./LoaderView-I09Iyrqt.js";import{u as T}from"./useTodoProjectStore-C8RGf0jD.js";const E={class:"p-6 max-w-4xl mx-auto"},V={key:0,class:"mb-4 text-red-600 bg-red-100 p-3 rounded"},B={class:"mb-6 flex gap-2 items-center bg-white p-4 rounded shadow-sm border"},D=["disabled"],L={class:"relative min-h-[100px]"},M={class:"bg-white rounded shadow overflow-hidden border"},N={class:"w-full text-left"},z={class:"divide-y"},A={class:"px-6 py-3"},F={class:"px-6 py-3 text-right space-x-2"},K=["onClick"],S=["onClick"],U={key:0},H={__name:"TodoProjectsView",setup($){const t=T(),d=p(!1),u=p(null),o=p("");f(()=>{t.fetchProjects()});const h=l=>{d.value=!0,u.value=l.id,o.value=l.title},b=()=>{d.value=!1,u.value=null,o.value="",t.error=null},v=async()=>{if(o.value.trim())try{d.value?await t.updateProject(u.value,{title:o.value}):await t.createProject({title:o.value}),b()}catch{}},m=async l=>{confirm("Are you sure you want to delete this project?")&&await t.deleteProject(l)};return(l,s)=>(r(),i("div",E,[s[3]||(s[3]=e("h1",{class:"text-2xl font-bold mb-4"},"Manage Todo Projects",-1)),a(t).error?(r(),i("div",V,x(a(t).error),1)):c("",!0),e("div",B,[g(e("input",{"onUpdate:modelValue":s[0]||(s[0]=n=>o.value=n),class:"border px-4 py-2 rounded flex-grow focus:outline-blue-500",placeholder:"Enter Project Title",onKeyup:w(v,["enter"])},null,544),[[_,o.value]]),e("button",{onClick:v,class:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-50",disabled:a(t).loading||!o.value.trim()},x(d.value?"Update":"Create"),9,D),d.value?(r(),i("button",{key:0,onClick:b,class:"bg-gray-300 px-4 py-2 rounded hover:bg-gray-400"}," Cancel ")):c("",!0)]),e("div",L,[a(t).loading?(r(),j(P,{key:0,class:"absolute inset-0 bg-white/50 flex items-center justify-center z-10"})):c("",!0),e("div",M,[e("table",N,[s[2]||(s[2]=e("thead",null,[e("tr",{class:"border-b bg-gray-50 text-gray-700 uppercase text-xs font-semibold"},[e("th",{class:"px-6 py-3"},"Title"),e("th",{class:"px-6 py-3 text-right"},"Actions")])],-1)),e("tbody",z,[(r(!0),i(k,null,C(a(t).projects,n=>(r(),i("tr",{key:n.id,class:"hover:bg-gray-50 transition-colors"},[e("td",A,x(n.title),1),e("td",F,[e("button",{onClick:y=>h(n),class:"text-blue-600 hover:text-blue-800 font-medium text-sm"}," Edit ",8,K),e("button",{onClick:y=>m(n.id),class:"text-red-600 hover:text-red-800 font-medium text-sm"}," Delete ",8,S)])]))),128)),a(t).projects.length===0&&!a(t).loading?(r(),i("tr",U,s[1]||(s[1]=[e("td",{colspan:"2",class:"px-6 py-8 text-center text-gray-500"}," No projects found. Create one above! ",-1)]))):c("",!0)])])])])]))}};export{H as default};
