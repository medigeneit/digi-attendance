import{u as R,r as W,x as z,b as G,z as J,c as u,a as t,t as r,d as K,v as Q,k as a,h as n,j as v,F as X,q as Y,g as Z,o,p as y,l as tt,m as h,e as _,n as et}from"./index-D74-o6rI.js";import{L as st}from"./LoaderView-BYkW3_94.js";import{u as rt}from"./attendance-DhbGAgqm.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const at={class:"px-4 space-y-4"},nt={class:"md:flex items-center justify-between gap-2"},ot={class:"title-lg md:title-lg flex-wrap text-center"},lt={class:"flex gap-4"},it={class:"grid md:grid-cols-2 gap-4 text-sm"},dt={class:"card-bg p-4 gap-1"},ut={class:"grid md:grid-cols-2"},pt={class:"card-bg p-4 gap-1"},_t={class:"grid md:grid-cols-2"},mt={key:1,class:"space-y-4"},yt={class:"overflow-x-auto card-bg"},ct={class:"min-w-full table-auto border-collapse border border-gray-300 bg-white"},vt={class:"text-center text-xs"},ht={class:"border px-1 py-0.5"},bt={class:"border px-1 py-0.5"},xt=["title"],ft=["title"],kt=["title"],wt={key:0},At={class:"border px-1 py-0.5"},Dt={class:"border px-1 py-0.5"},St={class:"border px-1 py-0.5"},gt={key:0},Lt={class:"border px-1 py-0.5"},Mt={key:0},Nt={__name:"MyAttendance",setup(Ct){const b=Z(),i=R(),l=rt(),p=W(l.selectedMonth),$=z(()=>{if(!p.value)return"";const[d,s]=p.value.split("-");return new Date(d,s-1).toLocaleDateString("en-US",{month:"long",year:"numeric"})}),c=async()=>{var d;(d=i.user)!=null&&d.id&&p.value&&await l.getMonthlyAttendanceByShift(i.user.id,p.value)};G(async()=>{i.isAuthenticated?(await i.fetchUser(),c()):b.push("/login")}),J(p,async d=>{l.selectedMonth=d,await c()});const F=()=>b.go(-1),I=d=>d.split(" ").map(s=>s[0]).join("").toUpperCase();return(d,s)=>{var x,f,k,w,A,D,S,g,L,M,C,T,B,E,P,N,V,j,U,q,H,O;const m=et("router-link");return o(),u("div",at,[t("div",nt,[t("button",{class:"btn-3",onClick:F},s[1]||(s[1]=[t("i",{class:"far fa-arrow-left"},null,-1),t("span",{class:"hidden md:flex"},"Back",-1)])),t("h1",ot," My Attendance of "+r($.value),1),t("div",lt,[t("div",null,[K(t("input",{id:"monthSelect",type:"month","onUpdate:modelValue":s[0]||(s[0]=e=>p.value=e),onChange:c,class:"input-1"},null,544),[[Q,p.value]])])])]),t("div",it,[t("div",dt,[s[8]||(s[8]=t("h2",{class:"title-md"},"User Info",-1)),s[9]||(s[9]=t("hr",null,null,-1)),t("div",ut,[t("p",null,[s[2]||(s[2]=t("strong",null,"Name:",-1)),a(" "+r((x=n(i).user)==null?void 0:x.name),1)]),t("p",null,[s[3]||(s[3]=t("strong",null,"Designation:",-1)),a(" "+r((k=(f=n(i).user)==null?void 0:f.designation)==null?void 0:k.title),1)]),t("p",null,[s[4]||(s[4]=t("strong",null,"Department:",-1)),a(" "+r((A=(w=n(i).user)==null?void 0:w.department)==null?void 0:A.name),1)]),t("p",null,[s[5]||(s[5]=t("strong",null,"Company:",-1)),a(" "+r((S=(D=n(i).user)==null?void 0:D.company)==null?void 0:S.name),1)]),t("p",null,[s[6]||(s[6]=t("strong",null,"Phone:",-1)),a(" "+r((g=n(i).user)==null?void 0:g.phone),1)]),t("p",null,[s[7]||(s[7]=t("strong",null,"Email:",-1)),a(" "+r((L=n(i).user)==null?void 0:L.email),1)])])]),t("div",pt,[s[16]||(s[16]=t("h2",{class:"title-md"},"Attendance Summary",-1)),s[17]||(s[17]=t("hr",null,null,-1)),t("div",_t,[t("p",null,[s[10]||(s[10]=t("strong",null,"Total Working Days:",-1)),a(" "+r((C=(M=n(l))==null?void 0:M.summary)==null?void 0:C.total_working_days),1)]),t("p",null,[s[11]||(s[11]=t("strong",null,"Present Days:",-1)),a(" "+r((B=(T=n(l))==null?void 0:T.summary)==null?void 0:B.total_present_days),1)]),t("p",null,[s[12]||(s[12]=t("strong",null,"Absent Days:",-1)),a(" "+r((P=(E=n(l))==null?void 0:E.summary)==null?void 0:P.total_absent_days),1)]),t("p",null,[s[13]||(s[13]=t("strong",null,"Late Days:",-1)),a(" "+r((V=(N=n(l))==null?void 0:N.summary)==null?void 0:V.total_late_days),1)]),t("p",null,[s[14]||(s[14]=t("strong",null,"Total Working Hours:",-1)),a(" "+r((U=(j=n(l))==null?void 0:j.summary)==null?void 0:U.total_working_hours),1)]),t("p",null,[s[15]||(s[15]=t("strong",null,"Total Overtime Hours:",-1)),a(" "+r((H=(q=n(l))==null?void 0:q.summary)==null?void 0:H.total_overtime_hours),1)])])])]),n(l).isLoading?(o(),v(st,{key:0})):(o(),u("div",mt,[t("div",yt,[t("table",ct,[s[21]||(s[21]=t("thead",null,[t("tr",{class:"bg-gray-200 text-xs"},[t("th",{class:"border p-1"},"Date"),t("th",{class:"border p-1"},"Day"),t("th",{class:"border p-1"},"Shift"),t("th",{class:"border p-1"},"Entry Time"),t("th",{class:"border p-1"},"Exit Time"),t("th",{class:"border p-1"},"Working Hours"),t("th",{class:"border p-1"},"OT Hours"),t("th",{class:"border p-1"},"Late Entry"),t("th",{class:"border p-1"},"Early Leave"),t("th",{class:"border p-1"},"Status")])],-1)),t("tbody",vt,[(o(!0),u(X,null,Y((O=n(l))==null?void 0:O.monthlyLogs,e=>(o(),u("tr",{key:e==null?void 0:e.date,class:"hover:border-b-2 hover:border-gray-200 hover:bg-blue-200"},[t("td",ht,r(e.date),1),t("td",bt,r(e.weekday),1),t("td",{class:"border px-1 py-0.5",title:`${e.shift_start_time} to ${e.shift_end_time}`},r(e.shift_name),9,xt),t("td",{class:"border px-1 py-0.5",title:`Device: ${e.entry_device}`},[t("span",{class:y({"text-yellow-600":e.is_overtime_applicable})},r(e.is_overtime_applicable&&e.entry_time?I(e.status):"")+" "+r(e.entry_time),3)],8,ft),t("td",{class:"border px-1 py-0.5",title:`Device: ${e.exit_device}`},[a(r(e.exit_time)+" ",1),!e.exit_time&&new Date(e.date)<new Date&&e.status==="Present"?(o(),u("div",wt,[tt(m,{to:{name:"ManualAttendanceAdd",query:{type:"Forget Punch",date:new Date(e.date).toISOString().split("T")[0],entry_time:e.entry_time,exit_time:e.exit_time}},class:"btn-link text-red-600"},{default:h(()=>s[18]||(s[18]=[a(" (Check Out Apply) ")])),_:2},1032,["to"])])):_("",!0)],8,kt),t("td",At,r(e.working_hours),1),t("td",Dt,r(e.overtime_hours),1),t("td",St,[e.late_duration?(o(),u("div",gt,[a(r(e.late_duration)+" ",1),e.first_short_leave?(o(),u("span",{key:0,class:y({"text-green-500":e.first_short_leave==="Approved","text-yellow-500":e.first_short_leave==="Pending","text-red-500":e.first_short_leave==="Rejected"})}," ("+r(e.first_short_leave)+") ",3)):_("",!0),e.late_duration&&!e.first_short_leave?(o(),v(m,{key:1,to:{name:"ShortLeaveAdd",query:{type:"Delay",start_time:e.shift_start_time,end_time:e.entry_time}},class:"btn-link text-red-600"},{default:h(()=>s[19]||(s[19]=[a(" (Apply) ")])),_:2},1032,["to"])):_("",!0)])):_("",!0)]),t("td",Lt,[e.early_leave_duration?(o(),u("div",Mt,[a(r(e.early_leave_duration)+" ",1),e.last_short_leave?(o(),u("span",{key:0,class:y(["px-1",{"text-green-500":e.last_short_leave==="Approved","text-yellow-500":e.last_short_leave==="Pending","text-red-500":e.last_short_leave==="Rejected"}])}," ("+r(e.last_short_leave)+") ",3)):_("",!0),e.early_leave_duration&&!e.last_short_leave?(o(),v(m,{key:1,to:{name:"ShortLeaveAdd",query:{type:"Early",start_time:e.exit_time,end_time:e.shift_end_time}},class:"btn-link text-red-600"},{default:h(()=>s[20]||(s[20]=[a(" (Apply) ")])),_:2},1032,["to"])):_("",!0)])):_("",!0)]),t("td",{class:y(["border px-1 py-0.5 font-semibold",{"text-red-600":e.status==="Absent","text-green-600":e.status==="Present","text-yellow-600":e.is_overtime_applicable}])},r(e.status),3)]))),128))])])])]))])}}};export{Nt as default};
