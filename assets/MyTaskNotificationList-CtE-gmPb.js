import{L as R}from"./LoaderView-DwbWKEKX.js";import{_ as i}from"./ApproveAndReject-Bd7xQZYd.js";import{f as H,W as f,D as V,r as j,h as B,q as C,x as A,p as D,c as r,o as s,a as p,j as y,k as m,b as g,t as h,n as d,F as v,e as S,d as F,m as b}from"./index-Cf_1rtii.js";const I={class:"my-container space-y-4 px-4 py-4 relative"},$={class:"md:text-2xl font-semibold capitalize text-gray-700"},z={key:0,class:"ml-auto text-xs bg-red-500 text-white rounded-full px-2 py-0.5 font-semibold"},E={key:1,class:"space-y-4"},U={class:"flex gap-2 md:gap-3 items-center"},W={class:"shrink grow font-semibold text-sm md:text-base"},Z=["innerHTML"],G={key:0,class:"ml-auto shrink-0 grow-0 flex gap-2 md:gap-3 items-center"},J=["innerHTML"],K={key:0,class:"flex flex-wrap gap-y-1 gap-x-3 items-center text-xs md:text-sm lg:text-base"},O={key:0},P={class:"flex gap-3 items-center"},Q={class:"flex items-center gap-8"},X={key:0,class:"flex flex-wrap flex-col md:flex-row gap-x-1 text-xs md:text-sm text-left"},Y={key:0,class:"hidden md:inline font-bold"},ee=["innerHTML"],se={key:2,class:"h-[80vh] flex items-center justify-center border rounded-md bg-white/50 text-gray-400"},pe={__name:"MyTaskNotificationList",setup(te){const l=H(),x=f(),{notifications:w,notification_count:T}=V(x),u=j(!1);B(async()=>{l.params.type&&(u.value=!0,await x.fetchTaskNotification(l.params.type),u.value=!1)}),C(()=>l.params.type,async(t,a)=>{t&&t!==a&&(u.value=!0,await x.fetchTaskNotification(t),u.value=!1)});const n=t=>{var a,o,_,c;return l.params.type=="pending-requirements"||((a=t.meta)==null?void 0:a.commentable_type)==="requirement"?{name:"RequirementShow",params:{id:((o=t.meta)==null?void 0:o.commentable_type)==="requirement"?(_=t.meta)==null?void 0:_.commentable_id:t.application_id},query:{comment_id:(c=t.meta)==null?void 0:c.comment_id}}:{name:"RequirementTaskShow",params:{id:t.application_id}}},q=A(()=>l.params.type?l.params.type.replace(/[_-]/g," ").replace(/([A-Z])/g," $1").replace(/\s+/g," ").trim().split(" ").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" "):"");return(t,a)=>{var _,c,k;const o=D("RouterLink");return s(),r("div",I,[p("h2",$,[g(h(q.value||"Notifications")+" ",1),(_=d(T))!=null&&_[d(l).params.type]?(s(),r("span",z,h(((c=d(T))==null?void 0:c[d(l).params.type])||0),1)):m("",!0)]),u.value||d(x).loading?(s(),y(R,{key:0,class:"absolute inset-0 flex items-center justify-center bg-opacity-80 !shadow-none min-h-[80vh]"})):m("",!0),!u.value&&((k=d(w))==null?void 0:k.length)>0?(s(),r("div",E,[(s(!0),r(v,null,S(d(w),e=>{var L;return s(),r("div",{key:e.application_id,class:"bg-white p-3 md:p-4 rounded-xl shadow border grid gap-2"},[p("div",U,[p("div",W,[p("div",{class:"flex items-center text-green-600 text-xs md:text-sm lg:text-base",innerHTML:e==null?void 0:e.title},null,8,Z),p("div",null,h(e==null?void 0:e.user_name),1)]),n(e)?(s(),r("div",G,[F(o,{to:n(e),class:"btn-1 px-3"},{default:b(()=>a[0]||(a[0]=[p("i",{class:"far fa-eye"},null,-1)])),_:2,__:[0]},1032,["to"])])):m("",!0)]),p("div",{class:"text-red-600 text-xs md:text-sm lg:text-base line-clamp-1 pr-12",innerHTML:e==null?void 0:e.description},null,8,J),e!=null&&e.type?(s(),r("div",K,[e!=null&&e.type?(s(),r("div",O,[a[1]||(a[1]=p("span",{class:"text-gray-400"},"Type:",-1)),g(" "+h(e==null?void 0:e.type),1)])):m("",!0)])):m("",!0),p("div",P,[p("div",Q,[(L=e==null?void 0:e.messages)!=null&&L.length?(s(),r("p",X,[(s(!0),r(v,null,S(e.messages,(M,N)=>(s(),r(v,{key:N},[N?(s(),r("span",Y,"|")):m("",!0),p("span",{innerHTML:M,class:"text-black"},null,8,ee)],64))),128))])):m("",!0)]),d(l).params.type=="pending-requirements"?(s(),y(i,{key:0,class:"ml-auto",notificationType:d(l).params.type,applicationId:e==null?void 0:e.application_id,onSuccess:t.onSuccess,variant:2},null,8,["notificationType","applicationId","onSuccess"])):m("",!0),d(l).params.type=="pending-comment-mentions"&&n(e)?(s(),y(o,{key:1,to:n(e),class:"btn-1 px-3 ml-auto"},{default:b(()=>a[2]||(a[2]=[g(" Re-play ")])),_:2,__:[2]},1032,["to"])):m("",!0),d(l).params.type=="pending-tasks"&&n(e)?(s(),y(o,{key:2,to:n(e),class:"btn-1 px-3 ml-auto"},{default:b(()=>a[3]||(a[3]=[g(" Show ")])),_:2,__:[3]},1032,["to"])):m("",!0)])])}),128))])):u.value?m("",!0):(s(),r("div",se," No notifications. "))])}}};export{pe as default};
