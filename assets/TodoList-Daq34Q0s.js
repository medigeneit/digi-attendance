import{_ as O}from"./CalenderView-C6Ks_dkh.js";import{u as $,t as F}from"./useTodoStore-cXaBe82L.js";import{x as V,c as s,o as n,g as v,F as L,y as P,a as o,t as w,f as N,i as q,q as I,n as S,r as C,A,h as z,B as H,w as g,e as R,k,j as Y}from"./index-v422lgUz.js";import{a as _,g as D}from"./datetime-C4Yr_jSk.js";const j={class:"line-clamp-1"},E={key:0,class:"text-purple-600 text-center"},U={__name:"TodosInDate",props:{date:{type:String,required:!0},maxItems:{type:[Number],default:3}},setup(u){const r=u,{getTodosByDate:i}=$(),a=V(()=>{let e=[],m=!1,c=[];if(typeof i=="function"){const b=i(r.date);c=Array.isArray(b)?b:[],e=c.slice(0,r.maxItems),m=c.length-e.length}return{all:c,items:e,moreItemsCount:m}});return(e,m)=>(n(),s("div",null,[(n(!0),s(L,null,P(a.value.items,c=>(n(),s("div",{key:c.id,class:"border bg-sky-600/70 rounded px-2 mb-2 text-sm text-sky-100 hover:bg-sky-600 hover:text-white cursor-pointer"},[o("div",j,w(c.title),1)]))),128)),a.value.moreItemsCount>0?(n(),s("div",E," + "+w(a.value.moreItemsCount)+" more todos ",1)):v("",!0)]))}},G={class:"relative"},J={class:"border p-2"},K={__name:"TodoCalenderView",props:{month:{type:String,required:!0,validator:u=>/^\d{4}-(0[1-9]|1[0-2])$/.test(u)}},setup(u){return(r,i)=>(n(),s("div",G,[u.month?(n(),N(O,{key:0,month:u.month,class:"border-t border-blue-200/50 relative"},{date:q(({day:a,yearMonthDate:e,isCurrentMonth:m})=>[o("div",J,[o("div",{class:I([{"text-gray-300":!m,"text-sky-400":m},"text-center mb-2 font-semibold"])},w(a),3),o("div",null,[S(U,{date:e},null,8,["date"])])])]),_:1},8,["month"])):v("",!0)]))}},Q={class:"px-4 py-2 flex items-center bg-gray-50 group"},W=["value"],X=["value"],Z=["disabled"],ee={key:4,class:"ml-4 md:ml-auto flex items-center gap-2"},te={key:5,class:"ml-4 md:ml-auto flex items-center gap-2"},ae={__name:"TodoHeading",props:{selectedType:{type:String,default:"month-view"},selectedValue:{type:String,default:""},loading:{type:Boolean,default:!1}},emits:["reloadClick","selectViewType","change"],setup(u,{emit:r}){const i=u,a=r,e=C();function m(){a("selectViewType",e.value)}A(()=>i.selectedType,t=>e.value=t,{immediate:!0});function c(){e.value=="month-view"&&p(_(new Date))}function b(){var t;if(e.value=="month-view"){const[l,x]=(t=d==null?void 0:d.value)==null?void 0:t.split("-").map(Number),f=new Date(l,x,1);f.setMonth(f.getMonth()),p(_(f))}}function y(){var t;if(e.value=="month-view"){const[l,x]=(t=d==null?void 0:d.value)==null?void 0:t.split("-").map(Number),f=new Date(l,x,1);f.setMonth(f.getMonth()-2),p(_(f))}}function h(){e.value=="day-view"&&p(D(new Date))}function T(){if(e.value=="day-view"){const t=new Date(d==null?void 0:d.value);t.setDate(t.getDate()+1),p(D(t))}}function B(){if(e.value=="day-view"){const t=new Date(d.value);t.setDate(t.getDate()-1),p(D(t))}}const d=V(()=>i.selectedValue);function p(t){a("change",{value:t,selectedType:e.value})}const M=t=>{p(t.target.value),a("selectViewType",e.value)};return(t,l)=>(n(),s("div",Q,[l[4]||(l[4]=o("h2",{class:"leading-none font-semibold text-lg"},"Monthly Task",-1)),z(o("select",{class:"mx-4 px-2 h-7 border rounded","onUpdate:modelValue":l[0]||(l[0]=x=>e.value=x),onChange:m},l[2]||(l[2]=[o("option",{value:"day-view"},"Day",-1),o("option",{value:"month-view"},"Month",-1)]),544),[[H,e.value]]),e.value=="month-view"?(n(),s("input",{key:0,type:"month",value:d.value,onInput:M,class:"border px-2 rounded"},null,40,W)):v("",!0),e.value=="day-view"?(n(),s("input",{key:1,type:"date",value:d.value,onInput:M,class:"border px-2 rounded"},null,40,X)):v("",!0),e.value=="month-view"?(n(),s("button",{key:2,class:"btn-3 mx-4 h-7",onClick:g(c,["prevent"])}," Current Month ")):v("",!0),e.value=="day-view"?(n(),s("button",{key:3,class:"btn-3 mx-4 h-7",onClick:g(h,["prevent"])}," Today ")):v("",!0),o("button",{class:I(["btn-3 px-2 py-2 mx-4 size-7 disabled:text-gray-300 disabled:border-gray-300",{"animate-spin text-gray-300 border-gray-300 !bg-opacity-0":u.loading}]),onClick:l[1]||(l[1]=g(x=>a("reloadClick"),["prevent"])),disabled:u.loading},l[3]||(l[3]=[o("i",{class:"fas fa-redo-alt"},null,-1)]),10,Z),e.value=="month-view"?(n(),s("div",ee,[o("button",{class:"btn-2 h-7",onClick:g(y,["prevent"])},"Previous Month"),o("button",{class:"btn-2 h-7",onClick:g(b,["prevent"])},"Next Month")])):v("",!0),e.value=="day-view"?(n(),s("div",te,[o("button",{class:"btn-2 h-7",onClick:g(B,["prevent"])},"Previous Day"),o("button",{class:"btn-2 h-7",onClick:g(T,["prevent"])},"Next Day")])):v("",!0)]))}},ne={class:"container mx-auto p-6"},oe={key:0,class:"text-center py-4 text-gray-500"},se={key:1,class:"text-center py-4 text-red-500"},le={class:"border"},ie={key:1,class:"border min-h-40 text-center bg-white"},ve={__name:"TodoList",setup(u){const r=C(""),i=C(""),a=C("month-view"),e=$();R(async()=>{await e.fetchTodos(),i.value=D(new Date),r.value=_(new Date)});function m(){}function c(){if(a.value=="month-view")return r.value;if(a.value=="day-view")return i.value}function b({value:y,selectedType:h}){a.value=h,h=="month-view"&&(console.log(`${y}-01`),r.value=y,i.value=`${y}-01`),h=="day-view"&&(i.value=y,r.value=_(new Date(i.value)))}return(y,h)=>(n(),s("div",ne,[h[1]||(h[1]=o("h2",{class:"text-2xl font-bold mb-6"},"Todo List",-1)),k(e).loading?(n(),s("div",oe,"Loading...")):k(e).error?(n(),s("div",se,w(k(e).error),1)):v("",!0),o("div",le,[S(ae,{"selected-type":a.value,"selected-value":c(),onChange:b,onSelectViewType:h[0]||(h[0]=T=>a.value=T),onReloadClick:m},null,8,["selected-type","selected-value"]),Y(" "+w(a.value)+" - "+w(r.value)+" - "+w(i.value)+" ",1),a.value=="month-view"?(n(),N(K,{key:0,month:r.value,todos:k(F),class:"bg-white"},null,8,["month","todos"])):v("",!0),a.value=="day-view"?(n(),s("div",ie," Day View will be shown here ")):v("",!0)])]))}};export{ve as default};
