import{a3 as j,p as i,c as o,o as s,f as b,g as m,a as l,t as r,j as N}from"./index-w2t8SdXS.js";import{_ as $}from"./AcceptAndRejectHandler-DySI_7Fd.js";const A={class:"flex flex-col justify-center items-center text-sm md:text-base text-center"},S={key:0,class:"text-center"},B={class:"text-center"},O={class:"text-xs text-gray-400 text-center"},R={key:1,class:"text-center"},w={class:"font-bold"},I={key:0,class:"text-green-600"},U={key:1,class:"pl-2 text-yellow-700"},V={__name:"ApprovalItem",props:{application:Object,type:String,item:String,onAction:{type:Function,default:()=>{}}},setup(t){const p=j(),v=i(()=>t.item?t.item.replace(/[_-]/g," ").replace(/([A-Z])/g," $1").replace(/\s+/g," ").trim().split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "):""),u=i(()=>{let e="";switch(t.type){case"overtime_applications":e="overtime_approval";break;case"leave_applications":e="leave_approval";break;default:e="other_approval";break}return e}),f=i(()=>{var e;return(e=t.application)==null?void 0:e[`${t.item}_user`]}),d=i(()=>{var e;return(e=t.application)==null?void 0:e[`${t.item}_user_id`]}),y=i(()=>{var e;return((e=t.application)==null?void 0:e[`${t.item}_note`])||""}),x=i(()=>{var e,a,n;return((n=(a=(e=t.application)==null?void 0:e.user)==null?void 0:a[u.value])==null?void 0:n[`${t.item}_user`])||{}}),h=i(()=>{var e;return(e=p.approvalPermissions)==null?void 0:e[`allow_${t.item}`]}),k=i(()=>!t.application.status||!d.value?!1:t.item==="handover"?t.application.status!=="Rejected"||t.application.rejected_by_user_id!==t.application.handover_user_id:!0),g=i(()=>{var e,a,n,c;return t.item==="handover"&&((e=t.application)==null?void 0:e.handover_user_id)||((c=(n=(a=t.application)==null?void 0:a.user)==null?void 0:n[u.value])==null?void 0:c[`${t.item}_user_id`])});return(e,a)=>{var n,c;return s(),o("div",A,[d.value?(s(),o("div",S,[l("p",B,r(((n=f.value)==null?void 0:n.name)||""),1),l("p",O,r(y.value),1)])):(s(),o("p",R,r(((c=x.value)==null?void 0:c.name)||"N/A"),1)),h.value?(s(),b($,{key:2,notificationType:t.type,applicationId:t.application.id,onSuccess:t.onAction},null,8,["notificationType","applicationId","onSuccess"])):m("",!0),a[1]||(a[1]=l("hr",{class:"w-36 md:w-44 border-black my-1 mx-auto"},null,-1)),l("div",w,[N(r(v.value)+" ",1),k.value?(s(),o("span",I,"(âœ”)")):g.value?(s(),o("span",U,a[0]||(a[0]=[l("i",{class:"fad fa-spinner"},null,-1)]))):m("",!0)])])}}};export{V as _};
