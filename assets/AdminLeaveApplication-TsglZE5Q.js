import{g as re,D as P,r as x,x as W,aa as ee,q as z,h as se,c as u,o as n,a as e,i as O,w as ae,j as A,k as g,v as D,P as ne,t as v,F as M,e as F,m as T,ad as H,b as de,d as B,u as ue,f as ie,p as ce,l as te,Y as pe}from"./index-DyrtSyKM.js";import{L as le}from"./LoaderView-swLqgaPw.js";import{_ as ye}from"./MultiselectDropdown-DNY2bMSR.js";import{u as me}from"./holiday-NtPll0Np.js";import{u as oe}from"./leave-application-BWSuZHO7.js";import{u as ve}from"./leave-type-DAxsnMj2.js";import{u as G}from"./user-G-8LvG7z.js";import{_ as _e}from"./EmployeeFilter-CUK-OSDl.js";import{S as be}from"./SelectedEmployeeCard-Dsv9rWqR.js";import{u as fe}from"./company-AXw9q0cR.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./department-BiSvpMHc.js";import"./EmployeeDropdownInput-Bp44s-GZ.js";import"./SelectDropdown-CLqFkYI6.js";import"./UserChip-m_kRoHFD.js";const xe={class:"space-y-6 p-4"},he={class:"space-y-4"},ge={class:"grid grid-cols-1 gap-4 md:grid-cols-2"},we={class:"space-y-2"},ke={class:"space-y-2"},$e={class:"flex flex-wrap items-center justify-between gap-3 rounded-xl border border-slate-100 bg-slate-50/60 p-4"},Le={class:"inline-flex items-center gap-2 rounded-full border border-slate-200 bg-white px-4 py-2 shadow-sm"},Se={key:0,class:"rounded-xl border border-blue-100 bg-blue-50/70 px-4 py-3 text-sm font-medium text-blue-700"},Ae={class:"space-y-4 rounded-2xl border border-dashed border-slate-200 p-4"},Ue={class:"flex flex-wrap items-center justify-between gap-3"},De={class:"rounded-full bg-slate-100 px-3 py-1 text-xs font-semibold text-slate-600"},Ce={key:0,class:"rounded-xl border border-slate-100 bg-white/70 p-6 text-center text-sm text-slate-500"},qe={key:1,class:"space-y-3"},Ve={class:"flex flex-wrap items-center justify-between gap-2"},Be={class:"text-base font-semibold text-slate-700"},Te={class:"flex flex-wrap gap-2"},je=["title"],Me=["name","value","onUpdate:modelValue","disabled"],Fe={class:"inline-flex items-center gap-1 rounded-full border border-slate-200 px-3 py-1 text-sm font-medium text-slate-600 transition peer-checked:border-blue-500 peer-checked:bg-blue-50 peer-checked:text-blue-600 peer-disabled:opacity-40"},Re={class:"text-xs text-slate-400"},Ne={class:"cursor-pointer"},Ie=["name","onUpdate:modelValue"],Ye={class:"cursor-pointer"},We=["name","onUpdate:modelValue"],ze={class:"text-xs uppercase tracking-wide text-slate-400"},Ee={class:"space-y-4 rounded-2xl border border-slate-100 bg-slate-50/50 p-4"},He={class:"space-y-2"},Pe={key:0,class:"space-y-4"},Oe={class:"space-y-2"},Ge={class:"space-y-2"},Je={key:0,class:"rounded-xl border border-red-100 bg-red-50 px-4 py-3 text-sm text-red-600"},Qe={__name:"AdminLeaveApplicationAddForm",props:{userInfo:Object},emits:["close","formSuccessClosed"],setup(C,{emit:j}){const r=C,h=j,U=oe();ve();const w=G(),k=re(),L=me(),{userLeaveBalance:q}=P(w),V=x(""),S=x(!0),l=x({last_working_date:"",resumption_date:"",reason:"",works_in_hand:"",handover_user_id:"",leave_days:[]}),a=x([]),i=x(!1),$=x(null),f=W(()=>{var y,s,d;return((s=(y=r==null?void 0:r.userInfo)==null?void 0:y.assign_weekend)==null?void 0:s.weekends)||((d=r==null?void 0:r.userInfo)==null?void 0:d.weekends)}),b=W(()=>{const y=l.value.last_working_date,s=l.value.resumption_date;if(!y||!s)return[];const d=new Date(y),m=new Date(s);if(m<=d)return[];const _=[];let c=new Date(d);for(c.setDate(c.getDate()+1);c<m;){const p=c.getFullYear(),o=(c.getMonth()+1).toString().padStart(2,"0"),I=c.getDate().toString().padStart(2,"0");_.push(`${p}-${o}-${I}`),c.setDate(c.getDate()+1)}return _}),R=W(()=>{if(!l.value.last_working_date||!l.value.resumption_date)return"";const y=new Date(l.value.last_working_date);return new Date(l.value.resumption_date)<=y?"Resumption date must be after Last Working Date.":b.value.length===0?"No leave days between the selected dates.":null});ee(async()=>{var y;b.value.length&&q.value.length&&(await L.fetchHolidays({company_id:(y=k==null?void 0:k.user)==null?void 0:y.company_id,start_date:b.value[0],end_date:b.value[b.value.length-1]}),b.value.forEach(async(s,d)=>{const m=new Date(s).toLocaleString("en-us",{weekday:"long"}).toLowerCase(),_=m.charAt(0).toUpperCase()+m.slice(1);f.value.includes(_)&&(a.value[d]="weekend"),L.holidayDates.includes(s)&&(a.value[d]="holiday")}))}),z(()=>V.value,y=>{l.value.handover_user_id=y==null?void 0:y.id});const E=async()=>{var y;i.value=!0,$.value=null;try{const s=b.value.map((c,p)=>({date:c,leave_type_id:a.value[p]!=="weekend"&&a.value[p]!=="holiday"?a.value[p]:null})).filter(c=>c.leave_type_id!==null),d=b.value.map((c,p)=>({date:c,leave_type_id:a.value[p]||""})).filter(c=>c.leave_type_id!==null),m={user_id:(y=r==null?void 0:r.userInfo)==null?void 0:y.id,last_working_date:l.value.last_working_date,resumption_date:l.value.resumption_date,reason:l.value.reason,works_in_hand:l.value.works_in_hand,handover_user_id:S.value?null:l.value.handover_user_id,leave_days:s,json_data:d,is_direct_approve:S.value};await U.storeAdminLeaveApplication(m)&&h("formSuccessClosed")}catch(s){$.value=s.message||"Failed to submit leave application"}finally{i.value=!1}};se(async()=>{ee(()=>{var s;const y=(s=r==null?void 0:r.userInfo)==null?void 0:s.id;y&&w.fetchUserLeaveBalances(y)}),await w.fetchTypeWiseEmployees({except:"auth"})});const N=()=>{h("close")};return(y,s)=>(n(),u("div",xe,[e("header",{class:"flex flex-wrap items-start justify-between gap-3"},[s[6]||(s[6]=e("div",null,[e("p",{class:"text-xs font-semibold uppercase tracking-widest text-slate-500"},"Admin panel"),e("h1",{class:"title-md md:title-lg"},"Leave Application Form")],-1)),e("button",{type:"button",class:"rounded-full border border-slate-200 px-4 py-2 text-sm font-medium text-slate-600 transition hover:border-slate-400 hover:text-slate-800",onClick:N}," Close ")]),i.value?(n(),O(le,{key:0})):(n(),u("form",{key:1,onSubmit:ae(E,["prevent"]),class:"space-y-6 rounded-2xl border border-slate-100 bg-white/80 p-4 shadow-sm backdrop-blur"},[e("section",he,[e("div",ge,[e("div",we,[s[7]||(s[7]=e("label",{class:"text-sm font-semibold text-slate-600"},"Last Working Date",-1)),g(e("input",{type:"date","onUpdate:modelValue":s[0]||(s[0]=d=>l.value.last_working_date=d),class:"input-1 w-full",required:""},null,512),[[D,l.value.last_working_date]])]),e("div",ke,[s[8]||(s[8]=e("label",{class:"text-sm font-semibold text-slate-600"},"Resumption Date",-1)),g(e("input",{type:"date","onUpdate:modelValue":s[1]||(s[1]=d=>l.value.resumption_date=d),class:"input-1 w-full",required:""},null,512),[[D,l.value.resumption_date]])])]),e("div",$e,[s[10]||(s[10]=e("div",null,[e("p",{class:"text-sm font-semibold text-slate-600"},"Approval preference"),e("p",{class:"text-xs text-slate-500"}," Toggle off to assign a handover owner and capture works in hand. ")],-1)),e("label",Le,[g(e("input",{type:"checkbox","onUpdate:modelValue":s[2]||(s[2]=d=>S.value=d),class:"h-4 w-4 text-blue-600"},null,512),[[ne,S.value]]),s[9]||(s[9]=e("span",{class:"text-sm font-semibold text-slate-700"},"Direct approve",-1))])]),l.value.last_working_date&&l.value.resumption_date&&R.value?(n(),u("div",Se,v(R.value),1)):A("",!0)]),e("section",Ae,[e("div",Ue,[s[11]||(s[11]=e("div",null,[e("p",{class:"text-base font-semibold text-slate-700"},"Day-by-day allocation")],-1)),e("span",De,v(b.value.length)+" day"+v(b.value.length===1?"":"s"),1)]),b.value.length?(n(),u("div",qe,[(n(!0),u(M,null,F(b.value,(d,m)=>(n(),u("div",{key:m,class:"rounded-2xl flex border border-slate-100 bg-white p-2 items-center justify-between shadow-sm transition hover:border-blue-200"},[e("div",Ve,[e("p",Be,v(d),1)]),e("div",Te,[(n(!0),u(M,null,F(T(q),_=>(n(),u("label",{key:_.id,class:"cursor-pointer",title:_.remaining_days===0?"No balance remaining":""},[g(e("input",{type:"radio",name:"leaveType-"+m,value:_.id,"onUpdate:modelValue":c=>a.value[m]=c,class:"peer hidden",disabled:a.value.filter(c=>c===_.id).length>=_.remaining_days},null,8,Me),[[H,a.value[m]]]),e("span",Fe,[de(v(_.name)+" ",1),e("span",Re,"("+v(_.remaining_days)+"d)",1)])],8,je))),128)),e("label",Ne,[g(e("input",{type:"radio",name:"leaveType-"+m,value:"weekend","onUpdate:modelValue":_=>a.value[m]=_,class:"peer hidden"},null,8,Ie),[[H,a.value[m]]]),s[12]||(s[12]=e("span",{class:"inline-flex items-center rounded-full border border-slate-200 px-3 py-1 text-sm font-medium text-slate-600 transition peer-checked:border-amber-500 peer-checked:bg-amber-50 peer-checked:text-amber-600"}," Weekend ",-1))]),e("label",Ye,[g(e("input",{type:"radio",name:"leaveType-"+m,value:"holiday","onUpdate:modelValue":_=>a.value[m]=_,class:"peer hidden"},null,8,We),[[H,a.value[m]]]),s[13]||(s[13]=e("span",{class:"inline-flex items-center rounded-full border border-slate-200 px-3 py-1 text-sm font-medium text-slate-600 transition peer-checked:border-emerald-500 peer-checked:bg-emerald-50 peer-checked:text-emerald-600"}," Holiday ",-1))])]),e("p",ze,v(a.value[m]?"Assigned":"Unassigned"),1)]))),128))])):(n(),u("div",Ce," No days calculated yet. Pick a last working date and a resumption date to configure the breakdown. "))]),e("section",Ee,[e("div",He,[s[14]||(s[14]=e("label",{class:"text-sm font-semibold text-slate-600"},"Reason",-1)),g(e("textarea",{"onUpdate:modelValue":s[3]||(s[3]=d=>l.value.reason=d),class:"input-1 min-h-[80px] w-full",placeholder:"Summarize why the leave is required"},null,512),[[D,l.value.reason]])]),S.value?A("",!0):(n(),u("div",Pe,[e("div",Oe,[s[15]||(s[15]=e("label",{class:"text-sm font-semibold text-slate-600"},"Handover user",-1)),B(ye,{modelValue:V.value,"onUpdate:modelValue":s[4]||(s[4]=d=>V.value=d),options:T(w).users,multiple:!1,label:"label",placeholder:"Select the teammate who will receive the handover",class:"z-50"},null,8,["modelValue","options"])]),e("div",Ge,[s[16]||(s[16]=e("label",{for:"works-in-hand",class:"text-sm font-semibold text-slate-600"},"Works in hand",-1)),g(e("textarea",{id:"works-in-hand","onUpdate:modelValue":s[5]||(s[5]=d=>l.value.works_in_hand=d),class:"input-1 min-h-[100px] w-full",placeholder:"Detail the tasks that will continue while away"},null,512),[[D,l.value.works_in_hand]])])]))]),$.value?(n(),u("div",Je,v($.value),1)):A("",!0),e("div",{class:"flex flex-wrap items-center justify-end gap-3"},[e("button",{type:"button",class:"rounded-full border border-slate-200 px-5 py-2 text-sm font-semibold text-slate-600 transition hover:border-slate-400",onClick:N}," Cancel "),s[17]||(s[17]=e("button",{type:"submit",class:"btn-2 rounded-full px-6 py-2"},"Submit request",-1))])],32))]))}},Ke={key:0,class:"fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center z-50"},Xe={class:"bg-white rounded-lg shadow-lg w-full max-w-3xl"},Ze={class:"px-6 py-4 border-b"},et={class:"text-lg font-bold"},tt={class:"table-auto w-full border"},st={class:"p-2"},at=["onUpdate:modelValue"],lt=["onUpdate:modelValue"],ot={class:"p-2"},rt=["onUpdate:modelValue"],nt={class:"p-2"},dt=["onUpdate:modelValue"],ut={__name:"UserLeaveBalanceModal",props:{show:{type:Boolean,required:!0},user:{type:Object,required:!0}},emits:["close"],setup(C,{emit:j}){const r=C,h=j,U=fe(),w=G(),k=x([]),L=x(!1);z(()=>r.show,async l=>{var a;l&&((a=r.user)!=null&&a.id)&&!L.value&&(await q(),L.value=!0)}),z(()=>{var l;return(l=r.user)==null?void 0:l.id},()=>{L.value=!1,k.value=[]});const q=async()=>{try{const l=await w.fetchUserLeaveTypes(r.user.id);if(l!=null&&l.length)k.value=l;else{const a=await U.fetchCompanyLeaveTypes(r.user.company_id);k.value=a.data.map(i=>({id:i.id,name:i.name,annual_quota:i.annual_quota||0,max_consecutive_days:i.max_consecutive_days||null,type:i.type||"Paid"}))}}catch(l){console.error("Failed to load leave balances or fallback types:",l)}},V=async()=>{try{await w.saveLeaveBalances(r.user.id,k.value),h("close")}catch(l){console.error("Failed to save leave balances:",l)}},S=()=>{h("close")};return(l,a)=>C.show&&C.user?(n(),u("div",Ke,[e("div",Xe,[e("div",Ze,[e("h3",et,"Set Leave Balances for "+v(C.user.name),1)]),e("form",{onSubmit:ae(V,["prevent"]),class:"p-6 space-y-4"},[e("table",tt,[a[0]||(a[0]=e("thead",{class:"bg-gray-100 text-left"},[e("tr",null,[e("th",{class:"p-2"},"Leave Type"),e("th",{class:"p-2"},"Annual Quota"),e("th",{class:"p-2"},"Max Consecutive Days")])],-1)),e("tbody",null,[(n(!0),u(M,null,F(k.value,(i,$)=>(n(),u("tr",{key:$},[e("td",st,[g(e("input",{type:"hidden","onUpdate:modelValue":f=>i.id=f,class:"input-1 w-full"},null,8,at),[[D,i.id]]),g(e("input",{"onUpdate:modelValue":f=>i.name=f,class:"input-1 w-full",disabled:""},null,8,lt),[[D,i.name]])]),e("td",ot,[g(e("input",{"onUpdate:modelValue":f=>i.annual_quota=f,type:"number",min:"0",class:"input-1 w-full"},null,8,rt),[[D,i.annual_quota,void 0,{number:!0}]])]),e("td",nt,[g(e("input",{"onUpdate:modelValue":f=>i.max_consecutive_days=f,type:"number",min:"0",class:"input-1 w-full"},null,8,dt),[[D,i.max_consecutive_days,void 0,{number:!0}]])])]))),128))])]),e("div",{class:"flex justify-end gap-2 pt-4 border-t"},[e("button",{type:"button",onClick:S,class:"px-4 py-2 bg-gray-200 rounded hover:bg-gray-300"}," Cancel "),a[1]||(a[1]=e("button",{type:"submit",class:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700"}," Save ",-1))])],32)])])):A("",!0)}},it={class:"space-y-2 px-4"},ct={class:"flex flex-wrap gap-2 p-3 rounded-2xl border border-white/20 bg-white/60 backdrop-blur-md shadow-sm supports-[backdrop-filter]:bg-white/50 sticky top-14"},pt={key:0,class:"text-center py-4"},yt={key:1,class:"space-y-4"},mt={key:0,class:"bg-sky-100/30 p-4 rounded-lg shadow mb-6 space-y-6"},vt={class:"grid md:grid-cols-2 gap-6"},_t={class:"bg-white border rounded-lg p-4 shadow"},bt={class:"overflow-x-auto"},ft={class:"min-w-full text-sm text-left text-gray-700 border"},xt={class:"px-4 py-1 text-center font-medium"},ht={class:"px-4 py-1 text-center"},gt={class:"px-4 py-1 text-center"},wt={class:"px-4 py-1 text-center"},kt={class:"px-4 py-1 text-center"},$t={class:"overflow-x-auto"},Lt={class:"min-w-full table-auto border-collapse border border-gray-200 bg-white rounded-md text-sm"},St={class:"border border-gray-300 px-2 py-2"},At={class:"border border-gray-300 px-2 py-2 text-center"},Ut={class:"border border-gray-300 px-2 py-2 text-center"},Dt={class:"border border-gray-300 px-2 py-2 text-center"},Ct={class:"border border-gray-300 px-2 py-2"},qt={class:"border border-gray-300 px-2 py-2"},Vt=["innerHTML"],Bt={class:"border border-gray-300 px-2 py-2 text-center"},Tt={class:"border border-gray-300 px-2 py-2"},jt={class:"border border-gray-300 px-2"},Mt={class:"flex justify-center gap-2"},Ft=["onClick"],Rt={key:0},Nt={key:0},It={class:"text-center py-2",colspan:"6"},Yt={key:0,class:"fixed inset-0 z-[1000] bg-black bg-opacity-50 flex items-center justify-center"},Wt={class:"bg-white rounded-lg w-full max-w-4xl max-h-[90vh] overflow-y-auto shadow-lg p-4 relative"},ls={__name:"AdminLeaveApplication",setup(C){const j=ue(),r=ie(),h=oe(),U=G(),{user:w,leave_balances:k,leaveApplications:L,loading:q}=P(h),{userLeaveBalance:V}=P(U),S=x(r.query.year||h.selectedYear),l=x(r.query.search||""),a=x({company_id:r.query.company_id||"",department_id:r.query.department_id||"all",line_type:r.query.line_type||"all",employee_id:r.query.employee_id||""}),i=x(!1),$=x(!1),f=async()=>{const p={selectedYear:S.value,selectedStatus:h.selectedStatus,query:l.value};a.value.employee_id?(p.user_id=a.value.employee_id,q.value=!0,await h.fetchYearlyUserLeaveApplications(p),q.value=!1):L.value=[]};se(async()=>{await f(),r.query.employee_id&&await U.fetchUserLeaveBalances(r.query.employee_id)}),z(()=>r.query.employee_id,async p=>{p&&await U.fetchUserLeaveBalances(p)});const b=W(()=>L.value||[]),R=()=>j.go(-1),E=async()=>{j.replace({query:{...r.query,company_id:a.value.company_id,department_id:a.value.department_id,line_type:a.value.line_type,employee_id:a.value.employee_id}}),await f()},N=()=>{$.value=!0},y=async()=>{i.value=!1,await f()},s=new Date().getFullYear(),d=x([]);for(let p=2023;p<=s;p++)d.value.push(p);const m=async p=>{confirm("Are you sure to delete this application?")&&(await h.deleteLeaveApplication(p),await f())},_=()=>{$.value=!1,U.fetchUserLeaveBalances(r.query.employee_id)},c=p=>p?new Date(p).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):"";return(p,o)=>{var J,Q;const I=ce("RouterLink");return n(),u(M,null,[e("div",it,[e("div",{class:"flex items-center justify-between gap-2"},[e("button",{class:"btn-3",onClick:R},o[7]||(o[7]=[e("i",{class:"far fa-arrow-left"},null,-1),e("span",{class:"hidden md:flex"},"Back",-1)])),o[8]||(o[8]=e("h1",{class:"title-md md:title-lg flex-wrap text-center"},"Annual Leave Applications",-1)),o[9]||(o[9]=e("div",null,null,-1))]),e("div",ct,[B(_e,{company_id:a.value.company_id,"onUpdate:company_id":o[0]||(o[0]=t=>a.value.company_id=t),department_id:a.value.department_id,"onUpdate:department_id":o[1]||(o[1]=t=>a.value.department_id=t),employee_id:a.value.employee_id,"onUpdate:employee_id":o[2]||(o[2]=t=>a.value.employee_id=t),line_type:a.value.line_type,"onUpdate:line_type":o[3]||(o[3]=t=>a.value.line_type=t),"with-type":!0,"initial-value":p.$route.query,onFilterChange:E,class:"w-full"},null,8,["company_id","department_id","employee_id","line_type","initial-value"])]),T(h).loading?(n(),u("div",pt,[B(le)])):(n(),u("div",yt,[(J=a.value)!=null&&J.employee_id?(n(),u("div",mt,[e("div",vt,[B(be,{user:T(w)},null,8,["user"]),e("div",_t,[e("div",{class:"flex justify-between items-start"},[o[10]||(o[10]=e("h3",{class:"text-lg font-semibold text-gray-700 mb-4"},"Leave Balance",-1)),e("button",{onClick:N,type:"button",class:"btn-2"},"Set Leave Balance")]),e("div",bt,[e("table",ft,[o[11]||(o[11]=e("thead",{class:"bg-gray-100 text-xs uppercase"},[e("tr",null,[e("th",{class:"px-4 py-2 text-center"},"Type"),e("th",{class:"px-4 py-2 text-center"},"Total"),e("th",{class:"px-4 py-2 text-center"},"Used"),e("th",{class:"px-4 py-2 text-center"},"Pending"),e("th",{class:"px-4 py-2 text-center"},"Remaining")])],-1)),e("tbody",null,[(n(!0),u(M,null,F(T(V),t=>(n(),u("tr",{key:t.id,class:"border-t hover:bg-gray-50"},[e("td",xt,v(t.name),1),e("td",ht,v(t.annual_quota),1),e("td",gt,v(t.used_days),1),e("td",wt,v(t==null?void 0:t.pending_days),1),e("td",kt,v(t.remaining_days),1)]))),128))])])])])])])):A("",!0),e("div",$t,[e("table",Lt,[o[16]||(o[16]=e("thead",null,[e("tr",{class:"bg-gray-200"},[e("th",{class:"border border-gray-300 px-2 py-1 text-center"},"#"),e("th",{class:"border border-gray-300 px-2 py-1 text-center"},"Created Date"),e("th",{class:"border border-gray-300 px-2 py-1 text-center"},"Last Working Day"),e("th",{class:"border border-gray-300 px-2 py-1 text-center"},"Resumption Date"),e("th",{class:"border border-gray-300 px-2 py-1 text-center"},"Leave Period"),e("th",{class:"border border-gray-300 px-2 py-1 text-center"},"Total Days"),e("th",{class:"border border-gray-300 px-2 py-1 text-center"},"Leave Type"),e("th",{class:"border border-gray-300 px-2 py-1 text-center"},"Status"),e("th",{class:"border border-gray-300 px-2 py-1 text-center"},"Action")])],-1)),e("tbody",null,[(n(!0),u(M,null,F(b.value,(t,K)=>{var X;return n(),u("tr",{key:K,class:"border-b border-gray-200 hover:bg-blue-200"},[e("td",St,v(K+1),1),e("td",At,v(c(t==null?void 0:t.created_at)),1),e("td",Ut,v(c(t==null?void 0:t.last_working_date)),1),e("td",Dt,v(c(t==null?void 0:t.resumption_date)),1),e("td",Ct,v(t==null?void 0:t.leave_period),1),e("td",qt,[e("div",{innerHTML:(t==null?void 0:t.duration)||(t==null?void 0:t.total_leave_days)},null,8,Vt)]),e("td",Bt,v([...new Set((X=t==null?void 0:t.leave_days)==null?void 0:X.map(Y=>{var Z;return(Z=Y==null?void 0:Y.leave_type)==null?void 0:Z.name}))].join(",")),1),e("td",Tt,v((t==null?void 0:t.status)||"N/A"),1),e("td",jt,[e("div",Mt,[B(I,{to:{name:"LeaveApplicationShow",params:{id:t==null?void 0:t.id}},class:"btn-icon",target:"_blank"},{default:te(()=>o[12]||(o[12]=[e("i",{class:"far fa-eye"},null,-1)])),_:2,__:[12]},1032,["to"]),["Approved","Rejected"].includes(t==null?void 0:t.status)?A("",!0):(n(),O(I,{key:0,to:{name:"LeaveApplicationEdit",params:{id:t==null?void 0:t.id}},class:"btn-icon",target:"_blank"},{default:te(()=>o[13]||(o[13]=[e("i",{class:"far fa-edit text-orange-600"},null,-1)])),_:2,__:[13]},1032,["to"])),e("button",{onClick:Y=>m(t==null?void 0:t.id),class:"btn-icon text-red-500"},o[14]||(o[14]=[e("i",{class:"far fa-trash"},null,-1)]),8,Ft)])])])}),128)),b.value.length?A("",!0):(n(),u("tr",Rt,o[15]||(o[15]=[e("td",{colspan:"7",class:"p-1 text-center text-red-500"},"No application found",-1)])))]),e("tfoot",null,[(Q=a.value)!=null&&Q.employee_id?(n(),u("tr",Nt,[e("th",It,[e("button",{onClick:o[4]||(o[4]=t=>i.value=!0),class:"text-white font-semibold px-4 py-2 rounded-full shadow-md bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 transition"}," + Add Application ")])])):A("",!0)])])])]))]),B(ut,{show:$.value,user:T(w),onClose:_},null,8,["show","user"]),(n(),O(pe,{to:"body"},[i.value?(n(),u("div",Yt,[e("div",Wt,[e("button",{class:"absolute top-2 right-2 text-gray-500 hover:text-red-500 text-xl font-bold",onClick:o[5]||(o[5]=t=>i.value=!1)}," Ã— "),B(Qe,{userInfo:T(w),onClose:o[6]||(o[6]=t=>i.value=!1),onFormSuccessClosed:y},null,8,["userInfo"])])])):A("",!0)]))],64)}}};export{ls as default};
