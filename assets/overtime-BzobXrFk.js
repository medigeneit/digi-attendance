import{M as p,r as u,m as h,C as i,a3 as y}from"./index-W_PqaTeh.js";const x=p("overtime",()=>{const n=u([]),c=u(null),s=u(!1),a=u(null),d=u(new Date().toISOString().substring(0,7)),f=h(()=>new Date(d.value).toLocaleString("default",{month:"long",year:"numeric"}));return{overtimes:n,overtime:c,loading:s,error:a,selectedMonth:d,selectedMonthDisplay:f,fetchOvertimes:async(t={})=>{var o,r;s.value=!0,a.value=null;try{const e=await i.get("/overtimes",{params:t});n.value=e==null?void 0:e.data}catch(e){a.value=((r=(o=e.response)==null?void 0:o.data)==null?void 0:r.message)||"Failed to fetch overtimes",console.error("Error fetching overtimes:",e)}finally{s.value=!1}},createOvertime:async(t={})=>{var o,r;s.value=!0,a.value=null;try{const e=await i.post("/user-overtimes",t);return n.value.push(e.data.overtime),e.data.overtime}catch(e){throw a.value=((r=(o=e.response)==null?void 0:o.data)==null?void 0:r.message)||"Failed to create overtime",console.error("Error creating overtime:",e),new Error(a.value)}finally{s.value=!1}},fetchOvertimeById:async t=>{var o,r;s.value=!0,a.value=null;try{const e=await i.get(`/overtimes/${t}`);return c.value=e.data||{},await y().fetchApprovalPermissions("overtime_applications",c.value.id),c.value}catch(e){throw a.value=((r=(o=e.response)==null?void 0:o.data)==null?void 0:r.message)||`Failed to fetch overtime (ID: ${t})`,console.error(`Error fetching overtime with id ${t}:`,e),new Error(a.value)}finally{s.value=!1}},updateApprovalTime:async(t,o)=>{var r,e;s.value=!0,a.value=null;try{const l=await i.patch(`/user-overtimes/${t}/update-approval-time`,{approval_overtime_hours:o}),v=n.value.findIndex(m=>m.id===t);return v!==-1&&(n.value[v]=l.data),l.data.overtime}catch(l){throw a.value=((e=(r=l.response)==null?void 0:r.data)==null?void 0:e.message)||`Failed to update overtime (ID: ${t})`,console.error(`Error updating overtime with id ${t}:`,l),new Error(a.value)}finally{s.value=!1}},updateOvertime:async(t,o)=>{var r,e;s.value=!0,a.value=null;try{const l=await i.put(`/overtimes/${t}`,o),v=n.value.findIndex(m=>m.id===t);return v!==-1&&(n.value[v]=l.data.overtime),l.data.overtime}catch(l){throw a.value=((e=(r=l.response)==null?void 0:r.data)==null?void 0:e.message)||`Failed to update overtime (ID: ${t})`,console.error(`Error updating overtime with id ${t}:`,l),new Error(a.value)}finally{s.value=!1}},deleteOvertime:async t=>{var o,r;s.value=!0,a.value=null;try{await i.delete(`/overtimes/${t}`),n.value=n.value.filter(e=>e.id!==t)}catch(e){throw a.value=((r=(o=e.response)==null?void 0:o.data)==null?void 0:r.message)||`Failed to delete overtime (ID: ${t})`,console.error(`Error deleting overtime with id ${t}:`,e),new Error(a.value)}finally{s.value=!1}},fetchUserOvertimes:async(t={})=>{var o,r;s.value=!0,a.value=null;try{const e=await i.get("/user-overtimes",{params:t});n.value=e.data}catch(e){a.value=((r=(o=e.response)==null?void 0:o.data)==null?void 0:r.message)||"Failed to fetch overtimes",console.error("Error fetching overtimes:",e)}finally{s.value=!1}},fetchUserMonthlyOvertimes:async(t,o)=>{var r,e;s.value=!0,a.value=null;try{const l=await i.get(`/user-monthly-overtimes/${t}/${o}`);n.value=l.data}catch(l){a.value=((e=(r=l.response)==null?void 0:r.data)==null?void 0:e.message)||"Failed to fetch overtimes",console.error("Error fetching overtimes:",l)}finally{s.value=!1}},fetchUserOvertimesByApplicationId:async t=>{var o,r;s.value=!0,a.value=null;try{const e=await i.get(`/${t}/user-overtimes`);n.value=e.data}catch(e){a.value=((r=(o=e.response)==null?void 0:o.data)==null?void 0:r.message)||"Failed to fetch overtimes",console.error("Error fetching overtimes:",e)}finally{s.value=!1}}}});export{x as u};
