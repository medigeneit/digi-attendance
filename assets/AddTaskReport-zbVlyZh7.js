import{r as u,b as g,c as T,a as o,w as M,t as k,h as m,l as x,d,v as i,m as S,n as V,f as D,p as H,o as U,g as B}from"./index-AgG3CYFb.js";import{u as C}from"./useTaskStore-CzW_Oe49.js";import{u as E}from"./useTaskReportStore-lRWaNfWY.js";const N={class:"mt-6"},A={class:"bg-white border p-4 rounded"},L={class:"col-span-full text-red-800 font-semibold"},j={class:"col-span-full"},F={class:"font-semibold"},I={class:"col-span-full"},q={class:"col-span-2"},z={class:"flex space-x-4 col-span-2"},G={class:"flex-1"},J={class:"flex-1"},K={class:"flex justify-between col-span-full"},X={__name:"AddTaskReport",setup(O){const l=u(""),r=u(0),a=u(""),n=u(0),c=E(),_=C(),y=D(),w=B(),p=y.params.id;g(async()=>{});const R=async()=>{const b=r.value*60+n.value,t={title:l.value,report_date:a.value,duration:b,task_id:p};console.log({payload:t});try{const s=await c.createTaskReport(t);console.log("Submitted:",s.data),l.value="",a.value="",r.value=0,n.value=0,w.push({name:"TaskReports",params:{id:p}})}catch(s){console.error("Error submitting report:",s)}};return(b,t)=>{var v,f;const s=H("RouterLink");return U(),T("div",N,[o("div",A,[o("form",{onSubmit:M(R,["prevent"]),class:"grid gap-4 grid-cols-4"},[o("div",L,k((v=m(c))==null?void 0:v.error),1),o("div",j,[t[4]||(t[4]=x(" Add Report on ")),o("span",F,k((f=m(_).task)==null?void 0:f.title),1)]),o("div",I,[t[5]||(t[5]=o("label",{for:"title",class:"block"},"Title",-1)),d(o("input",{id:"title","onUpdate:modelValue":t[0]||(t[0]=e=>l.value=e),type:"text",class:"border rounded p-2 w-full",placeholder:"Enter report title"},null,512),[[i,l.value]])]),o("div",q,[t[6]||(t[6]=o("label",{for:"report_date"},"Report Date",-1)),d(o("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>a.value=e),id:"report_date",type:"date",class:"border rounded p-2 w-full"},null,512),[[i,a.value]])]),o("div",z,[o("div",G,[t[7]||(t[7]=o("label",{for:"durationHour",class:"block"},"Duration (Hours)",-1)),d(o("input",{id:"durationHour","onUpdate:modelValue":t[2]||(t[2]=e=>r.value=e),type:"number",min:"0",class:"border rounded p-2 w-full"},null,512),[[i,r.value,void 0,{number:!0}]])]),o("div",J,[t[8]||(t[8]=o("label",{for:"durationMinute",class:"block"},"Duration (Minutes)",-1)),d(o("input",{id:"durationMinute","onUpdate:modelValue":t[3]||(t[3]=e=>n.value=e),type:"number",min:"0",max:"59",class:"border rounded p-2 w-full"},null,512),[[i,n.value,void 0,{number:!0}]])])]),t[11]||(t[11]=o("hr",{class:"col-span-full mb-2 mt-3 border-dashed"},null,-1)),o("div",K,[t[10]||(t[10]=o("button",{type:"submit",class:"btn-2"},"Submit",-1)),S(s,{type:"submit",class:"btn-3",to:{name:"TaskReports",params:{id:m(p)}}},{default:V(()=>t[9]||(t[9]=[x("Cancel")])),_:1},8,["to"])])],32)])])}}};export{X as default};
