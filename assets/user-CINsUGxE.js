import{D as U,r as i,y as p,E as u}from"./index-HeDGQWjM.js";const C=U("user",()=>{const l=i([]),d=i([]),v=i({}),m=i({}),n=i(null),r=i(!1),y=i(new Date().toISOString().substring(0,10)),f=p(()=>l.value),g=p(()=>v.value),h=p(()=>n.value);return{users:l,handoverUsers:d,user:v,error:n,isLoading:r,allUsers:f,singleUser:g,errorMessage:h,dashboardInfo:m,selectedDate:y,fetchUsers:async()=>{var s,a;try{r.value=!0;const e=await u.get("/users");l.value=e.data,n.value=null}catch(e){n.value=((a=(s=e.response)==null?void 0:s.data)==null?void 0:a.message)||"Something went wrong"}finally{r.value=!1}},fetchUser:async s=>{var a,e;try{r.value=!0;const o=(await u.get(`/users/${s}`)).data;return o&&(v.value=o),n.value=null,o}catch(t){n.value=((e=(a=t.response)==null?void 0:a.data)==null?void 0:e.message)||"Something went wrong"}finally{r.value=!1}},createUser:async s=>{var a,e;try{r.value=!0;const t=await u.post("/users",s);l.value.push(t.data.user),n.value=null}catch(t){n.value=((e=(a=t.response)==null?void 0:a.data)==null?void 0:e.message)||"Something went wrong"}finally{r.value=!1}},updateUser:async(s,a)=>{var e,t;try{r.value=!0;const o=await u.put(`/users/${s}`,a),c=l.value.findIndex(w=>w.id===s);return c!==-1&&(l.value[c]=o.data.user),n.value=null,o.data.user}catch(o){n.value=((t=(e=o.response)==null?void 0:e.data)==null?void 0:t.message)||"Something went wrong"}finally{r.value=!1}},deleteUser:async s=>{var a,e;try{r.value=!0,await u.delete(`/users/${s}`),l.value=l.value.filter(t=>t.id!==s),n.value=null}catch(t){n.value=((e=(a=t.response)==null?void 0:a.data)==null?void 0:e.message)||"Something went wrong"}finally{r.value=!1}},fetchUserDashboardData:async()=>{var s,a;try{r.value=!0;const t=(await u.get("/dashboard")).data;return t&&(m.value=t),n.value=null,t}catch(e){n.value=((a=(s=e.response)==null?void 0:s.data)==null?void 0:a.message)||"Something went wrong"}finally{r.value=!1}},fetchTypeWiseEmployees:async(s={})=>{var a,e;try{r.value=!0;const t=await u.get("/type-wise-employees",{params:s});l.value=t.data,n.value=null}catch(t){n.value=((e=(a=t.response)==null?void 0:a.data)==null?void 0:e.message)||"Something went wrong"}finally{r.value=!1}},fetchDepartmentWiseEmployees:async()=>{var s,a;try{r.value=!0;const e=await u.get("/department-wise-employees");l.value=e.data,n.value=null}catch(e){n.value=((a=(s=e.response)==null?void 0:s.data)==null?void 0:a.message)||"Something went wrong"}finally{r.value=!1}},fetchHandoverDepartmentWiseEmployees:async()=>{var s,a;try{r.value=!0;const e=await u.get("/department-handover-wise-employees");d.value=e.data,n.value=null}catch(e){n.value=((a=(s=e.response)==null?void 0:s.data)==null?void 0:a.message)||"Something went wrong"}finally{r.value=!1}},fetchUsersExcelExport:async s=>{var a,e;try{r.value=!0;const t=await u.get("/users",{params:{flag:"excel",companyName:s.data.companyName},responseType:"blob"}),o=window.URL.createObjectURL(new Blob([t.data])),c=document.createElement("a");c.href=o,c.setAttribute("download","users.xlsx"),document.body.appendChild(c),c.click(),c.remove(),n.value=null}catch(t){n.value=((e=(a=t.response)==null?void 0:a.data)==null?void 0:e.message)||"Something went wrong"}finally{r.value=!1}}}});export{C as u};
