import{p as U,x,c as a,g as y,o as r,q as f,a as s,M as E,j as b,t as p,R as P,F as I,y as S,f as B,i as k,n as g,T as q,U as F,G as L}from"./index-Bsza4PJG.js";import{_ as R}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as z}from"./UserChip-BvxQOY54.js";const ie=U({__name:"SubTaskProgress",props:{task:{}},setup(e,{expose:t}){const c=e,u=x(function(){return c.task.completed_count}),d=x(()=>c.task.children_task_count===0?c.task.status==="COMPLETED"?100:0:u.value/c.task.children_task_count*100),m=x(()=>{const o=d.value;let i,n,l;return o===100?(i="bg-green-50 ",n="bg-green-200",l="text-green-600 "):o<100&&(i="bg-red-50 border-red-400",n="bg-red-200",l="text-red-600 "),{container:i,bar:n,text:l}});return t({completedPercentage:d,completedSubTaskCount:u}),(o,i)=>o.task.children_task_count>0?(r(),a("div",{key:0,class:f(["rounded-full py-0.5 relative overflow-hidden h-6 min-w-40 border-2",m.value.container])},[s("div",{class:f(["z-10 absolute top-0 bottom-0",m.value.bar]),style:E(`width: ${d.value}%`)},null,6),s("span",{class:f(["z-20 absolute inset-0 gap-1 text-center h-full flex justify-center items-center",m.value.text])},[s("span",null,[s("span",null,p(u.value),1),i[0]||(i[0]=b(" / ")),s("span",null,p(o.task.children_task_count),1)])],2)],2)):y("",!0)}}),V={class:"relative"},D={key:0,class:"text-gray-400 text-xs whitespace-nowrap border py-1.5 rounded-full px-3 italic border-dashed"},M={class:"border rounded-full size-6 inline-flex justify-center items-center border-blue-300 bg-blue-100 flex-shrink-0"},O={key:0,class:"fas fa-user-cowboy text-blue-500"},G={key:1,class:"fas fa-user-crown text-blue-300"},H={key:2,class:"text-sm text-gray-500 group/users"},J={class:"cursor-pointer hover:underline text-blue-600 whitespace-nowrap"},K={class:"hidden absolute group-hover/users:block right-0 p-3 bg-white rounded shadow-lg z-30"},A={__name:"TaskAssignedUsers",props:{users:{type:Array,required:!0,default:()=>[]},maxItems:{type:Number,default:2},routeTo:{type:Function,default:null},isTargetTask:{Boolean,default:!1},listType:{String,default:"employee"},maxItem:{Number,default:2}},setup(e){const t=e,c=x(()=>t.users.slice(0,t.maxItem)),u=x(()=>t.users.slice(t.maxItem));function d(o){return typeof t.routeTo=="function"?t.routeTo(o):{}}const m=x(()=>typeof t.routeTo=="function"?P:"div");return(o,i)=>(r(),a("div",V,[t.users.length===0?(r(),a("div",D,p(e.listType=="supervisors"?"No Supervisor assigned":"Not Assigned To Anyone"),1)):(r(!0),a(I,{key:1},S(c.value,(n,l)=>(r(),B(L(m.value),F({key:l},{ref_for:!0},{...typeof t.routeTo=="function"?{to:d(n)}:{}}),{default:k(()=>[g(z,{class:f(["flex items-center border rounded-full border-gray-300 shadow-sm",{"!bg-yellow-400":e.isTargetTask," !bg-blue-100":!e.isTargetTask&&e.listType=="employee"&&l===0}]),user:n,"hide-employee-id":!0},q({_:2},[l===0||e.listType=="supervisors"?{name:"after",fn:k(()=>[s("div",M,[e.listType=="supervisors"?(r(),a("i",O)):(r(),a("i",G))])]),key:"0"}:void 0]),1032,["class","user"])]),_:2},1040))),128)),u.value.length>0?(r(),a("div",H,[s("div",J," + "+p(u.value.length),1),s("div",K,[(r(!0),a(I,null,S(u.value,(n,l)=>(r(),B(L(m.value),{key:l,to:d(n),class:"w-full block mb-2"},{default:k(()=>[g(z,{class:f(["flex items-center gap-2 border rounded-full border-gray-300 shadow-sm w-full",{"!bg-yellow-400":e.isTargetTask}]),user:n},null,8,["class","user"])]),_:2},1032,["to"]))),128))])])):y("",!0)]))}},Q={},W={class:"text-xs px-2 py-0.5 rounded-full border bg-yellow-800 text-white min-w-max"};function X(e,t){return r(),a("span",W,t[0]||(t[0]=[s("i",{class:"far fa-exclamation-circle"},null,-1),b(" IMPORTANT ")]))}const ce=R(Q,[["render",X]]),Y={},Z={class:"text-xs px-2 py-0.5 rounded-full border bg-red-500 text-white min-w-max"};function ee(e,t){return r(),a("span",Z,t[0]||(t[0]=[s("i",{class:"far fa-exclamation-triangle"},null,-1),b(" URGENT ")]))}const de=R(Y,[["render",ee]]),te={class:"flex flex-col md:flex-row items-stretched justify-start gap-x-5 gap-y-4"},se={class:"flex items-center justify-start gap-2 border-gray-200 py-1"},re=["title"],ae={class:"flex items-center justify-start gap-2 py-1"},ne=["title"],me={__name:"TaskSupervisorAndEmployee",props:{treeLevel:{type:Number,required:!0},task:{type:Object,required:!0},employeeRouteTo:{type:Function,default:null}},setup(e){return(t,c)=>{var u,d,m,o,i,n,l,h,v,T,_,w,$,N,j,C;return r(),a("div",te,[s("div",se,[g(A,{class:"flex items-center gap-x-3 gap-y-2",users:e.task.supervisors||[],listType:"supervisors",maxItem:1},null,8,["users"]),e.treeLevel===0?(r(),a("div",{key:0,class:f(["text-xs px-2 py-0.5 rounded-full border bg-sky-500/80 text-white line-clamp-1 text-center",{"":(d=(u=e.task)==null?void 0:u.from_department)==null?void 0:d.name}]),title:((o=(m=e.task)==null?void 0:m.from_department)==null?void 0:o.name)||"--"},p(((n=(i=e.task)==null?void 0:i.from_department)==null?void 0:n.short_name)||((h=(l=e.task)==null?void 0:l.from_department)==null?void 0:h.name)||"--"),11,re)):y("",!0)]),c[0]||(c[0]=s("div",null,[s("span",{class:"flex md:hidden text-2xl text-gray-200 items-center justify-center h-full"},[s("i",{class:"fad fa-arrow-down"})]),s("span",{class:"hidden md:flex text-2xl text-gray-200 items-center justify-center h-full"},[s("i",{class:"fad fa-arrow-right"})])],-1)),s("div",ae,[e.treeLevel===0?(r(),a("div",{key:0,class:f(["text-xs px-2 py-0.5 rounded-full border bg-sky-500/80 text-white line-clamp-1 text-center",{"":(T=(v=e.task)==null?void 0:v.to_department)==null?void 0:T.name}]),title:((w=(_=e.task)==null?void 0:_.to_department)==null?void 0:w.name)||"--"},p(((N=($=e.task)==null?void 0:$.to_department)==null?void 0:N.short_name)||((C=(j=e.task)==null?void 0:j.to_department)==null?void 0:C.name)||"--"),11,ne)):y("",!0),g(A,{class:"flex items-center gap-x-3 gap-y-2",users:e.task.users||[],isTargetTask:e.task.is_target,routeTo:e.employeeRouteTo,maxItem:1},null,8,["users","isTargetTask","routeTo"])])])}}};export{ce as T,A as _,de as a,ie as b,me as c};
