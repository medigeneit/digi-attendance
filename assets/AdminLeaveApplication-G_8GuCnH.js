import{g as ue,D as X,r as h,x as O,ab as ae,q as Q,h as oe,c as u,o,a as e,j as Z,w as re,k as L,l as k,v as B,Q as ie,t as n,F as R,e as I,n as F,ae as K,b as ee,d as V,u as ce,f as me,p as ye,m as P,Z as ve}from"./index-UQNVsj_8.js";import{L as de}from"./LoaderView-BiJw4jAw.js";import{_ as _e}from"./MultiselectDropdown-kven9MXJ.js";import{u as pe}from"./holiday-BejmzpOY.js";import{u as ne}from"./leave-application-BY1YTOmZ.js";import{u as be}from"./leave-type-Dd3BsITj.js";import{u as te}from"./user-CnbcIVyr.js";import{_ as xe}from"./EmployeeFilter-BLrdjEeu.js";import{_ as fe}from"./FlexibleDatePicker-drktuXSd.js";import{S as he}from"./SelectedEmployeeCard-DgTA_vPW.js";import{u as ge}from"./company-BrsIG40d.js";import"./department-B0rkm-Aa.js";import"./EmployeeDropdownInput-DaIobtb0.js";import"./SelectDropdown-8fKPK54Q.js";import"./UserChip-CvCDxZtH.js";const we={class:"space-y-6 p-4"},ke={class:"space-y-4"},$e={class:"grid grid-cols-1 gap-4 md:grid-cols-2"},Le={class:"space-y-2"},Se={class:"space-y-2"},Ae={class:"flex flex-wrap items-center justify-between gap-3 rounded-xl border border-slate-100 bg-slate-50/60 p-4"},De={class:"inline-flex items-center gap-2 rounded-full border border-slate-200 bg-white px-4 py-2 shadow-sm"},Ue={key:0,class:"rounded-xl border border-blue-100 bg-blue-50/70 px-4 py-3 text-sm font-medium text-blue-700"},Ce={class:"space-y-4 rounded-2xl border border-dashed border-slate-200 p-4"},je={class:"flex flex-wrap items-center justify-between gap-3"},Ve={class:"rounded-full bg-slate-100 px-3 py-1 text-xs font-semibold text-slate-600"},qe={key:0,class:"rounded-xl border border-slate-100 bg-white/70 p-6 text-center text-sm text-slate-500"},Te={key:1,class:"space-y-3"},Be={class:"flex flex-wrap items-center justify-between gap-2"},Me={class:"text-base font-semibold text-slate-700"},Fe={class:"flex flex-wrap gap-2"},Re=["title"],Ne=["name","value","onUpdate:modelValue","disabled"],Ye={class:"inline-flex items-center gap-1 rounded-full border border-slate-200 px-3 py-1 text-sm font-medium text-slate-600 transition peer-checked:border-blue-500 peer-checked:bg-blue-50 peer-checked:text-blue-600 peer-disabled:opacity-40"},He={class:"text-xs text-slate-400"},Ie={class:"cursor-pointer"},Ee=["name","onUpdate:modelValue"],We={class:"cursor-pointer"},ze=["name","onUpdate:modelValue"],Pe={class:"text-xs uppercase tracking-wide text-slate-400"},Oe={class:"space-y-4 rounded-2xl border border-slate-100 bg-slate-50/50 p-4"},Qe={class:"space-y-2"},Ge={key:0,class:"space-y-4"},Je={class:"space-y-2"},Ze={class:"space-y-2"},Ke={key:0,class:"rounded-xl border border-red-100 bg-red-50 px-4 py-3 text-sm text-red-600"},Xe={__name:"AdminLeaveApplicationAddForm",props:{userInfo:Object},emits:["close","formSuccessClosed"],setup(M,{emit:N}){const r=M,g=N,S=ne();be();const $=te(),w=ue(),A=pe(),{userLeaveBalance:Y}=X($),D=h(""),U=h(!0),a=h({last_working_date:"",resumption_date:"",reason:"",works_in_hand:"",handover_user_id:"",leave_days:[]}),d=h([]),y=h(!1),c=h(null),f=O(()=>{var v,s,i;return((s=(v=r==null?void 0:r.userInfo)==null?void 0:v.assign_weekend)==null?void 0:s.weekends)||((i=r==null?void 0:r.userInfo)==null?void 0:i.weekends)}),x=O(()=>{const v=a.value.last_working_date,s=a.value.resumption_date;if(!v||!s)return[];const i=new Date(v),p=new Date(s);if(p<=i)return[];const b=[];let _=new Date(i);for(_.setDate(_.getDate()+1);_<p;){const C=_.getFullYear(),T=(_.getMonth()+1).toString().padStart(2,"0"),m=_.getDate().toString().padStart(2,"0");b.push(`${C}-${T}-${m}`),_.setDate(_.getDate()+1)}return b}),q=O(()=>{if(!a.value.last_working_date||!a.value.resumption_date)return"";const v=new Date(a.value.last_working_date);return new Date(a.value.resumption_date)<=v?"Resumption date must be after Last Working Date.":x.value.length===0?"No leave days between the selected dates.":null});ae(async()=>{var v;x.value.length&&Y.value.length&&(await A.fetchHolidays({company_id:(v=w==null?void 0:w.user)==null?void 0:v.company_id,start_date:x.value[0],end_date:x.value[x.value.length-1]}),x.value.forEach(async(s,i)=>{const p=new Date(s).toLocaleString("en-us",{weekday:"long"}).toLowerCase(),b=p.charAt(0).toUpperCase()+p.slice(1);f.value.includes(b)&&(d.value[i]="weekend"),A.holidayDates.includes(s)&&(d.value[i]="holiday")}))}),Q(()=>D.value,v=>{a.value.handover_user_id=v==null?void 0:v.id});const H=async()=>{var v;y.value=!0,c.value=null;try{const s=x.value.map((_,C)=>({date:_,leave_type_id:d.value[C]!=="weekend"&&d.value[C]!=="holiday"?d.value[C]:null})).filter(_=>_.leave_type_id!==null),i=x.value.map((_,C)=>({date:_,leave_type_id:d.value[C]||""})).filter(_=>_.leave_type_id!==null),p={user_id:(v=r==null?void 0:r.userInfo)==null?void 0:v.id,last_working_date:a.value.last_working_date,resumption_date:a.value.resumption_date,reason:a.value.reason,works_in_hand:a.value.works_in_hand,handover_user_id:U.value?null:a.value.handover_user_id,leave_days:s,json_data:i,is_direct_approve:U.value};await S.storeAdminLeaveApplication(p)&&g("formSuccessClosed")}catch(s){c.value=s.message||"Failed to submit leave application"}finally{y.value=!1}};oe(async()=>{ae(()=>{var s;const v=(s=r==null?void 0:r.userInfo)==null?void 0:s.id;v&&$.fetchUserLeaveBalances(v)}),await $.fetchTypeWiseEmployees({except:"auth"})});const G=()=>{g("close")};return(v,s)=>(o(),u("div",we,[e("header",{class:"flex flex-wrap items-start justify-between gap-3"},[s[6]||(s[6]=e("div",null,[e("p",{class:"text-xs font-semibold uppercase tracking-widest text-slate-500"},"Admin panel"),e("h1",{class:"title-md md:title-lg"},"Leave Application Form")],-1)),e("button",{type:"button",class:"rounded-full border border-slate-200 px-4 py-2 text-sm font-medium text-slate-600 transition hover:border-slate-400 hover:text-slate-800",onClick:G}," Close ")]),y.value?(o(),Z(de,{key:0})):(o(),u("form",{key:1,onSubmit:re(H,["prevent"]),class:"space-y-6 rounded-2xl border border-slate-100 bg-white/80 p-4 shadow-sm backdrop-blur"},[e("section",ke,[e("div",$e,[e("div",Le,[s[7]||(s[7]=e("label",{class:"text-sm font-semibold text-slate-600"},"Last Working Date",-1)),k(e("input",{type:"date","onUpdate:modelValue":s[0]||(s[0]=i=>a.value.last_working_date=i),class:"input-1 w-full",required:""},null,512),[[B,a.value.last_working_date]])]),e("div",Se,[s[8]||(s[8]=e("label",{class:"text-sm font-semibold text-slate-600"},"Resumption Date",-1)),k(e("input",{type:"date","onUpdate:modelValue":s[1]||(s[1]=i=>a.value.resumption_date=i),class:"input-1 w-full",required:""},null,512),[[B,a.value.resumption_date]])])]),e("div",Ae,[s[10]||(s[10]=e("div",null,[e("p",{class:"text-sm font-semibold text-slate-600"},"Approval preference"),e("p",{class:"text-xs text-slate-500"}," Toggle off to assign a handover owner and capture works in hand. ")],-1)),e("label",De,[k(e("input",{type:"checkbox","onUpdate:modelValue":s[2]||(s[2]=i=>U.value=i),class:"h-4 w-4 text-blue-600"},null,512),[[ie,U.value]]),s[9]||(s[9]=e("span",{class:"text-sm font-semibold text-slate-700"},"Direct approve",-1))])]),a.value.last_working_date&&a.value.resumption_date&&q.value?(o(),u("div",Ue,n(q.value),1)):L("",!0)]),e("section",Ce,[e("div",je,[s[11]||(s[11]=e("div",null,[e("p",{class:"text-base font-semibold text-slate-700"},"Day-by-day allocation")],-1)),e("span",Ve,n(x.value.length)+" day"+n(x.value.length===1?"":"s"),1)]),x.value.length?(o(),u("div",Te,[(o(!0),u(R,null,I(x.value,(i,p)=>(o(),u("div",{key:p,class:"rounded-2xl flex border border-slate-100 bg-white p-2 items-center justify-between shadow-sm transition hover:border-blue-200"},[e("div",Be,[e("p",Me,n(i),1)]),e("div",Fe,[(o(!0),u(R,null,I(F(Y),b=>(o(),u("label",{key:b.id,class:"cursor-pointer",title:b.remaining_days===0?"No balance remaining":""},[k(e("input",{type:"radio",name:"leaveType-"+p,value:b.id,"onUpdate:modelValue":_=>d.value[p]=_,class:"peer hidden",disabled:d.value.filter(_=>_===b.id).length>=b.remaining_days},null,8,Ne),[[K,d.value[p]]]),e("span",Ye,[ee(n(b.name)+" ",1),e("span",He,"("+n(b.remaining_days)+"d)",1)])],8,Re))),128)),e("label",Ie,[k(e("input",{type:"radio",name:"leaveType-"+p,value:"weekend","onUpdate:modelValue":b=>d.value[p]=b,class:"peer hidden"},null,8,Ee),[[K,d.value[p]]]),s[12]||(s[12]=e("span",{class:"inline-flex items-center rounded-full border border-slate-200 px-3 py-1 text-sm font-medium text-slate-600 transition peer-checked:border-amber-500 peer-checked:bg-amber-50 peer-checked:text-amber-600"}," Weekend ",-1))]),e("label",We,[k(e("input",{type:"radio",name:"leaveType-"+p,value:"holiday","onUpdate:modelValue":b=>d.value[p]=b,class:"peer hidden"},null,8,ze),[[K,d.value[p]]]),s[13]||(s[13]=e("span",{class:"inline-flex items-center rounded-full border border-slate-200 px-3 py-1 text-sm font-medium text-slate-600 transition peer-checked:border-emerald-500 peer-checked:bg-emerald-50 peer-checked:text-emerald-600"}," Holiday ",-1))])]),e("p",Pe,n(d.value[p]?"Assigned":"Unassigned"),1)]))),128))])):(o(),u("div",qe," No days calculated yet. Pick a last working date and a resumption date to configure the breakdown. "))]),e("section",Oe,[e("div",Qe,[s[14]||(s[14]=e("label",{class:"text-sm font-semibold text-slate-600"},"Reason",-1)),k(e("textarea",{"onUpdate:modelValue":s[3]||(s[3]=i=>a.value.reason=i),class:"input-1 min-h-[80px] w-full",placeholder:"Summarize why the leave is required"},null,512),[[B,a.value.reason]])]),U.value?L("",!0):(o(),u("div",Ge,[e("div",Je,[s[15]||(s[15]=e("label",{class:"text-sm font-semibold text-slate-600"},"Handover user",-1)),V(_e,{modelValue:D.value,"onUpdate:modelValue":s[4]||(s[4]=i=>D.value=i),options:F($).users,multiple:!1,label:"label",placeholder:"Select the teammate who will receive the handover",class:"z-50"},null,8,["modelValue","options"])]),e("div",Ze,[s[16]||(s[16]=e("label",{for:"works-in-hand",class:"text-sm font-semibold text-slate-600"},"Works in hand",-1)),k(e("textarea",{id:"works-in-hand","onUpdate:modelValue":s[5]||(s[5]=i=>a.value.works_in_hand=i),class:"input-1 min-h-[100px] w-full",placeholder:"Detail the tasks that will continue while away"},null,512),[[B,a.value.works_in_hand]])])]))]),c.value?(o(),u("div",Ke,n(c.value),1)):L("",!0),e("div",{class:"flex flex-wrap items-center justify-end gap-3"},[e("button",{type:"button",class:"rounded-full border border-slate-200 px-5 py-2 text-sm font-semibold text-slate-600 transition hover:border-slate-400",onClick:G}," Cancel "),s[17]||(s[17]=e("button",{type:"submit",class:"btn-2 rounded-full px-6 py-2"},"Submit request",-1))])],32))]))}},et={key:0,class:"fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center z-50"},tt={class:"bg-white rounded-lg shadow-lg w-full max-w-3xl"},st={class:"px-6 py-4 border-b"},lt={class:"text-lg font-bold"},at={class:"table-auto w-full border"},ot={class:"p-2"},rt=["onUpdate:modelValue"],dt=["onUpdate:modelValue"],nt={class:"p-2"},ut=["onUpdate:modelValue"],it={class:"p-2"},ct=["onUpdate:modelValue"],mt={__name:"UserLeaveBalanceModal",props:{show:{type:Boolean,required:!0},user:{type:Object,required:!0}},emits:["close"],setup(M,{emit:N}){const r=M,g=N,S=ge(),$=te(),w=h([]),A=h(!1);Q(()=>r.show,async a=>{var d;a&&((d=r.user)!=null&&d.id)&&!A.value&&(await Y(),A.value=!0)}),Q(()=>{var a;return(a=r.user)==null?void 0:a.id},()=>{A.value=!1,w.value=[]});const Y=async()=>{try{const a=await $.fetchUserLeaveTypes(r.user.id);if(a!=null&&a.length)w.value=a;else{const d=await S.fetchCompanyLeaveTypes(r.user.company_id);w.value=d.data.map(y=>({id:y.id,name:y.name,annual_quota:y.annual_quota||0,max_consecutive_days:y.max_consecutive_days||null,type:y.type||"Paid"}))}}catch(a){console.error("Failed to load leave balances or fallback types:",a)}},D=async()=>{try{await $.saveLeaveBalances(r.user.id,w.value),g("close")}catch(a){console.error("Failed to save leave balances:",a)}},U=()=>{g("close")};return(a,d)=>M.show&&M.user?(o(),u("div",et,[e("div",tt,[e("div",st,[e("h3",lt,"Set Leave Balances for "+n(M.user.name),1)]),e("form",{onSubmit:re(D,["prevent"]),class:"p-6 space-y-4"},[e("table",at,[d[0]||(d[0]=e("thead",{class:"bg-gray-100 text-left"},[e("tr",null,[e("th",{class:"p-2"},"Leave Type"),e("th",{class:"p-2"},"Annual Quota"),e("th",{class:"p-2"},"Max Consecutive Days")])],-1)),e("tbody",null,[(o(!0),u(R,null,I(w.value,(y,c)=>(o(),u("tr",{key:c},[e("td",ot,[k(e("input",{type:"hidden","onUpdate:modelValue":f=>y.id=f,class:"input-1 w-full"},null,8,rt),[[B,y.id]]),k(e("input",{"onUpdate:modelValue":f=>y.name=f,class:"input-1 w-full",disabled:""},null,8,dt),[[B,y.name]])]),e("td",nt,[k(e("input",{"onUpdate:modelValue":f=>y.annual_quota=f,type:"number",min:"0",class:"input-1 w-full"},null,8,ut),[[B,y.annual_quota,void 0,{number:!0}]])]),e("td",it,[k(e("input",{"onUpdate:modelValue":f=>y.max_consecutive_days=f,type:"number",min:"0",class:"input-1 w-full"},null,8,ct),[[B,y.max_consecutive_days,void 0,{number:!0}]])])]))),128))])]),e("div",{class:"flex justify-end gap-2 pt-4 border-t"},[e("button",{type:"button",onClick:U,class:"px-4 py-2 bg-gray-200 rounded hover:bg-gray-300"}," Cancel "),d[1]||(d[1]=e("button",{type:"submit",class:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700"}," Save ",-1))])],32)])])):L("",!0)}},yt={class:"space-y-2 px-4 overflow-x-hidden"},vt={class:"flex flex-wrap gap-2 p-3 rounded-2xl border border-white/20 bg-white/60 backdrop-blur-md shadow-sm supports-[backdrop-filter]:bg-white/50 sticky top-14 z-50 w-full"},_t={key:0,class:"text-center py-4"},pt={key:1,class:"space-y-4"},bt={key:0,class:"mt-6 mb-6 space-y-6"},xt={class:"flex flex-col gap-6 md:flex-row"},ft={class:"bg-white border rounded-lg md:p-4 shadow"},ht={class:"overflow-x-auto"},gt={class:"min-w-full text-sm text-left text-gray-700 border"},wt={class:"px-3 sm:px-4 py-1 text-left font-medium"},kt={class:"px-1 sm:px-4 py-1 text-center"},$t={class:"px-1 sm:px-4 py-1 text-center"},Lt={class:"px-1 sm:px-4 py-1 text-center"},St={class:"px-1 sm:px-4 py-1 text-center"},At={class:"grid gap-3 md:hidden"},Dt={class:"flex items-center justify-between text-xs text-gray-500 px-1"},Ut={class:"font-semibold text-gray-800"},Ct={class:"text-sm text-gray-700"},jt={class:"flex justify-between bg-gray-50 p-1"},Vt={class:"font-medium"},qt={class:"flex justify-between p-1"},Tt={class:"font-medium"},Bt={class:"flex justify-between bg-gray-50 p-1"},Mt={class:"font-medium"},Ft={class:"flex justify-between p-1"},Rt=["innerHTML"],Nt={class:"flex justify-between bg-gray-50 p-1"},Yt={class:"font-medium"},Ht={class:"flex justify-between p-1"},It={class:"font-semibold text-blue-700"},Et={class:"flex justify-end gap-2 px-1"},Wt=["onClick"],zt={key:0,class:"text-center text-red-500 text-sm"},Pt={class:"overflow-x-auto hidden md:block"},Ot={class:"min-w-full table-auto border-collapse border border-gray-200 bg-white rounded-md text-sm"},Qt={class:"border border-gray-300 px-2 py-2"},Gt={class:"border border-gray-300 px-2 py-2 text-center"},Jt={class:"border border-gray-300 px-2 py-2 text-center"},Zt={class:"border border-gray-300 px-2 py-2 text-center"},Kt={class:"border border-gray-300 px-2 py-2"},Xt={class:"border border-gray-300 px-2 py-2"},es=["innerHTML"],ts={class:"border border-gray-300 px-2 py-2 text-center"},ss={class:"border border-gray-300 px-2 py-2"},ls={class:"border border-gray-300 px-2"},as={class:"flex justify-center gap-2"},os=["onClick"],rs={key:0},ds={key:0},ns={class:"text-center py-2",colspan:"10"},us={key:0,class:"fixed inset-0 z-[1000] bg-black bg-opacity-50 flex items-center justify-center"},is={class:"bg-white rounded-lg w-full max-w-4xl max-h-[90vh] overflow-y-auto shadow-lg p-4 relative"},Ss={__name:"AdminLeaveApplication",setup(M){const N=ce(),r=me(),g=ne(),S=te(),{user:$,leaveApplications:w,loading:A}=X(g),{userLeaveBalance:Y}=X(S),D=h(r.query.year||g.selectedYear),U=h(r.query.search||""),a=new Date,d=h({year:Number(D.value)||a.getFullYear(),month:a.getMonth()+1,day:a.getDate()}),y=O(()=>{var m;return((m=d.value)==null?void 0:m.year)??a.getFullYear()}),c=h({company_id:r.query.company_id||"",department_id:r.query.department_id||"all",line_type:r.query.line_type||"all",employee_id:r.query.employee_id||""}),f=h(!1),x=h(!1),q=async()=>{const m={selectedYear:D.value,selectedStatus:g.selectedStatus,query:U.value};c.value.employee_id?(m.user_id=c.value.employee_id,A.value=!0,await g.fetchYearlyUserLeaveApplications(m),A.value=!1):w.value=[]};oe(async()=>{await q(),r.query.employee_id&&await S.fetchUserLeaveBalances(r.query.employee_id,{year:y.value})}),Q(()=>r.query.employee_id,async m=>{m&&await S.fetchUserLeaveBalances(m,{year:y.value})}),Q(y,async m=>{m&&(D.value=m,await q(),c.value.employee_id&&await S.fetchUserLeaveBalances(c.value.employee_id,{year:m}))});const H=O(()=>w.value||[]),G=()=>N.go(-1),v=async()=>{N.replace({query:{...r.query,company_id:c.value.company_id,department_id:c.value.department_id,line_type:c.value.line_type,employee_id:c.value.employee_id}}),await q()},s=()=>{x.value=!0},i=async()=>{f.value=!1,await q()},p=new Date().getFullYear(),b=h([]);for(let m=2023;m<=p;m++)b.value.push(m);const _=async m=>{confirm("Are you sure to delete this application?")&&(await g.deleteLeaveApplication(m),await q())},C=()=>{x.value=!1,S.fetchUserLeaveBalances(r.query.employee_id,{year:y.value})},T=m=>m?new Date(m).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):"";return(m,l)=>{var se,le;const J=ye("RouterLink");return o(),u(R,null,[e("div",yt,[e("div",{class:"flex flex-wrap items-center justify-between gap-2"},[e("button",{class:"btn-3 order-1",onClick:G},l[8]||(l[8]=[e("i",{class:"far fa-arrow-left"},null,-1),e("span",{class:"hidden sm:inline"},"Back",-1)])),l[9]||(l[9]=e("h1",{class:"title-md md:title-lg flex-wrap text-center"},"Annual Leave History",-1))]),e("div",vt,[V(xe,{company_id:c.value.company_id,"onUpdate:company_id":l[1]||(l[1]=t=>c.value.company_id=t),department_id:c.value.department_id,"onUpdate:department_id":l[2]||(l[2]=t=>c.value.department_id=t),employee_id:c.value.employee_id,"onUpdate:employee_id":l[3]||(l[3]=t=>c.value.employee_id=t),line_type:c.value.line_type,"onUpdate:line_type":l[4]||(l[4]=t=>c.value.line_type=t),"with-type":!0,"initial-value":m.$route.query,onFilterChange:v,class:"w-full"},{default:P(()=>[V(fe,{modelValue:d.value,"onUpdate:modelValue":l[0]||(l[0]=t=>d.value=t),"show-year":!0,"show-month":!1,"show-date":!1,label:"Year"},null,8,["modelValue"])]),_:1},8,["company_id","department_id","employee_id","line_type","initial-value"])]),F(g).loading?(o(),u("div",_t,[V(de)])):(o(),u("div",pt,[(se=c.value)!=null&&se.employee_id?(o(),u("div",bt,[e("div",xt,[V(he,{user:F($),class:"grow"},null,8,["user"]),e("div",ft,[e("div",{class:"flex justify-between items-center py-2 px-4 md:px-0"},[l[10]||(l[10]=e("h3",{class:"text-sm md:text-lg font-semibold text-gray-700"},"Leave Balance",-1)),e("button",{onClick:s,type:"button",class:"btn-2 text-xs md:text-sm"}," Set Leave Balance ")]),e("div",ht,[e("table",gt,[l[11]||(l[11]=e("thead",{class:"bg-gray-100 text-[11px] md:text-xs uppercase"},[e("tr",null,[e("th",{class:"px-3 sm:px-4 py-2 text-left"},"Type"),e("th",{class:"px-1 sm:px-4 py-2 text-center"},"Total"),e("th",{class:"px-1 sm:px-4 py-2 text-center"},"Used"),e("th",{class:"px-1 sm:px-4 py-2 text-center"},"Pending"),e("th",{class:"px-1 sm:px-4 py-2 text-center"},"Remaining")])],-1)),e("tbody",null,[(o(!0),u(R,null,I(F(Y),t=>(o(),u("tr",{key:t.id,class:"border-t hover:bg-gray-50"},[e("td",wt,n(t.name),1),e("td",kt,n(t.annual_quota),1),e("td",$t,n(t.used_days),1),e("td",Lt,n(t==null?void 0:t.pending_days),1),e("td",St,n(t.remaining_days),1)]))),128))])])])])])])):L("",!0),e("div",At,[(o(!0),u(R,null,I(H.value,(t,E)=>{var W;return o(),u("div",{key:E,class:"bg-white border rounded-lg shadow-sm p-3 space-y-2 break-words"},[e("div",Dt,[e("div",Ut,"#"+n(E+1),1),e("div",null,n(T(t==null?void 0:t.created_at)),1)]),e("div",Ct,[e("div",jt,[l[12]||(l[12]=e("span",{class:"text-gray-500"},"Last Working",-1)),e("span",Vt,n(T(t==null?void 0:t.last_working_date)),1)]),e("div",qt,[l[13]||(l[13]=e("span",{class:"text-gray-500"},"Resumption",-1)),e("span",Tt,n(T(t==null?void 0:t.resumption_date)),1)]),e("div",Bt,[l[14]||(l[14]=e("span",{class:"text-gray-500"},"Period",-1)),e("span",Mt,n(t==null?void 0:t.leave_period),1)]),e("div",Ft,[l[15]||(l[15]=e("span",{class:"text-gray-500"},"Total Days",-1)),e("span",{class:"font-medium",innerHTML:(t==null?void 0:t.duration)||(t==null?void 0:t.total_leave_days)},null,8,Rt)]),e("div",Nt,[l[16]||(l[16]=e("span",{class:"text-gray-500"},"Type",-1)),e("span",Yt,n([...new Set((W=t==null?void 0:t.leave_days)==null?void 0:W.map(j=>{var z;return(z=j==null?void 0:j.leave_type)==null?void 0:z.name}))].join(",")),1)]),e("div",Ht,[l[17]||(l[17]=e("span",{class:"text-gray-500"},"Status",-1)),e("span",It,n((t==null?void 0:t.status)||"N/A"),1)])]),e("div",Et,[V(J,{to:{name:"LeaveApplicationShow",params:{id:t==null?void 0:t.id}},class:"btn-2 px-3 py-1 text-xs",target:"_blank"},{default:P(()=>l[18]||(l[18]=[ee(" View ")])),_:2,__:[18]},1032,["to"]),["Approved","Rejected"].includes(t==null?void 0:t.status)?L("",!0):(o(),Z(J,{key:0,to:{name:"LeaveApplicationEdit",params:{id:t==null?void 0:t.id}},class:"btn-3 px-3 py-1 text-xs",target:"_blank"},{default:P(()=>l[19]||(l[19]=[ee(" Edit ")])),_:2,__:[19]},1032,["to"])),e("button",{onClick:j=>_(t==null?void 0:t.id),class:"btn-3 px-3 py-1 text-xs text-red-600"}," Delete ",8,Wt)])])}),128)),H.value.length?L("",!0):(o(),u("div",zt," No application found "))]),e("div",Pt,[e("table",Ot,[l[24]||(l[24]=e("thead",null,[e("tr",{class:"bg-gray-200"},[e("th",{class:"border border-gray-300 px-2 py-1 text-center"},"#"),e("th",{class:"border border-gray-300 px-2 py-1 text-center"},"Created Date"),e("th",{class:"border border-gray-300 px-2 py-1 text-center"},"Last Working Day"),e("th",{class:"border border-gray-300 px-2 py-1 text-center"},"Resumption Date"),e("th",{class:"border border-gray-300 px-2 py-1 text-center"},"Leave Period"),e("th",{class:"border border-gray-300 px-2 py-1 text-center"},"Total Days"),e("th",{class:"border border-gray-300 px-2 py-1 text-center"},"Leave Type"),e("th",{class:"border border-gray-300 px-2 py-1 text-center"},"Status"),e("th",{class:"border border-gray-300 px-2 py-1 text-center"},"Action")])],-1)),e("tbody",null,[(o(!0),u(R,null,I(H.value,(t,E)=>{var W;return o(),u("tr",{key:E,class:"border-b border-gray-200 hover:bg-blue-200"},[e("td",Qt,n(E+1),1),e("td",Gt,n(T(t==null?void 0:t.created_at)),1),e("td",Jt,n(T(t==null?void 0:t.last_working_date)),1),e("td",Zt,n(T(t==null?void 0:t.resumption_date)),1),e("td",Kt,n(t==null?void 0:t.leave_period),1),e("td",Xt,[e("div",{innerHTML:(t==null?void 0:t.duration)||(t==null?void 0:t.total_leave_days)},null,8,es)]),e("td",ts,n([...new Set((W=t==null?void 0:t.leave_days)==null?void 0:W.map(j=>{var z;return(z=j==null?void 0:j.leave_type)==null?void 0:z.name}))].join(",")),1),e("td",ss,n((t==null?void 0:t.status)||"N/A"),1),e("td",ls,[e("div",as,[V(J,{to:{name:"LeaveApplicationShow",params:{id:t==null?void 0:t.id}},class:"btn-icon",target:"_blank"},{default:P(()=>l[20]||(l[20]=[e("i",{class:"far fa-eye"},null,-1)])),_:2,__:[20]},1032,["to"]),["Approved","Rejected"].includes(t==null?void 0:t.status)?L("",!0):(o(),Z(J,{key:0,to:{name:"LeaveApplicationEdit",params:{id:t==null?void 0:t.id}},class:"btn-icon",target:"_blank"},{default:P(()=>l[21]||(l[21]=[e("i",{class:"far fa-edit text-orange-600"},null,-1)])),_:2,__:[21]},1032,["to"])),e("button",{onClick:j=>_(t==null?void 0:t.id),class:"btn-icon text-red-500"},l[22]||(l[22]=[e("i",{class:"far fa-trash"},null,-1)]),8,os)])])])}),128)),H.value.length?L("",!0):(o(),u("tr",rs,l[23]||(l[23]=[e("td",{colspan:"10",class:"p-1 text-center text-red-500"},"No application found",-1)])))]),e("tfoot",null,[(le=c.value)!=null&&le.employee_id?(o(),u("tr",ds,[e("th",ns,[e("button",{onClick:l[5]||(l[5]=t=>f.value=!0),class:"text-white font-semibold px-4 py-2 rounded-full shadow-md bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 transition"}," + Add Application ")])])):L("",!0)])])])]))]),V(mt,{show:x.value,user:F($),onClose:C},null,8,["show","user"]),(o(),Z(ve,{to:"body"},[f.value?(o(),u("div",us,[e("div",is,[e("button",{class:"absolute top-2 right-2 text-gray-500 hover:text-red-500 text-xl font-bold",onClick:l[6]||(l[6]=t=>f.value=!1)}," Ã— "),V(Xe,{userInfo:F($),onClose:l[7]||(l[7]=t=>f.value=!1),onFormSuccessClosed:i},null,8,["userInfo"])])])):L("",!0)]))],64)}}};export{Ss as default};
