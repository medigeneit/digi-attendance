import{m as N,c as f,o as r,g as c,x as J,d as X,n as lt,p as $,a as o,t as I,f as R,j as C,i as E,w as h,k as p,F as Z,L as _,r as T,e as P,J as K,A as tt,K as st,h as F,v as z}from"./index-BnkImPfz.js";import{h as nt,k as it,l as rt,g as B,b as ut}from"./datetime-Efw590t9.js";import{_ as yt}from"./DepartmentChip-tAT-367p.js";import{_ as et}from"./UserChip-C_FlooYP.js";import{O as G}from"./OverlyModal-DAQxLz-h.js";import{u as Y,a as ot,f as mt,d as ct,b as ft}from"./useTodoStore-6meBZ-XI.js";import{L as H}from"./LoaderView-DyDNTiY4.js";import{u as vt}from"./useTaskStore-DvL7jjdA.js";import{_ as pt}from"./TaskSelectionInput-BZp1NLTD.js";const gt={key:0,class:"fa fa-exclamation-square",title:"Pending"},bt={key:1,class:"fa fa-pause",title:"Working"},kt={key:2,class:"fa fa-check-square",title:"Completed"},at={__name:"TodoStatusIcon",props:{todoDate:{type:Object,required:!0}},setup(t){const D=t,n=N(()=>{switch(D.todoDate.status){case"PENDING":return"text-red-400";case"WORKING":return"text-yellow-600";case"COMPLETED":return"text-green-400"}return""});return(l,b)=>(r(),f("span",{class:J(n.value)},[t.todoDate.status=="PENDING"?(r(),f("i",gt)):c("",!0),t.todoDate.status=="WORKING"?(r(),f("i",bt)):c("",!0),t.todoDate.status=="COMPLETED"?(r(),f("i",kt)):c("",!0)],2))}},xt={class:""},wt={key:0,class:"mt-1 flex items-center gap-2"},Tt={key:0,class:"line-clamp-2 text-gray-500 whitespace-nowrap mr-2"},Dt={class:"md:ml-auto w-full md:w-auto flex items-center justify-center gap-2"},Ct={key:0,class:"flex items-center gap-1 text-red-600"},ce={__name:"TodoItemCard",props:{todoDate:{type:Object,required:!0},hideDepartment:{type:Boolean,default:!1},hideUser:{type:Boolean,default:!1},hideSortingBtn:{type:Boolean,default:!1},userRole:{type:String,default:"employee"}},emits:["clickTodo","clickEdit","clickDelete","clickChangeStatus","clickDelete"],setup(t,{emit:D}){const n=X(),l=D;return(b,s)=>{var v,a,g,y,d,e,k;const i=lt("RouterLink");return r(),f("div",{class:J(["px-4 py-4 md:py-2 cursor-pointer flex flex-wrap items-center gap-y-2 gap-x-4 text-sm",{"bg-green-100":t.todoDate.status=="COMPLETED","hover:bg-gray-50":t.todoDate.status!="COMPLETED","bg-orange-100 text-orange-800 border-b border-orange-200 hover:bg-orange-100":t.todoDate.status=="WORKING"&&p(rt)(t.todoDate.date)}]),onClick:s[4]||(s[4]=h(x=>l("clickTodo",t.todoDate),["prevent"]))},[$(at,{todoDate:t.todoDate},null,8,["todoDate"]),o("div",xt,[o("div",{class:J(["line-clamp-1",{"text-green-800":t.todoDate.status=="COMPLETED","text-blue-800":t.todoDate.status!="COMPLETED"}])},I(t.todoDate.id)+" - "+I(t.todoDate.title),3),t.todoDate.user?(r(),f("div",wt,[t.hideUser?c("",!0):(r(),R(et,{key:0,user:t.todoDate.user,"avatar-size":"xsmall"},null,8,["user"])),t.hideDepartment?c("",!0):(r(),R(yt,{key:1,department:(a=(v=t.todoDate)==null?void 0:v.user)==null?void 0:a.department},null,8,["department"]))])):c("",!0)]),(g=t.todoDate.todo)!=null&&g.todo_type&&((y=t.todoDate.todo)!=null&&y.todo_type_id)?(r(),f("div",Tt,[C(I((d=t.todoDate.todo)==null?void 0:d.todo_type)+" ",1),$(i,{class:"text-blue-600 font-semibold underline hover:text-sky-400",onClick:h(x=>null,["stop"]),to:{name:"RequirementTaskShow",params:{id:(e=t.todoDate.todo)==null?void 0:e.todo_type_id}}},{default:E(()=>{var x;return[s[5]||(s[5]=o("i",{class:"fas fa-link"},null,-1)),C(" "+I((x=t.todoDate.todo)==null?void 0:x.todo_type_id),1)]}),_:1,__:[5]},8,["to"])])):c("",!0),o("div",Dt,[t.todoDate.status=="WORKING"&&p(nt)(t.todoDate.date)?(r(),f("div",Ct,s[6]||(s[6]=[o("span",{class:"fas fa-circle animate-pulse text-xs"},null,-1),o("span",{class:"text-xs"},"Working",-1)]))):c("",!0),t.todoDate.user_id===((k=p(n).user)==null?void 0:k.id)?(r(),f(Z,{key:1},[t.todoDate.status==="WORKING"?(r(),f("button",{key:0,title:"Mark as Completed",class:"btn-icon bg-transparent text-green-400 border-green-400 border hover:bg-green-400 hover:text-white",onClick:s[0]||(s[0]=h(()=>l("clickChangeStatus",t.todoDate,"COMPLETED"),["prevent","stop"]))},s[7]||(s[7]=[o("i",{class:"fas fa-check"},null,-1)]))):c("",!0),t.todoDate.status==="PENDING"&&p(it)(t.todoDate.date)?(r(),f("button",{key:1,title:"Start Working",class:"btn-icon bg-transparent text-red-400 border-red-400 border hover:bg-red-400 hover:text-white",onClick:s[1]||(s[1]=h(()=>l("clickChangeStatus",t.todoDate,"WORKING"),["prevent","stop"]))},s[8]||(s[8]=[o("i",{class:"fas fa-play ml-[4px]"},null,-1)]))):c("",!0),o("button",{class:"btn-icon bg-sky-400 text-white hover:bg-sky-600 hover:text-white",onClick:s[2]||(s[2]=h(x=>{var O;return l("clickEdit",(O=t.todoDate)==null?void 0:O.todo)},["prevent","stop"]))},s[9]||(s[9]=[o("i",{class:"fas fa-pen"},null,-1)])),o("button",{class:"btn-icon bg-red-400 text-white hover:bg-red-600 hover:text-white",onClick:s[3]||(s[3]=h(()=>l("clickDelete",t.todoDate),["prevent","stop"]))},s[10]||(s[10]=[o("i",{class:"fas fa-trash-alt"},null,-1)]))],64)):c("",!0),t.hideSortingBtn?c("",!0):(r(),f("button",{key:2,onClick:h(()=>null,["stop","prevent"]),class:"btn-icon bg-gray-400 text-white hover:bg-gray-600 hover:text-white handle"},s[11]||(s[11]=[o("i",{class:"fas fa-arrows-alt-v"},null,-1)])))])],2)}}},St={class:"bg-white border-t px-4 py-4 sticky bottom-0 rounded-b-md"},ht={key:0,class:"mb-4 text-red-500 font-medium"},$t={key:0,class:"mb-4 text-blue-500 font-medium"},It={class:"flex justify-between items-center gap-4"},Et=["disabled"],Q={__name:"FormHandler",props:{isSubmitting:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},error:{type:String,default:""}},emits:["submit","clickCancel"],setup(t,{emit:D}){const n=D;return(l,b)=>(r(),f("form",{onSubmit:b[1]||(b[1]=h(s=>n("submit"),["prevent"]))},[_(l.$slots,"default"),o("div",St,[_(l.$slots,"error",{},()=>[t.error?(r(),f("div",ht,I(t.error),1)):c("",!0)]),t.isSubmitting?(r(),f("div",$t,"Saving changes...")):c("",!0),_(l.$slots,"footer",{},()=>[o("div",It,[o("button",{type:"button",onClick:b[0]||(b[0]=s=>n("clickCancel")),class:"btn-3"},"Cancel"),o("button",{disabled:t.isSubmitting||t.isLoading,type:"submit",class:"btn-2"},I(t.isSubmitting?"Saving...":"Save"),9,Et)])])])],32))}},dt={__name:"TodoTypeInput",props:{todoType:{type:String,default:"task"},todoTypeId:{type:[String,Number],default:null},show:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1}},emits:["update:todoType","update:todoTypeId","update:show"],setup(t,{emit:D}){const n=t,l=D,b=N({get:()=>n.todoTypeId,set:y=>l("update:todoTypeId",y)}),s=N({get:()=>n.show,set:y=>l("update:show",y)}),i=T(null),v=T({});function a(){if(!(i!=null&&i.value))return;const y=i.value.getBoundingClientRect(),d=window.innerHeight,e=300,x=d-y.bottom<e;v.value={position:"fixed",top:x?y.top-e+"px":y.bottom+"px",left:y.left+"px",width:y.width+"px",zIndex:5e3}}P(async()=>{await K(),window.addEventListener("resize",a),document.addEventListener("scroll",a)});const g=vt();return tt(()=>s.value,async y=>{y&&await g.fetchAllMyTasks()}),st(()=>{window.removeEventListener("resize",a),document.removeEventListener("scroll",a)}),(y,d)=>(r(),f("div",null,[$(pt,{show:s.value,"onUpdate:show":d[0]||(d[0]=e=>s.value=e),taskId:b.value,"onUpdate:taskId":d[1]||(d[1]=e=>b.value=e)},null,8,["show","taskId"])]))}},Rt={class:"p-4 min-h-[10vh] max-h-[50vh] overflow-y-auto"},Mt={class:"mb-4"},Ot={class:"mb-4"},Lt=["readonly"],Ut={class:"mb-4"},Nt={__name:"TodoAddForm",props:{date:{type:String,default:B(new Date)},userRole:{type:String,default:"employee"},todoType:{type:String,default:"task"},todoTypeId:{type:String,default:null},readonlyValues:{type:Object,default:()=>({date:!1,todo_type_id:!1})}},emits:["update","cancelClick"],setup(t,{emit:D}){const n=t,l=T(),b=T(!1),s=T(),i=Y(),v=D,a=T({title:"",date:n.date||"",todo_type:"task",todo_type_id:""});async function g(){var y;try{l.value="submitting",(y=a.value)!=null&&y.todo_type_id||(a.value={title:a.value.title,date:a.value.date}),await i.createTodo(a.value,{returnWith:n.userRole!=="employee"?"user,department,company":""}),v("update")}finally{l.value=""}}return tt(()=>({date:n.date,todo_type:n.todoType,todo_type_id:n.todoTypeId}),y=>{a.value=y},{immediate:!0}),P(async()=>{var y;await K(),(y=s.value)==null||y.focus()}),(y,d)=>(r(),f("div",{onClick:d[6]||(d[6]=e=>b.value=!1)},[p(i).loading?(r(),R(H,{key:0,class:"absolute inset-0 bg-opacity-80 text-center py-4 text-gray-500 z-10 flex items-center justify-center"},{default:E(()=>d[7]||(d[7]=[C(" Loading... ")])),_:1,__:[7]})):c("",!0),$(Q,{onSubmit:g,onClickCancel:d[5]||(d[5]=e=>v("cancelClick")),isSubmitting:l.value=="submitting",error:p(i).error,class:"rounded-md relative"},{default:E(()=>{var e,k;return[d[11]||(d[11]=o("div",{class:"border-b py-2 px-4"},[o("h2",{class:"text-xl font-semibold"},"Add Todo")],-1)),o("div",Rt,[o("div",Mt,[d[8]||(d[8]=o("label",{class:"block text-gray-700 font-medium mb-1 text-sm"},"Title",-1)),F(o("input",{ref_key:"titleRef",ref:s,"onUpdate:modelValue":d[0]||(d[0]=x=>a.value.title=x),required:"",placeholder:"Enter todo title",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[z,a.value.title]])]),o("div",Ot,[d[9]||(d[9]=o("label",{class:"block text-gray-700 font-medium mb-1 text-sm"},"Date",-1)),F(o("input",{readonly:(e=t.readonlyValues)==null?void 0:e.date,"onUpdate:modelValue":d[1]||(d[1]=x=>a.value.date=x),type:"date",required:"",placeholder:"Enter todo title",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,8,Lt),[[z,a.value.date]])]),o("div",Ut,[d[10]||(d[10]=o("label",{class:"block text-gray-700 font-medium mb-1 text-sm"},"Task ID (optional)",-1)),$(dt,{show:b.value,"onUpdate:show":d[2]||(d[2]=x=>b.value=x),todoType:a.value.todo_type,"onUpdate:todoType":d[3]||(d[3]=x=>a.value.todo_type=x),todoTypeId:a.value.todo_type_id,"onUpdate:todoTypeId":d[4]||(d[4]=x=>a.value.todo_type_id=x),readonly:(k=t.readonlyValues)==null?void 0:k.todo_type_id},null,8,["show","todoType","todoTypeId","readonly"])])])]}),_:1,__:[11]},8,["isSubmitting","error"])]))}},Vt={class:"p-4 min-h-[10vh] max-h-[50vh] overflow-y-auto"},Bt={class:"mb-4 text-md"},Pt={class:"font-semibold"},jt={class:"mb-2"},At={__name:"TodoDateAddForm",props:{date:{type:[String,Number],default:B(new Date)},todoId:{type:[String,Number],required:!0},userRole:{type:String,default:"employee"}},emits:["update","cancelClick"],setup(t,{emit:D}){const n=t,l=T(),b=T(!1),s=T(),i=Y(),v=ot(),a=D,g=T({date:n.date||"",todo_id:n.todoId});async function y(){try{l.value="submitting",await v.createTodoDate(g.value),a("update")}finally{l.value=""}}return P(async()=>{var d;await K(),await i.fetchTodo(n.todoId),(d=s.value)==null||d.focus()}),(d,e)=>(r(),f("div",{onClick:e[2]||(e[2]=k=>b.value=!1)},[p(i).loading?(r(),R(H,{key:0,class:"absolute inset-0 bg-opacity-80 text-center py-4 text-gray-500 z-10 flex items-center justify-center"},{default:E(()=>e[3]||(e[3]=[C(" Loading... ")])),_:1,__:[3]})):c("",!0),$(Q,{onSubmit:y,onClickCancel:e[1]||(e[1]=k=>a("cancelClick")),isSubmitting:l.value=="submitting",error:p(v).error,class:"rounded-md relative"},{default:E(()=>{var k;return[e[6]||(e[6]=o("div",{class:"border-b py-2 px-4"},[o("h2",{class:"text-xl font-semibold"},"Carry Todo To Date")],-1)),o("div",Vt,[o("div",Bt,[e[4]||(e[4]=C(" TODO: ")),o("span",Pt,I((k=p(i).todo)==null?void 0:k.title),1)]),o("div",jt,[e[5]||(e[5]=o("span",{class:"font-semibold"}," Date ",-1)),F(o("input",{"onUpdate:modelValue":e[0]||(e[0]=x=>g.value.date=x),type:"date",multiple:"",required:"",placeholder:"Enter todo title",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[z,g.value.date]])])])]}),_:1,__:[6]},8,["isSubmitting","error"])]))}},qt={key:0,class:"mb-4 text-red-500 font-medium"},Wt={key:1,class:"mb-4 text-red-500 font-medium"},Gt={class:"p-4 min-h-[10vh] max-h-[50vh] overflow-y-auto"},Ft={class:"mb-4"},zt={class:"mb-4"},Kt={__name:"TodoEditForm",props:{date:{type:String,default:B(new Date)},todo:{type:Object,default:()=>({})}},emits:["update","cancelClick"],setup(t,{emit:D}){var M;const n=t,l=T(),b=T(!1),s=T(),i=Y(),v=D,a=T({title:"",todo_type:"task",todo_type_id:""}),g=T({id:null,repeat_type:"daily",start_date:((M=n.todo)==null?void 0:M.date)||n.date||B(new Date),end_date:null,weekly_day:null,monthly_mode:null,monthly_value:null,monthly_week:null,yearly_month:null,yearly_day:null}),y=T(!1),d=T({});async function e(){var w,u,m;await i.fetchTodo((w=n.todo)==null?void 0:w.id),a.value.title=(u=i.todo)==null?void 0:u.title,a.value.todo_type_id=(m=i.todo)==null?void 0:m.todoable_id}const k=T(null);async function x(){var w,u;try{const{data:m}=await mt(n.todo.id),S=m==null?void 0:m.setting;S?(y.value=!0,k.value=S.id,g.value={repeat_type:S.repeat_type??"daily",start_date:S.start_date??g.value.start_date,end_date:S.end_date??null,weekly_day:S.weekly_day??null,monthly_mode:S.monthly_mode??null,monthly_value:S.monthly_value??null,monthly_week:S.monthly_week??null,yearly_month:S.yearly_month??null,yearly_day:S.yearly_day??null}):g.value.id=null}catch(m){L.value=(u=(w=m==null?void 0:m.response)==null?void 0:w.data)==null?void 0:u.message,console.error("Load setting failed:",(m==null?void 0:m.message)||m)}}async function O(){await i.updateTodo(n.todo.id,{title:a.value.title,todo_type:a.value.todo_type,todo_type_id:a.value.todo_type_id})}async function j(){var w,u;if(!y.value)k.value&&await ct(n.todo.id,k.value);else{const m=(w=d.value)!=null&&w.buildPayload?d.value.buildPayload():{...g.value};m.start_date||(m.start_date=((u=n.todo)==null?void 0:u.date)||n.date||B(new Date)),await ft(n.todo.id,m)}}const A=w=>{var u,m;return((m=(u=w==null?void 0:w.response)==null?void 0:u.data)==null?void 0:m.message)||(w==null?void 0:w.message)||"Something went wrong"};async function q(){const[w,u]=await Promise.allSettled([O(),j()]),m=w.status==="fulfilled",S=u.status==="fulfilled";S||(L.value=A(u.reason)),m&&S&&v("update")}const U=T(!1),L=T(!1);async function W(){var w;await e(),U.value=!0,await x(),U.value=!1,await K(),(w=s.value)==null||w.focus()}const V=N(()=>i.loading||U.value);return P(()=>{W()}),(w,u)=>(r(),f("div",{class:"relative",onClick:u[5]||(u[5]=m=>b.value=!1)},[V.value?(r(),R(H,{key:0,class:"absolute inset-0 bg-opacity-80 text-center py-4 text-gray-500 z-10 flex items-center justify-center"},{default:E(()=>u[6]||(u[6]=[C(" Loading... ")])),_:1,__:[6]})):c("",!0),$(Q,{onSubmit:q,onClickCancel:u[4]||(u[4]=m=>v("cancelClick")),isSubmitting:l.value=="submitting",isLoading:V.value,id:"todoEditForm"},{error:E(()=>[o("div",null,[p(i).error?(r(),f("div",qt,I(p(i).error),1)):c("",!0),L.value?(r(),f("div",Wt,I(L.value),1)):c("",!0)])]),default:E(()=>[u[10]||(u[10]=o("div",{class:"border-b py-2 px-4"},[o("h2",{class:"text-xl font-semibold"},"Edit Todo")],-1)),o("div",Gt,[u[9]||(u[9]=o("div",{class:"text-xs text-red-800 mb-6"},[o("strong",null,"Tips:"),C(" If you change the todo, it will change to all the concurrent dates ")],-1)),o("div",Ft,[u[7]||(u[7]=o("label",{class:"block text-gray-500 font-medium text-sm"},"Title",-1)),F(o("input",{ref_key:"titleRef",ref:s,"onUpdate:modelValue":u[0]||(u[0]=m=>a.value.title=m),required:"",placeholder:"Enter todo title",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500 shadow-sm"},null,512),[[z,a.value.title]])]),o("div",zt,[u[8]||(u[8]=o("label",{class:"block text-gray-500 font-medium text-sm"},"Task ID (optional)",-1)),$(dt,{show:b.value,"onUpdate:show":u[1]||(u[1]=m=>b.value=m),todoType:a.value.todo_type,"onUpdate:todoType":u[2]||(u[2]=m=>a.value.todo_type=m),todoTypeId:a.value.todo_type_id,"onUpdate:todoTypeId":u[3]||(u[3]=m=>a.value.todo_type_id=m)},null,8,["show","todoType","todoTypeId"])])])]),_:1,__:[10]},8,["isSubmitting","isLoading"])]))}},Ht={class:"relative"},_t={class:"min-h-[10vh] max-h-[50vh] overflow-y-auto p-4"},Jt={class:"mb-4"},Yt={class:"mb-4 flex justify-between items-end"},Qt={key:0,class:"mt-1 flex items-center gap-2 mb-4"},Xt={class:"border border-sky-400 rounded-full text-sky-500 font-semibold bg-sky-50 px-1 py-0.5 text-xs inline-block"},Zt={class:"flex items-center justify-between gap-4"},te={key:0,class:"flex items-center gap-2"},ee={class:"flex justify-between items-center gap-4 py-4 px-4 border-t"},oe={key:0,class:"ml-auto flex items-center gap-2"},ae={__name:"TodoShow",props:{todoDate:{type:Object,default:()=>{}}},emits:["cancelClick","clickEdit","update","clickAddTodoDate"],setup(t,{emit:D}){const n=t,l=ot(),b=X(),s=D;async function i(){var d;console.log({todo_date:"dd"}),await l.fetchTodoDate((d=n.todoDate)==null?void 0:d.id)}const v=N(()=>{var d,e;return(d=l.todo_date)!=null&&d.date?new Date((e=l.todo_date)==null?void 0:e.date):null}),a=N(()=>{var d,e,k;return((e=(d=l.todo_date)==null?void 0:d.user)==null?void 0:e.id)===((k=b.user)==null?void 0:k.id)});async function g(d){var e;confirm(`Are your sure want to delete todo
'${(e=l.todo_date)==null?void 0:e.title}'`)&&(await l.deleteTodoDate(d.id),s("update"))}async function y(d,e){var k;confirm(`Are your sure want to compete todo
'${(k=l.todo_date)==null?void 0:k.title}'`)&&(await l.updateStatus(d.id,e),s("update"))}return P(async()=>{await i()}),(d,e)=>{var k,x,O,j,A,q,U,L,W;return r(),f("div",Ht,[p(l).loading?(r(),R(H,{key:0,class:"absolute inset-0 bg-opacity-80 text-center py-4 text-gray-500 z-10 flex items-center justify-center"},{default:E(()=>e[6]||(e[6]=[C(" Loading... ")])),_:1,__:[6]})):c("",!0),o("div",null,[e[13]||(e[13]=o("div",{class:"border-b py-2 px-4"},[o("h2",{class:"text-xl font-semibold"},"Show Todo")],-1)),o("div",_t,[o("div",Jt,[e[7]||(e[7]=o("div",{class:"font-semibold text-xs text-gray-500"},"Date",-1)),o("span",null,I(p(ut)(v.value,{weekDay:"long"})),1)]),o("div",Yt,[o("div",null,[e[8]||(e[8]=o("div",{class:"text-xs text-gray-500"},"Todo",-1)),C(" "+I((k=p(l).todo_date)==null?void 0:k.title),1)]),o("button",{class:"btn-2 bg-sky-400 text-white hover:bg-sky-600 hover:text-white bg-none",onClick:e[0]||(e[0]=h(V=>{var M;return s("clickEdit",(M=p(l).todo_date)==null?void 0:M.todo)},["prevent","stop"]))},e[9]||(e[9]=[o("i",{class:"fas fa-pen"},null,-1),C(" Edit Todo ")]))]),(x=t.todoDate)!=null&&x.user?(r(),f("div",Qt,[$(et,{user:t.todoDate.user,"avatar-size":"xsmall"},null,8,["user"]),o("div",Xt,I((j=(O=t.todoDate.user)==null?void 0:O.department)==null?void 0:j.name),1)])):c("",!0),o("div",null,[e[12]||(e[12]=o("div",{class:"text-xs text-gray-500"},"Status",-1)),o("div",Zt,[o("div",null,[(A=p(l))!=null&&A.todo_date?(r(),R(at,{key:0,todoDate:(q=p(l))==null?void 0:q.todo_date},null,8,["todoDate"])):c("",!0),C(" "+I((U=p(l).todo_date)==null?void 0:U.status),1)]),a.value&&!p(l).loading?(r(),f("div",te,[((L=p(l).todo_date)==null?void 0:L.status)==="PENDING"?(r(),f("button",{key:0,class:"btn-2 from-yellow-700 to-yellow-500 text-white hover:bg-green-600 hover:text-white",onClick:e[1]||(e[1]=h(()=>y(p(l).todo_date,"WORKING"),["prevent","stop"]))},e[10]||(e[10]=[o("i",{class:"fas fa-exclamation-circle"},null,-1),C(" Change to Working ")]))):c("",!0),((W=p(l).todo_date)==null?void 0:W.status)==="WORKING"?(r(),f("button",{key:1,class:"btn-2 from-green-700 to-green-300 text-white hover:bg-green-600 hover:text-white",onClick:e[2]||(e[2]=h(()=>y(p(l).todo_date,"COMPLETED"),["prevent","stop"]))},e[11]||(e[11]=[o("i",{class:"fas fa-check"},null,-1),C(" Make Complete ")]))):c("",!0)])):c("",!0)])])])]),o("div",ee,[o("button",{type:"button",onClick:e[3]||(e[3]=V=>s("cancelClick")),class:"btn-3"},"Cancel"),a.value&&!p(l).loading?(r(),f("div",oe,[o("button",{class:"btn-2 bg-green-600 text-white hover:bg-green-700 hover:text-white bg-none",onClick:e[4]||(e[4]=h(V=>{var M,w;return s("clickAddTodoDate",(M=p(l).todo_date)==null?void 0:M.todo_id,(w=p(l).todo_date)==null?void 0:w.date)},["prevent","stop"]))},e[14]||(e[14]=[o("i",{class:"fas fa-plus"},null,-1),C(" Add To another date ")])),o("button",{class:"btn-2-red",onClick:e[5]||(e[5]=h(()=>g(p(l).todo_date),["prevent","stop"]))},e[15]||(e[15]=[o("i",{class:"fas fa-trash-alt"},null,-1),C(" Delete ")]))])):c("",!0)])])}}},fe={__name:"TodoCreateEditShow",props:{todoModal:{type:Object,required:!0},userRole:{type:String,required:"employee"}},emits:["cancelClick","todoUpdate","todoDateUpdate","clickEdit","clickDelete","clickChangeStatus","clickAddTodoDate"],setup(t,{emit:D}){const n=D;function l(){n("todoUpdate")}function b(){n("todoDateUpdate")}return(s,i)=>(r(),f(Z,null,[t.todoModal.action=="add"?(r(),R(G,{key:0},{default:E(()=>{var v,a,g,y;return[$(Nt,{onCancelClick:i[0]||(i[0]=d=>n("cancelClick")),onUpdate:l,date:(v=t.todoModal)==null?void 0:v.date,todoType:(a=t.todoModal)==null?void 0:a.todoType,todoTypeId:(g=t.todoModal)==null?void 0:g.todoTypeId,readonlyValues:((y=t.todoModal)==null?void 0:y.formReadonlyValues)||{},userRole:t.userRole},null,8,["date","todoType","todoTypeId","readonlyValues","userRole"])]}),_:1})):c("",!0),t.todoModal.action=="addDate"?(r(),R(G,{key:1},{default:E(()=>{var v,a,g;return[$(At,{onCancelClick:i[1]||(i[1]=y=>n("cancelClick")),onUpdate:b,date:(v=t.todoModal)==null?void 0:v.date,todoId:(a=t.todoModal)==null?void 0:a.todo_id,userRole:t.userRole,readonlyValues:((g=t.todoModal)==null?void 0:g.formReadonlyValues)||{}},null,8,["date","todoId","userRole","readonlyValues"])]}),_:1})):c("",!0),t.todoModal.action=="edit"?(r(),R(G,{key:2},{default:E(()=>{var v,a;return[$(Kt,{onCancelClick:i[2]||(i[2]=g=>n("cancelClick")),onUpdate:l,todo:(v=t.todoModal)==null?void 0:v.todo,userRole:t.userRole,readonlyValues:((a=t.todoModal)==null?void 0:a.formReadonlyValues)||{}},null,8,["todo","userRole","readonlyValues"])]}),_:1})):c("",!0),t.todoModal.action=="show"?(r(),R(G,{key:3},{default:E(()=>{var v;return[$(ae,{onCancelClick:i[3]||(i[3]=a=>n("cancelClick")),onUpdate:b,onClickEdit:i[4]||(i[4]=a=>n("clickEdit",a)),onClickAddTodoDate:i[5]||(i[5]=(...a)=>n("clickAddTodoDate",...a)),onClickDelete:i[6]||(i[6]=a=>n("clickDelete",a)),onClickChangeStatus:i[7]||(i[7]=(a,g)=>n("clickChangeStatus",a,g)),todoDate:(v=t.todoModal)==null?void 0:v.todo,userRole:t.userRole},null,8,["todoDate","userRole"])]}),_:1})):c("",!0)],64))}};export{ce as _,fe as a,at as b};
