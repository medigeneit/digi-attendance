import{r as V,c as l,o as n,a as e,g as d,p,F as q,b as R,u as F,d as I,a3 as M,n as E,t as a,q as z,f as G,k as y,i as W}from"./index-Buhj-MDq.js";import{u as B}from"./overtime-C1N_SWRv.js";import{_ as J}from"./AcceptAndRejectHandler-CwbQG1m2.js";import{_ as g}from"./DisplayFormattedWorkingHours-D46_2-M7.js";import{_ as K}from"./TimePickerAsFloatHour-tW7w12nN.js";const Q={key:0,class:"fixed inset-0 z-50 flex justify-center items-center bg-black/50"},X={class:"modal-card max-w-sm"},Y={__name:"UpdateApprovalTime",props:{overtime:Object,onSuccess:{type:Function,default:null}},setup(r){const i=r,x=B(),c=V(!1),u=V(i.overtime.approval_overtime_hours||i.overtime.request_overtime_hours||""),m=async()=>{if(!u.value)return alert("Please set approval time!");await x.updateApprovalTime(i.overtime.id,u.value),i.onSuccess&&await i.onSuccess(),t()},t=()=>{c.value=!1};return(_,o)=>(n(),l(q,null,[e("i",{onClick:o[0]||(o[0]=b=>c.value=!c.value),class:"fa fa-edit cursor-pointer text-sky-600"}),c.value?(n(),l("div",Q,[e("div",X,[o[2]||(o[2]=e("h3",{class:"title-lg"},"Update Approval Time",-1)),o[3]||(o[3]=e("hr",{class:"my-2"},null,-1)),p(K,{modelValue:u.value,"onUpdate:modelValue":o[1]||(o[1]=b=>u.value=b),"minute-interval":5,required:!0,"hour-min":2,"hour-max":16},null,8,["modelValue"]),o[4]||(o[4]=e("hr",{class:"my-2"},null,-1)),e("div",{class:"flex justify-between gap-2 mt-4"},[e("button",{class:"btn-3",onClick:t},"Cancel"),e("button",{class:"btn-2-green",onClick:m},"Update Time")])])])):d("",!0)],64))}},Z={class:"space-y-4"},ee={class:"card-bg p-4 gap-1"},te={class:"flex flex-wrap gap-x-8 gap-y-2"},se={key:0,class:"text-gray-700"},re={class:"ml-1"},oe={key:1,class:"text-gray-700"},ae={class:"ml-1"},ne={key:2,class:"text-gray-700"},le={class:"ml-1"},de={key:3,class:"text-gray-700"},ie={class:"ml-1"},ce={key:4,class:"text-gray-700"},ue={class:"ml-1"},pe={class:"overflow-x-auto"},xe={class:"min-w-full table-auto border-collapse border border-gray-200 bg-white rounded-md text-sm"},be={class:"border border-gray-300 px-2 text-center"},ye={class:"border border-gray-300 px-2 text-center"},ge={class:"border border-gray-300 px-2 text-center"},me={class:"border border-gray-300 px-2 text-center"},_e={class:"border border-gray-300 px-2 text-center"},he={class:"border border-gray-300 px-2 text-center"},fe={class:"border border-gray-300 px-2 text-center"},ve={class:"border border-gray-300 px-2 text-center"},ke={class:"border border-gray-300 px-2 text-center"},we={class:"flex items-center justify-center gap-4"},Se={class:"border border-gray-300 px-2 text-center"},Ae={class:"border border-gray-300 px-2 text-center"},Ce={class:"border border-gray-300 px-2 text-center !py-0.5"},Ne={class:"flex items-center justify-center gap-x-4"},De={key:0,class:"border border-dashed px-4 rounded-xl"},Oe={key:0},Ve={__name:"OvertimeDataList",props:{user:Object,onUpdate:{type:Function,default:null}},setup(r){R(),F(),I();const i=B(),x=M(),c=r,u=async()=>{c.onUpdate?await c.onUpdate():await x.fetchCountNotifications()};return(m,t)=>{var o,b,h,f,v,k,w,S,A,C,N,D,O,U,j;const _=E("RouterLink");return n(),l("div",Z,[e("div",ee,[e("div",te,[(o=r.user)!=null&&o.employee_id?(n(),l("p",se,[t[0]||(t[0]=e("span",{class:"text-gray-400"},"Employee ID:",-1)),e("strong",re,a(((b=r.user)==null?void 0:b.employee_id)||"N/A"),1)])):d("",!0),(h=r.user)!=null&&h.name?(n(),l("p",oe,[t[1]||(t[1]=e("span",{class:"text-gray-400"},"Name:",-1)),e("strong",ae,a((f=r.user)==null?void 0:f.name),1)])):d("",!0),(k=(v=r.user)==null?void 0:v.designation)!=null&&k.title?(n(),l("p",ne,[t[2]||(t[2]=e("span",{class:"text-gray-400"},"Designation:",-1)),e("strong",le,a(((S=(w=r.user)==null?void 0:w.designation)==null?void 0:S.title)||"N/A"),1)])):d("",!0),(C=(A=r.user)==null?void 0:A.department)!=null&&C.name?(n(),l("p",de,[t[3]||(t[3]=e("span",{class:"text-gray-400"},"Department:",-1)),e("strong",ie,a(((D=(N=r.user)==null?void 0:N.department)==null?void 0:D.name)||"N/A"),1)])):d("",!0),(O=r.user)!=null&&O.phone?(n(),l("p",ce,[t[4]||(t[4]=e("span",{class:"text-gray-400"},"Phone:",-1)),e("strong",ue,a((U=r.user)==null?void 0:U.phone),1)])):d("",!0)])]),e("div",pe,[e("table",xe,[t[7]||(t[7]=e("thead",null,[e("tr",{class:"bg-gray-200 *:py-1"},[e("th",{class:"border border-gray-300 px-2 text-center"},"#"),e("th",{class:"border border-gray-300 px-2 text-center"},"Date"),e("th",{class:"border border-gray-300 px-2 text-center"},"Type"),e("th",{class:"border border-gray-300 px-2 text-center"},"Shift"),e("th",{class:"border border-gray-300 px-2 text-center"},"Check-In"),e("th",{class:"border border-gray-300 px-2 text-center"},"Check-Out"),e("th",{class:"border border-gray-300 px-2 text-center"},"Working (hour)"),e("th",{class:"border border-gray-300 px-2 text-center"},"Request (hour)"),e("th",{class:"border border-gray-300 px-2 text-center"},"Approved (hour)"),e("th",{class:"border border-gray-300 px-2 text-center"},"Details"),e("th",{class:"border border-gray-300 px-2 text-center"},"Status"),e("th",{class:"border border-gray-300 px-2 text-center"},"Action")])],-1)),e("tbody",null,[(n(!0),l(q,null,z(y(i).overtimes,(s,L)=>{var T,$,H;return n(),l("tr",{key:s==null?void 0:s.id,class:"border-b border-gray-200 hover:bg-blue-200 *:py-2"},[e("td",be,a(L+1),1),e("td",ye,a(new Date(s.date).toLocaleDateString("en-GB",{day:"2-digit",month:"long",year:"numeric"})),1),e("td",ge,a(s.duty_type),1),e("td",me,a(s.shift),1),e("td",_e,a(s.check_in||"- : -"),1),e("td",he,a(s.check_out||"- : -"),1),e("td",fe,[p(g,{workingHours:s.working_hours},null,8,["workingHours"])]),e("td",ve,[p(g,{workingHours:s.request_overtime_hours},null,8,["workingHours"])]),e("td",ke,[e("div",we,[p(g,{workingHours:s.approval_overtime_hours},null,8,["workingHours"]),($=(T=y(x).applicationApprovalPermissions)==null?void 0:T[s.id])!=null&&$.allow_recommend_by?(n(),G(Y,{key:0,overtime:s,onSuccess:u},null,8,["overtime"])):d("",!0)])]),e("td",Se,a(s.work_details||""),1),e("td",Ae,a(s.status||"Pending"),1),e("td",Ce,[e("div",Ne,[s.approval_overtime_hours&&Object.values(((H=y(x).applicationApprovalPermissions)==null?void 0:H[s.id])||{}).some(P=>P)?(n(),l("div",De,[p(J,{class:"ml-auto",notificationType:"overtime_applications",applicationId:s.id,onSuccess:u,variant:1},null,8,["applicationId"])])):d("",!0),p(_,{to:{name:"MyOvertimeShow",params:{id:s.id}},class:"text-blue-800"},{default:W(()=>t[5]||(t[5]=[e("i",{class:"far fa-eye text-lg"},null,-1)])),_:2,__:[5]},1032,["to"])])])])}),128)),((j=y(i).overtimes)==null?void 0:j.length)===0?(n(),l("tr",Oe,t[6]||(t[6]=[e("td",{colspan:"100",class:"p-2 text-center text-red-500"},"No overtimes found",-1)]))):d("",!0)])])])])}}};export{Ve as _};
