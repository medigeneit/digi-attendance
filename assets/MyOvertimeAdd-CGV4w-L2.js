import{u as O,b as M,d as B,r as v,e as C,c as o,o as l,a as t,p as L,w as U,g as b,h as r,v as c,B as x,t as u,F as w,q as T,k as f}from"./index-BIgT6kYM.js";import{L as A}from"./LoaderView-BwIZosFA.js";import{u as F}from"./attendance-Q4N4cGoE.js";import{u as I}from"./department-jIY0c7j-.js";import{u as R}from"./overtime-m7bSpuGj.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const H={class:"max-w-2xl mx-auto p-4 space-y-4"},N={key:0,class:"text-center"},W={class:"grid grid-cols-2 gap-4"},j=["max"],$={class:"grid grid-cols-2 gap-4"},E={class:"input-1 w-full text-center"},Y={class:"input-1 w-full text-center"},z={class:"grid grid-cols-2 gap-4"},G=["label"],J=["value"],K={key:0,class:"text-red-500 text-sm"},ae={__name:"MyOvertimeAdd",setup(P){const g=O(),k=M(),_=I(),d=R(),y=F(),n=B(),S=v(!1),m=v({}),a=v({date:k.query.date||"",duty_type:"",request_overtime_hours:"",assigned_in_charge_user_id:"",work_details:""}),p=async()=>{await y.getMonthlyAttendanceByShift(n.user.id,D(a.value.date)),m.value=await y.getUserDailyLogsByDate(n.user.id,a.value.date)},D=i=>{const e=new Date(i),s=e.getFullYear(),V=String(e.getMonth()+1).padStart(2,"0");return`${s}-${V}`},h=()=>{g.go(-1)},q=async()=>{await d.createOvertime(a.value),g.push({name:"MyOvertimeList"})};return C(async()=>{var i;(i=n.user)!=null&&i.id||await n.fetchUser(),a.value.date&&await p(),await _.fetchDepartments("all")}),(i,e)=>(l(),o("div",H,[t("div",{class:"flex items-center justify-between gap-2"},[t("button",{class:"btn-3",onClick:h},e[5]||(e[5]=[t("i",{class:"far fa-arrow-left"},null,-1),t("span",{class:"hidden md:flex"},"Back",-1)])),e[6]||(e[6]=t("h1",{class:"title-md md:title-lg flex-wrap text-center"},"Overtime Request Form",-1))]),S.value?(l(),o("div",N,[L(A)])):(l(),o("form",{key:1,onSubmit:U(q,["prevent"]),class:"space-y-4 card-bg md:p-8 p-4 text-sm md:text-base"},[t("div",W,[t("div",null,[e[7]||(e[7]=t("label",{for:"date",class:"block text-sm font-medium"},"Date",-1)),r(t("input",{onChange:p,type:"date",id:"date","onUpdate:modelValue":e[0]||(e[0]=s=>a.value.date=s),class:"input-1 w-full",required:"",max:new Date(Date.now()-864e5).toISOString().split("T")[0]},null,40,j),[[c,a.value.date]])]),t("div",null,[e[9]||(e[9]=t("label",{for:"duty_type",class:"block text-sm font-medium"},"Duty Type",-1)),r(t("select",{id:"duty_type","onUpdate:modelValue":e[1]||(e[1]=s=>a.value.duty_type=s),class:"input-1 w-full",required:""},e[8]||(e[8]=[t("option",{value:"",selected:"",disabled:""},"--Duty Type--",-1),t("option",{value:"WL"},"WL",-1),t("option",{value:"HD"},"HD",-1),t("option",{value:"OVT"},"OVT",-1)]),512),[[x,a.value.duty_type]])])]),t("div",$,[t("div",null,[e[10]||(e[10]=t("span",{class:"block text-sm font-medium"},"Check In",-1)),t("div",E,u(m.value.entry_time||"--:--"),1)]),t("div",null,[e[11]||(e[11]=t("span",{class:"block text-sm font-medium"},"Check Out",-1)),t("div",Y,u(m.value.exit_time||"--:--"),1)])]),t("div",z,[t("div",null,[e[12]||(e[12]=t("label",{for:"request_overtime_hours",class:"block text-sm font-medium"}," Overtime (Hour) ",-1)),r(t("input",{onChange:p,type:"number",id:"request_overtime_hours","onUpdate:modelValue":e[2]||(e[2]=s=>a.value.request_overtime_hours=s),class:"input-1 w-full",required:""},null,544),[[c,a.value.request_overtime_hours]])]),t("div",null,[e[14]||(e[14]=t("label",{for:"assigned_in_charge_user_id",class:"block text-sm font-medium"}," In-Charge ",-1)),r(t("select",{id:"assigned_in_charge_user_id","onUpdate:modelValue":e[3]||(e[3]=s=>a.value.assigned_in_charge_user_id=s),class:"input-1 w-full",required:""},[e[13]||(e[13]=t("option",{value:"",selected:"",disabled:""},"--In-Charge--",-1)),(l(!0),o(w,null,T(f(_).departments,s=>(l(),o(w,{key:s.id},[s.in_charge?(l(),o("optgroup",{key:0,label:s.name},[t("option",{value:s.in_charge.id},u(s.in_charge.name),9,J)],8,G)):b("",!0)],64))),128))],512),[[x,a.value.assigned_in_charge_user_id]])])]),t("div",null,[e[15]||(e[15]=t("label",{for:"assigned_in_charge_user_id",class:"block text-sm font-medium"}," Details (Reason / Work description) ",-1)),r(t("textarea",{rows:"4","onUpdate:modelValue":e[4]||(e[4]=s=>a.value.work_details=s),class:"input-1 w-full"},null,512),[[c,a.value.work_details]])]),e[16]||(e[16]=t("hr",null,null,-1)),f(d).error?(l(),o("div",K,u(f(d).error),1)):b("",!0),e[17]||(e[17]=t("div",{class:"flex justify-center"},[t("button",{type:"submit",class:"btn-2"},"Submit")],-1))],32))]))}};export{ae as default};
