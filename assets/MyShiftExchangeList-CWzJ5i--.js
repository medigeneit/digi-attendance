import{L as q}from"./LoaderView-BVOxuvDg.js";import{u as $,g,r as F,x as m,q as z,p as P,c as r,o as l,a as t,d as i,m as A,b as n,n as C,t as d,F as T,e as G,s as U,k as Y}from"./index-DEeuvDkH.js";import{u as H}from"./exchange-fHqF3x7h.js";import{_ as I}from"./FlexibleDatePicker-CZMI2nXA.js";const J={class:"space-y-6 px-4 py-5"},K={class:"rounded-2xl border border-slate-200 bg-white px-4 py-4 shadow-sm md:px-6"},O={class:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between"},Q={class:"flex flex-wrap items-center gap-2"},W={class:"flex items-center gap-2"},X={key:0,class:"text-center py-10"},Z={key:1,class:"space-y-4"},tt={key:0,class:"rounded-2xl border border-dashed border-slate-300 bg-slate-50 p-6 text-center text-slate-600"},et={key:1,class:"rounded-2xl border border-slate-200 bg-white shadow-sm"},st={class:"flex items-center justify-between border-b border-slate-100 px-5 py-3"},ot={class:"text-sm font-semibold text-slate-600"},rt={class:"overflow-x-auto"},lt={class:"min-w-full divide-y divide-slate-100 text-sm"},dt={class:"divide-y divide-slate-100"},at={class:"px-4 py-3 font-semibold text-slate-600"},it={class:"px-4 py-3 text-slate-700"},nt={class:"px-4 py-3 text-slate-700"},pt={class:"px-4 py-3 text-slate-700"},ut={class:"px-4 py-3 text-slate-700"},ft={class:"px-4 py-3"},mt=["href"],ct={key:1,class:"text-xs text-slate-400"},yt={class:"px-4 py-3"},bt={class:"px-4 py-3"},xt={class:"flex items-center justify-end gap-2"},_t=["onClick"],vt="shift",Ct={__name:"MyShiftExchangeList",setup(ht){const V=$(),a=H(),D=g(),p=new Date,u=F({year:p.getFullYear(),month:p.getMonth()+1,day:p.getDate()}),c=m(()=>{const o=u.value||{};return!o.year||!o.month?"":`${o.year}-${B(o.month)}`}),L=()=>{a.fetchExchanges({payload:{type:vt,date:c.value}})};function N(o){confirm("Are you sure you want to delete this application?")&&a.deleteExchange(o)}const y=o=>o?new Date(o).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):"N/A",B=o=>o.toString().padStart(2,"0"),f=m(()=>a.exchanges||[]),b=m(()=>Array.isArray(f.value)?f.value.length:0);z(c,o=>{o&&(a.selectedMonth=o,L())},{immediate:!0});const R=o=>{const s=(o||"").toLowerCase();return["approved","accepted"].includes(s)?"border border-emerald-200 bg-emerald-50 text-emerald-700":["rejected","declined","cancelled"].includes(s)?"border border-red-200 bg-red-50 text-red-700":s==="pending"||!s?"border border-amber-200 bg-amber-50 text-amber-800":"border border-slate-200 bg-slate-50 text-slate-800"},M=()=>{V.go(-1)};return(o,s)=>{var _;const x=P("RouterLink");return l(),r("div",J,[t("div",K,[t("div",O,[t("div",null,[t("button",{class:"btn-3 order-2 md:order-1",onClick:M},s[1]||(s[1]=[t("i",{class:"far fa-arrow-left"},null,-1),t("span",{class:"hidden md:inline-flex"},"Back",-1)]))]),s[3]||(s[3]=t("div",{class:"space-y-1"},[t("p",{class:"text-2xl font-semibold text-slate-900"},"Shift Exchanges Records")],-1)),t("div",Q,[i(x,{to:{name:"ShiftExchangeAdd"},class:"btn-2 order-1 md:order-2"},{default:A(()=>s[2]||(s[2]=[t("i",{class:"far fa-plus mr-1"},null,-1),n(" Request Shift Exchange ")])),_:1,__:[2]}),t("div",W,[i(I,{modelValue:u.value,"onUpdate:modelValue":s[0]||(s[0]=e=>u.value=e),"show-year":!1,"show-month":!0,"show-date":!1,label:"Moth"},null,8,["modelValue"])])])])]),(_=C(a))!=null&&_.loading?(l(),r("div",X,[i(q)])):(l(),r("div",Z,[b.value===0?(l(),r("div",tt,s[4]||(s[4]=[t("p",{class:"text-lg font-semibold text-slate-800"},"No exchanges yet",-1),t("p",{class:"text-sm text-slate-500"},"Try changing the month or create a new request",-1)]))):(l(),r("div",et,[t("div",st,[t("p",ot,"Showing "+d(b.value)+" records",1),s[5]||(s[5]=t("span",{class:"text-xs text-slate-500"},"Auto-updated",-1))]),t("div",rt,[t("table",lt,[s[9]||(s[9]=t("thead",{class:"bg-slate-50 text-[11px] uppercase tracking-wider text-slate-500"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left"},"#"),t("th",{class:"px-4 py-3 text-left"},"Created Date"),t("th",{class:"px-4 py-3 text-left"},"Exchange"),t("th",{class:"px-4 py-3 text-left"},"Current Shift"),t("th",{class:"px-4 py-3 text-left"},"Requested Shift"),t("th",{class:"px-4 py-3 text-left"},"Attachment"),t("th",{class:"px-4 py-3 text-left"},"Status"),t("th",{class:"px-4 py-3 text-right"},"Actions")])],-1)),t("tbody",dt,[(l(!0),r(T,null,G(f.value,(e,j)=>{var v,h,w,k,S,E;return l(),r("tr",{key:e==null?void 0:e.id,class:"hover:bg-slate-50 transition"},[t("td",at,d(j+1),1),t("td",it,d(y(e==null?void 0:e.created_at)),1),t("td",nt,d(y(e==null?void 0:e.exchange_date)),1),t("td",pt,d(((v=e==null?void 0:e.current_shift)==null?void 0:v.name)||((S=(k=(w=(h=C(D))==null?void 0:h.user)==null?void 0:w.current_shift)==null?void 0:k.shift)==null?void 0:S.name)),1),t("td",ut,d(((E=e==null?void 0:e.shift)==null?void 0:E.name)||"N/A"),1),t("td",ft,[e!=null&&e.attachment&&typeof(e==null?void 0:e.attachment)=="string"?(l(),r("a",{key:0,href:e.attachment,target:"_blank",class:"inline-flex items-center gap-1 text-xs font-semibold text-indigo-600 hover:underline"},s[6]||(s[6]=[t("i",{class:"far fa-paperclip"},null,-1),n(" View ")]),8,mt)):(l(),r("span",ct,"None"))]),t("td",yt,[t("span",{class:U(["inline-flex items-center rounded-full px-3 py-1 text-[11px] font-semibold tracking-wide",R(e==null?void 0:e.status)])},d((e==null?void 0:e.status)||"Pending"),3)]),t("td",bt,[t("div",xt,[i(x,{to:{name:"ExchangeShiftShow",params:{id:e==null?void 0:e.id}},class:"inline-flex items-center rounded-full border border-slate-200 px-3 py-1.5 text-xs font-semibold text-slate-600 transition hover:border-indigo-200 hover:text-indigo-700"},{default:A(()=>s[7]||(s[7]=[t("i",{class:"far fa-eye mr-1"},null,-1),n(" View ")])),_:2,__:[7]},1032,["to"]),e.status=="Pending"||!e.status?(l(),r("button",{key:0,type:"button",onClick:wt=>N(e==null?void 0:e.id),class:"inline-flex items-center rounded-full border border-red-200 px-3 py-1.5 text-xs font-semibold text-red-600 transition hover:border-red-300 hover:text-red-700"},s[8]||(s[8]=[t("i",{class:"far fa-trash mr-1"},null,-1),n(" Delete ")]),8,_t)):Y("",!0)])])])}),128))])])])]))]))])}}};export{Ct as default};
