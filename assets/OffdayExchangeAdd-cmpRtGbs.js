import{u as S,r as p,b as V,c as n,a as t,l as w,m as U,w as q,t as v,h as b,d as r,v as u,A as B,F as D,x as H,e as L,n as O,o as l,k as R,g as A}from"./index-C8Yu7mJH.js";import{L as C}from"./LoaderView-CFPs4lfW.js";import{u as M}from"./exchange-D7Htd0NN.js";import{u as N}from"./user-jeaf6_Fg.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const F={class:"max-w-3xl mx-auto p-4 space-y-4"},W={class:"flex items-center justify-between gap-2"},j={key:0,class:"text-center"},T={class:"title-lg text-center"},z=["value"],G={key:0,class:"text-red-500 text-sm"},Y={__name:"OffdayExchangeAdd",setup(I){const c=A(),h=M(),x=N(),o=S(),s=p({exchange_type:"offday",current_date:"",exchange_date:"",works_in_hand:"",handover_user_id:""}),i=p(!1),d=p(null),E=async()=>{var m;i.value=!0,d.value=null;try{const e={user_id:(m=o==null?void 0:o.user)==null?void 0:m.id,...s.value},f=await h.createExchange(e);c.push({name:"ExchangeShow",params:{id:f.id}})}catch(e){d.value=e.message||"Failed to submit offday exchange request"}finally{i.value=!1}};V(()=>{x.fetchDepartmentWiseEmployees(),o.fetchUser()});const _=()=>{c.go(-1)};return(m,e)=>{var g,k,y;const f=O("RouterLink");return l(),n("div",F,[t("div",W,[t("button",{class:"btn-3",onClick:_},e[5]||(e[5]=[t("i",{class:"far fa-arrow-left"},null,-1),t("span",{class:"hidden md:flex"},"Back",-1)])),e[7]||(e[7]=t("h1",{class:"title-md md:title-lg flex-wrap text-center"},"Offday Exchange Request",-1)),t("div",null,[w(f,{to:"/",class:"btn-2"},{default:U(()=>e[6]||(e[6]=[R("Home")])),_:1})])]),i.value?(l(),n("div",j,[w(C)])):(l(),n("form",{key:1,onSubmit:q(E,["prevent"]),class:"space-y-4 card-bg md:p-8 p-4"},[t("div",null,[t("h4",T,v((y=(k=(g=b(o))==null?void 0:g.user)==null?void 0:k.company)==null?void 0:y.name),1),e[8]||(e[8]=t("p",{class:"text-center"},"Offday Exchange Application",-1))]),t("div",null,[e[9]||(e[9]=t("label",{for:"current-date",class:"block text-sm font-medium"},"Holiday/Weekend (Date)",-1)),r(t("input",{type:"date",id:"current-date","onUpdate:modelValue":e[0]||(e[0]=a=>s.value.current_date=a),class:"input-1 w-full",required:""},null,512),[[u,s.value.current_date]])]),t("div",null,[e[10]||(e[10]=t("label",{for:"exchange-date",class:"block text-sm font-medium"},"Exchange Date",-1)),r(t("input",{type:"date",id:"exchange-date","onUpdate:modelValue":e[1]||(e[1]=a=>s.value.exchange_date=a),class:"input-1 w-full",required:""},null,512),[[u,s.value.exchange_date]])]),t("div",null,[e[11]||(e[11]=t("label",{for:"works-in-hand",class:"block text-sm font-medium"},"Reason",-1)),r(t("textarea",{id:"works-in-hand","onUpdate:modelValue":e[2]||(e[2]=a=>s.value.reason=a),class:"input-1 w-full",placeholder:"Enter details of reason"},null,512),[[u,s.value.reason]])]),t("div",null,[e[12]||(e[12]=t("label",{for:"works-in-hand",class:"block text-sm font-medium"},"Works in Hand (Optional)",-1)),r(t("textarea",{id:"works-in-hand","onUpdate:modelValue":e[3]||(e[3]=a=>s.value.works_in_hand=a),class:"input-1 w-full",placeholder:"Enter details of works in hand"},null,512),[[u,s.value.works_in_hand]])]),t("div",null,[e[14]||(e[14]=t("label",{for:"handover-user",class:"block text-sm font-medium"},"Handover User",-1)),r(t("select",{id:"handover-user","onUpdate:modelValue":e[4]||(e[4]=a=>s.value.handover_user_id=a),class:"input-1 w-full",required:""},[e[13]||(e[13]=t("option",{value:""},"Select Handover User",-1)),(l(!0),n(D,null,H(b(x).users,a=>(l(),n("option",{key:a.id,value:a.id},v(a.name),9,z))),128))],512),[[B,s.value.handover_user_id]])]),d.value?(l(),n("div",G,v(d.value),1)):L("",!0),e[15]||(e[15]=t("div",{class:"flex justify-center"},[t("button",{type:"submit",class:"btn-2"},"Submit")],-1))],32))])}}};export{Y as default};
