import{C as $,r as p,x as d,D as c}from"./index-BZzCzCQa.js";const x=$("department",()=>{const m=p([]),u=p([]),v=p(null),n=p(!1),l=p(null),i=async(a=null)=>{var r,t;n.value=!0,l.value=null;try{const e=await c.get("/departments",{params:{company_id:a}});u.value=e.data}catch(e){l.value=((t=(r=e.response)==null?void 0:r.data)==null?void 0:t.message)||"ডিপার্টমেন্ট লোড করতে ব্যর্থ হয়েছে।",console.error("Error fetching departments:",e)}finally{n.value=!1}},f=async a=>{var r,t;n.value=!0,l.value=null;try{const e=await c.get(`/departments/${a}`);v.value=e.data}catch(e){l.value=((t=(r=e.response)==null?void 0:r.data)==null?void 0:t.message)||`ডিপার্টমেন্ট (ID: ${a}) লোড করতে ব্যর্থ হয়েছে।`,console.error(`Error fetching department with id ${a}:`,e)}finally{n.value=!1}},y=async a=>{var r,t,e,o;n.value=!0,l.value=null;try{const s=await c.get("department-employees",{params:{department_ids:a}});return m.value=(r=s==null?void 0:s.data)==null?void 0:r.employees,(t=s==null?void 0:s.data)==null?void 0:t.employees}catch(s){l.value=((o=(e=s.response)==null?void 0:e.data)==null?void 0:o.message)||"ডিপার্টমেন্ট লোড করতে ব্যর্থ হয়েছে।",console.error("Error fetching department with id:",s)}finally{n.value=!1}},g=async a=>{var r,t;n.value=!0,l.value=null;try{const e=await c.post("/departments",a);return u.value.push(e.data),e.data}catch(e){l.value=((t=(r=e.response)==null?void 0:r.data)==null?void 0:t.message)||"ডিপার্টমেন্ট তৈরি করতে ব্যর্থ হয়েছে।",console.error("Error creating department:",e)}finally{n.value=!1}},h=async(a,r)=>{var t,e;n.value=!0,l.value=null;try{const o=await c.put(`/departments/${a}`,r),s=u.value.findIndex(w=>w.id===a);return s!==-1&&(u.value[s]=o.data),o.data}catch(o){l.value=((e=(t=o.response)==null?void 0:t.data)==null?void 0:e.message)||`ডিপার্টমেন্ট (ID: ${a}) আপডেট করতে ব্যর্থ হয়েছে।`,console.error(`Error updating department with id ${a}:`,o)}finally{n.value=!1}},D=async a=>{var r,t;n.value=!0,l.value=null;try{await c.delete(`/departments/${a}`),u.value=u.value.filter(e=>e.id!==a)}catch(e){l.value=((t=(r=e.response)==null?void 0:r.data)==null?void 0:t.message)||`ডিপার্টমেন্ট (ID: ${a}) মুছতে ব্যর্থ হয়েছে।`,console.error(`Error deleting department with id ${a}:`,e)}finally{n.value=!1}};return{departments:d(()=>u.value),department:d(()=>v.value),loading:d(()=>n.value),error:d(()=>l.value),employees:m,fetchDepartmentEmployee:y,fetchDepartments:i,fetchDepartment:f,createDepartment:g,updateDepartment:h,deleteDepartment:D}});export{x as u};
