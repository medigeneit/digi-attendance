import{P as S,r as y,Q as c}from"./index-D8GnOTNu.js";const b=S("userMonthlyKpi",()=>{const f=y([]),r=y({items:[],observations:[],monthly_target:"",target:{max_score:0,incharge_score:0,coordinator_score:0,final_score:0}}),v=y(!1),o=y(!1),n=y(null),i=e=>{var l,a;return((a=(l=e==null?void 0:e.response)==null?void 0:l.data)==null?void 0:a.message)||(e==null?void 0:e.message)||"Something went wrong"};async function h(e={}){var l;v.value=!0,n.value=null;try{const a=await c.get("/user-monthly-kpi",{params:e});f.value=((l=a==null?void 0:a.data)==null?void 0:l.data)||[]}catch(a){throw n.value=i(a),a}finally{v.value=!1}}async function d(e,l){var a;o.value=!0,n.value=null;try{const t=await c.post("/user-monthly-kpi",{user_id:e,monthly_kpi_form_id:l});return r.value=((a=t==null?void 0:t.data)==null?void 0:a.data)||(t==null?void 0:t.data),r.value}catch(t){throw n.value=i(t),t}finally{o.value=!1}}async function p(e){var l;v.value=!0,n.value=null;try{console.log({id:e});const a=await c.get(`/user-monthly-kpi/${e}`);return r.value=((l=a==null?void 0:a.data)==null?void 0:l.data)||(a==null?void 0:a.data),r.value}catch(a){throw n.value=i(a),a}finally{v.value=!1}}async function w(e,l){var a;o.value=!0,n.value=null;try{const t=await c.put(`/user-monthly-kpi/${e}`,{monthly_target:l});return r.value=((a=t==null?void 0:t.data)==null?void 0:a.data)||(t==null?void 0:t.data),r.value}catch(t){throw n.value=i(t),t}finally{o.value=!1}}async function g(e){var l;o.value=!0,n.value=null;try{const a=await c.post(`/user-monthly-kpi/${e}/finalize`);return r.value=((l=a==null?void 0:a.data)==null?void 0:l.data)||(a==null?void 0:a.data),r.value}catch(a){throw n.value=i(a),a}finally{o.value=!1}}async function m(e,l,a,t,u=""){o.value=!0;try{const{data:s}=await c.post(`/evaluations/${e}/scores/${l}/rate`,{role:a,score:t,comment:u});return s}finally{o.value=!1}}async function k(e,l,a){var t;o.value=!0,n.value=null;try{const u=await c.post(`/user-monthly-kpi/${e}/observations`,{role:l,observation:a});return((t=u==null?void 0:u.data)==null?void 0:t.data)||(u==null?void 0:u.data)}catch(u){throw n.value=i(u),u}finally{o.value=!1}}async function $(e,l,a,t=""){var u;o.value=!0,n.value=null;try{const s=await c.put(`/user-monthly-kpi/${e}/target/rate`,{role:l,score:a,comment:t});return r.value=((u=s==null?void 0:s.data)==null?void 0:u.data)||(s==null?void 0:s.data),r.value}catch(s){throw n.value=i(s),s}finally{o.value=!1}}return{list:f,current:r,isLoading:v,isSaving:o,error:n,fetchList:h,create:d,show:p,updateTarget:w,finalize:g,rateScore:m,saveObservation:k,rateTarget:$}});export{b as u};
