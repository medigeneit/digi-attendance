import{u as W,r as F,p as z,b as I,q as O,c as d,a as t,t as r,d as G,v as J,k as a,h as n,j as h,F as K,x as Q,g as X,o,y as m,e as _,m as q,n as Y}from"./index-C1TSW4cY.js";import{L as Z}from"./LoaderView-t5OrigDd.js";import{u as tt}from"./attendance-C1OTWhQw.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const et={class:"px-4 space-y-4"},st={class:"md:flex items-center justify-between gap-2"},rt={class:"title-lg md:title-lg flex-wrap text-center"},at={class:"flex gap-4"},nt={class:"grid md:grid-cols-2 gap-4 text-sm"},lt={class:"card-bg p-4 gap-1"},ot={class:"grid md:grid-cols-2"},it={class:"card-bg p-4 gap-1"},dt={class:"grid md:grid-cols-2"},ut={key:1,class:"space-y-4"},pt={class:"overflow-x-auto card-bg"},_t={class:"min-w-full table-auto border-collapse border border-gray-300 bg-white"},mt={class:"text-center text-xs"},yt={class:"border px-1 py-0.5"},ct={class:"border px-1 py-0.5"},ht=["title"],vt=["title"],ft=["title"],bt={class:"border px-1 py-0.5"},xt={key:0},kt={key:0},gt=["title"],wt={key:0},At={key:0},Dt=["title"],Et={__name:"MyAttendance",setup(St){const v=X(),i=W(),l=tt(),u=F(l.selectedMonth),H=z(()=>{if(!u.value)return"";const[p,e]=u.value.split("-");return new Date(p,e-1).toLocaleDateString("en-US",{month:"long",year:"numeric"})}),y=async()=>{var p;(p=i.user)!=null&&p.id&&u.value&&await l.getMonthlyAttendanceByShift(i.user.id,u.value)};I(async()=>{i.isAuthenticated?(await i.fetchUser(),y()):v.push("/login")}),O(u,async p=>{l.selectedMonth=p,await y()});const R=()=>v.go(-1);return(p,e)=>{var f,b,x,k,g,w,A,D,S,L,M,B,C,E,T,N,P,V,j,U,$;const c=Y("router-link");return o(),d("div",et,[t("div",st,[t("button",{class:"btn-3",onClick:R},e[1]||(e[1]=[t("i",{class:"far fa-arrow-left"},null,-1),t("span",{class:"hidden md:flex"},"Back",-1)])),t("h1",rt," My Attendance of "+r(H.value),1),t("div",at,[t("div",null,[G(t("input",{id:"monthSelect",type:"month","onUpdate:modelValue":e[0]||(e[0]=s=>u.value=s),onChange:y,class:"input-1"},null,544),[[J,u.value]])])])]),t("div",nt,[t("div",lt,[e[8]||(e[8]=t("h2",{class:"title-md"},"User Info",-1)),e[9]||(e[9]=t("hr",null,null,-1)),t("div",ot,[t("p",null,[e[2]||(e[2]=t("strong",null,"Name:",-1)),a(" "+r((f=n(i).user)==null?void 0:f.name),1)]),t("p",null,[e[3]||(e[3]=t("strong",null,"Designation:",-1)),a(" "+r((b=n(i).user)==null?void 0:b.designation.title),1)]),t("p",null,[e[4]||(e[4]=t("strong",null,"Department:",-1)),a(" "+r((k=(x=n(i).user)==null?void 0:x.department)==null?void 0:k.name),1)]),t("p",null,[e[5]||(e[5]=t("strong",null,"Company:",-1)),a(" "+r((w=(g=n(i).user)==null?void 0:g.company)==null?void 0:w.name),1)]),t("p",null,[e[6]||(e[6]=t("strong",null,"Phone:",-1)),a(" "+r((A=n(i).user)==null?void 0:A.phone),1)]),t("p",null,[e[7]||(e[7]=t("strong",null,"Email:",-1)),a(" "+r((D=n(i).user)==null?void 0:D.email),1)])])]),t("div",it,[e[16]||(e[16]=t("h2",{class:"title-md"},"Attendance Summary",-1)),e[17]||(e[17]=t("hr",null,null,-1)),t("div",dt,[t("p",null,[e[10]||(e[10]=t("strong",null,"Total Working Days:",-1)),a(" "+r((L=(S=n(l))==null?void 0:S.summary)==null?void 0:L.total_working_days),1)]),t("p",null,[e[11]||(e[11]=t("strong",null,"Present Days:",-1)),a(" "+r((B=(M=n(l))==null?void 0:M.summary)==null?void 0:B.total_present_days),1)]),t("p",null,[e[12]||(e[12]=t("strong",null,"Absent Days:",-1)),a(" "+r((E=(C=n(l))==null?void 0:C.summary)==null?void 0:E.total_absent_days),1)]),t("p",null,[e[13]||(e[13]=t("strong",null,"Late Days:",-1)),a(" "+r((N=(T=n(l))==null?void 0:T.summary)==null?void 0:N.total_late_days),1)]),t("p",null,[e[14]||(e[14]=t("strong",null,"Total Working Hours:",-1)),a(" "+r((V=(P=n(l))==null?void 0:P.summary)==null?void 0:V.total_working_hours),1)]),t("p",null,[e[15]||(e[15]=t("strong",null,"Total Overtime Hours:",-1)),a(" "+r((U=(j=n(l))==null?void 0:j.summary)==null?void 0:U.total_overtime_hours),1)])])])]),n(l).isLoading?(o(),h(Z,{key:0})):(o(),d("div",ut,[t("div",pt,[t("table",_t,[e[20]||(e[20]=t("thead",null,[t("tr",{class:"bg-gray-200 text-xs"},[t("th",{class:"border p-1"},"Date"),t("th",{class:"border p-1"},"Day"),t("th",{class:"border p-1"},"Shift"),t("th",{class:"border p-1"},"Entry Time"),t("th",{class:"border p-1"},"Exit Time"),t("th",{class:"border p-1"},"Working Hours"),t("th",{class:"border p-1"},"Late Entry"),t("th",{class:"border p-1"},"Early Leave"),t("th",{class:"border p-1"},"Status")])],-1)),t("tbody",mt,[(o(!0),d(K,null,Q(($=n(l))==null?void 0:$.monthlyLogs,s=>(o(),d("tr",{key:s==null?void 0:s.date,class:"hover:border-b-2 hover:border-gray-200 hover:bg-blue-200"},[t("td",yt,r(s.date),1),t("td",ct,r(s.weekday),1),t("td",{class:"border px-1 py-0.5",title:`${s.shift_start_time} to ${s.shift_end_time}`},r(s.shift_name),9,ht),t("td",{class:"border px-1 py-0.5",title:`Device: ${s.entry_device}`},r(s.entry_time),9,vt),t("td",{class:"border px-1 py-0.5",title:`Device: ${s.exit_device}`},r(s.exit_time),9,ft),t("td",bt,r(s.working_hours),1),t("td",{class:m(["border px-1 py-0.5",{"bg-red-100":s.late_duration}])},[s.late_duration?(o(),d("div",xt,[a(r(s.late_duration)+" ",1),s.first_short_leave?(o(),d("span",kt,[t("i",{class:m({"fas fa-check-circle text-green-500":s.first_short_leave==="Approved","fas fa-hourglass-half text-yellow-500":s.first_short_leave==="Pending","fas fa-times-circle text-red-500":s.first_short_leave==="Rejected"}),title:s.first_short_leave},null,10,gt)])):_("",!0),s.late_duration&&!s.first_short_leave?(o(),h(c,{key:1,to:{name:"ShortLeaveAdd",query:{type:"Delay",start_time:s.shift_start_time,end_time:s.entry_time}},class:"btn-link"},{default:q(()=>e[18]||(e[18]=[a(" (Apply) ")])),_:2},1032,["to"])):_("",!0)])):_("",!0)],2),t("td",{class:m(["border px-1 py-0.5",{"bg-red-100":s.early_leave_duration}])},[s.early_leave_duration?(o(),d("div",wt,[a(r(s.early_leave_duration)+" ",1),s.last_short_leave?(o(),d("span",At,[t("i",{class:m({"fas fa-check-circle text-green-500":s.last_short_leave==="Approved","fas fa-hourglass-half text-yellow-500":s.last_short_leave==="Pending","fas fa-times-circle text-red-500":s.last_short_leave==="Rejected"}),title:s.last_short_leave},null,10,Dt)])):_("",!0),s.early_leave_duration&&!s.last_short_leave?(o(),h(c,{key:1,to:{name:"ShortLeaveAdd",query:{type:"Early",start_time:s.exit_time,end_time:s.shift_end_time}},class:"btn-link"},{default:q(()=>e[19]||(e[19]=[a(" (Apply) ")])),_:2},1032,["to"])):_("",!0)])):_("",!0)],2),t("td",{class:m(["border px-1 py-0.5",{"text-red-600":s.status==="Absent","text-green-600":s.status==="Present"}])},r(s.status),3)]))),128))])])])]))])}}};export{Et as default};
