import{u as w,r as p,D as _,h as D,q as S,c as n,o as d,a as e,j as C,l as b,G as A,F as h,e as x,t as a,n as l,v as L,s as c}from"./index-Bkkl4RUI.js";import{L as T}from"./LoaderView-jnYKEdD8.js";import{u as B}from"./attendance-H6Nw567L.js";import{u as E}from"./company-UWq4rV_6.js";const R={class:"px-4 space-y-4"},M={class:"flex gap-4"},V=["value"],$={key:1,class:"space-y-4"},g={class:"overflow-x-auto card-bg"},j={class:"min-w-full table-auto border-collapse border border-gray-300 bg-white"},F={class:"text-center text-xs"},N={class:"border px-1 py-0.5"},U={class:"border px-1 py-0.5"},W={class:"border px-1 py-0.5"},q=["title"],z=["title"],G=["title"],H={class:"border px-1 py-0.5"},I={class:"border px-1 py-0.5"},P={class:"border px-1 py-0.5"},Z={__name:"MonthlyAttendanceReport",setup(J){const v=w(),u=E(),r=B(),o=p(""),y=p(""),{companies:f}=_(u),{dailyLogs:m}=_(r),i=async()=>{o.value&&await r.getTodayAttendanceReport(o.value,r.selectedDate)};D(async()=>{await u.fetchCompanies(),await r.getTodayAttendanceReport(o.value,r.selectedDate)}),S([o,y],i);const k=()=>v.go(-1);return(K,s)=>(d(),n("div",R,[e("div",{class:"flex items-center justify-between gap-2"},[e("button",{class:"btn-3",onClick:k},s[2]||(s[2]=[e("i",{class:"far fa-arrow-left"},null,-1),e("span",{class:"hidden md:flex"},"Back",-1)])),s[3]||(s[3]=e("h1",{class:"title-md md:title-lg flex-wrap text-center"},"Today Attendance Report",-1)),s[4]||(s[4]=e("div",null,null,-1))]),e("div",M,[e("div",null,[b(e("select",{id:"userSelect","onUpdate:modelValue":s[0]||(s[0]=t=>o.value=t),onChange:i,class:"input-1"},[s[5]||(s[5]=e("option",{value:"",disabled:""},"Select a Company",-1)),(d(!0),n(h,null,x(l(f),t=>(d(),n("option",{key:t==null?void 0:t.id,value:t==null?void 0:t.id},a(t==null?void 0:t.name),9,V))),128))],544),[[A,o.value]])]),e("div",null,[b(e("input",{type:"date","onUpdate:modelValue":s[1]||(s[1]=t=>l(r).selectedDate=t),onChange:i,class:"input-1"},null,544),[[L,l(r).selectedDate]])])]),l(r).isLoading?(d(),C(T,{key:0})):(d(),n("div",$,[e("div",g,[e("table",j,[s[6]||(s[6]=e("thead",null,[e("tr",{class:"bg-gray-200 text-xs"},[e("th",{class:"border p-1"},"Emp/Worker Name"),e("th",{class:"border p-1"},"Date"),e("th",{class:"border p-1"},"Day"),e("th",{class:"border p-1"},"Shift"),e("th",{class:"border p-1"},"Entry Time"),e("th",{class:"border p-1"},"Exit Time"),e("th",{class:"border p-1"},"Working Hours"),e("th",{class:"border p-1"},"Late Entry"),e("th",{class:"border p-1"},"Early Leave"),e("th",{class:"border p-1"},"Status")])],-1)),e("tbody",F,[(d(!0),n(h,null,x(l(m),t=>(d(),n("tr",{key:t==null?void 0:t.date,class:"border-b border-gray-200 hover:bg-blue-200"},[e("td",N,a(t.user_name),1),e("td",U,a(t.date),1),e("td",W,a(t.weekday),1),e("td",{class:"border px-1 py-0.5",title:`${t.shift_start_time} to ${t.shift_end_time}`},a(t.shift_name),9,q),e("td",{class:c(["border px-1 py-0.5",{"bg-red-200":t.late_duration}]),title:`Device: ${t.entry_device}`},a(t.entry_time),11,z),e("td",{class:c(["border px-1 py-0.5",{"bg-red-200":t.early_leave_duration}]),title:`Device: ${t.exit_device}`},a(t.exit_time),11,G),e("td",H,a(t.working_hours),1),e("td",I,a(t.late_duration),1),e("td",P,a(t.early_leave_duration),1),e("td",{class:c(["border px-1 py-0.5",{"text-red-600":t.status==="Absent","text-green-600":t.status==="Present"}])},a(t.status),3)]))),128))])])])]))]))}};export{Z as default};
