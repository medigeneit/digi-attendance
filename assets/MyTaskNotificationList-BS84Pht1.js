import{L as M}from"./LoaderView-THU1PDi0.js";import{_ as R}from"./ApproveAndReject-6uJzoMZz.js";import{f as H,W as V,D as f,r as j,h as B,q as C,x as A,p as D,c as r,o as s,a as p,j as y,k as d,b as g,t as h,n as m,F as v,e as N,i as F,d as I,m as b}from"./index-C_N39Wi6.js";const $={class:"my-container space-y-4 px-4 py-4 relative"},z={class:"md:text-2xl font-semibold capitalize text-gray-700"},E={key:0,class:"ml-auto text-xs bg-red-500 text-white rounded-full px-2 py-0.5 font-semibold"},U={key:1,class:"space-y-4"},W={class:"flex gap-2 md:gap-3 items-center"},Z={class:"shrink grow font-semibold text-sm md:text-base"},G=["innerHTML"],J={key:0,class:"ml-auto shrink-0 grow-0 flex gap-2 md:gap-3 items-center"},K=["innerHTML"],O={key:0,class:"flex flex-wrap gap-y-1 gap-x-3 items-center text-xs md:text-sm lg:text-base"},P={key:0},Q={class:"flex gap-3 items-center"},X={class:"flex items-center gap-8"},Y={key:0,class:"flex flex-wrap flex-col md:flex-row gap-x-1 text-xs md:text-sm text-left"},ee={key:0,class:"hidden md:inline font-bold"},se=["innerHTML"],te={key:2,class:"h-[80vh] flex items-center justify-center border rounded-md bg-white/50 text-gray-400"},de={__name:"MyTaskNotificationList",setup(ae){const l=H(),x=V(),{notifications:i,notification_count:w}=f(x),u=j(!1);B(async()=>{l.params.type&&(u.value=!0,await x.fetchTaskNotification(l.params.type),u.value=!1)}),C(()=>l.params.type,async(t,a)=>{t&&t!==a&&(u.value=!0,await x.fetchTaskNotification(t),u.value=!1)});const n=t=>{var a,c,o,_;return l.params.type=="pending-requirements"||((a=t.meta)==null?void 0:a.commentable_type)==="requirement"?{name:"RequirementShow",params:{id:((c=t.meta)==null?void 0:c.commentable_type)==="requirement"?(o=t.meta)==null?void 0:o.commentable_id:t.application_id},query:{comment_id:(_=t.meta)==null?void 0:_.comment_id}}:{name:"RequirementTaskShow",params:{id:t.application_id}}},S=A(()=>l.params.type?l.params.type.replace(/[_-]/g," ").replace(/([A-Z])/g," $1").replace(/\s+/g," ").trim().split(" ").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" "):"");return(t,a)=>{var o,_,k;const c=D("RouterLink");return s(),r("div",$,[p("h2",z,[g(h(S.value||"Notifications")+" ",1),(o=m(w))!=null&&o[m(l).params.type]?(s(),r("span",E,h(((_=m(w))==null?void 0:_[m(l).params.type])||0),1)):d("",!0)]),u.value||m(x).loading?(s(),y(M,{key:0,class:"absolute inset-0 flex items-center justify-center bg-opacity-80 !shadow-none min-h-[80vh]"})):d("",!0),!u.value&&((k=m(i))==null?void 0:k.length)>0?(s(),r("div",U,[(s(!0),r(v,null,N(m(i),e=>{var T;return s(),r("div",{key:e.application_id,class:"bg-white p-3 md:p-4 rounded-xl shadow border grid gap-2"},[p("div",W,[p("div",Z,[p("div",{class:"flex items-center text-green-600 text-xs md:text-sm lg:text-base",innerHTML:e==null?void 0:e.title},null,8,G),p("div",null,h(e==null?void 0:e.user_name),1)]),n(e)?(s(),r("div",J,[I(c,{to:n(e),class:"btn-1 px-3"},{default:b(()=>a[0]||(a[0]=[p("i",{class:"far fa-eye"},null,-1)])),_:2,__:[0]},1032,["to"])])):d("",!0)]),a[4]||(a[4]=F('<p class="hidden line-clamp-1"></p><p class="hidden line-clamp-2"></p><p class="hidden line-clamp-3"></p><p class="hidden line-clamp-4"></p><p class="hidden line-clamp-5"></p><p class="hidden line-clamp-6"></p>',6)),p("div",{class:"text-sky-800 text-xs md:text-sm lg:text-base pr-12",innerHTML:e==null?void 0:e.description},null,8,K),e!=null&&e.type?(s(),r("div",O,[e!=null&&e.type?(s(),r("div",P,[a[1]||(a[1]=p("span",{class:"text-gray-400"},"Type:",-1)),g(" "+h(e==null?void 0:e.type),1)])):d("",!0)])):d("",!0),p("div",Q,[p("div",X,[(T=e==null?void 0:e.messages)!=null&&T.length?(s(),r("p",Y,[(s(!0),r(v,null,N(e.messages,(q,L)=>(s(),r(v,{key:L},[L?(s(),r("span",ee,"|")):d("",!0),p("span",{innerHTML:q,class:"text-black"},null,8,se)],64))),128))])):d("",!0)]),m(l).params.type=="pending-requirements"?(s(),y(R,{key:0,class:"ml-auto",notificationType:m(l).params.type,applicationId:e==null?void 0:e.application_id,onSuccess:t.onSuccess,variant:2},null,8,["notificationType","applicationId","onSuccess"])):d("",!0),m(l).params.type=="pending-comment-mentions"&&n(e)?(s(),y(c,{key:1,to:n(e),class:"btn-1 px-3 ml-auto"},{default:b(()=>a[2]||(a[2]=[g(" Re-play ")])),_:2,__:[2]},1032,["to"])):d("",!0),m(l).params.type=="pending-tasks"&&n(e)?(s(),y(c,{key:2,to:n(e),class:"btn-1 px-3 ml-auto"},{default:b(()=>a[3]||(a[3]=[g(" Show ")])),_:2,__:[3]},1032,["to"])):d("",!0)])])}),128))])):u.value?d("",!0):(s(),r("div",te," No notifications. "))])}}};export{de as default};
