import{E,r as v,G as c}from"./index-2Fcyjen1.js";const A=E("exchange",()=>{const u=v([]),o=v(null),l=v(!1),s=v(null);async function p(){var a,n;l.value=!0,s.value=null;try{const t=await c.get("/exchanges");u.value=t.data.data}catch(t){s.value=((n=(a=t.response)==null?void 0:a.data)==null?void 0:n.message)||"Failed to fetch exchanges"}finally{l.value=!1}}async function d(a){var n,t;l.value=!0,s.value=null;try{const e=await c.get(`/exchanges/${a}`);o.value=e.data}catch(e){s.value=((t=(n=e.response)==null?void 0:n.data)==null?void 0:t.message)||`Failed to fetch exchange with ID ${a}`}finally{l.value=!1}}async function g(a){var n,t;l.value=!0,s.value=null;try{const e=await c.post("/exchanges",a);return u.value.push(e.data.data),e.data.data}catch(e){s.value=((t=(n=e.response)==null?void 0:n.data)==null?void 0:t.message)||"Failed to create exchange"}finally{l.value=!1}}async function f(a,n){var t,e;l.value=!0,s.value=null;try{const r=await c.put(`/exchanges/${a}`,n),h=u.value.findIndex(i=>i.id===a);h!==-1&&(u.value[h]=r.data)}catch(r){s.value=((e=(t=r.response)==null?void 0:t.data)==null?void 0:e.message)||`Failed to update exchange with ID ${a}`}finally{l.value=!1}}async function x(a,n){var t,e;l.value=!0,s.value=null;try{const r=await c.put(`/attachment-upload/exchanges/${a}`,n),h=u.value.findIndex(i=>i.id===a);h!==-1&&(u.value[h]=r.data)}catch(r){s.value=((e=(t=r.response)==null?void 0:t.data)==null?void 0:e.message)||`Failed to update exchange with ID ${a}`}finally{l.value=!1}}async function y(a){var n,t;l.value=!0,s.value=null;try{await c.delete(`/exchanges/${a}`),u.value=u.value.filter(e=>e.id!==a)}catch(e){s.value=((t=(n=e.response)==null?void 0:n.data)==null?void 0:t.message)||`Failed to delete exchange with ID ${a}`}finally{l.value=!1}}async function m(a){var n,t;l.value=!0,s.value=null;try{const e=await c.post(`/exchanges/${a}/handover-accept`);o.value=e.data}catch(e){s.value=((t=(n=e.response)==null?void 0:n.data)==null?void 0:t.message)||`Failed to accept handover for exchange ID ${a}`}finally{l.value=!1}}async function w(a){var n,t;l.value=!0,s.value=null;try{const e=await c.post(`/exchanges/${a}/in-charge-accept`);o.value=e.data}catch(e){s.value=((t=(n=e.response)==null?void 0:n.data)==null?void 0:t.message)||`Failed to accept in-charge for exchange ID ${a}`}finally{l.value=!1}}async function $(a){var n,t;l.value=!0,s.value=null;try{const e=await c.post(`/exchanges/${a}/recommend-accept`);o.value=e.data}catch(e){s.value=((t=(n=e.response)==null?void 0:n.data)==null?void 0:t.message)||`Failed to recommend exchange ID ${a}`}finally{l.value=!1}}async function F(a){var n,t;l.value=!0,s.value=null;try{const e=await c.post(`/exchanges/${a}/approve`);o.value=e.data}catch(e){s.value=((t=(n=e.response)==null?void 0:n.data)==null?void 0:t.message)||`Failed to approve exchange ID ${a}`}finally{l.value=!1}}async function I(a,n){var t,e;l.value=!0,s.value=null;try{const r=await c.post(`/exchanges/${a}/reject`,{rejection_reason:n});o.value=r.data}catch(r){s.value=((e=(t=r.response)==null?void 0:t.data)==null?void 0:e.message)||`Failed to reject exchange ID ${a}`}finally{l.value=!1}}return{exchanges:u,exchange:o,loading:l,error:s,fetchExchanges:p,fetchExchange:d,createExchange:g,updateExchange:f,deleteExchange:y,handoverAccept:m,inChargeAccept:w,recommendByAccept:$,approveExchange:F,rejectExchange:I,fetchFileUpload:async a=>{var n,t;try{return l.value=!0,(await c.post("attachment-upload",a,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(e){s.value=((t=(n=e.response)==null?void 0:n.data)==null?void 0:t.message)||"Something went wrong"}finally{l.value=!1}},uploadAttachmentExchange:x}});export{A as u};
