import{E as g,r,G as l}from"./index-rfORStRX.js";const b=g("notice",()=>{const i=r([]),v=r([]),u=r({}),o=r(null),n=r(!1);return{notices:i,notice:u,error:o,isLoading:n,policies:v,fetchPolices:async()=>{var s,a,t;try{n.value=!0;const e=await l.get("/policies");v.value=(s=e==null?void 0:e.data)==null?void 0:s.polices,o.value=null}catch(e){o.value=((t=(a=e.response)==null?void 0:a.data)==null?void 0:t.message)||"Something went wrong"}finally{n.value=!1}},fetchFileUpload:async s=>{var a,t;try{return n.value=!0,(await l.post("file-upload",s,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(e){o.value=((t=(a=e.response)==null?void 0:a.data)==null?void 0:t.message)||"Something went wrong"}finally{n.value=!1}},createNoticeFeedback:async(s,a)=>{var t,e;try{return n.value=!0,await l.post(`/user/notice/feedback/${s}`,a)}catch(c){o.value=((e=(t=c.response)==null?void 0:t.data)==null?void 0:e.message)||"Something went wrong"}finally{n.value=!1}},fetchNotices:async()=>{var s,a;try{n.value=!0;const t=await l.get("/notices");i.value=t==null?void 0:t.data,o.value=null}catch(t){o.value=((a=(s=t.response)==null?void 0:s.data)==null?void 0:a.message)||"Something went wrong"}finally{n.value=!1}},fetchNotice:async s=>{var a,t;try{n.value=!0;const c=(await l.get(`/notices/${s}`)).data;return c&&(u.value=c),o.value=null,c}catch(e){o.value=((t=(a=e.response)==null?void 0:a.data)==null?void 0:t.message)||"Something went wrong"}finally{n.value=!1}},createNotice:async s=>{var a,t;try{n.value=!0;const e=await l.post("/notices",s);i.value.push(e.data.notices),o.value=null}catch(e){o.value=((t=(a=e.response)==null?void 0:a.data)==null?void 0:t.message)||"Something went wrong"}finally{n.value=!1}},updateNotice:async(s,a)=>{var t,e;try{n.value=!0,console.log({payload:a});const c=await l.put(`/notices/${s}`,a),f=users.value.findIndex(d=>d.id===s);f!==-1&&(u.value[f]=c.data.notice),o.value=null}catch(c){o.value=((e=(t=c.response)==null?void 0:t.data)==null?void 0:e.message)||"Something went wrong"}finally{n.value=!1}},fetchUserNotices:async()=>{var s,a,t;try{n.value=!0;const e=await l.get("/user/notices");i.value=(s=e==null?void 0:e.data)==null?void 0:s.notices,o.value=null}catch(e){o.value=((t=(a=e.response)==null?void 0:a.data)==null?void 0:t.message)||"Something went wrong"}finally{n.value=!1}},fetchNoticeDetails:async s=>{var a,t;try{n.value=!0;const c=(await l.get(`/notices/details/${s}`)).data;return c&&(u.value=c),o.value=null,c}catch(e){o.value=((t=(a=e.response)==null?void 0:a.data)==null?void 0:t.message)||"Something went wrong"}finally{n.value=!1}}}});export{b as u};
