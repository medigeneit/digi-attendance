import{r as N,A as st,x as O,c as p,o as u,a as t,I as _,g,F as B,y as tt,t as C,w as h,q as A,n as S,f as M,i as w,k,e as G,J as et,j as I,h as z,v as K,Z as U,$ as q}from"./index-ZA_zyr8Y.js";import{L as H}from"./LoaderView-C5yHLOUc.js";import{f as at,b as W,g as ot}from"./datetime-l2Vm98rT.js";import{_ as it}from"./CalenderView-BNQMbIS-.js";import{u as j}from"./useTodoStore-Be4byWSz.js";import{O as Y}from"./OverlyModal-C1RQtbLq.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const dt={class:"px-4 py-2 flex items-center bg-gray-50 group gap-2"},rt=["value"],ut=["value"],ct=["value"],mt=["value"],vt=["disabled"],yt={key:4,class:"ml-4 md:ml-auto flex items-center gap-2"},pt={key:5,class:"ml-4 md:ml-auto flex items-center gap-2"},ft={__name:"TodoHeading",props:{selectedType:{type:String,default:"month-view"},selectedValue:{type:String,default:""},selected:{type:Object,default:()=>({type:"month-view",month:"",day:"",year:"",week:""})},loading:{type:Boolean,default:!1}},emits:["reloadClick",,"change"],setup(d,{emit:b}){const l=d,n=[{value:"month-view",label:"Monthly"},{value:"day-view",label:"Daily"}],m=b,e=N();function a(c){e.value=c,m("change",{...l.selected,type:c})}st(()=>{var c;return(c=l.selected)==null?void 0:c.type},c=>a(c),{immediate:!0});const i=O(()=>e.value=="month-view"&&l.selected.year&&l.selected.month?[l.selected.year,l.selected.month-1,1]:e.value=="day-view"&&l.selected.year&&l.selected.month&&l.selected.day?[l.selected.year,l.selected.month-1,l.selected.day]:[new Date().getFullYear(),new Date().getMonth(),new Date().getDate()]);function s(){e.value=="month-view"&&x(new Date)}function r(){if(e.value=="month-view"){const c=new Date(...i.value);c.setMonth(c.getMonth()+1),x(c)}}function o(){if(e.value=="month-view"){const c=new Date(...i.value);c.setMonth(c.getMonth()-1),x(c)}}function v(){e.value=="day-view"&&x(new Date)}function y(){if(e.value=="day-view"){const c=new Date(...i.value);c.setDate(c.getDate()+1),x(c)}}function $(){if(e.value=="day-view"){const c=new Date(...i.value);c.setDate(c.getDate()-1),x(c)}}function x(c){m("change",{type:e.value,month:c.getMonth()+1,day:c.getDate(),year:c.getFullYear(),week:c.getDay()})}const P=O(()=>e.value=="month-view"?`${l.selected.year}-${l.selected.month.toString().padStart(2,"0")}`:e.value=="day-view"?`${l.selected.year}-${l.selected.month.toString().padStart(2,"0")}-${l.selected.day.toString().padStart(2,"0")}`:l.selected),F=c=>{var E,f;if(e.value=="month-view"){const[T,D]=(E=c.target.value)==null?void 0:E.split("-").map(Number),L=new Date(T,D-1,1);x(L)}if(e.value=="day-view"){const T=new Date((f=c.target)==null?void 0:f.value);x(T)}};return(c,E)=>(u(),p("div",null,[t("div",dt,[_(c.$slots,"before",{selected:d.selected}),_(c.$slots,"typeSelection",{selected:d.selected,types:n,changeType:a},()=>[t("select",{class:"px-2 h-7 border rounded",value:e.value,onChange:E[0]||(E[0]=f=>a(f.target.value))},[(u(),p(B,null,tt(n,f=>t("option",{value:f.value,key:f.id},C(f.label),9,ut)),64))],40,rt)]),e.value=="month-view"?(u(),p("input",{key:0,type:"month",value:P.value,onInput:F,class:"border px-2 rounded"},null,40,ct)):g("",!0),e.value=="day-view"?(u(),p("input",{key:1,type:"date",value:P.value,onInput:F,class:"border px-2 rounded"},null,40,mt)):g("",!0),e.value=="month-view"?(u(),p("button",{key:2,class:"btn-3 mx-4 h-7",onClick:h(s,["prevent"])}," Current Month ")):g("",!0),e.value=="day-view"?(u(),p("button",{key:3,class:"btn-3 mx-4 h-7",onClick:h(v,["prevent"])}," Today ")):g("",!0),t("button",{class:A(["btn-3 px-2 py-2 mx-4 size-7 disabled:text-gray-300 disabled:border-gray-300",{"animate-spin text-gray-300 border-gray-300 !bg-opacity-0":d.loading}]),onClick:E[1]||(E[1]=h(f=>m("reloadClick"),["prevent"])),disabled:d.loading},E[2]||(E[2]=[t("i",{class:"fas fa-redo-alt"},null,-1)]),10,vt),e.value=="month-view"?(u(),p("div",yt,[t("button",{class:"btn-2 h-7",onClick:h(o,["prevent"])}," Previous Month "),t("button",{class:"btn-2 h-7",onClick:h(r,["prevent"])},"Next Month")])):g("",!0),e.value=="day-view"?(u(),p("div",pt,[t("button",{class:"btn-2 h-7",onClick:h($,["prevent"])},"Previous Day"),t("button",{class:"btn-2 h-7",onClick:h(y,["prevent"])},"Next Day")])):g("",!0),_(c.$slots,"after",{selected:d.selected})]),_(c.$slots,"bottom",{selected:d.selected})]))}},bt={key:0,class:"fa fa-exclamation-circle",title:"Pending"},gt={key:1,class:"fa fa-exclamation-square",title:"Wording"},kt={key:2,class:"fa fa-check-square",title:"Completed"},J={__name:"TodoStatusIcon",props:{todo:{type:Object,required:!0}},setup(d){const b=d,l=O(()=>{switch(b.todo.status){case"PENDING":return"text-red-400";case"WORKING":return"text-yellow-400";case"COMPLETED":return"text-green-400"}return""});return(n,m)=>(u(),p("span",{class:A(l.value)},[d.todo.status=="PENDING"?(u(),p("i",bt)):g("",!0),d.todo.status=="WORKING"?(u(),p("i",gt)):g("",!0),d.todo.status=="COMPLETED"?(u(),p("i",kt)):g("",!0)],2))}},ht=["onClick","title"],xt={class:"line-clamp-1"},Ct={key:0,class:"text-purple-600 text-center"},nt={__name:"TodosInDate",props:{date:{type:String,required:!0},maxItems:{type:[Number,String],default:3}},emits:["clickTodo"],setup(d,{emit:b}){const l=d,n=b,{getTodosByDate:m}=j(),e=O(()=>{let a=[],i=!1,s=[];if(typeof m=="function"){const r=m(l.date);if(s=Array.isArray(r)?r:[],l.maxItems==="all")return{all:s,items:s,moreItemsCount:0};a=s.slice(0,l.maxItems),i=s.length-a.length}return{all:s,items:a,moreItemsCount:i}});return(a,i)=>(u(),p("div",null,[e.value.items.length===0?_(a.$slots,"noTodos",{key:0},()=>[i[0]||(i[0]=t("div",{class:"text-gray-400 text-center"},"No todos",-1))]):(u(),p(B,{key:1},[(u(!0),p(B,null,tt(e.value.items,s=>_(a.$slots,"todoItem",{key:s.id,todo:s,moreItemsCount:e.value.moreItemsCount},()=>[t("div",{class:A(["px-1 mb-2 text-sm rounded cursor-pointer flex items-center gap-2",{"bg-sky-50 text-sky-900 hover:bg-sky-700 hover:text-white border border-sky-300":s.status!=="COMPLETED","bg-green-500 text-white":s.status==="COMPLETED"}]),onClick:h(r=>n("clickTodo",s),["prevent","stop"]),title:s.title},[S(J,{todo:s,class:A(["text-sm",[s.status=="COMPLETED"?"!text-white":""]])},null,8,["todo","class"]),t("div",xt,C(s.title),1)],10,ht)])),128)),e.value.moreItemsCount>0?(u(),p("div",Ct," + "+C(e.value.moreItemsCount)+" more todo"+C(e.value.moreItemsCount>1?"s":""),1)):g("",!0)],64))]))}},wt={class:"relative"},$t=["onClick","onKeypress"],Dt=["onClick"],Tt={__name:"TodosInCalenderView",props:{month:{type:String,required:!0,validator:d=>/^\d{4}-(0[1-9]|1[0-2])$/.test(d)}},emits:["dateClick","clickTodo","clickDateCell"],setup(d,{emit:b}){const l=b;function n(e,a){e.isTrusted&&e.ctrlKey&&e.which==10&&l("clickDateCell",a)}function m(e){const[a,i,s]=String(e).split("-").map(Number),r=new Date(a,i-1,s);return at(r)}return(e,a)=>(u(),p("div",wt,[d.month?(u(),M(it,{key:0,month:d.month,class:"border-t border-blue-200/50 relative"},{date:w(({day:i,yearMonthDate:s,isCurrentMonth:r})=>[t("div",{tabindex:"0",class:A(["border p-4 cursor-pointer group/date relative",{"bg-rose-50  border-rose-300 focus:bg-rose-50 focus:outline-rose-400":m(s),"hover:bg-sky-50  hover:border-blue-300 focus:bg-sky-50 focus:outline-blue-400":!m(s)}]),onClick:o=>l("clickDateCell",s),onKeypress:h(o=>n(o,s),["prevent"])},[t("button",{tabindex:"1",class:A([{"text-gray-300":!r,"text-sky-400":r},"text-center mb-2 font-semibold hover:bg-sky-200 w-full rounded"]),onClick:h(o=>l("dateClick",s),["prevent","stop"])},C(i),11,Dt),t("div",null,[S(nt,{date:s,onClickTodo:a[0]||(a[0]=o=>l("clickTodo",o))},{noTodos:w(()=>a[1]||(a[1]=[t("span",null,null,-1)])),_:2},1032,["date"])]),a[2]||(a[2]=t("div",{class:"absolute bottom-0 left-0 right-0 text-center hidden group-hover/date:block text-sm text-red-800/40"}," Click to add todo ",-1))],42,$t)]),_:1},8,["month"])):g("",!0)]))}},_t={class:"relative bg-white p-4"},St={class:"max-w-6xl mx-auto border rounded my-10"},Et={class:"mb-4 text-gray-700 border-b py-2 px-4 flex items-center"},Mt={class:"text-lg font-semibold"},It={class:"ml-auto"},Nt=["onClick"],Ot={class:"line-clamp-2 ml-2"},Lt={key:0,class:"line-clamp-2 ml-2 text-gray-500"},Pt={class:"ml-auto flex items-center gap-2"},At=["onClick"],Ft=["onClick"],jt=["onClick"],Vt={__name:"TodosInDailyView",props:{date:{type:String,required:!0}},emits:["clickTodo","clickAdd","clickEdit","clickDelete","clickChangeStatus","backClick","update"],setup(d,{emit:b}){const l=d,n=b,m=O(()=>new Date(l.date)),e=j();async function a(s){confirm(`Are your sure want to delete todo
'${s==null?void 0:s.title}'`)&&(await e.deleteTodo(s.id),n("update"))}async function i(s){confirm(`Are your sure want to compete todo
'${s==null?void 0:s.title}'`)&&(await e.updateTodoStatus(s.id,"COMPLETED"),n("update"))}return(s,r)=>(u(),p("div",_t,[t("div",St,[t("div",Et,[t("button",{class:"fa fa-arrow-left btn-icon mr-2",onClick:r[0]||(r[0]=h(o=>n("backClick"),["prevent"]))}),t("div",Mt,C(k(W)(m.value,{weekDay:"long"})),1),t("div",It,[t("button",{class:"btn btn-icon",onClick:r[1]||(r[1]=h(o=>n("clickAdd",l.date),["prevent"]))},r[2]||(r[2]=[t("i",{class:"fas fa-plus"},null,-1)]))])]),S(nt,{date:d.date,"max-items":10,class:"my-8 w-full px-4"},{todoItem:w(({todo:o})=>[t("div",{class:"border rounded px-4 py-3 my-4 hover:bg-sky-50 cursor-pointer flex items-center",onClick:h(v=>n("clickTodo",o),["prevent"])},[S(J,{todo:o},null,8,["todo"]),t("div",Ot,C(o.title),1),o.todo_type&&o.todo_type_id?(u(),p("div",Lt,C(o.todo_type)+" id "+C(o.todo_type_id),1)):g("",!0),t("div",Pt,[o.status!=="COMPLETED"?(u(),p("button",{key:0,class:"btn-icon bg-green-400 text-white hover:bg-green-600 hover:text-white",onClick:h(()=>i(o),["prevent","stop"])},r[3]||(r[3]=[t("i",{class:"fas fa-check"},null,-1)]),8,At)):g("",!0),t("button",{class:"btn-icon bg-sky-400 text-white hover:bg-sky-600 hover:text-white",onClick:h(v=>n("clickEdit",o),["prevent","stop"])},r[4]||(r[4]=[t("i",{class:"fas fa-pen"},null,-1)]),8,Ft),t("button",{class:"btn-icon bg-red-400 text-white hover:bg-red-600 hover:text-white",onClick:h(()=>a(o),["prevent","stop"])},r[5]||(r[5]=[t("i",{class:"fas fa-trash-alt"},null,-1)]),8,jt)])],8,Nt)]),noTodos:w(()=>r[6]||(r[6]=[t("div",{class:"flex min-h-[38vh] items-center justify-center text-gray-400 text-center rounded-md"}," No Todos ",-1)])),_:1},8,["date"])])]))}},Rt={class:"bg-white border-t px-4 py-4 sticky bottom-0 rounded-b-md"},Ut={key:0,class:"mb-4 text-red-500 font-medium"},qt={key:1,class:"mb-4 text-blue-500 font-medium"},Bt={class:"flex justify-between items-center gap-4"},zt=["disabled"],lt={__name:"FormHandler",props:{isSubmitting:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},error:{type:String,default:""}},emits:["submit","clickCancel"],setup(d,{emit:b}){const l=b;return(n,m)=>(u(),p("form",{onSubmit:m[1]||(m[1]=h(e=>l("submit"),["prevent"]))},[_(n.$slots,"default"),t("div",Rt,[d.error?(u(),p("div",Ut,C(d.error),1)):g("",!0),d.isSubmitting?(u(),p("div",qt,"Saving changes...")):g("",!0),_(n.$slots,"footer",{},()=>[t("div",Bt,[t("button",{type:"button",onClick:m[0]||(m[0]=e=>l("clickCancel")),class:"btn-3"},"Cancel"),t("button",{disabled:d.isSubmitting||d.isLoading,type:"submit",class:"btn-2"},C(d.isSubmitting?"Saving...":"Save"),9,zt)])])])],32))}},Kt={class:""},Gt={class:"p-4 min-h-[10vh] max-h-[50vh] overflow-y-auto"},Ht={class:"mb-2"},Wt={class:"mb-4"},Yt={class:"mb-4"},Jt={__name:"TodoAddForm",props:{date:{type:String,default:ot(new Date)}},emits:["update","cancelClick"],setup(d,{emit:b}){const l=d,n=N(),m=N(),e=j(),a=b,i=N({title:"",date:l.date||"",task_id:""});async function s(){n.value="submitting",await e.createTodo(i.value),console.log(i.value),n.value="",a("update")}const r=O(()=>new Date(l.date));return G(async()=>{var o;await et(),(o=m.value)==null||o.focus()}),(o,v)=>(u(),p("div",Kt,[k(e).loading?(u(),M(H,{key:0,class:"absolute inset-0 bg-opacity-80 text-center py-4 text-gray-500 z-10 flex items-center justify-center"},{default:w(()=>v[3]||(v[3]=[I(" Loading... ")])),_:1,__:[3]})):g("",!0),S(lt,{onSubmit:s,onClickCancel:v[2]||(v[2]=y=>a("cancelClick")),isSubmitting:n.value=="submitting",error:k(e).error,class:"rounded-md relative"},{default:w(()=>[v[7]||(v[7]=t("div",{class:"border-b py-2 px-4"},[t("h2",{class:"text-xl font-semibold"},"Add Todo")],-1)),t("div",Gt,[t("div",Ht,[v[4]||(v[4]=t("span",{class:"font-semibold"}," Date ",-1)),t("span",null,C(k(W)(r.value,{weekDay:"long"})),1)]),t("div",Wt,[v[5]||(v[5]=t("label",{class:"block text-gray-700 font-medium mb-2"},"Title",-1)),z(t("input",{ref_key:"titleRef",ref:m,"onUpdate:modelValue":v[0]||(v[0]=y=>i.value.title=y),required:"",placeholder:"Enter todo title",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[K,i.value.title]])]),t("div",Yt,[v[6]||(v[6]=t("label",{class:"block text-gray-700 font-medium mb-2"},"Task ID (optional)",-1)),z(t("input",{"onUpdate:modelValue":v[1]||(v[1]=y=>i.value.task_id=y),placeholder:"Enter a task id",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[K,i.value.task_id]])])])]),_:1,__:[7]},8,["isSubmitting","error"])]))}},Zt={class:"relative"},Qt={class:"p-4 min-h-[10vh] max-h-[50vh] overflow-y-auto"},Xt={class:"mb-2"},te={class:"mb-4"},ee={class:"mb-4"},oe={__name:"TodoEditForm",props:{date:{type:String,default:ot(new Date)},todo:{type:Object,default:()=>{}}},emits:["update","cancelClick"],setup(d,{emit:b}){const l=d,n=N(),m=N(),e=j(),a=b,i=N({title:"",todo_type:"task",todo_type_id:""});async function s(){var v,y,$;await e.fetchTodo((v=l.todo)==null?void 0:v.id),i.value.title=(y=e.todo)==null?void 0:y.title,i.value.todo_type_id=($=e.todo)==null?void 0:$.todoable_id}async function r(){n.value="submitting";try{await e.updateTodo(l.todo.id,i.value),a("update")}finally{n.value=""}}const o=O(()=>new Date(l.date));return G(async()=>{var v;await s(),await et(),(v=m.value)==null||v.focus()}),(v,y)=>(u(),p("div",Zt,[k(e).loading?(u(),M(H,{key:0,class:"absolute inset-0 bg-opacity-80 text-center py-4 text-gray-500 z-10 flex items-center justify-center"},{default:w(()=>y[3]||(y[3]=[I(" Loading... ")])),_:1,__:[3]})):g("",!0),S(lt,{onSubmit:r,onClickCancel:y[2]||(y[2]=$=>a("cancelClick")),isSubmitting:n.value=="submitting",isLoading:k(e).loading,error:k(e).error},{default:w(()=>[y[7]||(y[7]=t("div",{class:"border-b py-2 px-4"},[t("h2",{class:"text-xl font-semibold"},"Edit Todo")],-1)),t("div",Qt,[t("div",Xt,[y[4]||(y[4]=t("span",{class:"font-semibold"}," Date ",-1)),t("span",null,C(k(W)(o.value,{weekDay:"long"})),1)]),t("div",te,[y[5]||(y[5]=t("label",{class:"block text-gray-700 font-medium mb-2"},"Title",-1)),z(t("input",{ref_key:"titleRef",ref:m,"onUpdate:modelValue":y[0]||(y[0]=$=>i.value.title=$),required:"",placeholder:"Enter todo title",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[K,i.value.title]])]),t("div",ee,[y[6]||(y[6]=t("label",{class:"block text-gray-700 font-medium mb-2"},"Task ID (optional)",-1)),z(t("input",{"onUpdate:modelValue":y[1]||(y[1]=$=>i.value.todo_type_id=$),placeholder:"Enter a task id",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[K,i.value.todo_type_id]])])])]),_:1,__:[7]},8,["isSubmitting","isLoading","error"])]))}},ne={class:"relative"},le={class:"min-h-[10vh] max-h-[50vh] overflow-y-auto p-4"},se={class:"mb-4"},ae={class:"mb-4"},ie={class:"flex items-center gap-4"},de={key:0,class:"flex items-center gap-2"},re={class:"flex justify-between items-center gap-4 py-4 px-4 border-t"},ue={class:"ml-auto flex items-center gap-2"},ce={__name:"TodoShow",props:{todo:{type:Object,default:()=>{}}},emits:["cancelClick","clickEdit","update"],setup(d,{emit:b}){const l=d,n=j(),m=b;async function e(){var r;await n.fetchTodo((r=l.todo)==null?void 0:r.id)}const a=O(()=>{var r,o;return(r=n.todo)!=null&&r.date?new Date((o=n.todo)==null?void 0:o.date):null});async function i(r){var o;confirm(`Are your sure want to delete todo
'${(o=n.todo)==null?void 0:o.title}'`)&&(await n.deleteTodo(r.id),m("update"))}async function s(r,o){var v;confirm(`Are your sure want to compete todo
'${(v=n.todo)==null?void 0:v.title}'`)&&(await n.updateTodoStatus(r.id,o),m("update"))}return G(async()=>{await e()}),(r,o)=>{var v,y,$,x,P,F;return u(),p("div",ne,[k(n).loading?(u(),M(H,{key:0,class:"absolute inset-0 bg-opacity-80 text-center py-4 text-gray-500 z-10 flex items-center justify-center"},{default:w(()=>o[5]||(o[5]=[I(" Loading... ")])),_:1,__:[5]})):g("",!0),t("div",null,[o[11]||(o[11]=t("div",{class:"border-b py-2 px-4"},[t("h2",{class:"text-xl font-semibold"},"Show Todo")],-1)),t("div",le,[t("div",se,[o[6]||(o[6]=t("div",{class:"font-semibold text-xs text-gray-500"},"Date",-1)),t("span",null,C(k(W)(a.value,{weekDay:"long"})),1)]),t("div",ae,[o[7]||(o[7]=t("div",{class:"text-xs text-gray-500"},"Todo",-1)),I(" "+C((v=k(n).todo)==null?void 0:v.title),1)]),t("div",null,[o[10]||(o[10]=t("div",{class:"text-xs text-gray-500"},"Status",-1)),t("div",ie,[t("div",null,[(y=k(n))!=null&&y.todo?(u(),M(J,{key:0,todo:($=k(n))==null?void 0:$.todo},null,8,["todo"])):g("",!0),I(" "+C((x=k(n).todo)==null?void 0:x.status),1)]),k(n).loading?g("",!0):(u(),p("div",de,[((P=k(n).todo)==null?void 0:P.status)==="PENDING"?(u(),p("button",{key:0,class:"btn-2 from-yellow-700 to-yellow-500 text-white hover:bg-green-600 hover:text-white",onClick:o[0]||(o[0]=h(()=>s(k(n).todo,"WORKING"),["prevent","stop"]))},o[8]||(o[8]=[t("i",{class:"fas fa-exclamation-circle"},null,-1),I(" Change to Working ")]))):g("",!0),((F=k(n).todo)==null?void 0:F.status)==="WORKING"?(u(),p("button",{key:1,class:"btn-2 from-green-700 to-green-300 text-white hover:bg-green-600 hover:text-white",onClick:o[1]||(o[1]=h(()=>s(k(n).todo,"COMPLETED"),["prevent","stop"]))},o[9]||(o[9]=[t("i",{class:"fas fa-check"},null,-1),I(" Make Complete ")]))):g("",!0)]))])])])]),t("div",re,[t("button",{type:"button",onClick:o[2]||(o[2]=c=>m("cancelClick")),class:"btn-3"},"Cancel"),t("div",ue,[t("button",{class:"btn-2 bg-sky-400 text-white hover:bg-sky-600 hover:text-white",onClick:o[3]||(o[3]=h(c=>m("clickEdit",k(n).todo),["prevent","stop"]))},o[12]||(o[12]=[t("i",{class:"fas fa-pen"},null,-1),I(" Edit ")])),t("button",{class:"btn-2-red",onClick:o[4]||(o[4]=h(()=>i(k(n).todo),["prevent","stop"]))},o[13]||(o[13]=[t("i",{class:"fas fa-trash-alt"},null,-1),I(" Delete ")]))])])])}}},me={__name:"TodoCreateEditShow",props:{todoModal:{type:Object,required:!0}},emits:["cancelClick","update","clickEdit","clickDelete","clickChangeStatus"],setup(d,{emit:b}){const l=b;function n(){l("update")}return(m,e)=>(u(),p(B,null,[d.todoModal.action=="add"?(u(),M(Y,{key:0},{default:w(()=>{var a;return[S(Jt,{onCancelClick:e[0]||(e[0]=i=>l("cancelClick")),onUpdate:n,date:(a=d.todoModal)==null?void 0:a.date},null,8,["date"])]}),_:1})):g("",!0),d.todoModal.action=="edit"?(u(),M(Y,{key:1},{default:w(()=>{var a;return[S(oe,{onCancelClick:e[1]||(e[1]=i=>l("cancelClick")),onUpdate:n,todo:(a=d.todoModal)==null?void 0:a.todo},null,8,["todo"])]}),_:1})):g("",!0),d.todoModal.action=="show"?(u(),M(Y,{key:2},{default:w(()=>{var a;return[S(ce,{onCancelClick:e[2]||(e[2]=i=>l("cancelClick")),onUpdate:n,onClickEdit:e[3]||(e[3]=i=>l("clickEdit",i)),onClickDelete:e[4]||(e[4]=i=>l("clickDelete",i)),onClickChangeStatus:e[5]||(e[5]=(i,s)=>l("clickChangeStatus",i,s)),todo:(a=d.todoModal)==null?void 0:a.todo},null,8,["todo"])]}),_:1})):g("",!0)],64))}},ve={class:"border bg-white relative"},ye={__name:"TodoSection",props:{year:{type:Number,default:()=>new Date().getFullYear()},month:{type:Number,default:()=>new Date().getMonth()+1},day:{type:Number,default:()=>new Date().getDate()},week:{type:Number,default:()=>new Date().getDay()},viewType:{type:String,default:"month-view"}},setup(d){const b=new Date,l=d,n=N({type:"month-view",month:b.getMonth()+1,day:b.getDate(),year:b.getFullYear(),week:b.getDay()}),m=N({action:null}),e=j();async function a(){await e.fetchTodos()}function i(){m.value={...m.value,action:""}}async function s(f,T){await e.updateTodoStatus(f,T)}async function r(f){await e.deleteTodo(f)}function o(){n.value={...n.value,type:"month-view"}}function v(f){n.value={...n.value,...f}}function y(f){const[T,D,L]=f.split("-").map(Number);n.value={...n.value,type:"day-view",year:T,month:D,day:L}}function $(f){m.value={...m.value,action:"show",todo:f}}function x(f){m.value={...m.value,action:"edit",todo:f}}function P(f){m.value={...m.value,action:"add",date:f}}function F(){m.value={action:null,todo:null}}const c=O(()=>{var L,V,R,Z,Q,X;const f=(V=(L=n.value)==null?void 0:L.year)==null?void 0:V.toString(),T=(Z=(R=n.value)==null?void 0:R.month)==null?void 0:Z.toString().padStart(2,"0"),D=(X=(Q=n.value)==null?void 0:Q.day)==null?void 0:X.toString().padStart(2,"0");return`${f}-${T}-${D}`}),E=O(()=>{var D,L,V,R;const f=(L=(D=n.value)==null?void 0:D.year)==null?void 0:L.toString(),T=(R=(V=n.value)==null?void 0:V.month)==null?void 0:R.toString().padStart(2,"0");return`${f}-${T}`});return G(async()=>{await e.fetchTodos(),console.log({props:l})}),(f,T)=>(u(),p("div",null,[t("div",ve,[k(e).loading?(u(),M(H,{key:0,class:"absolute inset-0 bg-opacity-80 text-center py-4 text-gray-500 z-10 flex items-center justify-center"},{default:w(()=>T[0]||(T[0]=[I(" Loading... ")])),_:1,__:[0]})):g("",!0),S(ft,{selected:n.value,class:"border-b shadow z-20",onChange:v,onReloadClick:a},{before:w(D=>[_(f.$slots,"beforeHeader",U(q(D)))]),after:w(D=>[_(f.$slots,"afterHeader",U(q(D)))]),bottom:w(D=>[_(f.$slots,"bottomHeader",U(q(D)))]),typeSelection:w(D=>[_(f.$slots,"typeSelection",U(q(D)))]),_:3},8,["selected"]),n.value.type=="month-view"?(u(),M(Tt,{key:1,month:E.value,class:"bg-white",onDateClick:y,onClickTodo:$,onClickDateCell:P},null,8,["month"])):g("",!0),n.value.type=="day-view"?(u(),M(Vt,{key:2,date:c.value,onClickTodo:$,onClickEdit:x,onClickAdd:P,onClickDelete:r,onClickChangeStatus:s,onBackClick:o,onUpdate:i},null,8,["date"])):g("",!0)]),S(me,{todoModal:m.value,onCancelClick:F,onUpdate:i,onClickEdit:x},null,8,["todoModal"])]))}},pe={class:"container mx-auto p-6"},fe={key:0,class:"text-center py-4 text-red-500"},be={class:"flex items-center gap-2 mr-2"},ge=["onClick"],ke=["onClick"],_e={__name:"TodoList",setup(d){const b=new Date,l=N({type:"month-view",month:b.getMonth()+1,day:b.getDate(),year:b.getFullYear(),week:b.getDay()}),n=j();return(m,e)=>(u(),p("div",pe,[e[0]||(e[0]=t("h2",{class:"text-2xl font-bold mb-6"},"Todo List",-1)),k(n).error&&!k(n).loading?(u(),p("div",fe,C(k(n).error),1)):g("",!0),S(ye,{year:l.value.year,month:l.value.month,day:l.value.day,viewType:l.value.type},{typeSelection:w(({types:a,changeType:i,selected:s})=>{var r,o,v,y;return[t("div",be,[t("button",{onClick:h($=>{var x;return i((x=a[0])==null?void 0:x.value)},["prevent"]),class:A(["rounded text-sm ",(s==null?void 0:s.type)==((r=a[0])==null?void 0:r.value)?"text-blue-500 border px-2 font-semibold":"hover:underline text-blue-600"])},C((o=a[0])==null?void 0:o.label),11,ge),t("button",{onClick:h($=>{var x;return i((x=a[1])==null?void 0:x.value)},["prevent"]),class:A(["rounded text-sm ",(s==null?void 0:s.type)==((v=a[1])==null?void 0:v.value)?"text-blue-500 border px-2 font-semibold ":"hover:underline text-blue-600"])},C((y=a[1])==null?void 0:y.label),11,ke)])]}),_:1},8,["year","month","day","viewType"])]))}};export{_e as default};
