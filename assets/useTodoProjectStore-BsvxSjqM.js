import{B as y,r as n,x as d,C as u}from"./index-Ck--8GOP.js";const h=y("todoProject",()=>{const s=n([]),o=n(!1),l=n(null),p=async()=>{var t,r,a;o.value=!0,l.value=null;try{const e=await u.get("/todo-projects");s.value=((t=e.data)==null?void 0:t.todo_projects)||[]}catch(e){throw l.value=((a=(r=e.response)==null?void 0:r.data)==null?void 0:a.message)||"Projects load failed",e}finally{o.value=!1}},i=async t=>{var r,a;o.value=!0,l.value=null;try{const e=await u.post("/todo-projects",t);return s.value=[...s.value,e.data],e.data}catch(e){throw l.value=((a=(r=e.response)==null?void 0:r.data)==null?void 0:a.message)||"Project create failed",e}finally{o.value=!1}},f=async(t,r)=>{var a,e;o.value=!0,l.value=null;try{const c=await u.put(`/todo-projects/${t}`,r);return s.value=s.value.map(v=>v.id===t?c.data:v),c.data}catch(c){throw l.value=((e=(a=c.response)==null?void 0:a.data)==null?void 0:e.message)||"Project update failed",c}finally{o.value=!1}},j=async t=>{var r,a;o.value=!0,l.value=null;try{await u.delete(`/todo-projects/${t}`),s.value=s.value.filter(e=>e.id!==t)}catch(e){throw l.value=((a=(r=e.response)==null?void 0:r.data)==null?void 0:a.message)||"Project delete failed",e}finally{o.value=!1}};return{projects:d(()=>s.value),loading:d(()=>o.value),error:d(()=>l.value),fetchProjects:p,createProject:i,updateProject:f,deleteProject:j}});export{h as u};
