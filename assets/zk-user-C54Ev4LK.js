import{M as D,r as u,m as d,D as o}from"./index-CQZCSua2.js";const C=D("device",()=>{const l=u([]),i=u(null),s=u(!1),c=u(null),p=async()=>{var a,e;s.value=!0,c.value=null;try{const t=await o.get("/devices");l.value=t.data}catch(t){c.value=((e=(a=t.response)==null?void 0:a.data)==null?void 0:e.message)||"ডিভাইস লোড করতে ব্যর্থ হয়েছে।",console.error("Error fetching devices:",t)}finally{s.value=!1}},y=async a=>{var e,t;s.value=!0,c.value=null;try{const r=await o.get(`/devices/${a}`);i.value=r.data}catch(r){c.value=((t=(e=r.response)==null?void 0:e.data)==null?void 0:t.message)||`ডিভাইস (ID: ${a}) লোড করতে ব্যর্থ হয়েছে।`,console.error(`Error fetching device with id ${a}:`,r)}finally{s.value=!1}},f=async a=>{var e,t;s.value=!0,c.value=null;try{const r=await o.post("/devices",a);return l.value.push(r.data),r.data}catch(r){c.value=((t=(e=r.response)==null?void 0:e.data)==null?void 0:t.message)||"ডিভাইস তৈরি করতে ব্যর্থ হয়েছে।",console.error("Error creating device:",r)}finally{s.value=!1}},h=async(a,e)=>{var t,r;s.value=!0,c.value=null;try{const v=await o.put(`/devices/${a}`,e),m=l.value.findIndex(U=>U.id===a);return m!==-1&&(l.value[m]=v.data),v.data}catch(v){c.value=((r=(t=v.response)==null?void 0:t.data)==null?void 0:r.message)||`ডিভাইস (ID: ${a}) আপডেট করতে ব্যর্থ হয়েছে।`,console.error(`Error updating device with id ${a}:`,v)}finally{s.value=!1}},w=async a=>{var e,t;s.value=!0,c.value=null;try{await o.delete(`/devices/${a}`),l.value=l.value.filter(r=>r.id!==a)}catch(r){c.value=((t=(e=r.response)==null?void 0:e.data)==null?void 0:t.message)||`ডিভাইস (ID: ${a}) মুছতে ব্যর্থ হয়েছে।`,console.error(`Error deleting device with id ${a}:`,r)}finally{s.value=!1}},g=async a=>{try{return await o.get(`/check-device-connection/${a}`),!0}catch(e){return console.error(e),!1}},$=async a=>{try{return s.value=!0,await o.post(`/devices/${a}/sync-catchup`),!0}catch(e){return console.error(e),!1}finally{s.value=!1}},n=async()=>{try{return s.value=!0,await o.post("/devices/sync-all"),!0}catch(a){return console.error(a),!1}finally{s.value=!1}};return{devices:d(()=>l.value),device:d(()=>i.value),loading:d(()=>s.value),error:d(()=>c.value),fetchDevices:p,fetchDevice:y,createDevice:f,updateDevice:h,deleteDevice:w,checkDeviceConnection:g,syncCatchup:$,syncAll:n}}),I=D("zkUser",()=>{const l=u([]),i=u(!1),s=u(null);async function c(){var n,a;i.value=!0,s.value=null;try{const e=await o.get("/zk-users");l.value=e.data}catch(e){s.value=((a=(n=e.response)==null?void 0:n.data)==null?void 0:a.message)||e.message}finally{i.value=!1}}async function p(n){var a;try{const e=await o.post("/zk-users",n);return await c(),e.data}catch(e){throw((a=e.response)==null?void 0:a.data)||e}}async function y(n,a){var e;try{const t=await o.put(`/zk-users/${n}`,a);return await c(),t.data}catch(t){throw((e=t.response)==null?void 0:e.data)||t}}async function f(n){var a;try{const e=await o.delete(`/zk-users/${n}`);return await c(),e.data}catch(e){throw((a=e.response)==null?void 0:a.data)||e}}async function h(n){var a;try{const{data:e}=await o.post(`/users/${encodeURIComponent(n)}/push`);return e}catch(e){throw((a=e.response)==null?void 0:a.data)||e}}async function w(n){var a;try{const{data:e}=await o.get(`/users/${encodeURIComponent(n)}/devices`);return e}catch(e){throw((a=e.response)==null?void 0:a.data)||e}}async function g(n){var a;try{const{data:e}=await o.post(`/devices/${n}/pull-users`);return await c(),e}catch(e){throw((a=e.response)==null?void 0:a.data)||e}}async function $(n,{diff:a=!0}={}){var e;try{const t=a?"?diff=true":"?diff=false",{data:r}=await o.post(`/devices/${n}/sync-catchup${t}`);return r}catch(t){throw((e=t.response)==null?void 0:e.data)||t}}return{users:l,loading:i,error:s,fetchUsers:c,createUser:p,updateUser:y,deleteUser:f,pushUser:h,getUserDevices:w,pullUsersFromDevice:g,syncCatchupUsers:$}});export{I as a,C as u};
