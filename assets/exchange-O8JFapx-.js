import{C as j,r as v,D as r}from"./index-Bo_LXk9C.js";const U=j("exchange",()=>{const d=v([]),o=v([]),h=v(null),l=v(!1),s=v(null),g=v(new Date().toISOString().substring(0,7)),p=v("");async function f(a={}){var n,t;l.value=!0,s.value=null;try{const e=await r.get("/all-exchanges",{params:a});d.value=e==null?void 0:e.data}catch(e){s.value=((t=(n=e.response)==null?void 0:n.data)==null?void 0:t.message)||"Failed to fetch exchanges"}finally{l.value=!1}}async function y({payload:a}){var n,t;l.value=!0,s.value=null;try{const e=await r.get(`/exchanges?type=${a.type}`,{params:a});o.value=e.data.data}catch(e){s.value=((t=(n=e.response)==null?void 0:n.data)==null?void 0:t.message)||"Failed to fetch exchanges"}finally{l.value=!1}}async function x(a){var n,t;l.value=!0,s.value=null;try{const e=await r.get(`/exchanges/${a}`);h.value=e.data}catch(e){s.value=((t=(n=e.response)==null?void 0:n.data)==null?void 0:t.message)||`Failed to fetch exchange with ID ${a}`}finally{l.value=!1}}async function m(a){var n,t,e,c;l.value=!0,s.value=null;try{const u=await r.post("/exchanges",a);return o.value.push((n=u==null?void 0:u.data)==null?void 0:n.data),(t=u==null?void 0:u.data)==null?void 0:t.data}catch(u){s.value=((c=(e=u.response)==null?void 0:e.data)==null?void 0:c.message)||"Failed to create exchange"}finally{l.value=!1}}async function w(a,n){var t,e;l.value=!0,s.value=null;try{const c=await r.put(`/exchanges/${a}`,n),u=o.value.findIndex(i=>i.id===a);u!==-1&&(o.value[u]=c.data)}catch(c){s.value=((e=(t=c.response)==null?void 0:t.data)==null?void 0:e.message)||`Failed to update exchange with ID ${a}`}finally{l.value=!1}}async function $(a,n){var t,e;l.value=!0,s.value=null;try{const c=await r.put(`/attachment-upload/exchanges/${a}`,n),u=o.value.findIndex(i=>i.id===a);u!==-1&&(o.value[u]=c.data)}catch(c){s.value=((e=(t=c.response)==null?void 0:t.data)==null?void 0:e.message)||`Failed to update exchange with ID ${a}`}finally{l.value=!1}}async function F(a){var n,t;l.value=!0,s.value=null;try{await r.delete(`/exchanges/${a}`),o.value=o.value.filter(e=>e.id!==a)}catch(e){s.value=((t=(n=e.response)==null?void 0:n.data)==null?void 0:t.message)||`Failed to delete exchange with ID ${a}`}finally{l.value=!1}}async function I(a){var n,t;l.value=!0,s.value=null;try{const e=await r.post(`/exchanges/${a}/handover-accept`);h.value=e.data}catch(e){s.value=((t=(n=e.response)==null?void 0:n.data)==null?void 0:t.message)||`Failed to accept handover for exchange ID ${a}`}finally{l.value=!1}}async function D(a){var n,t;l.value=!0,s.value=null;try{const e=await r.post(`/exchanges/${a}/in-charge-accept`);h.value=e.data}catch(e){s.value=((t=(n=e.response)==null?void 0:n.data)==null?void 0:t.message)||`Failed to accept in-charge for exchange ID ${a}`}finally{l.value=!1}}async function E(a){var n,t;l.value=!0,s.value=null;try{const e=await r.post(`/exchanges/${a}/recommend-accept`);h.value=e.data}catch(e){s.value=((t=(n=e.response)==null?void 0:n.data)==null?void 0:t.message)||`Failed to recommend exchange ID ${a}`}finally{l.value=!1}}async function A(a){var n,t;l.value=!0,s.value=null;try{const e=await r.post(`/exchanges/${a}/approve`);h.value=e.data}catch(e){s.value=((t=(n=e.response)==null?void 0:n.data)==null?void 0:t.message)||`Failed to approve exchange ID ${a}`}finally{l.value=!1}}async function S(a,n){var t,e;l.value=!0,s.value=null;try{const c=await r.post(`/exchanges/${a}/reject`,{rejection_reason:n});h.value=c.data}catch(c){s.value=((e=(t=c.response)==null?void 0:t.data)==null?void 0:e.message)||`Failed to reject exchange ID ${a}`}finally{l.value=!1}}return{all_exchanges:d,exchanges:o,selectedMonth:g,selectedStatus:p,exchange:h,loading:l,error:s,fetchAllExchanges:f,fetchExchanges:y,fetchExchange:x,createExchange:m,updateExchange:w,deleteExchange:F,handoverAccept:I,inChargeAccept:D,recommendByAccept:E,approvedByAccept:A,rejectExchange:S,fetchFileUpload:async a=>{var n,t;try{return l.value=!0,(await r.post("attachment-upload",a,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(e){s.value=((t=(n=e.response)==null?void 0:n.data)==null?void 0:t.message)||"Something went wrong"}finally{l.value=!1}},uploadAttachmentExchange:$}});export{U as u};
