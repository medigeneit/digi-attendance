import{u as N,b as O,r as D,e as R,q as T,C as H,c as o,o as r,a as e,g as h,f as E,y as p,h as F,v as j,k as M,F as x,x as b,j as m,t as a,i as v}from"./index-CZOHe0wI.js";import{_ as I}from"./EmployeeFilter-DDjGmEfs.js";import{L as W}from"./LoaderView-Buve6p9r.js";import{_ as C}from"./DisplayFormattedWorkingHours-DgoY7UBJ.js";import{S as G}from"./SelectedEmployeeCard-CRU5Oiwq.js";import{u as z}from"./leave-application-BC4JpZhe.js";import{u as P}from"./user-SVVncRFn.js";import"./company-BVsHqBcr.js";import"./department-DmV4ZYqS.js";import"./EmployeeDropdownInput-BhqQxiC-.js";import"./SelectDropdown-DUz_2YCN.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./UserChip-ZiY4mkZH.js";const J={class:"px-4 space-y-4"},Q={class:"flex flex-wrap gap-4"},X={key:0,class:"flex justify-between gap-4 text-sm"},Y={class:"space-y-5"},Z={class:"text-base font-semibold text-blue-400 mb-2 text-center capitalize"},K={class:"text-gray-500"},ee={key:0,class:"overflow-x-auto rounded border bg-white"},te={class:"min-w-full table-auto border-collapse border border-gray-200 bg-white rounded-md text-sm"},se={class:"border border-gray-300 px-2 text-center"},ae={class:"border border-gray-300 px-2 text-center"},re={class:"border border-gray-300 px-2 text-center"},oe={class:"border border-gray-300 px-2 text-center"},le={class:"border border-gray-300 px-2 text-center"},ne={class:"border border-gray-300 px-2 text-center"},de={class:"border border-gray-300 px-2 text-center"},ce={class:"border border-gray-300 px-2 text-center"},ie={class:"border border-gray-300 px-2 text-center"},pe={class:"border border-gray-300 px-2 text-center"},ue={class:"border border-gray-300 px-2 text-center"},_e={class:"border border-gray-300 px-2 text-center !py-0.5"},he={key:1,class:"overflow-x-auto rounded border bg-white"},ye={class:"min-w-full text-sm text-left"},xe={class:"p-2"},be={class:"p-2"},ge={class:"p-2"},fe={class:"p-2"},me={class:"p-2 whitespace-pre-line"},ve={class:"p-2 whitespace-pre-line"},we={class:"p-2 whitespace-pre-line"},ke={class:"p-2 text-sm text-gray-600"},Se={key:2,class:"overflow-x-auto rounded border bg-white"},De={class:"min-w-full text-sm text-left"},Ce={class:"p-2"},Ae={class:"p-2"},Le={class:"p-2"},qe={class:"p-2"},$e={class:"p-2 whitespace-pre-line"},Te={class:"p-2 whitespace-pre-line"},Me={class:"p-2 whitespace-pre-line"},Ue={class:"p-2 whitespace-pre-line text-center"},Ve=["href"],Be={key:1,class:"text-gray-400"},Ne={class:"p-2 whitespace-pre-line"},Oe={class:"p-2 text-sm text-gray-600"},Re={key:3,class:"overflow-x-auto rounded border bg-white"},He={class:"min-w-full text-sm text-left"},Ee={class:"p-2"},Fe={class:"p-2"},je={class:"p-2"},Ie={class:"p-2"},We={class:"p-2 whitespace-pre-line"},Ge={class:"p-2 whitespace-pre-line"},ze={class:"p-2 text-sm text-gray-600"},Pe={key:4,class:"overflow-x-auto rounded border bg-white"},Je={class:"min-w-full text-sm text-left"},Qe={class:"p-2"},Xe={class:"p-2"},Ye={class:"p-2"},Ze={class:"p-2"},Ke={class:"p-2"},et={class:"p-2"},tt={class:"p-2 whitespace-pre-line"},st={class:"p-2 text-sm text-gray-600"},bt={__name:"MonthWiseApplicationLog",setup(at){const w=N(),u=O(),A=P(),k=z(),g=D(null),_=D(u.query.date||k.selectedMonth||new Date().toISOString().slice(0,7)),l=D({company_id:u.query.company_id||"",department_id:u.query.department_id||"all",line_type:u.query.line_type||"all",employee_id:u.query.employee_id||"",category:""}),L=async n=>{n?(await A.fetchUser(n),g.value=A.user):g.value=null},S=async()=>{l.value.employee_id&&_.value&&await k.getMonthlyApplicationLog(l.value.employee_id,_.value)};R(async()=>{l.value.employee_id&&await L(l.value.employee_id),l.value.employee_id&&_.value&&await S()}),T(()=>l.value.employee_id,async(n,s)=>{n?(await L(n),_.value&&await S(),w.replace({query:{...u.query,employee_id:n}})):g.value=null},{immediate:!0}),T(_,n=>{w.replace({query:{...u.query,date:n}}),l.value.employee_id&&n&&S()},{immediate:!0});const U=()=>w.go(-1),q=n=>new Date(n).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),$=n=>new Date(`1970-01-01T${n}`).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),f=n=>`${new Date(n).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})}`,V=()=>{w.replace({query:{...u.query,company_id:l.value.company_id,department_id:l.value.department_id,line_type:l.value.line_type,employee_id:l.value.employee_id}})},B={exchange_shift:"ExchangeShiftShow",exchange_offday:"ExchangeOffdayShow"};return(n,s)=>{const y=H("RouterLink");return r(),o("div",J,[e("div",{class:"flex items-center justify-between gap-2"},[e("button",{class:"btn-3",onClick:U},s[5]||(s[5]=[e("i",{class:"far fa-arrow-left"},null,-1),e("span",{class:"hidden md:flex"},"Back",-1)])),s[6]||(s[6]=e("h1",{class:"title-md md:title-lg flex-wrap text-center"},"Monthly Application Log",-1)),s[7]||(s[7]=e("div",null,null,-1))]),e("div",Q,[p(I,{company_id:l.value.company_id,"onUpdate:company_id":s[0]||(s[0]=d=>l.value.company_id=d),department_id:l.value.department_id,"onUpdate:department_id":s[1]||(s[1]=d=>l.value.department_id=d),employee_id:l.value.employee_id,"onUpdate:employee_id":s[2]||(s[2]=d=>l.value.employee_id=d),line_type:l.value.line_type,"onUpdate:line_type":s[3]||(s[3]=d=>l.value.line_type=d),"with-type":!0,"initial-value":n.$route.query,onFilterChange:V},null,8,["company_id","department_id","employee_id","line_type","initial-value"]),e("div",null,[F(e("input",{id:"monthSelect",type:"month","onUpdate:modelValue":s[4]||(s[4]=d=>_.value=d),onChange:S,class:"input-1"},null,544),[[j,_.value]])])]),g.value?(r(),o("div",X,[p(G,{user:g.value},null,8,["user"])])):h("",!0),M(k).loading?(r(),E(W,{key:1})):h("",!0),e("div",Y,[(r(!0),o(x,null,b(M(k).applicationLog,(d,i)=>(r(),o("div",{key:i,class:"bg-gray-50 p-4 rounded shadow"},[e("h2",Z,[m(a(i.replaceAll("_"," "))+" ",1),e("span",K,"("+a(d.length)+")",1)]),i==="overtime"?(r(),o("div",ee,[e("table",te,[s[9]||(s[9]=e("thead",null,[e("tr",{class:"bg-gray-200 *:py-1"},[e("th",{class:"border border-gray-300 px-2 text-center"},"#"),e("th",{class:"border border-gray-300 px-2 text-center"},"Date"),e("th",{class:"border border-gray-300 px-2 text-center"},"Type"),e("th",{class:"border border-gray-300 px-2 text-center"},"Shift"),e("th",{class:"border border-gray-300 px-2 text-center"},"Check-In"),e("th",{class:"border border-gray-300 px-2 text-center"},"Check-Out"),e("th",{class:"border border-gray-300 px-2 text-center"},"Working (hour)"),e("th",{class:"border border-gray-300 px-2 text-center"},"Request (hour)"),e("th",{class:"border border-gray-300 px-2 text-center"},"Approved (hour)"),e("th",{class:"border border-gray-300 px-2 text-center"},"Details"),e("th",{class:"border border-gray-300 px-2 text-center"},"Status"),e("th",{class:"border border-gray-300 px-2 text-center"},"Action")])],-1)),e("tbody",null,[(r(!0),o(x,null,b(d,(t,c)=>(r(),o("tr",{key:`${i}-${c}`,class:"border-b border-gray-200 hover:bg-blue-200 *:py-2"},[e("td",se,a(c+1),1),e("td",ae,a(new Date(t.date).toLocaleDateString("en-GB",{day:"2-digit",month:"long",year:"numeric"})),1),e("td",re,a(t.duty_type),1),e("td",oe,a(t.shift),1),e("td",le,a(t.check_in||"- : -"),1),e("td",ne,a(t.check_out||"- : -"),1),e("td",de,[p(C,{workingHours:t.working_hours},null,8,["workingHours"])]),e("td",ce,[p(C,{workingHours:t.request_overtime_hours},null,8,["workingHours"])]),e("td",ie,[p(C,{workingHours:t.approval_overtime_hours},null,8,["workingHours"])]),e("td",pe,a(t.work_details||""),1),e("td",ue,a(t.status||"Pending"),1),e("td",_e,[p(y,{to:{name:"MyOvertimeShow",params:{id:t.id}},class:"text-blue-800"},{default:v(()=>s[8]||(s[8]=[e("i",{class:"far fa-eye text-lg"},null,-1)])),_:2,__:[8]},1032,["to"])])]))),128))])])])):h("",!0),i==="leave_application"?(r(),o("div",he,[e("table",ye,[s[11]||(s[11]=e("thead",{class:"bg-gray-100 text-gray-700 text-xs uppercase"},[e("tr",null,[e("th",{class:"p-2"},"#"),e("th",{class:"p-2"},"Create Date"),e("th",{class:"p-2"},"Last Working Date"),e("th",{class:"p-2"},"Resumption Date"),e("th",{class:"p-2"},"Type"),e("th",{class:"p-2"},"Reason"),e("th",{class:"p-2"},"Status"),e("th",{class:"p-2"},"Action")])],-1)),e("tbody",null,[(r(!0),o(x,null,b(d,(t,c)=>(r(),o("tr",{key:`${i}-${c}`,class:"border-t hover:bg-gray-50 text-sm"},[e("td",xe,a(c+=1),1),e("td",be,a(f(t.create_date)),1),e("td",ge,a(t.from),1),e("td",fe,a(t.to),1),e("td",me,a(t.application_types),1),e("td",ve,a(t.reason),1),e("td",we,a(t.status),1),e("td",ke,[p(y,{to:{name:"LeaveApplicationShow",params:{id:t.id}},class:"inline-flex items-center gap-1 text-blue-600 hover:underline"},{default:v(()=>s[10]||(s[10]=[e("i",{class:"far fa-eye"},null,-1),m(" View ")])),_:2,__:[10]},1032,["to"])])]))),128))])])])):h("",!0),i==="short_leave"?(r(),o("div",Se,[e("table",De,[s[14]||(s[14]=e("thead",{class:"bg-gray-100 text-gray-700 text-xs uppercase"},[e("tr",null,[e("th",{class:"p-2"},"#"),e("th",{class:"p-2"},"Create Date"),e("th",{class:"p-2"},"Type"),e("th",{class:"p-2"},"Date"),e("th",{class:"p-2"},"Check In"),e("th",{class:"p-2"},"Check Out"),e("th",{class:"p-2"},"Duration"),e("th",{class:"p-2"},"Attachment"),e("th",{class:"p-2"},"Status"),e("th",{class:"p-2"},"Action")])],-1)),e("tbody",null,[(r(!0),o(x,null,b(d,(t,c)=>(r(),o("tr",{key:`${i}-${c}`,class:"border-t hover:bg-gray-50 text-sm"},[e("td",Ce,a(c+=1),1),e("td",Ae,a(f(t.create_date)),1),e("td",Le,a(t.application_types),1),e("td",qe,a(t.date),1),e("td",$e,a($(t.start_time)),1),e("td",Te,a($(t.end_time)),1),e("td",Me,a(t.duration)+" m ",1),e("td",Ue,[t.attachment?(r(),o("a",{key:0,href:t.attachment,target:"_blank",rel:"noopener",class:"text-blue-600 hover:underline"},s[12]||(s[12]=[e("i",{class:"far fa-eye"},null,-1)]),8,Ve)):(r(),o("span",Be,"No file"))]),e("td",Ne,a(t.status),1),e("td",Oe,[p(y,{to:{name:"ShortLeaveShow",params:{id:t.id}},class:"inline-flex items-center gap-1 text-blue-600 hover:underline"},{default:v(()=>s[13]||(s[13]=[e("i",{class:"far fa-eye"},null,-1),m(" View ")])),_:2,__:[13]},1032,["to"])])]))),128))])])])):h("",!0),i==="exchange_offday"||i==="exchange_shift"?(r(),o("div",Re,[e("table",He,[s[16]||(s[16]=e("thead",{class:"bg-gray-100 text-gray-700 text-xs uppercase"},[e("tr",null,[e("th",{class:"p-2"},"#"),e("th",{class:"p-2"},"Create Date"),e("th",{class:"p-2"},"Current Date"),e("th",{class:"p-2"},"Exchange Date"),e("th",{class:"p-2"},"Shift"),e("th",{class:"p-2"},"Status"),e("th",{class:"p-2"},"Action")])],-1)),e("tbody",null,[(r(!0),o(x,null,b(d,(t,c)=>(r(),o("tr",{key:`${i}-${c}`,class:"border-t hover:bg-gray-50 text-sm"},[e("td",Ee,a(c+=1),1),e("td",Fe,a(f(t.create_date)),1),e("td",je,a(t.current_date),1),e("td",Ie,a(t.exchange_date),1),e("td",We,a((t==null?void 0:t.shift)||"N/A"),1),e("td",Ge,a(t.status),1),e("td",ze,[p(y,{to:{name:B[t.type],params:{id:t.id}},class:"inline-flex items-center gap-1 text-blue-600 hover:underline"},{default:v(()=>s[15]||(s[15]=[e("i",{class:"far fa-eye"},null,-1),m(" View ")])),_:2,__:[15]},1032,["to"])])]))),128))])])])):h("",!0),i==="manual_attendance"?(r(),o("div",Pe,[e("table",Je,[s[18]||(s[18]=e("thead",{class:"bg-gray-100 text-gray-700 text-xs uppercase"},[e("tr",null,[e("th",{class:"p-2"},"#"),e("th",{class:"p-2"},"Create Date"),e("th",{class:"p-2"},"Date"),e("th",{class:"p-2"},"Type"),e("th",{class:"p-2"},"Check In"),e("th",{class:"p-2"},"Check Out"),e("th",{class:"p-2"},"Status"),e("th",{class:"p-2"},"Action")])],-1)),e("tbody",null,[(r(!0),o(x,null,b(d,(t,c)=>(r(),o("tr",{key:`${i}-${c}`,class:"border-t hover:bg-gray-50 text-sm"},[e("td",Qe,a(c+=1),1),e("td",Xe,a(f(t.create_date)),1),e("td",Ye,a(f(t.check_in||t.check_out)),1),e("td",Ze,a(t.application_types),1),e("td",Ke,a(q(t.check_in)||"N/A"),1),e("td",et,a(q(t.check_out)||"N/A"),1),e("td",tt,a(t.status),1),e("td",st,[p(y,{to:{name:"ManualAttendanceShow",params:{id:t.id}},class:"inline-flex items-center gap-1 text-blue-600 hover:underline"},{default:v(()=>s[17]||(s[17]=[e("i",{class:"far fa-eye"},null,-1),m(" View ")])),_:2,__:[17]},1032,["to"])])]))),128))])])])):h("",!0)]))),128))])])}}};export{bt as default};
