import{r as h,e as E,$ as V,c as i,o as l,a as e,g as f,t as n,p as m,F as B,G as F,b as G,u as z,d as K,a3 as W,n as J,q as Q,f as X,k as w,i as Y}from"./index-CX4moQfK.js";import{u as D}from"./overtime-DtJoQTcK.js";import{_ as Z}from"./AcceptAndRejectHandler-Ccyn7Ekp.js";import{_ as S}from"./DisplayFormattedWorkingHours-BcZNfKEe.js";import{_ as ee}from"./TimePickerAsFloatHour-Bk-zbHpg.js";const te={key:0,class:"fixed inset-0 z-50 flex justify-center items-center bg-black/50"},se={class:"modal-card max-w-sm p-4"},re={class:"grid grid-cols-3 gap-2 border p-3"},oe={class:"border-x"},ne={class:"col-span-full text-xs md:text-sm border-t pt-3"},ae={class:"flex justify-between gap-2 mt-2"},le={__name:"DeleteOvertime",props:{overtime:Object,onSuccess:{type:Function,default:null}},setup(r){const u=r,v=D(),p=h(null),y=h(null),c=h(!1),b=async()=>{await v.deleteOvertime(u.overtime.id),u.onSuccess&&await u.onSuccess(),k()},s=()=>{c.value=!0,g()},k=()=>{c.value=!1};function g(){F(()=>{var d;(d=p.value)==null||d.focus()})}function x(d){var a,o;c.value&&(d.key==="ArrowLeft"?(a=y.value)==null||a.focus():d.key==="ArrowRight"&&((o=p.value)==null||o.focus()))}return E(()=>{window.addEventListener("keydown",x)}),V(()=>{window.removeEventListener("keydown",x)}),(d,a)=>(l(),i(B,null,[e("i",{onClick:s,class:"fa fa-trash cursor-pointer text-red-600"}),c.value?(l(),i("div",te,[e("div",se,[a[0]||(a[0]=e("h3",{class:"title-lg"},"Delete Overtime",-1)),e("div",re,[e("div",null,[e("b",null,n(new Date(r.overtime.date).toLocaleDateString("en-GB",{day:"2-digit",month:"long",year:"numeric"})),1)]),e("div",oe,[e("b",null,n(r.overtime.duty_type),1)]),e("div",null,[e("b",null,[m(S,{workingHours:r.overtime.request_overtime_hours},null,8,["workingHours"])])]),e("div",ne,n(r.overtime.work_details),1)]),e("div",ae,[e("button",{type:"button",ref_key:"cancelBtnRef",ref:y,class:"btn-3 focus:ring-2 ring-offset-2",onClick:k}," Cancel ",512),e("button",{type:"button",ref_key:"confirmBtnRef",ref:p,class:"btn-2-red focus:ring-2 ring-offset-2",onClick:b}," Delete ",512)])])])):f("",!0)],64))}},ie={key:0,class:"fixed inset-0 z-50 flex justify-center items-center bg-black/50"},ce={class:"modal-card max-w-sm"},de={class:"flex justify-between gap-2 mt-4"},ue={__name:"UpdateApprovalTime",props:{overtime:Object,onSuccess:{type:Function,default:null}},setup(r){const u=r,v=D(),p=h(null),y=h(null),c=h(!1),b=h(u.overtime.approval_overtime_hours||u.overtime.request_overtime_hours||""),s=async()=>{if(!b.value)return alert("Please set approval time!");await v.updateApprovalTime(u.overtime.id,b.value),u.onSuccess&&await u.onSuccess(),g()},k=()=>{c.value=!0,x()},g=()=>{c.value=!1};function x(){F(()=>{var a;(a=p.value)==null||a.focus()})}function d(a){var o,_;c.value&&(a.key==="ArrowLeft"?(o=y.value)==null||o.focus():a.key==="ArrowRight"&&((_=p.value)==null||_.focus()))}return E(()=>{window.addEventListener("keydown",d)}),V(()=>{window.removeEventListener("keydown",d)}),(a,o)=>(l(),i(B,null,[e("i",{onClick:k,class:"fa fa-edit cursor-pointer text-sky-600"}),c.value?(l(),i("div",ie,[e("div",ce,[o[1]||(o[1]=e("h3",{class:"title-lg"},"Update Approval Time",-1)),o[2]||(o[2]=e("hr",{class:"my-2"},null,-1)),m(ee,{modelValue:b.value,"onUpdate:modelValue":o[0]||(o[0]=_=>b.value=_),"minute-interval":5,required:!0,"hour-min":2,"hour-max":16},null,8,["modelValue"]),o[3]||(o[3]=e("hr",{class:"my-2"},null,-1)),e("div",de,[e("button",{type:"button",ref_key:"cancelBtnRef",ref:y,class:"btn-3 focus:ring-2 ring-offset-2",onClick:g}," Cancel ",512),e("button",{type:"button",ref_key:"confirmBtnRef",ref:p,class:"btn-2-green focus:ring-2 ring-offset-2",onClick:s}," Update Time ",512)])])])):f("",!0)],64))}},pe={class:"space-y-4"},fe={class:"card-bg p-4 gap-1"},ye={class:"flex flex-wrap gap-x-8 gap-y-2"},me={key:0,class:"text-gray-700"},be={class:"ml-1"},ge={key:1,class:"text-gray-700"},xe={class:"ml-1"},_e={key:2,class:"text-gray-700"},he={class:"ml-1"},ve={key:3,class:"text-gray-700"},ke={class:"ml-1"},we={key:4,class:"text-gray-700"},Se={class:"ml-1"},Be={class:"overflow-x-auto"},De={class:"min-w-full table-auto border-collapse border border-gray-200 bg-white rounded-md text-sm"},Ae={class:"border border-gray-300 px-2 text-center"},Re={class:"border border-gray-300 px-2 text-center"},$e={class:"border border-gray-300 px-2 text-center"},Ce={class:"border border-gray-300 px-2 text-center"},Oe={class:"border border-gray-300 px-2 text-center"},Le={class:"border border-gray-300 px-2 text-center"},je={class:"border border-gray-300 px-2 text-center"},Ne={class:"border border-gray-300 px-2 text-center"},Ue={class:"border border-gray-300 px-2 text-center"},He={class:"flex items-center justify-center gap-4"},Me={class:"border border-gray-300 px-2 text-center"},Te={class:"border border-gray-300 px-2 text-center"},qe={class:"border border-gray-300 px-2 text-center !py-0.5"},Ee={class:"flex items-center justify-center gap-x-4"},Ve={key:0,class:"border border-dashed px-4 rounded-xl"},Fe={key:0},We={__name:"OvertimeDataList",props:{user:Object,onUpdate:{type:Function,default:null}},setup(r){G(),z();const u=K(),v=D(),p=W(),y=r,c=async()=>{y.onUpdate?await y.onUpdate():await p.fetchCountNotifications()};return(b,s)=>{var g,x,d,a,o,_,A,R,$,C,O,L,j,N,U;const k=J("RouterLink");return l(),i("div",pe,[e("div",fe,[e("div",ye,[(g=r.user)!=null&&g.employee_id?(l(),i("p",me,[s[0]||(s[0]=e("span",{class:"text-gray-400"},"Employee ID:",-1)),e("strong",be,n(((x=r.user)==null?void 0:x.employee_id)||"N/A"),1)])):f("",!0),(d=r.user)!=null&&d.name?(l(),i("p",ge,[s[1]||(s[1]=e("span",{class:"text-gray-400"},"Name:",-1)),e("strong",xe,n((a=r.user)==null?void 0:a.name),1)])):f("",!0),(_=(o=r.user)==null?void 0:o.designation)!=null&&_.title?(l(),i("p",_e,[s[2]||(s[2]=e("span",{class:"text-gray-400"},"Designation:",-1)),e("strong",he,n(((R=(A=r.user)==null?void 0:A.designation)==null?void 0:R.title)||"N/A"),1)])):f("",!0),(C=($=r.user)==null?void 0:$.department)!=null&&C.name?(l(),i("p",ve,[s[3]||(s[3]=e("span",{class:"text-gray-400"},"Department:",-1)),e("strong",ke,n(((L=(O=r.user)==null?void 0:O.department)==null?void 0:L.name)||"N/A"),1)])):f("",!0),(j=r.user)!=null&&j.phone?(l(),i("p",we,[s[4]||(s[4]=e("span",{class:"text-gray-400"},"Phone:",-1)),e("strong",Se,n((N=r.user)==null?void 0:N.phone),1)])):f("",!0)])]),e("div",Be,[e("table",De,[s[7]||(s[7]=e("thead",null,[e("tr",{class:"bg-gray-200 *:py-1"},[e("th",{class:"border border-gray-300 px-2 text-center"},"#"),e("th",{class:"border border-gray-300 px-2 text-center"},"Date"),e("th",{class:"border border-gray-300 px-2 text-center"},"Type"),e("th",{class:"border border-gray-300 px-2 text-center"},"Shift"),e("th",{class:"border border-gray-300 px-2 text-center"},"Check-In"),e("th",{class:"border border-gray-300 px-2 text-center"},"Check-Out"),e("th",{class:"border border-gray-300 px-2 text-center"},"Working (hour)"),e("th",{class:"border border-gray-300 px-2 text-center"},"Request (hour)"),e("th",{class:"border border-gray-300 px-2 text-center"},"Approved (hour)"),e("th",{class:"border border-gray-300 px-2 text-center"},"Details"),e("th",{class:"border border-gray-300 px-2 text-center"},"Status"),e("th",{class:"border border-gray-300 px-2 text-center"},"Action")])],-1)),e("tbody",null,[(l(!0),i(B,null,Q(w(v).overtimes,(t,P)=>{var H,M,T,q;return l(),i("tr",{key:t==null?void 0:t.id,class:"border-b border-gray-200 hover:bg-blue-200 *:py-2"},[e("td",Ae,n(P+1),1),e("td",Re,n(new Date(t.date).toLocaleDateString("en-GB",{day:"2-digit",month:"long",year:"numeric"})),1),e("td",$e,n(t.duty_type),1),e("td",Ce,n(t.shift),1),e("td",Oe,n(t.check_in||"- : -"),1),e("td",Le,n(t.check_out||"- : -"),1),e("td",je,[m(S,{workingHours:t.working_hours},null,8,["workingHours"])]),e("td",Ne,[m(S,{workingHours:t.request_overtime_hours},null,8,["workingHours"])]),e("td",Ue,[e("div",He,[m(S,{workingHours:t.approval_overtime_hours},null,8,["workingHours"]),t.recommend_by_user_id===((H=w(u).user)==null?void 0:H.id)||(T=(M=w(p).applicationApprovalPermissions)==null?void 0:M[t.id])!=null&&T.allow_recommend_by?(l(),X(ue,{key:0,overtime:t,onSuccess:c},null,8,["overtime"])):f("",!0)])]),e("td",Me,n(t.work_details||""),1),e("td",Te,n(t.status||"Pending"),1),e("td",qe,[e("div",Ee,[t.approval_overtime_hours&&Object.values(((q=w(p).applicationApprovalPermissions)==null?void 0:q[t.id])||{}).some(I=>I)?(l(),i("div",Ve,[m(Z,{class:"ml-auto",notificationType:"overtime_applications",applicationId:t.id,onSuccess:c,variant:1},null,8,["applicationId"])])):f("",!0),m(k,{to:{name:"MyOvertimeShow",params:{id:t.id}},class:"text-blue-800"},{default:Y(()=>s[5]||(s[5]=[e("i",{class:"far fa-eye text-lg"},null,-1)])),_:2,__:[5]},1032,["to"]),m(le,{overtime:t,onSuccess:c},null,8,["overtime"])])])])}),128)),((U=w(v).overtimes)==null?void 0:U.length)===0?(l(),i("tr",Fe,s[6]||(s[6]=[e("td",{colspan:"100",class:"p-2 text-center text-red-500"},"No overtimes found",-1)]))):f("",!0)])])])])}}};export{We as _};
