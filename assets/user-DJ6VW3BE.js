import{D as U,r as v,y as i,E as u}from"./index-B9Vl3tVE.js";const C=U("user",()=>{const o=v([]),p=v([]),d=v({}),f=v({}),r=v(null),n=v(!1),m=v(new Date().toISOString().substring(0,10)),g=i(()=>o.value),h=i(()=>d.value),y=i(()=>r.value);return{users:o,handoverUsers:p,user:d,error:r,isLoading:n,allUsers:g,singleUser:h,errorMessage:y,dashboardInfo:f,selectedDate:m,fetchUsers:async()=>{var s,a;try{n.value=!0;const e=await u.get("/users");o.value=e.data,r.value=null}catch(e){r.value=((a=(s=e.response)==null?void 0:s.data)==null?void 0:a.message)||"Something went wrong"}finally{n.value=!1}},fetchUser:async s=>{var a,e;try{n.value=!0;const l=(await u.get(`/users/${s}`)).data;return l&&(d.value=l),r.value=null,l}catch(t){r.value=((e=(a=t.response)==null?void 0:a.data)==null?void 0:e.message)||"Something went wrong"}finally{n.value=!1}},createUser:async s=>{var a,e;try{n.value=!0;const t=await u.post("/users",s);o.value.push(t.data.user),r.value=null}catch(t){r.value=((e=(a=t.response)==null?void 0:a.data)==null?void 0:e.message)||"Something went wrong"}finally{n.value=!1}},updateUser:async(s,a)=>{var e,t;try{n.value=!0;const l=await u.put(`/users/${s}`,a),c=o.value.findIndex(w=>w.id===s);return c!==-1&&(o.value[c]=l.data.user),r.value=null,l.data.user}catch(l){r.value=((t=(e=l.response)==null?void 0:e.data)==null?void 0:t.message)||"Something went wrong"}finally{n.value=!1}},deleteUser:async s=>{var a,e;try{n.value=!0,await u.delete(`/users/${s}`),o.value=o.value.filter(t=>t.id!==s),r.value=null}catch(t){r.value=((e=(a=t.response)==null?void 0:a.data)==null?void 0:e.message)||"Something went wrong"}finally{n.value=!1}},fetchUserDashboardData:async()=>{var s,a;try{n.value=!0;const t=(await u.get("/dashboard")).data;return t&&(f.value=t),r.value=null,t}catch(e){r.value=((a=(s=e.response)==null?void 0:s.data)==null?void 0:a.message)||"Something went wrong"}finally{n.value=!1}},fetchDepartmentWiseEmployees:async()=>{var s,a;try{n.value=!0;const e=await u.get("/department-wise-employees");o.value=e.data,r.value=null}catch(e){r.value=((a=(s=e.response)==null?void 0:s.data)==null?void 0:a.message)||"Something went wrong"}finally{n.value=!1}},fetchHandoverDepartmentWiseEmployees:async()=>{var s,a;try{n.value=!0;const e=await u.get("/department-handover-wise-employees");p.value=e.data,r.value=null}catch(e){r.value=((a=(s=e.response)==null?void 0:s.data)==null?void 0:a.message)||"Something went wrong"}finally{n.value=!1}},fetchUsersExcelExport:async s=>{var a,e;try{n.value=!0;const t=await u.get("/users",{params:{flag:"excel",companyName:s.data.companyName},responseType:"blob"}),l=window.URL.createObjectURL(new Blob([t.data])),c=document.createElement("a");c.href=l,c.setAttribute("download","users.xlsx"),document.body.appendChild(c),c.click(),c.remove(),r.value=null}catch(t){r.value=((e=(a=t.response)==null?void 0:a.data)==null?void 0:e.message)||"Something went wrong"}finally{n.value=!1}}}});export{C as u};
