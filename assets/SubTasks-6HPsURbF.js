import{b as _,e as h,C as x,c as o,o as a,a as t,y as f,i as k,j as g,k as d,g as b,F as w,x as R,w as T,t as r}from"./index-Dv63NlYr.js";import{s as v}from"./dom-CCkG-r61.js";import{u as C}from"./useTaskReportStore-ZlXi6cgs.js";const N={class:"mt-4"},S={class:"bg-white"},L={class:"flex mb-2 items-end"},V={key:0,class:"min-w-full bg-white shadow rounded-lg overflow-hidden"},B={key:0},D=["onClick"],A={class:"px-4 py-2"},E={class:"px-4 py-2 font-medium"},F={class:"px-4 py-2 font-medium"},M={class:"px-4 py-2 font-medium"},O={key:1,class:"text-center border py-4 text-gray-500"},$={__name:"SubTasks",setup(P){const n=C(),i=_(),u=i.params.id;return h(async()=>{await n.fetchTaskReports({task_id:u}),i.hash&&v(i.hash)}),(m,s)=>{var l,p;const c=x("RouterLink");return a(),o("div",N,[s[5]||(s[5]=t("hr",{class:"mb-2"},null,-1)),t("div",S,[t("div",L,[s[2]||(s[2]=t("h3",{class:"text-sm uppercase mt-4"},"Task Reports",-1)),f(c,{to:{name:"TaskReportAdd",params:{todoable_id:(l=d(n).task)==null?void 0:l.id},query:{todoable_type:"task"}},onClick:s[0]||(s[0]=e=>e.stopPropagation()),class:"btn-3 ml-auto inline-flex !my-1"},{default:k(()=>s[1]||(s[1]=[g("Add Report")])),_:1,__:[1]},8,["to"])]),d(n).loading?(a(),o("div",O,"Loading...")):(a(),o("table",V,[s[4]||(s[4]=t("thead",{class:"bg-gray-100"},[t("tr",null,[t("th",{class:"px-4 py-2 text-left"},"#"),t("th",{class:"px-4 py-2 text-left"},"Title"),t("th",{class:"px-4 py-2 text-left"},"Date"),t("th",{class:"px-4 py-2 text-left"},"Duration")])],-1)),t("tbody",null,[((p=d(n).task_reports)==null?void 0:p.length)===0?(a(),o("tr",B,s[3]||(s[3]=[t("td",{class:"px-4 py-4 font-medium text-gray-500 text-center",colspan:"10"},"NO REPORTS",-1)]))):b("",!0),(a(!0),o(w,null,R(d(n).task_reports,(e,y)=>(a(),o("tr",{key:e.id,class:"border-t hover:bg-gray-50 cursor-pointer",onClick:T(j=>m.goToShow(e.id),["prevent"]),role:"button"},[t("td",A,r(y+1),1),t("td",E,r(e.title),1),t("td",F,r(e.report_date),1),t("td",M,r(e.duration_hour)+" h "+r(e.duration_minute)+" m ",1)],8,D))),128))])]))])])}}};export{$ as default};
