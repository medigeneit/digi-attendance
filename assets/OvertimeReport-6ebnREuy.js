import{u as w,b as D,z as R,r as f,e as O,A,c as r,o as n,a as e,q as c,h as E,v as L,k as v,F as N,n as B,t as i,i as F}from"./index-D2XudXqW.js";import{_ as M}from"./EmployeeFilter-B01Hl13z.js";import{L as U}from"./LoaderView-DR-ecsZZ.js";import{u as T}from"./overtime-DwvuXx6W.js";import"./company-OF8UZBhv.js";import"./department-B5Sb__96.js";import"./SelectDropdown-D1VKLKcP.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./UserChip-CuT18WaH.js";const V={class:"space-y-2 px-4"},P={class:"flex flex-wrap items-center gap-2"},S={key:0,class:"text-center py-4"},j={key:1,class:"space-y-4"},H={key:0,class:"overflow-x-auto"},$={class:"table-auto w-full border text-sm bg-white"},z={class:"border p-2"},G={class:"border p-2"},I={class:"border p-2"},J={class:"border p-2"},K={class:"border p-2 text-center"},Q={class:"border p-2 text-center"},W={class:"border p-2 text-center"},X={class:"border p-2 text-center print:hidden"},Y={class:"flex justify-center items-center gap-4"},Z={key:1,class:"text-center text-red-500 text-xl italic mt-10"},pe={__name:"OvertimeReport",setup(ee){const m=w(),s=D(),d=T(),{reports:y,loading:x,selectedMonth:b}=R(d),l=f(s.query.date||b.value),a=f({company_id:s.query.company_id||"",department_id:s.query.department_id||"all",type:s.query.type||"all",employee_id:s.query.employee_id||""}),h=async()=>{var p,t,u,o;m.replace({query:{...s.query,company_id:(p=a.value)==null?void 0:p.company_id,department_id:(t=a.value)==null?void 0:t.department_id,type:(u=a.value)==null?void 0:u.type,employee_id:(o=a.value)==null?void 0:o.employee_id}}),a.value.company_id&&l.value&&d.getCompanyDepartmentOvertimeReport(l.value,a.value)},g=()=>{m.replace({query:{...s.query,date:l.value}}),a.value.company_id&&l.value&&d.getCompanyDepartmentOvertimeReport(l.value,a.value)},k=()=>m.go(-1),C=()=>{l.value&&d.exportCompanyDepartmentOvertimeExcel(l.value,a.value)},q=()=>{l.value&&d.exportCompanyDepartmentOvertimePdf(l.value,a.value)};return O(()=>{a.value.company_id&&l.value&&d.getCompanyDepartmentOvertimeReport(l.value,a.value)}),(p,t)=>{const u=A("RouterLink");return n(),r("div",V,[e("div",{class:"flex items-center justify-between gap-2"},[e("button",{class:"btn-3",onClick:k},t[5]||(t[5]=[e("i",{class:"far fa-arrow-left"},null,-1),e("span",{class:"hidden md:flex"},"Back",-1)])),t[8]||(t[8]=e("h1",{class:"title-md md:title-lg flex-wrap text-center"},"Monthly Overtime Report",-1)),e("div",{class:"flex gap-2"},[e("button",{onClick:C,class:"btn-3",title:"Download Excel"},t[6]||(t[6]=[e("i",{class:"far fa-file-excel text-2xl text-green-500"},null,-1)])),e("button",{onClick:q,class:"btn-3",title:"Download PDF"},t[7]||(t[7]=[e("i",{class:"far fa-file-pdf text-2xl text-red-500"},null,-1)]))])]),e("div",P,[c(M,{company_id:a.value.company_id,"onUpdate:company_id":t[0]||(t[0]=o=>a.value.company_id=o),department_id:a.value.department_id,"onUpdate:department_id":t[1]||(t[1]=o=>a.value.department_id=o),employee_id:a.value.employee_id,"onUpdate:employee_id":t[2]||(t[2]=o=>a.value.employee_id=o),category:a.value.category,"onUpdate:category":t[3]||(t[3]=o=>a.value.category=o),"with-type":!0,"initial-value":p.$route.query,onFilterChange:h},null,8,["company_id","department_id","employee_id","category","initial-value"]),e("div",null,[E(e("input",{id:"user-filter","onUpdate:modelValue":t[4]||(t[4]=o=>l.value=o),onChange:g,type:"month",class:"input-1"},null,544),[[L,l.value]])])]),v(x)?(n(),r("div",S,[c(U)])):(n(),r("div",j,[v(y).length?(n(),r("div",H,[e("table",$,[t[10]||(t[10]=e("thead",{class:"bg-gray-100"},[e("tr",null,[e("th",{class:"border p-2 text-left"},"#"),e("th",{class:"border p-2 text-left"},"Employee"),e("th",{class:"border p-2 text-left"},"Company"),e("th",{class:"border p-2 text-left"},"Department"),e("th",{class:"border p-2 text-center"},"Overtime Entries"),e("th",{class:"border p-2 text-center"},"Total Request Hours"),e("th",{class:"border p-2 text-center"},"Total Approval Hours"),e("th",{class:"border p-2 text-center print:hidden"},"Action")])],-1)),e("tbody",null,[(n(!0),r(N,null,B(v(y),(o,_)=>(n(),r("tr",{key:_,class:"hover:bg-blue-50"},[e("td",z,i(_+1),1),e("td",G,i(o.user_name||"N/A"),1),e("td",I,i(o.company_name||"N/A"),1),e("td",J,i(o.department_name||"N/A"),1),e("td",K,i(o.total_overtime_entries),1),e("td",Q,i(o.total_request_overtime_hours),1),e("td",W,i(o.total_approval_overtime_hours),1),e("td",X,[e("div",Y,[c(u,{to:{name:"OvertimeList",query:{...a.value,employee_id:o.user_id,date:l.value}},class:"text-blue-800"},{default:F(()=>t[9]||(t[9]=[e("i",{class:"far fa-eye text-lg"},null,-1)])),_:2,__:[9]},1032,["to"])])])]))),128))])])])):(n(),r("div",Z," No data available for this month. "))]))])}}};export{pe as default};
