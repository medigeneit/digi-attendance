import{r as h,x as k,e as V,A as W,c as i,o as d,I as y,a as D,F as p,y as M,t as _,g as N}from"./index-D7gheMw-.js";const Y={class:"grid grid-cols-7 *:text-center *:p-2 *:border-r *:border-b *:text-blue-800 *:text-sm"},j={class:"flex flex-col"},q={key:0,class:"p-2 border-r border-t"},G={__name:"CalenderView",props:{month:{type:String,required:!0,validator:g=>/^\d{4}-(0[1-9]|1[0-2])$/.test(g)}},emits:["change"],setup(g,{emit:b}){const v=g,x=b,f=h(),m=h(),S=h(),w=h(),I=["Saturday","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday"];function O(e,n,s,a){const t=[];for(let c=s-1;c>=0;c--){const r=a-c,o=new Date(e,n-1,r);t.push({date:o,day:o.getDate(),month:o.getMonth()+1,year:o.getFullYear(),isCurrentMonth:!1})}return t}function $(e,n,s){const a=[];for(let t=1;t<=s;t++){const r={date:new Date(e,n,t),day:t,month:n+1,year:e,isCurrentMonth:!0};a.push(r)}return a}function F(e,n,s){const a=[...e],t=Math.ceil(a.length/7)*7,c=1;for(let r=0;a.length<t;r++){const o=new Date(n,s+1,c+r);a.push({date:o,day:o.getDate(),month:o.getMonth()+1,year:o.getFullYear(),isCurrentMonth:!1})}return a}function T(e,n){const s=new Date(e,n,1),t=new Date(e,n+1,0).getDate(),r=(s.getDay()+1)%7,E=new Date(e,n,0).getDate();let l=[];l=[...O(e,n,r,E)];const u=$(e,n,t);return S.value=u[0],w.value=u[u.length-1],l=[...l,...u],l=[...F(l,e,n)],f.value=l[0],m.value=l[l.length-1],l}const L=k(()=>{const[e,n]=v.month.split("-"),s=parseInt(e),a=parseInt(n)-1;return console.log({yearStr:e,monthStr:n}),T(s,a)}),B=k(()=>{const e=L.value,n=[];for(let s=0;s<e.length;s+=7)n.push(e.slice(s,s+7));return n});function C(){x("change",{gridStartDate:f.value,gridEndDate:m.value,startOfMonth:S.value,endOfMonth:w.value})}return V(()=>C()),W(()=>v.month,C),(e,n)=>(d(),i("div",null,[y(e.$slots,"calender-top"),D("div",Y,[(d(),i(p,null,M(I,s=>D("div",{key:s},_(s),1)),64))]),D("div",j,[(d(!0),i(p,null,M(B.value,(s,a)=>(d(),i("div",{class:"week grid grid-cols-7 min-h-28 items-stretch",key:a},[(d(!0),i(p,null,M(s,(t,c)=>y(e.$slots,"date",{key:c,day:t.day,month:t.month,year:t.year,weekday:(t.date.getDay()+1)%7,isCurrentMonth:t.isCurrentMonth,yearMonthDate:`${t.year}-${String(t.month).padStart(2,"0")}-${String(t.day).padStart(2,"0")}`},()=>{var r;return[t!=null&&t.date?(d(),i("div",q,_((r=t==null?void 0:t.date)==null?void 0:r.getDate()),1)):N("",!0)]})),128))]))),128))]),y(e.$slots,"calender-bottom")]))}};export{G as _};
