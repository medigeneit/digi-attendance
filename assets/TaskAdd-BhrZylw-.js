import{s as f,r as n,x as c,z as g,b as D,c as x,a as t,w as R,d as u,v as y,l as k,h as r,B as w,t as S,e as C,o as T,g as N}from"./index-CBLkaFAF.js";import{_ as U}from"./MultiselectDropdown-BZcHXm8I.js";import{u as L}from"./user-CEKLp-Vv.js";import{u as _}from"./useRequirementStore-ct85UOVk.js";import{u as B}from"./useTaskStore-DHtn-DXL.js";import"./vue-multiselect.esm-DOCSzDtI.js";const G={class:"container mx-auto p-6"},O={class:"max-w-xl mx-auto bg-white shadow-lg rounded-lg p-6"},P={class:"mb-4"},A={class:"mb-4"},H={class:"mb-4"},W={class:"grid grid-cols-2 gap-4 mb-4"},$={class:"mb-4"},z={key:0,class:"mb-4 text-red-500 font-medium"},K={class:"flex items-center gap-4"},j=["disabled"],ee={__name:"TaskAdd",setup(F){const i=B(),p=N(),b=_(),v=L(),{requirements:V}=f(b),{users:E}=f(v),d=n([]),I=c(()=>d.value.map(l=>l.id)),m=n(""),M=c(()=>{var l;return(l=m.value)==null?void 0:l.id}),o=n({title:"",requirement_id:null,user_ids:[],priority:"MEDIUM",status:"PENDING",description:""});g(M,l=>{o.value.requirement_id=l}),g(I,l=>{o.value.user_ids=l}),D(()=>{b.fetchRequirements(),v.fetchUsers()});const a=n(!1),q=async()=>{a.value=!0;const l={...o.value};await i.createTask(l),a.value=!1,i.error||p.push({name:"TaskList"})};return(l,e)=>(T(),x("div",G,[t("div",O,[e[15]||(e[15]=t("h2",{class:"text-2xl font-semibold text-gray-800 mb-4"},"Add New Task",-1)),t("form",{onSubmit:R(q,["prevent"])},[t("div",P,[e[7]||(e[7]=t("label",{class:"block text-gray-700 font-medium mb-2"},"Task Title",-1)),u(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>o.value.title=s),required:"",placeholder:"Enter task title",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[y,o.value.title]])]),t("div",A,[e[8]||(e[8]=t("label",{class:"block text-gray-700 font-medium mb-2"},"Requirement",-1)),k(U,{modelValue:m.value,"onUpdate:modelValue":e[1]||(e[1]=s=>m.value=s),options:r(V),multiple:!1,"track-by":"id",label:"title",placeholder:"Select department"},null,8,["modelValue","options"])]),t("div",H,[e[9]||(e[9]=t("label",{class:"block text-gray-700 font-medium mb-2"},"User",-1)),k(U,{modelValue:d.value,"onUpdate:modelValue":e[2]||(e[2]=s=>d.value=s),options:r(E),multiple:!0,"track-by":"id",label:"name",placeholder:"Select users"},null,8,["modelValue","options"])]),t("div",W,[t("div",null,[e[11]||(e[11]=t("label",{class:"block text-gray-700 font-medium mb-2"},"Priority",-1)),u(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>o.value.priority=s),class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},e[10]||(e[10]=[t("option",{value:"LOW"},"LOW",-1),t("option",{value:"MEDIUM"},"MEDIUM",-1),t("option",{value:"HIGH"},"HIGH",-1),t("option",{value:"CRITICAL"},"CRITICAL",-1)]),512),[[w,o.value.priority]])]),t("div",null,[e[13]||(e[13]=t("label",{class:"block text-gray-700 font-medium mb-2"},"Status",-1)),u(t("select",{"onUpdate:modelValue":e[4]||(e[4]=s=>o.value.status=s),class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},e[12]||(e[12]=[t("option",null,"PENDING",-1),t("option",null,"IN_PROGRESS",-1),t("option",null,"COMPLETED",-1),t("option",null,"BLOCKED",-1)]),512),[[w,o.value.status]])])]),t("div",$,[e[14]||(e[14]=t("label",{class:"block text-gray-700 font-medium mb-2"},"Description",-1)),u(t("textarea",{"onUpdate:modelValue":e[5]||(e[5]=s=>o.value.description=s),rows:"4",placeholder:"Enter task description",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[y,o.value.description]])]),r(i).error?(T(),x("div",z,S(r(i).error),1)):C("",!0),t("div",K,[t("button",{disabled:a.value,type:"submit",class:"bg-blue-500 hover:bg-blue-600 text-white font-semibold px-5 py-2 rounded transition"},S(a.value?"Saving...":"Save Task"),9,j),t("button",{type:"button",onClick:e[6]||(e[6]=s=>r(p).push({name:"TaskList"})),class:"bg-gray-200 hover:bg-gray-300 text-gray-700 font-semibold px-5 py-2 rounded transition"}," Cancel ")])],32)])]))}};export{ee as default};
