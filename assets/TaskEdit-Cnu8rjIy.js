import{r as g,b as x,z as k,c as u,a as e,h as i,w as E,d as a,v as p,B as v,t as m,e as D,f as I,o as n,g as _}from"./index-BvbUXIE8.js";import{u as q}from"./useTaskStore-BtoWE1De.js";const w={class:"container mx-auto p-6"},U={class:"max-w-xl mx-auto bg-white shadow-lg rounded-lg p-6"},M={key:0,class:"text-center py-4 text-gray-500"},T={class:"mb-4"},C={class:"mb-4"},N={class:"mb-4"},V={class:"grid grid-cols-2 gap-4 mb-4"},L={class:"mb-4"},S={key:0,class:"mb-4 text-red-500 font-medium"},R={class:"flex items-center gap-4"},B=["disabled"],P={key:2,class:"text-center py-4 text-red-500"},H={__name:"TaskEdit",setup(G){const o=q(),y=I(),b=_(),f=y.params.id,d=g(!1),s=g({title:"",requirement_id:"",user_ids:"",priority:"MEDIUM",status:"PENDING",description:""});x(async()=>{await o.fetchTask(f),s.value={title:o.task.title,requirement_id:o.task.requirement_id,user_ids:o.task.users.map(l=>l.id).join(","),priority:o.task.priority,status:o.task.status,description:o.task.description}}),k(()=>o.task,l=>{s.value={title:l.title,requirement_id:l.requirement_id,user_ids:l.users.map(t=>t.id).join(","),priority:l.priority,status:l.status,description:l.description}});const c=async()=>{d.value=!0;const l={...s.value,user_ids:s.value.user_ids.split(",").map(Number)};await o.updateTask(f,l),d.value=!1,o.error||b.push({name:"TaskList"})};return(l,t)=>(n(),u("div",w,[e("div",U,[t[16]||(t[16]=e("h2",{class:"text-2xl font-semibold text-gray-800 mb-4"},"Edit Task",-1)),i(o).loading?(n(),u("div",M," Loading task details... ")):i(o).task?(n(),u("form",{key:1,onSubmit:E(c,["prevent"])},[e("div",T,[t[7]||(t[7]=e("label",{class:"block text-gray-700 font-medium mb-2"},"Task Title",-1)),a(e("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>s.value.title=r),required:"",placeholder:"Enter task title",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[p,s.value.title]])]),e("div",C,[t[8]||(t[8]=e("label",{class:"block text-gray-700 font-medium mb-2"},"Requirement ID",-1)),a(e("input",{"onUpdate:modelValue":t[1]||(t[1]=r=>s.value.requirement_id=r),type:"number",required:"",placeholder:"Enter requirement ID",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[p,s.value.requirement_id]])]),e("div",N,[t[9]||(t[9]=e("label",{class:"block text-gray-700 font-medium mb-2"},"User IDs",-1)),a(e("input",{"onUpdate:modelValue":t[2]||(t[2]=r=>s.value.user_ids=r),required:"",placeholder:"1,2,3",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[p,s.value.user_ids]]),t[10]||(t[10]=e("small",{class:"text-gray-500"},"Comma-separated user IDs.",-1))]),e("div",V,[e("div",null,[t[12]||(t[12]=e("label",{class:"block text-gray-700 font-medium mb-2"},"Priority",-1)),a(e("select",{"onUpdate:modelValue":t[3]||(t[3]=r=>s.value.priority=r),class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},t[11]||(t[11]=[e("option",null,"LOW",-1),e("option",null,"MEDIUM",-1),e("option",null,"HIGH",-1),e("option",null,"CRITICAL",-1)]),512),[[v,s.value.priority]])]),e("div",null,[t[14]||(t[14]=e("label",{class:"block text-gray-700 font-medium mb-2"},"Status",-1)),a(e("select",{"onUpdate:modelValue":t[4]||(t[4]=r=>s.value.status=r),class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},t[13]||(t[13]=[e("option",null,"PENDING",-1),e("option",null,"IN_PROGRESS",-1),e("option",null,"COMPLETED",-1),e("option",null,"BLOCKED",-1)]),512),[[v,s.value.status]])])]),e("div",L,[t[15]||(t[15]=e("label",{class:"block text-gray-700 font-medium mb-2"},"Description",-1)),a(e("textarea",{"onUpdate:modelValue":t[5]||(t[5]=r=>s.value.description=r),rows:"4",placeholder:"Enter task description",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[p,s.value.description]])]),i(o).error?(n(),u("div",S,m(i(o).error),1)):D("",!0),e("div",R,[e("button",{disabled:d.value,type:"submit",class:"bg-green-500 hover:bg-green-600 text-white font-semibold px-5 py-2 rounded transition"},m(d.value?"Updating...":"Update Task"),9,B),e("button",{type:"button",onClick:t[6]||(t[6]=r=>i(b).push({name:"TaskList"})),class:"bg-gray-200 hover:bg-gray-300 text-gray-700 font-semibold px-5 py-2 rounded transition"}," Cancel ")])],32)):(n(),u("div",P,m(i(o).error||"Task not found."),1))])]))}};export{H as default};
