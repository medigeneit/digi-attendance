import{s as f,r,b as B,A as k,c as l,a as t,d as L,C as I,F as y,x as h,h as i,m as v,t as b,o as n,g as M}from"./index-HeDGQWjM.js";import{_ as $}from"./CommentModal-BPsABzg1.js";import{_ as D}from"./MultiselectDropdown-B0xN75bM.js";import{_ as E}from"./TaskTreeView-DHdTr4aQ.js";import{u as F}from"./attendance-B2S_vs7-.js";import{u as N}from"./company-BkIauyUb.js";import{u as R}from"./useTaskStore-B2qtdady.js";import"./useCommentStore-UvZKMtnf.js";import"./vue-multiselect.esm-B2WE9TBc.js";const U={class:"container mx-auto p-6"},j={class:"mb-3"},P={class:"flex flex-wrap items-center gap-2 mt-3"},q=["value"],z={key:0,class:"text-center py-4 text-gray-500"},G={key:1,class:"text-center py-4 text-red-500"},H={key:2,class:"space-y-4"},J=1,oe={__name:"TaskList",setup(K){const s=R(),x=F(),d=N();f(s);const{companies:C,employees:T}=f(d),g=M(),c=r(!1),m=r(null),u=r(""),p=r("");f(x),B(async()=>{await d.fetchCompanies(),await s.fetchTasks()});const w=()=>{g.push({name:"TaskAdd"})},S=o=>{m.value=o,c.value=!0},A=()=>{c.value=!1,m.value=null};return k(()=>u.value,async o=>{o&&await d.fetchEmployee(o)}),k(()=>p.value,async o=>{o.id&&await s.fetchTasks({user_ids:o.id})}),(o,a)=>{var _;return n(),l("div",U,[t("div",j,[a[3]||(a[3]=t("div",{class:"flex justify-between items-center"},[t("h2",{class:"text-2xl font-bold text-gray-800"},"Task List")],-1)),t("div",P,[t("div",null,[L(t("select",{id:"user-filter","onUpdate:modelValue":a[0]||(a[0]=e=>u.value=e),class:"input-1"},[a[2]||(a[2]=t("option",{value:""},"Select Company",-1)),(n(!0),l(y,null,h(i(C),e=>(n(),l("option",{key:e.id,value:e.id},b(e.name),9,q))),128))],512),[[I,u.value]])]),t("div",null,[v(D,{modelValue:p.value,"onUpdate:modelValue":a[1]||(a[1]=e=>p.value=e),options:i(T),multiple:!1,label:"name",placeholder:"Please select employee..."},null,8,["modelValue","options"])]),t("button",{onClick:w,class:"btn-1 ml-auto"},"Add Task")])]),i(s).loading?(n(),l("div",z,"Loading tasks...")):i(s).error?(n(),l("div",G,b(i(s).error),1)):(n(),l("div",H,[(n(!0),l(y,null,h(((_=i(s))==null?void 0:_.taskListTree)||[],e=>(n(),l("div",{key:e.id,class:"rounded-lg border bg-white overflow-hidden"},[v(E,{task:e,class:"!border-0",onCommentButtonClick:V=>S(V,e.id)},null,8,["task","onCommentButtonClick"])]))),128))])),v($,{show:c.value,"commentable-id":m.value,"commentable-type":"task","user-id":J,"on-close":A,onSubmitted:i(s).fetchTasks},null,8,["show","commentable-id","onSubmitted"])])}}};export{oe as default};
