import{E as L,r as y,G as i}from"./index-C7frSrAV.js";const B=L("attendance",()=>{const p=y([]),v=y([]),w=y([]),f=y(null),h=y(null),b=y(new Date().toISOString().substring(0,7)),S=y(new Date().toISOString().substring(0,10)),e=y(null),c=y(!1);return{monthlyLogs:p,dailyLateLogs:w,summary:f,monthly_company_summary:h,selectedMonth:b,selectedDate:S,error:e,isLoading:c,dailyLogs:v,getMonthlyAttendanceByShift:async(l,r)=>{var d,a;if(!l||!r){e.value="Invalid user ID or month";return}console.log("sdfsdf",l),c.value=!0;try{const t=await i.get(`/user/${l}/attendance/monthly/${r}`);p.value=t.data.monthly_logs,f.value=t.data.summary,e.value=null}catch(t){e.value=((a=(d=t.response)==null?void 0:d.data)==null?void 0:a.message)||"Something went wrong",console.error(e.value)}finally{c.value=!1}},getTodayAttendanceReport:async(l,r,d,a,t)=>{var n,s;c.value=!0;try{const o={companyId:l,employee_id:r,category:d,month:a,status:t},u=await i.get("/attendance/today",{params:o});v.value=u.data,e.value=null}catch(o){e.value=((s=(n=o.response)==null?void 0:n.data)==null?void 0:s.message)||"Something went wrong",console.error(e.value)}finally{c.value=!1}},getAttendanceLateReport:async(l,r,d)=>{var a,t;c.value=!0;try{const n={company_id:l,employee_id:r,month:d};console.log({params:n});const s=await i.get("/monthly/attendance/late-reports",{params:n});w.value=s.data,e.value=null}catch(n){e.value=((t=(a=n.response)==null?void 0:a.data)==null?void 0:t.message)||"Something went wrong",console.error(e.value)}finally{c.value=!1}},getMonthlyAttendanceSummaryReport:async(l,r,d,a)=>{var t,n;if(!l||!a){e.value="Invalid user ID or month";return}c.value=!0;try{const s={company_id:l,employee_id:r,category:d,month:a},o=await i.get("/attendance/monthly-summary-reports",{params:s});h.value=o.data,e.value=null}catch(s){e.value=((n=(t=s.response)==null?void 0:t.data)==null?void 0:n.message)||"Something went wrong",console.error(e.value)}finally{c.value=!1}},downloadExcel:async(l,r)=>{var d,a;if(!l||!r){e.value="Invalid company ID or month";return}c.value=!0;try{const t={company_id:l,month:r},n=await i.get("/attendance/monthly-summary-reports?flag=excel",{params:t,responseType:"blob"}),s=window.URL.createObjectURL(new Blob([n.data])),o=document.createElement("a");o.href=s,o.setAttribute("download",`${r} attendance_summary.xlsx`),document.body.appendChild(o),o.click(),document.body.removeChild(o)}catch(t){e.value=((a=(d=t.response)==null?void 0:d.data)==null?void 0:a.message)||"Something went wrong",console.error(e.value)}finally{c.value=!1}},downloadPDF:async(l,r,d=0)=>{var a,t;if(!l||!r){e.value="Invalid user ID or month";return}c.value=!0;try{const n={company_id:l,month:r},s=await i.get("/attendance/monthly-summary-reports?flag=pdf",{params:n,responseType:"blob"}),o=window.URL.createObjectURL(new Blob([s.data])),u=document.createElement("a");u.href=o,u.setAttribute("download",`${r} attendance_summary.pdf`),document.body.appendChild(u),u.click(),document.body.removeChild(u)}catch(n){e.value=((t=(a=n.response)==null?void 0:a.data)==null?void 0:t.message)||"Something went wrong",console.error(e.value)}finally{c.value=!1}},attendanceDownloadExcel:async(l,r,d,a,t)=>{var n,s;c.value=!0;try{const o={companyId:l,employee_id:r,category:d,month:a,status:t},u=await i.get("/attendance/today?flag=excel",{params:o,responseType:"blob"}),g=window.URL.createObjectURL(new Blob([u.data])),m=document.createElement("a");m.href=g,m.setAttribute("download",`${a} attendance_summary.xlsx`),document.body.appendChild(m),m.click(),document.body.removeChild(m)}catch(o){e.value=((s=(n=o.response)==null?void 0:n.data)==null?void 0:s.message)||"Something went wrong",console.error(e.value)}finally{c.value=!1}},attendanceDownloadPdf:async(l,r,d,a,t)=>{var n,s;c.value=!0;try{const o={companyId:l,employee_id:r,category:d,month:a,status:t},u=await i.get("/attendance/today?flag=pdf",{params:o,responseType:"blob"}),g=window.URL.createObjectURL(new Blob([u.data])),m=document.createElement("a");m.href=g,m.setAttribute("download",`${a} attendance_summary.pdf`),document.body.appendChild(m),m.click(),document.body.removeChild(m)}catch(o){e.value=((s=(n=o.response)==null?void 0:n.data)==null?void 0:s.message)||"Something went wrong",console.error(e.value)}finally{c.value=!1}}}});export{B as u};
