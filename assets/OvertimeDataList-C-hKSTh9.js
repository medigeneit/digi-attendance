import{r as k,e as M,a2 as P,c as l,o as n,a as e,g as c,p as y,F as $,G as E,b as F,u as I,d as G,a3 as z,n as K,t as a,q as W,f as J,k as v,i as Q}from"./index-W_PqaTeh.js";import{u as H}from"./overtime-BzobXrFk.js";import{_ as X}from"./AcceptAndRejectHandler-CMyGVUPp.js";import{_ as S}from"./DisplayFormattedWorkingHours-BasL13xM.js";import{_ as Y}from"./TimePickerAsFloatHour-D2yV25LG.js";const Z={key:0,class:"fixed inset-0 z-50 flex justify-center items-center bg-black/50"},ee={class:"modal-card max-w-sm"},te={class:"flex justify-between gap-2 mt-4"},se={__name:"UpdateApprovalTime",props:{overtime:Object,onSuccess:{type:Function,default:null}},setup(o){const i=o,x=H(),p=k(null),g=k(null),b=k(!1),t=k(i.overtime.approval_overtime_hours||i.overtime.request_overtime_hours||""),w=async()=>{if(!t.value)return alert("Please set approval time!");await x.updateApprovalTime(i.overtime.id,t.value),i.onSuccess&&await i.onSuccess(),m()},_=()=>{b.value=!0,h()},m=()=>{b.value=!1};function h(){E(()=>{var d;(d=p.value)==null||d.focus()})}function f(d){var r,u;b.value&&(d.key==="ArrowLeft"?(r=g.value)==null||r.focus():d.key==="ArrowRight"&&((u=p.value)==null||u.focus()))}return M(()=>{window.addEventListener("keydown",f)}),P(()=>{window.removeEventListener("keydown",f)}),(d,r)=>(n(),l($,null,[e("i",{onClick:_,class:"fa fa-edit cursor-pointer text-sky-600"}),b.value?(n(),l("div",Z,[e("div",ee,[r[1]||(r[1]=e("h3",{class:"title-lg"},"Update Approval Time",-1)),r[2]||(r[2]=e("hr",{class:"my-2"},null,-1)),y(Y,{modelValue:t.value,"onUpdate:modelValue":r[0]||(r[0]=u=>t.value=u),"minute-interval":5,required:!0,"hour-min":2,"hour-max":16},null,8,["modelValue"]),r[3]||(r[3]=e("hr",{class:"my-2"},null,-1)),e("div",te,[e("button",{type:"button",ref_key:"cancelBtnRef",ref:g,class:"btn-3 focus:ring-2 ring-offset-2",onClick:m}," Cancel ",512),e("button",{type:"button",ref_key:"confirmBtnRef",ref:p,class:"btn-2-green focus:ring-2 ring-offset-2",onClick:w}," Update Time ",512)])])])):c("",!0)],64))}},re={class:"space-y-4"},oe={class:"card-bg p-4 gap-1"},ae={class:"flex flex-wrap gap-x-8 gap-y-2"},ne={key:0,class:"text-gray-700"},le={class:"ml-1"},de={key:1,class:"text-gray-700"},ce={class:"ml-1"},ie={key:2,class:"text-gray-700"},ue={class:"ml-1"},pe={key:3,class:"text-gray-700"},ye={class:"ml-1"},xe={key:4,class:"text-gray-700"},ge={class:"ml-1"},be={class:"overflow-x-auto"},me={class:"min-w-full table-auto border-collapse border border-gray-200 bg-white rounded-md text-sm"},fe={class:"border border-gray-300 px-2 text-center"},_e={class:"border border-gray-300 px-2 text-center"},he={class:"border border-gray-300 px-2 text-center"},ke={class:"border border-gray-300 px-2 text-center"},ve={class:"border border-gray-300 px-2 text-center"},we={class:"border border-gray-300 px-2 text-center"},Se={class:"border border-gray-300 px-2 text-center"},Ae={class:"border border-gray-300 px-2 text-center"},Be={class:"border border-gray-300 px-2 text-center"},Ce={class:"flex items-center justify-center gap-4"},De={class:"border border-gray-300 px-2 text-center"},Ne={class:"border border-gray-300 px-2 text-center"},Re={class:"border border-gray-300 px-2 text-center !py-0.5"},Ue={class:"flex items-center justify-center gap-x-4"},Le={key:0,class:"border border-dashed px-4 rounded-xl"},Oe={key:0},qe={__name:"OvertimeDataList",props:{user:Object,onUpdate:{type:Function,default:null}},setup(o){F(),I(),G();const i=H(),x=z(),p=o,g=async()=>{p.onUpdate?await p.onUpdate():await x.fetchCountNotifications()};return(b,t)=>{var _,m,h,f,d,r,u,A,B,C,D,N,R,U,L;const w=K("RouterLink");return n(),l("div",re,[e("div",oe,[e("div",ae,[(_=o.user)!=null&&_.employee_id?(n(),l("p",ne,[t[0]||(t[0]=e("span",{class:"text-gray-400"},"Employee ID:",-1)),e("strong",le,a(((m=o.user)==null?void 0:m.employee_id)||"N/A"),1)])):c("",!0),(h=o.user)!=null&&h.name?(n(),l("p",de,[t[1]||(t[1]=e("span",{class:"text-gray-400"},"Name:",-1)),e("strong",ce,a((f=o.user)==null?void 0:f.name),1)])):c("",!0),(r=(d=o.user)==null?void 0:d.designation)!=null&&r.title?(n(),l("p",ie,[t[2]||(t[2]=e("span",{class:"text-gray-400"},"Designation:",-1)),e("strong",ue,a(((A=(u=o.user)==null?void 0:u.designation)==null?void 0:A.title)||"N/A"),1)])):c("",!0),(C=(B=o.user)==null?void 0:B.department)!=null&&C.name?(n(),l("p",pe,[t[3]||(t[3]=e("span",{class:"text-gray-400"},"Department:",-1)),e("strong",ye,a(((N=(D=o.user)==null?void 0:D.department)==null?void 0:N.name)||"N/A"),1)])):c("",!0),(R=o.user)!=null&&R.phone?(n(),l("p",xe,[t[4]||(t[4]=e("span",{class:"text-gray-400"},"Phone:",-1)),e("strong",ge,a((U=o.user)==null?void 0:U.phone),1)])):c("",!0)])]),e("div",be,[e("table",me,[t[7]||(t[7]=e("thead",null,[e("tr",{class:"bg-gray-200 *:py-1"},[e("th",{class:"border border-gray-300 px-2 text-center"},"#"),e("th",{class:"border border-gray-300 px-2 text-center"},"Date"),e("th",{class:"border border-gray-300 px-2 text-center"},"Type"),e("th",{class:"border border-gray-300 px-2 text-center"},"Shift"),e("th",{class:"border border-gray-300 px-2 text-center"},"Check-In"),e("th",{class:"border border-gray-300 px-2 text-center"},"Check-Out"),e("th",{class:"border border-gray-300 px-2 text-center"},"Working (hour)"),e("th",{class:"border border-gray-300 px-2 text-center"},"Request (hour)"),e("th",{class:"border border-gray-300 px-2 text-center"},"Approved (hour)"),e("th",{class:"border border-gray-300 px-2 text-center"},"Details"),e("th",{class:"border border-gray-300 px-2 text-center"},"Status"),e("th",{class:"border border-gray-300 px-2 text-center"},"Action")])],-1)),e("tbody",null,[(n(!0),l($,null,W(v(i).overtimes,(s,V)=>{var O,T,j;return n(),l("tr",{key:s==null?void 0:s.id,class:"border-b border-gray-200 hover:bg-blue-200 *:py-2"},[e("td",fe,a(V+1),1),e("td",_e,a(new Date(s.date).toLocaleDateString("en-GB",{day:"2-digit",month:"long",year:"numeric"})),1),e("td",he,a(s.duty_type),1),e("td",ke,a(s.shift),1),e("td",ve,a(s.check_in||"- : -"),1),e("td",we,a(s.check_out||"- : -"),1),e("td",Se,[y(S,{workingHours:s.working_hours},null,8,["workingHours"])]),e("td",Ae,[y(S,{workingHours:s.request_overtime_hours},null,8,["workingHours"])]),e("td",Be,[e("div",Ce,[y(S,{workingHours:s.approval_overtime_hours},null,8,["workingHours"]),(T=(O=v(x).applicationApprovalPermissions)==null?void 0:O[s.id])!=null&&T.allow_recommend_by?(n(),J(se,{key:0,overtime:s,onSuccess:g},null,8,["overtime"])):c("",!0)])]),e("td",De,a(s.work_details||""),1),e("td",Ne,a(s.status||"Pending"),1),e("td",Re,[e("div",Ue,[s.approval_overtime_hours&&Object.values(((j=v(x).applicationApprovalPermissions)==null?void 0:j[s.id])||{}).some(q=>q)?(n(),l("div",Le,[y(X,{class:"ml-auto",notificationType:"overtime_applications",applicationId:s.id,onSuccess:g,variant:1},null,8,["applicationId"])])):c("",!0),y(w,{to:{name:"MyOvertimeShow",params:{id:s.id}},class:"text-blue-800"},{default:Q(()=>t[5]||(t[5]=[e("i",{class:"far fa-eye text-lg"},null,-1)])),_:2,__:[5]},1032,["to"])])])])}),128)),((L=v(i).overtimes)==null?void 0:L.length)===0?(n(),l("tr",Oe,t[6]||(t[6]=[e("td",{colspan:"100",class:"p-2 text-center text-red-500"},"No overtimes found",-1)]))):c("",!0)])])])])}}};export{qe as _};
