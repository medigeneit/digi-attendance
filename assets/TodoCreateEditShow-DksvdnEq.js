import{O as Z}from"./OverlyModal-ugf0zm9M.js";import{c as S,o as c,O as Q,a as e,k as C,t as E,w as O,r as g,x as P,q as N,h as A,U as it,l as W,j as U,v as H,P as ut,F as X,e as lt,Z as rt,A as G,y as pt,d as V,n as x,m as R,b as D,g as mt}from"./index-Ck--8GOP.js";import{g as q,b as ct}from"./datetime-Du_mcDA9.js";import{u as dt}from"./useTodoProjectStore-BsvxSjqM.js";import{u as tt}from"./useTodoStore-UzldqWE_.js";import{L as J}from"./LoaderView-D7eqSlTh.js";import{u as yt}from"./useTaskStore-DQQtEjFJ.js";import{_ as ft}from"./TaskSelectionInput-hXl5hW-0.js";import{u as at,f as vt,d as bt,a as gt}from"./useTodoDateStore-BE9IPhle.js";import{_ as wt}from"./UserChip-BHiXRNSK.js";import{a as kt}from"./TodoItemCard-CdydHIuu.js";const xt={class:"bg-white border-t px-4 py-4 sticky bottom-0 rounded-b-md shadow-lg shadow-red-600"},Tt={key:0,class:"mb-4 text-red-500 font-medium"},St={key:0,class:"mb-4 text-blue-500 font-medium"},Ct={class:"flex justify-between items-center gap-4"},_t=["disabled"],et={__name:"FormHandler",props:{isSubmitting:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},error:{type:String,default:""}},emits:["submit","clickCancel"],setup(n,{emit:$}){const o=$;return(l,y)=>(c(),S("form",{onSubmit:y[1]||(y[1]=O(b=>o("submit"),["prevent"])),class:"overflow-hidden"},[Q(l.$slots,"default"),e("div",xt,[Q(l.$slots,"error",{},()=>[n.error?(c(),S("div",Tt,E(n.error),1)):C("",!0)]),n.isSubmitting?(c(),S("div",St,"Saving changes...")):C("",!0),Q(l.$slots,"footer",{},()=>[e("div",Ct,[e("button",{type:"button",onClick:y[0]||(y[0]=b=>o("clickCancel")),class:"btn-3"},"Cancel"),e("button",{disabled:n.isSubmitting||n.isLoading,type:"submit",class:"btn-2"},E(n.isSubmitting?"Saving...":"Save"),9,_t)])])])],32))}},ht={class:"relative"},$t=["placeholder"],Dt=["onClick"],nt={__name:"InputWithSuggestions",props:{modelValue:{type:[String,Number],default:null},options:{type:Array,default:()=>[]},label:{type:String,default:"title"},value:{type:String,default:"id"},placeholder:{type:String,default:"Select or type..."}},emits:["update:modelValue","update:inputValue"],setup(n,{emit:$}){const o=n,l=$,y=g(""),b=g(!1),s=g(null),v=g(null),p=g({top:"0px",left:"0px",width:"0px"}),k=P(()=>{if(!y.value)return o.options;const u=y.value.toLowerCase();return o.options.filter(h=>{const _=h[o.label];return _&&String(_).toLowerCase().includes(u)})});function m(){if(s.value){const u=s.value.getBoundingClientRect();p.value={top:`${u.bottom}px`,left:`${u.left}px`,width:`${u.width}px`}}}function d(u){y.value=u[o.label],l("update:modelValue",u[o.value]),l("update:inputValue",u[o.label]),b.value=!1}function t(){b.value=!0,m(),l("update:inputValue",y.value);const u=o.options.find(h=>{var _;return((_=h[o.label])==null?void 0:_.toLowerCase())===y.value.toLowerCase()});u?l("update:modelValue",u[o.value]):l("update:modelValue",null)}function f(){b.value=!0,m()}N(()=>o.modelValue,u=>{if(u){const h=o.options.find(_=>_[o.value]==u);h&&(y.value=h[o.label],l("update:inputValue",h[o.label]))}},{immediate:!0}),N(()=>o.options,()=>{if(o.modelValue){const u=o.options.find(h=>h[o.value]==o.modelValue);u&&(y.value=u[o.label],l("update:inputValue",u[o.label]))}}),N(b,u=>{u&&G(()=>m())});function i(u){s.value&&s.value.contains(u.target)||v.value&&v.value.contains(u.target)||(b.value=!1)}function I(){b.value&&m()}function j(){b.value&&m()}return A(()=>{document.addEventListener("click",i),window.addEventListener("scroll",I,!0),window.addEventListener("resize",j)}),it(()=>{document.removeEventListener("click",i),window.removeEventListener("scroll",I,!0),window.removeEventListener("resize",j)}),(u,h)=>(c(),S("div",ht,[W(e("input",{ref_key:"inputRef",ref:s,type:"text","onUpdate:modelValue":h[0]||(h[0]=_=>y.value=_),onInput:t,onFocus:f,class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500 outline-none",placeholder:n.placeholder},null,40,$t),[[H,y.value]]),(c(),U(rt,{to:"body"},[b.value&&k.value.length>0?(c(),S("ul",{key:0,ref_key:"dropdownRef",ref:v,class:"fixed z-[9999] bg-white border rounded-md shadow-lg max-h-60 overflow-y-auto mt-1",style:ut(p.value)},[(c(!0),S(X,null,lt(k.value,_=>(c(),S("li",{key:_[n.value],onClick:z=>d(_),class:"px-4 py-2 hover:bg-blue-50 cursor-pointer text-sm text-gray-700 block text-left"},E(_[n.label]),9,Dt))),128))],4)):C("",!0)]))]))}},st={__name:"TodoTypeInput",props:{todoType:{type:String,default:"task"},todoTypeId:{type:[String,Number],default:null},show:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1}},emits:["update:todoType","update:todoTypeId","update:show"],setup(n,{emit:$}){const o=n,l=$,y=P({get:()=>o.todoTypeId,set:m=>l("update:todoTypeId",m)}),b=P({get:()=>o.show,set:m=>l("update:show",m)}),s=g(null),v=g({});function p(){if(!(s!=null&&s.value))return;const m=s.value.getBoundingClientRect(),d=window.innerHeight,t=300,i=d-m.bottom<t;v.value={position:"fixed",top:i?m.top-t+"px":m.bottom+"px",left:m.left+"px",width:m.width+"px",zIndex:5e3}}A(async()=>{await G(),window.addEventListener("resize",p),document.addEventListener("scroll",p)});const k=yt();return N(()=>b.value,async m=>{m&&await k.fetchAllMyTasks()}),pt(()=>{window.removeEventListener("resize",p),document.removeEventListener("scroll",p)}),(m,d)=>(c(),S("div",null,[V(ft,{show:b.value,"onUpdate:show":d[0]||(d[0]=t=>b.value=t),taskId:y.value,"onUpdate:taskId":d[1]||(d[1]=t=>y.value=t),readonly:n.readonly},null,8,["show","taskId","readonly"])]))}},Vt={class:"p-4 min-h-[10vh] max-h-[50vh] overflow-y-auto"},It={class:"mb-4"},jt={class:"mb-4"},Rt=["readonly"],Et={class:"mb-4"},Ut={class:"mb-4"},Lt={__name:"TodoAddForm",props:{date:{type:String,default:q(new Date)},userRole:{type:String,default:"employee"},todoType:{type:String,default:"task"},todoTypeId:{type:String,default:null},readonlyValues:{type:Object,default:()=>({date:!1,todo_type_id:!1})}},emits:["update","cancelClick"],setup(n,{emit:$}){const o=n,l=g(),y=g(!1),b=g(),s=tt(),v=dt(),p=g(null),k=g(""),m=$,d=g({title:"",date:o.date||"",todo_type:"task",todo_type_id:""});async function t(){try{l.value="submitting";const f={...d.value};if(f.todo_type_id||(delete f.todo_type_id,delete f.todo_type),p.value)f.todo_project_id=p.value;else if(k.value){const i=await v.createProject({title:k.value});f.todo_project_id=i.id}await s.createTodo(f,{returnWith:o.userRole!=="employee"?"user,department,company":""}),m("update")}finally{l.value=""}}return N(()=>({date:o.date,todo_type:o.todoType,todo_type_id:o.todoTypeId}),f=>{d.value={...d.value,...f}},{immediate:!0}),A(async()=>{var f;await G(),(f=b.value)==null||f.focus(),await v.fetchProjects()}),(f,i)=>(c(),S("div",{onClick:i[8]||(i[8]=I=>y.value=!1)},[x(s).loading?(c(),U(J,{key:0,class:"absolute inset-0 bg-opacity-80 text-center py-4 text-gray-500 z-10 flex items-center justify-center"},{default:R(()=>i[9]||(i[9]=[D(" Loading... ")])),_:1,__:[9]})):C("",!0),V(et,{onSubmit:t,onClickCancel:i[7]||(i[7]=I=>m("cancelClick")),isSubmitting:l.value=="submitting",error:x(s).error,class:"rounded-md relative"},{default:R(()=>{var I,j;return[i[14]||(i[14]=e("div",{class:"border-b py-2 px-4"},[e("h2",{class:"text-xl font-semibold"},"Add Todo")],-1)),e("div",Vt,[e("div",It,[i[10]||(i[10]=e("label",{class:"block text-gray-700 font-medium mb-1 text-sm"},"Title",-1)),W(e("input",{ref_key:"titleRef",ref:b,"onUpdate:modelValue":i[0]||(i[0]=u=>d.value.title=u),required:"",placeholder:"Enter todo title",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[H,d.value.title]])]),e("div",jt,[i[11]||(i[11]=e("label",{class:"block text-gray-700 font-medium mb-1 text-sm"},"Date",-1)),W(e("input",{readonly:(I=n.readonlyValues)==null?void 0:I.date,"onUpdate:modelValue":i[1]||(i[1]=u=>d.value.date=u),type:"date",required:"",placeholder:"Enter todo title",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,8,Rt),[[H,d.value.date]])]),e("div",Et,[i[12]||(i[12]=e("label",{class:"block text-gray-700 font-medium mb-1 text-sm"},[D(" Issue/Website/Project "),e("span",{class:"text-gray-500"},"(Optional)")],-1)),V(nt,{modelValue:p.value,"onUpdate:modelValue":i[2]||(i[2]=u=>p.value=u),"onUpdate:inputValue":i[3]||(i[3]=u=>k.value=u),options:x(v).projects,label:"title",value:"id",placeholder:"Select or type project..."},null,8,["modelValue","options"])]),e("div",Ut,[i[13]||(i[13]=e("label",{class:"block text-gray-700 font-medium mb-1 text-sm"},"Task (optional)",-1)),V(st,{show:y.value,"onUpdate:show":i[4]||(i[4]=u=>y.value=u),todoType:d.value.todo_type,"onUpdate:todoType":i[5]||(i[5]=u=>d.value.todo_type=u),todoTypeId:d.value.todo_type_id,"onUpdate:todoTypeId":i[6]||(i[6]=u=>d.value.todo_type_id=u),readonly:(j=n.readonlyValues)==null?void 0:j.todo_type_id},null,8,["show","todoType","todoTypeId","readonly"])])])]}),_:1,__:[14]},8,["isSubmitting","error"])]))}},Mt={class:"p-4 min-h-[10vh] max-h-[50vh] overflow-y-auto"},Ot={class:"mb-4 text-md"},Pt={class:"font-semibold"},At={class:"mb-2"},zt={__name:"TodoDateAddForm",props:{date:{type:[String,Number],default:q(new Date)},todoId:{type:[String,Number],required:!0},userRole:{type:String,default:"employee"}},emits:["update","cancelClick"],setup(n,{emit:$}){const o=n,l=g(),y=g(!1),b=g(),s=tt(),v=at(),p=$,k=g({date:o.date||"",todo_id:o.todoId});async function m(){try{l.value="submitting",await v.createTodoDate(k.value),p("update")}finally{l.value=""}}return A(async()=>{var d;await G(),await s.fetchTodo(o.todoId),(d=b.value)==null||d.focus()}),(d,t)=>(c(),S("div",{onClick:t[2]||(t[2]=f=>y.value=!1)},[x(s).loading?(c(),U(J,{key:0,class:"absolute inset-0 bg-opacity-80 text-center py-4 text-gray-500 z-10 flex items-center justify-center"},{default:R(()=>t[3]||(t[3]=[D(" Loading... ")])),_:1,__:[3]})):C("",!0),V(et,{onSubmit:m,onClickCancel:t[1]||(t[1]=f=>p("cancelClick")),isSubmitting:l.value=="submitting",error:x(v).error,class:"rounded-md relative"},{default:R(()=>{var f;return[t[6]||(t[6]=e("div",{class:"border-b py-2 px-4"},[e("h2",{class:"text-xl font-semibold"},"Carry Todo To Date")],-1)),e("div",Mt,[e("div",Ot,[t[4]||(t[4]=D(" TODO: ")),e("span",Pt,E((f=x(s).todo)==null?void 0:f.title),1)]),e("div",At,[t[5]||(t[5]=e("span",{class:"font-semibold"}," Date ",-1)),W(e("input",{"onUpdate:modelValue":t[0]||(t[0]=i=>k.value.date=i),type:"date",multiple:"",required:"",placeholder:"Enter todo title",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500"},null,512),[[H,k.value.date]])])])]}),_:1,__:[6]},8,["isSubmitting","error"])]))}},Bt={key:0,class:"mb-4 text-red-500 font-medium"},Ft={key:1,class:"mb-4 text-red-500 font-medium"},Nt={class:"p-4 min-h-[10vh] max-h-[50vh] overflow-y-auto"},qt={class:"mb-4"},Wt={class:"mb-4"},Ht={class:"mb-4"},Gt={__name:"TodoEditForm",props:{date:{type:String,default:q(new Date)},todo:{type:Object,default:()=>({})}},emits:["update","cancelClick"],setup(n,{emit:$}){var F;const o=n,l=g(),y=g(!1),b=g(),s=tt(),v=dt(),p=g(null),k=g(""),m=$,d=g({title:"",todo_type:"task",todo_type_id:""}),t=g({id:null,repeat_type:"daily",start_date:((F=o.todo)==null?void 0:F.date)||o.date||q(new Date),end_date:null,weekly_day:null,monthly_mode:null,monthly_value:null,monthly_week:null,yearly_month:null,yearly_day:null}),f=g(!1),i=g({});async function I(){var w,a,r,T;await s.fetchTodo((w=o.todo)==null?void 0:w.id),d.value.title=(a=s.todo)==null?void 0:a.title,d.value.todo_type_id=(r=s.todo)==null?void 0:r.todoable_id,p.value=((T=s.todo)==null?void 0:T.todo_project_id)||null}const j=g(null);async function u(){var w,a;try{const{data:r}=await vt(o.todo.id),T=r==null?void 0:r.setting;T?(f.value=!0,j.value=T.id,t.value={repeat_type:T.repeat_type??"daily",start_date:T.start_date??t.value.start_date,end_date:T.end_date??null,weekly_day:T.weekly_day??null,monthly_mode:T.monthly_mode??null,monthly_value:T.monthly_value??null,monthly_week:T.monthly_week??null,yearly_month:T.yearly_month??null,yearly_day:T.yearly_day??null}):t.value.id=null}catch(r){L.value=(a=(w=r==null?void 0:r.response)==null?void 0:w.data)==null?void 0:a.message,console.error("Load setting failed:",(r==null?void 0:r.message)||r)}}async function h(){const w={title:d.value.title,todo_type:d.value.todo_type,todo_type_id:d.value.todo_type_id};if(p.value)w.todo_project_id=p.value;else if(k.value){const a=await v.createProject({title:k.value});w.todo_project_id=a.id}await s.updateTodo(o.todo.id,w)}async function _(){var w,a;if(!f.value)j.value&&await bt(o.todo.id,j.value);else{const r=(w=i.value)!=null&&w.buildPayload?i.value.buildPayload():{...t.value};r.start_date||(r.start_date=((a=o.todo)==null?void 0:a.date)||o.date||q(new Date)),await gt(o.todo.id,r)}}const z=w=>{var a,r;return((r=(a=w==null?void 0:w.response)==null?void 0:a.data)==null?void 0:r.message)||(w==null?void 0:w.message)||"Something went wrong"};async function K(){const[w,a]=await Promise.allSettled([h(),_()]),r=w.status==="fulfilled",T=a.status==="fulfilled";T||(L.value=z(a.reason)),r&&T&&m("update")}const M=g(!1),L=g(!1);async function Y(){var w;v.fetchProjects(),await I(),M.value=!0,await u(),M.value=!1,await G(),(w=b.value)==null||w.focus()}const B=P(()=>s.loading||M.value);return A(()=>{Y()}),(w,a)=>(c(),S("div",{class:"relative",onClick:a[7]||(a[7]=r=>y.value=!1)},[B.value?(c(),U(J,{key:0,class:"absolute inset-0 bg-opacity-80 text-center py-4 text-gray-500 z-10 flex items-center justify-center"},{default:R(()=>a[8]||(a[8]=[D(" Loading... ")])),_:1,__:[8]})):C("",!0),V(et,{onSubmit:K,onClickCancel:a[6]||(a[6]=r=>m("cancelClick")),isSubmitting:l.value=="submitting",isLoading:B.value,id:"todoEditForm"},{error:R(()=>[e("div",null,[x(s).error?(c(),S("div",Bt,E(x(s).error),1)):C("",!0),L.value?(c(),S("div",Ft,E(L.value),1)):C("",!0)])]),default:R(()=>[a[13]||(a[13]=e("div",{class:"border-b py-2 px-4"},[e("h2",{class:"text-xl font-semibold"},"Edit Todo")],-1)),e("div",Nt,[a[12]||(a[12]=e("div",{class:"text-xs text-red-800 mb-6"},[e("strong",null,"Tips:"),D(" If you change the todo, it will change to all the concurrent dates ")],-1)),e("div",qt,[a[9]||(a[9]=e("label",{class:"block text-gray-500 font-medium text-sm"},"Title",-1)),W(e("input",{ref_key:"titleRef",ref:b,"onUpdate:modelValue":a[0]||(a[0]=r=>d.value.title=r),required:"",placeholder:"Enter todo title",class:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500 shadow-sm"},null,512),[[H,d.value.title]])]),e("div",Wt,[a[10]||(a[10]=e("label",{class:"block text-gray-500 font-medium text-sm"},[D(" Issue/Website/Project "),e("span",{class:"text-gray-500"},"(Optional)")],-1)),V(nt,{modelValue:p.value,"onUpdate:modelValue":a[1]||(a[1]=r=>p.value=r),"onUpdate:inputValue":a[2]||(a[2]=r=>k.value=r),options:x(v).projects,value:"id",label:"title",placeholder:"Select or type project..."},null,8,["modelValue","options"])]),e("div",Ht,[a[11]||(a[11]=e("label",{class:"block text-gray-500 font-medium text-sm"},"Task ID (optional)",-1)),V(st,{show:y.value,"onUpdate:show":a[3]||(a[3]=r=>y.value=r),todoType:d.value.todo_type,"onUpdate:todoType":a[4]||(a[4]=r=>d.value.todo_type=r),todoTypeId:d.value.todo_type_id,"onUpdate:todoTypeId":a[5]||(a[5]=r=>d.value.todo_type_id=r)},null,8,["show","todoType","todoTypeId"])])])]),_:1,__:[13]},8,["isSubmitting","isLoading"])]))}},Kt={class:"relative"},Yt={class:"min-h-[10vh] max-h-[50vh] overflow-y-auto p-4"},Zt={class:"mb-4"},Jt={class:"mb-4 flex justify-between items-end"},Qt={key:0,class:"mt-1"},Xt={key:0,class:"mt-1 flex items-center gap-2 mb-4"},te={class:"border border-sky-400 rounded-full text-sky-500 font-semibold bg-sky-50 px-1 py-0.5 text-xs inline-block"},ee={class:"flex items-center justify-between gap-4"},oe={key:0,class:"flex items-center gap-2"},le={class:"flex justify-between items-center gap-4 py-4 px-4 border-t"},de={key:0,class:"ml-auto flex items-center gap-2"},ae={__name:"TodoShow",props:{todoDate:{type:Object,default:()=>{}}},emits:["cancelClick","clickEdit","update","clickAddTodoDate"],setup(n,{emit:$}){const o=n,l=at(),y=mt(),b=$;async function s(){var d;console.log({todo_date:"dd"}),await l.fetchTodoDate((d=o.todoDate)==null?void 0:d.id)}const v=P(()=>{var d,t;return(d=l.todo_date)!=null&&d.date?new Date((t=l.todo_date)==null?void 0:t.date):null}),p=P(()=>{var d,t,f;return((t=(d=l.todo_date)==null?void 0:d.user)==null?void 0:t.id)===((f=y.user)==null?void 0:f.id)});async function k(d){var t;confirm(`Are your sure want to delete todo
'${(t=l.todo_date)==null?void 0:t.title}'`)&&(await l.deleteTodoDate(d.id),b("update"))}async function m(d,t){var f;confirm(`Are your sure want to compete todo
'${(f=l.todo_date)==null?void 0:f.title}'`)&&(await l.updateStatus(d.id,t),b("update"))}return A(async()=>{await s()}),(d,t)=>{var f,i,I,j,u,h,_,z,K,M,L,Y,B,F,w,a;return c(),S("div",Kt,[x(l).loading?(c(),U(J,{key:0,class:"absolute inset-0 bg-opacity-80 text-center py-4 text-gray-500 z-10 flex items-center justify-center"},{default:R(()=>t[6]||(t[6]=[D(" Loading... ")])),_:1,__:[6]})):C("",!0),e("div",null,[t[13]||(t[13]=e("div",{class:"border-b py-2 px-4"},[e("h2",{class:"text-xl font-semibold"},"Show Todo")],-1)),e("div",Yt,[e("div",Zt,[t[7]||(t[7]=e("div",{class:"font-semibold text-xs text-gray-500"},"Date",-1)),e("span",null,E(x(ct)(v.value,{weekDay:"long"})),1)]),e("div",Jt,[e("div",null,[t[8]||(t[8]=e("div",{class:"text-xs text-gray-500"},"Todo",-1)),D(" "+E((f=x(l).todo_date)==null?void 0:f.title)+" ",1),((u=(j=(I=(i=x(l))==null?void 0:i.todo_date)==null?void 0:I.todo)==null?void 0:j.tags)==null?void 0:u.length)>0?(c(),S("div",Qt,[(c(!0),S(X,null,lt(((z=(_=(h=x(l))==null?void 0:h.todo_date)==null?void 0:_.todo)==null?void 0:z.tags)||[],r=>(c(),S("span",{class:"bg-gray-100 px-2 rounded-full border border-blue-500 text-blue-500",key:r.id},E(r.name),1))),128))])):C("",!0)]),e("button",{class:"btn-2 bg-sky-400 text-white hover:bg-sky-600 hover:text-white bg-none",onClick:t[0]||(t[0]=O(r=>{var T;return b("clickEdit",(T=x(l).todo_date)==null?void 0:T.todo)},["prevent","stop"]))},t[9]||(t[9]=[e("i",{class:"fas fa-pen"},null,-1),D(" Edit Todo ")]))]),(K=n.todoDate)!=null&&K.user?(c(),S("div",Xt,[V(wt,{user:n.todoDate.user,"avatar-size":"xsmall"},null,8,["user"]),e("div",te,E((L=(M=n.todoDate.user)==null?void 0:M.department)==null?void 0:L.name),1)])):C("",!0),e("div",null,[t[12]||(t[12]=e("div",{class:"text-xs text-gray-500"},"Status",-1)),e("div",ee,[e("div",null,[(Y=x(l))!=null&&Y.todo_date?(c(),U(kt,{key:0,todoDate:(B=x(l))==null?void 0:B.todo_date},null,8,["todoDate"])):C("",!0),D(" "+E((F=x(l).todo_date)==null?void 0:F.status),1)]),p.value&&!x(l).loading?(c(),S("div",oe,[((w=x(l).todo_date)==null?void 0:w.status)==="PENDING"?(c(),S("button",{key:0,class:"btn-2 from-yellow-700 to-yellow-500 text-white hover:bg-green-600 hover:text-white",onClick:t[1]||(t[1]=O(()=>m(x(l).todo_date,"WORKING"),["prevent","stop"]))},t[10]||(t[10]=[e("i",{class:"fas fa-exclamation-circle"},null,-1),D(" Change to Working ")]))):C("",!0),((a=x(l).todo_date)==null?void 0:a.status)==="WORKING"?(c(),S("button",{key:1,class:"btn-2 from-green-700 to-green-300 text-white hover:bg-green-600 hover:text-white",onClick:t[2]||(t[2]=O(()=>m(x(l).todo_date,"COMPLETED"),["prevent","stop"]))},t[11]||(t[11]=[e("i",{class:"fas fa-check"},null,-1),D(" Make Complete ")]))):C("",!0)])):C("",!0)])])])]),e("div",le,[e("button",{type:"button",onClick:t[3]||(t[3]=r=>b("cancelClick")),class:"btn-3"},"Cancel"),p.value&&!x(l).loading?(c(),S("div",de,[e("button",{class:"btn-2 bg-green-600 text-white hover:bg-green-700 hover:text-white bg-none",onClick:t[4]||(t[4]=O(r=>{var T,ot;return b("clickAddTodoDate",(T=x(l).todo_date)==null?void 0:T.todo_id,(ot=x(l).todo_date)==null?void 0:ot.date)},["prevent","stop"]))},t[14]||(t[14]=[e("i",{class:"fas fa-plus"},null,-1),D(" Add To another date ")])),e("button",{class:"btn-2-red",onClick:t[5]||(t[5]=O(()=>k(x(l).todo_date),["prevent","stop"]))},t[15]||(t[15]=[e("i",{class:"fas fa-trash-alt"},null,-1),D(" Delete ")]))])):C("",!0)])])}}},be={__name:"TodoCreateEditShow",props:{todoModal:{type:Object,required:!0},userRole:{type:String,required:"employee"}},emits:["cancelClick","todoUpdate","todoDateUpdate","clickEdit","clickDelete","clickChangeStatus","clickAddTodoDate"],setup(n,{emit:$}){const o=$;function l(){o("todoUpdate")}function y(){o("todoDateUpdate")}return(b,s)=>(c(),S(X,null,[n.todoModal.action=="add"?(c(),U(Z,{key:0},{default:R(()=>{var v,p,k,m;return[V(Lt,{onCancelClick:s[0]||(s[0]=d=>o("cancelClick")),onUpdate:l,date:(v=n.todoModal)==null?void 0:v.date,todoType:(p=n.todoModal)==null?void 0:p.todoType,todoTypeId:(k=n.todoModal)==null?void 0:k.todoTypeId,readonlyValues:((m=n.todoModal)==null?void 0:m.formReadonlyValues)||{},userRole:n.userRole},null,8,["date","todoType","todoTypeId","readonlyValues","userRole"])]}),_:1})):C("",!0),n.todoModal.action=="addDate"?(c(),U(Z,{key:1},{default:R(()=>{var v,p,k;return[V(zt,{onCancelClick:s[1]||(s[1]=m=>o("cancelClick")),onUpdate:y,date:(v=n.todoModal)==null?void 0:v.date,todoId:(p=n.todoModal)==null?void 0:p.todo_id,userRole:n.userRole,readonlyValues:((k=n.todoModal)==null?void 0:k.formReadonlyValues)||{}},null,8,["date","todoId","userRole","readonlyValues"])]}),_:1})):C("",!0),n.todoModal.action=="edit"?(c(),U(Z,{key:2},{default:R(()=>{var v,p;return[V(Gt,{onCancelClick:s[2]||(s[2]=k=>o("cancelClick")),onUpdate:l,todo:(v=n.todoModal)==null?void 0:v.todo,userRole:n.userRole,readonlyValues:((p=n.todoModal)==null?void 0:p.formReadonlyValues)||{}},null,8,["todo","userRole","readonlyValues"])]}),_:1})):C("",!0),n.todoModal.action=="show"?(c(),U(Z,{key:3},{default:R(()=>{var v;return[V(ae,{onCancelClick:s[3]||(s[3]=p=>o("cancelClick")),onUpdate:y,onClickEdit:s[4]||(s[4]=p=>o("clickEdit",p)),onClickAddTodoDate:s[5]||(s[5]=(...p)=>o("clickAddTodoDate",...p)),onClickDelete:s[6]||(s[6]=p=>o("clickDelete",p)),onClickChangeStatus:s[7]||(s[7]=(p,k)=>o("clickChangeStatus",p,k)),todoDate:(v=n.todoModal)==null?void 0:v.todo,userRole:n.userRole},null,8,["todoDate","userRole"])]}),_:1})):C("",!0)],64))}};export{be as _};
