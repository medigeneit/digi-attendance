import{C as L,r as i,D as g}from"./index-BMFUpxpI.js";const B=L("attendance",()=>{const p=i([]),v=i([]),w=i([]),f=i(null),h=i(null),b=i(new Date().toISOString().substring(0,7)),S=i(new Date().toISOString().substring(0,10)),e=i(null),r=i(!1);return{monthlyLogs:p,dailyLateLogs:w,summary:f,monthly_company_summary:h,selectedMonth:b,selectedDate:S,error:e,isLoading:r,dailyLogs:v,getMonthlyAttendanceByShift:async(n,c)=>{var o,l;if(!n||!c){e.value="Invalid user ID or month";return}console.log("sdfsdf",n),r.value=!0;try{const a=await g.get(`/user/${n}/attendance/monthly/${c}`);p.value=a.data.monthly_logs,f.value=a.data.summary,e.value=null}catch(a){e.value=((l=(o=a.response)==null?void 0:o.data)==null?void 0:l.message)||"Something went wrong",console.error(e.value)}finally{r.value=!1}},getTodayAttendanceReport:async(n,c,o,l,a,t)=>{var s,d;r.value=!0;try{const u={companyId:n,departmentId:c,employee_id:o,category:l,month:a,status:t},m=await g.get("/attendance/today",{params:u});v.value=m.data,e.value=null}catch(u){e.value=((d=(s=u.response)==null?void 0:s.data)==null?void 0:d.message)||"Something went wrong",console.error(e.value)}finally{r.value=!1}},getAttendanceLateReport:async(n,c,o)=>{var l,a;r.value=!0;try{const t={company_id:n,employee_id:c,month:o};console.log({params:t});const s=await g.get("/monthly/attendance/late-reports",{params:t});w.value=s.data,e.value=null}catch(t){e.value=((a=(l=t.response)==null?void 0:l.data)==null?void 0:a.message)||"Something went wrong",console.error(e.value)}finally{r.value=!1}},getMonthlyAttendanceSummaryReport:async(n,c,o,l)=>{var a,t;if(!n||!l){e.value="Invalid user ID or month";return}r.value=!0;try{const s={company_id:n,employee_id:c,category:o,month:l},d=await g.get("/attendance/monthly-summary-reports",{params:s});h.value=d.data,e.value=null}catch(s){e.value=((t=(a=s.response)==null?void 0:a.data)==null?void 0:t.message)||"Something went wrong",console.error(e.value)}finally{r.value=!1}},downloadExcel:async(n,c,o)=>{var l,a;if(!n||!o){e.value="Invalid company ID or month";return}r.value=!0;try{const t={company_id:n,category:c,month:o};console.log({params:t});const s=await g.get("/attendance/monthly-summary-reports?flag=excel",{params:t,responseType:"blob"}),d=window.URL.createObjectURL(new Blob([s.data])),u=document.createElement("a");u.href=d,u.setAttribute("download",`${o} attendance_summary.xlsx`),document.body.appendChild(u),u.click(),document.body.removeChild(u)}catch(t){e.value=((a=(l=t.response)==null?void 0:l.data)==null?void 0:a.message)||"Something went wrong",console.error(e.value)}finally{r.value=!1}},downloadPDF:async(n,c,o,l=0)=>{var a,t;if(!n||!o){e.value="Invalid user ID or month";return}r.value=!0;try{const s={company_id:n,category:c,month:o},d=await g.get("/attendance/monthly-summary-reports?flag=pdf",{params:s,responseType:"blob"}),u=window.URL.createObjectURL(new Blob([d.data])),m=document.createElement("a");m.href=u,m.setAttribute("download",`${o} attendance_summary.pdf`),document.body.appendChild(m),m.click(),document.body.removeChild(m)}catch(s){e.value=((t=(a=s.response)==null?void 0:a.data)==null?void 0:t.message)||"Something went wrong",console.error(e.value)}finally{r.value=!1}},attendanceDownloadExcel:async(n,c,o,l,a)=>{var t,s;r.value=!0;try{const d={companyId:n,employee_id:c,category:o,month:l,status:a},u=await g.get("/attendance/today?flag=excel",{params:d,responseType:"blob"}),m=window.URL.createObjectURL(new Blob([u.data])),y=document.createElement("a");y.href=m,y.setAttribute("download",`${l} attendance_summary.xlsx`),document.body.appendChild(y),y.click(),document.body.removeChild(y)}catch(d){e.value=((s=(t=d.response)==null?void 0:t.data)==null?void 0:s.message)||"Something went wrong",console.error(e.value)}finally{r.value=!1}},attendanceDownloadPdf:async(n,c,o,l,a)=>{var t,s;r.value=!0;try{const d={companyId:n,employee_id:c,category:o,month:l,status:a},u=await g.get("/attendance/today?flag=pdf",{params:d,responseType:"blob"}),m=window.URL.createObjectURL(new Blob([u.data])),y=document.createElement("a");y.href=m,y.setAttribute("download",`${l} attendance_summary.pdf`),document.body.appendChild(y),y.click(),document.body.removeChild(y)}catch(d){e.value=((s=(t=d.response)==null?void 0:t.data)==null?void 0:s.message)||"Something went wrong",console.error(e.value)}finally{r.value=!1}}}});export{B as u};
