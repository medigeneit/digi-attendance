import{u as M,r as N,x as C,h as P,q as R,p as B,c as d,o as l,a as s,d as m,k as T,H as i,F as b,e as h,t as r,l as v,m as F,j as w,b as k,s as A}from"./index-BL1KzWGA.js";import{L as H}from"./LoaderView-96HMDrLM.js";import{u as Y}from"./leave-application-Bn61oOWU.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const q={class:"px-4 py-4 max-w-full mx-auto space-y-4"},W={class:"flex flex-wrap items-center justify-between gap-3"},$={class:"flex gap-3"},z=["value"],E={key:0,class:"flex justify-center py-10"},G={key:1},U={key:0,class:"flex justify-center"},I={class:"max-w-md w-full bg-white rounded-lg border border-dashed border-gray-300 p-6 text-center space-y-3 shadow-sm"},J={key:1,class:"hidden md:block"},K={class:"overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm"},O={class:"flex items-center justify-between px-4 py-3 border-b border-gray-100 text-sm text-gray-600"},Q={key:0,class:"text-xs text-gray-400"},X={class:"overflow-x-auto"},Z={class:"min-w-full table-auto text-sm"},p={class:"px-3 py-2 align-top"},ee={class:"px-3 py-2 align-top"},se={class:"px-3 py-2 align-top"},te={class:"px-3 py-2 align-top"},re={class:"font-medium"},de={class:"text-xs text-gray-500 ml-1"},le={class:"px-3 py-2 align-top"},ne={class:"px-3 py-2 align-top"},oe={class:"px-3 py-2 text-center align-top"},ue=["href"],xe={key:1,class:"text-xs text-gray-400"},ye={class:"px-3 py-2 align-top"},me={class:"flex gap-2"},fe=["onClick"],ge={class:"space-y-3 md:hidden"},ae={class:"flex items-start justify-between gap-2"},ve={class:"text-xs text-gray-400"},_e={class:"text-sm font-semibold text-gray-800"},be={class:"grid grid-cols-2 gap-2 text-xs text-gray-600"},he={class:"font-medium"},we={class:"font-medium"},ke={class:"font-medium"},Ae={class:"font-medium"},Le={class:"flex items-center justify-between pt-2 border-t border-gray-100"},ce=["href"],Ce={key:1,class:"text-[11px] text-gray-400"},De={class:"flex gap-2"},je=["onClick"],Re={__name:"MyLeaveApplications",setup(Se){const D=M(),u=Y(),o=N(""),j=C(()=>{const n=new Date().getFullYear();return Array.from({length:5},(x,a)=>n-a)});P(()=>{u.fetchMyLeaveApplications({year:o.value||null})}),R(o,n=>{u.fetchMyLeaveApplications({year:n||null})});const S=()=>{D.go(-1)},f=C(()=>u.leaveApplications||[]),g=n=>n?new Date(n).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):"â€”",L=n=>{switch(n){case"Approved":return"bg-green-100 text-green-700 border border-green-200";case"Rejected":return"bg-red-100 text-red-700 border border-red-200";case"Pending":default:return"bg-yellow-100 text-yellow-700 border border-yellow-200"}};function c(n){confirm("Are you sure you want to delete this leave application?")&&u.deleteLeaveApplication(n)}return(n,t)=>{var a;const x=B("RouterLink");return l(),d("div",q,[s("div",W,[s("button",{class:"btn-3 flex items-center gap-2",onClick:S},t[1]||(t[1]=[s("i",{class:"far fa-arrow-left"},null,-1),s("span",{class:"hidden md:inline"},"Back",-1)])),t[4]||(t[4]=s("div",{class:"flex-1 text-center"},[s("h1",{class:"title-md md:title-lg"},"My Leave Applications"),s("p",{class:"text-xs md:text-sm text-gray-500 mt-1"}," Track the status of your submitted leave requests. ")],-1)),s("div",$,[s("div",null,[T(s("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>o.value=e),class:"input-1"},[t[2]||(t[2]=s("option",{value:""},"All Years",-1)),(l(!0),d(b,null,h(j.value,e=>(l(),d("option",{key:e,value:e},r(e),9,z))),128))],512),[[i,o.value]])]),m(x,{to:{name:"LeaveApplicationAdd"},class:"btn-2 flex items-center gap-2"},{default:v(()=>t[3]||(t[3]=[s("i",{class:"far fa-paper-plane"},null,-1),s("span",null,"Apply for Leave",-1)])),_:1,__:[3]})])]),(a=F(u))!=null&&a.loading?(l(),d("div",E,[m(H)])):(l(),d("div",G,[f.value.length===0?(l(),d("div",U,[s("div",I,[t[6]||(t[6]=s("div",{class:"text-3xl mb-2"},"ðŸ˜´",-1)),t[7]||(t[7]=s("h2",{class:"font-semibold text-gray-700"},"No leave applications yet",-1)),t[8]||(t[8]=s("p",{class:"text-sm text-gray-500"}," You havenâ€™t submitted any leave application. Click below to apply for leave. ",-1)),m(x,{to:{name:"LeaveApplicationAdd"},class:"btn-2 inline-flex items-center gap-2 mt-2"},{default:v(()=>t[5]||(t[5]=[s("i",{class:"far fa-paper-plane"},null,-1),s("span",null,"Apply for Leave",-1)])),_:1,__:[5]})])])):(l(),d("div",J,[s("div",K,[s("div",O,[s("span",null,[t[9]||(t[9]=k("Total Applications: ")),s("strong",null,r(f.value.length),1)]),o.value?(l(),d("span",Q,[t[10]||(t[10]=k(" Showing for year: ")),s("strong",null,r(o.value),1)])):w("",!0)]),s("div",X,[s("table",Z,[t[14]||(t[14]=s("thead",{class:"bg-gray-50"},[s("tr",null,[s("th",{class:"px-3 py-2 text-left font-semibold text-gray-600"},"#"),s("th",{class:"px-3 py-2 text-left font-semibold text-gray-600"},"Last Working Date"),s("th",{class:"px-3 py-2 text-left font-semibold text-gray-600"},"Resumption Date"),s("th",{class:"px-3 py-2 text-left font-semibold text-gray-600"},"Total Days"),s("th",{class:"px-3 py-2 text-left font-semibold text-gray-600"},"Leave Types"),s("th",{class:"px-3 py-2 text-left font-semibold text-gray-600"},"Handover"),s("th",{class:"px-3 py-2 text-center font-semibold text-gray-600"},"Attachment"),s("th",{class:"px-3 py-2 text-left font-semibold text-gray-600"},"Status"),s("th",{class:"px-3 py-2 text-left font-semibold text-gray-600"},"Action")])],-1)),s("tbody",null,[(l(!0),d(b,null,h(f.value,(e,_)=>{var y;return l(),d("tr",{key:e==null?void 0:e.id,class:"border-t border-gray-100 hover:bg-blue-50 transition-colors"},[s("td",p,r(_+1),1),s("td",ee,r(g(e==null?void 0:e.last_working_date)),1),s("td",se,r(g(e==null?void 0:e.resumption_date)),1),s("td",te,[s("span",re,r(e==null?void 0:e.total_leave_days),1),s("span",de,"("+r(e==null?void 0:e.leave_period)+")",1)]),s("td",le,r(e.application_types),1),s("td",ne,r(((y=e==null?void 0:e.handover_user)==null?void 0:y.name)||"N/A"),1),s("td",oe,[e.attachment?(l(),d("a",{key:0,href:e==null?void 0:e.attachment,target:"_blank",class:"inline-flex items-center justify-center text-blue-600 hover:text-blue-800 underline"},t[11]||(t[11]=[s("i",{class:"fad fa-link mr-1"},null,-1),s("span",{class:"text-xs"},"View",-1)]),8,ue)):(l(),d("span",xe,"â€”"))]),s("td",ye,[s("span",{class:A(["inline-flex items-center px-2 py-1 rounded-full text-xs font-medium",L((e==null?void 0:e.status)||"Pending")])},[s("span",{class:A(["w-1.5 h-1.5 rounded-full mr-1.5",{"bg-green-500":(e==null?void 0:e.status)==="Approved","bg-red-500":(e==null?void 0:e.status)==="Rejected","bg-yellow-400":!(e!=null&&e.status)||(e==null?void 0:e.status)==="Pending"}])},null,2),k(" "+r((e==null?void 0:e.status)||"Pending"),1)],2)]),s("td",null,[s("div",me,[m(x,{to:{name:"MyLeaveApplicationShow",params:{id:e==null?void 0:e.id}},class:"btn-icon",title:"View details"},{default:v(()=>t[12]||(t[12]=[s("i",{class:"far fa-eye"},null,-1)])),_:2,__:[12]},1032,["to"]),e.status=="Pending"||!e.status?(l(),d("button",{key:0,type:"button",onClick:V=>c(e==null?void 0:e.id),class:"btn-icon",title:"Delete application"},t[13]||(t[13]=[s("i",{class:"far fa-trash text-red-600"},null,-1)]),8,fe)):w("",!0)])])])}),128))])])])])])),s("div",ge,[(l(!0),d(b,null,h(f.value,(e,_)=>{var y;return l(),d("div",{key:e==null?void 0:e.id,class:"bg-white border border-gray-200 rounded-lg p-3 shadow-sm space-y-2"},[s("div",ae,[s("div",null,[s("p",ve,"Application #"+r(_+1),1),s("p",_e,r(e.application_types||"Leave Application"),1)]),s("span",{class:A(["inline-flex items-center px-2 py-1 rounded-full text-[10px] font-medium",L((e==null?void 0:e.status)||"Pending")])},r((e==null?void 0:e.status)||"Pending"),3)]),s("div",be,[s("div",null,[t[15]||(t[15]=s("p",{class:"text-gray-400"},"Last Working",-1)),s("p",he,r(g(e==null?void 0:e.last_working_date)),1)]),s("div",null,[t[16]||(t[16]=s("p",{class:"text-gray-400"},"Resumption",-1)),s("p",we,r(g(e==null?void 0:e.resumption_date)),1)]),s("div",null,[t[17]||(t[17]=s("p",{class:"text-gray-400"},"Total Days",-1)),s("p",ke,r(e==null?void 0:e.total_leave_days)+" "+r(e==null?void 0:e.leave_period),1)]),s("div",null,[t[18]||(t[18]=s("p",{class:"text-gray-400"},"Handover",-1)),s("p",Ae,r(((y=e==null?void 0:e.handover_user)==null?void 0:y.name)||"N/A"),1)])]),s("div",Le,[s("div",null,[e.attachment?(l(),d("a",{key:0,href:e==null?void 0:e.attachment,target:"_blank",class:"inline-flex items-center text-xs text-blue-600 hover:text-blue-800 underline"},t[19]||(t[19]=[s("i",{class:"fad fa-link mr-1"},null,-1),s("span",null,"View Attachment",-1)]),8,ce)):(l(),d("span",Ce,"No attachment"))]),s("div",De,[m(x,{to:{name:"MyLeaveApplicationShow",params:{id:e==null?void 0:e.id}},class:"btn-icon"},{default:v(()=>t[20]||(t[20]=[s("i",{class:"far fa-eye"},null,-1)])),_:2,__:[20]},1032,["to"]),e.status=="Pending"||!e.status?(l(),d("button",{key:0,type:"button",onClick:V=>c(e==null?void 0:e.id),class:"btn-icon"},t[21]||(t[21]=[s("i",{class:"far fa-trash text-red-600"},null,-1)]),8,je)):w("",!0)])])])}),128))])]))])}}};export{Re as default};
