import{E as I,r as p,G as i}from"./index-DZLiC_or.js";const L=I("leaveApplication",()=>{const s=p([]),v=p(null),o=p(!1),e=p(null);async function d(n={}){var l,t;o.value=!0,e.value=null;try{const a=await i.get("/leave-applications",{params:n});s.value=a.data.data}catch(a){e.value=((t=(l=a.response)==null?void 0:l.data)==null?void 0:t.message)||"Failed to fetch leave applications"}finally{o.value=!1}}async function f(n){var l,t;o.value=!0,e.value=null;try{const a=await i.post("/leave-applications/store",n);return s.value.push(a.data.data),a.data.data}catch(a){throw e.value=((t=(l=a.response)==null?void 0:l.data)==null?void 0:t.message)||"Failed to store leave application",new Error(e.value)}finally{o.value=!1}}async function y(n,l){var t,a;o.value=!0,e.value=null;try{const r=await i.post(`/leave-applications/${n}/update`,l),c=s.value.findIndex(u=>u.id===n);return c!==-1&&(s.value[c]=r.data.data),r.data.data}catch(r){throw e.value=((a=(t=r.response)==null?void 0:t.data)==null?void 0:a.message)||"Failed to update leave application",new Error(e.value)}finally{o.value=!1}}async function h(n){var l,t;o.value=!0,e.value=null;try{const a=await i.get(`/leave-applications/${n}`);v.value=a.data}catch(a){e.value=((t=(l=a.response)==null?void 0:l.data)==null?void 0:t.message)||"Failed to fetch leave application"}finally{o.value=!1}}async function w(n){var l,t;o.value=!0,e.value=null;try{const a=await i.post(`/leave-applications/${n}/handover-accept`),r=s.value.findIndex(c=>c.id===n);return r!==-1&&(s.value[r]=a.data.data),a.data.data}catch(a){throw e.value=((t=(l=a.response)==null?void 0:l.data)==null?void 0:t.message)||"Failed to accept handover",new Error(e.value)}finally{o.value=!1}}async function m(n){var l,t;o.value=!0,e.value=null;try{const a=await i.post(`/leave-applications/${n}/incharge-accept`),r=s.value.findIndex(c=>c.id===n);return r!==-1&&(s.value[r]=a.data.data),a.data.data}catch(a){throw e.value=((t=(l=a.response)==null?void 0:l.data)==null?void 0:t.message)||"Failed to accept in-charge approval",new Error(e.value)}finally{o.value=!1}}async function g(n){var l,t;o.value=!0,e.value=null;try{const a=await i.post(`/leave-applications/${n}/coordinator-accept`),r=s.value.findIndex(c=>c.id===n);return r!==-1&&(s.value[r]=a.data.data),a.data.data}catch(a){throw e.value=((t=(l=a.response)==null?void 0:l.data)==null?void 0:t.message)||"Failed to accept coordinator approval",new Error(e.value)}finally{o.value=!1}}async function x(n){var l,t;o.value=!0,e.value=null;try{const a=await i.post(`/leave-applications/${n}/operational-admin-accept`),r=s.value.findIndex(c=>c.id===n);return r!==-1&&(s.value[r]=a.data.data),a.data.data}catch(a){throw e.value=((t=(l=a.response)==null?void 0:l.data)==null?void 0:t.message)||"Failed to accept operational admin approval",new Error(e.value)}finally{o.value=!1}}async function A(n){var l,t;o.value=!0,e.value=null;try{const a=await i.post(`/leave-applications/${n}/recommend-by-accept`),r=s.value.findIndex(c=>c.id===n);return r!==-1&&(s.value[r]=a.data.data),a.data.data}catch(a){throw e.value=((t=(l=a.response)==null?void 0:l.data)==null?void 0:t.message)||"Failed to accept recommend by approval",new Error(e.value)}finally{o.value=!1}}async function F(n){var l,t;o.value=!0,e.value=null;try{const a=await i.post(`/leave-applications/${n}/approved-by-accept`),r=s.value.findIndex(c=>c.id===n);return r!==-1&&(s.value[r]=a.data.data),a.data.data}catch(a){throw e.value=((t=(l=a.response)==null?void 0:l.data)==null?void 0:t.message)||"Failed to accept approval by admin",new Error(e.value)}finally{o.value=!1}}async function E(n,l){var t,a;o.value=!0,e.value=null;try{const r=await i.post(`/leave-applications/${n}/reject`,l),c=s.value.findIndex(u=>u.id===n);return c!==-1&&(s.value[c]=r.data.data),r.data.data}catch(r){throw e.value=((a=(t=r.response)==null?void 0:t.data)==null?void 0:a.message)||"Failed to reject leave application",new Error(e.value)}finally{o.value=!1}}return{leaveApplications:s,leaveApplication:v,loading:o,error:e,fetchLeaveApplications:d,storeLeaveApplication:f,updateLeaveApplication:y,fetchLeaveApplicationById:h,acceptHandover:w,acceptInCharge:m,acceptCoordinator:g,acceptOperationalAdmin:x,acceptRecommendBy:A,acceptApprovedBy:F,rejectLeaveApplication:E}});export{L as u};
