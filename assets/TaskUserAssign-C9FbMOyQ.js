import{b as k,u as x,r as u,q as h,e as w,c as n,o as i,a as s,t as d,h as c,w as U,f as S,l as T}from"./index-8rR3QT3M.js";import{_ as V}from"./MultiselectDropdown-CXSF7972.js";import{u as A}from"./useTaskStore-BOg9NRU7.js";import{u as B}from"./user-BHqViTi3.js";import"./vue-multiselect.esm-B34IYCjZ.js";const C={class:"container mx-auto p-6"},L={class:"max-w-xl mx-auto bg-white shadow-lg rounded-lg p-6"},N={class:"text-2xl font-semibold text-gray-800 mb-4"},M={key:0,class:"text-center text-gray-500 py-4"},R={class:"mb-4"},$={key:0,class:"mb-4 text-red-500 font-medium"},q={class:"flex items-center gap-4"},D=["disabled"],H={__name:"TaskUserAssign",setup(E){const a=A(),m=B(),f=k(),p=x(),o=u([]),_=h(()=>o.value.map(l=>l.id)),g=f.params.id,e=u(!1),r=u(null);w(async()=>{e.value=!0,await a.fetchTask(g),await m.fetchUsers(),o.value=a.task.users,e.value=!1});const y=async()=>{e.value=!0,r.value=null;try{await a.assignUsers(g,_.value),p.push({name:"TaskList"})}catch(l){r.value=l.message||"Assign users failed"}finally{e.value=!1}};return(l,t)=>{var b;return i(),n("div",C,[s("div",L,[s("h2",N,' Assign Users to Task: "'+d((b=c(a).task)==null?void 0:b.title)+'" ',1),e.value?(i(),n("div",M,"Loading users...")):(i(),n("form",{key:1,onSubmit:U(y,["prevent"])},[s("div",R,[t[2]||(t[2]=s("label",{class:"block text-gray-700 font-medium mb-2"},"Select Users",-1)),T(V,{modelValue:o.value,"onUpdate:modelValue":t[0]||(t[0]=v=>o.value=v),options:c(m).users,multiple:!0,"track-by":"id",label:"label",placeholder:"Select users"},null,8,["modelValue","options"])]),r.value?(i(),n("div",$,d(r.value),1)):S("",!0),s("div",q,[s("button",{disabled:e.value,type:"submit",class:"bg-indigo-500 hover:bg-indigo-600 text-white font-semibold px-5 py-2 rounded transition"},d(e.value?"Assigning...":"Assign Users"),9,D),s("button",{type:"button",onClick:t[1]||(t[1]=v=>c(p).push({name:"TaskList"})),class:"bg-gray-200 hover:bg-gray-300 text-gray-700 font-semibold px-5 py-2 rounded transition"}," Cancel ")])],32))])])}}};export{H as default};
