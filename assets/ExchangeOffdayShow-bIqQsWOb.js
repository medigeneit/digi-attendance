import{_ as u}from"./ApprovalItem-NNyweNt7.js";import{L as at}from"./LoaderView-BA3B-5dW.js";import{_ as nt}from"./ScreenshotCapture-DbreleQZ.js";import{_ as lt}from"./ShareComponent-eOQM_-qg.js";import{u as ot,f as it,g as dt,S as ct,r as K,x as rt,h as pt,c,o,a as t,j as mt,d as i,t as n,s as ut,k as Q,b as h,n as xt,m as ft}from"./index-CCY34wMb.js";import{u as _t}from"./exchange-DJcpkNmH.js";import"./AcceptAndRejectHandler-CJJcQtp8.js";import"./html2canvas.esm-CBrSDip1.js";const gt={class:"max-w-2xl mx-auto space-y-3 print:p-0"},ht={key:1,id:"leave-application",class:"bg-white rounded-lg p-4 md:p-8 text-sm md:text-base leading-relaxed"},vt={class:"text-center space-y-1"},yt={class:"flex justify-center items-center gap-2 text-xs md:text-sm text-slate-500"},bt={class:"font-semibold text-slate-900"},wt={class:"grid md:grid-cols-3 gap-4 mt-6"},kt={class:"space-y-2 md:col-span-2"},At={class:"flex"},Dt={class:"font-medium"},Nt={class:"flex"},Et={class:"font-medium"},jt={class:"flex"},St={class:"font-medium"},Bt={class:"flex md:justify-end"},Ft={class:"mt-8"},Ct={class:"grid md:grid-cols-2 gap-x-10 gap-y-3 mt-4"},Rt={class:"flex"},Vt={class:"font-medium"},Lt={class:"flex"},Ut={class:"font-medium"},Ht={class:"flex"},$t={class:"font-medium"},Ot={class:"flex"},Pt={class:"font-medium"},Tt={class:"md:col-span-2 flex items-start"},zt={class:"font-medium leading-relaxed"},Gt={class:"md:col-span-2 flex items-start"},It={class:"font-medium leading-relaxed"},Mt={class:"text-center space-y-1"},Wt={key:0,class:"text-sm text-red-700 mt-2"},qt={class:"grid grid-cols-2 md:grid-cols-3 gap-y-16 gap-x-6 mt-2 items-end"},Jt={class:"bg-white rounded-lg p-4 flex items-center justify-between gap-4 print:hidden"},Kt={class:"flex items-center gap-3"},Qt=["href"],Xt={key:1,class:"text-slate-400 italic"},Yt={key:2,class:"inline-flex cursor-pointer items-center gap-2 rounded-md px-3 py-2 text-sm font-semibold text-white bg-emerald-600 hover:bg-emerald-700"},de={__name:"ExchangeOffdayShow",setup(Zt){const X=ot(),f=it(),r=_t(),Y=dt(),x=ct(),v=K(!0),_=K(null),s=rt(()=>r.exchange);pt(async()=>{try{await r.fetchExchange(f.params.id)}catch(a){console.error("Failed to fetch exchange details:",a)}finally{v.value=!1}});const Z=()=>X.go(-1),tt=()=>window.print(),p=async()=>{await r.fetchExchange(f.params.id)},g=a=>a?new Date(a).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):"",y=a=>a?new Date(a).toLocaleDateString("en-US",{weekday:"long"}):"",et=async a=>{var m;const e=(m=a.target.files)==null?void 0:m[0];if(e)try{const l=new FormData;l.append("file",e);const d=await r.fetchFileUpload(l);_.value=d==null?void 0:d.url,_.value?(await st(),x.success("File uploaded successfully")):x.error("Failed to upload file")}catch(l){console.error(l),x.error("Failed to upload file")}finally{a.target.value=""}},st=async()=>{try{await r.uploadAttachmentExchange(f.params.id,{attachment:_.value})}catch(a){console.error("Failed to upload attachment:",a),x.error("Failed to upload attachment")}};return(a,e)=>{var m,l,d,b,w,k,A,D,N,E,j,S,B,F,C,R,V,L,U,H,$,O,P,T,z,G,I,M,W,q,J;return o(),c("div",gt,[t("div",{class:"flex items-center justify-between print:hidden"},[t("button",{onClick:Z,class:"flex items-center gap-2 text-sm font-semibold text-slate-600 hover:text-black"}," â† Back "),e[0]||(e[0]=t("h1",{class:"text-base md:text-lg font-bold text-slate-900"},"Exchange Details",-1)),t("button",{onClick:tt,class:"text-sm font-semibold text-slate-600 hover:text-black"}," Print ")]),v.value?(o(),mt(at,{key:0})):(o(),c("div",ht,[t("div",vt,[e[2]||(e[2]=t("h1",{class:"text-xl md:text-2xl font-extrabold text-slate-900"}," Offday Exchange Application ",-1)),t("div",yt,[e[1]||(e[1]=t("span",null,"Created:",-1)),t("span",bt,n(g((m=s.value)==null?void 0:m.created_at)),1),t("span",{class:ut(["px-2 py-0.5 rounded-full font-semibold",{"bg-yellow-100 text-yellow-700":((l=s.value)==null?void 0:l.status)==="Pending","bg-green-100 text-green-700":((d=s.value)==null?void 0:d.status)==="Approved","bg-red-100 text-red-700":((b=s.value)==null?void 0:b.status)==="Rejected"}])},n(((w=s.value)==null?void 0:w.status)||"N/A"),3)])]),t("div",wt,[t("div",kt,[t("div",At,[e[3]||(e[3]=t("span",{class:"w-32 text-slate-500"},"Name",-1)),t("span",Dt,n((A=(k=s.value)==null?void 0:k.user)==null?void 0:A.name),1)]),t("div",Nt,[e[4]||(e[4]=t("span",{class:"w-32 text-slate-500"},"Designation",-1)),t("span",Et,n((E=(N=(D=s.value)==null?void 0:D.user)==null?void 0:N.designation)==null?void 0:E.title),1)]),t("div",jt,[e[5]||(e[5]=t("span",{class:"w-32 text-slate-500"},"Department",-1)),t("span",St,n(((B=(S=(j=s.value)==null?void 0:j.user)==null?void 0:S.department)==null?void 0:B.name)||((R=(C=(F=s.value)==null?void 0:F.user)==null?void 0:C.company)==null?void 0:R.name)||"N/A"),1)])]),t("div",Bt,[i(u,{application:s.value,type:"offday_exchange_applications",item:"handover",onAction:p},null,8,["application"])])]),t("div",Ft,[e[12]||(e[12]=t("h3",{class:"text-lg font-bold text-slate-900"},"Exchange Details",-1)),t("div",Ct,[t("div",Rt,[e[6]||(e[6]=t("span",{class:"w-32 text-slate-500"},"Holiday Day",-1)),t("span",Vt,n(y((V=s.value)==null?void 0:V.current_date)),1)]),t("div",Lt,[e[7]||(e[7]=t("span",{class:"w-32 text-slate-500"},"Holiday Date",-1)),t("span",Ut,n(g((L=s.value)==null?void 0:L.current_date)),1)]),t("div",Ht,[e[8]||(e[8]=t("span",{class:"w-32 text-slate-500"},"Exchange Day",-1)),t("span",$t,n(y((U=s.value)==null?void 0:U.exchange_date)),1)]),t("div",Ot,[e[9]||(e[9]=t("span",{class:"w-32 text-slate-500"},"Exchange Date",-1)),t("span",Pt,n(g((H=s.value)==null?void 0:H.exchange_date)),1)]),t("div",Tt,[e[10]||(e[10]=t("span",{class:"w-32 text-slate-500"},"Reason",-1)),t("span",zt,n((($=s.value)==null?void 0:$.reason)||"N/A"),1)]),t("div",Gt,[e[11]||(e[11]=t("span",{class:"w-32 text-slate-500"},"Works in Hand",-1)),t("span",It,n(((O=s.value)==null?void 0:O.works_in_hand)||"N/A"),1)])])]),e[16]||(e[16]=t("hr",{class:"my-4"},null,-1)),t("div",Mt,[e[15]||(e[15]=t("h3",{class:"text-lg font-bold"},"Approvals",-1)),((P=s.value)==null?void 0:P.status)==="Rejected"?(o(),c("div",Wt,[t("div",null,[e[13]||(e[13]=t("b",null,"Rejected By:",-1)),h(" "+n(((z=(T=s.value)==null?void 0:T.rejected_by_user)==null?void 0:z.name)||"N/A"),1)]),t("div",null,[e[14]||(e[14]=t("b",null,"Reason:",-1)),h(" "+n(((G=s.value)==null?void 0:G.rejection_reason)||"N/A"),1)])])):Q("",!0)]),t("div",qt,[i(u,{class:"md:hidden",application:s.value,type:"offday_exchange_applications",item:"handover",onAction:p},null,8,["application"]),i(u,{application:s.value,type:"offday_exchange_applications",item:"in_charge",onAction:p},null,8,["application"]),i(u,{application:s.value,type:"offday_exchange_applications",item:"recommend_by",onAction:p},null,8,["application"]),i(u,{application:s.value,type:"offday_exchange_applications",item:"approved_by",onAction:p},null,8,["application"])])])),t("div",Jt,[e[18]||(e[18]=t("div",null,[t("h3",{class:"font-bold text-slate-900"},"Attachment"),t("p",{class:"text-xs text-slate-500"},"Upload a file if needed.")],-1)),t("div",Kt,[(I=s.value)!=null&&I.attachment&&typeof((M=s.value)==null?void 0:M.attachment)=="string"?(o(),c("a",{key:0,href:s.value.attachment,target:"_blank",class:"text-emerald-600 font-semibold hover:underline"}," View file ",8,Qt)):(o(),c("span",Xt," No attachment ")),((q=(W=xt(Y))==null?void 0:W.user)==null?void 0:q.id)===((J=s.value)==null?void 0:J.user_id)?(o(),c("label",Yt,[e[17]||(e[17]=h(" Upload ")),t("input",{type:"file",class:"hidden",onChange:et},null,32)])):Q("",!0)])]),i(lt,null,{default:ft(()=>[i(nt,{targetId:"leave-application",platform:"whatsapp"})]),_:1})])}}};export{de as default};
