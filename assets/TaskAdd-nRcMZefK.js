import{_ as q}from"./TaskAddForm-rMwkRbeH.js";import{u as k}from"./user-CykJUCSz.js";import{u as T}from"./useRequirementStore-CajhLxRD.js";import{u as y}from"./useTaskStore-aZN5S7_h.js";import{b as I,u as R,s as n,r as c,y as h,A as v,e as N,c as S,o as b,l as x,h as a}from"./index-D9pNkE95.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const E={class:"container mx-auto p-6"},V={__name:"TaskAdd",setup(L){const u=y(),s=I(),m=R(),i=T(),d=k(),{requirement:M}=n(i),{users:U}=n(d),{task:$}=n(u),{taskListTree:A}=n(u),{flattenedTasks:B}=n(u),p=c([]),f=h(()=>p.value.map(e=>e.id)),_=c({title:"",user_ids:[],priority:"MEDIUM",status:"PENDING",description:"",is_important:!1,is_urgent:!1});return v(f,e=>{_.value.user_ids=e}),N(()=>{var e,t,r,o;i.fetchRequirements(),((e=s.query)==null?void 0:e.parent_id)>0&&u.fetchTask((t=s.query)==null?void 0:t.parent_id),((r=s.query)==null?void 0:r.requirement_id)>0&&i.fetchRequirement((o=s.query)==null?void 0:o.requirement_id)}),(e,t)=>{var r,o;return b(),S("div",E,[x(q,{parentTaskId:Number((r=a(s).query)==null?void 0:r.parent_id),requirementId:Number((o=a(s).query)==null?void 0:o.requirement_id),onCreated:t[0]||(t[0]=l=>a(m).push({name:"TaskList"})),onClose:t[1]||(t[1]=l=>a(m).push({name:"TaskList"}))},null,8,["parentTaskId","requirementId"])])}}};export{V as default};
