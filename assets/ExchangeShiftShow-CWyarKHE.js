import{_ as u}from"./ApprovalItem-c1iVsjb_.js";import{L as et}from"./LoaderView-BLs5epmy.js";import{_ as st}from"./ScreenshotCapture-Pmowpnj2.js";import{_ as at}from"./ShareComponent-B0lVnhYu.js";import{u as nt,f as lt,g as ot,R as it,r as q,x as dt,h as ct,c as r,o,a as t,j as rt,d as i,t as a,s as pt,k as J,b as _,n as mt,m as ut}from"./index-oQTcVtne.js";import{u as xt}from"./exchange-KNi1k0i0.js";import"./AcceptAndRejectHandler-mBgKgZsp.js";import"./html2canvas.esm-CBrSDip1.js";const ft={class:"max-w-2xl mx-auto space-y-3 print:p-0"},ht={key:1,id:"leave-application",class:"bg-white rounded-lg p-4 md:p-8 text-sm md:text-base leading-relaxed"},_t={class:"text-center space-y-1"},gt={class:"flex justify-center items-center gap-2 text-xs md:text-sm text-slate-500"},vt={class:"font-semibold text-slate-900"},yt={class:"grid md:grid-cols-3 gap-6 mt-6"},wt={class:"space-y-2 md:col-span-2"},bt={class:"flex"},kt={class:"font-medium"},At={class:"flex"},Dt={class:"font-medium"},St={class:"flex"},Et={class:"font-medium"},jt={class:"flex md:justify-end"},Nt={class:"mt-8"},Bt={class:"grid md:grid-cols-2 gap-x-10 gap-y-3 mt-4"},Ft={class:"flex"},Rt={class:"font-medium"},Ct={class:"flex"},Vt={class:"font-medium"},Lt={class:"flex"},Ut={class:"font-medium"},Tt={class:"flex"},$t={class:"font-medium"},Pt={class:"md:col-span-2 flex items-start"},zt={class:"font-medium leading-relaxed"},Gt={class:"md:col-span-2 flex items-start"},Ht={class:"font-medium leading-relaxed"},It={class:"text-center space-y-1"},Mt={key:0,class:"text-sm text-red-700 mt-2"},Wt={class:"grid grid-cols-2 md:grid-cols-3 gap-y-16 gap-x-6 mt-2"},qt={class:"bg-white rounded-lg p-4 flex items-center justify-between gap-4 print:hidden"},Jt={class:"flex items-center gap-3"},Kt=["href"],Ot={key:1,class:"text-slate-400 italic"},Qt={key:2,class:"inline-flex cursor-pointer items-center gap-2 rounded-md px-3 py-2 text-sm font-semibold text-white bg-emerald-600 hover:bg-emerald-700"},oe={__name:"ExchangeShiftShow",setup(Xt){const K=nt(),x=lt(),d=xt(),O=ot(),f=it(),g=q(!0),h=q(null),s=dt(()=>d.exchange);ct(async()=>{try{await d.fetchExchange(x.params.id)}finally{g.value=!1}});const Q=()=>K.go(-1),X=()=>window.print(),p=async()=>{await d.fetchExchange(x.params.id)},v=n=>n?new Date(n).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):"",Y=n=>n?new Date(n).toLocaleDateString("en-US",{weekday:"long"}):"",Z=async n=>{var m;const e=(m=n.target.files)==null?void 0:m[0];if(e)try{const l=new FormData;l.append("file",e);const c=await d.fetchFileUpload(l);h.value=c==null?void 0:c.url,h.value?(await tt(),f.success("File uploaded successfully")):f.error("Failed to upload file")}catch(l){console.error(l),f.error("Failed to upload file")}finally{n.target.value=""}},tt=async()=>{try{await d.uploadAttachmentExchange(x.params.id,{attachment:h.value}),await d.fetchExchange(x.params.id)}catch(n){console.error("Failed to upload attachment:",n),f.error("Failed to upload attachment")}};return(n,e)=>{var m,l,c,y,w,b,k,A,D,S,E,j,N,B,F,R,C,V,L,U,T,$,P,z,G,H,I,M,W;return o(),r("div",ft,[t("div",{class:"flex items-center justify-between print:hidden"},[t("button",{onClick:Q,class:"flex items-center gap-2 text-sm font-semibold text-slate-600 hover:text-black"}," â† Back "),e[0]||(e[0]=t("h1",{class:"text-base md:text-lg font-bold text-slate-900"},"Exchange Details",-1)),t("button",{onClick:X,class:"text-sm font-semibold text-slate-600 hover:text-black"}," Print ")]),g.value?(o(),rt(et,{key:0})):(o(),r("div",ht,[t("div",_t,[e[2]||(e[2]=t("h1",{class:"text-xl md:text-2xl font-extrabold text-slate-900"}," Shift Exchange Application ",-1)),t("div",gt,[e[1]||(e[1]=t("span",null,"Created:",-1)),t("span",vt,a(v((m=s.value)==null?void 0:m.created_at)),1),t("span",{class:pt(["px-2 py-0.5 rounded-full font-semibold",{"bg-yellow-100 text-yellow-700":((l=s.value)==null?void 0:l.status)==="Pending","bg-green-100 text-green-700":((c=s.value)==null?void 0:c.status)==="Approved","bg-red-100 text-red-700":((y=s.value)==null?void 0:y.status)==="Rejected"}])},a((w=s.value)==null?void 0:w.status),3)])]),t("div",yt,[t("div",wt,[t("div",bt,[e[3]||(e[3]=t("span",{class:"w-32 text-slate-500"},"Name",-1)),t("span",kt,a((k=(b=s.value)==null?void 0:b.user)==null?void 0:k.name),1)]),t("div",At,[e[4]||(e[4]=t("span",{class:"w-32 text-slate-500"},"Designation",-1)),t("span",Dt,a((S=(D=(A=s.value)==null?void 0:A.user)==null?void 0:D.designation)==null?void 0:S.title),1)]),t("div",St,[e[5]||(e[5]=t("span",{class:"w-32 text-slate-500"},"Department",-1)),t("span",Et,a((N=(j=(E=s.value)==null?void 0:E.user)==null?void 0:j.department)==null?void 0:N.name),1)])]),t("div",jt,[i(u,{application:s.value,type:"shift_exchange_applications",item:"handover",onAction:p},null,8,["application"])])]),t("div",Nt,[e[12]||(e[12]=t("h3",{class:"text-lg font-bold text-slate-900"},"Exchange Details",-1)),t("div",Bt,[t("div",Ft,[e[6]||(e[6]=t("span",{class:"w-32 text-slate-500"},"Exchange Day",-1)),t("span",Rt,a(Y((B=s.value)==null?void 0:B.exchange_date)),1)]),t("div",Ct,[e[7]||(e[7]=t("span",{class:"w-32 text-slate-500"},"Exchange Date",-1)),t("span",Vt,a(v((F=s.value)==null?void 0:F.exchange_date)),1)]),t("div",Lt,[e[8]||(e[8]=t("span",{class:"w-32 text-slate-500"},"From Shift",-1)),t("span",Ut,a((C=(R=s.value)==null?void 0:R.current_shift)==null?void 0:C.name),1)]),t("div",Tt,[e[9]||(e[9]=t("span",{class:"w-32 text-slate-500"},"To Shift",-1)),t("span",$t,a((L=(V=s.value)==null?void 0:V.shift)==null?void 0:L.name),1)]),t("div",Pt,[e[10]||(e[10]=t("span",{class:"w-32 text-slate-500"},"Reason",-1)),t("span",zt,a(((U=s.value)==null?void 0:U.reason)||"N/A"),1)]),t("div",Gt,[e[11]||(e[11]=t("span",{class:"w-32 text-slate-500"},"Works in Hand",-1)),t("span",Ht,a(((T=s.value)==null?void 0:T.works_in_hand)||"N/A"),1)])])]),e[16]||(e[16]=t("hr",{class:"my-4"},null,-1)),t("div",It,[e[15]||(e[15]=t("h3",{class:"text-lg font-bold"},"Approvals",-1)),(($=s.value)==null?void 0:$.status)==="Rejected"?(o(),r("div",Mt,[t("div",null,[e[13]||(e[13]=t("b",null,"Rejected By:",-1)),_(" "+a((z=(P=s.value)==null?void 0:P.rejected_by_user)==null?void 0:z.name),1)]),t("div",null,[e[14]||(e[14]=t("b",null,"Reason:",-1)),_(" "+a((G=s.value)==null?void 0:G.rejection_reason),1)])])):J("",!0)]),t("div",Wt,[i(u,{application:s.value,type:"shift_exchange_applications",item:"in_charge",onAction:p},null,8,["application"]),i(u,{application:s.value,type:"shift_exchange_applications",item:"coordinator",onAction:p},null,8,["application"]),i(u,{application:s.value,type:"shift_exchange_applications",item:"recommend_by",onAction:p},null,8,["application"]),i(u,{application:s.value,type:"shift_exchange_applications",item:"approved_by",onAction:p},null,8,["application"])])])),t("div",qt,[e[18]||(e[18]=t("div",null,[t("h3",{class:"font-bold text-slate-900"},"Attachment"),t("p",{class:"text-xs text-slate-500"},"Upload a file if needed.")],-1)),t("div",Jt,[(H=s.value)!=null&&H.attachment?(o(),r("a",{key:0,href:s.value.attachment,target:"_blank",class:"text-emerald-600 font-semibold hover:underline"}," View file ",8,Kt)):(o(),r("span",Ot,"No attachment")),((M=(I=mt(O))==null?void 0:I.user)==null?void 0:M.id)===((W=s.value)==null?void 0:W.user_id)?(o(),r("label",Qt,[e[17]||(e[17]=_(" Upload ")),t("input",{type:"file",class:"hidden",onChange:Z},null,32)])):J("",!0)])]),i(at,null,{default:ut(()=>[i(st,{targetId:"leave-application",platform:"whatsapp"})]),_:1})])}}};export{oe as default};
