import{C as $,r as c,x as v,D as o}from"./index-DIr8d3r1.js";const T=$("task",()=>{const u=c([]),i=c(null),r=c(!1),l=c(null),k=async(a,t)=>{var s,e;r.value=!0,l.value=null;try{await o.post(`/tasks/${a}/assign-users`,{user_ids:t}),await d(a)}catch(n){throw l.value=((e=(s=n.response)==null?void 0:s.data)==null?void 0:e.message)||"Assign users failed",n}finally{r.value=!1}},p=async()=>{var a,t;r.value=!0,l.value=null;try{const s=await o.get("/tasks");u.value=s.data}catch(s){l.value=((t=(a=s.response)==null?void 0:a.data)==null?void 0:t.message)||"টাস্ক লোড করতে ব্যর্থ হয়েছে।",console.error("Error fetching tasks:",s)}finally{r.value=!1}},d=async a=>{var t,s;r.value=!0,l.value=null;try{const e=await o.get(`/tasks/${a}`);i.value=e.data}catch(e){l.value=((s=(t=e.response)==null?void 0:t.data)==null?void 0:s.message)||`টাস্ক (ID: ${a}) লোড করতে ব্যর্থ হয়েছে।`,console.error(`Error fetching task with id ${a}:`,e)}finally{r.value=!1}},g=async a=>{var t,s;r.value=!0,l.value=null;try{const e=await o.post("/tasks",a);return u.value.push(e.data.data),e.data.data}catch(e){l.value=((s=(t=e.response)==null?void 0:t.data)==null?void 0:s.message)||"টাস্ক তৈরি করতে ব্যর্থ হয়েছে।",console.error("Error creating task:",e)}finally{r.value=!1}},y=async(a,t)=>{var s,e;r.value=!0,l.value=null;try{const n=await o.put(`/tasks/${a}`,t),f=u.value.findIndex(w=>w.id===a);return f!==-1&&(u.value[f]=n.data.data),n.data.data}catch(n){l.value=((e=(s=n.response)==null?void 0:s.data)==null?void 0:e.message)||`টাস্ক (ID: ${a}) আপডেট করতে ব্যর্থ হয়েছে।`,console.error(`Error updating task with id ${a}:`,n)}finally{r.value=!1}},h=async a=>{var t,s;r.value=!0,l.value=null;try{await o.delete(`/tasks/${a}`),u.value=u.value.filter(e=>e.id!==a)}catch(e){l.value=((s=(t=e.response)==null?void 0:t.data)==null?void 0:s.message)||`টাস্ক (ID: ${a}) মুছতে ব্যর্থ হয়েছে।`,console.error(`Error deleting task with id ${a}:`,e)}finally{r.value=!1}};return{tasks:v(()=>u.value),task:v(()=>i.value),loading:v(()=>r.value),error:v(()=>l.value),fetchTasks:p,fetchTask:d,createTask:g,updateTask:y,deleteTask:h,assignUsers:k}});export{T as u};
