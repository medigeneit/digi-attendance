import{o as a,c as n,a as t,t as l,q as f,s as j,b as k,F as g,x as h,l as D,h as v,y as L,e as C,z as E,k as R,r as M,p as q,m as x,n as w,g as I,f as V,A as O,B as H}from"./index-Vii3T_Hb.js";import{u as z}from"./useBugStore-DbDvd49b.js";import{u as A}from"./useMeetingStore-BKbSfFab.js";import{u as P}from"./useProjectStore-BFDcBwHF.js";import{u as F}from"./useTodoStore-D0pEnf_a.js";import{u as U}from"./useRequirementStore-CxwbDi7B.js";import{u as G}from"./useTaskStore-BciFTofG.js";import{_ as J}from"./_plugin-vue_export-helper-DlAUqK2U.js";const K={class:"bg-white rounded-lg p-4 shadow hover:shadow-md transition-shadow"},Q={class:"flex items-center justify-between pb-2"},W={class:"text-sm font-medium text-gray-700"},X={class:"text-2xl font-bold text-gray-900"},Y={class:"text-xs text-gray-500 mt-1"},S={__name:"DashboardCard",props:{title:String,value:[String,Number],subtext:String,icon:String,color:String},setup(d){const m=`fa-${d.icon}`;return(u,i)=>(a(),n("div",K,[t("div",Q,[t("h3",W,l(d.title),1),t("i",{class:f(["fas",m,d.color,"text-sm"])},null,2)]),t("div",X,l(d.value),1),t("p",Y,l(d.subtext),1)]))}},Z={class:"space-y-4"},tt={class:"space-y-4"},et={class:"flex items-start justify-between"},st={class:"space-y-1"},ot={class:"flex items-center gap-2"},at={class:"text-xs font-medium text-gray-500"},rt={class:"font-medium text-gray-800"},nt={class:"text-sm text-gray-500"},lt={class:"text-xs text-gray-500"},it={key:0},ct={key:1},dt={__name:"BugsTab",setup(d){const r=z(),{bugs:m}=j(r);k(()=>{r.fetchBugs()});const u=i=>{switch(i){case"Open":return"border-blue-500 text-blue-500";case"In Progress":return"border-yellow-500 text-yellow-500";case"Resolved":return"border-green-500 text-green-500";default:return"border-gray-300 text-gray-400"}};return(i,o)=>(a(),n("div",Z,[o[1]||(o[1]=t("h2",{class:"text-xl font-semibold"},"Bug Tracking",-1)),t("div",tt,[(a(!0),n(g,null,h(v(m),e=>{var s;return a(),n("div",{key:e.id,class:"rounded-lg border bg-white p-4 shadow hover:bg-gray-50 transition-colors"},[t("div",et,[t("div",st,[t("div",ot,[t("span",at,l(e.id),1),t("span",{class:f(["text-xs font-medium px-2 py-1 rounded border",u(e.status)])},l(e.status),3)]),t("h3",rt,l(e.title),1),t("p",nt,"Project: "+l((s=e.project)==null?void 0:s.name),1),t("p",lt,[e.users.length?(a(),n("span",it,[o[0]||(o[0]=D(" Assigned to: ")),t("strong",null,l(e.users.map(c=>c.name).join(", ")),1)])):(a(),n("span",ct,"Not assign"))])])])])}),128))])]))}},ut={class:"space-y-4"},_t={class:"space-y-2"},mt={class:"space-y-3"},xt={class:"flex items-start justify-between"},pt={class:"font-medium text-gray-800"},gt={class:"text-sm text-gray-500"},ht={class:"flex items-center gap-1 mt-2"},yt={class:"flex -space-x-2"},ft={key:0,class:"text-xs text-gray-500 ml-2"},vt={class:"flex flex-col gap-2 text-sm"},bt={__name:"MeetingsTab",setup(d){const r=A(),{meetings:m}=j(r);k(()=>{r.fetchMeetings()});const u=o=>o.split(" ").map(e=>e[0]).join("").toUpperCase(),i=L(()=>m.value.map(o=>{const e=new Date(o.start_time),s=new Date(o.end_time),c=p=>p.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0}),_=p=>{const T=new Date,$=new Date(p),y=$.toDateString()===T.toDateString(),b=new Date;b.setDate(T.getDate()+1);const N=$.toDateString()===b.toDateString();return y?"Today":N?"Tomorrow":$.toLocaleDateString()};return{title:o.title,start_time:c(e),end_time:c(s),users:o.users.map(p=>p.name),day:_(o.start_time)}}));return(o,e)=>(a(),n("div",ut,[e[1]||(e[1]=t("h2",{class:"text-xl font-semibold"},"Scheduled Meetings",-1)),t("div",_t,[t("div",mt,[(a(!0),n(g,null,h(i.value,(s,c)=>(a(),n("div",{key:c,class:"rounded-lg border bg-white p-4 shadow hover:bg-gray-50 transition-colors"},[t("div",xt,[t("div",null,[t("h4",pt,l(s==null?void 0:s.title),1),t("p",gt,l(s.start_time)+" - "+l(s.end_time),1),t("div",ht,[t("div",yt,[(a(!0),n(g,null,h(s.users.slice(0,2),(_,p)=>(a(),n("div",{key:p,class:"w-6 h-6 rounded-full bg-gray-200 text-[10px] font-bold flex items-center justify-center text-gray-700 border"},l(u(_)),1))),128))]),s.users.length>2?(a(),n("span",ft," +"+l(s.users.length-2)+" more ",1)):C("",!0)])]),t("div",vt,[D(l(s==null?void 0:s.day)+" ",1),e[0]||(e[0]=t("button",{class:"text-blue-600 hover:underline"},"Details",-1))])])]))),128))])])]))}},kt={class:"space-y-4"},$t={class:"grid gap-4 md:grid-cols-2 lg:grid-cols-3"},wt={class:"flex justify-between items-center mb-2"},Tt={class:"font-medium text-gray-800"},St={class:"text-sm text-gray-500 mb-1"},jt={class:"text-sm text-gray-500 mb-1"},Ct={__name:"ProjectsTab",setup(d){const r=P(),{projects:m}=j(r);return k(()=>{r.fetchProjects()}),(u,i)=>(a(),n("div",kt,[i[0]||(i[0]=t("h2",{class:"text-xl font-semibold"},"Project Overview",-1)),t("div",$t,[(a(!0),n(g,null,h(v(m),o=>{var e;return a(),n("div",{key:o.name,class:"rounded-lg border bg-white p-4 shadow hover:shadow-md transition-shadow"},[t("div",wt,[t("h3",Tt,l(o.name),1),t("span",{class:f(["text-xs px-2 py-1 rounded text-white",o.priorityClass])},l(o.priority),3)]),t("p",St,"Company: "+l((e=o==null?void 0:o.company)==null?void 0:e.name),1),t("p",jt," Total Requirements: "+l(o==null?void 0:o.requirements_count),1)])}),128))])]))}},Dt={class:"container mx-auto px-4 py-6"},Rt={key:0,class:"text-center text-gray-500 py-6"},Mt={key:1,class:"text-center text-red-500 py-6"},Lt={key:2},qt={class:"grid gap-4"},Pt={key:0,class:"inline-flex items-center text-green-600 text-xs font-semibold bg-green-100 px-2 py-0.5 rounded-full"},Bt={class:"text-sm text-gray-500 mt-1"},Nt={class:"inline-block bg-blue-100 text-blue-800 text-xs font-semibold px-2 py-0.5 rounded"},Et={class:"ml-2"},It={class:"text-sm text-gray-500 mt-2"},Vt={class:"bg-gray-100 text-gray-700 px-2 py-0.5 ml-2 rounded-full text-xs"},Ot={__name:"ReportTab",setup(d){const r=F();return k(()=>{r.fetchTodos()}),(m,u)=>(a(),n("div",Dt,[u[1]||(u[1]=t("h2",{class:"text-2xl font-bold text-gray-800 mb-6"},"ðŸ“‹ Todo List",-1)),v(r).loading?(a(),n("div",Rt,"Loading...")):v(r).error?(a(),n("div",Mt,l(v(r).error),1)):(a(),n("div",Lt,[t("ul",qt,[(a(!0),n(g,null,h(v(r).todos,i=>{var o,e;return a(),n("li",{key:i.id,class:"flex justify-between items-start gap-4 p-4 bg-white border rounded-lg shadow-sm hover:shadow-md transition"},[t("div",null,[t("h3",{class:f(["font-medium text-gray-800",{"line-through text-gray-400":i.status==="COMPLETED"}])},l(i.message),3),i.status==="COMPLETED"?(a(),n("span",Pt," âœ… Completed ")):C("",!0),t("p",Bt,[t("span",Nt,l(i.todoable_type.split("\\").pop()),1),t("span",Et,l(((o=i.todoable)==null?void 0:o.title)||"No title"),1)]),t("p",It,[u[0]||(u[0]=t("i",{class:"far fa-user-friends"},null,-1)),t("span",Vt,l((e=i==null?void 0:i.user)==null?void 0:e.name),1)])])])}),128))])]))]))}},Ht={class:"space-y-4"},zt={class:"space-y-4"},At={class:"flex items-start justify-between"},Ft={class:"space-y-1"},Ut={class:"flex items-center gap-2"},Gt={class:"text-xs font-medium text-gray-500"},Jt={class:"font-medium text-gray-800"},Kt={class:"text-sm text-gray-500"},Qt={class:"text-right"},Wt={class:"text-sm"},Xt={class:"font-medium"},Yt={class:"text-gray-500"},Zt={class:"mt-1 h-2 w-24 bg-gray-200 rounded"},te={__name:"RequirementsTab",setup(d){const r=U(),{requirements:m}=j(r);k(()=>{r.fetchRequirements()});const u=i=>{switch(i){case"High":return"border-red-500 text-red-500";case"Medium":return"border-yellow-500 text-yellow-500";default:return"border-gray-300 text-gray-500"}};return(i,o)=>(a(),n("div",Ht,[o[0]||(o[0]=t("h2",{class:"text-xl font-semibold"},"Project Requirements",-1)),t("div",zt,[(a(!0),n(g,null,h(v(m),e=>{var s;return a(),n("div",{key:e.id,class:"rounded-lg border bg-white p-4 shadow hover:bg-gray-50 transition-colors"},[t("div",At,[t("div",Ft,[t("div",Ut,[t("span",Gt,l(e.id),1),t("span",{class:f(["text-xs px-2 py-1 rounded border",u(e.priority)])},l(e.priority),3)]),t("h3",Jt,l(e.title),1),t("p",Kt,"Project: "+l((s=e.project)==null?void 0:s.name),1)]),t("div",Qt,[t("div",Wt,[t("span",Xt,l(e.completed_tasks_count),1),t("span",Yt,"/"+l(e.tasks_count)+" tasks",1)]),t("div",Zt,[t("div",{class:"h-full bg-blue-500 rounded",style:E({width:e.completed_tasks_count/e.tasks_count*100+"%"})},null,4)])])])])}),128))])]))}},ee={__name:"TaskTreeChildren",props:{childrenTasks:{type:Array,required:!0,default:[]}},setup(d){return(r,m)=>(a(),n("div",null,[(a(!0),n(g,null,h(d.childrenTasks,u=>(a(),R(B,{key:u.id,task:u},null,8,["task"]))),128))]))}},se={class:"mb-4 border-b border-t p-3 group"},oe={class:"items-start grid grid-cols-3"},ae={class:""},re={key:0,class:"text-sm text-gray-500 mt-2"},ne={class:"flex items-center gap-2 text-xs text-gray-500 mt-2 opacity-50"},le={class:"px-2 py-0.5 text-xs rounded bg-blue-100 text-blue-800 border border-blue-200"},ie={class:"flex items-start flex-wrap gap-3"},ce={class:"w-6 h-6 rounded-full bg-gray-200 flex items-center justify-center text-xs font-medium text-gray-600"},de={class:"text-xs text-gray-700 mr-2"},ue={class:"mt-4"},_e={class:"flex items-center"},me={key:0,class:"fas fa-caret-down text-gray-400 group-hover:text-sky-400"},xe={key:1,class:"fas fa-caret-right text-gray-400 group-hover:text-sky-400"},pe={class:"ml-6"},B={__name:"TaskTreeView",props:{task:{type:Object,required:!0}},setup(d){const r=d,m=M(!1),u=L(()=>{var e,s,c,_;return{"hover:underline hover:text-sky-400 cursor-pointer":((s=(e=r.task)==null?void 0:e.children_tasks)==null?void 0:s.length)>0,"cursor-default pointer-none":((_=(c=r.task)==null?void 0:c.children_tasks)==null?void 0:_.length)===0}}),i=e=>e.split(" ").map(s=>s[0]).join("").toUpperCase(),o=e=>{switch(e){case"HIGH":return"border-red-500 text-red-500";case"MEDIUM":return"border-yellow-500 text-yellow-500";default:return"border-gray-300 text-gray-500"}};return(e,s)=>{var _,p,T,$;const c=q("RouterLink");return a(),n("div",se,[t("div",oe,[t("div",ae,[x(c,{to:{name:"TaskShow",params:{id:d.task.id}},class:"font-medium text-gray-700 cursor-pointer hover:text-sky-700"},{default:w(()=>[D(l(d.task.title),1)]),_:1},8,["to"]),(_=d.task)!=null&&_.requirement?(a(),n("p",re," Requirement: "+l((T=(p=d.task)==null?void 0:p.requirement)==null?void 0:T.title),1)):C("",!0),t("div",ne,[t("span",le,l(d.task.status),1),t("span",{class:f(["text-xs px-2 py-0.5 rounded border",o(d.task.priority)])},l(d.task.priority),3)])]),t("div",ie,[(a(!0),n(g,null,h(d.task.users,(y,b)=>(a(),n("div",{class:"flex items-center gap-2 border rounded-full px-1 py-0.5 bg-slate-100 shadow-sm",key:b},[t("div",ce,l(i(y==null?void 0:y.name)),1),t("span",de,l(y==null?void 0:y.name),1)]))),128))]),s[1]||(s[1]=t("div",{class:"flex justify-end items-center"},null,-1))]),t("div",ue,[t("div",_e,[t("div",{class:"flex gap-3 group",onClick:s[0]||(s[0]=y=>{var b;return((b=d.task.children_tasks)==null?void 0:b.length)>0?m.value=!m.value:null})},[m.value?(a(),n("i",me)):(a(),n("i",xe)),t("span",{class:f([u.value,"text-xs text-gray-500"])}," Sub Tasks ("+l(($=d.task.children_tasks)==null?void 0:$.length)+") ",3)])]),t("div",pe,[m.value?(a(),R(ee,{key:0,childrenTasks:d.task.children_tasks},null,8,["childrenTasks"])):C("",!0)])])])}}},ge={class:"space-y-4"},he={class:"space-y-4"},ye={__name:"TasksTab",setup(d){const r=G(),{tasks:m,taskListTree:u}=j(r);return k(()=>{r.fetchTasks()}),(i,o)=>(a(),n("div",ge,[o[0]||(o[0]=t("h2",{class:"text-xl font-semibold"},"Requirement Tasks",-1)),t("div",he,[(a(!0),n(g,null,h(v(u),e=>(a(),n("div",{key:e.id,class:"rounded-lg border bg-white p-4 shadow hover:bg-gray-50 transition-colors"},[x(B,{task:e},null,8,["task"])]))),128))])]))}},fe={class:"space-y-4"},ve={class:"flex gap-2 border rounded-md bg-white p-2"},be=["onClick"],ke={class:"bg-white rounded-lg p-4 shadow"},$e={__name:"Tabs",setup(d){const r=I(),m=V(),u=[{label:"Projects",value:"projects",icon:"fa-folder"},{label:"Requirements",value:"requirements",icon:"fa-file-alt"},{label:"Tasks",value:"tasks",icon:"fa-tasks"},{label:"Bugs",value:"bugs",icon:"fa-bug"},{label:"Meetings",value:"meetings",icon:"fa-users"},{label:"Reports",value:"reports",icon:"fa-file-chart-line"}],i=M(m.query.tab||"projects");O(i,e=>{r.push({query:{tab:e}})});const o={projects:Ct,requirements:te,tasks:ye,reports:Ot,bugs:dt,meetings:bt};return(e,s)=>(a(),n("div",fe,[t("div",ve,[(a(),n(g,null,h(u,c=>t("button",{key:c.value,onClick:_=>i.value=c.value,class:f(["flex items-center gap-2 px-4 py-2 rounded-md text-sm font-medium",i.value===c.value?"bg-blue-600 text-white shadow":"text-gray-600 hover:bg-gray-100"])},[t("i",{class:f(["fas",c.icon,"text-sm"])},null,2),D(" "+l(c.label),1)],10,be)),64))]),t("div",ke,[(a(),R(H(o[i.value])))])]))}},we=J($e,[["__scopeId","data-v-16f7d2bd"]]),Te={class:"flex min-h-screen flex-col bg-slate-50"},Se={class:"flex flex-1 flex-col gap-4 p-4 md:gap-8 md:p-6"},je={class:"grid gap-4 md:grid-cols-2 lg:grid-cols-5"},Ne={__name:"TaskManagementView",setup(d){const r=M({}),m=P();return k(async()=>{try{const u=await m.fetchTaskManagementSummary();r.value=u.data}catch(u){console.error("Failed to fetch summary:",u)}}),(u,i)=>{const o=q("RouterLink");return a(),n("div",Te,[t("main",Se,[i[0]||(i[0]=t("div",{class:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between"},[t("div",null,[t("h1",{class:"text-2xl font-bold tracking-tight"},"Task Management"),t("p",{class:"text-sm text-gray-500"}," Manage your projects, requirements, tasks, bugs, and meetings. ")])],-1)),t("div",je,[x(o,{to:{name:"ProjectList"}},{default:w(()=>{var e,s,c;return[x(S,{title:"Projects",value:(e=r.value.projects)==null?void 0:e.total,subtext:`${(c=(s=r.value)==null?void 0:s.projects)==null?void 0:c.active} active projects`,icon:"folder",color:"text-cyan-500"},null,8,["value","subtext"])]}),_:1}),x(o,{to:{name:"RequirementList"}},{default:w(()=>{var e,s,c,_;return[x(S,{title:"Requirements",value:(s=(e=r.value)==null?void 0:e.requirements)==null?void 0:s.total,subtext:`${(_=(c=r.value)==null?void 0:c.requirements)==null?void 0:_.completed} completed`,icon:"file-alt",color:"text-indigo-500"},null,8,["value","subtext"])]}),_:1}),x(o,{to:{name:"TaskList"}},{default:w(()=>{var e,s,c,_;return[x(S,{title:"Tasks",value:(s=(e=r.value)==null?void 0:e.tasks)==null?void 0:s.total,subtext:`${(_=(c=r.value)==null?void 0:c.tasks)==null?void 0:_.completed} in completed`,icon:"tasks",color:"text-purple-500"},null,8,["value","subtext"])]}),_:1}),x(o,{to:{name:"BugList"}},{default:w(()=>{var e,s,c,_;return[x(S,{title:"Bugs",value:(s=(e=r.value)==null?void 0:e.bugs)==null?void 0:s.total,subtext:`${(_=(c=r.value)==null?void 0:c.bugs)==null?void 0:_.solved} solved`,icon:"bug",color:"text-red-500"},null,8,["value","subtext"])]}),_:1}),x(o,{to:{name:"MeetingList"}},{default:w(()=>{var e,s,c,_;return[x(S,{title:"Meetings",value:(s=(e=r.value)==null?void 0:e.meetings)==null?void 0:s.total,subtext:`${(_=(c=r.value)==null?void 0:c.meetings)==null?void 0:_.today} today`,icon:"users",color:"text-teal-500"},null,8,["value","subtext"])]}),_:1})]),x(we)])])}}};export{Ne as default};
