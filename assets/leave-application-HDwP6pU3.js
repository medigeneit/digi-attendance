import{C as S,r as u,D as i}from"./index-eGdAFfk8.js";const j=S("leaveApplication",()=>{const c=u([]),v=u(null),o=u(!1),t=u(null),d=u(new Date().toISOString().substring(0,7)),f=u("");async function y(n={}){var l,e;o.value=!0,t.value=null;try{const a=await i.get("/leave-applications",{params:n});a.data?c.value=a.data:c.value=[]}catch(a){t.value=((e=(l=a.response)==null?void 0:l.data)==null?void 0:e.message)||"Failed to fetch leave applications"}finally{o.value=!1}}async function h(n={}){var l,e;o.value=!0,t.value=null;try{const a=await i.get("/my-leave-applications",{params:n});c.value=a.data.data}catch(a){t.value=((e=(l=a.response)==null?void 0:l.data)==null?void 0:e.message)||"Failed to fetch leave applications"}finally{o.value=!1}}async function w(n){var l,e,a,r;o.value=!0,t.value=null;try{const s=await i.post("/leave-applications/store",n);return c.value.push((l=s==null?void 0:s.data)==null?void 0:l.data),(e=s==null?void 0:s.data)==null?void 0:e.data}catch(s){throw t.value=((r=(a=s.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to store leave application",new Error(t.value)}finally{o.value=!1}}async function m(n){var l,e;o.value=!0,t.value=null;try{const a=await i.delete(`/my-leave-application/destroy/${n}`);return c.value.push(a.data.data),a.data.data}catch(a){throw t.value=((e=(l=a.response)==null?void 0:l.data)==null?void 0:e.message)||"Failed to store leave application",new Error(t.value)}finally{o.value=!1}}async function g(n,l){var e,a;o.value=!0,t.value=null;try{const r=await i.post(`/leave-applications/${n}/update`,l),s=c.value.findIndex(p=>p.id===n);return s!==-1&&(c.value[s]=r.data.data),r.data.data}catch(r){throw t.value=((a=(e=r.response)==null?void 0:e.data)==null?void 0:a.message)||"Failed to update leave application",new Error(t.value)}finally{o.value=!1}}async function x(n){var l,e;o.value=!0,t.value=null;try{const a=await i.get(`/leave-applications/${n}`);v.value=a.data}catch(a){t.value=((e=(l=a.response)==null?void 0:l.data)==null?void 0:e.message)||"Failed to fetch leave application"}finally{o.value=!1}}async function A(n){var l,e;o.value=!0,t.value=null;try{const a=await i.post(`/leave-applications/${n}/handover-accept`),r=c.value.findIndex(s=>s.id===n);return r!==-1&&(c.value[r]=a.data.data),a.data.data}catch(a){throw t.value=((e=(l=a.response)==null?void 0:l.data)==null?void 0:e.message)||"Failed to accept handover",new Error(t.value)}finally{o.value=!1}}async function F(n){var l,e;o.value=!0,t.value=null;try{const a=await i.post(`/leave-applications/${n}/incharge-accept`),r=c.value.findIndex(s=>s.id===n);return r!==-1&&(c.value[r]=a.data.data),a.data.data}catch(a){throw t.value=((e=(l=a.response)==null?void 0:l.data)==null?void 0:e.message)||"Failed to accept in-charge approval",new Error(t.value)}finally{o.value=!1}}async function I(n){var l,e;o.value=!0,t.value=null;try{const a=await i.post(`/leave-applications/${n}/coordinator-accept`),r=c.value.findIndex(s=>s.id===n);return r!==-1&&(c.value[r]=a.data.data),a.data.data}catch(a){throw t.value=((e=(l=a.response)==null?void 0:l.data)==null?void 0:e.message)||"Failed to accept coordinator approval",new Error(t.value)}finally{o.value=!1}}async function E(n){var l,e;o.value=!0,t.value=null;try{const a=await i.post(`/leave-applications/${n}/operational-admin-accept`),r=c.value.findIndex(s=>s.id===n);return r!==-1&&(c.value[r]=a.data.data),a.data.data}catch(a){throw t.value=((e=(l=a.response)==null?void 0:l.data)==null?void 0:e.message)||"Failed to accept operational admin approval",new Error(t.value)}finally{o.value=!1}}async function $(n){var l,e;o.value=!0,t.value=null;try{const a=await i.post(`/leave-applications/${n}/recommend-by-accept`),r=c.value.findIndex(s=>s.id===n);return r!==-1&&(c.value[r]=a.data.data),a.data.data}catch(a){throw t.value=((e=(l=a.response)==null?void 0:l.data)==null?void 0:e.message)||"Failed to accept recommend by approval",new Error(t.value)}finally{o.value=!1}}async function L(n){var l,e;o.value=!0,t.value=null;try{const a=await i.post(`/leave-applications/${n}/approved-by-accept`),r=c.value.findIndex(s=>s.id===n);return r!==-1&&(c.value[r]=a.data.data),a.data.data}catch(a){throw t.value=((e=(l=a.response)==null?void 0:l.data)==null?void 0:e.message)||"Failed to accept approval by admin",new Error(t.value)}finally{o.value=!1}}async function b(n,l){var e,a;o.value=!0,t.value=null;try{const r=await i.post(`/leave-applications/${n}/reject`,l),s=c.value.findIndex(p=>p.id===n);return s!==-1&&(c.value[s]=r.data.data),r.data.data}catch(r){throw t.value=((a=(e=r.response)==null?void 0:e.data)==null?void 0:a.message)||"Failed to reject leave application",new Error(t.value)}finally{o.value=!1}}return{leaveApplications:c,leaveApplication:v,loading:o,error:t,selectedMonth:d,selectedStatus:f,fetchLeaveApplications:y,storeLeaveApplication:w,updateLeaveApplication:g,fetchLeaveApplicationById:x,acceptHandover:A,acceptInCharge:F,acceptCoordinator:I,acceptOperationalAdmin:E,acceptRecommendBy:$,acceptApprovedBy:L,rejectLeaveApplication:b,fetchMyLeaveApplications:h,deleteLeaveApplication:m}});export{j as u};
