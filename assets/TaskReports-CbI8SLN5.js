import{b as y,e as h,k as _,c as n,o as a,a as t,t as o,l as c,p as g,n as k,h as l,f as b,F as w,y as R,w as T}from"./index-CoAjNv2r.js";import{_ as v}from"./UserChip-uwdw1amE.js";import{u as C}from"./useTaskReportStore-DP4yh-tR.js";import{u as S}from"./useTaskStore-Bket78io.js";const N={class:"mt-4"},L={class:"bg-white"},P={class:"flex mb-2 items-end"},V={key:0,class:"min-w-full bg-white shadow rounded-lg overflow-hidden"},B={key:0},D=["onClick"],A={class:"px-4 py-2"},E={class:"px-4 py-2 font-medium"},F={class:"px-4 py-2 font-medium"},M={class:"px-4 py-2 font-medium"},O={class:"px-4 py-2 font-medium"},$={class:"px-4 py-2 font-medium"},I={key:1,class:"text-center border py-4 text-gray-500"},K={__name:"TaskReports",setup(U){const r=C(),m=S(),i=y().params.id;return h(async()=>{console.log({taskId:i}),await m.fetchTask(i),await r.fetchTaskReports({task_id:i})}),(d,s)=>{var p,u;const f=_("RouterLink");return a(),n("div",N,[s[5]||(s[5]=t("hr",{class:"mb-2"},null,-1)),t("div",L,[t("pre",null,o(d.usersTaskProgress),1),t("div",P,[s[2]||(s[2]=t("h3",{class:"text-sm uppercase mt-4"},"Task Reports",-1)),c(f,{to:{name:"TaskReportAdd",params:{id:(p=l(r).task)==null?void 0:p.id}},onClick:s[0]||(s[0]=e=>e.stopPropagation()),class:"btn-3 ml-auto inline-flex !my-1"},{default:g(()=>s[1]||(s[1]=[k("Add Report")])),_:1},8,["to"])]),l(r).loading?(a(),n("div",I,"Loading...")):(a(),n("table",V,[s[4]||(s[4]=t("thead",{class:"bg-gray-100"},[t("tr",null,[t("th",{class:"px-4 py-2 text-left"},"#"),t("th",{class:"px-4 py-2 text-left lg:w-[200px]"},"User"),t("th",{class:"px-4 py-2 text-left"},"Report"),t("th",{class:"px-4 py-2 text-left"},"Date"),t("th",{class:"px-4 py-2 text-left"},"Duration"),t("th",{class:"px-4 py-2 text-left"},"Progress")])],-1)),t("tbody",null,[((u=l(r).task_reports)==null?void 0:u.length)===0?(a(),n("tr",B,s[3]||(s[3]=[t("td",{class:"px-4 py-4 font-medium text-gray-500 text-center",colspan:"10"},"NO REPORTS",-1)]))):b("",!0),(a(!0),n(w,null,R(l(r).task_reports,(e,x)=>(a(),n("tr",{key:e.id,class:"border-t hover:bg-gray-50 cursor-pointer",onClick:T(q=>d.goToShow(e.id),["prevent"]),role:"button"},[t("td",A,o(x+1),1),t("td",E,[t("div",null,[c(v,{user:e.user,class:"inline"},null,8,["user"])])]),t("td",F,o(e.title),1),t("td",M,o(e.report_date),1),t("td",O,o(e.duration_hour)+" h "+o(e.duration_minute)+" m ",1),t("td",$,o(e.progress)+"%",1)],8,D))),128))])]))])])}}};export{K as default};
