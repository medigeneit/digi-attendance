import{u as S,b as U,a3 as B,r as d,e as O,m as V,z as f,c as _,o as n,a as o,f as w,g,p as C,k as x,h as L,v as M}from"./index-Du55oRmQ.js";import{_ as b}from"./EmployeeFilter-0eyadM2V.js";import{L as N}from"./LoaderView-BAbhiYYp.js";import{_ as D}from"./OvertimeDataList-S4hIcVYo.js";import{u as A}from"./overtime-nP_UhJIX.js";import{u as F}from"./user-CJLCyHs6.js";import"./MultiselectDropdown-dox4Li5Z.js";import"./company-CBsFdEPA.js";import"./department-o7G7ZvWe.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./AcceptAndRejectHandler-CGjkv-WC.js";import"./DisplayFormattedWorkingHours-BJ0zCtEY.js";import"./TimePickerAsFloatHour-ij-tIbLY.js";const I={class:"px-4 space-y-4"},R={class:"w-full flex flex-wrap gap-4 items-center md:w-auto"},$={key:2},ee={__name:"OvertimeList",setup(j){const u=S(),l=U(),h=B(),m=A(),c=F(),i=d(null),s=d(l.query.month||new Date().toISOString().slice(0,7)),a=d({company_id:l.query.company_id||"",department_id:l.query.department_id||"all",type:l.query.type||"all",employee_id:l.query.employee_id||"",category:""});O(async()=>{a.value.employee_id&&(await y(a.value.employee_id),await r())});const y=async t=>{t?(await c.fetchUser(t),i.value=c.user):i.value=null},v=V(()=>{var t;return((t=m.overtimes)==null?void 0:t.map(e=>e.id))||[]}),r=async()=>{var t;a.value.employee_id&&s.value&&(await m.fetchUserMonthlyOvertimes(a.value.employee_id,s.value),(t=v.value)!=null&&t.length&&await h.fetchApprovalPermissionsByUserApplicationIds("overtime_applications",v.value))};f(s,t=>{u.replace({query:{...l.query,date:t}}),r()}),f(()=>a.value.employee_id,async(t,e)=>{t&&t!==e&&(await y(t),await r())});const q=()=>u.go(-1),k=()=>{u.replace({query:{...l.query,company_id:a.value.company_id,department_id:a.value.department_id,type:a.value.type,employee_id:a.value.employee_id||l.query.employee_id}})};return(t,e)=>(n(),_("div",I,[o("div",{class:"flex items-center justify-between gap-2"},[o("button",{class:"btn-3",onClick:q},e[2]||(e[2]=[o("i",{class:"far fa-arrow-left"},null,-1),o("span",{class:"hidden md:flex"},"Back",-1)])),e[3]||(e[3]=o("h1",{class:"title-md md:title-lg flex-wrap text-center"},"Monthly Overtime",-1)),e[4]||(e[4]=o("div",null,null,-1))]),o("div",R,[C(b,{modelValue:a.value,"onUpdate:modelValue":e[0]||(e[0]=p=>a.value=p),"initial-value":x(l).query,onFilterChange:k},null,8,["modelValue","initial-value"]),o("div",null,[L(o("input",{id:"monthSelect",type:"month","onUpdate:modelValue":e[1]||(e[1]=p=>s.value=p),onChange:r,class:"input-1"},null,544),[[M,s.value]])])]),x(m).isLoading?(n(),w(N,{key:0})):i.value?(n(),w(D,{key:1,user:i.value,onUpdate:r},null,8,["user"])):g("",!0),i.value?g("",!0):(n(),_("div",$,e[5]||(e[5]=[o("p",{class:"text-gray-400 text-center text-2xl italic"},"Select an employee, please.",-1)])))]))}};export{ee as default};
