import{L as q}from"./LoaderView-BzCvRq9R.js";import{_ as R}from"./ApproveAndReject-BTnkp9kX.js";import{f as S,a7 as H,D as V,r as j,h as B,q as C,x as A,p as D,c as a,o as s,a as p,j as h,k as m,b as v,t as y,n as d,F as k,e as N,d as F,m as i}from"./index-DbgpyMS5.js";const I={class:"my-container space-y-4 px-4 py-4 relative"},$={class:"md:text-2xl font-semibold capitalize text-gray-700"},z={key:0,class:"ml-auto text-xs bg-red-500 text-white rounded-full px-2 py-0.5 font-semibold"},E={key:1,class:"space-y-4"},U={class:"flex gap-2 md:gap-3 items-center"},Z={class:"shrink grow font-semibold text-sm md:text-base"},G=["innerHTML"],J={key:0,class:"ml-auto shrink-0 grow-0 flex gap-2 md:gap-3 items-center"},K=["innerHTML"],O={key:0,class:"flex flex-wrap gap-y-1 gap-x-3 items-center text-xs md:text-sm lg:text-base"},P={key:0},Q={class:"flex gap-3 items-center"},W={class:"flex items-center gap-8"},X={key:0,class:"flex flex-wrap flex-col md:flex-row gap-x-1 text-xs md:text-sm text-left"},Y={key:0,class:"hidden md:inline font-bold"},ee=["innerHTML"],se={key:2,class:"h-[80vh] flex items-center justify-center border rounded-md bg-white/50 text-gray-400"},pe={__name:"MyTaskNotificationList",setup(te){const r=S(),_=H(),{notifications:b,notification_count:w}=V(_),u=j(!1);B(async()=>{r.params.type&&(u.value=!0,await _.fetchTaskNotification(r.params.type),u.value=!1)}),C(()=>r.params.type,async(t,l)=>{t&&t!==l&&(u.value=!0,await _.fetchTaskNotification(t),u.value=!1)});const x=t=>{var l,n,c,o;if(r.params.type=="pending-requirements"||((l=t.meta)==null?void 0:l.commentable_type)==="requirement")return{name:"RequirementShow",params:{id:((n=t.meta)==null?void 0:n.commentable_type)==="requirement"?(c=t.meta)==null?void 0:c.commentable_id:t.application_id},query:{comment_id:(o=t.meta)==null?void 0:o.comment_id}}},M=A(()=>r.params.type?r.params.type.replace(/[_-]/g," ").replace(/([A-Z])/g," $1").replace(/\s+/g," ").trim().split(" ").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" "):"");return(t,l)=>{var c,o,g;const n=D("RouterLink");return s(),a("div",I,[p("h2",$,[v(y(M.value||"Notifications")+" ",1),(c=d(w))!=null&&c[d(r).params.type]?(s(),a("span",z,y(((o=d(w))==null?void 0:o[d(r).params.type])||0),1)):m("",!0)]),u.value||d(_).loading?(s(),h(q,{key:0,class:"absolute inset-0 flex items-center justify-center bg-opacity-80 !shadow-none min-h-[80vh]"})):m("",!0),!u.value&&((g=d(b))==null?void 0:g.length)>0?(s(),a("div",E,[(s(!0),a(k,null,N(d(b),e=>{var T;return s(),a("div",{key:e.application_id,class:"bg-white p-3 md:p-4 rounded-xl shadow border grid gap-2"},[p("div",U,[p("div",Z,[p("div",{class:"flex items-center text-green-600 text-xs md:text-sm lg:text-base",innerHTML:e==null?void 0:e.title},null,8,G),p("div",null,y(e==null?void 0:e.user_name),1)]),x(e)?(s(),a("div",J,[F(n,{to:x(e),class:"btn-1 px-3"},{default:i(()=>l[0]||(l[0]=[p("i",{class:"far fa-eye"},null,-1)])),_:2,__:[0]},1032,["to"])])):m("",!0)]),p("div",{class:"text-red-600 text-xs md:text-sm lg:text-base line-clamp-1 pr-12",innerHTML:e==null?void 0:e.description},null,8,K),e!=null&&e.type?(s(),a("div",O,[e!=null&&e.type?(s(),a("div",P,[l[1]||(l[1]=p("span",{class:"text-gray-400"},"Type:",-1)),v(" "+y(e==null?void 0:e.type),1)])):m("",!0)])):m("",!0),p("div",Q,[p("div",W,[(T=e==null?void 0:e.messages)!=null&&T.length?(s(),a("p",X,[(s(!0),a(k,null,N(e.messages,(f,L)=>(s(),a(k,{key:L},[L?(s(),a("span",Y,"|")):m("",!0),p("span",{innerHTML:f,class:"text-black"},null,8,ee)],64))),128))])):m("",!0)]),d(r).params.type=="pending-requirements"?(s(),h(R,{key:0,class:"ml-auto",notificationType:d(r).params.type,applicationId:e==null?void 0:e.application_id,onSuccess:t.onSuccess,variant:2},null,8,["notificationType","applicationId","onSuccess"])):m("",!0),d(r).params.type=="pending-comment-mentions"&&x(e)?(s(),h(n,{key:1,to:x(e),class:"btn-1 px-3 ml-auto"},{default:i(()=>l[2]||(l[2]=[v(" Re-play ")])),_:2,__:[2]},1032,["to"])):m("",!0)])])}),128))])):u.value?m("",!0):(s(),a("div",se," No notifications. "))])}}};export{pe as default};
