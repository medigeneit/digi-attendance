import{s as A,r as f,b as P,c as i,a as s,h as d,t as l,F as b,x as h,m as x,o as n,w as I,l as p,k as R,n as y,q as _,g as M,p as N}from"./index-CrTPVCmM.js";import{_ as B}from"./CommentModal-23s2zNJz.js";import{u as D}from"./useTaskStore-Cs8aGJ95.js";import"./useCommentStore-DCQ-jss1.js";const O={class:"container mx-auto p-6"},U={key:0,class:"text-center py-4 text-gray-500"},G={key:1,class:"text-center py-4 text-red-500"},V={key:2,class:"min-w-full bg-white shadow rounded-lg overflow-hidden"},$=["onClick"],q={class:"px-4 py-2"},F={class:"px-4 py-2 font-medium"},H={class:"text-gray-300"},j={class:"px-4 py-2 font-medium grid gap-1"},z={class:"px-4 py-2"},K={class:"px-4 py-2"},W={class:"px-4 py-2 flex gap-2"},J=["onClick"],Q=["onClick"],X=1,ot={__name:"TaskList",setup(Y){const r=D(),{flattenedTasks:T}=A(r),c=M(),u=f(!1),m=f(null);P(()=>{r.fetchTasks()});const C=()=>{c.push({name:"TaskAdd"})},w=(a,e)=>{a.stopPropagation(),c.push({name:"TaskEdit",params:{id:e}})},v=a=>{c.push({name:"TaskShow",params:{id:a}})},k=(a,e)=>{a.stopPropagation(),m.value=e,u.value=!0},E=()=>{u.value=!1,m.value=null};return(a,e)=>{const g=N("RouterLink");return n(),i("div",O,[s("div",{class:"flex justify-between items-center mb-6"},[e[3]||(e[3]=s("h2",{class:"text-2xl font-bold text-gray-800"},"Task List",-1)),s("button",{onClick:C,class:"btn-1"},"Add Task")]),d(r).loading?(n(),i("div",U,"Loading tasks...")):d(r).error?(n(),i("div",G,l(d(r).error),1)):(n(),i("table",V,[e[6]||(e[6]=s("thead",{class:"bg-gray-100"},[s("tr",null,[s("th",{class:"px-4 py-2 text-left"},"#"),s("th",{class:"px-4 py-2 text-left"},"Title"),s("th",{class:"px-4 py-2 text-left"},"Assign Users"),s("th",{class:"px-4 py-2 text-left"},"Priority"),s("th",{class:"px-4 py-2 text-left"},"Status"),s("th",{class:"px-4 py-2 text-left"},"Actions")])],-1)),s("tbody",null,[(n(!0),i(b,null,h(d(T),(t,L)=>(n(),i("tr",{key:t.id,class:"border-t hover:bg-gray-50 cursor-pointer",onClick:I(o=>v(t.id),["prevent"]),role:"button"},[s("td",q,l(L+1),1),s("td",F,[s("span",H,l("â€”".repeat(t.depth)),1),p(" "+l(t.title),1)]),s("td",j,[(n(!0),i(b,null,h(t.users,o=>(n(),R(g,{to:`/settings/user-show/${o.id}`,onClick:e[0]||(e[0]=S=>S.stopPropagation()),key:o.id,class:"btn-1"},{default:y(()=>[p(l(o==null?void 0:o.name),1)]),_:2},1032,["to"]))),128))]),s("td",z,[s("span",{class:_([{"text-green-600":t.priority==="LOW","text-yellow-600":t.priority==="MEDIUM","text-orange-600":t.priority==="HIGH","text-red-600":t.priority==="CRITICAL"},"font-semibold"])},l(t.priority),3)]),s("td",K,[s("span",{class:_([{"bg-gray-200":t.status==="PENDING","bg-blue-200":t.status==="IN_PROGRESS","bg-green-200":t.status==="COMPLETED","bg-red-200":t.status==="BLOCKED"},"px-3 py-1 rounded-full"])},l(t.status),3)]),s("td",W,[s("button",{onClick:o=>w(o,t.id),class:"btn-2"},"Edit",8,J),x(g,{to:{name:"TaskUserAssign",params:{id:t==null?void 0:t.id}},class:"bg-indigo-500 hover:bg-indigo-600 text-white font-semibold px-3 py-1 rounded-full transition",onClick:e[1]||(e[1]=o=>o.stopPropagation())},{default:y(()=>e[4]||(e[4]=[p(" Assign Users ")])),_:2},1032,["to"]),x(g,{to:{name:"TaskAdd",query:{parent_id:t==null?void 0:t.id}},class:"bg-indigo-500 hover:bg-indigo-600 text-white font-semibold px-3 py-1 rounded-full transition",onClick:e[2]||(e[2]=o=>o.stopPropagation())},{default:y(()=>e[5]||(e[5]=[p(" + Sub Task ")])),_:2},1032,["to"]),s("button",{onClick:o=>k(o,t.id),class:"bg-indigo-500 text-white px-3 py-1 rounded-full"}," + Comment ",8,Q)])],8,$))),128))])])),x(B,{show:u.value,"commentable-id":m.value,"commentable-type":"task","user-id":X,"on-close":E,onSubmitted:d(r).fetchTasks},null,8,["show","commentable-id","onSubmitted"])])}}};export{ot as default};
