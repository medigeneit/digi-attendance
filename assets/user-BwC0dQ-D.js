import{M as D,r as u,m as i,C as l}from"./index-1AKPG7_Z.js";const H=D("user",()=>{const o=u([]),p=u([]),h=u([]),d=u({}),f=u({}),m=u({}),r=u(null),n=u(!1),y=u(new Date().toISOString().substring(0,10)),g=i(()=>o.value),w=i(()=>d.value),U=i(()=>r.value);return{users:o,handoverUsers:h,user:d,error:r,isLoading:n,allUsers:g,balances:p,singleUser:w,errorMessage:U,dashboardInfo:m,userDashboard:f,selectedDate:y,fetchUsers:async(s={})=>{var e,a;try{n.value=!0;const t=await l.get("/users",{params:s});o.value=t.data,r.value=null}catch(t){r.value=((a=(e=t.response)==null?void 0:e.data)==null?void 0:a.message)||"Something went wrong"}finally{n.value=!1}},fetchUser:async s=>{var e,a;try{n.value=!0;const c=(await l.get(`/users/${s}`)).data;return c&&(d.value=c),r.value=null,c}catch(t){r.value=((a=(e=t.response)==null?void 0:e.data)==null?void 0:a.message)||"Something went wrong"}finally{n.value=!1}},createUser:async s=>{var e,a;try{n.value=!0;const t=await l.post("/users",s);o.value.push(t.data.user),r.value=null}catch(t){r.value=((a=(e=t.response)==null?void 0:e.data)==null?void 0:a.message)||"Something went wrong"}finally{n.value=!1}},updateUser:async(s,e)=>{var a,t;try{n.value=!0;const c=await l.put(`/users/${s}`,e),v=o.value.findIndex(b=>b.id===s);return v!==-1&&(o.value[v]=c.data.user),r.value=null,c.data.user}catch(c){r.value=((t=(a=c.response)==null?void 0:a.data)==null?void 0:t.message)||"Something went wrong"}finally{n.value=!1}},deleteUser:async s=>{var e,a;try{n.value=!0,await l.delete(`/users/${s}`),o.value=o.value.filter(t=>t.id!==s),r.value=null}catch(t){r.value=((a=(e=t.response)==null?void 0:e.data)==null?void 0:a.message)||"Something went wrong"}finally{n.value=!1}},fetchUserDashboardData:async()=>{var s,e;try{n.value=!0;const t=(await l.get("/dashboard")).data;return t&&(f.value=t),r.value=null,t}catch(a){r.value=((e=(s=a.response)==null?void 0:s.data)==null?void 0:e.message)||"Something went wrong"}finally{n.value=!1}},fetchAdminDashboardData:async()=>{var s,e;try{n.value=!0;const t=(await l.get("/admin-dashboard")).data;return t&&(m.value=t),r.value=null,t}catch(a){r.value=((e=(s=a.response)==null?void 0:s.data)==null?void 0:e.message)||"Something went wrong"}finally{n.value=!1}},fetchTypeWiseEmployees:async(s={})=>{var e,a;try{n.value=!0;const t=await l.get("/type-wise-employees",{params:s});o.value=t.data,r.value=null}catch(t){r.value=((a=(e=t.response)==null?void 0:e.data)==null?void 0:a.message)||"Something went wrong"}finally{n.value=!1}},fetchDepartmentWiseEmployees:async()=>{var s,e;try{n.value=!0;const a=await l.get("/department-wise-employees");return o.value=a.data,r.value=null,o.value}catch(a){r.value=((e=(s=a.response)==null?void 0:s.data)==null?void 0:e.message)||"Something went wrong"}finally{n.value=!1}},fetchHandoverDepartmentWiseEmployees:async()=>{var s,e;try{n.value=!0;const a=await l.get("/department-handover-wise-employees");h.value=a.data,r.value=null}catch(a){r.value=((e=(s=a.response)==null?void 0:s.data)==null?void 0:e.message)||"Something went wrong"}finally{n.value=!1}},fetchUsersExcelExport:async s=>{var e,a;try{n.value=!0;const t=await l.get("/users",{params:{flag:"excel",company_id:s.data.company_id,department_id:s.data.department_id,line_type:s.data.line_type,status:s.data.status},responseType:"blob"}),c=window.URL.createObjectURL(new Blob([t.data])),v=document.createElement("a");v.href=c,v.setAttribute("download","users.xlsx"),document.body.appendChild(v),v.click(),v.remove(),r.value=null}catch(t){r.value=((a=(e=t.response)==null?void 0:e.data)==null?void 0:a.message)||"Something went wrong"}finally{n.value=!1}},saveLeaveBalances:async(s,e)=>{try{return n.value=!0,(await l.post(`/leave-balances/${s}`,{balances:e})).data}catch(a){throw console.error("Failed to save leave balances:",a),a}finally{n.value=!1}},fetchUserLeaveBalances:async s=>{try{const e=await l.get(`/leave-balances/${s}`);return p.value=e.data,e.data}catch(e){console.error("Failed to fetch balances",e)}}}});export{H as u};
