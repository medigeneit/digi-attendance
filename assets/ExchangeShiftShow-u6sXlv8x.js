import{_ as p}from"./ApprovalItem-CjUrH5AO.js";import{L as tt}from"./LoaderView-pbq4YQqL.js";import{_ as et}from"./ScreenshotCapture-BGJhCAl1.js";import{_ as at}from"./ShareComponent-2lBSyTBu.js";import{N as nt,u as st,j as lt,r as O,y as it,b as ot,c as m,a as t,l as n,k as dt,t as s,m as o,q as rt,e as f,h as ut,n as ct,f as pt,o as d,g as mt}from"./index-BVI76-kH.js";import{u as vt}from"./exchange-ZSzARPst.js";import"./AcceptAndRejectHandler-q41OkHLi.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const ft={class:"my-container max-w-3xl space-y-6"},gt={key:1,class:"bg-white rounded p-4 md:p-8 text-sm md:text-base space-y-1",id:"leave-application"},ht={class:"flex md:justify-end"},yt={class:"font-medium"},xt={class:"gap-y-1"},_t={class:"gap-y-1"},bt={class:"grid md:grid-cols-2 pt-2"},wt={class:"col-span-2 pt-2"},kt={class:"grid md:grid-cols-3 gap-x-4 py-1 md:justify-between items-end md:items-start"},At={class:"md:col-span-2 print:col-span-2"},Dt={class:"text-center"},St={class:"title-md"},Nt={key:0},jt={class:"grid grid-cols-2 text-sm md:text-base md:grid-cols-3 md:gap-x-4 gap-y-14 pt-14 items-end"},Ft={class:"print:hidden"},Et={key:0,class:"mb-2"},Rt=["href"],Bt={key:1},zt={__name:"ExchangeShiftShow",setup(Ct){nt();const W=mt(),v=pt(),r=vt(),G=st(),g=lt(),h=O(!0),y=O(null),a=it(()=>r.exchange);ot(async()=>{const{id:l}=v.params;try{await r.fetchExchange(l)}catch(e){console.error("Failed to fetch exchange details:",e)}finally{h.value=!1}});const J=async l=>{const e=l.target.files[0];if(e){const c=new FormData;c.append("file",e);const i=await r.fetchFileUpload(c);y.value=i==null?void 0:i.url,i!=null&&i.url?(K(),g.success("File uploaded successfully")):g.error("Failed to upload file")}},K=async()=>{try{const l={attachment:y.value};await r.uploadAttachmentExchange(v.params.id,l)}catch(l){console.error("Failed to reject short leave:",l),alert("Failed to reject short leave.")}};function Q(){window.print()}const X=()=>W.go(-1),Y=l=>new Date(l).toISOString().slice(0,10),Z=l=>new Date(l).toLocaleDateString("en-US",{weekday:"long"}),u=async()=>{await r.fetchExchange(v.params.id)};return(l,e)=>{var c,i,x,_,b,w,k,A,D,S,N,j,F,E,R,B,C,V,L,T,U,$,I,P,q,z,H,M;return d(),m("div",ft,[t("div",{class:"flex items-center justify-between gap-2 print:hidden"},[t("button",{class:"btn-3",onClick:X},e[0]||(e[0]=[t("i",{class:"far fa-arrow-left"},null,-1),t("span",{class:"hidden md:flex"},"Back",-1)])),e[2]||(e[2]=t("h1",{class:"title-lg text-center"},"Exchange Details",-1)),t("div",null,[t("button",{class:"btn-2",onClick:Q},e[1]||(e[1]=[t("i",{class:"far fa-print"},null,-1),n(" Print ")]))])]),h.value?(d(),dt(tt,{key:0})):(d(),m("div",gt,[e[15]||(e[15]=t("div",null,[t("h1",{class:"title-lg text-center"},"Shift Exchange Application")],-1)),t("div",ht,[t("div",null,"Date: "+s(Y((c=a.value)==null?void 0:c.created_at)),1)]),t("div",null,[t("p",yt,[e[3]||(e[3]=n(" Name: ")),t("b",null,s((x=(i=a.value)==null?void 0:i.user)==null?void 0:x.name),1)]),t("div",xt,[t("p",null,[e[4]||(e[4]=n(" Designation: ")),t("b",null,s((w=(b=(_=a.value)==null?void 0:_.user)==null?void 0:b.designation)==null?void 0:w.title),1)])]),t("div",_t,[t("p",null,[e[5]||(e[5]=n(" Department: ")),t("b",null,s((D=(A=(k=a.value)==null?void 0:k.user)==null?void 0:A.company)==null?void 0:D.name),1)])])]),t("div",bt,[t("div",null,[e[6]||(e[6]=t("b",null,"Exchange Day:",-1)),n(" "+s(Z((S=a.value)==null?void 0:S.exchange_date)),1)]),t("div",null,[e[7]||(e[7]=t("b",null,"Date:",-1)),n(" "+s((N=a.value)==null?void 0:N.exchange_date),1)]),t("div",null,[e[8]||(e[8]=t("b",null,"From:",-1)),n(" "+s((F=(j=a.value)==null?void 0:j.current_shift)==null?void 0:F.name),1)]),t("div",null,[e[9]||(e[9]=t("b",null,"To:",-1)),n(" "+s((R=(E=a.value)==null?void 0:E.shift)==null?void 0:R.name),1)]),t("div",wt,[e[10]||(e[10]=t("b",null,"Reason:",-1)),n(" "+s(((B=a.value)==null?void 0:B.reason)||"N/A"),1)])]),t("div",kt,[t("div",At,[t("div",null,[e[11]||(e[11]=t("b",null,"Works in Hand:",-1)),n(" "+s(((C=a.value)==null?void 0:C.works_in_hand)||"N/A"),1)])]),o(p,{application:a.value,type:"shift_exchange_applications",item:"handover",onAction:u,class:"pt-10 ml-auto hidden md:block"},null,8,["application"])]),e[16]||(e[16]=t("hr",{class:"my-2"},null,-1)),t("div",Dt,[t("h3",St,[e[12]||(e[12]=n(" Approvals ")),t("span",{class:rt({"text-yellow-500":((V=a.value)==null?void 0:V.status)==="Pending","text-green-500":((L=a.value)==null?void 0:L.status)==="Approved","text-red-500":((T=a.value)==null?void 0:T.status)==="Rejected"})}," ("+s(((U=a.value)==null?void 0:U.status)||"N/A")+") ",3)]),(($=a.value)==null?void 0:$.status)==="Rejected"?(d(),m("div",Nt,[t("div",null,[e[13]||(e[13]=t("b",null,"Rejected By:",-1)),n(" "+s(((P=(I=a.value)==null?void 0:I.rejected_by_user)==null?void 0:P.name)||"N/A"),1)]),t("div",null,[e[14]||(e[14]=t("b",null,"Rejection Reason:",-1)),n(" "+s(((q=a.value)==null?void 0:q.rejection_reason)||"N/A"),1)])])):f("",!0)]),t("div",jt,[o(p,{application:a.value,type:"shift_exchange_applications",item:"handover",onAction:u,class:"md:hidden"},null,8,["application"]),o(p,{application:a.value,type:"shift_exchange_applications",item:"in_charge",onAction:u},null,8,["application"]),o(p,{application:a.value,type:"shift_exchange_applications",item:"recommend_by",onAction:u},null,8,["application"]),o(p,{application:a.value,type:"shift_exchange_applications",item:"approved_by",onAction:u},null,8,["application"])])])),t("div",Ft,[t("div",null,[e[18]||(e[18]=t("label",null,"Attachment",-1)),(z=a.value)!=null&&z.attachment&&typeof((H=a.value)==null?void 0:H.attachment)=="string"?(d(),m("div",Et,[t("a",{href:(M=a.value)==null?void 0:M.attachment,target:"_blank",class:"text-blue-500 underline"}," View Current File ",8,Rt)])):f("",!0),ut(G).user.id===a.value.user_id?(d(),m("div",Bt,[t("input",{type:"file",onChange:J,class:"w-full p-2 border rounded"},null,32),e[17]||(e[17]=t("p",{class:"text-sm text-gray-600 mt-1"},"Selected File",-1))])):f("",!0)])]),o(at,null,{default:ct(()=>[o(et,{targetId:"leave-application",platform:"whatsapp"})]),_:1})])}}};export{zt as default};
