import{u as M,b as R,r as b,s as f,e as T,A as l,q as F,c as _,o,a as t,m as V,l as B,g as H,v as P,h as w,F as W,x as N,t as s}from"./index-D9TCBlTu.js";import{_ as E}from"./EmployeeFilter-CuhPtsB-.js";import{L as U}from"./LoaderView-CeiSoKS0.js";import"./vue-multiselect.esm-C3UxMPMT.js";import"./MultiselectDropdown-B2wO6tQE.js";import{u as j}from"./attendance-CkpQBHsj.js";import{u as I}from"./company-9wNAyS2F.js";import"./department-DqBN5UhJ.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const O={class:"px-4 space-y-4"},$={class:"flex flex-wrap gap-4"},z={key:1,class:"space-y-4"},G={key:0,class:"overflow-x-auto card-bg"},J={class:"min-w-full table-auto border-collapse border border-gray-300 bg-white"},K={class:"text-center text-sm"},Q={class:"border px-2 py-0.5"},X={class:"border px-2 py-0.5"},Y={class:"border px-2 py-0.5"},Z={class:"border px-2 py-0.5"},g={class:"border px-2 py-0.5"},ee={class:"border px-2 py-0.5"},te={class:"border px-2 py-0.5"},se={class:"border px-2 py-0.5"},ae={class:"border px-2 py-0.5"},re={class:"border px-2 py-0.5"},de={class:"border px-2 py-0.5"},pe={class:"border px-2 py-0.5"},ne={class:"border px-2 py-0.5"},ce={class:"border px-2 py-0.5"},oe={class:"border px-2 py-0.5"},ie={class:"border px-2 py-0.5"},ye={class:"border py-0.5"},le={class:"border-b border-black font-semibold text-green-600"},_e={class:"text-gray-600"},ue={class:"border px-2 py-0.5"},xe={class:"border px-2 py-0.5"},be={class:"border px-2 py-0.5"},he={class:"border px-2 py-0.5"},me={class:"border px-2 py-0.5"},ve={class:"border px-2 py-0.5"},fe={class:"border px-2 py-0.5"},we={class:"border px-2 py-0.5"},ke={key:1,class:"text-center text-red-500 text-xl italic mt-10"},Be={__name:"MonthlyAttendanceSummaryReport",setup(qe){const u=M(),p=R(),m=I(),i=j(),n=b(p.query.company_id||""),v=b(null),c=b(p.query.date||i.selectedMonth),{companies:De,employees:k}=f(m),{monthly_company_summary:q}=f(i),y=b(""),x=async()=>{var a,r,e;n.value&&await i.getMonthlyAttendanceSummaryReport((a=d.value)==null?void 0:a.company_id,(r=d.value)==null?void 0:r.employee_id,(e=d==null?void 0:d.value)==null?void 0:e.type,c.value)},D=async()=>{n.value&&await i.downloadExcel(n.value,y==null?void 0:y.value,c.value)},L=async()=>{n.value&&await i.downloadPDF(n.value,y==null?void 0:y.value,c.value)};T(async()=>{await m.fetchCompanies(),await x(),v.value=k.value.find(a=>a.id==p.query.employee_id)}),l(n,a=>{m.fetchEmployee(a)}),l([n,c],x),l(n,a=>{u.replace({query:{...p.query,company_id:a}})}),l(c,a=>{u.replace({query:{...p.query,date:a}})}),l(v,a=>{u.replace({query:{...p.query,employee_id:a==null?void 0:a.id}})}),l(v,a=>{a!=null&&a.id&&x()});const d=b({company_id:"",department_id:"all",type:"all",employee_id:""}),S=async()=>{var a,r,e,h;u.replace({query:{...p.query,company_id:(a=d.value)==null?void 0:a.company_id,department_id:(r=d.value)==null?void 0:r.department_id,type:(e=d.value)==null?void 0:e.type,employee_id:(h=d.value)==null?void 0:h.employee_id}}),x(d.value)},A=F(()=>({company_id:p.query.company_id||"",department_id:p.query.department_id||"all",type:p.query.type||"all",employee_id:p.query.employee_id||""})),C=()=>u.go(-1);return(a,r)=>(o(),_("div",O,[t("div",{class:"flex items-center justify-between gap-2"},[t("button",{class:"btn-3",onClick:C},r[2]||(r[2]=[t("i",{class:"far fa-arrow-left"},null,-1),t("span",{class:"hidden md:flex"},"Back",-1)])),r[5]||(r[5]=t("h1",{class:"title-md md:title-lg flex-wrap text-center"},"Monthly Attendance Summary Report",-1)),t("div",{class:"flex gap-4"},[t("button",{type:"button",onClick:D,class:"btn-1"},r[3]||(r[3]=[t("i",{class:"far fa-file-excel text-2xl text-green-500"},null,-1)])),t("button",{type:"button",onClick:L,class:"btn-1"},r[4]||(r[4]=[t("i",{class:"fal fa-file-pdf text-2xl text-red-500"},null,-1)]))])]),t("div",$,[B(E,{modelValue:d.value,"onUpdate:modelValue":r[0]||(r[0]=e=>d.value=e),"initial-value":A.value,onFilterChange:S},null,8,["modelValue","initial-value"]),t("div",null,[H(t("input",{type:"month","onUpdate:modelValue":r[1]||(r[1]=e=>c.value=e),onChange:x,class:"input-1"},null,544),[[P,c.value]])])]),w(i).isLoading?(o(),V(U,{key:0})):(o(),_("div",z,[d.value.company_id?(o(),_("div",G,[t("table",J,[r[6]||(r[6]=t("thead",null,[t("tr",{class:"bg-gray-100 text-sm"},[t("th",{rowspan:"2",class:"border px-1 py-0.5"},"#"),t("th",{rowspan:"2",class:"border px-1 py-0.5"},"Employee Name"),t("th",{rowspan:"2",class:"border px-1 py-0.5"},"Designation"),t("th",{colspan:"5",class:"border px-1 py-0.5"},"Attendance Summary"),t("th",{colspan:"2",class:"border px-1 py-0.5"},"Actual Late"),t("th",{colspan:"2",class:"border px-1 py-0.5"},"Remaining Late"),t("th",{colspan:"2",class:"border px-1 py-0.5"},"Actual Early"),t("th",{colspan:"2",class:"border px-1 py-0.5"},"Remaining Early"),t("th",{rowspan:"2",class:"border px-1 py-0.5"},"Working Hour"),t("th",{rowspan:"2",class:"border px-1 py-0.5"},"OT Hour"),t("th",{colspan:"4",class:"border px-1 py-0.5"},"Leave Day"),t("th",{colspan:"2",class:"border px-1 py-0.5"},"Short Leave"),t("th",{rowspan:"2",class:"border px-1 py-0.5"},"Weekend Duty")]),t("tr",{class:"bg-gray-100 text-xs"},[t("th",{class:"border px-2 py-0.5"},"TD"),t("th",{class:"border px-2 py-0.5"},"TP"),t("th",{class:"border px-2 py-0.5"},"TW"),t("th",{class:"border px-2 py-0.5"},"TL"),t("th",{class:"border px-2 py-0.5"},"TA"),t("th",{class:"border px-1 py-0.5"},"Day"),t("th",{class:"border px-2 py-0.5"},"Hour"),t("th",{class:"border px-1 py-0.5"},"Day"),t("th",{class:"border px-2 py-0.5"},"Hour"),t("th",{class:"border px-1 py-0.5"},"Day"),t("th",{class:"border px-2 py-0.5"},"Hour"),t("th",{class:"border px-2 py-0.5"},"Day"),t("th",{class:"border px-2 py-0.5"},"Hour"),t("th",{class:"border px-2 py-0.5"},"CL"),t("th",{class:"border px-2 py-0.5"},"ML"),t("th",{class:"border px-2 py-0.5"},"SL"),t("th",{class:"border px-2 py-0.5"},"WPL"),t("th",{class:"border px-2 py-0.5"},"Delay"),t("th",{class:"border px-2 py-0.5"},"Early")])],-1)),t("tbody",K,[(o(!0),_(W,null,N(w(q),(e,h)=>(o(),_("tr",{key:e==null?void 0:e.date,class:"border-b border-gray-200 hover:bg-blue-200"},[t("td",Q,s(h+=1),1),t("td",X,s(e==null?void 0:e.user),1),t("td",Y,s(e==null?void 0:e.designation),1),t("td",Z,s(e==null?void 0:e.total_monthly_days),1),t("td",g,s(e==null?void 0:e.total_present),1),t("td",ee,s(e==null?void 0:e.total_weekend),1),t("td",te,s(e==null?void 0:e.total_leave),1),t("td",se,s(e==null?void 0:e.total_absent),1),t("td",ae,s(e==null?void 0:e.actual_late_day),1),t("td",re,s(e==null?void 0:e.actual_late_hour),1),t("td",de,s(e==null?void 0:e.total_remain_late_day),1),t("td",pe,s(e==null?void 0:e.total_remain_late_hour),1),t("td",ne,s(e==null?void 0:e.actual_early_day),1),t("td",ce,s(e==null?void 0:e.actual_early_hour),1),t("td",oe,s(e==null?void 0:e.total_remain_early_day),1),t("td",ie,s(e==null?void 0:e.total_remain_early_hour),1),t("td",ye,[t("div",le,s((e==null?void 0:e.total_working_hours)||0),1),t("div",_e,s((e==null?void 0:e.total_shift_hour)||0),1)]),t("td",ue,s(e==null?void 0:e.total_overtime_hours),1),t("td",xe,s(e==null?void 0:e.total_cl_leave),1),t("td",be,s(e==null?void 0:e.total_ml_leave),1),t("td",he,s(e==null?void 0:e.total_sl_leave),1),t("td",me,s(e==null?void 0:e.total_wpl_leave),1),t("td",ve,s(e==null?void 0:e.total_first_short_leave),1),t("td",fe,s(e==null?void 0:e.total_last_short_leave),1),t("td",we,s(e.total_present_in_weekend),1)]))),128))])])])):(o(),_("div",ke,"Please select company"))]))]))}};export{Be as default};
