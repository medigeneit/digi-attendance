import{_ as E}from"./CommentModal-BIUu3Hy7.js";import{u as L}from"./useTaskStore-D-YpLuNQ.js";import{r as y,b as I,c as o,a as t,h as i,t as d,F as _,q as g,l as u,o as n,p as b,m as f,k as h,g as S,n as N}from"./index-LiJ-LRhu.js";import"./useCommentStore-6EQ6UfJl.js";const R={class:"container mx-auto p-6"},k={key:0,class:"text-center py-4 text-gray-500"},D={key:1,class:"text-center py-4 text-red-500"},M={key:2,class:"min-w-full bg-white shadow rounded-lg overflow-hidden"},B={class:"px-4 py-2"},O={class:"px-4 py-2 font-medium"},P={class:"px-4 py-2 font-medium grid gap-1"},U={class:"px-4 py-2"},G={class:"px-4 py-2"},V={class:"px-4 py-2"},$={class:"px-4 py-2 flex gap-2"},q=["onClick"],F=["onClick"],H=1,Q={__name:"TaskList",setup(j){const l=L(),m=S(),c=y(!1),p=y(null);I(()=>{l.fetchTasks()});const T=()=>{m.push({name:"TaskAdd"})},v=r=>{m.push({name:"TaskEdit",params:{id:r}})},C=r=>{p.value=r,c.value=!0},w=()=>{c.value=!1,p.value=null};return(r,s)=>{const x=N("RouterLink");return n(),o("div",R,[t("div",{class:"flex justify-between items-center mb-6"},[s[0]||(s[0]=t("h2",{class:"text-2xl font-bold text-gray-800"},"Task List",-1)),t("button",{onClick:T,class:"btn-1"},"Add Task")]),i(l).loading?(n(),o("div",k,"Loading tasks...")):i(l).error?(n(),o("div",D,d(i(l).error),1)):(n(),o("table",M,[s[3]||(s[3]=t("thead",{class:"bg-gray-100"},[t("tr",null,[t("th",{class:"px-4 py-2 text-left"},"#"),t("th",{class:"px-4 py-2 text-left"},"Title"),t("th",{class:"px-4 py-2 text-left"},"Assign Users"),t("th",{class:"px-4 py-2 text-left"},"Priority"),t("th",{class:"px-4 py-2 text-left"},"Status"),t("th",{class:"px-4 py-2 text-left"},"Todo"),t("th",{class:"px-4 py-2 text-left"},"Actions")])],-1)),t("tbody",null,[(n(!0),o(_,null,g(i(l).tasks,(e,A)=>(n(),o("tr",{key:e.id,class:"border-t hover:bg-gray-50"},[t("td",B,d(A+1),1),t("td",O,d(e.title),1),t("td",P,[(n(!0),o(_,null,g(e.users,a=>(n(),o("div",{key:a.id,class:"btn-1"},d(a==null?void 0:a.name),1))),128))]),t("td",U,[t("span",{class:b([{"text-green-600":e.priority==="LOW","text-yellow-600":e.priority==="MEDIUM","text-orange-600":e.priority==="HIGH","text-red-600":e.priority==="CRITICAL"},"font-semibold"])},d(e.priority),3)]),t("td",G,[t("span",{class:b([{"bg-gray-200":e.status==="PENDING","bg-blue-200":e.status==="IN_PROGRESS","bg-green-200":e.status==="COMPLETED","bg-red-200":e.status==="BLOCKED"},"px-3 py-1 rounded-full"])},d(e.status),3)]),t("td",V,[u(x,{to:{name:"TodoAdd",params:{todoable_id:e==null?void 0:e.id},query:{todoable_type:"task"}},class:"main-button py-1"},{default:f(()=>s[1]||(s[1]=[h("Add Todo")])),_:2},1032,["to"])]),t("td",$,[t("button",{onClick:a=>v(e.id),class:"btn-2"},"Edit",8,q),u(x,{to:{name:"TaskUserAssign",params:{id:e==null?void 0:e.id}},class:"bg-indigo-500 hover:bg-indigo-600 text-white font-semibold px-3 py-1 rounded-full transition"},{default:f(()=>s[2]||(s[2]=[h(" Assign Users ")])),_:2},1032,["to"]),t("button",{onClick:a=>C(e.id),class:"bg-indigo-500 text-white px-3 py-1 rounded-full"}," + Comment ",8,F)])]))),128))])])),u(E,{show:c.value,"commentable-id":p.value,"commentable-type":"task","user-id":H,"on-close":w,onSubmitted:i(l).fetchTasks},null,8,["show","commentable-id","onSubmitted"])])}}};export{Q as default};
