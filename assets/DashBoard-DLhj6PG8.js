import{u as P}from"./user-DmG_tDcq.js";import{s as B,m as I,c as u,o,n as g,i as h,a as t,j as v,t as b,k as y,p as E,w as $,q as T,x as O,g as k,F as M,y as L,f as D,R as G,z as Y,r as A,d as H,e as K,A as V,h as J,B as Q,u as X,l as Z}from"./index-B_w9GCCF.js";import{L as ee}from"./LoaderView-nm7LizIB.js";import{m as te,_ as se}from"./task-tree-DuiKQqjC.js";import{o as U,g as W,a as z,b as ne,c as ae}from"./datetime-l2Vm98rT.js";import{u as oe}from"./useTaskStore-BjAYL0le.js";import{_ as le}from"./CalenderView-C4pjEXGY.js";import{_ as re}from"./TaskTreeViewWithSubTable-CiznlFur.js";import{O as ie}from"./OverlyModal-Czajs0Ni.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./TaskSupervisorAndEmployee-nzgnMNXn.js";import"./UserChip-DV2A0JJL.js";import"./TaskStatus-Dm1Yss0K.js";import"./url-CePbr-gY.js";const de={class:"grid gap-4 md:grid-cols-3 mt-4 container mx-auto"},ue={class:"text-3xl"},ce={class:"text-3xl"},me={class:"text-3xl"},pe={class:"text-3xl"},ye={class:"text-3xl"},be={class:"text-3xl"},fe={class:"text-3xl"},xe={class:"text-3xl"},ge={class:"text-3xl"},ve={__name:"DashboardAdminView",setup(p){const i=P(),{dashboardInfo:l,selectedDate:m}=B(i);return(a,r)=>{const d=I("RouterLink");return o(),u("div",de,[g(d,{to:{name:"TodayAttendanceReport",query:{status:"all"}},class:"main-button"},{default:h(()=>{var e;return[t("span",ue,b((e=y(l))==null?void 0:e.totalUsers),1),r[0]||(r[0]=v(" Total Employees "))]}),_:1,__:[0]}),g(d,{to:{name:"TodayAttendanceReport",query:{status:"Present"}},class:"main-button"},{default:h(()=>{var e;return[t("span",ce,b((e=y(l))==null?void 0:e.todayPresents),1),r[1]||(r[1]=v(" Today Present "))]}),_:1,__:[1]}),g(d,{to:{name:"TodayAttendanceReport",query:{status:"Absent"}},class:"main-button"},{default:h(()=>{var e;return[t("span",me,b((e=y(l))==null?void 0:e.todayAbsents),1),r[2]||(r[2]=v(" Today Absent "))]}),_:1,__:[2]}),g(d,{to:{name:"LeaveApplicationsForDay",query:{applicationType:"today"}},class:"main-button"},{default:h(()=>{var e;return[t("span",pe,b((e=y(l))==null?void 0:e.todayLeaves),1),r[3]||(r[3]=v(" Today Leave "))]}),_:1,__:[3]}),g(d,{to:{name:"LeaveApplicationsForDay",query:{applicationType:"tomorrow"}},class:"main-button"},{default:h(()=>{var e;return[t("span",ye,b((e=y(l))==null?void 0:e.tomorrowLeaves),1),r[4]||(r[4]=v(" Tomorrow Leave "))]}),_:1,__:[4]}),g(d,{to:{name:"DateWiseShortLeaveList",query:{date:y(m)}},class:"main-button"},{default:h(()=>{var e;return[t("span",be,b((e=y(l))==null?void 0:e.todayShortLeaves),1),r[5]||(r[5]=v(" Today Short Leaves "))]}),_:1,__:[5]},8,["to"]),g(d,{to:{name:"DailyLateAttendanceReport",query:{date:y(m)}},class:"main-button"},{default:h(()=>{var e;return[t("span",fe,b((e=y(l))==null?void 0:e.todayLateEntries),1),r[6]||(r[6]=v(" Today Late Report "))]}),_:1,__:[6]},8,["to"]),g(d,{to:{name:"PreviousAfterApplicationList",query:{applicationType:"prev",date:y(m)}},class:"main-button"},{default:h(()=>{var e;return[t("span",xe,b((e=y(l))==null?void 0:e.prevWeekLeaves),1),r[7]||(r[7]=v(" Leave history of previousÂ week "))]}),_:1,__:[7]},8,["to"]),g(d,{to:{name:"PreviousAfterApplicationList",query:{applicationType:"after",date:y(m)}},class:"main-button"},{default:h(()=>{var e;return[t("span",ge,b((e=y(l))==null?void 0:e.nextWeekLeaves),1),r[8]||(r[8]=v(" Upcoming leaves "))]}),_:1,__:[8]},8,["to"])])}}},F=(p,i,l,m)=>{const a=new Date(m,l-1,i);return p.filter(r=>{const d=r.deadline?new Date(r.deadline):null,e=U(new Date);if(r.assigned_at){const s=U(new Date(r.assigned_at));if(a<s)return!1;let n=null;return r.completed_at&&(n=U(new Date(r.completed_at))),!(n&&n<a||d&&d<a&&a>e)}return!1}).map(r=>{let d=!1;return r.deadline&&(d=new Date(r.deadline)<a),{...r,deadline_crossed:d}})},he={class:"px-4 py-2 flex items-center bg-gray-50 group"},_e=["disabled"],ke={class:"ml-4 md:ml-auto flex items-center gap-2"},we=["value"],$e=E({__name:"DailyTaskHeading",props:{selectedDay:{type:String,required:!0},loading:{type:Boolean,default:!1}},emits:["change",,"reloadClick","monthWiseButtonClick"],setup(p,{emit:i}){const l=p,m=i;function a(){m("change",W(new Date))}function r(){const e=new Date(l.selectedDay);e.setDate(e.getDate()+1),m("change",W(e))}function d(){const e=new Date(l.selectedDay);e.setDate(e.getDate()-1),m("change",W(e))}return(e,s)=>(o(),u("div",he,[s[4]||(s[4]=t("h2",{class:"leading-none font-semibold text-lg"},"Daily Task",-1)),t("button",{class:"btn-3 mx-4 h-7",onClick:s[0]||(s[0]=$(n=>m("monthWiseButtonClick"),["prevent"]))},"Month Wise"),t("button",{class:"btn-3 mx-4 h-7",onClick:$(a,["prevent"])},"Today"),t("button",{class:T(["btn-3 px-2 py-2 mx-4 size-7 disabled:text-gray-300 disabled:border-gray-300",{"animate-spin text-gray-300 border-gray-300 !bg-opacity-0":p.loading}]),onClick:s[1]||(s[1]=$(n=>m("reloadClick"),["prevent"])),disabled:p.loading},s[3]||(s[3]=[t("i",{class:"fas fa-redo-alt"},null,-1)]),10,_e),t("div",ke,[t("button",{class:"btn-2 h-7",onClick:$(d,["prevent"])},"Previous Day"),t("button",{class:"btn-2 h-7",onClick:$(r,["prevent"])},"Next Day"),t("input",{type:"date",value:p.selectedDay,onInput:s[2]||(s[2]=n=>{var c;return m("change",(c=n.target)==null?void 0:c.value)}),class:"border px-2 rounded"},null,40,we)])]))}}),De={class:"px-4 py-2 flex items-center bg-gray-50 group"},Ce=["disabled"],Me={class:"ml-4 md:ml-auto flex items-center gap-2"},Le=["value"],Te=E({__name:"MonthlyTaskHeading",props:{selectedMonth:{type:String,required:!0},loading:{type:Boolean,default:!1}},emits:["reloadClick","dayWiseButtonClick","change"],setup(p,{emit:i}){const l=p,m=i;function a(){m("change",z(new Date))}function r(){var c;const[e,s]=(c=l.selectedMonth)==null?void 0:c.split("-").map(Number),n=new Date(e,s,1);n.setMonth(n.getMonth()),m("change",z(n))}function d(){var c;const[e,s]=(c=l.selectedMonth)==null?void 0:c.split("-").map(Number),n=new Date(e,s,1);n.setMonth(n.getMonth()-2),m("change",z(n))}return(e,s)=>(o(),u("div",De,[s[4]||(s[4]=t("h2",{class:"leading-none font-semibold text-lg"},"Monthly Task",-1)),t("button",{class:"btn-3 mx-4 h-7",onClick:s[0]||(s[0]=$(n=>m("dayWiseButtonClick"),["prevent"]))},"Day Wise"),t("button",{class:"btn-3 mx-4 h-7",onClick:$(a,["prevent"])},"Current Month"),t("button",{class:T(["btn-3 px-2 py-2 mx-4 size-7 disabled:text-gray-300 disabled:border-gray-300",{"animate-spin text-gray-300 border-gray-300 !bg-opacity-0":p.loading}]),onClick:s[1]||(s[1]=$(n=>m("reloadClick"),["prevent"])),disabled:p.loading},s[3]||(s[3]=[t("i",{class:"fas fa-redo-alt"},null,-1)]),10,Ce),t("div",Me,[t("button",{class:"btn-2 h-7",onClick:$(d,["prevent"])},"Previous Month"),t("button",{class:"btn-2 h-7",onClick:$(r,["prevent"])},"Next Month"),t("input",{type:"month",value:p.selectedMonth,onInput:s[2]||(s[2]=n=>{var c;return m("change",(c=n.target)==null?void 0:c.value)}),class:"border px-2 rounded"},null,40,Le)])]))}}),Se={key:0,class:"space-y-6 py-2"},Ae={key:0,class:"fad fa-folder text-xs mr-2"},Ne={key:1,class:"fad fa-file-alt text-xs mr-2"},Re={key:2,class:"text-center w-full mt-4 text-xs text-gray-600"},j={__name:"TaskListOnDay",props:{isCurrentMonth:{type:Boolean,default:!1},tasks:{type:Array,default:()=>[]},limit:{type:Number,default:null},tree:{type:Boolean,default:!1}},emits:["clickOnMore"],setup(p,{emit:i}){const l=p,m=i,a=O(()=>{var r;return l.limit?((r=l==null?void 0:l.tasks)==null?void 0:r.slice(0,l.limit))||[]:[...l.tasks]});return(r,d)=>(o(),u("div",null,[p.tree?(o(),u("div",Se,[(o(!0),u(M,null,L(a.value,(e,s)=>(o(),D(re,{"hide-buttons":"","hide-assigned-users":"",task:e,key:e.id,index:s,class:"shadow hover:shadow-md border border-blue-300 rounded-md *:border-none"},null,8,["task","index"]))),128))])):(o(),u("ul",{key:1,class:T({"text-gray-500 group-hover:text-gray-900":!p.isCurrentMonth})},[(o(!0),u(M,null,L(a.value,e=>(o(),u("li",{class:"mb-2",key:e.id},[g(y(G),{to:`/tasks/${e.id}`,target:"_blank",class:"flex items-center hover:underline hover:text-blue-600"},{default:h(()=>[e.children_task_count>0?(o(),u("i",Ae)):k("",!0),e.children_task_count==0?(o(),u("i",Ne)):k("",!0),t("span",{class:T(["line-clamp-1",{"text-red-800":e.deadline_crossed}])},b(e.title),3)]),_:2},1032,["to"])]))),128))],2)),p.tasks.length-a.value.length>0?(o(),u("div",Re,[t("button",{onClick:d[0]||(d[0]=$(e=>m("clickOnMore",e),["prevent"])),class:"text-blue-600 hover:underline"}," +"+b(p.tasks.length-a.value.length)+" More Tasks ",1)])):k("",!0)]))}},Be={class:"relative"},Pe={class:"ml-auto"},qe=["onClick"],Ve={key:0,class:"absolute inset-0 bg-gray-300 bg-opacity-90"},We={class:"absolute inset-16 bg-white border border-blue-500 rounded-md z-20 overflow-y-auto"},ze={class:"text-lg font-semibold mb-4 sticky top-0 border-b border-blue-200 px-4 z-30 py-3 bg-white flex items-center"},Oe={__name:"TaskInMonth",props:{month:{type:String,required:!0,validator:p=>/^\d{4}-(0[1-9]|1[0-2])$/.test(p)},tasks:{type:Array,required:!0,default:()=>[]}},setup(p){const i=Y({day:null,month:null,year:null});function l(e){e.stopPropagation(),i.day=null,i.month=null,i.year=null}function m(e,s,n,c){e.stopPropagation(),i.day=s,i.month=n,i.year=c}const a=(e,s,n)=>{const c=new Date;return e===c.getDate()&&s===c.getMonth()+1&&n===c.getFullYear()},r=(e,s,n)=>e===i.day&&s===i.month&&n===i.year,d=(e,s,n,c)=>{const w=a(e,s,n);return{"bg-green-100 text-green-900 border-blue-500 border-2 scale-105 z-10":w,"border-r border-t hover:border border-blue-200  hover:scale-105 hover:z-20 hover:bg-blue-50":!w,"bg-gray-50":!c}};return(e,s)=>(o(),u("div",Be,[p.month?(o(),D(le,{key:0,month:p.month,class:"border-t border-blue-200/50 relative"},{date:h(({day:n,month:c,year:w,isCurrentMonth:N})=>[t("div",{tabindex:"0",class:T(["transition origin-center p-2 outline-blue-600 outline-1 cursor-pointer",d(n,c,w,N)])},[t("div",{class:T(["font-bold w-full flex items-center",{"text-gray-300":!N}])},[t("div",null,b(n),1),t("div",Pe,[r(n,c,w)?k("",!0):(o(),u("button",{key:0,class:"btn-icon",onClick:$(_=>m(_,n,c,w),["prevent"])},s[0]||(s[0]=[t("i",{class:"fas fa-expand-arrows text-gray-400 hover:text-gray-600"},null,-1)]),8,qe))])],2),g(j,{"is-current-month":N,tasks:y(F)(p.tasks,n,c,w),limit:3,class:"text-xs mt-4",onClickOnMore:_=>m(_,n,c,w)},null,8,["is-current-month","tasks","onClickOnMore"])],2)]),"calender-bottom":h(()=>[i.day?(o(),u("div",Ve,[t("div",We,[t("div",ze,[v(" Tasks for "+b(i.day)+"/"+b(i.month)+"/"+b(i.year)+" ",1),t("button",{class:"ml-auto",type:"button",onClick:$(l,["prevent"])},s[1]||(s[1]=[t("i",{class:"fas fa-times"},null,-1)]))]),g(j,{class:"p-4","is-current-month":e.isCurrentMonth,tasks:y(F)(p.tasks,i.day,i.month,i.year),tree:!0},null,8,["is-current-month","tasks"])])])):k("",!0)]),_:1},8,["month"])):k("",!0)]))}},Ue={class:"bg-opacity-90 relative"},Fe={class:"rounded-md z-20"},je={class:"text-md sticky top-0 border-b px-4 z-30 py-3 bg-white flex items-center shadow"},Ie={class:"flex justify-between items-center gap-6 w-full"},Ee={key:0,class:"text-blue-800 bg-blue-100 rounded-full border px-4 py-0.5 text-sm"},Ye={key:1,class:"text-blue-800 bg-blue-100 rounded-full border px-4 py-0.5 text-sm"},He={class:"ml-auto flex items-center gap-2"},Ke={key:0,class:"w-32 relative h-8"},Ge={__name:"DailyTask",setup(p){const i=Y({day:null,month:null,year:null}),l=A(),m=A(),a=A("loading"),r=oe(),d=H(),e=A(""),s=A("day-wise"),n=A("not-completed");K(()=>{l.value=W(new Date),m.value=z(new Date)}),V(l,_=>{const[f,x,q]=_.split("-").map(Number);i.day=q,i.month=x,i.year=f}),V(m,_=>{const[f,x]=_.split("-").map(Number);i.day=1,i.month=x,i.year=f}),V(()=>i.month,async()=>{a.value="loading",await c(),a.value=""}),V(s,_=>{if(_=="month-wise"){const[f,x]=l.value.split("-");m.value=`${f}-${x}`}});async function c(){await r.fetchMyTasks()}const w=async()=>{a.value="loading",await c(),a.value=""},N=O(()=>{var x,q;const _=C=>{var S,R;return e.value?(R=C==null?void 0:C.toUpperCase())==null?void 0:R.includes((S=e.value)==null?void 0:S.toUpperCase()):!0},f=s.value=="day-wise"?{"user-ids":(x=d==null?void 0:d.user)==null?void 0:x.id,status:n.value}:{"user-ids":(q=d==null?void 0:d.user)==null?void 0:q.id};return te(F(r.tasks,i.day,i.month,i.year),f).filter(C=>{var S;return _(C.title)||((S=C.children_tasks)==null?void 0:S.some(R=>_(R==null?void 0:R.title)))}).map(C=>({...C,children_tasks:C.children_tasks.filter(S=>_(S.title))}))});return(_,f)=>(o(),u("div",null,[s.value=="day-wise"?(o(),D($e,{key:0,loading:a.value=="loading","selected-day":l.value,onChange:f[0]||(f[0]=x=>l.value=x),onReloadClick:w,onMonthWiseButtonClick:f[1]||(f[1]=x=>s.value="month-wise")},null,8,["loading","selected-day"])):k("",!0),s.value=="month-wise"?(o(),D(Te,{key:1,loading:a.value=="loading","selected-month":m.value,onChange:f[2]||(f[2]=x=>m.value=x),onDayWiseButtonClick:f[3]||(f[3]=x=>s.value="day-wise"),onReloadClick:w},null,8,["loading","selected-month"])):k("",!0),t("div",Ue,[t("div",Fe,[t("div",je,[t("div",Ie,[s.value=="day-wise"?(o(),u("div",Ee,b(y(ne)(l.value)),1)):k("",!0),s.value=="month-wise"?(o(),u("div",Ye,b(y(ae)(m.value)),1)):k("",!0),t("div",He,[s.value=="day-wise"?(o(),u("div",Ke,[f[7]||(f[7]=t("label",{class:"absolute text-xs left-3 -top-1.5 bg-slate-100 text-blue-500"},"Status",-1)),J(t("select",{"onUpdate:modelValue":f[4]||(f[4]=x=>n.value=x),class:"h-8 text-xs px-2 text-gray-600 border-2 border-gray-400 rounded-md w-full"},f[6]||(f[6]=[t("option",{value:""},"--ALL TASKS--",-1),t("option",{value:"not-completed"},"Not Completed",-1)]),512),[[Q,n.value]])])):k("",!0),g(se,{modelValue:e.value,"onUpdate:modelValue":f[5]||(f[5]=x=>e.value=x),class:"w-full md:w-48 md:ml-auto h-8","debounce-time":0},null,8,["modelValue"])])])]),s.value=="day-wise"?(o(),D(j,{key:0,class:"p-4 overflow-y-auto",tasks:N.value,tree:!0},null,8,["tasks"])):s.value=="month-wise"?(o(),D(Oe,{key:1,tasks:N.value||[],month:m.value,class:"bg-gray-50"},null,8,["tasks","month"])):k("",!0)]),a.value==="loading"?(o(),D(ee,{key:0,class:"absolute inset-0 flex items-center justify-center z-20 bg-opacity-70"})):k("",!0)])]))}},Je={class:"bg-white shadow-md rounded-lg"},Qe={class:"overflow-x-auto shadow-md min-h-max"},Xe={class:"min-w-full text-sm text-left text-gray-500 table-fixed"},Ze={class:"text-xs"},et={class:"text-sm font-semibold text-blue-800"},tt={__name:"DashboardLeaveBalance",setup(p){const i=P(),{userDashboard:l}=B(i);return(m,a)=>{var r,d,e,s;return o(),u("div",Je,[a[4]||(a[4]=t("h2",{class:"text-xl font-semibold py-2 px-4"},"Leave Balance",-1)),t("div",Qe,[t("table",Xe,[t("thead",null,[t("tr",Ze,[a[0]||(a[0]=t("th",{class:"px-2 py-1 font-semibold text-gray-900 border bg-gray-50"},null,-1)),(o(!0),u(M,null,L((r=y(l))==null?void 0:r.leave_balance,n=>(o(),u("th",{class:"px-4 text-center py-1 font-semibold text-gray-900 border bg-gray-50 w-40",key:n.id},b(n.name),1))),128))])]),t("tbody",null,[t("tr",null,[a[1]||(a[1]=t("td",{class:"px-4 py-4 font-medium text-gray-900 border text-xs"},"Total",-1)),(o(!0),u(M,null,L((d=y(l))==null?void 0:d.leave_balance,n=>(o(),u("td",{class:"px-4 text-center py-3 font-medium text-gray-900 border",key:n.id},b(n.annual_quota),1))),128))]),t("tr",null,[a[2]||(a[2]=t("td",{class:"px-4 py-3 font-medium text-gray-900 border text-xs"},"Used",-1)),(o(!0),u(M,null,L((e=y(l))==null?void 0:e.leave_balance,n=>(o(),u("td",{class:"px-4 text-center py-4 font-medium text-gray-900 border",key:n.id},b(n.used_days),1))),128))]),t("tr",et,[a[3]||(a[3]=t("td",{class:"px-4 py-3 border text-xs"},"Balance",-1)),(o(!0),u(M,null,L((s=y(l))==null?void 0:s.leave_balance,n=>(o(),u("td",{class:"px-4 text-center py-4 border",key:n.id},b(n.remaining_days),1))),128))])])])])])}}},st={class:"bg-white shadow-md rounded-lg p-4"},nt={key:0,class:"text-xs italic text-center py-4 text-gray-500 mt-2"},at={key:1,class:"py-3"},ot={class:"flex justify-between items-center py-2 rounded hover:bg-sky-50 transition-colors"},lt={class:"text-sm text-gray-800"},rt={key:0},it={key:1},dt={key:2},ut={__name:"DashboardRecentApplications",setup(p){const i=P(),{userDashboard:l}=B(i);return(m,a)=>{var d,e,s;const r=I("RouterLink");return o(),u("div",st,[a[3]||(a[3]=t("div",{class:"flex items-center mb-1"},[t("i",{class:"fas fa-file mr-2 h-5 w-5"}),t("h2",{class:"text-xl font-semibold"},[v(" Applications "),t("span",{class:"text-xs ml-2 text-green-00"},"This month")])],-1)),a[4]||(a[4]=t("hr",null,null,-1)),((e=(d=y(l))==null?void 0:d.current_month_leave)==null?void 0:e.length)===0?(o(),u("div",nt," No Application on this month ")):(o(),u("div",at,[(o(!0),u(M,null,L((s=y(l))==null?void 0:s.current_month_leave,n=>(o(),D(r,{to:{name:"MyLeaveApplicationShow",params:{id:n.id}},key:n.id},{default:h(()=>[t("div",ot,[t("h3",lt,"Leave Application #"+b(n.id),1),t("p",{class:T(["font-medium flex items-center space-x-2 whitespace-nowrap text-xs",{"bg-gray-500 py-1 rounded-full px-2 text-white":n.status===null,"bg-yellow-500 py-1 rounded-full px-2 text-white":n.status==="Pending","bg-green-500 py-1 rounded-full px-2 text-white":n.status==="Approved"}])},[n.status===null?(o(),u("span",rt,a[0]||(a[0]=[t("i",{class:"fas fa-clock mr-2"},null,-1),v(" Hanover Waiting ")]))):n.status==="Pending"?(o(),u("span",it,a[1]||(a[1]=[t("i",{class:"fas fa-hourglass-half mr-2"},null,-1),v(" Pending ")]))):(o(),u("span",dt,a[2]||(a[2]=[t("i",{class:"fas fa-check-circle mr-2"},null,-1),v(" Approved ")])))],2)])]),_:2},1032,["to"]))),128))]))])}}},ct={class:"bg-white shadow-md rounded-lg p-4"},mt={class:"space-y-3"},pt={key:0,class:"text-xs italic text-center py-4 text-gray-500"},yt={class:"flex items-center space-x-4"},bt={key:0,class:"h-3 w-3 bg-red-600 rounded-full inline-block"},ft={key:1,class:"inline-block"},xt={class:"absolute top-10 left-1/2 -translate-x-1/2 bg-gray-800 text-white text-xs rounded py-1 px-2 opacity-0 group-hover:opacity-100 transition pointer-events-none z-10 whitespace-nowrap"},gt={class:"text-sm font-medium text-gray-900"},vt={class:"text-xs text-gray-500 mt-0.5"},ht={class:"text-xl font-bold text-gray-800 flex items-center gap-2 p-4"},_t={class:"space-y-5 px-4 md:px-6 py-4"},kt={class:"text-sm text-gray-500 flex items-center gap-2"},wt={class:"flex justify-end gap-3 mt-6"},$t={__name:"DashboardRecentNotices",setup(p){const i=P(),{userDashboard:l}=B(i),m=X(),a=O(()=>{var d,e;if(l.value&&l.value.notices){const s=(e=(d=l.value)==null?void 0:d.notices)==null?void 0:e.find(n=>!n.user_feedback);if(s)return s}return null}),r=()=>{if(!a.value)return;const d=a.value.type===1?`/notice-details/${a.value.id}`:`/policy-details/${a.value.id}`;m.push(d)};return(d,e)=>{var n;const s=I("RouterLink");return o(),u("div",ct,[e[7]||(e[7]=Z('<div class="flex justify-between items-start mb-1"><div class="flex items-center"><i class="fas fa-file mr-2 h-5 w-5"></i><h2 class="text-xl font-semibold">Notices</h2></div></div><hr class="mb-3">',2)),t("div",mt,[((n=y(l).notices)==null?void 0:n.length)===0?(o(),u("div",pt," No pending notice found ")):(o(!0),u(M,{key:1},L(y(l).notices,(c,w)=>(o(),u("div",{key:w,class:"flex items-center justify-between p-4 border rounded-lg shadow-sm hover:shadow transition-all bg-white"},[t("div",yt,[t("div",{class:T([["rounded-full",c.user_feedback?"bg-green-100":"bg-red-100"],"h-8 w-8 flex items-center justify-center rounded-full flex-shrink-0"])},[c.user_feedback?(o(),u("span",ft,e[2]||(e[2]=[t("i",{class:"far fa-check text-green-600"},null,-1)]))):(o(),u("span",bt)),t("div",xt,b(c.user_feedback?"Feedback Submitted":"Feedback Pending"),1)],2),t("div",null,[t("p",gt,b(c.title),1),t("p",vt,b(c.published_at),1)])]),g(s,{to:c.type===1?`/notice-details/${c.id}`:`/policy-details/${c.id}`,class:"text-blue-600 hover:text-blue-800 font-semibold text-sm"},{default:h(()=>e[3]||(e[3]=[v(" View ")])),_:2,__:[3]},1032,["to"])]))),128)),a.value?(o(),D(ie,{key:2,show:!0,onClose:e[1]||(e[1]=c=>a.value=null)},{default:h(()=>[t("div",ht,[e[4]||(e[4]=t("i",{class:"fas fa-bell text-blue-500"},null,-1)),v(" "+b(a.value.title),1)]),t("div",_t,[t("p",kt,[e[5]||(e[5]=t("i",{class:"fas fa-calendar-alt text-gray-400"},null,-1)),v(" Published: "+b(a.value.published_at),1)]),e[6]||(e[6]=t("p",{class:"text-base text-gray-700 leading-relaxed"}," You must read this notice before proceeding. ",-1)),t("div",wt,[t("button",{onClick:e[0]||(e[0]=c=>a.value=null),class:"bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium px-5 py-2 rounded-lg transition"}," Cancel "),t("button",{onClick:r,class:"bg-blue-600 hover:bg-blue-700 text-white font-semibold px-6 py-2.5 rounded-lg shadow transition"}," Read Details ")])])]),_:1})):k("",!0)])])}}},Dt={class:"w-full px-6 py-4"},Ct={class:"grid lg:grid-cols-4 gap-6"},Mt={class:"card-bg gap-0 shadow-md border border-gray-300 col-span-full lg:col-span-3 lg:row-span-2"},Lt={class:"col-span-full lg:col-span-1 grid sm:grid-cols-2 lg:grid-cols-1 gap-6 sticky top-[80px]"},Tt={class:"card-bg gap-0 shadow-md border border-gray-300"},St={class:"card-bg gap-0 shadow-md border border-gray-300"},At={class:"card-bg gap-0 shadow-md border border-gray-300"},Nt={__name:"DashboardEmployeeView",setup(p){return(i,l)=>(o(),u("div",Dt,[t("div",Ct,[t("div",Mt,[g(Ge)]),t("div",Lt,[t("div",Tt,[g(ut)]),t("div",St,[g($t)]),t("div",At,[g(tt)])])])]))}},Ht={__name:"DashBoard",setup(p){const i=H(),l=P(),{userDashboard:m}=B(l),{user:a}=B(i),r=O(()=>{var e;return["admin","super_admin","developer"].includes((e=a==null?void 0:a.value)==null?void 0:e.role)}),d=A(null);return K(async()=>{var s,n;a.value||await i.fetchUser(),await l.fetchUserDashboardData(),r.value&&await l.fetchAdminDashboardData();const e=(n=(s=m.value)==null?void 0:s.notices)==null?void 0:n.find(c=>!c.user_feedback);e&&(d.value=e)}),(e,s)=>r.value&&y(i).isAdminMood?(o(),D(ve,{key:0})):(o(),D(Nt,{key:1}))}};export{Ht as default};
