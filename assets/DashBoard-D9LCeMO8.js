const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LeaveApplicationModal-CCcHyIyf.js","assets/index-BNjnp8bS.js","assets/index-xvyqa-pt.css","assets/ApprovalItem-wb9gI3gT.js","assets/AcceptAndRejectHandler-ZTJpjZE6.js","assets/LoaderView-CucMn1TD.js","assets/_plugin-vue_export-helper-DlAUqK2U.js","assets/ShareComponent-l7lQBLtX.js","assets/leave-application-DIv7JVET.js","assets/LeaveApplicationModal-B7WJltA7.css","assets/ShortLeaveDetailsModal-BIu6IGO0.js","assets/ScreenshotCapture-2Za8xF08.js","assets/short-leave-DCY57bL6.js","assets/ShortLeaveDetailsModal-D4avNQ1k.css","assets/ManualAttendanceDetailsModal-BjMLApL2.js","assets/manual-attendance-CN_9rrH2.js","assets/ManualAttendanceDetailsModal-MS8n2gFL.css","assets/ShiftExchangeDetailsModal-rZsW1fOo.js","assets/exchange-113L556q.js","assets/ShiftExchangeDetailsModal-BlZsJzAI.css","assets/OffdayExchangeDetailsModal-DwFV6EGv.js","assets/OffdayExchangeDetailsModal-CanJZDqu.css"])))=>i.map(i=>d[i]);
import{u as G}from"./user-Cd3hxrRA.js";import{s as W,m as ce,c as i,o as a,n as b,i as w,a as e,j as h,t as p,k as _,p as ye,w as N,q as L,x as j,g as D,F as E,y as R,f as T,R as Se,z as me,r as S,d as ve,e as ge,A as J,h as K,B as Te,C as Y,D as Q,T as X,E as Ae,_ as H,u as Ne,l as Ee}from"./index-BNjnp8bS.js";import{L as Re}from"./LoaderView-CucMn1TD.js";import{m as Oe,_ as je}from"./task-tree-CWPN2m-h.js";import{o as re,g as Z,a as ee,b as Pe,c as Be}from"./datetime-l2Vm98rT.js";import{u as Ue}from"./useTaskStore-BYoXj914.js";import{_ as Ve}from"./CalenderView-ldabnqmo.js";import{_ as qe}from"./TaskTreeViewWithSubTable-DeD0abnZ.js";import{_ as We}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{O as ze}from"./OverlyModal-Db1QpBr7.js";import"./TaskSupervisorAndEmployee-DS5c8poP.js";import"./UserChip-_6NbAM6N.js";import"./TaskStatus-uKm19qTi.js";import"./url-CePbr-gY.js";const Fe={class:"grid gap-4 md:grid-cols-3 mt-4 container mx-auto"},Ie={class:"text-3xl"},Ye={class:"text-3xl"},He={class:"text-3xl"},Ke={class:"text-3xl"},Ge={class:"text-3xl"},Je={class:"text-3xl"},Qe={class:"text-3xl"},Xe={class:"text-3xl"},Ze={class:"text-3xl"},et={__name:"DashboardAdminView",setup(f){const y=G(),{dashboardInfo:c,selectedDate:g}=W(y);return(r,d)=>{const m=ce("RouterLink");return a(),i("div",Fe,[b(m,{to:{name:"TodayAttendanceReport",query:{status:"all"}},class:"main-button"},{default:w(()=>{var t;return[e("span",Ie,p((t=_(c))==null?void 0:t.totalUsers),1),d[0]||(d[0]=h(" Total Employees "))]}),_:1,__:[0]}),b(m,{to:{name:"TodayAttendanceReport",query:{status:"Present"}},class:"main-button"},{default:w(()=>{var t;return[e("span",Ye,p((t=_(c))==null?void 0:t.todayPresents),1),d[1]||(d[1]=h(" Today Present "))]}),_:1,__:[1]}),b(m,{to:{name:"TodayAttendanceReport",query:{status:"Absent"}},class:"main-button"},{default:w(()=>{var t;return[e("span",He,p((t=_(c))==null?void 0:t.todayAbsents),1),d[2]||(d[2]=h(" Today Absent "))]}),_:1,__:[2]}),b(m,{to:{name:"LeaveApplicationsForDay",query:{applicationType:"today"}},class:"main-button"},{default:w(()=>{var t;return[e("span",Ke,p((t=_(c))==null?void 0:t.todayLeaves),1),d[3]||(d[3]=h(" Today Leave "))]}),_:1,__:[3]}),b(m,{to:{name:"LeaveApplicationsForDay",query:{applicationType:"tomorrow"}},class:"main-button"},{default:w(()=>{var t;return[e("span",Ge,p((t=_(c))==null?void 0:t.tomorrowLeaves),1),d[4]||(d[4]=h(" Tomorrow Leave "))]}),_:1,__:[4]}),b(m,{to:{name:"DateWiseShortLeaveList",query:{date:_(g)}},class:"main-button"},{default:w(()=>{var t;return[e("span",Je,p((t=_(c))==null?void 0:t.todayShortLeaves),1),d[5]||(d[5]=h(" Today Short Leaves "))]}),_:1,__:[5]},8,["to"]),b(m,{to:{name:"DailyLateAttendanceReport",query:{date:_(g)}},class:"main-button"},{default:w(()=>{var t;return[e("span",Qe,p((t=_(c))==null?void 0:t.todayLateEntries),1),d[6]||(d[6]=h(" Today Late Report "))]}),_:1,__:[6]},8,["to"]),b(m,{to:{name:"PreviousAfterApplicationList",query:{applicationType:"prev",date:_(g)}},class:"main-button"},{default:w(()=>{var t;return[e("span",Xe,p((t=_(c))==null?void 0:t.prevWeekLeaves),1),d[7]||(d[7]=h(" Leave history of previous week "))]}),_:1,__:[7]},8,["to"]),b(m,{to:{name:"PreviousAfterApplicationList",query:{applicationType:"after",date:_(g)}},class:"main-button"},{default:w(()=>{var t;return[e("span",Ze,p((t=_(c))==null?void 0:t.nextWeekLeaves),1),d[8]||(d[8]=h(" Upcoming leaves "))]}),_:1,__:[8]},8,["to"])])}}},de=(f,y,c,g)=>{const r=new Date(g,c-1,y);return f.filter(d=>{const m=d.deadline?new Date(d.deadline):null,t=re(new Date);if(d.assigned_at){const n=re(new Date(d.assigned_at));if(r<n)return!1;let l=null;return d.completed_at&&(l=re(new Date(d.completed_at))),!(l&&l<r||m&&m<r&&r>t)}return!1}).map(d=>{let m=!1;return d.deadline&&(m=new Date(d.deadline)<r),{...d,deadline_crossed:m}})},tt={class:"px-4 py-2 flex items-center bg-gray-50 group"},st=["disabled"],nt={class:"ml-4 md:ml-auto flex items-center gap-2"},at=["value"],ot=ye({__name:"DailyTaskHeading",props:{selectedDay:{type:String,required:!0},loading:{type:Boolean,default:!1}},emits:["change",,"reloadClick","monthWiseButtonClick"],setup(f,{emit:y}){const c=f,g=y;function r(){g("change",Z(new Date))}function d(){const t=new Date(c.selectedDay);t.setDate(t.getDate()+1),g("change",Z(t))}function m(){const t=new Date(c.selectedDay);t.setDate(t.getDate()-1),g("change",Z(t))}return(t,n)=>(a(),i("div",tt,[n[4]||(n[4]=e("h2",{class:"leading-none font-semibold text-lg"},"Daily Task",-1)),e("button",{class:"btn-3 mx-4 h-7",onClick:n[0]||(n[0]=N(l=>g("monthWiseButtonClick"),["prevent"]))},"Month Wise"),e("button",{class:"btn-3 mx-4 h-7",onClick:N(r,["prevent"])},"Today"),e("button",{class:L(["btn-3 px-2 py-2 mx-4 size-7 disabled:text-gray-300 disabled:border-gray-300",{"animate-spin text-gray-300 border-gray-300 !bg-opacity-0":f.loading}]),onClick:n[1]||(n[1]=N(l=>g("reloadClick"),["prevent"])),disabled:f.loading},n[3]||(n[3]=[e("i",{class:"fas fa-redo-alt"},null,-1)]),10,st),e("div",nt,[e("button",{class:"btn-2 h-7",onClick:N(m,["prevent"])},"Previous Day"),e("button",{class:"btn-2 h-7",onClick:N(d,["prevent"])},"Next Day"),e("input",{type:"date",value:f.selectedDay,onInput:n[2]||(n[2]=l=>{var v;return g("change",(v=l.target)==null?void 0:v.value)}),class:"border px-2 rounded"},null,40,at)])]))}}),lt={class:"px-4 py-2 flex items-center bg-gray-50 group"},it=["disabled"],rt={class:"ml-4 md:ml-auto flex items-center gap-2"},dt=["value"],ut=ye({__name:"MonthlyTaskHeading",props:{selectedMonth:{type:String,required:!0},loading:{type:Boolean,default:!1}},emits:["reloadClick","dayWiseButtonClick","change"],setup(f,{emit:y}){const c=f,g=y;function r(){g("change",ee(new Date))}function d(){var v;const[t,n]=(v=c.selectedMonth)==null?void 0:v.split("-").map(Number),l=new Date(t,n,1);l.setMonth(l.getMonth()),g("change",ee(l))}function m(){var v;const[t,n]=(v=c.selectedMonth)==null?void 0:v.split("-").map(Number),l=new Date(t,n,1);l.setMonth(l.getMonth()-2),g("change",ee(l))}return(t,n)=>(a(),i("div",lt,[n[4]||(n[4]=e("h2",{class:"leading-none font-semibold text-lg"},"Monthly Task",-1)),e("button",{class:"btn-3 mx-4 h-7",onClick:n[0]||(n[0]=N(l=>g("dayWiseButtonClick"),["prevent"]))},"Day Wise"),e("button",{class:"btn-3 mx-4 h-7",onClick:N(r,["prevent"])},"Current Month"),e("button",{class:L(["btn-3 px-2 py-2 mx-4 size-7 disabled:text-gray-300 disabled:border-gray-300",{"animate-spin text-gray-300 border-gray-300 !bg-opacity-0":f.loading}]),onClick:n[1]||(n[1]=N(l=>g("reloadClick"),["prevent"])),disabled:f.loading},n[3]||(n[3]=[e("i",{class:"fas fa-redo-alt"},null,-1)]),10,it),e("div",rt,[e("button",{class:"btn-2 h-7",onClick:N(m,["prevent"])},"Previous Month"),e("button",{class:"btn-2 h-7",onClick:N(d,["prevent"])},"Next Month"),e("input",{type:"month",value:f.selectedMonth,onInput:n[2]||(n[2]=l=>{var v;return g("change",(v=l.target)==null?void 0:v.value)}),class:"border px-2 rounded"},null,40,dt)])]))}}),ct={key:0,class:"space-y-6 py-2"},pt={key:0,class:"fad fa-folder text-xs mr-2"},yt={key:1,class:"fad fa-file-alt text-xs mr-2"},mt={key:2,class:"text-center w-full mt-4 text-xs text-gray-600"},ue={__name:"TaskListOnDay",props:{isCurrentMonth:{type:Boolean,default:!1},tasks:{type:Array,default:()=>[]},limit:{type:Number,default:null},tree:{type:Boolean,default:!1}},emits:["clickOnMore"],setup(f,{emit:y}){const c=f,g=y,r=j(()=>{var d;return c.limit?((d=c==null?void 0:c.tasks)==null?void 0:d.slice(0,c.limit))||[]:[...c.tasks]});return(d,m)=>(a(),i("div",null,[f.tree?(a(),i("div",ct,[(a(!0),i(E,null,R(r.value,(t,n)=>(a(),T(qe,{"hide-buttons":"","hide-assigned-users":"",task:t,key:t.id,index:n,class:"shadow hover:shadow-md border border-blue-300 rounded-md *:border-none"},null,8,["task","index"]))),128))])):(a(),i("ul",{key:1,class:L({"text-gray-500 group-hover:text-gray-900":!f.isCurrentMonth})},[(a(!0),i(E,null,R(r.value,t=>(a(),i("li",{class:"mb-2",key:t.id},[b(_(Se),{to:`/tasks/${t.id}`,target:"_blank",class:"flex items-center hover:underline hover:text-blue-600"},{default:w(()=>[t.children_task_count>0?(a(),i("i",pt)):D("",!0),t.children_task_count==0?(a(),i("i",yt)):D("",!0),e("span",{class:L(["line-clamp-1",{"text-red-800":t.deadline_crossed}])},p(t.title),3)]),_:2},1032,["to"])]))),128))],2)),f.tasks.length-r.value.length>0?(a(),i("div",mt,[e("button",{onClick:m[0]||(m[0]=N(t=>g("clickOnMore",t),["prevent"])),class:"text-blue-600 hover:underline"}," +"+p(f.tasks.length-r.value.length)+" More Tasks ",1)])):D("",!0)]))}},vt={class:"relative"},gt={class:"ml-auto"},xt=["onClick"],ft={key:0,class:"absolute inset-0 bg-gray-300 bg-opacity-90"},_t={class:"absolute inset-16 bg-white border border-blue-500 rounded-md z-20 overflow-y-auto"},bt={class:"text-lg font-semibold mb-4 sticky top-0 border-b border-blue-200 px-4 z-30 py-3 bg-white flex items-center"},ht={__name:"TaskInMonth",props:{month:{type:String,required:!0,validator:f=>/^\d{4}-(0[1-9]|1[0-2])$/.test(f)},tasks:{type:Array,required:!0,default:()=>[]}},setup(f){const y=me({day:null,month:null,year:null});function c(t){t.stopPropagation(),y.day=null,y.month=null,y.year=null}function g(t,n,l,v){t.stopPropagation(),y.day=n,y.month=l,y.year=v}const r=(t,n,l)=>{const v=new Date;return t===v.getDate()&&n===v.getMonth()+1&&l===v.getFullYear()},d=(t,n,l)=>t===y.day&&n===y.month&&l===y.year,m=(t,n,l,v)=>{const C=r(t,n,l);return{"bg-green-100 text-green-900 border-blue-500 border-2 scale-105 z-10":C,"border-r border-t hover:border border-blue-200  hover:scale-105 hover:z-20 hover:bg-blue-50":!C,"bg-gray-50":!v}};return(t,n)=>(a(),i("div",vt,[f.month?(a(),T(Ve,{key:0,month:f.month,class:"border-t border-blue-200/50 relative"},{date:w(({day:l,month:v,year:C,isCurrentMonth:P})=>[e("div",{tabindex:"0",class:L(["transition origin-center p-2 outline-blue-600 outline-1 cursor-pointer",m(l,v,C,P)])},[e("div",{class:L(["font-bold w-full flex items-center",{"text-gray-300":!P}])},[e("div",null,p(l),1),e("div",gt,[d(l,v,C)?D("",!0):(a(),i("button",{key:0,class:"btn-icon",onClick:N(M=>g(M,l,v,C),["prevent"])},n[0]||(n[0]=[e("i",{class:"fas fa-expand-arrows text-gray-400 hover:text-gray-600"},null,-1)]),8,xt))])],2),b(ue,{"is-current-month":P,tasks:_(de)(f.tasks,l,v,C),limit:3,class:"text-xs mt-4",onClickOnMore:M=>g(M,l,v,C)},null,8,["is-current-month","tasks","onClickOnMore"])],2)]),"calender-bottom":w(()=>[y.day?(a(),i("div",ft,[e("div",_t,[e("div",bt,[h(" Tasks for "+p(y.day)+"/"+p(y.month)+"/"+p(y.year)+" ",1),e("button",{class:"ml-auto",type:"button",onClick:N(c,["prevent"])},n[1]||(n[1]=[e("i",{class:"fas fa-times"},null,-1)]))]),b(ue,{class:"p-4","is-current-month":t.isCurrentMonth,tasks:_(de)(f.tasks,y.day,y.month,y.year),tree:!0},null,8,["is-current-month","tasks"])])])):D("",!0)]),_:1},8,["month"])):D("",!0)]))}},kt={class:"bg-opacity-90 relative"},wt={class:"rounded-md z-20"},$t={class:"text-md sticky top-0 border-b px-4 z-30 py-3 bg-white flex items-center shadow"},Dt={class:"flex justify-between items-center gap-6 w-full"},Ct={key:0,class:"text-blue-800 bg-blue-100 rounded-full border px-4 py-0.5 text-sm"},Mt={key:1,class:"text-blue-800 bg-blue-100 rounded-full border px-4 py-0.5 text-sm"},Lt={class:"ml-auto flex items-center gap-2"},St={key:0,class:"w-32 relative h-8"},Tt={__name:"DailyTask",setup(f){const y=me({day:null,month:null,year:null}),c=S(),g=S(),r=S("loading"),d=Ue(),m=ve(),t=S(""),n=S("day-wise"),l=S("not-completed");ge(()=>{c.value=Z(new Date),g.value=ee(new Date)}),J(c,M=>{const[x,$,B]=M.split("-").map(Number);y.day=B,y.month=$,y.year=x}),J(g,M=>{const[x,$]=M.split("-").map(Number);y.day=1,y.month=$,y.year=x}),J(()=>y.month,async()=>{r.value="loading",await v(),r.value=""}),J(n,M=>{if(M=="month-wise"){const[x,$]=c.value.split("-");g.value=`${x}-${$}`}});async function v(){await d.fetchMyTasks()}const C=async()=>{r.value="loading",await v(),r.value=""},P=j(()=>{var $,B;const M=A=>{var O,U;return t.value?(U=A==null?void 0:A.toUpperCase())==null?void 0:U.includes((O=t.value)==null?void 0:O.toUpperCase()):!0},x=n.value=="day-wise"?{"user-ids":($=m==null?void 0:m.user)==null?void 0:$.id,status:l.value}:{"user-ids":(B=m==null?void 0:m.user)==null?void 0:B.id};return Oe(de(d.tasks,y.day,y.month,y.year),x).filter(A=>{var O;return M(A.title)||((O=A.children_tasks)==null?void 0:O.some(U=>M(U==null?void 0:U.title)))}).map(A=>({...A,children_tasks:A.children_tasks.filter(O=>M(O.title))}))});return(M,x)=>(a(),i("div",null,[n.value=="day-wise"?(a(),T(ot,{key:0,loading:r.value=="loading","selected-day":c.value,onChange:x[0]||(x[0]=$=>c.value=$),onReloadClick:C,onMonthWiseButtonClick:x[1]||(x[1]=$=>n.value="month-wise")},null,8,["loading","selected-day"])):D("",!0),n.value=="month-wise"?(a(),T(ut,{key:1,loading:r.value=="loading","selected-month":g.value,onChange:x[2]||(x[2]=$=>g.value=$),onDayWiseButtonClick:x[3]||(x[3]=$=>n.value="day-wise"),onReloadClick:C},null,8,["loading","selected-month"])):D("",!0),e("div",kt,[e("div",wt,[e("div",$t,[e("div",Dt,[n.value=="day-wise"?(a(),i("div",Ct,p(_(Pe)(c.value)),1)):D("",!0),n.value=="month-wise"?(a(),i("div",Mt,p(_(Be)(g.value)),1)):D("",!0),e("div",Lt,[n.value=="day-wise"?(a(),i("div",St,[x[7]||(x[7]=e("label",{class:"absolute text-xs left-3 -top-1.5 bg-slate-100 text-blue-500"},"Status",-1)),K(e("select",{"onUpdate:modelValue":x[4]||(x[4]=$=>l.value=$),class:"h-8 text-xs px-2 text-gray-600 border-2 border-gray-400 rounded-md w-full"},x[6]||(x[6]=[e("option",{value:""},"--ALL TASKS--",-1),e("option",{value:"not-completed"},"Not Completed",-1)]),512),[[Te,l.value]])])):D("",!0),b(je,{modelValue:t.value,"onUpdate:modelValue":x[5]||(x[5]=$=>t.value=$),class:"w-full md:w-48 md:ml-auto h-8","debounce-time":0},null,8,["modelValue"])])])]),n.value=="day-wise"?(a(),T(ue,{key:0,class:"p-4 overflow-y-auto",tasks:P.value,tree:!0},null,8,["tasks"])):n.value=="month-wise"?(a(),T(ht,{key:1,tasks:P.value||[],month:g.value,class:"bg-gray-50"},null,8,["tasks","month"])):D("",!0)]),r.value==="loading"?(a(),T(Re,{key:0,class:"absolute inset-0 flex items-center justify-center z-20 bg-opacity-70"})):D("",!0)])]))}},At={class:"bg-white shadow-md rounded-lg"},Nt={class:"overflow-x-auto shadow-md min-h-max"},Et={class:"min-w-full text-sm text-left text-gray-500 table-fixed"},Rt={class:"text-xs"},Ot={class:"text-sm font-semibold text-blue-800"},jt={__name:"DashboardLeaveBalance",setup(f){const y=G(),{userDashboard:c}=W(y);return(g,r)=>{var d,m,t,n;return a(),i("div",At,[r[4]||(r[4]=e("h2",{class:"text-xl font-semibold py-2 px-4"},"Leave Balance",-1)),e("div",Nt,[e("table",Et,[e("thead",null,[e("tr",Rt,[r[0]||(r[0]=e("th",{class:"px-2 py-1 font-semibold text-gray-900 border bg-gray-50"},null,-1)),(a(!0),i(E,null,R((d=_(c))==null?void 0:d.leave_balance,l=>(a(),i("th",{class:"px-4 text-center py-1 font-semibold text-gray-900 border bg-gray-50 w-40",key:l.id},p(l.name),1))),128))])]),e("tbody",null,[e("tr",null,[r[1]||(r[1]=e("td",{class:"px-4 py-4 font-medium text-gray-900 border text-xs"},"Total",-1)),(a(!0),i(E,null,R((m=_(c))==null?void 0:m.leave_balance,l=>(a(),i("td",{class:"px-4 text-center py-3 font-medium text-gray-900 border",key:l.id},p(l.annual_quota),1))),128))]),e("tr",null,[r[2]||(r[2]=e("td",{class:"px-4 py-3 font-medium text-gray-900 border text-xs"},"Used",-1)),(a(!0),i(E,null,R((t=_(c))==null?void 0:t.leave_balance,l=>(a(),i("td",{class:"px-4 text-center py-4 font-medium text-gray-900 border",key:l.id},p(l.used_days),1))),128))]),e("tr",Ot,[r[3]||(r[3]=e("td",{class:"px-4 py-3 border text-xs"},"Balance",-1)),(a(!0),i(E,null,R((n=_(c))==null?void 0:n.leave_balance,l=>(a(),i("td",{class:"px-4 text-center py-4 border",key:l.id},p(l.remaining_days),1))),128))])])])])])}}},Pt={class:"bg-white shadow-md rounded-lg p-4"},Bt={class:"flex items-center justify-between mb-1"},Ut={key:0,class:"text-xs italic text-center py-4 text-gray-500 mt-2"},Vt={key:1,class:"py-3 divide-y"},qt=["onClick"],Wt={class:"flex justify-between items-center py-2 rounded hover:bg-sky-50 transition-colors"},zt={class:"flex items-center gap-2 min-w-0"},Ft=["aria-label","onClick"],It={class:"text-sm text-gray-800 truncate"},Yt={class:"opacity-70"},Ht={class:"px-3 pb-2"},Kt={class:"grid grid-cols-1 sm:grid-cols-3 gap-2 text-[11px]"},Gt={class:"rounded border border-gray-200 p-1 bg-gray-50"},Jt={class:"font-medium text-gray-800"},Qt={class:"rounded border border-gray-200 p-1 bg-gray-50"},Xt={class:"font-medium text-gray-800"},Zt={class:"rounded border border-gray-200 p-1 bg-gray-50"},es={class:"font-medium text-gray-800"},ts={class:"mt-3"},ss={class:"flex flex-wrap gap-2"},ns={key:0,class:"ml-1 opacity-70"},as={class:"mt-6"},os={class:"flex items-center justify-between mb-1"},ls={key:0,class:"text-xs italic text-center py-4 text-gray-500 mt-2"},is={key:1,class:"py-3 divide-y"},rs=["onClick"],ds={class:"flex justify-between items-center py-2 rounded hover:bg-sky-50 transition-colors"},us={class:"flex items-center gap-2 min-w-0"},cs=["aria-label","onClick"],ps={class:"text-sm text-gray-800 truncate"},ys={class:"opacity-70"},ms={class:"px-3 pb-3"},vs={class:"grid grid-cols-1 sm:grid-cols-3 gap-3 text-[11px]"},gs={class:"rounded border border-gray-200 p-2 bg-gray-50"},xs={class:"font-medium text-gray-800"},fs={class:"rounded border border-gray-200 p-2 bg-gray-50"},_s={class:"font-medium text-gray-800"},bs={class:"rounded border border-gray-200 p-2 bg-gray-50"},hs={class:"font-medium text-gray-800"},ks={class:"mt-6"},ws={class:"flex items-center justify-between mb-1"},$s={class:"flex items-center gap-3"},Ds={key:0,class:"text-xs italic text-center py-4 text-gray-500 mt-2"},Cs={key:1,class:"py-3 divide-y"},Ms=["onClick"],Ls={class:"flex justify-between items-center py-2 rounded hover:bg-sky-50 transition-colors"},Ss={class:"flex items-center gap-2 min-w-0"},Ts=["aria-label","onClick"],As={class:"text-sm text-gray-800 truncate"},Ns={key:0,class:"opacity-70"},Es={class:"px-3 pb-3"},Rs={class:"grid grid-cols-1 sm:grid-cols-3 gap-3 text-[11px]"},Os={class:"rounded border border-gray-200 p-2 bg-gray-50"},js={class:"font-medium text-gray-800"},Ps={class:"rounded border border-gray-200 p-2 bg-gray-50"},Bs={class:"font-medium text-gray-800"},Us={class:"rounded border border-gray-200 px-2 bg-gray-50"},Vs={class:"font-medium text-gray-800"},qs={class:"mt-6"},Ws={class:"flex items-center justify-between mb-1"},zs={key:0,class:"text-xs italic text-center py-4 text-gray-500 mt-2"},Fs={key:1,class:"py-3 divide-y"},Is=["onClick"],Ys={class:"flex justify-between items-center py-2 rounded hover:bg-sky-50 transition-colors"},Hs={class:"flex items-center gap-2 min-w-0"},Ks=["aria-label","onClick"],Gs={class:"text-sm text-gray-800 truncate"},Js={class:"opacity-70"},Qs={class:"px-3 pb-3"},Xs={class:"grid grid-cols-1 sm:grid-cols-3 gap-3 text-[13px]"},Zs={class:"rounded border border-gray-200 p-2 bg-gray-50"},en={class:"font-medium text-gray-800"},tn={class:"rounded border border-gray-200 p-2 bg-gray-50"},sn={class:"font-medium text-gray-800"},nn={class:"rounded border border-gray-200 p-2 bg-gray-50"},an={class:"font-medium text-gray-800"},on={__name:"DashboardRecentApplications",setup(f){const y=Y(()=>H(()=>import("./LeaveApplicationModal-CCcHyIyf.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]))),c=Y(()=>H(()=>import("./ShortLeaveDetailsModal-BIu6IGO0.js"),__vite__mapDeps([10,1,2,3,4,5,6,11,7,12,13]))),g=Y(()=>H(()=>import("./ManualAttendanceDetailsModal-BjMLApL2.js"),__vite__mapDeps([14,1,2,3,4,5,6,7,15,16]))),r=Y(()=>H(()=>import("./ShiftExchangeDetailsModal-rZsW1fOo.js"),__vite__mapDeps([17,1,2,3,4,5,6,11,7,18,19]))),d=Y(()=>H(()=>import("./OffdayExchangeDetailsModal-DwFV6EGv.js"),__vite__mapDeps([20,1,2,3,4,5,6,11,7,18,21]))),m=G(),{userDashboard:t}=W(m),n=j(()=>{var u;return((u=t.value)==null?void 0:u.lists)??{}}),l=j(()=>n.value.current_month_leave??[]),v=j(()=>n.value.short_leave??[]),C=j(()=>n.value.exchange??[]),P=j(()=>n.value.manual_attendance??[]),M={null:{title:"Handover Waiting",cls:"bg-gray-500 text-white"},Pending:{title:"Pending",cls:"bg-yellow-500 text-white"},Approved:{title:"Approved",cls:"bg-green-500 text-white"},Rejected:{title:"Rejected",cls:"bg-red-500 text-white"}},x=u=>M[u??"null"]??{title:String(u||"Unknown"),cls:"bg-gray-400 text-white"},$=u=>Array.isArray(u)?u.filter(s=>s==null?void 0:s.name).map(s=>`${s.name} (${(s==null?void 0:s.days)??0})`).join(", "):"",B=u=>{if(!u)return"";try{return new Date(u).toLocaleDateString(void 0,{day:"2-digit",month:"short",year:"numeric"})}catch{return u}},A=S(Object.create(null)),O=u=>!!A.value[u],U=(u,s)=>{s&&s.stopPropagation(),A.value[u]=!A.value[u]},te=S(Object.create(null)),se=u=>!!te.value[u],xe=(u,s)=>{s&&s.stopPropagation(),te.value[u]=!te.value[u]},ne=S(Object.create(null)),ae=u=>!!ne.value[u],fe=(u,s)=>{s&&s.stopPropagation(),ne.value[u]=!ne.value[u]},oe=S(Object.create(null)),le=u=>!!oe.value[u],_e=(u,s)=>{s&&s.stopPropagation(),oe.value[u]=!oe.value[u]},z=S({open:!1,id:null}),be=u=>{z.value={open:!0,id:u}},F=S({open:!1,id:null}),he=u=>{F.value={open:!0,id:u}},I=S({open:!1,id:null}),ke=u=>{I.value={open:!0,id:u}},V=S({open:!1,id:null,type:null}),we=u=>{const s=(u==null?void 0:u.exchange_type)==="offday"?"offday":"shift";V.value={open:!0,id:u.id,type:s}},$e=j(()=>V.value.type==="offday"?d:r),De=j(()=>`${V.value.type||"x"}-${V.value.id||"x"}`);function Ce(u){if(!u)return null;if(u instanceof Date)return isNaN(u)?null:u;const s=String(u).match(/^(\d{4})-(\d{2})-(\d{2})(?:[ T](\d{2}):(\d{2})(?::(\d{2}))?)?$/);if(!s)return null;const[,q,o,k,ie="00",Me="00",Le="00"]=s;return new Date(Number(q),Number(o)-1,Number(k),Number(ie),Number(Me),Number(Le))}const pe=u=>{const s=Ce(u);return s?s.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"2-digit"}):""};return(u,s)=>{const q=ce("RouterLink");return a(),i("div",Pt,[e("div",null,[e("div",Bt,[s[5]||(s[5]=e("div",{class:"flex items-center"},[e("i",{class:"fas fa-file mr-2 h-5 w-5"}),e("h2",{class:"text-xl font-semibold"},[h(" Applications "),e("span",{class:"text-xs ml-2 text-green-600"},"Latest")])],-1)),b(q,{to:{name:"MyLeaveApplications"},class:"text-xs text-blue-600 hover:underline"},{default:w(()=>s[4]||(s[4]=[h(" See more ")])),_:1,__:[4]})]),s[10]||(s[10]=e("hr",null,null,-1)),l.value.length===0?(a(),i("div",Ut," No applications ")):(a(),i("div",Vt,[(a(!0),i(E,null,R(l.value,o=>(a(),i("div",{key:o.id,class:"w-full"},[e("button",{class:"w-full text-left",onClick:k=>be(o.id)},[e("div",Wt,[e("div",zt,[e("button",{class:"shrink-0 inline-flex h-6 w-6 items-center justify-center rounded hover:bg-gray-100","aria-label":O(o.id)?"Collapse details":"Expand details",onClick:k=>U(o.id,k)},[e("i",{class:L(["fas fa-chevron-right transition-transform duration-200",O(o.id)?"rotate-90":""])},null,2)],8,Ft),e("h3",It,[h(" #"+p(o.id)+" ",1),e("span",Yt,"("+p($(o.leave_type_counts))+")",1)])]),e("span",{class:L(["text-xs px-2 py-1 rounded-full font-medium flex items-center whitespace-nowrap",x(o.status).cls])},p(x(o.status).title),3)])],8,qt),b(X,{name:"accordion"},{default:w(()=>[K(e("div",Ht,[e("div",Kt,[e("div",Gt,[s[6]||(s[6]=e("div",{class:"text-gray-500"},"Types",-1)),e("div",Jt,p($(o.leave_type_counts)||"—"),1)]),e("div",Qt,[s[7]||(s[7]=e("div",{class:"text-gray-500"},"Total days",-1)),e("div",Xt,p(o.total_days??"—"),1)]),e("div",Zt,[s[8]||(s[8]=e("div",{class:"text-gray-500"},"Resumption",-1)),e("div",es,p(B(o.resumption_date)||"—"),1)])]),e("div",ts,[s[9]||(s[9]=e("div",{class:"text-[12px] text-gray-500 mb-1"},"Dates",-1)),e("div",ss,[(a(!0),i(E,null,R(o.json_data||[],(k,ie)=>(a(),i("span",{key:ie,class:L(["inline-flex items-center rounded-full px-2 py-0.5 border text-[12px]",(k==null?void 0:k.leave_type_id)==="weekend"?"bg-gray-100 text-gray-700 border-gray-300":"bg-sky-50 text-sky-700 border-sky-200"])},[h(p(B(k==null?void 0:k.date))+" ",1),(k==null?void 0:k.leave_type_id)=="weekend"?(a(),i("span",ns,"(Weekend)")):D("",!0)],2))),128))])])],512),[[Q,O(o.id)]])]),_:2},1024)]))),128))]))]),e("div",as,[e("div",os,[s[12]||(s[12]=e("div",{class:"flex items-center"},[e("i",{class:"fas fa-walking mr-2 h-5 w-5"}),e("h2",{class:"text-base font-semibold"},"Short Leave")],-1)),b(q,{to:{name:"MyShortLeaves"},class:"text-xs text-blue-600 hover:underline"},{default:w(()=>s[11]||(s[11]=[h("See more")])),_:1,__:[11]})]),s[16]||(s[16]=e("hr",null,null,-1)),v.value.length===0?(a(),i("div",ls," No short leave ")):(a(),i("div",is,[(a(!0),i(E,null,R(v.value,o=>(a(),i("div",{key:o.id,class:"w-full"},[e("button",{class:"w-full text-left",onClick:k=>he(o.id)},[e("div",ds,[e("div",us,[e("button",{class:"shrink-0 inline-flex h-6 w-6 items-center justify-center rounded hover:bg-gray-100","aria-label":se(o.id)?"Collapse details":"Expand details",onClick:k=>xe(o.id,k)},[e("i",{class:L(["fas fa-chevron-right transition-transform duration-200",se(o.id)?"rotate-90":""])},null,2)],8,cs),e("h3",ps,[h(" #"+p(o.id)+" ",1),e("span",ys,"("+p(o.type)+")",1)])]),e("span",{class:L(["text-xs px-2 py-1 rounded-full",x(o.status).cls])},p(x(o.status).title),3)])],8,rs),b(X,{name:"accordion"},{default:w(()=>[K(e("div",ms,[e("div",vs,[e("div",gs,[s[13]||(s[13]=e("div",{class:"text-gray-500"},"Type",-1)),e("div",xs,p(o.type||"—"),1)]),e("div",fs,[s[14]||(s[14]=e("div",{class:"text-gray-500"},"Date",-1)),e("div",_s,p(B(o.date)||"—"),1)]),e("div",bs,[s[15]||(s[15]=e("div",{class:"text-gray-500"},"Status",-1)),e("div",hs,p(x(o.status).title),1)])])],512),[[Q,se(o.id)]])]),_:2},1024)]))),128))]))]),e("div",ks,[e("div",ws,[s[19]||(s[19]=e("div",{class:"flex items-center"},[e("i",{class:"fas fa-exchange-alt mr-2 h-5 w-5"}),e("h2",{class:"text-base font-semibold"},"Exchange")],-1)),e("div",$s,[b(q,{to:{name:"MyShiftExchangeList"},class:"text-xs text-blue-600 hover:underline"},{default:w(()=>s[17]||(s[17]=[h("Shift")])),_:1,__:[17]}),b(q,{to:{name:"MyOffdayExchangeList"},class:"text-xs text-blue-600 hover:underline"},{default:w(()=>s[18]||(s[18]=[h("Offday")])),_:1,__:[18]})])]),s[23]||(s[23]=e("hr",null,null,-1)),C.value.length===0?(a(),i("div",Ds," No exchange ")):(a(),i("div",Cs,[(a(!0),i(E,null,R(C.value,o=>(a(),i("div",{key:o.id,class:"w-full"},[e("button",{class:"w-full text-left",onClick:k=>we(o)},[e("div",Ls,[e("div",Ss,[e("button",{class:"shrink-0 inline-flex h-6 w-6 items-center justify-center rounded hover:bg-gray-100","aria-label":ae(o.id)?"Collapse details":"Expand details",onClick:k=>fe(o.id,k)},[e("i",{class:L(["fas fa-chevron-right transition-transform duration-200",ae(o.id)?"rotate-90":""])},null,2)],8,Ts),e("h3",As,[h(" #"+p(o.id)+" ",1),o.exchange_type?(a(),i("span",Ns,"("+p(o.exchange_type)+")",1)):D("",!0)])]),e("span",{class:L(["text-xs px-2 py-1 rounded-full",x(o.status).cls])},p(x(o.status).title),3)])],8,Ms),b(X,{name:"accordion"},{default:w(()=>[K(e("div",Es,[e("div",Rs,[e("div",Os,[s[20]||(s[20]=e("div",{class:"text-gray-500"},"Type",-1)),e("div",js,p(o.exchange_type||"—"),1)]),e("div",Ps,[s[21]||(s[21]=e("div",{class:"text-gray-500"},"Current date",-1)),e("div",Bs,p(B(o.current_date)||"—"),1)]),e("div",Us,[s[22]||(s[22]=e("div",{class:"text-gray-500"},"Status",-1)),e("div",Vs,p(x(o.status).title),1)])])],512),[[Q,ae(o.id)]])]),_:2},1024)]))),128))]))]),e("div",qs,[e("div",Ws,[s[25]||(s[25]=e("div",{class:"flex items-center"},[e("i",{class:"fas fa-user-check mr-2 h-5 w-5"}),e("h2",{class:"text-base font-semibold"},"Manual Attendance")],-1)),b(q,{to:{name:"MyManualAttendanceList"},class:"text-xs text-blue-600 hover:underline"},{default:w(()=>s[24]||(s[24]=[h("See more")])),_:1,__:[24]})]),s[29]||(s[29]=e("hr",null,null,-1)),P.value.length===0?(a(),i("div",zs," No manual application ")):(a(),i("div",Fs,[(a(!0),i(E,null,R(P.value,o=>(a(),i("div",{key:o.id,class:"w-full"},[e("button",{class:"w-full text-left",onClick:k=>ke(o.id)},[e("div",Ys,[e("div",Hs,[e("button",{class:"shrink-0 inline-flex h-6 w-6 items-center justify-center rounded hover:bg-gray-100","aria-label":le(o.id)?"Collapse details":"Expand details",onClick:k=>_e(o.id,k)},[e("i",{class:L(["fas fa-chevron-right transition-transform duration-200",le(o.id)?"rotate-90":""])},null,2)],8,Ks),e("h3",Gs,[h(" #"+p(o.id)+" ",1),e("span",Js,"("+p(o.type)+")",1)])]),e("span",{class:L(["text-xs px-2 py-1 rounded-full",x(o.status).cls])},p(x(o.status).title),3)])],8,Is),b(X,{name:"accordion"},{default:w(()=>[K(e("div",Qs,[e("div",Xs,[e("div",Zs,[s[26]||(s[26]=e("div",{class:"text-gray-500"},"Type",-1)),e("div",en,p(o.type||"—"),1)]),e("div",tn,[s[27]||(s[27]=e("div",{class:"text-gray-500"},"Check-in",-1)),e("div",sn,p(o.check_in?pe(o.check_in):pe(o.check_out)),1)]),e("div",nn,[s[28]||(s[28]=e("div",{class:"text-gray-500"},"Status",-1)),e("div",an,p(x(o.status).title),1)])])],512),[[Q,le(o.id)]])]),_:2},1024)]))),128))]))]),z.value.open?(a(),T(_(y),{key:0,open:z.value.open,"onUpdate:open":s[0]||(s[0]=o=>z.value.open=o),id:z.value.id},null,8,["open","id"])):D("",!0),F.value.open?(a(),T(_(c),{key:1,open:F.value.open,"onUpdate:open":s[1]||(s[1]=o=>F.value.open=o),id:F.value.id},null,8,["open","id"])):D("",!0),I.value.open?(a(),T(_(g),{key:2,open:I.value.open,"onUpdate:open":s[2]||(s[2]=o=>I.value.open=o),id:I.value.id},null,8,["open","id"])):D("",!0),V.value.open?(a(),T(Ae($e.value),{key:De.value,open:V.value.open,"onUpdate:open":s[3]||(s[3]=o=>V.value.open=o),id:V.value.id},null,40,["open","id"])):D("",!0)])}}},ln=We(on,[["__scopeId","data-v-411c7c40"]]),rn={class:"bg-white shadow-md rounded-lg p-4"},dn={class:"space-y-3"},un={key:0,class:"text-xs italic text-center py-4 text-gray-500"},cn={class:"flex items-center space-x-4"},pn={key:0,class:"h-3 w-3 bg-red-600 rounded-full inline-block"},yn={key:1,class:"inline-block"},mn={class:"absolute top-10 left-1/2 -translate-x-1/2 bg-gray-800 text-white text-xs rounded py-1 px-2 opacity-0 group-hover:opacity-100 transition pointer-events-none z-10 whitespace-nowrap"},vn={class:"text-sm font-medium text-gray-900"},gn={class:"text-xs text-gray-500 mt-0.5"},xn={class:"text-xl font-bold text-gray-800 flex items-center gap-2 p-4"},fn={class:"space-y-5 px-4 md:px-6 py-4"},_n={class:"text-sm text-gray-500 flex items-center gap-2"},bn={class:"flex justify-end gap-3 mt-6"},hn={__name:"DashboardRecentNotices",setup(f){const y=G(),{userDashboard:c}=W(y),g=Ne(),r=j(()=>{var m,t;if(c.value&&c.value.notices){const n=(t=(m=c.value)==null?void 0:m.notices)==null?void 0:t.find(l=>!l.user_feedback);if(n)return n}return null}),d=()=>{if(!r.value)return;const m=r.value.type===1?`/notice-details/${r.value.id}`:`/policy-details/${r.value.id}`;g.push(m)};return(m,t)=>{var l;const n=ce("RouterLink");return a(),i("div",rn,[t[7]||(t[7]=Ee('<div class="flex justify-between items-start mb-1"><div class="flex items-center"><i class="fas fa-file mr-2 h-5 w-5"></i><h2 class="text-xl font-semibold">Notices</h2></div></div><hr class="mb-3">',2)),e("div",dn,[((l=_(c).notices)==null?void 0:l.length)===0?(a(),i("div",un," No pending notice found ")):(a(!0),i(E,{key:1},R(_(c).notices,(v,C)=>(a(),i("div",{key:C,class:"flex items-center justify-between p-4 border rounded-lg shadow-sm hover:shadow transition-all bg-white"},[e("div",cn,[e("div",{class:L([["rounded-full",v.user_feedback?"bg-green-100":"bg-red-100"],"h-8 w-8 flex items-center justify-center rounded-full flex-shrink-0"])},[v.user_feedback?(a(),i("span",yn,t[2]||(t[2]=[e("i",{class:"far fa-check text-green-600"},null,-1)]))):(a(),i("span",pn)),e("div",mn,p(v.user_feedback?"Feedback Submitted":"Feedback Pending"),1)],2),e("div",null,[e("p",vn,p(v.title),1),e("p",gn,p(v.published_at),1)])]),b(n,{to:v.type===1?`/notice-details/${v.id}`:`/policy-details/${v.id}`,class:"text-blue-600 hover:text-blue-800 font-semibold text-sm"},{default:w(()=>t[3]||(t[3]=[h(" View ")])),_:2,__:[3]},1032,["to"])]))),128)),r.value?(a(),T(ze,{key:2,show:!0,onClose:t[1]||(t[1]=v=>r.value=null)},{default:w(()=>[e("div",xn,[t[4]||(t[4]=e("i",{class:"fas fa-bell text-blue-500"},null,-1)),h(" "+p(r.value.title),1)]),e("div",fn,[e("p",_n,[t[5]||(t[5]=e("i",{class:"fas fa-calendar-alt text-gray-400"},null,-1)),h(" Published: "+p(r.value.published_at),1)]),t[6]||(t[6]=e("p",{class:"text-base text-gray-700 leading-relaxed"}," You must read this notice before proceeding. ",-1)),e("div",bn,[e("button",{onClick:t[0]||(t[0]=v=>r.value=null),class:"bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium px-5 py-2 rounded-lg transition"}," Cancel "),e("button",{onClick:d,class:"bg-blue-600 hover:bg-blue-700 text-white font-semibold px-6 py-2.5 rounded-lg shadow transition"}," Read Details ")])])]),_:1})):D("",!0)])])}}},kn={class:"w-full px-6 py-4"},wn={class:"grid lg:grid-cols-4 gap-6"},$n={class:"card-bg gap-0 shadow-md border border-gray-300 col-span-full lg:col-span-3 lg:row-span-2"},Dn={class:"col-span-full lg:col-span-1 grid sm:grid-cols-2 lg:grid-cols-1 gap-6 sticky top-[80px]"},Cn={class:"card-bg gap-0 shadow-md border border-gray-300"},Mn={class:"card-bg gap-0 shadow-md border border-gray-300"},Ln={class:"card-bg gap-0 shadow-md border border-gray-300"},Sn={__name:"DashboardEmployeeView",setup(f){return(y,c)=>(a(),i("div",kn,[e("div",wn,[e("div",$n,[b(Tt)]),e("div",Dn,[e("div",Cn,[b(ln)]),e("div",Mn,[b(hn)]),e("div",Ln,[b(jt)])])])]))}},Fn={__name:"DashBoard",setup(f){const y=ve(),c=G(),{userDashboard:g}=W(c),{user:r}=W(y),d=j(()=>{var t;return["admin","super_admin","developer"].includes((t=r==null?void 0:r.value)==null?void 0:t.role)}),m=S(null);return ge(async()=>{var n,l;r.value||await y.fetchUser(),await c.fetchUserDashboardData(),d.value&&await c.fetchAdminDashboardData();const t=(l=(n=g.value)==null?void 0:n.notices)==null?void 0:l.find(v=>!v.user_feedback);t&&(m.value=t)}),(t,n)=>d.value&&_(y).isAdminMood?(a(),T(et,{key:0})):(a(),T(Sn,{key:1}))}};export{Fn as default};
