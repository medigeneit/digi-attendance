import{u as B,b as C,r as y,e as V,x as b,c as n,o,a as t,g as A,f as M,q as w,k as f,h as j,v as F,F as k,n as q,t as v,j as N}from"./index-D6IyOSuI.js";import{_ as T}from"./EmployeeFilter-Bpn5aPL1.js";import{L as D}from"./LoaderView-CbihmVPO.js";import{S as E}from"./SelectedEmployeeCard-CGsr6FiJ.js";import{u as R}from"./attendance-CQv1Z_mq.js";import{u as $}from"./user-CqPNJv3N.js";import"./company-B6Y6Xppm.js";import"./department-D8otYRXI.js";import"./SelectDropdown-gBLt9qrB.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./UserChip-Qp-JYzPq.js";const z={class:"px-4 space-y-4"},G={class:"flex flex-wrap gap-4"},H={key:0,class:"flex justify-between gap-4 text-sm"},J={key:2,class:"space-y-4"},K={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},O={class:"text-sm font-semibold text-blue-700 border-b pb-1 mb-2"},P={class:"flex items-center gap-1 text-gray-700"},Q={class:"text-right text-gray-500 bg-blue-100 px-2 py-0.5 rounded text-[10px]"},re={__name:"EmployeeAttendanceLog",setup(W){const u=B(),l=C(),_=$(),c=R(),m=y(null),i=y(l.query.date||c.selectedMonth),s=y({company_id:l.query.company_id||"",department_id:l.query.department_id||"all",type:l.query.type||"all",employee_id:l.query.employee_id||"",category:""}),g=async a=>{a?(await _.fetchUser(a),m.value=_.user):m.value=null},p=async()=>{s.value.employee_id&&i.value&&await c.getMonthlyAttendanceLog(s.value.employee_id,i.value)};V(async()=>{s.value.employee_id&&(await g(s.value.employee_id),await p())}),b(()=>s.value.employee_id,async(a,e)=>{a&&a!==e&&(await g(a),await p(),u.replace({query:{...l.query,employee_id:a}}))}),b(i,a=>{u.replace({query:{...l.query,date:a}}),p()});const L=()=>u.go(-1),S=a=>new Date(a).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),U=()=>{u.replace({query:{...l.query,company_id:s.value.company_id,department_id:s.value.department_id,type:s.value.type,employee_id:s.value.employee_id}})};return(a,e)=>(o(),n("div",z,[t("div",{class:"flex items-center justify-between gap-2"},[t("button",{class:"btn-3",onClick:L},e[2]||(e[2]=[t("i",{class:"far fa-arrow-left"},null,-1),t("span",{class:"hidden md:flex"},"Back",-1)])),e[3]||(e[3]=t("h1",{class:"title-md md:title-lg flex-wrap text-center"},"Attendance Log",-1)),e[4]||(e[4]=t("div",null,null,-1))]),t("div",G,[w(T,{modelValue:s.value,"onUpdate:modelValue":e[0]||(e[0]=r=>s.value=r),"initial-value":f(l).query,onFilterChange:U},null,8,["modelValue","initial-value"]),t("div",null,[j(t("input",{id:"monthSelect",type:"month","onUpdate:modelValue":e[1]||(e[1]=r=>i.value=r),onChange:p,class:"input-1"},null,544),[[F,i.value]])])]),m.value?(o(),n("div",H,[w(E,{user:m.value},null,8,["user"])])):A("",!0),f(c).isLoading?(o(),M(D,{key:1})):(o(),n("div",J,[t("div",K,[(o(!0),n(k,null,q(f(c).attendanceLogs,(r,x)=>(o(),n("div",{key:x,class:"bg-white shadow rounded-lg p-4"},[t("h3",O,v(x),1),(o(!0),n(k,null,q(r,(d,X)=>{var h;return o(),n("div",{key:d.id,class:"flex items-center justify-between text-xs mb-1"},[t("div",P,[e[5]||(e[5]=t("i",{class:"far fa-clock text-blue-500"},null,-1)),N(" "+v(S(d.timestamp)),1)]),t("div",Q,v(((h=d==null?void 0:d.device)==null?void 0:h.name)||"Unknown"),1)])}),128))]))),128))])]))]))}};export{re as default};
