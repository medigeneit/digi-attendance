const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LeaveApplicationModal-BrpuH_8t.js","assets/index-9kk1Rb8m.js","assets/index-DrYp2YyM.css","assets/ApprovalItem-DKb5dW3c.js","assets/AcceptAndRejectHandler-_kJH6BuH.js","assets/LoaderView-BSUNsil6.js","assets/ShareComponent-_hsC9Fd5.js","assets/leave-application-BllX8T93.js","assets/LeaveApplicationModal-B7WJltA7.css","assets/ShortLeaveDetailsModal-BV_gYjvF.js","assets/ScreenshotCapture-CabdRCGm.js","assets/html2canvas.esm-CBrSDip1.js","assets/short-leave-Chl_xxdI.js","assets/ShortLeaveDetailsModal-D4avNQ1k.css","assets/ManualAttendanceDetailsModal-FHZA_4-h.js","assets/manual-attendance-DtditoDx.js","assets/ManualAttendanceDetailsModal-MS8n2gFL.css","assets/ShiftExchangeDetailsModal-CXJ3lH6v.js","assets/exchange-VHMco2Vm.js","assets/ShiftExchangeDetailsModal-BlZsJzAI.css","assets/OffdayExchangeDetailsModal-BJblcmiG.js","assets/OffdayExchangeDetailsModal-jTt80Glg.css"])))=>i.map(i=>d[i]);
import{g as ge,D as Z,x as $,p as me,c as d,o as l,d as w,m as C,a as e,b as L,t as m,n as M,E as $e,w as S,s as D,k as A,F as q,e as I,j as P,R as Ye,G as De,r as B,h as Ce,q as J,l as X,H as Me,f as Le,u as be,I as ne,i as We,J as ie,K as ze,L as ae}from"./index-9kk1Rb8m.js";import{u as oe}from"./user-dwfEEAp6.js";import{L as He}from"./LoaderView-BSUNsil6.js";import{_ as Ke}from"./SearchInput-CjMGhfgf.js";import{o as ve,g as pe,a as ye,b as Ge,c as Je}from"./datetime-Du_mcDA9.js";import{m as Xe}from"./task-tree-wODDhwOu.js";import{u as Ze}from"./useTaskStore-D60dIbDz.js";import{_ as Qe,a as et}from"./TodoSection-CUV3SVdO.js";import{_ as tt}from"./TaskTreeViewWithSubTable-12gUZkD4.js";import{O as st}from"./OverlyModal-CPs9Htsg.js";import"./requirement--T1VDmNa.js";import"./useTodoDateStore-DbDA_8Cz.js";import"./url-Buz9GlSr.js";import"./TodoItemCard-CkS91rDt.js";import"./DepartmentChip-DivEwKYg.js";import"./UserChip-snegnESj.js";import"./useTodoStore-Be_jnavl.js";import"./DraggableList.vue_vue_type_script_setup_true_lang-lL0fu1jQ.js";import"./TodoCreateEditShow-DDvRbbXd.js";import"./company-DE4mkias.js";import"./useTodoProjectStore-D25tnCY6.js";import"./CompanyDepartmentSelectInput-CbtHFRqf.js";import"./SelectDropdown-BT6KjSeS.js";import"./TaskSelectionInput-BNJWpC8d.js";import"./TaskTitle-gVP_5AYi.js";import"./TaskUrgentBadge-DWqJNrIe.js";import"./TaskAssignedUsers-Dglnsv0K.js";import"./TaskIsClosedBadge-CDPVOgFK.js";import"./TaskSupervisorAndEmployee-CBHI9zV5.js";const nt={class:"grid gap-4 md:grid-cols-3 mt-4 px-4 container mx-auto"},at={class:"text-3xl"},ot={class:"text-3xl"},lt={class:"text-3xl"},rt={class:"text-3xl"},it={class:"text-3xl"},dt={class:"text-3xl"},ut={class:"text-3xl"},ct={class:"text-3xl"},pt={class:"text-3xl"},yt={class:"text-3xl"},mt={class:"text-3xl"},vt={__name:"DashboardAdminView",setup(_){const p=oe();ge();const{dashboardInfo:f,selectedDate:b}=Z(p),v=$(()=>new Date);return(x,u)=>{const o=me("RouterLink");return l(),d("div",nt,[w(o,{to:{name:"TodayAttendanceReport",query:{status:"all"}},class:"main-button"},{default:C(()=>{var t;return[e("span",at,m((t=M(f))==null?void 0:t.totalUsers),1),u[0]||(u[0]=L(" Total Employees "))]}),_:1,__:[0]}),w(o,{to:{name:"TodayAttendanceReport",query:{status:"Present"}},class:"main-button"},{default:C(()=>{var t;return[e("span",ot,m((t=M(f))==null?void 0:t.todayPresents),1),u[1]||(u[1]=L(" Today Present "))]}),_:1,__:[1]}),w(o,{to:{name:"TodayAttendanceReport",query:{status:"Absent"}},class:"main-button"},{default:C(()=>{var t;return[e("span",lt,m((t=M(f))==null?void 0:t.todayAbsents),1),u[2]||(u[2]=L(" Today Absent "))]}),_:1,__:[2]}),w(o,{to:{name:"LeaveApplicationsForDay",query:{applicationType:"today"}},class:"main-button"},{default:C(()=>{var t;return[e("span",rt,m((t=M(f))==null?void 0:t.todayLeaves),1),u[3]||(u[3]=L(" Today Leave "))]}),_:1,__:[3]}),w(o,{to:{name:"LeaveApplicationsForDay",query:{applicationType:"tomorrow"}},class:"main-button"},{default:C(()=>{var t;return[e("span",it,m((t=M(f))==null?void 0:t.tomorrowLeaves),1),u[4]||(u[4]=L(" Tomorrow Leave "))]}),_:1,__:[4]}),w(o,{to:{name:"DateWiseShortLeaveList",query:{date:M(b)}},class:"main-button"},{default:C(()=>{var t;return[e("span",dt,m((t=M(f))==null?void 0:t.todayShortLeaves),1),u[5]||(u[5]=L(" Today Short Leaves "))]}),_:1,__:[5]},8,["to"]),w(o,{to:{name:"DailyLateAttendanceReport",query:{date:M(b)}},class:"main-button"},{default:C(()=>{var t;return[e("span",ut,m((t=M(f))==null?void 0:t.todayLateEntries),1),u[6]||(u[6]=L(" Today Late Report "))]}),_:1,__:[6]},8,["to"]),w(o,{to:{name:"PreviousAfterApplicationList",query:{applicationType:"prev",date:M(b)}},class:"main-button"},{default:C(()=>{var t;return[e("span",ct,m((t=M(f))==null?void 0:t.prevWeekLeaves),1),u[7]||(u[7]=L(" Leave history of previous week "))]}),_:1,__:[7]},8,["to"]),w(o,{to:{name:"PreviousAfterApplicationList",query:{applicationType:"after",date:M(b)}},class:"main-button"},{default:C(()=>{var t;return[e("span",pt,m((t=M(f))==null?void 0:t.nextWeekLeaves),1),u[8]||(u[8]=L(" Upcoming leaves "))]}),_:1,__:[8]},8,["to"]),w(o,{to:{name:"TodoList",query:{day:v.value.getDate(),month:v.value.getMonth()+1,year:v.value.getFullYear(),type:"day-view"}},class:"main-button"},{default:C(()=>{var t;return[e("span",yt,m((t=M(f))==null?void 0:t.todayTotalTodos),1),u[9]||(u[9]=L(" Today Todos "))]}),_:1,__:[9]},8,["to"]),w(o,{to:{name:"TodoList",query:{month:v.value.getMonth()+1,year:v.value.getFullYear(),type:"month-view"}},class:"main-button"},{default:C(()=>{var t;return[e("span",mt,m((t=M(f))==null?void 0:t.thisMonthTotalTodos),1),u[10]||(u[10]=L(" Todos In This Month "))]}),_:1,__:[10]},8,["to"]),w(o,{to:{name:"WeekLeaveHistories",query:{month:v.value.getMonth()+1,year:v.value.getFullYear(),type:"month-view"}},class:"main-button"},{default:C(()=>u[11]||(u[11]=[L(" Week Leave Histories ")])),_:1,__:[11]},8,["to"])])}}},fe=(_,p,f,b)=>{const v=new Date(b,f-1,p);return _.filter(x=>{const u=x.deadline?new Date(x.deadline):null,o=ve(new Date);if(x.assigned_at){const t=ve(new Date(x.assigned_at));if(v<t)return!1;let c=null;return x.completed_at&&(c=ve(new Date(x.completed_at))),!(c&&c<v||u&&u<v&&v>o)}return!1}).map(x=>{let u=!1;return x.deadline&&(u=new Date(x.deadline)<v),{...x,deadline_crossed:u}})},ft={class:"px-4 py-2 flex items-center bg-gray-50 group"},xt=["disabled"],gt={class:"ml-4 md:ml-auto flex items-center gap-2"},bt=["value"],ht=$e({__name:"DailyTaskHeading",props:{selectedDay:{type:String,required:!0},loading:{type:Boolean,default:!1}},emits:["change",,"reloadClick","monthWiseButtonClick"],setup(_,{emit:p}){const f=_,b=p;function v(){b("change",pe(new Date))}function x(){const o=new Date(f.selectedDay);o.setDate(o.getDate()+1),b("change",pe(o))}function u(){const o=new Date(f.selectedDay);o.setDate(o.getDate()-1),b("change",pe(o))}return(o,t)=>(l(),d("div",ft,[t[4]||(t[4]=e("h2",{class:"leading-none font-semibold text-lg"},"Daily Task",-1)),e("button",{class:"btn-3 mx-4 h-7",onClick:t[0]||(t[0]=S(c=>b("monthWiseButtonClick"),["prevent"]))},"Month Wise"),e("button",{class:"btn-3 mx-4 h-7",onClick:S(v,["prevent"])},"Today"),e("button",{class:D(["btn-3 px-2 py-2 mx-4 size-7 disabled:text-gray-300 disabled:border-gray-300",{"animate-spin text-gray-300 border-gray-300 !bg-opacity-0":_.loading}]),onClick:t[1]||(t[1]=S(c=>b("reloadClick"),["prevent"])),disabled:_.loading},t[3]||(t[3]=[e("i",{class:"fas fa-redo-alt"},null,-1)]),10,xt),e("div",gt,[e("button",{class:"btn-2 h-7",onClick:S(u,["prevent"])},"Previous Day"),e("button",{class:"btn-2 h-7",onClick:S(x,["prevent"])},"Next Day"),e("input",{type:"date",value:_.selectedDay,onInput:t[2]||(t[2]=c=>{var h;return b("change",(h=c.target)==null?void 0:h.value)}),class:"border px-2 rounded"},null,40,bt)])]))}}),_t={class:"px-4 py-2 flex items-center bg-gray-50 group"},kt=["disabled"],wt={class:"ml-4 md:ml-auto flex items-center gap-2"},$t=["value"],Dt=$e({__name:"MonthlyTaskHeading",props:{selectedMonth:{type:String,required:!0},loading:{type:Boolean,default:!1}},emits:["reloadClick","dayWiseButtonClick","change"],setup(_,{emit:p}){const f=_,b=p;function v(){b("change",ye(new Date))}function x(){var h;const[o,t]=(h=f.selectedMonth)==null?void 0:h.split("-").map(Number),c=new Date(o,t,1);c.setMonth(c.getMonth()),b("change",ye(c))}function u(){var h;const[o,t]=(h=f.selectedMonth)==null?void 0:h.split("-").map(Number),c=new Date(o,t,1);c.setMonth(c.getMonth()-2),b("change",ye(c))}return(o,t)=>(l(),d("div",_t,[t[4]||(t[4]=e("h2",{class:"leading-none font-semibold text-lg"},"Monthly Task",-1)),e("button",{class:"btn-3 mx-4 h-7",onClick:t[0]||(t[0]=S(c=>b("dayWiseButtonClick"),["prevent"]))},"Day Wise"),e("button",{class:"btn-3 mx-4 h-7",onClick:S(v,["prevent"])},"Current Month"),e("button",{class:D(["btn-3 px-2 py-2 mx-4 size-7 disabled:text-gray-300 disabled:border-gray-300",{"animate-spin text-gray-300 border-gray-300 !bg-opacity-0":_.loading}]),onClick:t[1]||(t[1]=S(c=>b("reloadClick"),["prevent"])),disabled:_.loading},t[3]||(t[3]=[e("i",{class:"fas fa-redo-alt"},null,-1)]),10,kt),e("div",wt,[e("button",{class:"btn-2 h-7",onClick:S(u,["prevent"])},"Previous Month"),e("button",{class:"btn-2 h-7",onClick:S(x,["prevent"])},"Next Month"),e("input",{type:"month",value:_.selectedMonth,onInput:t[2]||(t[2]=c=>{var h;return b("change",(h=c.target)==null?void 0:h.value)}),class:"border px-2 rounded"},null,40,$t)])]))}}),Ct={key:0,class:"space-y-6 py-2"},Mt={key:0,class:"fad fa-folder text-xs mr-2"},Lt={key:1,class:"fad fa-file-alt text-xs mr-2"},At={key:2,class:"text-center w-full mt-4 text-xs text-gray-600"},xe={__name:"TaskListOnDay",props:{isCurrentMonth:{type:Boolean,default:!1},tasks:{type:Array,default:()=>[]},limit:{type:Number,default:null},tree:{type:Boolean,default:!1}},emits:["clickOnMore"],setup(_,{emit:p}){const f=_,b=p,v=$(()=>{var x;return f.limit?((x=f==null?void 0:f.tasks)==null?void 0:x.slice(0,f.limit))||[]:[...f.tasks]});return(x,u)=>(l(),d("div",null,[_.tree?(l(),d("div",Ct,[(l(!0),d(q,null,I(v.value,(o,t)=>(l(),P(tt,{"hide-buttons":"","hide-assigned-users":"",task:o,key:o.id,index:t,class:"shadow hover:shadow-md border border-blue-300 rounded-md *:border-none"},null,8,["task","index"]))),128))])):(l(),d("ul",{key:1,class:D({"text-gray-500 group-hover:text-gray-900":!_.isCurrentMonth})},[(l(!0),d(q,null,I(v.value,o=>(l(),d("li",{class:"mb-2",key:o.id},[w(M(Ye),{to:`/tasks/${o.id}`,target:"_blank",class:"flex items-center hover:underline hover:text-blue-600"},{default:C(()=>[o.children_task_count>0?(l(),d("i",Mt)):A("",!0),o.children_task_count==0?(l(),d("i",Lt)):A("",!0),e("span",{class:D(["line-clamp-1",{"text-red-800":o.deadline_crossed}])},m(o.title),3)]),_:2},1032,["to"])]))),128))],2)),_.tasks.length-v.value.length>0?(l(),d("div",At,[e("button",{onClick:u[0]||(u[0]=S(o=>b("clickOnMore",o),["prevent"])),class:"text-blue-600 hover:underline"}," +"+m(_.tasks.length-v.value.length)+" More Tasks ",1)])):A("",!0)]))}},Tt={class:"relative"},St={class:"ml-auto"},Rt=["onClick"],Nt={key:0,class:"absolute inset-0 bg-gray-300 bg-opacity-90"},Pt={class:"absolute inset-16 bg-white border border-blue-500 rounded-md z-20 overflow-y-auto"},qt={class:"text-lg font-semibold mb-4 sticky top-0 border-b border-blue-200 px-4 z-30 py-3 bg-white flex items-center"},Et={__name:"TaskInMonth",props:{month:{type:String,required:!0,validator:_=>/^\d{4}-(0[1-9]|1[0-2])$/.test(_)},tasks:{type:Array,required:!0,default:()=>[]}},setup(_){const p=De({day:null,month:null,year:null});function f(o){o.stopPropagation(),p.day=null,p.month=null,p.year=null}function b(o,t,c,h){o.stopPropagation(),p.day=t,p.month=c,p.year=h}const v=(o,t,c)=>{const h=new Date;return o===h.getDate()&&t===h.getMonth()+1&&c===h.getFullYear()},x=(o,t,c)=>o===p.day&&t===p.month&&c===p.year,u=(o,t,c,h)=>{const T=v(o,t,c);return{"bg-green-100 text-green-900 border-blue-500 border-2 scale-105 z-10":T,"border-r border-t hover:border border-blue-200  hover:scale-105 hover:z-20 hover:bg-blue-50":!T,"bg-gray-50":!h}};return(o,t)=>(l(),d("div",Tt,[_.month?(l(),P(Qe,{key:0,month:_.month,class:"border-t border-blue-200/50 relative"},{date:C(({day:c,month:h,year:T,isCurrentMonth:r})=>[e("div",{tabindex:"0",class:D(["transition origin-center p-2 outline-blue-600 outline-1 cursor-pointer",u(c,h,T,r)])},[e("div",{class:D(["font-bold w-full flex items-center",{"text-gray-300":!r}])},[e("div",null,m(c),1),e("div",St,[x(c,h,T)?A("",!0):(l(),d("button",{key:0,class:"btn-icon",onClick:S(s=>b(s,c,h,T),["prevent"])},t[0]||(t[0]=[e("i",{class:"fas fa-expand-arrows text-gray-400 hover:text-gray-600"},null,-1)]),8,Rt))])],2),w(xe,{"is-current-month":r,tasks:M(fe)(_.tasks,c,h,T),limit:3,class:"text-xs mt-4",onClickOnMore:s=>b(s,c,h,T)},null,8,["is-current-month","tasks","onClickOnMore"])],2)]),"calender-bottom":C(()=>[p.day?(l(),d("div",Nt,[e("div",Pt,[e("div",qt,[L(" Tasks for "+m(p.day)+"/"+m(p.month)+"/"+m(p.year)+" ",1),e("button",{class:"ml-auto",type:"button",onClick:S(f,["prevent"])},t[1]||(t[1]=[e("i",{class:"fas fa-times"},null,-1)]))]),w(xe,{class:"p-4","is-current-month":o.isCurrentMonth,tasks:M(fe)(_.tasks,p.day,p.month,p.year),tree:!0},null,8,["is-current-month","tasks"])])])):A("",!0)]),_:1},8,["month"])):A("",!0)]))}},jt={class:"bg-opacity-90 relative"},Bt={class:"rounded-md z-20"},Ot={class:"text-md sticky top-0 border-b px-4 z-30 py-3 bg-white flex items-center shadow"},It={class:"flex justify-between items-center gap-6 w-full"},Ut={key:0,class:"text-blue-800 bg-blue-100 rounded-full border px-4 py-0.5 text-sm"},Ft={key:1,class:"text-blue-800 bg-blue-100 rounded-full border px-4 py-0.5 text-sm"},Vt={class:"ml-auto flex items-center gap-2"},Yt={key:0,class:"w-32 relative h-8"},Wt={__name:"DailyTask",setup(_){const p=De({day:null,month:null,year:null}),f=B(),b=B(),v=B("loading"),x=Ze(),u=ge(),o=B(""),t=B("day-wise"),c=B("not-completed");Ce(()=>{f.value=pe(new Date),b.value=ye(new Date)}),J(f,s=>{const[a,i,R]=s.split("-").map(Number);p.day=R,p.month=i,p.year=a}),J(b,s=>{const[a,i]=s.split("-").map(Number);p.day=1,p.month=i,p.year=a}),J(()=>p.month,async()=>{v.value="loading",await h(),v.value=""}),J(t,s=>{if(s=="month-wise"){const[a,i]=f.value.split("-");b.value=`${a}-${i}`}});async function h(){await x.fetchMyTasks()}const T=async()=>{v.value="loading",await h(),v.value=""},r=$(()=>{var i,R;const s=N=>{var E,U;return o.value?(U=N==null?void 0:N.toUpperCase())==null?void 0:U.includes((E=o.value)==null?void 0:E.toUpperCase()):!0},a=t.value=="day-wise"?{"user-ids":(i=u==null?void 0:u.user)==null?void 0:i.id,status:c.value}:{"user-ids":(R=u==null?void 0:u.user)==null?void 0:R.id};return Xe(fe(x.tasks,p.day,p.month,p.year),a).filter(N=>{var E;return s(N.title)||((E=N.children_tasks)==null?void 0:E.some(U=>s(U==null?void 0:U.title)))}).map(N=>({...N,children_tasks:N.children_tasks.filter(E=>s(E.title))}))});return(s,a)=>(l(),d("div",null,[t.value=="day-wise"?(l(),P(ht,{key:0,loading:v.value=="loading","selected-day":f.value,onChange:a[0]||(a[0]=i=>f.value=i),onReloadClick:T,onMonthWiseButtonClick:a[1]||(a[1]=i=>t.value="month-wise")},null,8,["loading","selected-day"])):A("",!0),t.value=="month-wise"?(l(),P(Dt,{key:1,loading:v.value=="loading","selected-month":b.value,onChange:a[2]||(a[2]=i=>b.value=i),onDayWiseButtonClick:a[3]||(a[3]=i=>t.value="day-wise"),onReloadClick:T},null,8,["loading","selected-month"])):A("",!0),e("div",jt,[e("div",Bt,[e("div",Ot,[e("div",It,[t.value=="day-wise"?(l(),d("div",Ut,m(M(Ge)(f.value)),1)):A("",!0),t.value=="month-wise"?(l(),d("div",Ft,m(M(Je)(b.value)),1)):A("",!0),e("div",Vt,[t.value=="day-wise"?(l(),d("div",Yt,[a[7]||(a[7]=e("label",{class:"absolute text-xs left-3 -top-1.5 bg-slate-100 text-blue-500"},"Status",-1)),X(e("select",{"onUpdate:modelValue":a[4]||(a[4]=i=>c.value=i),class:"h-8 text-xs px-2 text-gray-600 border-2 border-gray-400 rounded-md w-full"},a[6]||(a[6]=[e("option",{value:""},"--ALL TASKS--",-1),e("option",{value:"not-completed"},"Not Completed",-1)]),512),[[Me,c.value]])])):A("",!0),w(Ke,{modelValue:o.value,"onUpdate:modelValue":a[5]||(a[5]=i=>o.value=i),class:"w-full md:w-48 md:ml-auto h-8","debounce-time":0},null,8,["modelValue"])])])]),t.value=="day-wise"?(l(),P(xe,{key:0,class:"p-4 overflow-y-auto",tasks:r.value,tree:!0},null,8,["tasks"])):t.value=="month-wise"?(l(),P(Et,{key:1,tasks:r.value||[],month:b.value,class:"bg-gray-50"},null,8,["tasks","month"])):A("",!0)]),v.value==="loading"?(l(),P(He,{key:0,class:"absolute inset-0 flex items-center justify-center z-20 bg-opacity-70"})):A("",!0)])]))}},zt={class:"bg-white shadow-md rounded-lg"},Ht={class:"flex flex-wrap items-center justify-between gap-2 py-2 px-4"},Kt={key:0,class:"flex items-center gap-2"},Gt=["value"],Jt={class:"overflow-x-auto shadow-md min-h-max"},Xt={class:"min-w-full text-sm text-left text-gray-500 table-fixed"},Zt={class:"text-xs"},Qt={class:"text-sm font-semibold text-blue-800"},es={__name:"DashboardLeaveBalance",setup(_){const p=oe(),{userDashboard:f}=Z(p),b=B("all"),v=new Date().getFullYear(),x=$(()=>{var r;return((r=f.value)==null?void 0:r.leave_balance)??[]}),u=r=>Number.isInteger(r)&&r>=1990&&r<=v+1,o=r=>{if(!r||typeof r!="object")return null;const s=[r.year,r.leave_year,r.leaveYear];for(const a of s){const i=Number(a);if(u(i))return i}return null},t=r=>!r||typeof r!="object"?null:r.balances||r.items||r.leave_balance||null,c=$(()=>{const r=x.value,s=new Set;return Array.isArray(r)?r.forEach(a=>{const i=o(a);i&&s.add(i);const R=t(a);Array.isArray(R)&&(i&&s.add(i),R.forEach(N=>{const E=o(N);E&&s.add(E)}))}):r&&typeof r=="object"&&Object.keys(r).forEach(a=>{const i=Number(a);u(i)&&s.add(i)}),Array.from(s).sort((a,i)=>i-a)}),h=r=>Array.isArray(r)?r.some(s=>Array.isArray(t(s)))?r.flatMap(s=>t(s)||[]):r:r&&typeof r=="object"?Object.values(r).flatMap(s=>Array.isArray(s)?s:[]):[],T=$(()=>{const r=x.value,s=b.value;if(!r)return[];if(s==="all")return h(r);const a=Number(s);if(!u(a))return h(r);if(Array.isArray(r)){const i=r.find(R=>o(R)===a&&Array.isArray(t(R)));return i?t(i)||[]:r.filter(R=>o(R)===a)}if(typeof r=="object"){const i=r[String(a)];return Array.isArray(i)?i:[]}return[]});return(r,s)=>(l(),d("div",zt,[e("div",Ht,[s[3]||(s[3]=e("h2",{class:"text-xl font-semibold"},"Leave Balance",-1)),c.value.length?(l(),d("div",Kt,[s[2]||(s[2]=e("span",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wide"},"Year",-1)),X(e("select",{"onUpdate:modelValue":s[0]||(s[0]=a=>b.value=a),class:"input-1 py-1 px-2 rounded text-xs font-semibold uppercase tracking-wide text-slate-500 border-slate-200 bg-slate-50"},[s[1]||(s[1]=e("option",{value:"all"},"All",-1)),(l(!0),d(q,null,I(c.value,a=>(l(),d("option",{key:a,value:a},m(a),9,Gt))),128))],512),[[Me,b.value]])])):A("",!0)]),e("div",Jt,[e("table",Xt,[e("thead",null,[e("tr",Zt,[s[4]||(s[4]=e("th",{class:"px-2 py-1 font-semibold text-gray-900 border bg-gray-50"},null,-1)),(l(!0),d(q,null,I(T.value,a=>(l(),d("th",{class:"px-4 text-center py-1 font-semibold text-gray-900 border bg-gray-50 w-40",key:a.id||a.name||a.leave_type},m(a.name),1))),128))])]),e("tbody",null,[e("tr",null,[s[5]||(s[5]=e("td",{class:"px-4 py-4 font-medium text-gray-900 border text-xs"},"Total",-1)),(l(!0),d(q,null,I(T.value,a=>(l(),d("td",{class:"px-4 text-center py-3 font-medium text-gray-900 border",key:a.id||a.name||a.leave_type},m(a.annual_quota),1))),128))]),e("tr",null,[s[6]||(s[6]=e("td",{class:"px-4 py-3 font-medium text-gray-900 border text-xs"},"Used",-1)),(l(!0),d(q,null,I(T.value,a=>(l(),d("td",{class:"px-4 text-center py-4 font-medium text-gray-900 border",key:a.id||a.name||a.leave_type},m(a.used_days),1))),128))]),e("tr",Qt,[s[7]||(s[7]=e("td",{class:"px-4 py-3 border text-xs"},"Balance",-1)),(l(!0),d(q,null,I(T.value,a=>(l(),d("td",{class:"px-4 text-center py-4 border",key:a.id||a.name||a.leave_type},m(a.remaining_days),1))),128))])])])])]))}},ts={class:"flex items-center gap-2 mr-2"},ss=["onClick"],ns=["onClick"],as={__name:"DashboardMyTodoList",setup(_){const p=Le(),f=be();function b(v){f.push({query:{...p.query,"todos[type]":v.type,"todos[year]":v.year,"todos[month]":v.month,"todos[day]":v.day}})}return(v,x)=>{const u=me("RouterLink");return l(),P(et,{type:M(p).query["todos[type]"],year:M(p).query["todos[year]"],month:M(p).query["todos[month]"],day:M(p).query["todos[day]"],userRole:"employee",onChangeInput:b},{beforeHeader:C(()=>x[0]||(x[0]=[e("h2",{class:"text-md font-medium"},"Todo List",-1)])),typeSelection:C(({types:o,changeType:t,selected:c})=>{var h,T,r,s;return[e("div",ts,[e("button",{onClick:S(a=>{var i;return t((i=o[0])==null?void 0:i.value)},["prevent"]),class:D(["rounded text-sm h-[32px] w-20",(c==null?void 0:c.type)==((h=o[0])==null?void 0:h.value)?"btn-2":"btn-3"])},m((T=o[0])==null?void 0:T.label),11,ss),e("button",{onClick:S(a=>{var i;return t((i=o[1])==null?void 0:i.value)},["prevent"]),class:D(["rounded text-sm h-[32px] w-20",(c==null?void 0:c.type)==((r=o[1])==null?void 0:r.value)?"btn-2 ":"btn-3"])},m((s=o[1])==null?void 0:s.label),11,ns),w(u,{to:"/my-personal-activity-report",class:"inline-flex items-center gap-2 rounded-md border border-sky-300 px-3 h-[32px] text-sm text-sky-700 bg-sky-50 hover:bg-sky-100 dark:border-sky-800 dark:text-sky-200 dark:bg-sky-900/20 dark:hover:bg-sky-900/40"},{default:C(()=>x[1]||(x[1]=[e("i",{class:"fas fa-tasks"},null,-1),e("span",{class:"hidden lg:inline"},"Personal Activity Report (PAR)",-1),e("span",{class:"inline lg:hidden"},"PAR",-1)])),_:1,__:[1]})])]}),_:1},8,["type","year","month","day"])}}},os={class:"bg-white shadow-sm rounded-xl p-3 sm:p-4"},ls=["aria-expanded"],rs={class:"flex items-center gap-2"},is={class:"text-[11px] rounded-full bg-yellow-100 text-gray-700 px-2 py-0.5"},ds={key:0,class:"text-xs italic text-center py-4 text-gray-500"},us={key:1,class:"py-2 space-y-1"},cs=["onClick"],ps={class:"min-w-0"},ys={class:"text-[13px] text-gray-900 truncate"},ms={class:"font-medium"},vs={class:"opacity-70"},fs={class:"truncate max-w-[10rem]"},xs={key:0,class:"inline-flex items-center gap-1 rounded-md border border-gray-200 bg-gray-50 px-1.5 py-0.5"},gs={key:0,class:"flex justify-center"},bs={class:"mt-4"},hs=["aria-expanded"],_s={class:"flex items-center gap-2"},ks={class:"text-[11px] rounded-full bg-yellow-100 text-gray-700 px-2 py-0.5"},ws={key:0,class:"text-xs italic text-center py-4 text-gray-500"},$s={key:1,class:"py-2 space-y-1"},Ds=["onClick"],Cs={class:"min-w-0"},Ms={class:"text-[13px] text-gray-900 truncate"},Ls={class:"font-medium"},As={class:"opacity-70"},Ts={key:0,class:"flex justify-center"},Ss={class:"mt-4"},Rs=["aria-expanded"],Ns={class:"flex items-center gap-2"},Ps={class:"text-[11px] rounded-full bg-yellow-100 text-gray-700 px-2 py-0.5"},qs={key:0,class:"text-xs italic text-center py-4 text-gray-500"},Es={key:1,class:"py-2 space-y-1"},js=["onClick"],Bs={class:"min-w-0"},Os={class:"text-[13px] text-gray-900 truncate"},Is={class:"font-medium"},Us={class:"opacity-70"},Fs={key:0,class:"flex justify-center"},Vs={class:"mt-4"},Ys=["aria-expanded"],Ws={class:"flex items-center gap-2"},zs={class:"text-[11px] rounded-full bg-yellow-100 text-gray-700 px-2 py-0.5"},Hs={key:0,class:"text-xs italic text-center py-4 text-gray-500"},Ks={key:1,class:"py-2 space-y-1"},Gs=["onClick"],Js={class:"min-w-0"},Xs={class:"text-[13px] text-gray-900 truncate"},Zs={class:"font-medium"},Qs={class:"opacity-70"},en={key:0,class:"flex justify-center"},K=5,de="inline-flex items-center rounded-full px-2 py-0.5 text-[11px] font-medium",ue="flex items-center justify-between gap-2",tn="text-[12px] text-gray-600 flex items-center gap-2 flex-wrap",ce="block w-full text-left rounded-md px-2.5 py-2 hover:bg-slate-50/70 focus:bg-slate-50/90 focus:outline-none transition",sn={__name:"DashboardRecentApplications",setup(_){const p=ne(()=>ae(()=>import("./LeaveApplicationModal-BrpuH_8t.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]))),f=ne(()=>ae(()=>import("./ShortLeaveDetailsModal-BV_gYjvF.js"),__vite__mapDeps([9,1,2,3,4,5,10,11,6,12,13]))),b=ne(()=>ae(()=>import("./ManualAttendanceDetailsModal-FHZA_4-h.js"),__vite__mapDeps([14,1,2,3,4,5,6,15,16]))),v=ne(()=>ae(()=>import("./ShiftExchangeDetailsModal-CXJ3lH6v.js"),__vite__mapDeps([17,1,2,3,4,5,10,11,6,18,19]))),x=ne(()=>ae(()=>import("./OffdayExchangeDetailsModal-BJblcmiG.js"),__vite__mapDeps([20,1,2,3,4,5,10,11,6,18,21]))),u=oe(),{userDashboard:o}=Z(u),t=$(()=>{var y;return((y=o.value)==null?void 0:y.lists)??{}}),c=$(()=>t.value.current_month_leave??[]),h=$(()=>t.value.short_leave??[]),T=$(()=>t.value.exchange??[]),r=$(()=>t.value.manual_attendance??[]),s=y=>y==="Pending"||y===null,a=$(()=>c.value.filter(y=>s(y==null?void 0:y.status)).length),i=$(()=>h.value.filter(y=>s(y==null?void 0:y.status)).length),R=$(()=>T.value.filter(y=>s(y==null?void 0:y.status)).length),N=$(()=>r.value.filter(y=>s(y==null?void 0:y.status)).length),E=$(()=>c.value.slice(0,K)),U=$(()=>h.value.slice(0,K)),Ae=$(()=>T.value.slice(0,K)),Te=$(()=>r.value.slice(0,K)),he=$(()=>Math.max(0,c.value.length-K)),_e=$(()=>Math.max(0,h.value.length-K)),ke=$(()=>Math.max(0,T.value.length-K)),we=$(()=>Math.max(0,r.value.length-K)),Se={null:{title:"Handover Waiting",cls:"bg-gray-100 text-gray-800 ring-1 ring-gray-200"},Pending:{title:"Pending",cls:"bg-amber-50 text-amber-700 ring-1 ring-amber-200"},Approved:{title:"Approved",cls:"bg-emerald-50 text-emerald-700 ring-1 ring-emerald-200"},Rejected:{title:"Rejected",cls:"bg-rose-50 text-rose-700 ring-1 ring-rose-200"}},Y=y=>Se[y??"null"]??{title:String(y||"Unknown"),cls:"bg-gray-100 text-gray-700 ring-1 ring-gray-200"},Re=y=>Array.isArray(y)?y.filter(n=>n==null?void 0:n.name).map(n=>`${n.name} (${(n==null?void 0:n.days)??0})`).join(", "):"",Q=B({open:!1,id:null}),ee=B({open:!1,id:null}),te=B({open:!1,id:null}),Ne=y=>{Q.value={open:!0,id:y}},Pe=y=>{ee.value={open:!0,id:y}},qe=y=>{te.value={open:!0,id:y}},W=B({open:!1,id:null,type:null}),Ee=y=>{const n=(y==null?void 0:y.exchange_type)==="offday"?"offday":"shift";W.value={open:!0,id:y.id,type:n}},je=$(()=>W.value.type==="offday"?x:v),Be=$(()=>`${W.value.type||"x"}-${W.value.id||"x"}`);function Oe(y){if(!y)return null;const n=String(y).trim();let k=n.match(/^(\d{4})-(\d{2})-(\d{2})$/);return k?new Date(+k[1],+k[2]-1,+k[3],0,0,0):(k=n.match(/^(\d{4})-(\d{2})-(\d{2})[ T](\d{2}):(\d{2})(?::(\d{2}))?$/),k?new Date(+k[1],+k[2]-1,+k[3],+k[4],+k[5],+(k[6]||0)):null)}function z(y){const n=Oe(y);return n?n.toLocaleDateString(void 0,{day:"2-digit",month:"short",year:"numeric"}):""}function Ie(y){const n=String(y||"").match(/^(\d{4})-(\d{2})-(\d{2})$/);return n?new Date(+n[1],+n[2]-1,+n[3],0,0,0):null}function Ue(y,n){const k=new Date(y);return k.setDate(k.getDate()+n),k}function Fe(y,n){return y&&n&&y.getFullYear()===n.getFullYear()&&y.getMonth()===n.getMonth()&&y.getDate()===n.getDate()}function le(y){const n=y.getFullYear(),k=String(y.getMonth()+1).padStart(2,"0"),g=String(y.getDate()).padStart(2,"0");return`${n}-${k}-${g}`}function Ve(y){const n=Array.isArray(y)?y.slice():[],k=j=>Array.from(new Set(j)).sort(),g=k(n.filter(j=>(j==null?void 0:j.leave_type_id)!=="weekend").map(j=>j.date).filter(Boolean)),F=k(n.filter(j=>(j==null?void 0:j.leave_type_id)==="weekend").map(j=>j.date).filter(Boolean)),V=[];let H=null,G=null;for(const j of g){const se=Ie(j);if(se){if(!H){H=G=se;continue}Fe(Ue(G,1),se)?G=se:(V.push({from:le(H),to:le(G)}),H=G=se)}}return H&&G&&V.push({from:le(H),to:le(G)}),{ranges:V,weekends:F,leaveCount:g.length}}const O=B({apps:!!a.value,short:!!i.value,exch:!!R.value,manual:!!N.value}),re=y=>{O.value[y]=!O.value[y]};return(y,n)=>{const k=me("RouterLink");return l(),d("div",os,[e("section",null,[e("header",{class:"flex items-center justify-between mb-1 cursor-pointer select-none",role:"button","aria-expanded":O.value.apps,onClick:n[1]||(n[1]=g=>re("apps")),tabindex:"0"},[n[14]||(n[14]=We('<div class="flex items-center gap-2"><i class="fas fa-file text-gray-600"></i><h2 class="text-sm font-semibold text-gray-900"> Applications <span class="ml-2 align-middle text-[10px] sm:text-[11px] inline-flex items-center gap-1 rounded-full bg-blue-50 text-blue-700 px-2 py-0.5"><i class="far fa-clock"></i> Latest </span></h2></div>',1)),e("div",rs,[e("span",is,m(a.value),1),w(k,{to:{name:"MyLeaveApplications"},class:"text-[11px] text-blue-700 hover:underline",onClick:n[0]||(n[0]=S(()=>{},["stop"]))},{default:C(()=>n[13]||(n[13]=[L(" See all ")])),_:1,__:[13]}),e("i",{class:D(["fas fa-chevron-down text-gray-600 transition-transform duration-200",O.value.apps?"rotate-180":""])},null,2)])],8,ls),X(e("div",null,[n[17]||(n[17]=e("hr",{class:"border-gray-100"},null,-1)),c.value.length===0?(l(),d("div",ds,"No applications")):(l(),d("div",us,[(l(!0),d(q,null,I(E.value,g=>(l(),d("button",{key:g.id,class:D(ce),onClick:F=>Ne(g.id)},[e("div",{class:D(ue)},[e("div",ps,[e("div",ys,[e("span",ms,"#"+m(g.id),1),e("span",vs," – "+m(Re(g.leave_type_counts)||"—"),1)]),e("div",{class:D(tn)},[(l(!0),d(q,null,I([Ve(g.json_data)],F=>(l(),d(q,{key:"info-"+g.id},[F.leaveCount>1?(l(!0),d(q,{key:0},I(F.ranges,(V,H)=>(l(),d("span",{key:H,class:"inline-flex items-center gap-1 rounded-md border border-gray-200 bg-gray-50 px-1.5 py-0.5"},[n[15]||(n[15]=e("i",{class:"far fa-calendar-minus"},null,-1)),e("span",fs,m(V.from!==V.to?z(V.from)+" – "+z(V.to):z(V.from)),1)]))),128)):(l(),d(q,{key:1},[F.ranges[0]?(l(),d("span",xs,[n[16]||(n[16]=e("i",{class:"far fa-calendar-day"},null,-1)),e("span",null,m(z(F.ranges[0].from)),1)])):A("",!0)],64))],64))),128))])]),e("span",{class:D([de,Y(g.status).cls])},m(Y(g.status).title),3)])],8,cs))),128)),he.value?(l(),d("div",gs,[w(k,{to:{name:"MyLeaveApplications"},class:"text-[12px] text-blue-700 hover:underline"},{default:C(()=>[L(" + "+m(he.value)+" more ",1)]),_:1})])):A("",!0)]))],512),[[ie,O.value.apps]])]),e("section",bs,[e("header",{class:"flex items-center justify-between mb-1 cursor-pointer select-none",role:"button","aria-expanded":O.value.short,onClick:n[3]||(n[3]=g=>re("short")),tabindex:"0"},[n[19]||(n[19]=e("div",{class:"flex items-center gap-2"},[e("i",{class:"fas fa-walking text-gray-600"}),e("h2",{class:"text-sm font-semibold text-gray-900"},"Short Leave")],-1)),e("div",_s,[e("span",ks,m(i.value),1),w(k,{to:{name:"MyShortLeaves"},class:"text-[11px] text-blue-700 hover:underline",onClick:n[2]||(n[2]=S(()=>{},["stop"]))},{default:C(()=>n[18]||(n[18]=[L(" See all ")])),_:1,__:[18]}),e("i",{class:D(["fas fa-chevron-down text-gray-600 transition-transform duration-200",O.value.short?"rotate-180":""])},null,2)])],8,hs),X(e("div",null,[n[20]||(n[20]=e("hr",{class:"border-gray-100"},null,-1)),h.value.length===0?(l(),d("div",ws,"No short leave")):(l(),d("div",$s,[(l(!0),d(q,null,I(U.value,g=>(l(),d("button",{key:g.id,class:D(ce),onClick:F=>Pe(g.id)},[e("div",{class:D(ue)},[e("div",Cs,[e("div",Ms,[e("span",Ls,m(z(g.date)),1),e("span",As," – "+m(g.type||"—"),1)])]),e("span",{class:D([de,Y(g.status).cls])},m(Y(g.status).title),3)])],8,Ds))),128)),_e.value?(l(),d("div",Ts,[w(k,{to:{name:"MyShortLeaves"},class:"text-[12px] text-blue-700 hover:underline"},{default:C(()=>[L(" + "+m(_e.value)+" more ",1)]),_:1})])):A("",!0)]))],512),[[ie,O.value.short]])]),e("section",Ss,[e("header",{class:"flex items-center justify-between mb-1 cursor-pointer select-none",role:"button","aria-expanded":O.value.exch,onClick:n[6]||(n[6]=g=>re("exch")),tabindex:"0"},[n[23]||(n[23]=e("div",{class:"flex items-center gap-2"},[e("i",{class:"fas fa-exchange-alt text-gray-600"}),e("h2",{class:"text-sm font-semibold text-gray-900"},"Exchange")],-1)),e("div",Ns,[e("span",Ps,m(R.value),1),w(k,{to:{name:"MyShiftExchangeList"},class:"text-[11px] text-blue-700 hover:underline",onClick:n[4]||(n[4]=S(()=>{},["stop"]))},{default:C(()=>n[21]||(n[21]=[L(" Shift ")])),_:1,__:[21]}),w(k,{to:{name:"MyOffdayExchangeList"},class:"text-[11px] text-blue-700 hover:underline",onClick:n[5]||(n[5]=S(()=>{},["stop"]))},{default:C(()=>n[22]||(n[22]=[L(" Offday ")])),_:1,__:[22]}),e("i",{class:D(["fas fa-chevron-down text-gray-600 transition-transform duration-200",O.value.exch?"rotate-180":""])},null,2)])],8,Rs),X(e("div",null,[n[24]||(n[24]=e("hr",{class:"border-gray-100"},null,-1)),T.value.length===0?(l(),d("div",qs,"No exchange")):(l(),d("div",Es,[(l(!0),d(q,null,I(Ae.value,g=>(l(),d("button",{key:g.id,class:D(ce),onClick:F=>Ee(g)},[e("div",{class:D(ue)},[e("div",Bs,[e("div",Os,[e("span",Is,m(z(g.current_date)),1),e("span",Us," – "+m(g.exchange_type||"—"),1)])]),e("span",{class:D([de,Y(g.status).cls])},m(Y(g.status).title),3)])],8,js))),128)),ke.value?(l(),d("div",Fs,[w(k,{to:{name:"MyShiftExchangeList"},class:"text-[12px] text-blue-700 hover:underline"},{default:C(()=>[L(" + "+m(ke.value)+" more ",1)]),_:1})])):A("",!0)]))],512),[[ie,O.value.exch]])]),e("section",Vs,[e("header",{class:"flex items-center justify-between mb-1 cursor-pointer select-none",role:"button","aria-expanded":O.value.manual,onClick:n[8]||(n[8]=g=>re("manual")),tabindex:"0"},[n[26]||(n[26]=e("div",{class:"flex items-center gap-2"},[e("i",{class:"fas fa-user-check text-gray-600"}),e("h2",{class:"text-sm font-semibold text-gray-900"},"Manual Attendance")],-1)),e("div",Ws,[e("span",zs,m(N.value),1),w(k,{to:{name:"MyManualAttendanceList"},class:"text-[11px] text-blue-700 hover:underline",onClick:n[7]||(n[7]=S(()=>{},["stop"]))},{default:C(()=>n[25]||(n[25]=[L(" See all ")])),_:1,__:[25]}),e("i",{class:D(["fas fa-chevron-down text-gray-600 transition-transform duration-200",O.value.manual?"rotate-180":""])},null,2)])],8,Ys),X(e("div",null,[n[27]||(n[27]=e("hr",{class:"border-gray-100"},null,-1)),r.value.length===0?(l(),d("div",Hs,"No manual application")):(l(),d("div",Ks,[(l(!0),d(q,null,I(Te.value,g=>(l(),d("button",{key:g.id,class:D(ce),onClick:F=>qe(g.id)},[e("div",{class:D(ue)},[e("div",Js,[e("div",Xs,[e("span",Zs,m(g.check_in?z(g.check_in):z(g.check_out)),1),e("span",Qs," – "+m(g.type||"—"),1)])]),e("span",{class:D([de,Y(g.status).cls])},m(Y(g.status).title),3)])],8,Gs))),128)),we.value?(l(),d("div",en,[w(k,{to:{name:"MyManualAttendanceList"},class:"text-[12px] text-blue-700 hover:underline"},{default:C(()=>[L(" + "+m(we.value)+" more ",1)]),_:1})])):A("",!0)]))],512),[[ie,O.value.manual]])]),Q.value.open?(l(),P(M(p),{key:0,open:Q.value.open,"onUpdate:open":n[9]||(n[9]=g=>Q.value.open=g),id:Q.value.id},null,8,["open","id"])):A("",!0),ee.value.open?(l(),P(M(f),{key:1,open:ee.value.open,"onUpdate:open":n[10]||(n[10]=g=>ee.value.open=g),id:ee.value.id},null,8,["open","id"])):A("",!0),te.value.open?(l(),P(M(b),{key:2,open:te.value.open,"onUpdate:open":n[11]||(n[11]=g=>te.value.open=g),id:te.value.id},null,8,["open","id"])):A("",!0),W.value.open?(l(),P(ze(je.value),{key:Be.value,open:W.value.open,"onUpdate:open":n[12]||(n[12]=g=>W.value.open=g),id:W.value.id},null,40,["open","id"])):A("",!0)])}}},nn={class:"bg-white shadow-sm rounded-xl p-3"},an={class:"flex items-center justify-between"},on={key:0,class:"text-[11px] text-gray-500"},ln={class:"inline-flex items-center gap-1 px-1.5 py-0.5 rounded-full bg-blue-50 text-blue-700"},rn={key:0,class:"text-xs italic text-center py-6 text-gray-500"},dn={key:1,class:"space-y-2"},un={class:"flex items-start gap-3 min-w-0"},cn={class:"min-w-0"},pn={class:"text-sm font-medium text-gray-900 truncate"},yn={class:"text-[11px] text-gray-500 mt-0.5"},mn={class:"text-base font-semibold text-gray-800 flex items-center gap-2 p-3"},vn={class:"space-y-4 px-3 pb-4"},fn={class:"text-xs text-gray-500 flex items-center gap-2"},xn={class:"flex justify-end gap-2 mt-2"},gn={__name:"DashboardRecentNotices",setup(_){const p=oe(),{userDashboard:f}=Z(p),b=be(),v=r=>{if(!r)return"—";const s=new Date(r);return isNaN(+s)?r:new Intl.DateTimeFormat(void 0,{day:"2-digit",month:"short",year:"numeric"}).format(s)},x=r=>{if(!r)return"";const s=new Date(r);if(isNaN(+s))return"";const a=(Date.now()-s.getTime())/1e3,i=new Intl.RelativeTimeFormat(void 0,{numeric:"auto"}),R=[["year",60*60*24*365],["month",60*60*24*30],["week",60*60*24*7],["day",60*60*24],["hour",60*60],["minute",60],["second",1]];for(const[N,E]of R){const U=Math.round(a/E);if(Math.abs(U)>=1)return i.format(-U,N)}return i.format(0,"second")},u=r=>{const s=v(r),a=x(r);return a?`${s} · ${a}`:s},o=$(()=>{var r;return((r=f.value)==null?void 0:r.notices)??[]}),t=$(()=>[...o.value].sort((s,a)=>{const i=s!=null&&s.user_feedback?1:0,R=a!=null&&a.user_feedback?1:0;if(i!==R)return i-R;const N=new Date((s==null?void 0:s.published_at)||0).getTime();return new Date((a==null?void 0:a.published_at)||0).getTime()-N})),c=$(()=>t.value.find(r=>!(r!=null&&r.user_feedback))||null),h=B(!!c.value);J(c,r=>{h.value=!!r});const T=r=>{const s=r||c.value;if(!s)return;const a=s.type===1?`/notice-details/${s.id}`:`/policy-details/${s.id}`;b.push(a)};return(r,s)=>{const a=me("RouterLink");return l(),d("div",nn,[e("div",an,[s[4]||(s[4]=e("div",{class:"flex items-center gap-1.5"},[e("i",{class:"fas fa-bell"}),e("h2",{class:"text-base font-semibold"},"Notices")],-1)),t.value.length?(l(),d("div",on,[e("span",ln,[s[3]||(s[3]=e("span",{class:"h-1.5 w-1.5 rounded-full bg-blue-500"},null,-1)),L(" "+m(t.value.filter(i=>!i.user_feedback).length)+" pending ",1)])])):A("",!0)]),s[10]||(s[10]=e("hr",{class:"my-2 border-gray-200"},null,-1)),t.value.length?(l(),d("div",dn,[(l(!0),d(q,null,I(t.value,i=>(l(),d("article",{key:i.id,class:"group flex items-center justify-between gap-2 p-3 border border-gray-100 rounded-lg hover:border-blue-200 transition"},[e("div",un,[e("span",{class:D(["inline-flex items-center gap-1 px-1.5 py-0.5 rounded-full text-[10px] font-medium mt-0.5",i.user_feedback?"bg-emerald-50 text-emerald-700":"bg-rose-50 text-rose-700"])},[e("span",{class:D(["h-2 w-2 rounded-full",i.user_feedback?"bg-emerald-600":"bg-rose-600 animate-pulse"])},null,2)],2),e("div",cn,[e("h3",pn,m(i.title||"Untitled notice"),1),e("p",yn,[s[5]||(s[5]=e("i",{class:"fas fa-calendar-alt text-gray-400 mr-1"},null,-1)),L(" "+m(u(i.published_at)),1)])])]),w(a,{to:i.type===1?`/notice-details/${i.id}`:`/policy-details/${i.id}`,class:"shrink-0 inline-flex items-center gap-1 text-blue-600 hover:text-blue-700 text-xs font-semibold"},{default:C(()=>s[6]||(s[6]=[L(" View "),e("i",{class:"fas fa-arrow-right text-[10px]"},null,-1)])),_:2,__:[6]},1032,["to"])]))),128))])):(l(),d("div",rn," No pending notice found ")),c.value?(l(),P(st,{key:2,show:h.value,onClose:s[2]||(s[2]=i=>h.value=!1)},{default:C(()=>[e("div",mn,[s[7]||(s[7]=e("i",{class:"fas fa-bell text-blue-600"},null,-1)),L(" "+m(c.value.title||"New notice"),1)]),e("div",vn,[e("p",fn,[s[8]||(s[8]=e("i",{class:"fas fa-calendar-alt text-gray-400"},null,-1)),L(" Published: "+m(u(c.value.published_at)),1)]),s[9]||(s[9]=e("p",{class:"text-sm text-gray-700"}," You must read this notice before proceeding. ",-1)),e("div",xn,[e("button",{onClick:s[0]||(s[0]=i=>h.value=!1),class:"bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium px-3 py-1.5 rounded-md transition text-sm"}," Later "),e("button",{onClick:s[1]||(s[1]=i=>T(c.value)),class:"bg-blue-600 hover:bg-blue-700 text-white font-semibold px-4 py-1.5 rounded-md transition text-sm"}," Read ")])])]),_:1},8,["show"])):A("",!0)])}}},bn={class:"w-full px-6 py-4"},hn={class:"grid lg:grid-cols-4 gap-6 items-start"},_n={class:"gap-0 rounded-md bg-white shadow-md border border-gray-300 col-span-full lg:col-span-3 lg:row-span-2"},kn={class:"flex items-center justify-center gap-4 py-2"},wn={class:"col-span-full lg:col-span-1 grid sm:grid-cols-2 lg:grid-cols-1 gap-6 sticky top-[80px]"},$n={class:"card-bg gap-0 shadow-md border border-gray-300"},Dn={class:"card-bg gap-0 shadow-md border border-gray-300"},Cn={class:"card-bg gap-0 shadow-md border border-gray-300"},Mn={__name:"DashboardEmployeeView",setup(_){const p=B("todos"),f=Le(),b=be();return J(()=>p.value,function(v){v!=="todos"&&b.replace({query:Object.keys(f.query).filter(x=>!x.match(/^todos\[/)).reduce((x,u)=>(x[u]=f.query[u],x),{})})}),(v,x)=>(l(),d("div",bn,[e("div",hn,[e("div",_n,[e("div",kn,[e("button",{onClick:x[0]||(x[0]=S(u=>p.value="todos",["prevent"])),class:D(["!py-0.5 text-sm",{"btn-2":p.value=="todos","btn-3 hover:bg-gray-200 hover:text-blue-500":p.value!="todos"}])}," Todos ",2),e("button",{onClick:x[1]||(x[1]=S(u=>p.value="tasks",["prevent"])),class:D(["!py-0.5 text-sm",{"btn-2":p.value=="tasks","btn-3 hover:bg-gray-200 hover:text-blue-500":p.value!="tasks"}])}," Tasks ",2)]),p.value=="todos"?(l(),P(as,{key:0})):A("",!0),p.value=="tasks"?(l(),P(Wt,{key:1})):A("",!0)]),e("div",wn,[e("div",$n,[w(sn)]),e("div",Dn,[w(gn)]),e("div",Cn,[w(es)])])])]))}},na={__name:"DashBoard",setup(_){const p=ge(),f=oe(),{userDashboard:b}=Z(f),{user:v}=Z(p),x=$(()=>{var o;return["admin","super_admin","developer"].includes((o=v==null?void 0:v.value)==null?void 0:o.role)}),u=B(null);return Ce(async()=>{var t,c;v.value||await p.fetchUser(),await f.fetchUserDashboardData(),x.value&&await f.fetchAdminDashboardData();const o=(c=(t=b.value)==null?void 0:t.notices)==null?void 0:c.find(h=>!h.user_feedback);o&&(u.value=o)}),(o,t)=>x.value&&M(p).isAdminMood?(l(),P(vt,{key:0})):(l(),P(Mn,{key:1}))}};export{na as default};
